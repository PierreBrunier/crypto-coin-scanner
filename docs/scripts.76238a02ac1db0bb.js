!function(oc,vl){"object"==typeof exports&&"object"==typeof module?module.exports=vl():"function"==typeof define&&define.amd?define([],vl):"object"==typeof exports?exports.Plotly=vl():oc.Plotly=vl()}(self,function(){return function(){var oc={98847:function(Q,z,e){"use strict";var k=e(71828),A={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in A){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");k.addStyleRule(T,A[l])}},98222:function(Q,z,e){"use strict";Q.exports=e(82887)},27206:function(Q,z,e){"use strict";Q.exports=e(60822)},59893:function(Q,z,e){"use strict";Q.exports=e(23381)},5224:function(Q,z,e){"use strict";Q.exports=e(83832)},59509:function(Q,z,e){"use strict";Q.exports=e(72201)},75557:function(Q,z,e){"use strict";Q.exports=e(91815)},40338:function(Q,z,e){"use strict";Q.exports=e(21462)},35080:function(Q,z,e){"use strict";Q.exports=e(51319)},61396:function(Q,z,e){"use strict";Q.exports=e(57516)},40549:function(Q,z,e){"use strict";Q.exports=e(98128)},49866:function(Q,z,e){"use strict";Q.exports=e(99442)},36089:function(Q,z,e){"use strict";Q.exports=e(93740)},19548:function(Q,z,e){"use strict";Q.exports=e(8729)},35831:function(Q,z,e){"use strict";Q.exports=e(93814)},61039:function(Q,z,e){"use strict";Q.exports=e(14382)},97040:function(Q,z,e){"use strict";Q.exports=e(51759)},77986:function(Q,z,e){"use strict";Q.exports=e(10421)},24296:function(Q,z,e){"use strict";Q.exports=e(43102)},58872:function(Q,z,e){"use strict";Q.exports=e(92165)},29626:function(Q,z,e){"use strict";Q.exports=e(3325)},65591:function(Q,z,e){"use strict";Q.exports=e(36071)},69738:function(Q,z,e){"use strict";Q.exports=e(43905)},92650:function(Q,z,e){"use strict";Q.exports=e(35902)},35630:function(Q,z,e){"use strict";Q.exports=e(69816)},73434:function(Q,z,e){"use strict";Q.exports=e(94507)},27909:function(Q,z,e){"use strict";var k=e(19548);k.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),Q.exports=k},46163:function(Q,z,e){"use strict";Q.exports=e(15154)},96881:function(Q,z,e){"use strict";Q.exports=e(64943)},50581:function(Q,z,e){"use strict";Q.exports=e(21164)},55334:function(Q,z,e){"use strict";Q.exports=e(54186)},65317:function(Q,z,e){"use strict";Q.exports=e(94873)},10021:function(Q,z,e){"use strict";Q.exports=e(67618)},54201:function(Q,z,e){"use strict";Q.exports=e(58810)},5861:function(Q,z,e){"use strict";Q.exports=e(20593)},16122:function(Q,z,e){"use strict";Q.exports=e(29396)},83043:function(Q,z,e){"use strict";Q.exports=e(13551)},48131:function(Q,z,e){"use strict";Q.exports=e(46858)},47582:function(Q,z,e){"use strict";Q.exports=e(17988)},21641:function(Q,z,e){"use strict";Q.exports=e(68868)},96268:function(Q,z,e){"use strict";Q.exports=e(20467)},19440:function(Q,z,e){"use strict";Q.exports=e(91271)},99488:function(Q,z,e){"use strict";Q.exports=e(21461)},97393:function(Q,z,e){"use strict";Q.exports=e(85956)},25743:function(Q,z,e){"use strict";Q.exports=e(52979)},66398:function(Q,z,e){"use strict";Q.exports=e(32275)},17280:function(Q,z,e){"use strict";Q.exports=e(6419)},77900:function(Q,z,e){"use strict";Q.exports=e(61510)},81299:function(Q,z,e){"use strict";Q.exports=e(87619)},93005:function(Q,z,e){"use strict";Q.exports=e(93601)},40344:function(Q,z,e){"use strict";Q.exports=e(96595)},47645:function(Q,z,e){"use strict";Q.exports=e(70954)},6197:function(Q,z,e){"use strict";Q.exports=e(47462)},4534:function(Q,z,e){"use strict";Q.exports=e(17659)},85461:function(Q,z,e){"use strict";Q.exports=e(19990)},82884:function(Q){"use strict";Q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(Q,z,e){"use strict";var k=e(82884),A=e(41940),l=e(85555),T=e(44467).templatedArray;e(24695),Q.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:A({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:k.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:k.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:A({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(92605).draw;function T(d){k.filterVisible(d._fullLayout.annotations).forEach(function(t){var o=A.getFromId(d,t.xref),r=A.getFromId(d,t.yref),n=A.getRefType(t.xref),a=A.getRefType(t.yref);t._extremes={},"range"===n&&b(t,o),"range"===a&&b(t,r)})}function b(d,s){var t,o=s._id,r=o.charAt(0),n=d[r],a=d["a"+r],h=d["_"+r+"padplus"],f=d["_"+r+"padminus"],x={x:1,y:-1}[r]*d[r+"shift"],v=3*d.arrowsize*d.arrowwidth||0,g=v+x,y=v-x,p=3*d.startarrowsize*d.arrowwidth||0,m=p+x,w=p-x;if(d["a"+r+"ref"]===d[r+"ref"]){var u=A.findExtremes(s,[s.r2c(n)],{ppadplus:g,ppadminus:y}),S=A.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(f,w)});t={min:[u.min[0],S.min[0]],max:[u.max[0],S.max[0]]}}else m=a?m+a:m,w=a?w-a:w,t=A.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(h,g,m),ppadminus:Math.max(f,y,w)});d._extremes[o]=t}Q.exports=function(d){if(k.filterVisible(d._fullLayout.annotations).length&&d._fullData.length)return k.syncOrAsync([l,T],d)}},44317:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=e(44467).arrayEditor;function T(d,s){var t,o,r,n,a,i,c,h=d._fullLayout.annotations,f=[],x=[],v=[],g=(s||[]).length;for(t=0;t<h.length;t++)if(n=(r=h[t]).clicktoshow){for(o=0;o<g;o++)if(i=(a=s[o]).xaxis,c=a.yaxis,i._id===r.xref&&c._id===r.yref&&i.d2r(a.x)===b(r._xclick,i)&&c.d2r(a.y)===b(r._yclick,c)){(r.visible?"onout"===n?x:v:f).push(t);break}o===g&&r.visible&&"onout"===n&&x.push(t)}return{on:f,off:x,explicitOff:v}}function b(d,s){return"log"===s.type?s.l2r(d):s.d2r(d)}Q.exports={hasClickToShow:function(d,s){var t=T(d,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(d,s){var t,o,r=T(d,s),n=r.on,a=r.off.concat(r.explicitOff),i={},c=d._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(o=l(d.layout,"annotations",c[n[t]])).modifyItem("visible",!0),k.extendFlat(i,o.getUpdateObj());for(t=0;t<a.length;t++)(o=l(d.layout,"annotations",c[a[t]])).modifyItem("visible",!1),k.extendFlat(i,o.getUpdateObj());return A.call("update",d,{},i)}}}},25625:function(Q,z,e){"use strict";var k=e(71828),A=e(7901);Q.exports=function(l,T,b,d){d("opacity");var s=d("bgcolor"),t=d("bordercolor"),o=A.opacity(t);d("borderpad");var r=d("borderwidth"),n=d("showarrow");if(d("text",n?" ":b._dfltTitle.annotation),d("textangle"),k.coerceFont(d,"font",b.font),d("width"),d("align"),d("height")&&d("valign"),n){var a,i,c=d("arrowside");-1!==c.indexOf("end")&&(a=d("arrowhead"),i=d("arrowsize")),-1!==c.indexOf("start")&&(d("startarrowhead",a),d("startarrowsize",i)),d("arrowcolor",o?T.bordercolor:A.defaultLine),d("arrowwidth",2*(o&&r||1)),d("standoff"),d("startstandoff")}var h=d("hovertext"),f=b.hoverlabel||{};if(h){var x=d("hoverlabel.bgcolor",f.bgcolor||(A.opacity(s)?A.rgb(s):A.defaultLine)),v=d("hoverlabel.bordercolor",f.bordercolor||A.contrast(x));k.coerceFont(d,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||v})}d("captureevents",!!h)}},94128:function(Q,z,e){"use strict";var k=e(92770),A=e(58163);Q.exports=function(l,T,b,d){T=T||{};var s="log"===b&&"linear"===T.type;if(s||"linear"===b&&"log"===T.type)for(var o,r,n=l._fullLayout.annotations,a=T._id.charAt(0),i=0;i<n.length;i++)r="annotations["+i+"].",(o=n[i])[a+"ref"]===T._id&&c(a),o["a"+a+"ref"]===T._id&&c("a"+a);function c(h){var f=o[h],x=null;x=s?A(f,T.range):Math.pow(10,f),k(x)||(x=null),d(r+h,x)}}},84046:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(85501),T=e(25625),b=e(50215);function d(s,t,o){function r(S,_){return k.coerce(s,t,b,S,_)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,t,o,r);for(var i=t.showarrow,c=["x","y"],h=[-10,-30],f={_fullLayout:o},x=0;x<2;x++){var v=c[x],g=A.coerceRef(s,t,f,v,"","paper");if("paper"!==g&&A.getFromId(f,g)._annIndices.push(t._index),A.coercePosition(t,f,r,g,v,.5),i){var y="a"+v,p=A.coerceRef(s,t,f,y,"pixel",["pixel","paper"]);"pixel"!==p&&p!==g&&(p=t[y]="pixel"),A.coercePosition(t,f,r,p,y,"pixel"===p?h[x]:.4)}r(v+"anchor"),r(v+"shift")}if(k.noneOrAll(s,t,["x","y"]),i&&k.noneOrAll(s,t,["ax","ay"]),a){var w=r("xclick"),u=r("yclick");t._xclick=void 0===w?t.x:A.cleanPosition(w,f,t.xref),t._yclick=void 0===u?t.y:A.cleanPosition(u,f,t.yref)}}}Q.exports=function(s,t){l(s,t,{name:"annotations",handleItemDefaults:d})}},92605:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(74875),T=e(71828),b=T.strTranslate,d=e(89298),s=e(7901),t=e(91424),o=e(30211),r=e(63893),n=e(6964),a=e(28569),i=e(44467).arrayEditor,c=e(13011);function h(v,g){var y=v._fullLayout.annotations[g]||{},p=d.getFromId(v,y.xref),m=d.getFromId(v,y.yref);p&&p.setScale(),m&&m.setScale(),x(v,y,g,!1,p,m)}function f(v,g,y,p,m){var w=m[y],u=m[y+"ref"],S=-1!==y.indexOf("y"),_="domain"===d.getRefType(u),E=S?p.h:p.w;return v?_?w+(S?-g:g)/v._length:v.p2r(v.r2p(w)+g):w+(S?-g:g)/E}function x(v,g,y,p,m,w){var u,S,_=v._fullLayout,E=v._fullLayout._size,L=v._context.edits;p?(u="annotation-"+p,S=p+".annotations"):(u="annotation",S="annotations");var C=i(v.layout,S,g),P=C.modifyBase,I=C.modifyItem,j=C.getUpdateObj;_._infolayer.selectAll("."+u+'[data-index="'+y+'"]').remove();var R="clip"+_._uid+"_ann"+y;if(g._input&&!1!==g.visible){var H={x:{},y:{}},F=+g.textangle||0,U=_._infolayer.append("g").classed(u,!0).attr("data-index",String(y)).style("opacity",g.opacity),B=U.append("g").classed("annotation-text-g",!0),N=L[g.showarrow?"annotationTail":"annotationPosition"],J=g.captureevents||L.annotationText||N,Z=B.append("g").style("pointer-events",J?"all":null).call(n,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",xe(k.event))});g.hovertext&&Z.on("mouseover",function(){var fe=g.hoverlabel,Ee=fe.font,de=this.getBoundingClientRect(),we=v.getBoundingClientRect();o.loneHover({x0:de.left-we.left,x1:de.right-we.left,y:(de.top+de.bottom)/2-we.top,text:g.hovertext,color:fe.bgcolor,borderColor:fe.bordercolor,fontFamily:Ee.family,fontSize:Ee.size,fontColor:Ee.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:v})}).on("mouseout",function(){o.loneUnhover(_._hoverlayer.node())});var V=g.borderwidth,X=V+g.borderpad,K=Z.append("rect").attr("class","bg").style("stroke-width",V+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),ne=g.width||g.height,re=_._topclips.selectAll("#"+R).data(ne?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),re.exit().remove();var ae=g.font,le=_._meta?T.templateString(g.text,_._meta):g.text,pe=Z.append("text").classed("annotation-text",!0).text(le);L.annotationText?pe.call(r.makeEditable,{delegate:Z,gd:v}).call(ye).on("edit",function(fe){g.text=fe,this.call(ye),I("text",fe),m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0),A.call("_guiRelayout",v,j())}):pe.call(ye)}else k.selectAll("#"+R).remove();function xe(fe){var Ee={index:y,annotation:g._input,fullAnnotation:g,event:fe};return p&&(Ee.subplotId=p),Ee}function ye(fe){return fe.call(t.font,ae).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(fe,v,se),fe}function se(){var fe=pe.selectAll("a");1===fe.size()&&fe.text()===pe.text()&&Z.insert("a",":first-child").attr({"xlink:xlink:href":fe.attr("xlink:href"),"xlink:xlink:show":fe.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(K.node());var Ee=Z.select(".annotation-text-math-group"),de=!Ee.empty(),we=t.bBox((de?Ee:pe).node()),ke=we.width,Te=we.height,$=g.width||ke,oe=g.height||Te,he=Math.round($+2*X),me=Math.round(oe+2*X);function Me(At,ht){return"auto"===ht&&(ht=At<.3333333333333333?"left":At>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ht]}for(var Ie=!1,Pe=["x","y"],ze=0;ze<Pe.length;ze++){var ce,ge,_e,De,He,Ve=Pe[ze],nt=g[Ve+"ref"]||Ve,tt=g["a"+Ve+"ref"],at={x:m,y:w}[Ve],dt=(F+("x"===Ve?0:-90))*Math.PI/180,wt=he*Math.cos(dt),bt=me*Math.sin(dt),_t=Math.abs(wt)+Math.abs(bt),Lt=g[Ve+"anchor"],Ct=g[Ve+"shift"]*("x"===Ve?1:-1),Ot=H[Ve],Ht=d.getRefType(nt);if(at&&"domain"!==Ht){var It=at.r2fraction(g[Ve]);(It<0||It>1)&&(tt===nt?((It=at.r2fraction(g["a"+Ve]))<0||It>1)&&(Ie=!0):Ie=!0),ce=at._offset+at.r2p(g[Ve]),De=.5}else{var Ge="domain"===Ht;"x"===Ve?(_e=g[Ve],ce=Ge?at._offset+at._length*_e:ce=E.l+E.w*_e):(_e=1-g[Ve],ce=Ge?at._offset+at._length*_e:ce=E.t+E.h*_e),De=g.showarrow?.5:_e}if(g.showarrow){Ot.head=ce;var Ze=g["a"+Ve];if(He=wt*Me(.5,g.xanchor)-bt*Me(.5,g.yanchor),tt===nt){var Be=d.getRefType(tt);"domain"===Be?("y"===Ve&&(Ze=1-Ze),Ot.tail=at._offset+at._length*Ze):Ot.tail="paper"===Be?"y"===Ve?E.t+E.h*(Ze=1-Ze):E.l+E.w*Ze:at._offset+at.r2p(Ze),ge=He}else Ot.tail=ce+Ze,ge=He+Ze;Ot.text=Ot.tail+He;var Ye=_["x"===Ve?"width":"height"];if("paper"===nt&&(Ot.head=T.constrain(Ot.head,1,Ye-1)),"pixel"===tt){var rt=-Math.max(Ot.tail-3,Ot.text),Se=Math.min(Ot.tail+3,Ot.text)-Ye;rt>0?(Ot.tail+=rt,Ot.text+=rt):Se>0&&(Ot.tail-=Se,Ot.text-=Se)}Ot.tail+=Ct,Ot.head+=Ct}else ge=He=_t*Me(De,Lt),Ot.text=ce+He;Ot.text+=Ct,He+=Ct,g["_"+Ve+"padplus"]=_t/2+(ge+=Ct),g["_"+Ve+"padminus"]=_t/2-ge,g["_"+Ve+"size"]=_t,g["_"+Ve+"shift"]=He}if(Ie)Z.remove();else{var Re=0,Ke=0;"left"!==g.align&&(Re=($-ke)*("center"===g.align?.5:1)),"top"!==g.valign&&(Ke=(oe-Te)*("middle"===g.valign?.5:1)),de?Ee.select("svg").attr({x:X+Re-1,y:X+Ke}).call(t.setClipUrl,ne?R:null,v):pe.call(r.positionText,X+Re-we.left,X+Ke-we.top).call(t.setClipUrl,ne?R:null,v),re.select("rect").call(t.setRect,X,X,$,oe),K.call(t.setRect,V/2,V/2,he-V,me-V),Z.call(t.setTranslate,Math.round(H.x.text-he/2),Math.round(H.y.text-me/2)),B.attr({transform:"rotate("+F+","+H.x.text+","+H.y.text+")"});var Tt,Et=function(At,ht){U.selectAll(".annotation-arrow-g").remove();var pt=H.x.head,gt=H.y.head,Pt=H.x.tail+At,zt=H.y.tail+ht,Ut=H.x.text+At,Nt=H.y.text+ht,jt=T.rotationXYMatrix(F,Ut,Nt),Gt=T.apply2DTransform(jt),un=T.apply2DTransform2(jt),hn=+K.attr("width"),Qt=+K.attr("height"),_n=Ut-.5*hn,Fn=_n+hn,yn=Nt-.5*Qt,on=yn+Qt,pn=[[_n,yn,_n,on],[_n,on,Fn,on],[Fn,on,Fn,yn],[Fn,yn,_n,yn]].map(un);if(!pn.reduce(function($n,Gn){return $n^!!T.segmentsIntersect(pt,gt,pt+1e6,gt+1e6,Gn[0],Gn[1],Gn[2],Gn[3])},!1)){pn.forEach(function($n){var Gn=T.segmentsIntersect(Pt,zt,pt,gt,$n[0],$n[1],$n[2],$n[3]);Gn&&(Pt=Gn.x,zt=Gn.y)});var ln=g.arrowwidth,dn=g.arrowcolor,Cn=g.arrowside,kn=U.append("g").style({opacity:s.opacity(dn)}).classed("annotation-arrow-g",!0),Rn=kn.append("path").attr("d","M"+Pt+","+zt+"L"+pt+","+gt).style("stroke-width",ln+"px").call(s.stroke,s.rgb(dn));if(c(Rn,Cn,g),L.annotationPosition&&Rn.node().parentNode&&!p){var Nn=pt,jn=gt;if(g.standoff){var er=Math.sqrt(Math.pow(pt-Pt,2)+Math.pow(gt-zt,2));Nn+=g.standoff*(Pt-pt)/er,jn+=g.standoff*(zt-gt)/er}var Kn,yr,lr=kn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Pt-Nn)+","+(zt-jn),transform:b(Nn,jn)}).style("stroke-width",ln+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:lr.node(),gd:v,prepFn:function(){var $n=t.getTranslate(Z);Kn=$n.x,yr=$n.y,m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0)},moveFn:function($n,Gn){var ir=Gt(Kn,yr),Jt=ir[0]+$n,rn=ir[1]+Gn;Z.call(t.setTranslate,Jt,rn),I("x",f(m,$n,"x",E,g)),I("y",f(w,Gn,"y",E,g)),g.axref===g.xref&&I("ax",f(m,$n,"ax",E,g)),g.ayref===g.yref&&I("ay",f(w,Gn,"ay",E,g)),kn.attr("transform",b($n,Gn)),B.attr({transform:"rotate("+F+","+Jt+","+rn+")"})},doneFn:function(){A.call("_guiRelayout",v,j());var $n=document.querySelector(".js-notes-box-panel");$n&&$n.redraw($n.selectedObj)}})}}};g.showarrow&&Et(0,0),N&&a.init({element:Z.node(),gd:v,prepFn:function(){Tt=B.attr("transform")},moveFn:function(At,ht){var pt="pointer";if(g.showarrow)I("ax",g.axref===g.xref?f(m,At,"ax",E,g):g.ax+At),I("ay",g.ayref===g.yref?f(w,ht,"ay",E.w,g):g.ay+ht),Et(At,ht);else{if(p)return;var gt,Pt;if(m)gt=f(m,At,"x",E,g);else{var zt=g._xsize/E.w;gt=a.align(g.x+(g._xshift-g.xshift)/E.w-zt/2+At/E.w,zt,0,1,g.xanchor)}if(w)Pt=f(w,ht,"y",E,g);else{var Nt=g._ysize/E.h;Pt=a.align(g.y-(g._yshift+g.yshift)/E.h-Nt/2-ht/E.h,Nt,0,1,g.yanchor)}I("x",gt),I("y",Pt),m&&w||(pt=a.getCursor(m?.5:gt,w?.5:Pt,g.xanchor,g.yanchor))}B.attr({transform:b(At,ht)+Tt}),n(Z,pt)},clickFn:function(At,ht){g.captureevents&&v.emit("plotly_clickannotation",xe(ht))},doneFn:function(){n(Z),A.call("_guiRelayout",v,j());var At=document.querySelector(".js-notes-box-panel");At&&At.redraw(At.selectedObj)}})}}}Q.exports={draw:function(v){var g=v._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var y=0;y<g.annotations.length;y++)g.annotations[y].visible&&h(v,y);return l.previousPromises(v)},drawOne:h,drawRaw:x}},13011:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(82884),T=e(71828),b=T.strScale,d=T.strRotate,s=T.strTranslate;Q.exports=function(t,o,r){var n,a,i,c,h=t.node(),f=l[r.arrowhead||0],x=l[r.startarrowhead||0],v=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),y=o.indexOf("start")>=0,p=o.indexOf("end")>=0,m=f.backoff*v+r.standoff,w=x.backoff*g+r.startstandoff;if("line"===h.nodeName){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var u=n.x-a.x,S=n.y-a.y;if(c=(i=Math.atan2(S,u))+Math.PI,m&&w&&m+w>Math.sqrt(u*u+S*S))return void U();if(m){if(m*m>u*u+S*S)return void U();var _=m*Math.cos(i),E=m*Math.sin(i);a.x+=_,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(w){if(w*w>u*u+S*S)return void U();var L=w*Math.cos(i),C=w*Math.sin(i);n.x-=L,n.y-=C,t.attr({x1:n.x,y1:n.y})}}else if("path"===h.nodeName){var P=h.getTotalLength(),I="";if(P<m+w)return void U();var j=h.getPointAtLength(0),R=h.getPointAtLength(.1);i=Math.atan2(j.y-R.y,j.x-R.x),n=h.getPointAtLength(Math.min(w,P)),I="0px,"+w+"px,";var H=h.getPointAtLength(P),F=h.getPointAtLength(P-.1);c=Math.atan2(H.y-F.y,H.x-F.x),a=h.getPointAtLength(Math.max(0,P-m)),t.style("stroke-dasharray",I+=P-(I?w+m:m)+"px,"+P+"px")}function U(){t.style("stroke-dasharray","0px,100px")}function B(N,J,Z,V){N.path&&(N.noRotate&&(Z=0),k.select(h.parentNode).append("path").attr({class:t.attr("class"),d:N.path,transform:s(J.x,J.y)+d(180*Z/Math.PI)+b(V)}).style({fill:A.rgb(r.arrowcolor),"stroke-width":0}))}y&&B(x,n,i,g),p&&B(f,a,c,v)}},32745:function(Q,z,e){"use strict";var k=e(92605),A=e(44317);Q.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:k.draw,drawOne:k.drawOne,drawRaw:k.drawRaw,hasClickToShow:A.hasClickToShow,onClick:A.onClick,convertCoords:e(94128)}},26997:function(Q,z,e){"use strict";var k=e(50215),A=e(30962).overrideAll,l=e(44467).templatedArray;Q.exports=A(l("annotation",{visible:k.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:k.xanchor,xshift:k.xshift,yanchor:k.yanchor,yshift:k.yshift,text:k.text,textangle:k.textangle,font:k.font,width:k.width,height:k.height,opacity:k.opacity,align:k.align,valign:k.valign,bgcolor:k.bgcolor,bordercolor:k.bordercolor,borderpad:k.borderpad,borderwidth:k.borderwidth,showarrow:k.showarrow,arrowcolor:k.arrowcolor,arrowhead:k.arrowhead,startarrowhead:k.startarrowhead,arrowside:k.arrowside,arrowsize:k.arrowsize,startarrowsize:k.startarrowsize,arrowwidth:k.arrowwidth,standoff:k.standoff,startstandoff:k.startstandoff,hovertext:k.hovertext,hoverlabel:k.hoverlabel,captureevents:k.captureevents}),"calc","from-root")},5485:function(Q,z,e){"use strict";var k=e(71828),A=e(89298);function l(T,b){var d=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},k.extendFlat(T._xa,t),A.setConvert(T._xa),T._xa._offset=s.l+d.x[0]*s.w,T._xa.l2p=function(){return.5*(1+T._pdata[0]/T._pdata[3])*s.w*(d.x[1]-d.x[0])},T._ya={},k.extendFlat(T._ya,t),A.setConvert(T._ya),T._ya._offset=s.t+(1-d.y[1])*s.h,T._ya.l2p=function(){return.5*(1-T._pdata[1]/T._pdata[3])*s.h*(d.y[1]-d.y[0])}}Q.exports=function(T){for(var b=T.fullSceneLayout.annotations,d=0;d<b.length;d++)l(b[d],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(85501),T=e(25625),b=e(26997);function d(s,t,o,r){function n(i,c){return k.coerce(s,t,b,i,c)}function a(i){var c=i+"axis",h={_fullLayout:{}};return h._fullLayout[c]=o[c],A.coercePosition(t,h,n,i,i,.5)}n("visible")&&(T(s,t,r.fullLayout,n),a("x"),a("y"),a("z"),k.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),k.noneOrAll(s,t,["ax","ay"])))}Q.exports=function(s,t,o){l(s,t,{name:"annotations",handleItemDefaults:d,fullLayout:o.fullLayout})}},82188:function(Q,z,e){"use strict";var k=e(92605).drawRaw,A=e(63538),l=["x","y","z"];Q.exports=function(T){for(var b=T.fullSceneLayout,d=T.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var o=s[t],r=!1,n=0;n<3;n++){var a=l[n],c=b[a+"axis"].r2fraction(o[a]);if(c<0||c>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(o._pdata=A(T.glplot.cameraParams,[b.xaxis.r2l(o.x)*d[0],b.yaxis.r2l(o.y)*d[1],b.zaxis.r2l(o.z)*d[2]]),k(T.graphDiv,o,t,T.id,o._xa,o._ya))}}},2468:function(Q,z,e){"use strict";var k=e(73972),A=e(71828);Q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(l,T){var b=k.subplotsRegistry.gl3d;if(b)for(var d=b.attrRegex,s=Object.keys(l),t=0;t<s.length;t++){var o=s[t];d.test(o)&&(l[o].annotations||[]).length&&(A.pushUnique(T._basePlotModules,b),A.pushUnique(T._subplots.gl3d,o))}},convert:e(5485),draw:e(82188)}},7561:function(Q,z,e){"use strict";Q.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function(Q,z,e){"use strict";var k=e(7561),A=e(71828),l=e(50606),T=l.EPOCHJD,b=l.ONEDAY,d={valType:"enumerated",values:A.sortObjectKeys(k.calendars),editType:"calc",dflt:"gregorian"},s=function(v,g,y,p){var m={};return m[y]=d,A.coerce(v,g,m,y,p)},t="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(v){return r[v]||(r[v]=k.instance(v))}function a(v){return A.extendFlat({},d,{description:v})}function i(v){return"Sets the calendar system to use with `"+v+"` date data."}var c={xcalendar:a(i("x"))},h=A.extendFlat({},c,{ycalendar:a(i("y"))}),f=A.extendFlat({},h,{zcalendar:a(i("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:f,surface:f,mesh3d:f,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:d,handleDefaults:s,handleTraceDefaults:function(v,g,y,p){for(var m=0;m<y.length;m++)s(v,g,y[m]+"calendar",p.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(v,g,y){for(var p,m,w,u,S,_=Math.floor((g+.05)/b)+T,E=n(y).fromJD(_),L=0;-1!==(L=v.indexOf("%",L));)"0"===(p=v.charAt(L+1))||"-"===p||"_"===p?(w=3,m=v.charAt(L+2),"_"===p&&(p="-")):(m=p,p="0",w=2),(u=o[m])?(S=u===t?t:E.formatDate(u[p]),v=v.substr(0,L)+S+v.substr(L+w),L+=S.length):L+=w;return v}}},22399:function(Q,z){"use strict";z.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],z.defaultLine="#444",z.lightLine="#eee",z.background="#fff",z.borderLine="#BEC8D9",z.lightFraction=90.9090909090909},7901:function(Q,z,e){"use strict";var k=e(84267),A=e(92770),l=e(73627).isTypedArray,T=Q.exports={},b=e(22399);T.defaults=b.defaults;var d=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function t(o){if(A(o)||"string"!=typeof o)return o;var r=o.trim();if("rgb"!==r.substr(0,3))return o;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return o;var a=n[1].trim().split(/\s*[\s,]\s*/),i="a"===r.charAt(3)&&4===a.length;if(!i&&3!==a.length)return o;for(var c=0;c<a.length;c++){if(!(a[c].length&&(a[c]=Number(a[c]),a[c]>=0)))return o;if(3===c)a[c]>1&&(a[c]=1);else if(a[c]>=1)return o}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return i?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(o){var r=o.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(o){return T.tinyRGB(k(o))},T.opacity=function(o){return o?k(o).getAlpha():0},T.addOpacity=function(o,r){var n=k(o).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(o,r){var n=k(o).toRgb();if(1===n.a)return k(o).toRgbString();var a=k(r||s).toRgb(),i=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return k({r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a}).toRgbString()},T.contrast=function(o,r,n){var a=k(o);return 1!==a.getAlpha()&&(a=k(T.combine(o,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):d).toString()},T.stroke=function(o,r){var n=k(r);o.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(o,r){var n=k(r);o.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(o){if(o&&"object"==typeof o){var r,n,a,i,c=Object.keys(o);for(r=0;r<c.length;r++)if(i=o[a=c[r]],"color"===a.substr(a.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=t(i[n]);else o[a]=t(i);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=t(i[n][1]));else if(Array.isArray(i)){var h=i[0];if(!Array.isArray(h)&&h&&"object"==typeof h)for(n=0;n<i.length;n++)T.clean(i[n])}else i&&"object"==typeof i&&!l(i)&&T.clean(i)}}},63583:function(Q,z,e){"use strict";var k=e(13838),A=e(41940),l=e(1426).extendFlat,T=e(30962).overrideAll;Q.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:k.linecolor,outlinewidth:k.linewidth,bordercolor:k.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:l({},k.ticks,{dflt:""}),ticklabeloverflow:l({},k.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,tickfont:A({}),tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,separatethousands:k.separatethousands,exponentformat:k.exponentformat,minexponent:k.minexponent,showexponent:k.showexponent,title:{text:{valType:"string"},font:A({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:A({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(Q){"use strict";Q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(Q,z,e){"use strict";var k=e(71828),A=e(44467),l=e(26218),T=e(38701),b=e(96115),d=e(89426),s=e(63583);Q.exports=function(t,o,r){var n=A.newContainer(o,"colorbar"),a=t.colorbar||{};function i(S,_){return k.coerce(a,n,s,S,_)}var c=r.margin||{t:0,b:0,l:0,r:0},h=r.width-c.l-c.r,f=r.height-c.t-c.b,x="v"===i("orientation"),v=i("thicknessmode");i("thickness","fraction"===v?30/(x?h:f):30);var g=i("lenmode");i("len","fraction"===g?1:x?f:h),i("x",x?1.02:.5),i("xanchor",x?"left":"center"),i("xpad"),i("y",x?.5:1.02),i("yanchor",x?"middle":"bottom"),i("ypad"),k.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");var y=k.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");i("ticklabeloverflow",-1!==y.indexOf("inside")?"hide past domain":"hide past div"),l(a,n,i,"linear");var p=r.font,m={outerTicks:!1,font:p};-1!==y.indexOf("inside")&&(m.bgColor="black"),d(a,n,i,"linear",m),b(a,n,i,"linear",m),T(a,n,i,"linear",m),i("title.text",r._dfltTitle.colorbar);var w=n.tickfont,u=k.extendFlat({},w,{color:p.color,size:k.bigFont(w.size)});k.coerceFont(i,"title.font",u),i("title.side",x?"top":"right")}},98981:function(Q,z,e){"use strict";var k=e(39898),A=e(84267),l=e(74875),T=e(73972),b=e(89298),d=e(28569),s=e(71828),t=s.strTranslate,o=e(1426).extendFlat,r=e(6964),n=e(91424),a=e(7901),i=e(92998),c=e(63893),h=e(52075).flipScale,f=e(71453),x=e(52830),v=e(13838),g=e(18783),y=g.LINE_SPACING,p=g.FROM_TL,m=g.FROM_BR,w=e(30939).cn;Q.exports={draw:function(u){var S=u._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(_){var E,L,C,P,I=_._fullLayout,j=_.calcdata,R=[];function H(ne){return o(ne,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function F(){"function"==typeof P.calc?P.calc(_,C,E):(E._fillgradient=L.reversescale?h(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var U=0;U<j.length;U++){var N=(C=j[U][0].trace)._module.colorbar;if(!0===C.visible&&N)for(var J=Array.isArray(N),Z=J?N:[N],V=0;V<Z.length;V++){var W=(P=Z[V]).container;(L=W?C[W]:C)&&L.showscale&&((E=H(L.colorbar))._id="cb"+C.uid+(J&&W?"-"+W:""),E._traceIndex=C.index,E._propPrefix=(W?W+".":"")+"colorbar.",E._meta=C._meta,F(),R.push(E))}}for(var X in I._colorAxes)if((L=I[X]).showscale){var K=I._colorAxes[X];(E=H(L.colorbar))._id="cb"+X,E._propPrefix=X+".colorbar.",E._meta=I._meta,P={min:"cmin",max:"cmax"},"heatmap"!==K[0]&&(P.calc=(C=K[1])._module.colorbar.calc),F(),R.push(E)}return R}(u),function(_){return _._id});S.enter().append("g").attr("class",function(_){return _._id}).classed(w.colorbar,!0),S.each(function(_){var E=k.select(this);s.ensureSingle(E,"rect",w.cbbg),s.ensureSingle(E,"g",w.cbfills),s.ensureSingle(E,"g",w.cblines),s.ensureSingle(E,"g",w.cbaxis,function(C){C.classed(w.crisp,!0)}),s.ensureSingle(E,"g",w.cbtitleunshift,function(C){C.append("g").classed(w.cbtitle,!0)}),s.ensureSingle(E,"rect",w.cboutline);var C,P,I,j,R,H,F,U,L=function(C,P,I){var j="v"===P.orientation,R=P.len,H=P.lenmode,F=P.thickness,U=P.thicknessmode,B=P.outlinewidth,N=P.borderwidth,J=P.bgcolor,Z=P.xanchor,V=P.yanchor,W=P.xpad,X=P.ypad,K=P.x,ne=j?P.y:1-P.y,re=I._fullLayout,ae=re._size,le=P._fillcolor,pe=P._line,xe=P.title,ye=xe.side,se=P._zrange||k.extent(("function"==typeof le?le:pe.color).domain()),fe="function"==typeof pe.color?pe.color:function(){return pe.color},Ee="function"==typeof le?le:function(){return le},de=P._levels,we=function(Ht,It,Ge){var Ze,Be,Ye=It._levels,rt=[],Se=[],Re=Ye.end+Ye.size/100,Ke=Ye.size,st=1.001*Ge[0]-.001*Ge[1],ct=1.001*Ge[1]-.001*Ge[0];for(Be=0;Be<1e5&&(Ze=Ye.start+Be*Ke,!(Ke>0?Ze>=Re:Ze<=Re));Be++)Ze>st&&Ze<ct&&rt.push(Ze);if(It._fillgradient)Se=[0];else if("function"==typeof It._fillcolor){var Tt=It._filllevels;if(Tt)for(Re=Tt.end+Tt.size/100,Ke=Tt.size,Be=0;Be<1e5&&(Ze=Tt.start+Be*Ke,!(Ke>0?Ze>=Re:Ze<=Re));Be++)Ze>Ge[0]&&Ze<Ge[1]&&Se.push(Ze);else(Se=rt.map(function(Et){return Et-Ye.size/2})).push(Se[Se.length-1]+Ye.size)}else It._fillcolor&&"string"==typeof It._fillcolor&&(Se=[0]);return Ye.size<0&&(rt.reverse(),Se.reverse()),{line:rt,fill:Se}}(0,P,se),ke=we.fill,Te=we.line,$=Math.round(F*("fraction"===U?j?ae.w:ae.h:1)),oe=$/(j?ae.w:ae.h),he=Math.round(R*("fraction"===H?j?ae.h:ae.w:1)),me=he/(j?ae.h:ae.w),Me=Math.round(j?K*ae.w+W:ne*ae.h+X),Ie={center:.5,right:1}[Z]||0,Pe={top:1,middle:.5}[V]||0,ze=j?K-Ie*oe:ne-Pe*oe,ce=j?ne-Pe*me:K-Ie*me,ge=Math.round(j?ae.h*(1-ce):ae.w*ce);P._lenFrac=me,P._thickFrac=oe,P._uFrac=ze,P._vFrac=ce;var _e=P._axis=function(Ht,It,Ge){var Ze=Ht._fullLayout,Be="v"===It.orientation,Ye={type:"linear",range:Ge,tickmode:It.tickmode,nticks:It.nticks,tick0:It.tick0,dtick:It.dtick,tickvals:It.tickvals,ticktext:It.ticktext,ticks:It.ticks,ticklen:It.ticklen,tickwidth:It.tickwidth,tickcolor:It.tickcolor,showticklabels:It.showticklabels,ticklabelposition:It.ticklabelposition,ticklabeloverflow:It.ticklabeloverflow,ticklabelstep:It.ticklabelstep,tickfont:It.tickfont,tickangle:It.tickangle,tickformat:It.tickformat,exponentformat:It.exponentformat,minexponent:It.minexponent,separatethousands:It.separatethousands,showexponent:It.showexponent,showtickprefix:It.showtickprefix,tickprefix:It.tickprefix,showticksuffix:It.showticksuffix,ticksuffix:It.ticksuffix,title:It.title,showline:!0,anchor:"free",side:Be?"right":"bottom",position:1},rt=Be?"y":"x",Se={type:"linear",_id:rt+It._id},Re={letter:rt,font:Ze.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ze.calendar};function Ke(st,ct){return s.coerce(Ye,Se,v,st,ct)}return f(Ye,Se,Ke,Re,Ze),x(Ye,Se,Ke,Re),Se}(I,P,se);_e.position=oe+(j?K+W/ae.w:ne+X/ae.h);var De=-1!==["top","bottom"].indexOf(ye);if(j&&De&&(_e.title.side=ye,_e.titlex=K+W/ae.w,_e.titley=ce+("top"===xe.side?me-X/ae.h:X/ae.h)),j||De||(_e.title.side=ye,_e.titley=ne+X/ae.h,_e.titlex=ce+W/ae.w),pe.color&&"auto"===P.tickmode){_e.tickmode="linear",_e.tick0=de.start;var He=de.size,Ve=s.constrain(he/50,4,15)+1,nt=(se[1]-se[0])/((P.nticks||Ve)*He);if(nt>1){var tt=Math.pow(10,Math.floor(Math.log(nt)/Math.LN10));He*=tt*s.roundUp(nt/tt,[2,5,10]),(Math.abs(de.start)/de.size+1e-6)%1<2e-6&&(_e.tick0=0)}_e.dtick=He}_e.domain=j?[ce+X/ae.h,ce+me-X/ae.h]:[ce+W/ae.w,ce+me-W/ae.w],_e.setScale(),C.attr("transform",t(Math.round(ae.l),Math.round(ae.t)));var at,dt=C.select("."+w.cbtitleunshift).attr("transform",t(-Math.round(ae.l),-Math.round(ae.t))),wt=_e.ticklabelposition,bt=_e.title.font.size,_t=C.select("."+w.cbaxis),Lt=0,Ct=0;function Ot(Ht,It){var Ge={propContainer:_e,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:re._dfltTitle.colorbar,containerGroup:C.select("."+w.cbtitle)},Ze="h"===Ht.charAt(0)?Ht.substr(1):"h"+Ht;C.selectAll("."+Ze+",."+Ze+"-math-group").remove(),i.draw(I,Ht,o(Ge,It||{}))}return s.syncOrAsync([l.previousPromises,function(){var Ht,It;(j&&De||!j&&!De)&&("top"===ye&&(Ht=W+ae.l+ae.w*K,It=X+ae.t+ae.h*(1-ce-me)+3+.75*bt),"bottom"===ye&&(Ht=W+ae.l+ae.w*K,It=X+ae.t+ae.h*(1-ce)-3-.25*bt),"right"===ye&&(It=X+ae.t+ae.h*ne+3+.75*bt,Ht=W+ae.l+ae.w*ce),Ot(_e._id+"title",{attributes:{x:Ht,y:It,"text-anchor":j?"start":"middle"}}))},function(){if(!j&&!De||j&&De){var Ht,It=C.select("."+w.cbtitle),Ge=It.select("text"),Ze=[-B/2,B/2],Be=It.select(".h"+_e._id+"title-math-group").node(),Ye=15.6;if(Ge.node()&&(Ye=parseInt(Ge.node().style.fontSize,10)*y),Be?(Ht=n.bBox(Be),Ct=Ht.width,(Lt=Ht.height)>Ye&&(Ze[1]-=(Lt-Ye)/2)):Ge.node()&&!Ge.classed(w.jsPlaceholder)&&(Ht=n.bBox(Ge.node()),Ct=Ht.width,Lt=Ht.height),j){if(Lt){if(Lt+=5,"top"===ye)_e.domain[1]-=Lt/ae.h,Ze[1]*=-1;else{_e.domain[0]+=Lt/ae.h;var rt=c.lineCount(Ge);Ze[1]+=(1-rt)*Ye}It.attr("transform",t(Ze[0],Ze[1])),_e.setScale()}}else Ct&&("right"===ye&&(_e.domain[0]+=(Ct+bt/2)/ae.w),It.attr("transform",t(Ze[0],Ze[1])),_e.setScale())}C.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",j?t(0,Math.round(ae.h*(1-_e.domain[1]))):t(Math.round(ae.w*_e.domain[0]),0)),_t.attr("transform",j?t(0,Math.round(-ae.t)):t(Math.round(-ae.l),0));var Se=C.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(ke);Se.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Se.exit().remove();var Re=se.map(_e.c2p).map(Math.round).sort(function(Et,At){return Et-At});Se.each(function(Et,At){var ht=[0===At?se[0]:(ke[At]+ke[At-1])/2,At===ke.length-1?se[1]:(ke[At]+ke[At+1])/2].map(_e.c2p).map(Math.round);j&&(ht[1]=s.constrain(ht[1]+(ht[1]>ht[0])?1:-1,Re[0],Re[1]));var pt=k.select(this).attr(j?"x":"y",Me).attr(j?"y":"x",k.min(ht)).attr(j?"width":"height",Math.max($,2)).attr(j?"height":"width",Math.max(k.max(ht)-k.min(ht),2));if(P._fillgradient)n.gradient(pt,I,P._id,j?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var gt=Ee(Et).replace("e-","");pt.attr("fill",A(gt).toHexString())}});var Ke=C.select("."+w.cblines).selectAll("path."+w.cbline).data(pe.color&&pe.width?Te:[]);Ke.enter().append("path").classed(w.cbline,!0),Ke.exit().remove(),Ke.each(function(Et){var At=Me,ht=Math.round(_e.c2p(Et))+pe.width/2%1;k.select(this).attr("d","M"+(j?At+","+ht:ht+","+At)+(j?"h":"v")+$).call(n.lineGroupStyle,pe.width,fe(Et),pe.dash)}),_t.selectAll("g."+_e._id+"tick,path").remove();var st=Me+$+(B||0)/2-("outside"===P.ticks?1:0),ct=b.calcTicks(_e),Tt=b.getTickSigns(_e)[2];return b.drawTicks(I,_e,{vals:"inside"===_e.ticks?b.clipEnds(_e,ct):ct,layer:_t,path:b.makeTickPath(_e,st,Tt),transFn:b.makeTransTickFn(_e)}),b.drawLabels(I,_e,{vals:ct,layer:_t,transFn:b.makeTransTickLabelFn(_e),labelFns:b.makeLabelFns(_e,st)})},function(){if(j&&!De||!j&&De){var Ht,It,Ge=_e.position||0,Ze=_e._offset+_e._length/2;if("right"===ye)It=Ze,Ht=ae.l+ae.w*Ge+10+bt*(_e.showticklabels?1:.5);else if(Ht=Ze,"bottom"===ye&&(It=ae.t+ae.h*Ge+10+(-1===wt.indexOf("inside")?_e.tickfont.size:0)+("intside"!==_e.ticks&&P.ticklen||0)),"top"===ye){var Be=xe.text.split("<br>").length;It=ae.t+ae.h*Ge+10-$-y*bt*Be}Ot((j?"h":"v")+_e._id+"title",{avoid:{selection:k.select(I).selectAll("g."+_e._id+"tick"),side:ye,offsetTop:j?0:ae.t,offsetLeft:j?ae.l:0,maxShift:j?re.width:re.height},attributes:{x:Ht,y:It,"text-anchor":"middle"},transform:{rotate:j?-90:0,offset:0}})}},l.previousPromises,function(){var Ht,It=$+B/2;-1===wt.indexOf("inside")&&(Ht=n.bBox(_t.node()),It+=j?Ht.width:Ht.height),at=dt.select("text");var Ge=0,Ze=j&&"top"===ye,Be=!j&&"right"===ye,Ye=0;if(at.node()&&!at.classed(w.jsPlaceholder)){var rt,Se=dt.select(".h"+_e._id+"title-math-group").node();Se&&(j&&De||!j&&!De)?(Ge=(Ht=n.bBox(Se)).width,rt=Ht.height):(Ge=(Ht=n.bBox(dt.node())).right-ae.l-(j?Me:ge),rt=Ht.bottom-ae.t-(j?ge:Me),j||"top"!==ye||(It+=Ht.height,Ye=Ht.height)),Be&&(at.attr("transform",t(Ge/2+bt/2,0)),Ge*=2),It=Math.max(It,j?Ge:rt)}var Re=2*(j?W:X)+It+N+B/2,Ke=0;!j&&xe.text&&"bottom"===V&&ne<=0&&(Re+=Ke=Re/2,Ye+=Ke),re._hColorbarMoveTitle=Ke,re._hColorbarMoveCBTitle=Ye;var st=N+B;C.select("."+w.cbbg).attr("x",(j?Me:ge)-st/2-(j?W:0)).attr("y",(j?ge:Me)-(j?he:X+Ye-Ke)).attr(j?"width":"height",Math.max(Re-Ke,2)).attr(j?"height":"width",Math.max(he+st,2)).call(a.fill,J).call(a.stroke,P.bordercolor).style("stroke-width",N);var ct=Be?Math.max(Ge-10,0):0;if(C.selectAll("."+w.cboutline).attr("x",(j?Me:ge+W)+ct).attr("y",(j?ge+X-he:Me)+(Ze?Lt:0)).attr(j?"width":"height",Math.max($,2)).attr(j?"height":"width",Math.max(he-(j?2*X+Lt:2*W+ct),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":B}),C.attr("transform",t(ae.l-(j?Ie*Re:0),ae.t-(j?0:(1-Pe)*Re-Ye))),!j&&(N||A(J).getAlpha()&&!A.equals(re.paper_bgcolor,J))){var Tt=_t.selectAll("text"),Et=Tt[0].length,At=C.select("."+w.cbbg).node(),ht=n.bBox(At),pt=n.getTranslate(C);Tt.each(function(Gt,un){var hn=Et-1;if(0===un||un===hn){var Qt,_n=n.bBox(this),Fn=n.getTranslate(this);un===hn?(Qt=ht.right+pt.x+ge-N-2+K-(_n.right+Fn.x))>0&&(Qt=0):0===un&&(Qt=ht.left+pt.x+ge+N+2-(_n.left+Fn.x))<0&&(Qt=0),Qt&&(Et<3?this.setAttribute("transform","translate("+Qt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var gt={},Pt=p[Z],zt=m[Z],Ut=p[V],Nt=m[V],jt=Re-$;j?("pixels"===H?(gt.y=ne,gt.t=he*Ut,gt.b=he*Nt):(gt.t=gt.b=0,gt.yt=ne+R*Ut,gt.yb=ne-R*Nt),"pixels"===U?(gt.x=K,gt.l=Re*Pt,gt.r=Re*zt):(gt.l=jt*Pt,gt.r=jt*zt,gt.xl=K-F*Pt,gt.xr=K+F*zt)):("pixels"===H?(gt.x=K,gt.l=he*Pt,gt.r=he*zt):(gt.l=gt.r=0,gt.xl=K+R*Pt,gt.xr=K-R*zt),"pixels"===U?(gt.y=1-ne,gt.t=Re*Ut,gt.b=Re*Nt):(gt.t=jt*Ut,gt.b=jt*Nt,gt.yt=ne-F*Ut,gt.yb=ne+F*Nt)),l.autoMargin(I,P._id,gt)}],I)}(E,_,u);L&&L.then&&(u._promises||[]).push(L),u._context.edits.colorbarPosition&&(F="v"===(P=_).orientation,U=(I=u)._fullLayout._size,d.init({element:(C=E).node(),gd:I,prepFn:function(){j=C.attr("transform"),r(C)},moveFn:function(B,N){C.attr("transform",j+t(B,N)),R=d.align((F?P._uFrac:P._vFrac)+B/U.w,F?P._thickFrac:P._lenFrac,0,1,P.xanchor),H=d.align((F?P._vFrac:1-P._uFrac)-N/U.h,F?P._lenFrac:P._thickFrac,0,1,P.yanchor);var J=d.getCursor(R,H,P.xanchor,P.yanchor);r(C,J)},doneFn:function(){if(r(C),void 0!==R&&void 0!==H){var B={};B[P._propPrefix+"x"]=R,B[P._propPrefix+"y"]=H,void 0!==P._traceIndex?T.call("_guiRestyle",I,B,P._traceIndex):T.call("_guiRelayout",I,B)}}}))}),S.exit().each(function(_){l.autoMargin(u,_._id)}).remove(),S.order()}}},76228:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A){return k.isPlainObject(A.colorbar)}},12311:function(Q,z,e){"use strict";Q.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function(Q,z,e){"use strict";var k=e(63583),A=e(30587).counter,l=e(78607),T=e(63282).scales;function b(d){return"`"+d+"`"}l(T),Q.exports=function(d,s){d=d||"";var t,o=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s||Boolean(d),"noScale"in s?s.noScale:"marker.line"===d),n="showScaleDflt"in s?s.showScaleDflt:"z"===o,a="string"==typeof s.colorscaleDflt?T[s.colorscaleDflt]:null,i=s.editTypeOverride||"",c=d?d+".":"";"colorAttr"in s?t=s.colorAttr:b(c+(t={z:"z",c:"color"}[o]));var h=o+"auto",f=o+"min",x=o+"max",v=o+"mid",g=(b(c+h),b(c+f),b(c+x),{});g[f]=g[x]=void 0;var y={};y[h]=!1;var p={};return"color"===t&&(p.color={valType:"color",arrayOk:!0,editType:i||"style"},s.anim&&(p.color.anim=!0)),p[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},p[f]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[x]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},p.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},p.autocolorscale={valType:"boolean",dflt:!1!==s.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},p.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(p.showscale={valType:"boolean",dflt:n,editType:"calc"},p.colorbar=k),s.noColorAxis||(p.coloraxis={valType:"subplotid",regex:A("coloraxis"),dflt:null,editType:"calc"}),p}},78803:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(52075).extractOpts;Q.exports=function(T,b,d){var t=T._fullLayout,o=d.vals,r=d.containerStr,n=r?A.nestedProperty(b,r).get():b,a=l(n),i=!1!==a.auto,c=a.min,h=a.max,f=a.mid,x=function(){return A.aggNums(Math.min,null,o)},v=function(){return A.aggNums(Math.max,null,o)};void 0===c?c=x():i&&(c=n._colorAx&&k(c)?Math.min(c,x()):x()),void 0===h?h=v():i&&(h=n._colorAx&&k(h)?Math.max(h,v()):v()),i&&void 0!==f&&(h-f>f-c?c=f-(h-f):h-f<f-c&&(h=f+(f-c))),c===h&&(c-=.5,h+=.5),a._sync("min",c),a._sync("max",h),a.autocolorscale&&a._sync("colorscale",c*h<0?t.colorscale.diverging:c>=0?t.colorscale.sequential:t.colorscale.sequentialminus)}},33046:function(Q,z,e){"use strict";var k=e(71828),A=e(52075).hasColorscale,l=e(52075).extractOpts;Q.exports=function(T,b){function d(i,c){var h=i["_"+c];void 0!==h&&(i[c]=h)}function s(i,c){var h=c.container?k.nestedProperty(i,c.container).get():i;if(h)if(h.coloraxis)h._colorAx=b[h.coloraxis];else{var f=l(h),x=f.auto;(x||void 0===f.min)&&d(h,c.min),(x||void 0===f.max)&&d(h,c.max),f.autocolorscale&&d(h,"colorscale")}}for(var t=0;t<T.length;t++){var o=T[t],r=o._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(o,r[n]);else s(o,r);A(o,"marker.line")&&s(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)s(b[a],{min:"cmin",max:"cmax"})}},1586:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(76228),T=e(62499),b=e(63282).isValid,d=e(73972).traceIs;function s(t,o){var r=o.slice(0,o.length-1);return o?A.nestedProperty(t,r).get()||{}:t}Q.exports=function t(o,r,n,a,i){var c=i.prefix,h=i.cLetter,f="_module"in r,x=s(o,c),v=s(r,c),g=s(r._template||{},c)||{},y=function(){return delete o.coloraxis,delete r.coloraxis,t(o,r,n,a,i)};if(f){var p=n._colorAxes||{},m=a(c+"coloraxis");if(m){var w=d(r,"contour")&&A.nestedProperty(r,"contours.coloring").get()||"heatmap",u=p[m];return void(u?(u[2].push(y),u[0]!==w&&(u[0]=!1,A.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[m]=[w,r,[y]])}}var S=x[h+"min"],_=x[h+"max"],E=k(S)&&k(_)&&S<_;a(c+h+"auto",!E)?a(c+h+"mid"):(a(c+h+"min"),a(c+h+"max"));var L,C,P=x.colorscale,I=g.colorscale;void 0!==P&&(L=!b(P)),void 0!==I&&(L=!b(I)),a(c+"autocolorscale",L),a(c+"colorscale"),a(c+"reversescale"),"marker.line."!==c&&(c&&f&&(C=l(x)),a(c+"showscale",C)&&(c&&g&&(v._template=g),T(x,v,n)))}},52075:function(Q,z,e){"use strict";var k=e(39898),A=e(84267),l=e(92770),T=e(71828),b=e(7901),d=e(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function o(c){var h,f,x,v=c._colorAx,g=v||c,y={};for(f=0;f<s.length;f++)y[x=s[f]]=g[x];if(v)for(h="c",f=0;f<t.length;f++)y[x=t[f]]=g["c"+x];else{var p;for(f=0;f<t.length;f++)((p="c"+(x=t[f]))in g||(p="z"+x)in g)&&(y[x]=g[p]);h=p.charAt(0)}return y._sync=function(m,w){var u=-1!==t.indexOf(m)?h+m:m;g[u]=g["_"+u]=w},y}function r(c){for(var h=o(c),f=h.min,x=h.max,v=h.reversescale?n(h.colorscale):h.colorscale,g=v.length,y=new Array(g),p=new Array(g),m=0;m<g;m++){var w=v[m];y[m]=f+w[0]*(x-f),p[m]=w[1]}return{domain:y,range:p}}function n(c){for(var h=c.length,f=new Array(h),x=h-1,v=0;x>=0;x--,v++){var g=c[x];f[v]=[1-g[0],g[1]]}return f}function a(c,h){h=h||{};for(var f=c.domain,x=c.range,v=x.length,g=new Array(v),y=0;y<v;y++){var p=A(x[y]).toRgb();g[y]=[p.r,p.g,p.b,p.a]}var m,w=k.scale.linear().domain(f).range(g).clamp(!0),u=h.noNumericCheck,S=h.returnArray;return(m=u&&S?w:u?function(_){return i(w(_))}:S?function(_){return l(_)?w(_):A(_).isValid()?_:b.defaultLine}:function(_){return l(_)?i(w(_)):A(_).isValid()?_:b.defaultLine}).domain=w.domain,m.range=function(){return x},m}function i(c){return A({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}Q.exports={hasColorscale:function(c,h,f){var x=h?T.nestedProperty(c,h).get()||{}:c,v=x[f||"color"],g=!1;if(T.isArrayOrTypedArray(v))for(var y=0;y<v.length;y++)if(l(v[y])){g=!0;break}return T.isPlainObject(x)&&(g||!0===x.showscale||l(x.cmin)&&l(x.cmax)||d(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:o,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(c,h){return a(r(c),h)}}},21081:function(Q,z,e){"use strict";var k=e(63282),A=e(52075);Q.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:k.scales,defaultScale:k.defaultScale,getScale:k.get,isValidScale:k.isValid,hasColorscale:A.hasColorscale,extractOpts:A.extractOpts,extractScale:A.extractScale,flipScale:A.flipScale,makeColorScaleFunc:A.makeColorScaleFunc,makeColorScaleFuncFromTrace:A.makeColorScaleFuncFromTrace}},72673:function(Q,z,e){"use strict";var k=e(1426).extendFlat,A=e(50693),l=e(63282).scales;Q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:k({_isSubplotObj:!0,editType:"calc"},A("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(Q,z,e){"use strict";var k=e(71828),A=e(44467),l=e(72673),T=e(1586);Q.exports=function(b,d){function s(h,f){return k.coerce(b,d,l,h,f)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,o,r=d._colorAxes;function n(h,f){return k.coerce(t,o,l.coloraxis,h,f)}for(var a in r){var i=r[a];if(i[0])t=b[a]||{},(o=A.newContainer(d,a,"coloraxis"))._name=a,T(t,o,d,n,{prefix:"",cLetter:"c"});else{for(var c=0;c<i[2].length;c++)i[2][c]();delete d._colorAxes[a]}}}},63282:function(Q,z,e){"use strict";var k=e(84267),A={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=A.RdBu;function T(b){var d=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||0!=+b[0][0]||1!=+b[b.length-1][0])return!1;for(var s=0;s<b.length;s++){var t=b[s];if(2!==t.length||+t[0]<d||!k(t[1]).isValid())return!1;d=+t[0]}return!0}Q.exports={scales:A,defaultScale:l,get:function(b,d){if(d||(d=l),!b)return d;function s(){try{b=A[b]||JSON.parse(b)}catch{b=d}}return"string"==typeof b&&(s(),"string"==typeof b&&s()),T(b)?b:d},isValid:function(b){return void 0!==A[b]||T(b)}}},92807:function(Q){"use strict";Q.exports=function(z,e,k,A,l){var T=(z-k)/(A-k),b=T+e/(A-k),d=(T+b)/2;return"left"===l||"bottom"===l?T:"center"===l||"middle"===l?d:"right"===l||"top"===l?b:T<.6666666666666666-d?T:b>1.3333333333333333-d?b:d}},70461:function(Q,z,e){"use strict";var k=e(71828),A=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Q.exports=function(l,T,b,d){return l="left"===b?0:"center"===b?1:"right"===b?2:k.constrain(Math.floor(3*l),0,2),T="bottom"===d?0:"middle"===d?1:"top"===d?2:k.constrain(Math.floor(3*T),0,2),A[T][l]}},64505:function(Q,z){"use strict";z.selectMode=function(e){return"lasso"===e||"select"===e},z.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},z.openMode=function(e){return"drawline"===e||"drawopenpath"===e},z.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},z.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},z.selectingOrDrawing=function(e){return z.freeMode(e)||z.rectMode(e)}},28569:function(Q,z,e){"use strict";var k=e(48956),A=e(57035),l=e(38520),T=e(71828).removeElement,b=e(85555),d=Q.exports={};d.align=e(92807),d.getCursor=e(70461);var s=e(26041);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function o(r){return k(r.changedTouches?r.changedTouches[0]:r,document.body)}d.unhover=s.wrapped,d.unhoverRaw=s.raw,d.init=function(r){var n,a,i,c,h,f,x,v,g=r.gd,y=1,p=g._context.doubleClickDelay,m=r.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=u,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=u,m.addEventListener("touchstart",u,{passive:!1})):m.ontouchstart=u;var w=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function u(E){g._dragged=!1,g._dragging=!0;var L=o(E);n=L[0],a=L[1],x=E.target,f=E,v=2===E.buttons||E.ctrlKey,void 0===E.clientX&&void 0===E.clientY&&(E.clientX=n,E.clientY=a),(i=(new Date).getTime())-g._mouseDownTime<p?y+=1:(y=1,g._mouseDownTime=i),r.prepFn&&r.prepFn(E,n,a),A&&!v?(h=t()).style.cursor=window.getComputedStyle(m).cursor:A||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),!1!==r.dragmode&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var L=o(E),P=w(L[0]-n,L[1]-a,r.minDrag||b.MINDRAG),I=P[0],j=P[1];(I||j)&&(g._dragged=!0,d.unhover(g,E)),g._dragged&&r.moveFn&&!v&&(g._dragdata={element:m,dx:I,dy:j},r.moveFn(I,j))}function _(E){if(delete g._dragdata,!1!==r.dragmode&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),A?T(h):c&&(h.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,(new Date).getTime()-g._mouseDownTime>p&&(y=Math.max(y-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,f),!v){var L;try{L=new MouseEvent("click",E)}catch{var C=o(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(L)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},d.coverSlip=t},26041:function(Q,z,e){"use strict";var k=e(11086),A=e(79990),l=e(24401).getGraphDiv,T=e(26675),b=Q.exports={};b.wrapped=function(d,s,t){(d=l(d))._fullLayout&&A.clear(d._fullLayout._uid+T.HOVERID),b.raw(d,s,t)},b.raw=function(d,s){var t=d._fullLayout,o=d._hoverdata;s||(s={}),s.target&&!d._dragged&&!1===k.triggerHandler(d,"plotly_beforehover",s)||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,s.target&&o&&d.emit("plotly_unhover",{event:s,points:o}))}},79952:function(Q,z){"use strict";z.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},z.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=A.numberFormat,T=e(92770),b=e(84267),d=e(73972),s=e(7901),t=e(21081),o=A.strTranslate,r=e(63893),n=e(77922),a=e(18783).LINE_SPACING,i=e(37822).DESELECTDIM,c=e(34098),h=e(39984),f=e(23469).appendArrayPointValue,x=Q.exports={};function v(de,we,ke){var Te=we.fillpattern,$=Te&&x.getPatternAttr(Te.shape,0,"");if($){var oe=x.getPatternAttr(Te.bgcolor,0,null),he=x.getPatternAttr(Te.fgcolor,0,null),me=Te.fgopacity,Me=x.getPatternAttr(Te.size,0,8),Ie=x.getPatternAttr(Te.solidity,0,.3);x.pattern(de,"point",ke,we.uid,$,Me,Ie,void 0,Te.fillmode,oe,he,me)}else we.fillcolor&&de.call(s.fill,we.fillcolor)}x.font=function(de,we,ke,Te){A.isPlainObject(we)&&(Te=we.color,ke=we.size,we=we.family),we&&de.style("font-family",we),ke+1&&de.style("font-size",ke+"px"),Te&&de.call(s.fill,Te)},x.setPosition=function(de,we,ke){de.attr("x",we).attr("y",ke)},x.setSize=function(de,we,ke){de.attr("width",we).attr("height",ke)},x.setRect=function(de,we,ke,Te,$){de.call(x.setPosition,we,ke).call(x.setSize,Te,$)},x.translatePoint=function(de,we,ke,Te){var $=ke.c2p(de.x),oe=Te.c2p(de.y);return!!(T($)&&T(oe)&&we.node())&&("text"===we.node().nodeName?we.attr("x",$).attr("y",oe):we.attr("transform",o($,oe)),!0)},x.translatePoints=function(de,we,ke){de.each(function(Te){var $=k.select(this);x.translatePoint(Te,$,we,ke)})},x.hideOutsideRangePoint=function(de,we,ke,Te,$,oe){we.attr("display",ke.isPtWithinRange(de,$)&&Te.isPtWithinRange(de,oe)?null:"none")},x.hideOutsideRangePoints=function(de,we){if(we._hasClipOnAxisFalse){var ke=we.xaxis,Te=we.yaxis;de.each(function($){var oe=$[0].trace,he=oe.xcalendar,me=oe.ycalendar,Me=d.traceIs(oe,"bar-like")?".bartext":".point,.textpoint";de.selectAll(Me).each(function(Ie){x.hideOutsideRangePoint(Ie,k.select(this),ke,Te,he,me)})})}},x.crispRound=function(de,we,ke){return we&&T(we)?de._context.staticPlot?we:we<1?1:Math.round(we):ke||0},x.singleLineStyle=function(de,we,ke,Te,$){we.style("fill","none");var oe=(((de||[])[0]||{}).trace||{}).line||{},he=ke||oe.width||0,me=$||oe.dash||"";s.stroke(we,Te||oe.color),x.dashLine(we,me,he)},x.lineGroupStyle=function(de,we,ke,Te){de.style("fill","none").each(function($){var oe=((($||[])[0]||{}).trace||{}).line||{},he=we||oe.width||0,me=Te||oe.dash||"";k.select(this).call(s.stroke,ke||oe.color).call(x.dashLine,me,he)})},x.dashLine=function(de,we,ke){we=x.dashStyle(we,ke=+ke||0),de.style({"stroke-dasharray":we,"stroke-width":ke+"px"})},x.dashStyle=function(de,we){we=+we||1;var ke=Math.max(we,3);return"solid"===de?de="":"dot"===de?de=ke+"px,"+ke+"px":"dash"===de?de=3*ke+"px,"+3*ke+"px":"longdash"===de?de=5*ke+"px,"+5*ke+"px":"dashdot"===de?de=3*ke+"px,"+ke+"px,"+ke+"px,"+ke+"px":"longdashdot"===de&&(de=5*ke+"px,"+2*ke+"px,"+ke+"px,"+2*ke+"px"),de},x.singleFillStyle=function(de,we){var ke=k.select(de.node());v(de,((ke.data()[0]||[])[0]||{}).trace||{},we)},x.fillGroupStyle=function(de,we){de.style("stroke-width",0).each(function(ke){var Te=k.select(this);ke[0].trace&&v(Te,ke[0].trace,we)})};var g=e(90998);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(g).forEach(function(de){var we=g[de],ke=we.n;x.symbolList.push(ke,String(ke),de,ke+100,String(ke+100),de+"-open"),x.symbolNames[ke]=de,x.symbolFuncs[ke]=we.f,x.symbolBackOffs[ke]=we.backoff||0,we.needLine&&(x.symbolNeedLines[ke]=!0),we.noDot?x.symbolNoDot[ke]=!0:x.symbolList.push(ke+200,String(ke+200),de+"-dot",ke+300,String(ke+300),de+"-open-dot"),we.noFill&&(x.symbolNoFill[ke]=!0)});var y=x.symbolNames.length;function p(de,we,ke,Te){return x.symbolFuncs[de%100](we,ke,Te)+(de>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(de){if(T(de))de=+de;else if("string"==typeof de){var we=0;de.indexOf("-open")>0&&(we=100,de=de.replace("-open","")),de.indexOf("-dot")>0&&(we+=200,de=de.replace("-dot","")),(de=x.symbolNames.indexOf(de))>=0&&(de+=we)}return de%100>=y||de>=400?0:Math.floor(Math.max(de,0))};var m={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},u=l("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};x.gradient=function(de,we,ke,Te,$,oe){for(var he=$.length,me=S[Te],Me=new Array(he),Ie=0;Ie<he;Ie++)me.reversed?Me[he-1-Ie]=[u(100*(1-$[Ie][0])),$[Ie][1]]:Me[Ie]=[u(100*$[Ie][0]),$[Ie][1]];var Pe=we._fullLayout,ze="g"+Pe._uid+"-"+ke,ce=Pe._defs.select(".gradients").selectAll("#"+ze).data([Te+Me.join(";")],A.identity);ce.exit().remove(),ce.enter().append(me.node).each(function(){var ge=k.select(this);me.attrs&&ge.attr(me.attrs),ge.attr("id",ze);var _e=ge.selectAll("stop").data(Me);_e.exit().remove(),_e.enter().append("stop"),_e.each(function(De){var He=b(De[1]);k.select(this).attr({offset:De[0]+"%","stop-color":s.tinyRGB(He),"stop-opacity":He.getAlpha()})})}),de.style(oe,Z(ze,we)).style(oe+"-opacity",null),de.classed("gradient_filled",!0)},x.pattern=function(de,we,ke,Te,$,oe,he,me,Me,Ie,Pe,ze){var ce="legend"===we;me&&("overlay"===Me?Pe=s.contrast(Ie=me):(Ie=void 0,Pe=me));var ge,_e,De,He,Ve,nt,tt,at,dt,wt=ke._fullLayout,bt="p"+wt._uid+"-"+Te,_t={},Lt=b(Pe),Ct=s.tinyRGB(Lt),Ot=ze*Lt.getAlpha();switch($){case"/":ge=oe*Math.sqrt(2),_e=oe*Math.sqrt(2),nt="path",_t={d:De="M-"+ge/4+","+_e/4+"l"+ge/2+",-"+_e/2+"M0,"+_e+"L"+ge+",0M"+ge/4*3+","+_e/4*5+"l"+ge/2+",-"+_e/2,opacity:Ot,stroke:Ct,"stroke-width":(He=he*oe)+"px"};break;case"\\":ge=oe*Math.sqrt(2),_e=oe*Math.sqrt(2),nt="path",_t={d:De="M"+ge/4*3+",-"+_e/4+"l"+ge/2+","+_e/2+"M0,0L"+ge+","+_e+"M-"+ge/4+","+_e/4*3+"l"+ge/2+","+_e/2,opacity:Ot,stroke:Ct,"stroke-width":(He=he*oe)+"px"};break;case"x":ge=oe*Math.sqrt(2),_e=oe*Math.sqrt(2),De="M-"+ge/4+","+_e/4+"l"+ge/2+",-"+_e/2+"M0,"+_e+"L"+ge+",0M"+ge/4*3+","+_e/4*5+"l"+ge/2+",-"+_e/2+"M"+ge/4*3+",-"+_e/4+"l"+ge/2+","+_e/2+"M0,0L"+ge+","+_e+"M-"+ge/4+","+_e/4*3+"l"+ge/2+","+_e/2,He=oe-oe*Math.sqrt(1-he),nt="path",_t={d:De,opacity:Ot,stroke:Ct,"stroke-width":He+"px"};break;case"|":nt="path",nt="path",_t={d:De="M"+(ge=oe)/2+",0L"+ge/2+","+(_e=oe),opacity:Ot,stroke:Ct,"stroke-width":(He=he*oe)+"px"};break;case"-":nt="path",nt="path",_t={d:De="M0,"+(_e=oe)/2+"L"+(ge=oe)+","+_e/2,opacity:Ot,stroke:Ct,"stroke-width":(He=he*oe)+"px"};break;case"+":nt="path",De="M"+(ge=oe)/2+",0L"+ge/2+","+(_e=oe)+"M0,"+_e/2+"L"+ge+","+_e/2,He=oe-oe*Math.sqrt(1-he),nt="path",_t={d:De,opacity:Ot,stroke:Ct,"stroke-width":He+"px"};break;case".":ge=oe,_e=oe,he<Math.PI/4?Ve=Math.sqrt(he*oe*oe/Math.PI):(tt=he,at=Math.PI/4,Ve=(dt=oe/2)+(oe/Math.sqrt(2)-dt)*(tt-at)/(1-at)),nt="circle",_t={cx:ge/2,cy:_e/2,r:Ve,opacity:Ot,fill:Ct}}var Ht=[$||"noSh",Ie||"noBg",Pe||"noFg",oe,he].join(";"),It=wt._defs.select(".patterns").selectAll("#"+bt).data([Ht],A.identity);It.exit().remove(),It.enter().append("pattern").each(function(){var Ge=k.select(this);if(Ge.attr({id:bt,width:ge+"px",height:_e+"px",patternUnits:"userSpaceOnUse",patternTransform:ce?"scale(0.8)":""}),Ie){var Ze=b(Ie),Be=s.tinyRGB(Ze),Ye=Ze.getAlpha(),rt=Ge.selectAll("rect").data([0]);rt.exit().remove(),rt.enter().append("rect").attr({width:ge+"px",height:_e+"px",fill:Be,"fill-opacity":Ye})}var Se=Ge.selectAll(nt).data([0]);Se.exit().remove(),Se.enter().append(nt).attr(_t)}),de.style("fill",Z(bt,ke)).style("fill-opacity",null),de.classed("pattern_filled",!0)},x.initGradients=function(de){A.ensureSingle(de._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),k.select(de).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(de){A.ensureSingle(de._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),k.select(de).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(de,we,ke){return de&&A.isArrayOrTypedArray(de)?we<de.length?de[we]:ke:de},x.pointStyle=function(de,we,ke){if(de.size()){var Te=x.makePointStyleFns(we);de.each(function($){x.singlePointStyle($,k.select(this),we,Te,ke)})}},x.singlePointStyle=function(de,we,ke,Te,$){var oe=ke.marker,he=oe.line;if(we.style("opacity",Te.selectedOpacityFn?Te.selectedOpacityFn(de):void 0===de.mo?oe.opacity:de.mo),Te.ms2mrc){var me;me="various"===de.ms||"various"===oe.size?3:Te.ms2mrc(de.ms),de.mrc=me,Te.selectedSizeFn&&(me=de.mrc=Te.selectedSizeFn(de));var Me=x.symbolNumber(de.mx||oe.symbol)||0;de.om=Me%200>=100;var Ie=Ee(de,ke),Pe=X(de,ke);we.attr("d",p(Me,me,Ie,Pe))}var ze,ce,ge,_e=!1;if(de.so?(ge=he.outlierwidth,ce=he.outliercolor,ze=oe.outliercolor):(ge=(de.mlw+1||(he||{}).width+1||(de.trace?(de.trace.marker.line||{}).width:0)+1)-1||0,ce="mlc"in de?de.mlcc=Te.lineScale(de.mlc):A.isArrayOrTypedArray(he.color)?s.defaultLine:he.color,A.isArrayOrTypedArray(oe.color)&&(ze=s.defaultLine,_e=!0),ze="mc"in de?de.mcc=Te.markerScale(de.mc):oe.color||"rgba(0,0,0,0)",Te.selectedColorFn&&(ze=Te.selectedColorFn(de))),de.om)we.call(s.stroke,ze).style({"stroke-width":(ge||1)+"px",fill:"none"});else{we.style("stroke-width",(de.isBlank?0:ge)+"px");var He=oe.gradient,Ve=de.mgt;Ve?_e=!0:Ve=He&&He.type,A.isArrayOrTypedArray(Ve)&&(S[Ve=Ve[0]]||(Ve=0));var nt=oe.pattern,tt=nt&&x.getPatternAttr(nt.shape,de.i,"");if(Ve&&"none"!==Ve){var at=de.mgc;at?_e=!0:at=He.color;var dt=ke.uid;_e&&(dt+="-"+de.i),x.gradient(we,$,dt,Ve,[[0,at],[1,ze]],"fill")}else if(tt){var wt=x.getPatternAttr(nt.bgcolor,de.i,null),bt=x.getPatternAttr(nt.fgcolor,de.i,null),_t=nt.fgopacity,Lt=x.getPatternAttr(nt.size,de.i,8),Ct=x.getPatternAttr(nt.solidity,de.i,.3),Ot=de.mcc||A.isArrayOrTypedArray(nt.shape)||A.isArrayOrTypedArray(nt.bgcolor)||A.isArrayOrTypedArray(nt.size)||A.isArrayOrTypedArray(nt.solidity),Ht=ke.uid;Ot&&(Ht+="-"+de.i),x.pattern(we,"point",$,Ht,tt,Lt,Ct,de.mcc,nt.fillmode,wt,bt,_t)}else s.fill(we,ze);ge&&s.stroke(we,ce)}},x.makePointStyleFns=function(de){var we={},ke=de.marker;return we.markerScale=x.tryColorscale(ke,""),we.lineScale=x.tryColorscale(ke,"line"),d.traceIs(de,"symbols")&&(we.ms2mrc=c.isBubble(de)?h(de):function(){return(ke.size||6)/2}),de.selectedpoints&&A.extendFlat(we,x.makeSelectedPointStyleFns(de)),we},x.makeSelectedPointStyleFns=function(de){var we={},$=de.marker||{},oe=(de.selected||{}).marker||{},he=(de.unselected||{}).marker||{},Me=oe.opacity,Ie=he.opacity,Pe=void 0!==Me,ze=void 0!==Ie;(A.isArrayOrTypedArray($.opacity)||Pe||ze)&&(we.selectedOpacityFn=function(at){var dt=void 0===at.mo?$.opacity:at.mo;return at.selected?Pe?Me:dt:ze?Ie:i*dt});var ce=$.color,ge=oe.color,_e=he.color;(ge||_e)&&(we.selectedColorFn=function(at){var dt=at.mcc||ce;return at.selected?ge||dt:_e||dt});var De=$.size,He=oe.size,Ve=he.size,nt=void 0!==He,tt=void 0!==Ve;return d.traceIs(de,"symbols")&&(nt||tt)&&(we.selectedSizeFn=function(at){var dt=at.mrc||De/2;return at.selected?nt?He/2:dt:tt?Ve/2:dt}),we},x.makeSelectedTextStyleFns=function(de){var we={},me=(de.textfont||{}).color,Me=((de.selected||{}).textfont||{}).color,Ie=((de.unselected||{}).textfont||{}).color;return we.selectedTextColorFn=function(Pe){var ze=Pe.tc||me;return Pe.selected?Me||ze:Ie||(Me?ze:s.addOpacity(ze,i))},we},x.selectedPointStyle=function(de,we){if(de.size()&&we.selectedpoints){var ke=x.makeSelectedPointStyleFns(we),Te=we.marker||{},$=[];ke.selectedOpacityFn&&$.push(function(oe,he){oe.style("opacity",ke.selectedOpacityFn(he))}),ke.selectedColorFn&&$.push(function(oe,he){s.fill(oe,ke.selectedColorFn(he))}),ke.selectedSizeFn&&$.push(function(oe,he){var me=he.mx||Te.symbol||0,Me=ke.selectedSizeFn(he);oe.attr("d",p(x.symbolNumber(me),Me,Ee(he,we),X(he,we))),he.mrc2=Me}),$.length&&de.each(function(oe){for(var he=k.select(this),me=0;me<$.length;me++)$[me](he,oe)})}},x.tryColorscale=function(de,we){var ke=we?A.nestedProperty(de,we).get():de;return ke&&(ke.colorscale||ke._colorAx)&&A.isArrayOrTypedArray(ke.color)?t.makeColorScaleFuncFromTrace(ke):A.identity};var _,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(de,we,ke,Te,$){var oe=k.select(de.node().parentNode),he=-1!==we.indexOf("top")?"top":-1!==we.indexOf("bottom")?"bottom":"middle",me=-1!==we.indexOf("left")?"end":-1!==we.indexOf("right")?"start":"middle",Me=Te?Te/.8+1:0,Ie=(r.lineCount(de)-1)*a+1,Pe=L[me]*Me,ze=.75*ke+L[he]*Me+(L[he]-1)*Ie*ke/2;de.attr("text-anchor",me),$||oe.attr("transform",o(Pe,ze))}function P(de,we){var ke=de.ts||we.textfont.size;return T(ke)&&ke>0?ke:0}function I(de,we,ke){return ke&&(de=B(de)),we?R(de[1]):j(de[0])}function j(de){var we=k.round(de,2);return _=we,we}function R(de){var we=k.round(de,2);return E=we,we}function H(de,we,ke,Te){var $=de[0]-we[0],oe=de[1]-we[1],he=ke[0]-we[0],me=ke[1]-we[1],Me=Math.pow($*$+oe*oe,.25),Ie=Math.pow(he*he+me*me,.25),Pe=(Ie*Ie*$-Me*Me*he)*Te,ze=(Ie*Ie*oe-Me*Me*me)*Te,ce=3*Ie*(Me+Ie),ge=3*Me*(Me+Ie);return[[j(we[0]+(ce&&Pe/ce)),R(we[1]+(ce&&ze/ce))],[j(we[0]-(ge&&Pe/ge)),R(we[1]-(ge&&ze/ge))]]}x.textPointStyle=function(de,we,ke){if(de.size()){var Te;if(we.selectedpoints){var $=x.makeSelectedTextStyleFns(we);Te=$.selectedTextColorFn}var oe=we.texttemplate,he=ke._fullLayout;de.each(function(me){var Me=k.select(this),Ie=oe?A.extractOption(me,we,"txt","texttemplate"):A.extractOption(me,we,"tx","text");if(Ie||0===Ie){if(oe){var Pe=we._module.formatLabels,ze=Pe?Pe(me,we,he):{},ce={};f(ce,we,me.i),Ie=A.texttemplateString(Ie,ze,he._d3locale,ce,me,we._meta||{})}var _e=me.tp||we.textposition,De=P(me,we),He=Te?Te(me):me.tc||we.textfont.color;Me.call(x.font,me.tf||we.textfont.family,De,He).text(Ie).call(r.convertToTspans,ke).call(C,_e,De,me.mrc)}else Me.remove()})}},x.selectedTextStyle=function(de,we){if(de.size()&&we.selectedpoints){var ke=x.makeSelectedTextStyleFns(we);de.each(function(Te){var $=k.select(this),oe=ke.selectedTextColorFn(Te),he=Te.tp||we.textposition,me=P(Te,we);s.fill($,oe);var Me=d.traceIs(we,"bar-like");C($,he,me,Te.mrc2||Te.mrc,Me)})}},x.smoothopen=function(de,we){if(de.length<3)return"M"+de.join("L");var ke,Te="M"+de[0],$=[];for(ke=1;ke<de.length-1;ke++)$.push(H(de[ke-1],de[ke],de[ke+1],we));for(Te+="Q"+$[0][0]+" "+de[1],ke=2;ke<de.length-1;ke++)Te+="C"+$[ke-2][1]+" "+$[ke-1][0]+" "+de[ke];return Te+"Q"+$[de.length-3][1]+" "+de[de.length-1]},x.smoothclosed=function(de,we){if(de.length<3)return"M"+de.join("L")+"Z";var ke,Te="M"+de[0],$=de.length-1,oe=[H(de[$],de[0],de[1],we)];for(ke=1;ke<$;ke++)oe.push(H(de[ke-1],de[ke],de[ke+1],we));for(oe.push(H(de[$-1],de[$],de[0],we)),ke=1;ke<=$;ke++)Te+="C"+oe[ke-1][1]+" "+oe[ke][0]+" "+de[ke];return Te+"C"+oe[$][1]+" "+oe[0][0]+" "+de[0]+"Z"};var F={hv:function(de,we,ke){return"H"+j(we[0])+"V"+I(we,1,ke)},vh:function(de,we,ke){return"V"+R(we[1])+"H"+I(we,0,ke)},hvh:function(de,we,ke){return"H"+j((de[0]+we[0])/2)+"V"+R(we[1])+"H"+I(we,0,ke)},vhv:function(de,we,ke){return"V"+R((de[1]+we[1])/2)+"H"+j(we[0])+"V"+I(we,1,ke)}},U=function(de,we,ke){return"L"+I(we,0,ke)+","+I(we,1,ke)};function B(de,we){var ke=de.backoff,Te=de.trace,$=de.d,oe=de.i;if(ke&&Te&&Te.marker&&Te.marker.angle%360==0&&Te.line&&"spline"!==Te.line.shape){var he=A.isArrayOrTypedArray(ke),me=de,Me=we?we[0]:_||0,Ie=we?we[1]:E||0,Pe=me[0],ze=me[1],_e=Math.atan2(ze-Ie,Pe-Me),De=he?ke[oe]:ke;if("auto"===De){var He=me.i;"scatter"===Te.type&&He--;var Ve=me.marker,nt=Ve.symbol;A.isArrayOrTypedArray(nt)&&(nt=nt[He]);var tt=Ve.size;A.isArrayOrTypedArray(tt)&&(tt=tt[He]),De=Ve?x.symbolBackOffs[x.symbolNumber(nt)]*tt:0,De+=x.getMarkerStandoff($[He],Te)||0}var at=Pe-De*Math.cos(_e),dt=ze-De*Math.sin(_e);(at<=Pe&&at>=Me||at>=Pe&&at<=Me)&&(dt<=ze&&dt>=Ie||dt>=ze&&dt<=Ie)&&(de=[at,dt])}return de}x.steps=function(de){var we=F[de]||U;return function(ke){for(var Te="M"+j(ke[0][0])+","+R(ke[0][1]),$=ke.length,oe=1;oe<$;oe++)Te+=we(ke[oe-1],ke[oe],oe===$-1);return Te}},x.applyBackoff=B,x.makeTester=function(){var de=A.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(ke){ke.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),we=A.ensureSingle(de,"path","js-reference-point",function(ke){ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=de,x.testref=we},x.savedBBoxes={};var N=0;function J(de){var we=de.getAttribute("data-unformatted");if(null!==we)return we+de.getAttribute("data-math")+de.getAttribute("text-anchor")+de.getAttribute("style")}function Z(de,we){if(!de)return null;var ke=we._context,Te=ke._exportedPlot?"":ke._baseUrl||"";return Te?"url('"+Te+"#"+de+"')":"url(#"+de+")"}x.bBox=function(de,we,ke){var Te,$,oe;if(ke||(ke=J(de)),ke){if(Te=x.savedBBoxes[ke])return A.extendFlat({},Te)}else if(1===de.childNodes.length){var he=de.childNodes[0];if(ke=J(he)){var me=+he.getAttribute("x")||0,Me=+he.getAttribute("y")||0,Ie=he.getAttribute("transform");if(!Ie){var Pe=x.bBox(he,!1,ke);return me&&(Pe.left+=me,Pe.right+=me),Me&&(Pe.top+=Me,Pe.bottom+=Me),Pe}if(Te=x.savedBBoxes[ke+="~"+me+"~"+Me+"~"+Ie])return A.extendFlat({},Te)}}we?$=de:(oe=x.tester.node(),$=de.cloneNode(!0),oe.appendChild($)),k.select($).attr("transform",null).call(r.positionText,0,0);var ze=$.getBoundingClientRect(),ce=x.testref.node().getBoundingClientRect();we||oe.removeChild($);var ge={height:ze.height,width:ze.width,left:ze.left-ce.left,top:ze.top-ce.top,right:ze.right-ce.left,bottom:ze.bottom-ce.top};return N>=1e4&&(x.savedBBoxes={},N=0),ke&&(x.savedBBoxes[ke]=ge),N++,A.extendFlat({},ge)},x.setClipUrl=function(de,we,ke){de.attr("clip-path",Z(we,ke))},x.getTranslate=function(de){var we=(de[de.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ke,Te,$){return[Te,$].join(" ")}).split(" ");return{x:+we[0]||0,y:+we[1]||0}},x.setTranslate=function(de,we,ke){var $=de.attr?"attr":"setAttribute",oe=de[de.attr?"attr":"getAttribute"]("transform")||"";return we=we||0,ke=ke||0,oe=oe.replace(/(\btranslate\(.*?\);?)/,"").trim(),oe=(oe+=o(we,ke)).trim(),de[$]("transform",oe),oe},x.getScale=function(de){var we=(de[de.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ke,Te,$){return[Te,$].join(" ")}).split(" ");return{x:+we[0]||1,y:+we[1]||1}},x.setScale=function(de,we,ke){var $=de.attr?"attr":"setAttribute",oe=de[de.attr?"attr":"getAttribute"]("transform")||"";return we=we||1,ke=ke||1,oe=oe.replace(/(\bscale\(.*?\);?)/,"").trim(),oe=(oe+="scale("+we+","+ke+")").trim(),de[$]("transform",oe),oe};var V=/\s*sc.*/;x.setPointGroupScale=function(de,we,ke){if(we=we||1,ke=ke||1,de){var Te=1===we&&1===ke?"":"scale("+we+","+ke+")";de.each(function(){var $=(this.getAttribute("transform")||"").replace(V,"");$=($+=Te).trim(),this.setAttribute("transform",$)})}};var W=/translate\([^)]*\)\s*$/;function X(de,we){var ke;return de&&(ke=de.mf),void 0===ke&&(ke=we.marker&&we.marker.standoff||0),we._geo||we._xA?ke:-ke}x.setTextPointsScale=function(de,we,ke){de&&de.each(function(){var Te,$=k.select(this),oe=$.select("text");if(oe.node()){var he=parseFloat(oe.attr("x")||0),me=parseFloat(oe.attr("y")||0),Me=($.attr("transform")||"").match(W);Te=1===we&&1===ke?[]:[o(he,me),"scale("+we+","+ke+")",o(-he,-me)],Me&&Te.push(Me),$.attr("transform",Te.join(""))}})},x.getMarkerStandoff=X;var K,ne,re,ae,le,pe,xe=Math.atan2,ye=Math.cos,se=Math.sin;function fe(de,we){var ke=we[0],Te=we[1];return[ke*ye(de)-Te*se(de),ke*se(de)+Te*ye(de)]}function Ee(de,we){var ke,Te,$=de.ma;void 0===$&&($=we.marker.angle||0);var oe=we.marker.angleref;if("previous"===oe||"north"===oe){if(we._geo){var he=we._geo.project(de.lonlat);ke=he[0],Te=he[1]}else{var me=we._xA,Me=we._yA;if(!me||!Me)return 90;ke=me.c2p(de.x),Te=Me.c2p(de.y)}if(we._geo){var Ie,Pe=de.lonlat[0],ze=de.lonlat[1],ce=we._geo.project([Pe,ze+1e-5]),ge=we._geo.project([Pe+1e-5,ze]),_e=xe(ge[1]-Te,ge[0]-ke),De=xe(ce[1]-Te,ce[0]-ke);if("north"===oe)Ie=$/180*Math.PI;else if("previous"===oe){var He=Pe/180*Math.PI,Ve=ze/180*Math.PI,nt=K/180*Math.PI,tt=ne/180*Math.PI,at=nt-He,dt=ye(tt)*se(at),wt=se(tt)*ye(Ve)-ye(tt)*se(Ve)*ye(at);Ie=-xe(dt,wt)-Math.PI,K=Pe,ne=ze}var bt=fe(_e,[ye(Ie),0]),_t=fe(De,[se(Ie),0]);$=xe(bt[1]+_t[1],bt[0]+_t[0])/Math.PI*180,"previous"!==oe||pe===we.uid&&de.i===le+1||($=null)}if("previous"===oe&&!we._geo)if(pe===we.uid&&de.i===le+1&&T(ke)&&T(Te)){var Lt=ke-re,Ct=Te-ae,Ot=we.line&&we.line.shape||"",Ht=Ot.slice(Ot.length-1);"h"===Ht&&(Ct=0),"v"===Ht&&(Lt=0),$+=xe(Ct,Lt)/Math.PI*180+90}else $=null}return re=ke,ae=Te,le=de.i,pe=we.uid,$}x.getMarkerAngle=Ee},90998:function(Q,z,e){"use strict";var k,A,l,T,b=e(95616),d=e(39898).round,s="M0,0Z",t=Math.sqrt(2),o=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function i(h){return null===h}function c(h,f,x){if(!(h&&h%360!=0||f))return x;if(l===h&&T===f&&k===x)return A;function v(I,j){var R=n(I),H=a(I),F=j[0],U=j[1]+(f||0);return[F*R-U*H,F*H+U*R]}l=h,T=f,k=x;for(var g=h/180*r,y=0,p=0,m=b(x),w="",u=0;u<m.length;u++){var S=m[u],_=S[0],E=y,L=p;if("M"===_||"L"===_)y=+S[1],p=+S[2];else if("m"===_||"l"===_)y+=+S[1],p+=+S[2];else if("H"===_)y=+S[1];else if("h"===_)y+=+S[1];else if("V"===_)p=+S[1];else if("v"===_)p+=+S[1];else if("A"===_){y=+S[1],p=+S[2];var C=v(g,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+h}"H"!==_&&"V"!==_||(_="L"),"h"!==_&&"v"!==_||(_="l"),"m"!==_&&"l"!==_||(y-=E,p-=L);var P=v(g,[y,p]);"H"!==_&&"V"!==_||(_="L"),"M"!==_&&"L"!==_&&"m"!==_&&"l"!==_||(S[1]=P[0],S[2]=P[1]),S[0]=_,w+=S[0]+S.slice(1).join(",")}return A=w,w}Q.exports={circle:{n:0,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return x?c(f,x,g):g}},square:{n:1,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(h,f,x){if(i(f))return s;var v=d(1.3*h,2);return c(f,x,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(h,f,x){if(i(f))return s;var v=d(.4*h,2),g=d(1.2*h,2);return c(f,x,"M"+g+","+v+"H"+v+"V"+g+"H-"+v+"V"+v+"H-"+g+"V-"+v+"H-"+v+"V-"+g+"H"+v+"V-"+v+"H"+g+"Z")}},x:{n:4,f:function(h,f,x){if(i(f))return s;var v=d(.8*h/t,2),g="l"+v+","+v,y="l"+v+",-"+v,p="l-"+v+",-"+v,m="l-"+v+","+v;return c(f,x,"M0,"+v+g+y+p+y+p+m+p+m+g+m+g+"Z")}},"triangle-up":{n:5,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return c(f,x,"M-"+v+","+d(h/2,2)+"H"+v+"L0,-"+d(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return c(f,x,"M-"+v+",-"+d(h/2,2)+"H"+v+"L0,"+d(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return c(f,x,"M"+d(h/2,2)+",-"+v+"V"+v+"L-"+d(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return c(f,x,"M-"+d(h/2,2)+",-"+v+"V"+v+"L"+d(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,x,"M-"+g+",-"+v+"H"+v+"V"+g+"Z")}},"triangle-se":{n:10,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,x,"M"+v+",-"+g+"V"+v+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,x,"M"+g+","+v+"H-"+v+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,x,"M-"+v+","+g+"V-"+v+"H"+g+"Z")}},pentagon:{n:13,f:function(h,f,x){if(i(f))return s;var v=d(.951*h,2),g=d(.588*h,2),y=d(-h,2),p=d(-.309*h,2);return c(f,x,"M"+v+","+p+"L"+g+","+d(.809*h,2)+"H-"+g+"L-"+v+","+p+"L0,"+y+"Z")}},hexagon:{n:14,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return c(f,x,"M"+y+",-"+g+"V"+g+"L0,"+v+"L-"+y+","+g+"V-"+g+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return c(f,x,"M-"+g+","+y+"H"+g+"L"+v+",0L"+g+",-"+y+"H-"+g+"L-"+v+",0Z")}},octagon:{n:16,f:function(h,f,x){if(i(f))return s;var v=d(.924*h,2),g=d(.383*h,2);return c(f,x,"M-"+g+",-"+v+"H"+g+"L"+v+",-"+g+"V"+g+"L"+g+","+v+"H-"+g+"L-"+v+","+g+"V-"+g+"Z")}},star:{n:17,f:function(h,f,x){if(i(f))return s;var v=1.4*h,g=d(.225*v,2),y=d(.951*v,2),p=d(.363*v,2),m=d(.588*v,2),w=d(-v,2),u=d(-.309*v,2),S=d(.118*v,2),_=d(.809*v,2);return c(f,x,"M"+g+","+u+"H"+y+"L"+p+","+S+"L"+m+","+_+"L0,"+d(.382*v,2)+"L-"+m+","+_+"L-"+p+","+S+"L-"+y+","+u+"H-"+g+"L0,"+w+"Z")}},hexagram:{n:18,f:function(h,f,x){if(i(f))return s;var v=d(.66*h,2),g=d(.38*h,2),y=d(.76*h,2);return c(f,x,"M-"+y+",0l-"+g+",-"+v+"h"+y+"l"+g+",-"+v+"l"+g+","+v+"h"+y+"l-"+g+","+v+"l"+g+","+v+"h-"+y+"l-"+g+","+v+"l-"+g+",-"+v+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(h,f,x){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return c(f,x,"M-"+v+","+g+m+v+","+g+m+"0,-"+y+m+"-"+v+","+g+"Z")}},"star-triangle-down":{n:20,f:function(h,f,x){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return c(f,x,"M"+v+",-"+g+m+"-"+v+",-"+g+m+"0,"+y+m+v+",-"+g+"Z")}},"star-square":{n:21,f:function(h,f,x){if(i(f))return s;var v=d(1.1*h,2),g=d(2*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,x,"M-"+v+",-"+v+y+"-"+v+","+v+y+v+","+v+y+v+",-"+v+y+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2),g=d(1.9*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,x,"M-"+v+",0"+y+"0,"+v+y+v+",0"+y+"0,-"+v+y+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(h,f,x){if(i(f))return s;var v=d(.7*h,2),g=d(1.4*h,2);return c(f,x,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2),g=d(.7*h,2);return c(f,x,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},hourglass:{n:25,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g=d(h/t,2);return c(f,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,f,x){if(i(f))return s;var v=d(1.3*h,2);return c(f,x,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,f,x){if(i(f))return s;var v=d(1.3*h,2),g=d(.65*h,2);return c(f,x,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2);return c(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(.85*h,2);return c(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,f,x){if(i(f))return s;var v=d(h/2,2),g=d(h,2);return c(f,x,"M"+v+","+g+"V-"+g+"M"+(v-g)+",-"+g+"V"+g+"M"+g+","+v+"H-"+g+"M-"+g+","+(v-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,x,"M-"+v+","+y+"L0,0M"+v+","+y+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,x,"M-"+v+",-"+y+"L0,0M"+v+",-"+y+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,x,"M"+y+","+v+"L0,0M"+y+",-"+v+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,x,"M-"+y+","+v+"L0,0M-"+y+",-"+v+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2);return c(f,x,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2);return c(f,x,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,x,"M0,0L"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,x,"M0,0L-"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M-"+v+",0H"+v+"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return c(f,x,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,x,"M0,-"+g+"V"+g+"M0,0L"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,x,"M0,-"+g+"V"+g+"M0,0L-"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,f,x){if(i(f))return s;var v=r/2.5,g=2*h*n(v),y=2*h*a(v);return c(f,x,"M0,0L"+-g+","+y+"L"+g+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,f,x){if(i(f))return s;var v=r/4,g=2*h*n(v),y=2*h*a(v);return c(f,x,"M0,0L"+-g+","+y+"A "+2*h+","+2*h+" 0 0 1 "+g+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function(Q){"use strict";Q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(Q,z,e){"use strict";var k=e(92770),A=e(73972),l=e(89298),T=e(71828),b=e(45827);function d(s,t,o,r){var n=t["error_"+r]||{},a=[];if(n.visible&&-1!==["linear","log"].indexOf(o.type)){for(var i=b(n),c=0;c<s.length;c++){var h=s[c],f=h.i;if(void 0===f)f=c;else if(null===f)continue;var x=h[r];if(k(o.c2l(x))){var v=i(x,f);if(k(v[0])&&k(v[1])){var g=h[r+"s"]=x-v[0],y=h[r+"h"]=x+v[1];a.push(g,y)}}}var m=t._extremes[o._id],w=l.findExtremes(o,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(w.min),m.max=m.max.concat(w.max)}}Q.exports=function(s){for(var t=s.calcdata,o=0;o<t.length;o++){var r=t[o],n=r[0].trace;if(!0===n.visible&&A.traceIs(n,"errorBarsOK")){var a=l.getFromId(s,n.xaxis),i=l.getFromId(s,n.yaxis);d(r,n,a,"x"),d(r,n,i,"y")}}}},45827:function(Q){"use strict";function z(e,k){return"percent"===e?function(A){return Math.abs(A*k/100)}:"constant"===e?function(){return Math.abs(k)}:"sqrt"===e?function(A){return Math.sqrt(Math.abs(A))}:void 0}Q.exports=function(e){var k=e.type,A=e.symmetric;if("data"===k){var l=e.array||[];if(A)return function(s,t){var o=+l[t];return[o,o]};var T=e.arrayminus||[];return function(s,t){var o=+l[t],r=+T[t];return isNaN(o)&&isNaN(r)?[NaN,NaN]:[r||0,o||0]}}var b=z(k,e.value),d=z(k,e.valueminus);return A||void 0===e.valueminus?function(s){var t=b(s);return[t,t]}:function(s){return[d(s),b(s)]}}},97587:function(Q,z,e){"use strict";var k=e(92770),A=e(73972),l=e(71828),T=e(44467),b=e(25673);Q.exports=function(d,s,t,o){var r="error_"+o.axis,n=T.newContainer(s,r),a=d[r]||{};function i(x,v){return l.coerce(a,n,b,x,v)}if(!1!==i("visible",void 0!==a.array||void 0!==a.value||"sqrt"===a.type)){var c=i("type","array"in a?"data":"percent"),h=!0;"sqrt"!==c&&(h=i("symmetric",!(("data"===c?"arrayminus":"valueminus")in a))),"data"===c?(i("array"),i("traceref"),h||(i("arrayminus"),i("tracerefminus"))):"percent"!==c&&"constant"!==c||(i("value"),h||i("valueminus"));var f="copy_"+o.inherit+"style";o.inherit&&(s["error_"+o.inherit]||{}).visible&&i(f,!(a.color||k(a.thickness)||k(a.width))),o.inherit&&n[f]||(i("color",t),i("thickness"),i("width",A.traceIs(s,"gl3d")?0:4))}}},37369:function(Q,z,e){"use strict";var k=e(71828),A=e(30962).overrideAll,l=e(25673),T={error_x:k.extendFlat({},l),error_y:k.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:k.extendFlat({},l),error_y:k.extendFlat({},l),error_z:k.extendFlat({},l)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,Q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:A(b,"calc","nested"),scattergl:A(T,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(d,s,t){(s.error_y||{}).visible&&(t.yerr=d.yh-d.y,s.error_y.symmetric||(t.yerrneg=d.y-d.ys)),(s.error_x||{}).visible&&(t.xerr=d.xh-d.x,s.error_x.symmetric||(t.xerrneg=d.x-d.xs))}}},19398:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(91424),T=e(34098);Q.exports=function(b,d,s,t){var o=s.xaxis,r=s.yaxis,n=t&&t.duration>0,a=b._context.staticPlot;d.each(function(i){var c,h=i[0].trace,f=h.error_x||{},x=h.error_y||{};h.ids&&(c=function(p){return p.id});var v=T.hasMarkers(h)&&h.marker.maxdisplayed>0;x.visible||f.visible||(i=[]);var g=k.select(this).selectAll("g.errorbar").data(i,c);if(g.exit().remove(),i.length){f.visible||g.selectAll("path.xerror").remove(),x.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var y=g.enter().append("g").classed("errorbar",!0);n&&y.style("opacity",0).transition().duration(t.duration).style("opacity",1),l.setClipUrl(g,s.layerClipId,b),g.each(function(p){var C,P,I,j,m=k.select(this),w=(I=r,j={x:(P=o).c2p((C=p).x),y:I.c2p(C.y)},void 0!==C.yh&&(j.yh=I.c2p(C.yh),j.ys=I.c2p(C.ys),A(j.ys)||(j.noYS=!0,j.ys=I.c2p(C.ys,!0))),void 0!==C.xh&&(j.xh=P.c2p(C.xh),j.xs=P.c2p(C.xs),A(j.xs)||(j.noXS=!0,j.xs=P.c2p(C.xs,!0))),j);if(!v||p.vis){var u,S=m.select("path.yerror");if(x.visible&&A(w.x)&&A(w.yh)&&A(w.ys)){var _=x.width;u="M"+(w.x-_)+","+w.yh+"h"+2*_+"m-"+_+",0V"+w.ys,w.noYS||(u+="m-"+_+",0h"+2*_),S.size()?n&&(S=S.transition().duration(t.duration).ease(t.easing)):S=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",u)}else S.remove();var E=m.select("path.xerror");if(f.visible&&A(w.y)&&A(w.xh)&&A(w.xs)){var L=(f.copy_ystyle?x:f).width;u="M"+w.xh+","+(w.y-L)+"v"+2*L+"m0,-"+L+"H"+w.xs,w.noXS||(u+="m0,-"+L+"v"+2*L),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",u)}else E.remove()}})}})}},62662:function(Q,z,e){"use strict";var k=e(39898),A=e(7901);Q.exports=function(l){l.each(function(T){var b=T[0].trace,d=b.error_y||{},s=b.error_x||{},t=k.select(this);t.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(A.stroke,d.color),s.copy_ystyle&&(s=d),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(A.stroke,s.color)})}},77914:function(Q,z,e){"use strict";var k=e(41940),A=e(528).hoverlabel,l=e(1426).extendFlat;Q.exports={hoverlabel:{bgcolor:l({},A.bgcolor,{arrayOk:!0}),bordercolor:l({},A.bordercolor,{arrayOk:!0}),font:k({arrayOk:!0,editType:"none"}),align:l({},A.align,{arrayOk:!0}),namelength:l({},A.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(Q,z,e){"use strict";var k=e(71828),A=e(73972);function l(T,b,d,s){s=s||k.identity,Array.isArray(T)&&(b[0][d]=s(T))}Q.exports=function(T){var b=T.calcdata,d=T._fullLayout;function s(a){return function(i){return k.coerceHoverinfo({hoverinfo:i},{_module:a._module},d)}}for(var t=0;t<b.length;t++){var o=b[t],r=o[0].trace;if(!A.traceIs(r,"pie-like")){var n=A.traceIs(r,"2dMap")?l:k.fillArray;n(r.hoverinfo,o,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,o,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,o,"hbg"),n(r.hoverlabel.bordercolor,o,"hbc"),n(r.hoverlabel.font.size,o,"hts"),n(r.hoverlabel.font.color,o,"htc"),n(r.hoverlabel.font.family,o,"htf"),n(r.hoverlabel.namelength,o,"hnl"),n(r.hoverlabel.align,o,"hta"))}}}},75914:function(Q,z,e){"use strict";var k=e(73972),A=e(88335).hover;Q.exports=function(l,T,b){var d=k.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}void 0!==b&&A(l,T,b,!0),l._hoverdata&&T&&T.target&&(d&&d.then?d.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function(Q){"use strict";Q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(Q,z,e){"use strict";var k=e(71828),A=e(77914),l=e(38048);Q.exports=function(T,b,d,s){var t=k.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),l(T,b,function(o,r){return k.coerce(T,b,A,o,r)},t)}},23469:function(Q,z,e){"use strict";var k=e(71828);z.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},z.isTraceInSubplots=function(s,t){if("splom"===s.type){for(var o=s.xaxes||[],r=s.yaxes||[],n=0;n<o.length;n++)for(var a=0;a<r.length;a++)if(-1!==t.indexOf(o[n]+r[a]))return!0;return!1}return-1!==t.indexOf(z.getSubplot(s))},z.flat=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=t;return o},z.p2c=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=s[r].p2c(t);return o},z.getDistanceFunction=function(s,t,o,r){return"closest"===s?r||z.quadrature(t,o):"x"===s.charAt(0)?t:o},z.getClosest=function(s,t,o){if(!1!==o.index)o.index>=0&&o.index<s.length?o.distance=0:o.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=o.distance&&(o.index=r,o.distance=n)}return o},z.inbox=function(s,t,o){return s*t<0||0===s?o:1/0},z.quadrature=function(s,t){return function(o){var r=s(o),n=t(o);return Math.sqrt(r*r+n*n)}},z.makeEventData=function(s,t,o){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];1===a.length?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,o,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),void 0!==s.zLabelVal&&(n.z=s.zLabelVal)),z.appendArrayPointValue(n,t,r),n},z.appendArrayPointValue=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(void 0===s[i]){var c=T(k.nestedProperty(t,a).get(),o);void 0!==c&&(s[i]=c)}}},z.appendArrayMultiPointValues=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(void 0===s[i]){for(var c=k.nestedProperty(t,a).get(),h=new Array(o.length),f=0;f<o.length;f++)h[f]=T(c,o[f]);s[i]=h}}};var A={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return A[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},d={"x unified":!0,"y unified":!0};z.isUnifiedHover=function(s){return"string"==typeof s&&!!d[s]},z.isXYhover=function(s){return"string"==typeof s&&!!b[s]}},88335:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(84267),T=e(71828),b=T.strTranslate,d=T.strRotate,s=e(11086),t=e(63893),o=e(39918),r=e(91424),n=e(7901),a=e(28569),i=e(89298),c=e(73972),h=e(23469),f=e(26675),x=e(99017),v=e(43969),g=f.YANGLE,y=Math.PI*g/180,p=1/Math.sin(y),m=Math.cos(y),w=Math.sin(y),u=f.HOVERARROWSIZE,S=f.HOVERTEXTPAD,_={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}z.hover=function(V,W,X,K){V=T.getGraphDiv(V);var ne=W.target;T.throttle(V._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){!function(re,ae,le,pe,xe){le||(le="xy");var ye=Array.isArray(le)?le:[le],se=re._fullLayout,fe=se._plots||[],Ee=fe[le],de=se._has("cartesian");if(Ee){var we=Ee.overlays.map(function(Gn){return Gn.id});ye=ye.concat(we)}for(var ke=ye.length,Te=new Array(ke),$=new Array(ke),oe=!1,he=0;he<ke;he++){var me=ye[he];if(fe[me])oe=!0,Te[he]=fe[me].xaxis,$[he]=fe[me].yaxis;else{if(!se[me]||!se[me]._subplot)return void T.warn("Unrecognized subplot: "+me);var Me=se[me]._subplot;Te[he]=Me.xaxis,$[he]=Me.yaxis}}var Ie=ae.hovermode||se.hovermode;if(Ie&&!oe&&(Ie="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Ie)||!re.calcdata||re.querySelector(".zoombox")||re._dragging)return a.unhoverRaw(re,ae);var Pe=se.hoverdistance;-1===Pe&&(Pe=1/0);var ze=se.spikedistance;-1===ze&&(ze=1/0);var ce,ge,_e,De,He,Ve,nt,tt,at,dt,wt,bt,_t,Lt=[],Ct=[],Ot={hLinePoint:null,vLinePoint:null},Ht=!1;if(Array.isArray(ae))for(Ie="array",_e=0;_e<ae.length;_e++)(He=re.calcdata[ae[_e].curveNumber||0])&&(Ve=He[0].trace,"skip"!==He[0].trace.hoverinfo&&(Ct.push(He),"h"===Ve.orientation&&(Ht=!0)));else{for(De=0;De<re.calcdata.length;De++)"skip"!==(Ve=(He=re.calcdata[De])[0].trace).hoverinfo&&h.isTraceInSubplots(Ve,ye)&&(Ct.push(He),"h"===Ve.orientation&&(Ht=!0));var It,Ge;if(xe){if(!1===s.triggerHandler(re,"plotly_beforehover",ae))return;var Ze=xe.getBoundingClientRect();It=ae.clientX-Ze.left,Ge=ae.clientY-Ze.top,se._calcInverseTransform(re);var Be=T.apply3DTransform(se._invTransform)(It,Ge);if(Ge=Be[1],(It=Be[0])<0||It>Te[0]._length||Ge<0||Ge>$[0]._length)return a.unhoverRaw(re,ae)}else It="xpx"in ae?ae.xpx:Te[0]._length/2,Ge="ypx"in ae?ae.ypx:$[0]._length/2;if(ae.pointerX=It+Te[0]._offset,ae.pointerY=Ge+$[0]._offset,ce="xval"in ae?h.flat(ye,ae.xval):h.p2c(Te,It),ge="yval"in ae?h.flat(ye,ae.yval):h.p2c($,Ge),!A(ce[0])||!A(ge[0]))return T.warn("Fx.hover failed",ae,re),a.unhoverRaw(re,ae)}var Ye=1/0;function rt(Gn,ir){for(De=0;De<Ct.length;De++)if((He=Ct[De])&&He[0]&&He[0].trace&&!0===(Ve=He[0].trace).visible&&0!==Ve._length&&-1===["carpet","contourcarpet"].indexOf(Ve._module.name)){if("splom"===Ve.type?nt=ye[tt=0]:(nt=h.getSubplot(Ve),tt=ye.indexOf(nt)),h.isUnifiedHover(at=Ie)&&(at=at.charAt(0)),bt={cd:He,trace:Ve,xa:Te[tt],ya:$[tt],maxHoverDistance:Pe,maxSpikeDistance:ze,index:!1,distance:Math.min(Ye,Pe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:Ve.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},se[nt]&&(bt.subplot=se[nt]._subplot),se._splomScenes&&se._splomScenes[Ve.uid]&&(bt.scene=se._splomScenes[Ve.uid]),_t=Lt.length,"array"===at){var Jt=ae[De];"pointNumber"in Jt?(bt.index=Jt.pointNumber,at="closest"):(at="","xval"in Jt&&(dt=Jt.xval,at="x"),"yval"in Jt&&(wt=Jt.yval,at=at?"closest":"y"))}else void 0!==Gn&&void 0!==ir?(dt=Gn,wt=ir):(dt=ce[tt],wt=ge[tt]);if(0!==Pe)if(Ve._module&&Ve._module.hoverPoints){var rn=Ve._module.hoverPoints(bt,dt,wt,at,{finiteRange:!0,hoverLayer:se._hoverlayer});if(rn)for(var Sn,Tn=0;Tn<rn.length;Tn++)A((Sn=rn[Tn]).x0)&&A(Sn.y0)&&Lt.push(R(Sn,Ie))}else T.log("Unrecognized trace type in hover:",Ve);if("closest"===Ie&&Lt.length>_t&&(Lt.splice(0,_t),Ye=Lt[0].distance),de&&0!==ze&&0===Lt.length){bt.distance=ze,bt.index=!1;var Ln=Ve._module.hoverPoints(bt,dt,wt,"closest",{hoverLayer:se._hoverlayer});if(Ln&&(Ln=Ln.filter(function(An){return An.spikeDistance<=ze})),Ln&&Ln.length){var Bn,Hn=Ln.filter(function(An){return An.xa.showspikes&&"hovered data"!==An.xa.spikesnap});if(Hn.length){var or=Hn[0];A(or.x0)&&A(or.y0)&&(Bn=Re(or),(!Ot.vLinePoint||Ot.vLinePoint.spikeDistance>Bn.spikeDistance)&&(Ot.vLinePoint=Bn))}var mr=Ln.filter(function(An){return An.ya.showspikes&&"hovered data"!==An.ya.spikesnap});if(mr.length){var Kt=mr[0];A(Kt.x0)&&A(Kt.y0)&&(Bn=Re(Kt),(!Ot.hLinePoint||Ot.hLinePoint.spikeDistance>Bn.spikeDistance)&&(Ot.hLinePoint=Bn))}}}}}function Se(Gn,ir,Jt){for(var rn,Sn=null,Tn=1/0,Ln=0;Ln<Gn.length;Ln++)rn=Gn[Ln].spikeDistance,Jt&&0===Ln&&(rn=-1/0),rn<=Tn&&rn<=ir&&(Sn=Gn[Ln],Tn=rn);return Sn}function Re(Gn){return Gn?{xa:Gn.xa,ya:Gn.ya,x:void 0!==Gn.xSpike?Gn.xSpike:(Gn.x0+Gn.x1)/2,y:void 0!==Gn.ySpike?Gn.ySpike:(Gn.y0+Gn.y1)/2,distance:Gn.distance,spikeDistance:Gn.spikeDistance,curveNumber:Gn.trace.index,color:Gn.color,pointNumber:Gn.index}:null}rt();var Ke={fullLayout:se,container:se._hoverlayer,event:ae},st=re._spikepoints;re._spikepoints={vLinePoint:Ot.vLinePoint,hLinePoint:Ot.hLinePoint};var Tt=function(){Lt.sort(function(Gn,ir){return Gn.distance-ir.distance}),Lt=function(Gn,ir){for(var Jt=ir.charAt(0),rn=[],Sn=[],Tn=[],Ln=0;Ln<Gn.length;Ln++){var Bn=Gn[Ln];c.traceIs(Bn.trace,"bar-like")||c.traceIs(Bn.trace,"box-violin")?Tn.push(Bn):Bn.trace[Jt+"period"]?Sn.push(Bn):rn.push(Bn)}return rn.concat(Sn).concat(Tn)}(Lt,Ie)};Tt();var Et=Ie.charAt(0),At=("x"===Et||"y"===Et)&&Lt[0]&&E[Lt[0].trace.type];if(de&&0!==ze&&0!==Lt.length){var ht=Se(Lt.filter(function(Gn){return Gn.ya.showspikes}),ze,At);Ot.hLinePoint=Re(ht);var pt=Se(Lt.filter(function(Gn){return Gn.xa.showspikes}),ze,At);Ot.vLinePoint=Re(pt)}if(0===Lt.length){var gt=a.unhoverRaw(re,ae);return!de||null===Ot.hLinePoint&&null===Ot.vLinePoint||F(st)&&H(re,Ot,Ke),gt}if(de&&F(st)&&H(re,Ot,Ke),h.isXYhover(at)&&0!==Lt[0].length&&"splom"!==Lt[0].trace.type){var Pt=Lt[0],zt=(Lt=_[Pt.trace.type]?Lt.filter(function(Gn){return Gn.trace.index===Pt.trace.index}):[Pt]).length;rt(B("x",Pt,se),B("y",Pt,se));var Ut,Nt=[],jt={},Gt=0,un=function(Gn){var ir=_[Gn.trace.type]?L(Gn):Gn.trace.index;if(jt[ir]){var Jt=jt[ir]-1,rn=Nt[Jt];Jt>0&&Math.abs(Gn.distance)<Math.abs(rn.distance)&&(Nt[Jt]=Gn)}else Gt++,jt[ir]=Gt,Nt.push(Gn)};for(Ut=0;Ut<zt;Ut++)un(Lt[Ut]);for(Ut=Lt.length-1;Ut>zt-1;Ut--)un(Lt[Ut]);Lt=Nt,Tt()}var hn=re._hoverdata,Qt=[],_n=N(re),Fn=J(re);for(_e=0;_e<Lt.length;_e++){var yn=Lt[_e],on=h.makeEventData(yn,yn.trace,yn.cd);if(!1!==yn.hovertemplate){var pn=!1;yn.cd[yn.index]&&yn.cd[yn.index].ht&&(pn=yn.cd[yn.index].ht),yn.hovertemplate=pn||yn.trace.hovertemplate||!1}if(yn.xa&&yn.ya){var ln=yn.x0+yn.xa._offset,dn=yn.x1+yn.xa._offset,Cn=yn.y0+yn.ya._offset,kn=yn.y1+yn.ya._offset,Rn=Math.min(ln,dn),Nn=Math.max(ln,dn),jn=Math.min(Cn,kn),er=Math.max(Cn,kn);on.bbox={x0:Rn+Fn,x1:Nn+Fn,y0:jn+_n,y1:er+_n}}yn.eventData=[on],Qt.push(on)}re._hoverdata=Qt;var Kn="y"===Ie&&(Ct.length>1||Lt.length>1)||"closest"===Ie&&Ht&&Lt.length>1,yr=n.combine(se.plot_bgcolor||n.background,se.paper_bgcolor),lr=P(Lt,{gd:re,hovermode:Ie,rotateLabels:Kn,bgColor:yr,container:se._hoverlayer,outerContainer:se._paper.node(),commonLabelOpts:se.hoverlabel,hoverdistance:se.hoverdistance});if(h.isUnifiedHover(Ie)||(function(Gn,ir,Jt){var rn,Sn,Tn,Ln,Bn,Hn,or,mr=0,Kt=1,An=Gn.size(),Rt=new Array(An),Zt=0;function tn(mn){var Pn=mn[0],qn=mn[mn.length-1];if(Tn=qn.pos+qn.dp+qn.size-Pn.pmax,(Sn=Pn.pmin-Pn.pos-Pn.dp+Pn.size)>.01){for(Bn=mn.length-1;Bn>=0;Bn--)mn[Bn].dp+=Sn;rn=!1}if(!(Tn<.01)){if(Sn<-.01){for(Bn=mn.length-1;Bn>=0;Bn--)mn[Bn].dp-=Tn;rn=!1}if(rn){var Zn=0;for(Ln=0;Ln<mn.length;Ln++)(Hn=mn[Ln]).pos+Hn.dp+Hn.size>Pn.pmax&&Zn++;for(Ln=mn.length-1;Ln>=0&&!(Zn<=0);Ln--)(Hn=mn[Ln]).pos>Pn.pmax-1&&(Hn.del=!0,Zn--);for(Ln=0;Ln<mn.length&&!(Zn<=0);Ln++)if((Hn=mn[Ln]).pos<Pn.pmin+1)for(Hn.del=!0,Zn--,Tn=2*Hn.size,Bn=mn.length-1;Bn>=0;Bn--)mn[Bn].dp-=Tn;for(Ln=mn.length-1;Ln>=0&&!(Zn<=0);Ln--)(Hn=mn[Ln]).pos+Hn.dp+Hn.size>Pn.pmax&&(Hn.del=!0,Zn--)}}}for(Gn.each(function(mn){var Pn=mn[ir],qn="x"===Pn._id.charAt(0),Zn=Pn.range;0===Zt&&Zn&&Zn[0]>Zn[1]!==qn&&(Kt=-1),Rt[Zt++]=[{datum:mn,traceIndex:mn.trace.index,dp:0,pos:mn.pos,posref:mn.posref,size:mn.by*(qn?p:1)/2,pmin:0,pmax:qn?Jt.width:Jt.height}]}),Rt.sort(function(mn,Pn){return mn[0].posref-Pn[0].posref||Kt*(Pn[0].traceIndex-mn[0].traceIndex)});!rn&&mr<=An;){for(mr++,rn=!0,Ln=0;Ln<Rt.length-1;){var En=Rt[Ln],Mn=Rt[Ln+1],wn=En[En.length-1],an=Mn[0];if((Sn=wn.pos+wn.dp+wn.size-an.pos-an.dp+an.size)>.01&&wn.pmin===an.pmin&&wn.pmax===an.pmax){for(Bn=Mn.length-1;Bn>=0;Bn--)Mn[Bn].dp+=Sn;for(En.push.apply(En,Mn),Rt.splice(Ln+1,1),or=0,Bn=En.length-1;Bn>=0;Bn--)or+=En[Bn].dp;for(Tn=or/En.length,Bn=En.length-1;Bn>=0;Bn--)En[Bn].dp-=Tn;rn=!1}else Ln++}Rt.forEach(tn)}for(Ln=Rt.length-1;Ln>=0;Ln--){var vn=Rt[Ln];for(Bn=vn.length-1;Bn>=0;Bn--){var sn=vn[Bn],fn=sn.datum;fn.offset=sn.dp,fn.del=sn.del}}}(lr,Kn?"xa":"ya",se),j(lr,Kn,se._invScaleX,se._invScaleY)),xe&&xe.tagName){var $n=c.getComponentMethod("annotations","hasClickToShow")(re,Qt);o(k.select(xe),$n?"pointer":"")}xe&&!pe&&function(Gn,ir,Jt){if(!Jt||Jt.length!==Gn._hoverdata.length)return!0;for(var rn=Jt.length-1;rn>=0;rn--){var Sn=Jt[rn],Tn=Gn._hoverdata[rn];if(Sn.curveNumber!==Tn.curveNumber||String(Sn.pointNumber)!==String(Tn.pointNumber)||String(Sn.pointNumbers)!==String(Tn.pointNumbers))return!0}return!1}(re,0,hn)&&(hn&&re.emit("plotly_unhover",{event:ae,points:hn}),re.emit("plotly_hover",{event:ae,points:re._hoverdata,xaxes:Te,yaxes:$,xvals:ce,yvals:ge}))}(V,W,X,K,ne)})},z.loneHover=function(V,W){var X=!0;Array.isArray(V)||(X=!1,V=[V]);var K=W.gd,ne=N(K),re=J(K),ae=P(V.map(function(xe){var ye=xe._x0||xe.x0||xe.x||0,se=xe._x1||xe.x1||xe.x||0,fe=xe._y0||xe.y0||xe.y||0,Ee=xe._y1||xe.y1||xe.y||0,de=xe.eventData;if(de){var we=Math.min(ye,se),ke=Math.max(ye,se),Te=Math.min(fe,Ee),$=Math.max(fe,Ee),oe=xe.trace;if(c.traceIs(oe,"gl3d")){var he=K._fullLayout[oe.scene]._scene.container,me=he.offsetLeft,Me=he.offsetTop;we+=me,ke+=me,Te+=Me,$+=Me}de.bbox={x0:we+re,x1:ke+re,y0:Te+ne,y1:$+ne},W.inOut_bbox&&W.inOut_bbox.push(de.bbox)}else de=!1;return{color:xe.color||n.defaultLine,x0:xe.x0||xe.x||0,x1:xe.x1||xe.x||0,y0:xe.y0||xe.y||0,y1:xe.y1||xe.y||0,xLabel:xe.xLabel,yLabel:xe.yLabel,zLabel:xe.zLabel,text:xe.text,name:xe.name,idealAlign:xe.idealAlign,borderColor:xe.borderColor,fontFamily:xe.fontFamily,fontSize:xe.fontSize,fontColor:xe.fontColor,nameLength:xe.nameLength,textAlign:xe.textAlign,trace:xe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:xe.hovertemplate||!1,hovertemplateLabels:xe.hovertemplateLabels||!1,eventData:de}}),{gd:K,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||n.background,container:k.select(W.container),outerContainer:W.outerContainer||W.container}),le=0,pe=0;return ae.sort(function(xe,ye){return xe.y0-ye.y0}).each(function(xe,ye){var se=xe.y0-xe.by/2;xe.offset=se-5<le?le-se+5:0,le=se+xe.by+xe.offset,ye===W.anchorIndex&&(pe=xe.offset)}).each(function(xe){xe.offset-=pe}),j(ae,!1,K._fullLayout._invScaleX,K._fullLayout._invScaleY),X?ae:ae.node()};var C=/<extra>([\s\S]*)<\/extra>/;function P(V,W){var X=W.gd,K=X._fullLayout,ne=W.hovermode,re=W.rotateLabels,ae=W.bgColor,le=W.container,pe=W.outerContainer,xe=W.commonLabelOpts||{};if(0===V.length)return[[]];var ye=W.fontFamily||f.HOVERFONT,se=W.fontSize||f.HOVERFONTSIZE,fe=V[0],Ee=fe.xa,de=fe.ya,we=ne.charAt(0),ke=we+"Label",Te=fe[ke];if(void 0===Te&&"multicategory"===Ee.type)for(var $=0;$<V.length&&void 0===(Te=V[$][ke]);$++);var oe=Z(X,pe),he=oe.top,me=oe.width,Me=oe.height,Ie=void 0!==Te&&fe.distance<=W.hoverdistance&&("x"===ne||"y"===ne);if(Ie){var Pe,ze,ce=!0;for(Pe=0;Pe<V.length;Pe++)if(ce&&void 0===V[Pe].zLabel&&(ce=!1),ze=V[Pe].hoverinfo||V[Pe].trace.hoverinfo){var ge=Array.isArray(ze)?ze:ze.split("+");if(-1===ge.indexOf("all")&&-1===ge.indexOf(ne)){Ie=!1;break}}ce&&(Ie=!1)}var _e=le.selectAll("g.axistext").data(Ie?[0]:[]);if(_e.enter().append("g").classed("axistext",!0),_e.exit().remove(),_e.each(function(){var pt=k.select(this),gt=T.ensureSingle(pt,"path","",function(Nn){Nn.style({"stroke-width":"1px"})}),Pt=T.ensureSingle(pt,"text","",function(Nn){Nn.attr("data-notex",1)}),zt=xe.bgcolor||n.defaultLine,Ut=xe.bordercolor||n.contrast(zt),Nt=n.contrast(zt),jt={family:xe.font.family||ye,size:xe.font.size||se,color:xe.font.color||Nt};gt.style({fill:zt,stroke:Ut}),Pt.text(Te).call(r.font,jt).call(t.positionText,0,0).call(t.convertToTspans,X),pt.attr("transform","");var Gt,un,hn=Z(X,Pt.node());if("x"===ne){var Qt="top"===Ee.side?"-":"";Pt.attr("text-anchor","middle").call(t.positionText,0,"top"===Ee.side?he-hn.bottom-u-S:he-hn.top+u+S),un=de._offset+("top"===Ee.side?0:de._length);var _n=hn.width/2+S;(Gt=Ee._offset+(fe.x0+fe.x1)/2)<_n?(Gt=_n,gt.attr("d","M-"+(_n-u)+",0L-"+(_n-2*u)+","+Qt+u+"H"+(S+hn.width/2)+"v"+Qt+(2*S+hn.height)+"H-"+_n+"V"+Qt+u+"Z")):Gt>K.width-_n?(Gt=K.width-_n,gt.attr("d","M"+(_n-u)+",0L"+_n+","+Qt+u+"v"+Qt+(2*S+hn.height)+"H-"+_n+"V"+Qt+u+"H"+(_n-2*u)+"Z")):gt.attr("d","M0,0L"+u+","+Qt+u+"H"+(S+hn.width/2)+"v"+Qt+(2*S+hn.height)+"H-"+(S+hn.width/2)+"V"+Qt+u+"H-"+u+"Z")}else{var Fn,yn,on;"right"===de.side?(Fn="start",yn=1,on="",Gt=Ee._offset+Ee._length):(Fn="end",yn=-1,on="-",Gt=Ee._offset),un=de._offset+(fe.y0+fe.y1)/2,Pt.attr("text-anchor",Fn),gt.attr("d","M0,0L"+on+u+","+u+"V"+(S+hn.height/2)+"h"+on+(2*S+hn.width)+"V-"+(S+hn.height/2)+"H"+on+u+"V-"+u+"Z");var pn,ln=hn.height/2,dn=he-hn.top-ln,Cn="clip"+K._uid+"commonlabel"+de._id;if(Gt<hn.width+2*S+u){pn="M-"+(u+S)+"-"+ln+"h-"+(hn.width-S)+"V"+ln+"h"+(hn.width-S)+"Z";var kn=hn.width-Gt+S;t.positionText(Pt,kn,dn),"end"===Fn&&Pt.selectAll("tspan").each(function(){var Nn=k.select(this),jn=r.tester.append("text").text(Nn.text()).call(r.font,jt),er=Z(X,jn.node());Math.round(er.width)<Math.round(hn.width)&&Nn.attr("x",kn-er.width),jn.remove()})}else t.positionText(Pt,yn*(S+u),dn),pn=null;var Rn=K._topclips.selectAll("#"+Cn).data(pn?[0]:[]);Rn.enter().append("clipPath").attr("id",Cn).append("path"),Rn.exit().remove(),Rn.select("path").attr("d",pn),r.setClipUrl(Pt,pn?Cn:null,X)}pt.attr("transform",b(Gt,un))}),h.isUnifiedHover(ne)){le.selectAll("g.hovertext").remove();var De=V.filter(function(pt){return"none"!==pt.hoverinfo});if(0===De.length)return;var He=K.hoverlabel,Ve=He.font,tt={font:Ve};x({showlegend:!0,legend:{title:{text:Te,font:Ve},font:Ve,bgcolor:He.bgcolor,bordercolor:He.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:K.legend?K.legend.traceorder:void 0,orientation:"v"}},tt,X._fullData);var at=tt.legend;at.entries=[];for(var dt=0;dt<De.length;dt++){var wt=De[dt];if("none"!==wt.hoverinfo){var bt=I(wt,!0,ne,K,Te),_t=bt[0],Lt=bt[1];wt.name=Lt,wt.text=""!==Lt?Lt+" : "+_t:_t;var Ct=wt.cd[wt.index];Ct&&(Ct.mc&&(wt.mc=Ct.mc),Ct.mcc&&(wt.mc=Ct.mcc),Ct.mlc&&(wt.mlc=Ct.mlc),Ct.mlcc&&(wt.mlc=Ct.mlcc),Ct.mlw&&(wt.mlw=Ct.mlw),Ct.mrc&&(wt.mrc=Ct.mrc),Ct.dir&&(wt.dir=Ct.dir)),wt._distinct=!0,at.entries.push([wt])}}at.entries.sort(function(pt,gt){return pt[0].trace.index-gt[0].trace.index}),at.layer=le,at._inHover=!0,at._groupTitleFont=He.grouptitlefont,v(X,at);var Ot,Ht,It,Ge,Ze=le.select("g.legend"),Be=Z(X,Ze.node()),Ye=Be.width+2*S,rt=Be.height+2*S,Se=De[0],Re=(Se.x0+Se.x1)/2,Ke=(Se.y0+Se.y1)/2,st=!(c.traceIs(Se.trace,"bar-like")||c.traceIs(Se.trace,"box-violin"));"y"===we?st?(Ht=Ke-S,Ot=Ke+S):(Ht=Math.min.apply(null,De.map(function(pt){return Math.min(pt.y0,pt.y1)})),Ot=Math.max.apply(null,De.map(function(pt){return Math.max(pt.y0,pt.y1)}))):Ht=Ot=T.mean(De.map(function(pt){return(pt.y0+pt.y1)/2}))-rt/2,"x"===we?st?(It=Re+S,Ge=Re-S):(It=Math.max.apply(null,De.map(function(pt){return Math.max(pt.x0,pt.x1)})),Ge=Math.min.apply(null,De.map(function(pt){return Math.min(pt.x0,pt.x1)}))):It=Ge=T.mean(De.map(function(pt){return(pt.x0+pt.x1)/2}))-Ye/2;var ct,Tt,Et=Ee._offset,At=de._offset;return Ge+=Et-Ye,Ht+=At-rt,ct=(It+=Et)+Ye<me&&It>=0?It:Ge+Ye<me&&Ge>=0?Ge:Et+Ye<me?Et:It-Re<Re-Ge+Ye?me-Ye:0,Tt=(Ot+=At)+rt<Me&&Ot>=0?Ot:Ht+rt<Me&&Ht>=0?Ht:At+rt<Me?At:Ot-Ke<Ke-Ht+rt?Me-rt:0,Ze.attr("transform",b((ct+=S)-1,(Tt+=S)-1)),Ze}var ht=le.selectAll("g.hovertext").data(V,function(pt){return L(pt)});return ht.enter().append("g").classed("hovertext",!0).each(function(){var pt=k.select(this);pt.append("rect").call(n.fill,n.addOpacity(ae,.8)),pt.append("text").classed("name",!0),pt.append("path").style("stroke-width","1px"),pt.append("text").classed("nums",!0).call(r.font,ye,se)}),ht.exit().remove(),ht.each(function(pt){var gt=k.select(this).attr("transform",""),Pt=pt.color;Array.isArray(Pt)&&(Pt=Pt[pt.eventData[0].pointNumber]);var zt=pt.bgcolor||Pt,Ut=n.combine(n.opacity(zt)?zt:n.defaultLine,ae),Nt=n.combine(n.opacity(Pt)?Pt:n.defaultLine,ae),jt=pt.borderColor||n.contrast(Ut),Gt=I(pt,Ie,ne,K,Te,gt),un=Gt[0],hn=Gt[1],Qt=gt.select("text.nums").call(r.font,pt.fontFamily||ye,pt.fontSize||se,pt.fontColor||jt).text(un).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,X),_n=gt.select("text.name"),Fn=0,yn=0;if(hn&&hn!==un){_n.call(r.font,pt.fontFamily||ye,pt.fontSize||se,Nt).text(hn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,X);var on=Z(X,_n.node());Fn=on.width+2*S,yn=on.height+2*S}else _n.remove(),gt.select("rect").remove();gt.select("path").style({fill:Ut,stroke:jt});var pn=pt.xa._offset+(pt.x0+pt.x1)/2,ln=pt.ya._offset+(pt.y0+pt.y1)/2,dn=Math.abs(pt.x1-pt.x0),Cn=Math.abs(pt.y1-pt.y0),kn=Z(X,Qt.node()),Rn=kn.width/K._invScaleX,Nn=kn.height/K._invScaleY;pt.ty0=(he-kn.top)/K._invScaleY,pt.bx=Rn+2*S,pt.by=Math.max(Nn+2*S,yn),pt.anchor="start",pt.txwidth=Rn,pt.tx2width=Fn,pt.offset=0;var jn,er,Kn=(Rn+u+S+Fn)*K._invScaleX;if(re)pt.pos=pn,jn=ln+Cn/2+Kn<=Me,er=ln-Cn/2-Kn>=0,"top"!==pt.idealAlign&&jn||!er?jn?(ln+=Cn/2,pt.anchor="start"):pt.anchor="middle":(ln-=Cn/2,pt.anchor="end");else if(pt.pos=ln,jn=pn+dn/2+Kn<=me,er=pn-dn/2-Kn>=0,"left"!==pt.idealAlign&&jn||!er)if(jn)pn+=dn/2,pt.anchor="start";else{pt.anchor="middle";var yr=Kn/2,lr=pn+yr-me,$n=pn-yr;lr>0&&(pn-=lr),$n<0&&(pn+=-$n)}else pn-=dn/2,pt.anchor="end";Qt.attr("text-anchor",pt.anchor),Fn&&_n.attr("text-anchor",pt.anchor),gt.attr("transform",b(pn,ln)+(re?d(g):""))}),ht}function I(V,W,X,K,ne,re){var ae="",le="";void 0!==V.nameOverride&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=T.templateString(V.name,V.trace._meta)),ae=U(V.name,V.nameLength));var pe=X.charAt(0);void 0!==V.zLabel?(void 0!==V.xLabel&&(le+="x: "+V.xLabel+"<br>"),void 0!==V.yLabel&&(le+="y: "+V.yLabel+"<br>"),"choropleth"!==V.trace.type&&"choroplethmapbox"!==V.trace.type&&(le+=(le?"z: ":"")+V.zLabel)):W&&V[pe+"Label"]===ne?le=V[("x"===pe?"y":"x")+"Label"]||"":void 0===V.xLabel?void 0!==V.yLabel&&"scattercarpet"!==V.trace.type&&(le=V.yLabel):le=void 0===V.yLabel?V.xLabel:"("+V.xLabel+", "+V.yLabel+")",!V.text&&0!==V.text||Array.isArray(V.text)||(le+=(le?"<br>":"")+V.text),void 0!==V.extraText&&(le+=(le?"<br>":"")+V.extraText),re&&""===le&&!V.hovertemplate&&(""===ae&&re.remove(),le=ae);var ye=V.hovertemplate||!1;if(ye){var se=V.hovertemplateLabels||V;V[pe+"Label"]!==ne&&(se[pe+"other"]=se[pe+"Val"],se[pe+"otherLabel"]=se[pe+"Label"]),le=(le=T.hovertemplateString(ye,se,K._d3locale,V.eventData[0]||{},V.trace._meta)).replace(C,function(fe,Ee){return ae=U(Ee,V.nameLength),""})}return[le,ae]}function j(V,W,X,K){var ne=function(ae){return ae*X},re=function(ae){return ae*K};V.each(function(ae){var le=k.select(this);if(ae.del)return le.remove();var pe=le.select("text.nums"),xe=ae.anchor,ye="end"===xe?-1:1,se={start:1,end:-1,middle:0}[xe],fe=se*(u+S),Ee=fe+se*(ae.txwidth+S),de=0,we=ae.offset,ke="middle"===xe;ke&&(fe-=ae.tx2width/2,Ee+=ae.txwidth/2+S),W&&(we*=-w,de=ae.offset*m),le.select("path").attr("d",ke?"M-"+ne(ae.bx/2+ae.tx2width/2)+","+re(we-ae.by/2)+"h"+ne(ae.bx)+"v"+re(ae.by)+"h-"+ne(ae.bx)+"Z":"M0,0L"+ne(ye*u+de)+","+re(u+we)+"v"+re(ae.by/2-u)+"h"+ne(ye*ae.bx)+"v-"+re(ae.by)+"H"+ne(ye*u+de)+"V"+re(we-u)+"Z");var Te=de+fe,$=we+ae.ty0-ae.by/2+S,oe=ae.textAlign||"auto";"auto"!==oe&&("left"===oe&&"start"!==xe?(pe.attr("text-anchor","start"),Te=ke?-ae.bx/2-ae.tx2width/2+S:-ae.bx-S):"right"===oe&&"end"!==xe&&(pe.attr("text-anchor","end"),Te=ke?ae.bx/2-ae.tx2width/2-S:ae.bx+S)),pe.call(t.positionText,ne(Te),re($)),ae.tx2width&&(le.select("text.name").call(t.positionText,ne(Ee+se*S+de),re(we+ae.ty0-ae.by/2+S)),le.select("rect").call(r.setRect,ne(Ee+(se-1)*ae.tx2width/2+de),re(we-ae.by/2-1),ne(ae.tx2width),re(ae.by+2)))})}function R(V,W){var X=V.index,K=V.trace||{},ne=V.cd[0],re=V.cd[X]||{};function ae(fe){return fe||A(fe)&&0===fe}var le=Array.isArray(X)?function(fe,Ee){var de=T.castOption(ne,X,fe);return ae(de)?de:T.extractOption({},K,"",Ee)}:function(fe,Ee){return T.extractOption(re,K,fe,Ee)};function pe(fe,Ee,de){var we=le(Ee,de);ae(we)&&(V[fe]=we)}if(pe("hoverinfo","hi","hoverinfo"),pe("bgcolor","hbg","hoverlabel.bgcolor"),pe("borderColor","hbc","hoverlabel.bordercolor"),pe("fontFamily","htf","hoverlabel.font.family"),pe("fontSize","hts","hoverlabel.font.size"),pe("fontColor","htc","hoverlabel.font.color"),pe("nameLength","hnl","hoverlabel.namelength"),pe("textAlign","hta","hoverlabel.align"),V.posref="y"===W||"closest"===W&&"h"===K.orientation?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=T.constrain(V.x0,0,V.xa._length),V.x1=T.constrain(V.x1,0,V.xa._length),V.y0=T.constrain(V.y0,0,V.ya._length),V.y1=T.constrain(V.y1,0,V.ya._length),void 0!==V.xLabelVal&&(V.xLabel="xLabel"in V?V.xLabel:i.hoverLabelText(V.xa,V.xLabelVal,K.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),void 0!==V.yLabelVal&&(V.yLabel="yLabel"in V?V.yLabel:i.hoverLabelText(V.ya,V.yLabelVal,K.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),void 0!==V.zLabelVal&&void 0===V.zLabel&&(V.zLabel=String(V.zLabelVal)),!(isNaN(V.xerr)||"log"===V.xa.type&&V.xerr<=0)){var xe=i.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xLabel+=void 0!==V.xerrneg?" +"+xe+" / -"+i.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:" \xb1 "+xe,"x"===W&&(V.distance+=1)}if(!(isNaN(V.yerr)||"log"===V.ya.type&&V.yerr<=0)){var ye=i.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yLabel+=void 0!==V.yerrneg?" +"+ye+" / -"+i.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:" \xb1 "+ye,"y"===W&&(V.distance+=1)}var se=V.hoverinfo||V.trace.hoverinfo;return se&&"all"!==se&&(-1===(se=Array.isArray(se)?se:se.split("+")).indexOf("x")&&(V.xLabel=void 0),-1===se.indexOf("y")&&(V.yLabel=void 0),-1===se.indexOf("z")&&(V.zLabel=void 0),-1===se.indexOf("text")&&(V.text=void 0),-1===se.indexOf("name")&&(V.name=void 0)),V}function H(V,W,X){var K,ne,re=X.container,ae=X.fullLayout,le=ae._size,pe=X.event,xe=!!W.hLinePoint,ye=!!W.vLinePoint;if(re.selectAll(".spikeline").remove(),ye||xe){var se=n.combine(ae.plot_bgcolor,ae.paper_bgcolor);if(xe){var fe,Ee,de=W.hLinePoint;K=de&&de.xa,"cursor"===(ne=de&&de.ya).spikesnap?(fe=pe.pointerX,Ee=pe.pointerY):(fe=K._offset+de.x,Ee=ne._offset+de.y);var we,ke,Te=l.readability(de.color,se)<1.5?n.contrast(se):de.color,$=ne.spikemode,oe=ne.spikethickness,he=ne.spikecolor||Te,me=i.getPxPosition(V,ne);if(-1!==$.indexOf("toaxis")||-1!==$.indexOf("across")){if(-1!==$.indexOf("toaxis")&&(we=me,ke=fe),-1!==$.indexOf("across")){var Me=ne._counterDomainMin,Ie=ne._counterDomainMax;"free"===ne.anchor&&(Me=Math.min(Me,ne.position),Ie=Math.max(Ie,ne.position)),we=le.l+Me*le.w,ke=le.l+Ie*le.w}re.insert("line",":first-child").attr({x1:we,x2:ke,y1:Ee,y2:Ee,"stroke-width":oe,stroke:he,"stroke-dasharray":r.dashStyle(ne.spikedash,oe)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:we,x2:ke,y1:Ee,y2:Ee,"stroke-width":oe+2,stroke:se}).classed("spikeline",!0).classed("crisp",!0)}-1!==$.indexOf("marker")&&re.insert("circle",":first-child").attr({cx:me+("right"!==ne.side?oe:-oe),cy:Ee,r:oe,fill:he}).classed("spikeline",!0)}if(ye){var Pe,ze,ce=W.vLinePoint;ne=ce&&ce.ya,"cursor"===(K=ce&&ce.xa).spikesnap?(Pe=pe.pointerX,ze=pe.pointerY):(Pe=K._offset+ce.x,ze=ne._offset+ce.y);var ge,_e,De=l.readability(ce.color,se)<1.5?n.contrast(se):ce.color,He=K.spikemode,Ve=K.spikethickness,nt=K.spikecolor||De,tt=i.getPxPosition(V,K);if(-1!==He.indexOf("toaxis")||-1!==He.indexOf("across")){if(-1!==He.indexOf("toaxis")&&(ge=tt,_e=ze),-1!==He.indexOf("across")){var at=K._counterDomainMin,dt=K._counterDomainMax;"free"===K.anchor&&(at=Math.min(at,K.position),dt=Math.max(dt,K.position)),ge=le.t+(1-dt)*le.h,_e=le.t+(1-at)*le.h}re.insert("line",":first-child").attr({x1:Pe,x2:Pe,y1:ge,y2:_e,"stroke-width":Ve,stroke:nt,"stroke-dasharray":r.dashStyle(K.spikedash,Ve)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Pe,x2:Pe,y1:ge,y2:_e,"stroke-width":Ve+2,stroke:se}).classed("spikeline",!0).classed("crisp",!0)}-1!==He.indexOf("marker")&&re.insert("circle",":first-child").attr({cx:Pe,cy:tt-("top"!==K.side?Ve:-Ve),r:Ve,fill:nt}).classed("spikeline",!0)}}}function F(V,W){return!W||W.vLinePoint!==V._spikepoints.vLinePoint||W.hLinePoint!==V._spikepoints.hLinePoint}function U(V,W){return t.plainText(V||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function B(V,W,X){var K=W[V+"a"],ne=W[V+"Val"],re=W.cd[0];if("category"===K.type||"multicategory"===K.type)ne=K._categoriesMap[ne];else if("date"===K.type){var ae=W.trace[V+"periodalignment"];if(ae){var le=W.cd[W.index],pe=le[V+"Start"];void 0===pe&&(pe=le[V]);var xe=le[V+"End"];void 0===xe&&(xe=le[V]);var ye=xe-pe;"end"===ae?ne+=ye:"middle"===ae&&(ne+=ye/2)}ne=K.d2c(ne)}return re&&re.t&&re.t.posLetter===K._id&&("group"!==X.boxmode&&"group"!==X.violinmode||(ne+=re.t.dPos)),ne}function N(V){return V.offsetTop+V.clientTop}function J(V){return V.offsetLeft+V.clientLeft}function Z(V,W){var X=V._fullLayout,K=W.getBoundingClientRect(),ne=K.left,re=K.top,ae=ne+K.width,le=re+K.height,pe=T.apply3DTransform(X._invTransform)(ne,re),xe=T.apply3DTransform(X._invTransform)(ae,le),ye=pe[0],se=pe[1],fe=xe[0],Ee=xe[1];return{x:ye,y:se,width:fe-ye,height:Ee-se,top:Math.min(se,Ee),left:Math.min(ye,fe),right:Math.max(ye,fe),bottom:Math.max(se,Ee)}}},38048:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(23469).isUnifiedHover;Q.exports=function(T,b,d,s){s=s||{};var t=b.legend;function o(r){s.font[r]||(s.font[r]=t?b.legend.font[r]:b.font[r])}b&&l(b.hovermode)&&(s.font||(s.font={}),o("size"),o("family"),o("color"),t?(s.bgcolor||(s.bgcolor=A.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),d("hoverlabel.bgcolor",s.bgcolor),d("hoverlabel.bordercolor",s.bordercolor),d("hoverlabel.namelength",s.namelength),k.coerceFont(d,"hoverlabel.font",s.font),d("hoverlabel.align",s.align)}},98212:function(Q,z,e){"use strict";var k=e(71828),A=e(528);Q.exports=function(l,T){function b(d,s){return void 0!==T[d]?T[d]:k.coerce(l,T,A,d,s)}return b("clickmode"),b("hovermode")}},30211:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(28569),T=e(23469),b=e(528),d=e(88335);Q.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:b},attributes:e(77914),layoutAttributes:b,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,o){return A.castOption(s,t,"hoverlabel."+o)},castHoverinfo:function(s,t,o){return A.castOption(s,o,"hoverinfo",function(r){return A.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:d.hover,unhover:l.unhover,loneHover:d.loneHover,loneUnhover:function(s){var t=A.isD3Selection(s)?s:k.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function(Q,z,e){"use strict";var k=e(26675),A=e(41940),l=A({editType:"none"});l.family.dflt=k.HOVERFONT,l.size.dflt=k.HOVERFONTSIZE,Q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:A({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(Q,z,e){"use strict";var k=e(71828),A=e(528),l=e(98212),T=e(38048);Q.exports=function(b,d){function s(n,a){return k.coerce(b,d,A,n,a)}l(b,d)&&(s("hoverdistance"),s("spikedistance")),"select"===s("dragmode")&&s("selectdirection");var t=d._has("mapbox"),o=d._has("geo"),r=d._basePlotModules.length;"zoom"===d.dragmode&&((t||o)&&1===r||t&&o&&2===r)&&(d.dragmode="pan"),T(b,d,s),k.coerceFont(s,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},22774:function(Q,z,e){"use strict";var k=e(71828),A=e(38048),l=e(528);Q.exports=function(T,b){A(T,b,function(d,s){return k.coerce(T,b,l,d,s)})}},83312:function(Q,z,e){"use strict";var k=e(71828),A=e(30587).counter,l=e(27670).Y,T=e(85555).idRegex,b=e(44467),d={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[A("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var i=n[a+"axes"],c=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(i)?i:c.length?c:void 0}function t(r,n,a,i,c,h){var f=n(r+"gap",a),x=n("domain."+r);n(r+"side",i);for(var v=new Array(c),g=x[0],y=(x[1]-g)/(c-f),p=y*(1-f),m=0;m<c;m++){var w=g+y*m;v[h?c-1-m:m]=[w,w+p]}return v}function o(r,n,a,i,c){var h,f=new Array(a);function x(v,g){-1!==n.indexOf(g)&&void 0===i[g]?(f[v]=g,i[g]=v):f[v]=""}if(Array.isArray(r))for(h=0;h<a;h++)x(h,r[h]);else for(x(0,c),h=1;h<a;h++)x(h,c+(h+1));return f}Q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:d}},layoutAttributes:d,sizeDefaults:function(r,n){var a=r.grid||{},i=s(n,a,"x"),c=s(n,a,"y");if(r.grid||i||c){var h,f,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),v=Array.isArray(i),g=Array.isArray(c),y=v&&i!==a.xaxes&&g&&c!==a.yaxes;x?(h=a.subplots.length,f=a.subplots[0].length):(g&&(h=c.length),v&&(f=i.length));var p=b.newContainer(n,"grid"),m=C("rows",h),w=C("columns",f);if(m*w>1){x||v||g||"independent"===C("pattern")&&(x=!0),p._hasSubplotGrid=x;var u,S,_="top to bottom"===C("roworder"),L=x?.3:.1;y&&n._splomGridDflt&&(u=n._splomGridDflt.xside,S=n._splomGridDflt.yside),p._domains={x:t("x",C,x?.2:.1,u,w),y:t("y",C,L,S,m,_)}}else delete n.grid}function C(P,I){return k.coerce(a,p,d,P,I)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var i,c,h,f,x,v,g,y=r.grid||{},p=n._subplots,m=a._hasSubplotGrid,w=a.rows,u=a.columns,S="independent"===a.pattern,_=a._axisMap={};if(m){var E=y.subplots||[];v=a.subplots=new Array(w);var L=1;for(i=0;i<w;i++){var C=v[i]=new Array(u),P=E[i]||[];for(c=0;c<u;c++)if(S?(x=1===L?"xy":"x"+L+"y"+L,L++):x=P[c],C[c]="",-1!==p.cartesian.indexOf(x)){if(g=x.indexOf("y"),h=x.slice(0,g),f=x.slice(g),void 0!==_[h]&&_[h]!==c||void 0!==_[f]&&_[f]!==i)continue;C[c]=x,_[h]=c,_[f]=i}}}else{var I=s(n,y,"x"),j=s(n,y,"y");a.xaxes=o(I,p.xaxis,u,_,"x"),a.yaxes=o(j,p.yaxis,w,_,"y")}var R=a._anchors={},H="top to bottom"===a.roworder;for(var F in _){var U,B,N,J=F.charAt(0),Z=a[J+"side"];if(Z.length<8)R[F]="free";else if("x"===J){if("t"===Z.charAt(0)===H?(U=0,B=1,N=w):(U=w-1,B=-1,N=-1),m){var V=_[F];for(i=U;i!==N;i+=B)if((x=v[i][V])&&(g=x.indexOf("y"),x.slice(0,g)===F)){R[F]=x.slice(g);break}}else for(i=U;i!==N;i+=B)if(-1!==p.cartesian.indexOf(F+(f=a.yaxes[i]))){R[F]=f;break}}else if("l"===Z.charAt(0)?(U=0,B=1,N=u):(U=u-1,B=-1,N=-1),m){var W=_[F];for(i=U;i!==N;i+=B)if((x=v[W][i])&&(g=x.indexOf("y"),x.slice(g)===F)){R[F]=x.slice(0,g);break}}else for(i=U;i!==N;i+=B)if(-1!==p.cartesian.indexOf((h=a.xaxes[i])+F)){R[F]=h;break}}}}}},69819:function(Q,z,e){"use strict";var k=e(85555),A=e(44467).templatedArray;e(24695),Q.exports=A("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",k.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",k.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(Q,z,e){"use strict";var k=e(92770),A=e(58163);Q.exports=function(l,T,b,d){T=T||{};var s="log"===b&&"linear"===T.type;if(s||"linear"===b&&"log"===T.type)for(var o,r,n=l._fullLayout.images,a=T._id.charAt(0),i=0;i<n.length;i++)if(r="images["+i+"].",(o=n[i])[a+"ref"]===T._id){var c=o[a],h=o["size"+a],f=null,x=null;if(s){f=A(c,T.range);var v=h/Math.pow(10,f)/2;x=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else x=(f=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));k(f)?k(x)||(x=null):(f=null,x=null),d(r+a,f),d(r+"size"+a,x)}}},81603:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(85501),T=e(69819);function b(d,s,t){function o(f,x){return k.coerce(d,s,T,f,x)}var r=o("source");if(!o("visible",!!r))return s;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var n={_fullLayout:t},a=["x","y"],i=0;i<2;i++){var c=a[i],h=A.coerceRef(d,s,n,c,"paper",void 0);"paper"!==h&&A.getFromId(n,h)._imgIndices.push(s._index),A.coercePosition(s,n,o,h,c,0)}return s}Q.exports=function(d,s){l(d,s,{name:"images",handleItemDefaults:b})}},80750:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(89298),T=e(41675),b=e(77922);Q.exports=function(d){var s,t,o=d._fullLayout,r=[],n={},a=[];for(t=0;t<o.images.length;t++){var i=o.images[t];if(i.visible)if("below"===i.layer&&"paper"!==i.xref&&"paper"!==i.yref){s=T.ref2id(i.xref)+T.ref2id(i.yref);var c=o._plots[s];if(!c){a.push(i);continue}c.mainplot&&(s=c.mainplot.id),n[s]||(n[s]=[]),n[s].push(i)}else"above"===i.layer?r.push(i):a.push(i)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(u){var S=k.select(this);if(this._imgSrc!==u.source)if(S.attr("xmlns",b.svg),u.source&&"data:"===u.source.slice(0,5))S.attr("xlink:href",u.source),this._imgSrc=u.source;else{var _=new Promise(function(E){var L=new Image;function C(){S.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var I=P.toDataURL("image/png");S.attr("xlink:href",I),E()},S.on("error",C),L.src=u.source,this._imgSrc=u.source}.bind(this));d._promises.push(_)}}function v(u){var S,_,E=k.select(this),L=l.getFromId(d,u.xref),C=l.getFromId(d,u.yref),P="domain"===l.getRefType(u.xref),I="domain"===l.getRefType(u.yref),j=o._size;S=void 0!==L?"string"==typeof u.xref&&P?L._length*u.sizex:Math.abs(L.l2p(u.sizex)-L.l2p(0)):u.sizex*j.w,_=void 0!==C?"string"==typeof u.yref&&I?C._length*u.sizey:Math.abs(C.l2p(u.sizey)-C.l2p(0)):u.sizey*j.h;var R,H,F=S*h[u.xanchor].offset,U=_*f[u.yanchor].offset,B=h[u.xanchor].sizing+f[u.yanchor].sizing;switch(R=void 0!==L?"string"==typeof u.xref&&P?L._length*u.x+L._offset:L.r2p(u.x)+L._offset:u.x*j.w+j.l,R+=F,H=void 0!==C?"string"==typeof u.yref&&I?C._length*(1-u.y)+C._offset:C.r2p(u.y)+C._offset:j.h-u.y*j.h+j.t,H+=U,u.sizing){case"fill":B+=" slice";break;case"stretch":B="none"}E.attr({x:R,y:H,width:S,height:_,preserveAspectRatio:B,opacity:u.opacity});var N=(L&&"domain"!==l.getRefType(u.xref)?L._id:"")+(C&&"domain"!==l.getRefType(u.yref)?C._id:"");A.setClipUrl(E,N?"clip"+o._uid+N:null,d)}var g=o._imageLowerLayer.selectAll("image").data(a),y=o._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),y.enter().append("image"),g.exit().remove(),y.exit().remove(),g.each(function(u){x.bind(this)(u),v.bind(this)(u)}),y.each(function(u){x.bind(this)(u),v.bind(this)(u)});var p=Object.keys(o._plots);for(t=0;t<p.length;t++){var m=o._plots[s=p[t]];if(m.imagelayer){var w=m.imagelayer.selectAll("image").data(n[s]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(u){x.bind(this)(u),v.bind(this)(u)})}}}},68804:function(Q,z,e){"use strict";Q.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function(Q,z,e){"use strict";var k=e(41940),A=e(22399);Q.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:k({editType:"legend"}),grouptitlefont:k({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:k({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(Q){"use strict";Q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(44467),T=e(9012),b=e(33030),d=e(10820),s=e(10130);Q.exports=function(t,o,r){var n,a=t.legend||{},i=l.newContainer(o,"legend");function c(C,P){return A.coerce(a,i,b,C,P)}for(var h=function(C,P){return A.coerce(n._input,n,T,C,P)},f=o.font||{},x=A.coerceFont(c,"grouptitlefont",A.extendFlat({},f,{size:Math.round(1.1*f.size)})),v=0,g=!1,y="normal",p=0;p<r.length;p++)(n=r[p]).visible&&((n.showlegend||n._dfltShowLegend&&!(n._module&&n._module.attributes&&n._module.attributes.showlegend&&!1===n._module.attributes.showlegend.dflt))&&(v++,n.showlegend&&(g=!0,(k.traceIs(n,"pie-like")||!0===n._input.showlegend)&&v++),A.coerceFont(h,"legendgrouptitle.font",x)),(k.traceIs(n,"bar")&&"stack"===o.barmode||-1!==["tonextx","tonexty"].indexOf(n.fill))&&(y=s.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),void 0!==n.legendgroup&&""!==n.legendgroup&&(y=s.isReversed({traceorder:y})?"reversed+grouped":"grouped"));var m=A.coerce(t,o,d,"showlegend",g&&v>1);if(!1===m&&(o.legend=void 0),(!1!==m||a.uirevision)&&(c("uirevision",o.uirevision),!1!==m)){c("bgcolor",o.paper_bgcolor),c("bordercolor"),c("borderwidth");var w,u,S,_=A.coerceFont(c,"font",o.font),E="h"===c("orientation");if(E?(w=0,k.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(u=1.1,S="bottom"):(u=-.1,S="top")):(w=1.02,u=1,S="auto"),c("traceorder",y),s.isGrouped(o.legend)&&c("tracegroupgap"),c("entrywidth"),c("entrywidthmode"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("groupclick"),c("x",w),c("xanchor"),c("y",u),c("yanchor",S),c("valign"),A.noneOrAll(a,i,["x","y"]),c("title.text")){c("title.side",E?"left":"top");var L=A.extendFlat({},_,{size:A.bigFont(_.size)});A.coerceFont(c,"title.font",L)}}}},43969:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(74875),T=e(73972),b=e(11086),d=e(28569),s=e(91424),t=e(7901),o=e(63893),r=e(85167),n=e(14928),a=e(18783),i=a.LINE_SPACING,c=a.FROM_TL,h=a.FROM_BR,f=e(82424),x=e(53630),v=e(10130);function g(E,L,C){var P=E[0],R=P.trace.legendwidth||L.entrywidth;return"fraction"===L.entrywidthmode?L._maxWidth*R:C+(R||P.width)}function y(E,L,C,P,I){var j=C.data()[0][0].trace,R={event:I,node:C.node(),curveNumber:j.index,expandedIndex:j._expandedIndex,data:E.data,layout:E.layout,frames:E._transitionData._frames,config:E._context,fullData:E._fullData,fullLayout:E._fullLayout};j._group&&(R.group=j._group),T.traceIs(j,"pie-like")&&(R.label=C.datum()[0].label),!1!==b.triggerHandler(E,"plotly_legendclick",R)&&(1===P?L._clickTimeout=setTimeout(function(){E._fullLayout&&r(C,E,P)},E._context.doubleClickDelay):2===P&&(L._clickTimeout&&clearTimeout(L._clickTimeout),E._legendMouseDownTime=0,!1!==b.triggerHandler(E,"plotly_legenddoubleclick",R)&&r(C,E,P)))}function p(E,L,C){var P,I,j=E.data()[0][0],R=j.trace,H=T.traceIs(R,"pie-like"),F=!C._inHover&&L._context.edits.legendText&&!H,U=C._maxNameLength;j.groupTitle?(P=j.groupTitle.text,I=j.groupTitle.font):(I=C.font,C.entries?P=j.text:(P=H?j.label:R.name,R._meta&&(P=A.templateString(P,R._meta))));var B=A.ensureSingle(E,"text","legendtext");B.attr("text-anchor","start").call(s.font,I).text(F?m(P,U):P),o.positionText(B,C.itemwidth+2*n.itemGap,0),F?B.call(o.makeEditable,{gd:L,text:P}).call(u,E,L,C).on("edit",function(J){this.text(m(J,U)).call(u,E,L,C);var Z=j.trace._fullInput||{},V={};if(T.hasTransform(Z,"groupby")){var W=T.getTransformIndices(Z,"groupby"),K=A.keyedContainer(Z,"transforms["+W[W.length-1]+"].styles","target","value.name");K.set(j.trace._group,J),V=K.constructUpdate()}else V.name=J;return T.call("_guiRestyle",L,V,R.index)}):u(B,E,L,C)}function m(E,L){var C=Math.max(4,L);if(E&&E.trim().length>=C/2)return E;for(var P=C-(E=E||"").length;P>0;P--)E+=" ";return E}function w(E,L){var C,P=L._context.doubleClickDelay,I=1,j=A.ensureSingle(E,"rect","legendtoggle",function(R){L._context.staticPlot||R.style("cursor","pointer").attr("pointer-events","all"),R.call(t.fill,"rgba(0,0,0,0)")});L._context.staticPlot||(j.on("mousedown",function(){(C=(new Date).getTime())-L._legendMouseDownTime<P?I+=1:(I=1,L._legendMouseDownTime=C)}),j.on("mouseup",function(){if(!L._dragged&&!L._editing){var R=L._fullLayout.legend;(new Date).getTime()-L._legendMouseDownTime>P&&(I=Math.max(I-1,1)),y(L,R,E,I,k.event)}}))}function u(E,L,C,P,I){P._inHover&&E.attr("data-notex",!0),o.convertToTspans(E,C,function(){!function(j,R,H,F){var U=j.data()[0][0];if(H._inHover||!U||U.trace.showlegend){var B=j.select("g[class*=math-group]"),N=B.node();H||(H=R._fullLayout.legend);var J,Z,V=H.borderwidth,W=(1===F?H.title.font:U.groupTitle?U.groupTitle.font:H.font).size*i;if(N){var X=s.bBox(N);J=X.height,Z=X.width,1===F?s.setTranslate(B,V,V+.75*J):s.setTranslate(B,0,.25*J)}else{var K=j.select(1===F?".legendtitletext":".legendtext"),ne=o.lineCount(K),re=K.node();if(J=W*ne,Z=re?s.bBox(re).width:0,1===F)"left"===H.title.side&&(Z+=2*n.itemGap),o.positionText(K,V+n.titlePad,V+W);else{var ae=2*n.itemGap+H.itemwidth;U.groupTitle&&(ae=n.itemGap,Z-=H.itemwidth),o.positionText(K,ae,-W*((ne-1)/2-.3))}}1===F?(H._titleWidth=Z,H._titleHeight=J):(U.lineHeight=W,U.height=Math.max(J,16)+3,U.width=Z)}else j.remove()}(L,C,P,I)})}function S(E){return A.isRightAnchor(E)?"right":A.isCenterAnchor(E)?"center":"left"}function _(E){return A.isBottomAnchor(E)?"bottom":A.isMiddleAnchor(E)?"middle":"top"}Q.exports=function(E,L){return L||(L=E._fullLayout.legend||{}),function(C,P){var I,j,R=C._fullLayout,H="legend"+R._uid,F=P._inHover;if(F?(I=P.layer,H+="-hover"):I=R._infolayer,I){if(C._legendMouseDownTime||(C._legendMouseDownTime=0),F){if(!P.entries)return;j=f(P.entries,P)}else{if(!C.calcdata)return;j=R.showlegend&&f(C.calcdata,P)}var U=R.hiddenlabels||[];if(!(F||R.showlegend&&j.length))return I.selectAll(".legend").remove(),R._topdefs.select("#"+H).remove(),l.autoMargin(C,"legend");var B=A.ensureSingle(I,"g","legend",function(re){F||re.attr("pointer-events","all")}),N=A.ensureSingleById(R._topdefs,"clipPath",H,function(re){re.append("rect")}),J=A.ensureSingle(B,"rect","bg",function(re){re.attr("shape-rendering","crispEdges")});J.call(t.stroke,P.bordercolor).call(t.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");var Z=A.ensureSingle(B,"g","scrollbox"),V=P.title;if(P._titleWidth=0,P._titleHeight=0,V.text){var W=A.ensureSingle(Z,"text","legendtitletext");W.attr("text-anchor","start").call(s.font,V.font).text(V.text),u(W,Z,C,P,1)}else Z.selectAll(".legendtitletext").remove();var X=A.ensureSingle(B,"rect","scrollbar",function(re){re.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),K=Z.selectAll("g.groups").data(j);K.enter().append("g").attr("class","groups"),K.exit().remove();var ne=K.selectAll("g.traces").data(A.identity);ne.enter().append("g").attr("class","traces"),ne.exit().remove(),ne.style("opacity",function(re){var ae=re[0].trace;return T.traceIs(ae,"pie-like")?-1!==U.indexOf(re[0].label)?.5:1:"legendonly"===ae.visible?.5:1}).each(function(){k.select(this).call(p,C,P)}).call(x,C,P).each(function(){F||k.select(this).call(w,C)}),A.syncOrAsync([l.previousPromises,function(){return function(re,ae,le,pe){var xe=re._fullLayout;pe||(pe=xe.legend);var ye=xe._size,se=v.isVertical(pe),fe=v.isGrouped(pe),Ee="fraction"===pe.entrywidthmode,de=pe.borderwidth,we=2*de,ke=n.itemGap,Te=pe.itemwidth+2*ke,$=2*(de+ke),oe=_(pe),he=pe.y<0||0===pe.y&&"top"===oe,me=pe.y>1||1===pe.y&&"bottom"===oe,Me=pe.tracegroupgap,Ie={};pe._maxHeight=Math.max(he||me?xe.height/2:ye.h,30);var Pe=0;pe._width=0,pe._height=0;var Ze,Be,Ye,rt,ze=(Be=0,Ye=0,(rt=(Ze=pe).title.side)&&(-1!==rt.indexOf("left")&&(Be=Ze._titleWidth),-1!==rt.indexOf("top")&&(Ye=Ze._titleHeight)),[Be,Ye]);if(se)le.each(function(Ze){var Be=Ze[0].height;s.setTranslate(this,de+ze[0],de+ze[1]+pe._height+Be/2+ke),pe._height+=Be,pe._width=Math.max(pe._width,Ze[0].width)}),Pe=Te+pe._width,pe._width+=ke+Te+we,pe._height+=$,fe&&(ae.each(function(Ze,Be){s.setTranslate(this,0,Be*pe.tracegroupgap)}),pe._height+=(pe._lgroupsLength-1)*pe.tracegroupgap);else{var ce=S(pe),De=me||he,He=xe.width/2;pe._maxWidth=Math.max(pe.x<0||0===pe.x&&"right"===ce?De&&"left"===ce?ye.l+ye.w:He:pe.x>1||1===pe.x&&"left"===ce?De&&"right"===ce?ye.r+ye.w:He:ye.w,2*Te);var Ve=0,nt=0;le.each(function(Ze){var Be=g(Ze,pe,Te);Ve=Math.max(Ve,Be),nt+=Be}),Pe=null;var tt=0;if(fe){var at=0,dt=0,wt=0;ae.each(function(){var Ze=0,Be=0;k.select(this).selectAll("g.traces").each(function(rt){var Se=g(rt,pe,Te),Re=rt[0].height;s.setTranslate(this,ze[0],ze[1]+de+ke+Re/2+Be),Be+=Re,Ze=Math.max(Ze,Se),Ie[rt[0].trace.legendgroup]=Ze});var Ye=Ze+ke;dt>0&&Ye+de+dt>pe._maxWidth?(tt=Math.max(tt,dt),dt=0,wt+=at+Me,at=Be):at=Math.max(at,Be),s.setTranslate(this,dt,wt),dt+=Ye}),pe._width=Math.max(tt,dt)+de,pe._height=wt+at+$}else{var bt=le.size(),_t=nt+we+(bt-1)*ke<pe._maxWidth,Lt=0,Ct=0,Ot=0,Ht=0;le.each(function(Ze){var Be=Ze[0].height,Ye=g(Ze,pe,Te),rt=_t?Ye:Ve;Ee||(rt+=ke),rt+de+Ct-ke>=pe._maxWidth&&(tt=Math.max(tt,Ht),Ct=0,Ot+=Lt,pe._height+=Lt,Lt=0),s.setTranslate(this,ze[0]+de+Ct,ze[1]+de+Ot+Be/2+ke),Ht=Ct+Ye+ke,Ct+=rt,Lt=Math.max(Lt,Be)}),_t?(pe._width=Ct+we,pe._height=Lt+$):(pe._width=Math.max(tt,Ht)+we,pe._height+=Lt+$)}}pe._width=Math.ceil(Math.max(pe._width+ze[0],pe._titleWidth+2*(de+n.titlePad))),pe._height=Math.ceil(Math.max(pe._height+ze[1],pe._titleHeight+2*(de+n.itemGap))),pe._effHeight=Math.min(pe._height,pe._maxHeight);var It=re._context.edits,Ge=It.legendText||It.legendPosition;le.each(function(Ze){var Be=k.select(this).select(".legendtoggle"),Ye=Ze[0].height,rt=Ze[0].trace.legendgroup,Se=g(Ze,pe,Te);fe&&""!==rt&&(Se=Ie[rt]);var Re=Ge?Te:Pe||Se;se||Ee||(Re+=ke/2),s.setRect(Be,0,-Ye/2,Re,Ye)})}(C,K,ne,P)},function(){var re,ae,le,pe,_e,De,He,Ve,xe=R._size,ye=P.borderwidth;if(!F){if(He=S(De=(_e=C)._fullLayout.legend),Ve=_(De),l.autoMargin(_e,"legend",{x:De.x,y:De.y,l:De._width*c[He],r:De._width*h[He],b:De._effHeight*h[Ve],t:De._effHeight*c[Ve]}))return;var fe=xe.l+xe.w*P.x-c[S(P)]*P._width,Ee=xe.t+xe.h*(1-P.y)-c[_(P)]*P._effHeight;if(R.margin.autoexpand){var de=fe,we=Ee;fe=A.constrain(fe,0,R.width-P._width),Ee=A.constrain(Ee,0,R.height-P._effHeight),fe!==de&&A.log("Constrain legend.x to make legend fit inside graph"),Ee!==we&&A.log("Constrain legend.y to make legend fit inside graph")}s.setTranslate(B,fe,Ee)}if(X.on(".drag",null),B.on("wheel",null),F||P._height<=P._maxHeight||C._context.staticPlot){var ke=P._effHeight;F&&(ke=P._height),J.attr({width:P._width-ye,height:ke-ye,x:ye/2,y:ye/2}),s.setTranslate(Z,0,0),N.select("rect").attr({width:P._width-2*ye,height:ke-2*ye,x:ye,y:ye}),s.setClipUrl(Z,H,C),s.setRect(X,0,0,0,0),delete P._scrollY}else{var Te,oe,he=Math.max(n.scrollBarMinHeight,P._effHeight*P._effHeight/P._height),me=P._effHeight-he-2*n.scrollBarMargin,Me=P._height-P._effHeight,Ie=me/Me,Pe=Math.min(P._scrollY||0,Me);J.attr({width:P._width-2*ye+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-ye,x:ye/2,y:ye/2}),N.select("rect").attr({width:P._width-2*ye+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-2*ye,x:ye,y:ye+Pe}),s.setClipUrl(Z,H,C),ge(Pe,he,Ie),B.on("wheel",function(){ge(Pe=A.constrain(P._scrollY+k.event.deltaY/me*Me,0,Me),he,Ie),0!==Pe&&Pe!==Me&&k.event.preventDefault()});var ze=k.behavior.drag().on("dragstart",function(){var _e=k.event.sourceEvent;Te="touchstart"===_e.type?_e.changedTouches[0].clientY:_e.clientY,oe=Pe}).on("drag",function(){var _e=k.event.sourceEvent;2===_e.buttons||_e.ctrlKey||ge(Pe=function(De,He,Ve){return A.constrain((Ve-He)/Ie+De,0,Me)}(oe,Te,"touchmove"===_e.type?_e.changedTouches[0].clientY:_e.clientY),he,Ie)});X.call(ze);var ce=k.behavior.drag().on("dragstart",function(){var _e=k.event.sourceEvent;"touchstart"===_e.type&&(Te=_e.changedTouches[0].clientY,oe=Pe)}).on("drag",function(){var _e=k.event.sourceEvent;"touchmove"===_e.type&&ge(Pe=function(De,He,Ve){return A.constrain((He-Ve)/Ie+De,0,Me)}(oe,Te,_e.changedTouches[0].clientY),he,Ie)});Z.call(ce)}function ge(_e,De,He){P._scrollY=C._fullLayout.legend._scrollY=_e,s.setTranslate(Z,0,-_e),s.setRect(X,P._width,n.scrollBarMargin+_e*He,n.scrollBarWidth,De),N.select("rect").attr("y",ye+_e)}C._context.edits.legendPosition&&(B.classed("cursor-move",!0),d.init({element:B.node(),gd:C,prepFn:function(){var _e=s.getTranslate(B);le=_e.x,pe=_e.y},moveFn:function(_e,De){var He=le+_e,Ve=pe+De;s.setTranslate(B,He,Ve),re=d.align(He,0,xe.l,xe.l+xe.w,P.xanchor),ae=d.align(Ve,0,xe.t+xe.h,xe.t,P.yanchor)},doneFn:function(){void 0!==re&&void 0!==ae&&T.call("_guiRelayout",C,{"legend.x":re,"legend.y":ae})},clickFn:function(_e,De){var He=I.selectAll("g.traces").filter(function(){var Ve=this.getBoundingClientRect();return De.clientX>=Ve.left&&De.clientX<=Ve.right&&De.clientY>=Ve.top&&De.clientY<=Ve.bottom});He.size()>0&&y(C,B,He,_e,De)}}))}],C)}}(E,L)}},82424:function(Q,z,e){"use strict";var k=e(73972),A=e(10130);Q.exports=function(l,T){var b,d,s=T._inHover,t=A.isGrouped(T),o=A.isReversed(T),r={},n=[],a=!1,i={},c=0,h=0;function f(j,R){if(""!==j&&A.isGrouped(T))-1===n.indexOf(j)?(n.push(j),a=!0,r[j]=[R]):r[j].push(R);else{var H="~~i"+c;n.push(H),r[H]=[R],c++}}for(b=0;b<l.length;b++){var x=l[b],v=x[0],g=v.trace,y=g.legendgroup;if(s||g.visible&&g.showlegend)if(k.traceIs(g,"pie-like"))for(i[y]||(i[y]={}),d=0;d<x.length;d++){var p=x[d].label;i[y][p]||(f(y,{label:p,color:x[d].color,i:x[d].i,trace:g,pts:x[d].pts}),i[y][p]=!0,h=Math.max(h,(p||"").length))}else f(y,v),h=Math.max(h,(g.name||"").length)}if(!n.length)return[];var m=!a||!t,w=[];for(b=0;b<n.length;b++){var u=r[n[b]];w.push(m?u[0]:u)}for(m&&(w=[w]),b=0;b<w.length;b++){var S=1/0;for(d=0;d<w[b].length;d++){var _=w[b][d].trace.legendrank;S>_&&(S=_)}w[b][0]._groupMinRank=S,w[b][0]._preGroupSort=b}var E=function(j,R){return j.trace.legendrank-R.trace.legendrank||j._preSort-R._preSort};for(w.forEach(function(j,R){j[0]._preGroupSort=R}),w.sort(function(j,R){return j[0]._groupMinRank-R[0]._groupMinRank||j[0]._preGroupSort-R[0]._preGroupSort}),b=0;b<w.length;b++){w[b].forEach(function(j,R){j._preSort=R}),w[b].sort(E);var L=w[b][0].trace,C=null;for(d=0;d<w[b].length;d++){var P=w[b][d].trace.legendgrouptitle;if(P&&P.text){C=P,s&&(P.font=T._groupTitleFont);break}}if(o&&w[b].reverse(),C){var I=!1;for(d=0;d<w[b].length;d++)if(k.traceIs(w[b][d].trace,"pie-like")){I=!0;break}w[b].unshift({i:-1,groupTitle:C,noClick:I,trace:{showlegend:L.showlegend,legendgroup:L.legendgroup,visible:"toggleitem"===T.groupclick||L.visible}})}for(d=0;d<w[b].length;d++)w[b][d]=[w[b][d]]}return T._lgroupsLength=w.length,T._maxNameLength=h,w}},85167:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=!0;Q.exports=function(T,b,d){var s=b._fullLayout;if(!b._dragged&&!b._editing){var t,o=s.legend.itemclick,r=s.legend.itemdoubleclick,n=s.legend.groupclick;if(1===d&&"toggle"===o&&"toggleothers"===r&&l&&b.data&&b._context.showTips&&k.notifier(k._(b,"Double-click on legend to isolate one trace"),"long"),l=!1,1===d?t=o:2===d&&(t=r),t){var a="togglegroup"===n,i=s.hiddenlabels?s.hiddenlabels.slice():[],c=T.data()[0][0];if(!c.groupTitle||!c.noClick){var h,f,x,v,g,y=b._fullData,p=c.trace,m=p.legendgroup,w={},u=[],S=[],_=[];if(A.traceIs(p,"pie-like")){var E=c.label,L=i.indexOf(E);"toggle"===t?-1===L?i.push(E):i.splice(L,1):"toggleothers"===t&&(i=[],b.calcdata[0].forEach(function(W){E!==W.label&&i.push(W.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===i.length&&-1===L&&(i=[])),A.call("_guiRelayout",b,"hiddenlabels",i)}else{var C,P=m&&m.length,I=[];if(P)for(h=0;h<y.length;h++)(C=y[h]).visible&&C.legendgroup===m&&I.push(h);if("toggle"===t){var j;switch(p.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0}if(P)if(a)for(h=0;h<y.length;h++)!1!==y[h].visible&&y[h].legendgroup===m&&V(y[h],j);else V(p,j);else V(p,j)}else if("toggleothers"===t){var F,B=!0;for(h=0;h<y.length;h++)if(F=!0!==y[h].showlegend,!(y[h]===p||F||P&&y[h].legendgroup===m||!0!==y[h].visible||A.traceIs(y[h],"notLegendIsolatable"))){B=!1;break}for(h=0;h<y.length;h++)if(!1!==y[h].visible&&!A.traceIs(y[h],"notLegendIsolatable"))switch(p.visible){case"legendonly":V(y[h],!0);break;case!0:F=!0!==y[h].showlegend&&!y[h].legendgroup,V(y[h],!!(y[h]===p||P&&y[h].legendgroup===m||F)||!!B||"legendonly")}}for(h=0;h<S.length;h++)if(x=S[h]){var N=x.constructUpdate(),J=Object.keys(N);for(f=0;f<J.length;f++)(w[v=J[f]]=w[v]||[])[_[h]]=N[v]}for(g=Object.keys(w),h=0;h<g.length;h++)for(v=g[h],f=0;f<u.length;f++)w[v].hasOwnProperty(f)||(w[v][f]=void 0);A.call("_guiRestyle",b,w,u)}}}}function Z(W,X,K){var ne=u.indexOf(W),re=w[X];return re||(re=w[X]=[]),-1===u.indexOf(W)&&(u.push(W),ne=u.length-1),re[ne]=K,ne}function V(W,X){if(!c.groupTitle||a){var K=W._fullInput;if(A.hasTransform(K,"groupby")){var ne=S[K.index];if(!ne){var re=A.getTransformIndices(K,"groupby");ne=k.keyedContainer(K,"transforms["+re[re.length-1]+"].styles","target","value.visible"),S[K.index]=ne}var le=ne.get(W._group);void 0===le&&(le=!0),!1!==le&&ne.set(W._group,X),_[K.index]=Z(K.index,"visible",!1!==K.visible)}else Z(K.index,"visible",!1!==K.visible&&X)}}}},10130:function(Q,z){"use strict";z.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},z.isVertical=function(e){return"h"!==e.orientation},z.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},2199:function(Q,z,e){"use strict";Q.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(71828),T=l.strTranslate,b=e(91424),d=e(7901),s=e(52075).extractOpts,t=e(34098),o=e(63463),r=e(53581).castOption,n=e(14928);function a(h,f){return(f?"radial":"horizontal")+(h?"":"reversed")}function i(h){var f=h[0].trace,x=f.contours,v=t.hasLines(f),g=t.hasMarkers(f),y=f.visible&&f.fill&&"none"!==f.fill,p=!1,m=!1;if(x){var w=x.coloring;"lines"===w?p=!0:v="none"===w||"heatmap"===w||x.showlines,"constraint"===x.type?y="="!==x._operation:"fill"!==w&&"heatmap"!==w||(m=!0)}return{showMarker:g,showLine:v,showFill:y,showGradientLine:p,showGradientFill:m,anyLine:v||p,anyFill:y||m}}function c(h,f,x){return h&&l.isArrayOrTypedArray(h)?f:h>x?x:h}Q.exports=function(h,f,x){x||(x=f._fullLayout.legend);var g="constant"===x.itemsizing,y=x.itemwidth,m=T((y+2*n.itemGap)/2,0),w=function(_,E,L,C){var P;if(_+1)P=_;else{if(!(E&&E.width>0))return 0;P=E.width}return g?C:Math.min(P,L)};function u(_,E,L){var C=_[0].trace,P=C.marker||{},I=P.line||{},j=L?C.visible&&C.type===L:A.traceIs(C,"bar"),R=k.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(j?[_]:[]);R.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),R.exit().remove(),R.each(function(H){var F=k.select(this),U=H[0],B=w(U.mlw,P.line,5,2);F.style("stroke-width",B+"px");var N=U.mcc;if(!x._inHover&&"mc"in U){var J=s(P),Z=J.mid;void 0===Z&&(Z=(J.max+J.min)/2),N=b.tryColorscale(P,"")(Z)}var V=N||U.mc||P.color,W=P.pattern,X=W&&b.getPatternAttr(W.shape,0,"");if(X){var K=b.getPatternAttr(W.bgcolor,0,null),ne=b.getPatternAttr(W.fgcolor,0,null),re=W.fgopacity,ae=c(W.size,8,10),le=c(W.solidity,.5,1);F.call(b.pattern,"legend",f,"legend-"+C.uid,X,ae,le,N,W.fillmode,K,ne,re)}else F.call(d.fill,V);B&&d.stroke(F,U.mlc||I.color)})}function S(_,E,L){var C=_[0],P=C.trace,I=L?P.visible&&P.type===L:A.traceIs(P,L),j=k.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(I?[_]:[]);if(j.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),j.exit().remove(),j.size()){var R=(P.marker||{}).line,H=w(r(R.width,C.pts),R,5,2),F=l.minExtend(P,{marker:{line:{width:H}}});F.marker.line.color=R.color;var U=l.minExtend(C,{trace:F});o(j,U,F)}}h.each(function(_){var E=k.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",_[0].trace.opacity);var C=x.valign,P=_[0].lineHeight,I=_[0].height;L.attr("transform","middle"!==C&&P&&I?T(0,{top:1,bottom:-1}[C]*(.5*(P-I+3))):null),L.selectAll("g.legendfill").data([_]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([_]).enter().append("g").classed("legendlines",!0);var R=L.selectAll("g.legendsymbols").data([_]);R.enter().append("g").classed("legendsymbols",!0),R.selectAll("g.legendpoints").data([_]).enter().append("g").classed("legendpoints",!0)}).each(function(_){var E,L=_[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,j){var R,H=k.select(this),F=s(L),U=F.colorscale,B=F.reversescale;if(U){if(!E){var N=U.length;R=0===j?U[B?N-1:0][1]:1===j?U[B?0:N-1][1]:U[Math.floor((N-1)/2)][1]}}else{var J=L.vertexcolor||L.facecolor||L.color;R=l.isArrayOrTypedArray(J)?J[j]||J[0]:J}H.attr("d",I[0]),R?H.call(d.fill,R):H.call(function(Z){Z.size()&&b.gradient(Z,f,"legendfill-"+L.uid,a(B,"radial"===E),U,"fill")})})}).each(function(_){var E=_[0].trace,L="waterfall"===E.type;if(_[0]._distinct&&L){var C=_[0].trace[_[0].dir].marker;return _[0].mc=C.color,_[0].mlw=C.line.width,_[0].mlc=C.line.color,u(_,this,"waterfall")}var P=[];E.visible&&L&&(P=_[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var I=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);I.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(j){var R=k.select(this),H=E[j[0]].marker,F=w(void 0,H.line,5,2);R.attr("d",j[1]).style("stroke-width",F+"px").call(d.fill,H.color),F&&R.call(d.stroke,H.line.color)})}).each(function(_){u(_,this,"funnel")}).each(function(_){u(_,this)}).each(function(_){var E=_[0].trace,L=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&A.traceIs(E,"box-violin")?[_]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=k.select(this);if("all"!==E.boxpoints&&"all"!==E.points||0!==d.opacity(E.fillcolor)||0!==d.opacity((E.line||{}).color)){var P=w(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(d.fill,E.fillcolor),P&&d.stroke(C,E.line.color)}else{var I=l.minExtend(E,{marker:{size:g?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(b.pointStyle,I,f)}})}).each(function(_){S(_,this,"funnelarea")}).each(function(_){S(_,this,"pie")}).each(function(_){var E,L,C=i(_),P=C.showFill,I=C.showLine,j=C.showGradientLine,R=C.showGradientFill,H=C.anyFill,F=C.anyLine,U=_[0],B=U.trace,N=s(B),J=N.colorscale,Z=N.reversescale,V=t.hasMarkers(B)||!H?"M5,0":F?"M5,-2":"M5,-3",W=k.select(this),X=W.select(".legendfill").selectAll("path").data(P||R?[_]:[]);if(X.enter().append("path").classed("js-fill",!0),X.exit().remove(),X.attr("d",V+"h"+y+"v6h-"+y+"z").call(function(re){re.size()&&(P?b.fillGroupStyle(re,f):b.gradient(re,f,"legendfill-"+B.uid,a(Z),J,"fill"))}),I||j){var K=w(void 0,B.line,10,5);L=l.minExtend(B,{line:{width:K}}),E=[l.minExtend(U,{trace:L})]}var ne=W.select(".legendlines").selectAll("path").data(I||j?[E]:[]);ne.enter().append("path").classed("js-line",!0),ne.exit().remove(),ne.attr("d",V+(j?"l"+y+",0.0001":"h"+y)).call(I?b.lineGroupStyle:function(re){if(re.size()){var ae="legendline-"+B.uid;b.lineGroupStyle(re),b.gradient(re,f,ae,a(Z),J,"stroke")}})}).each(function(_){var E,L,C=i(_),j=C.showLine,R=C.showMarker,H=_[0],F=H.trace,U=!R&&!C.anyLine&&!C.anyFill&&t.hasText(F);function B(ne,re,ae,le){var pe=l.nestedProperty(F,ne).get(),xe=l.isArrayOrTypedArray(pe)&&re?re(pe):pe;if(g&&xe&&void 0!==le&&(xe=le),ae){if(xe<ae[0])return ae[0];if(xe>ae[1])return ae[1]}return xe}function N(ne){return H._distinct&&H.index&&ne[H.index]?ne[H.index]:ne[0]}if(R||U||j){var J={},Z={};if(R){J.mc=B("marker.color",N),J.mx=B("marker.symbol",N),J.mo=B("marker.opacity",l.mean,[.2,1]),J.mlc=B("marker.line.color",N),J.mlw=B("marker.line.width",l.mean,[0,5],2),Z.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var V=B("marker.size",l.mean,[2,16],12);J.ms=V,Z.marker.size=V}j&&(Z.line={width:B("line.width",N,[0,10],5)}),U&&(J.tx="Aa",J.tp=B("textposition",N),J.ts=10,J.tc=B("textfont.color",N),J.tf=B("textfont.family",N)),E=[l.minExtend(H,J)],(L=l.minExtend(F,Z)).selectedpoints=null,L.texttemplate=null}var W=k.select(this).select("g.legendpoints"),X=W.selectAll("path.scatterpts").data(R?E:[]);X.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),X.exit().remove(),X.call(b.pointStyle,L,f),R&&(E[0].mrc=3);var K=W.selectAll("g.pointtext").data(U?E:[]);K.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),K.exit().remove(),K.selectAll("text").call(b.textPointStyle,L,f)}).each(function(_){var E=_[0].trace,L=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&"candlestick"===E.type?[_,_]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var I=k.select(this),j=E[P?"increasing":"decreasing"],R=w(void 0,j.line,5,2);I.style("stroke-width",R+"px").call(d.fill,j.fillcolor),R&&d.stroke(I,j.line.color)})}).each(function(_){var E=_[0].trace,L=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&"ohlc"===E.type?[_,_]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var I=k.select(this),j=E[P?"increasing":"decreasing"],R=w(void 0,j.line,5,2);I.style("fill","none").call(b.dashLine,j.line.dash,R),R&&d.stroke(I,j.line.color)})})}},42068:function(Q,z,e){"use strict";e(93348),Q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(Q,z,e){"use strict";var k=e(73972),A=e(74875),l=e(41675),T=e(24255),b=e(34031).eraseActiveShape,d=e(71828),s=d._,t=Q.exports={};function o(v,g){var y,p,m=g.currentTarget,w=m.getAttribute("data-attr"),u=m.getAttribute("data-val")||!0,S=v._fullLayout,_={},E=l.list(v,null,!0),L=S._cartesianSpikesEnabled;if("zoom"===w){var C,P="in"===u?.5:2,I=(1+P)/2,j=(1-P)/2;for(p=0;p<E.length;p++)if(!(y=E[p]).fixedrange)if(C=y._name,"auto"===u)_[C+".autorange"]=!0;else if("reset"===u){if(void 0===y._rangeInitial)_[C+".autorange"]=!0;else{var R=y._rangeInitial.slice();_[C+".range[0]"]=R[0],_[C+".range[1]"]=R[1]}void 0!==y._showSpikeInitial&&(_[C+".showspikes"]=y._showSpikeInitial,"on"!==L||y._showSpikeInitial||(L="off"))}else{var H=[y.r2l(y.range[0]),y.r2l(y.range[1])],F=[I*H[0]+j*H[1],I*H[1]+j*H[0]];_[C+".range[0]"]=y.l2r(F[0]),_[C+".range[1]"]=y.l2r(F[1])}}else"hovermode"!==w||"x"!==u&&"y"!==u||m.setAttribute("data-val",u=S._isHoriz?"y":"x"),_[w]=u;S._cartesianSpikesEnabled=L,k.call("_guiRelayout",v,_)}function r(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout._subplots.gl3d||[],u={},S=p.split("."),_=0;_<w.length;_++)u[w[_]+"."+S[1]]=m;u.dragmode="pan"===m?m:"zoom",k.call("_guiRelayout",v,u)}function n(v,g){for(var y=g.currentTarget.getAttribute("data-attr"),p="resetLastSave"===y,m="resetDefault"===y,w=v._fullLayout,u=w._subplots.gl3d||[],S={},_=0;_<u.length;_++){var E,L=u[_],C=L+".camera",P=L+".aspectratio",I=L+".aspectmode",j=w[L]._scene;p?(S[C+".up"]=j.viewInitial.up,S[C+".eye"]=j.viewInitial.eye,S[C+".center"]=j.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=j.viewInitial.aspectratio.x,S[P+".y"]=j.viewInitial.aspectratio.y,S[P+".z"]=j.viewInitial.aspectratio.z,S[I]=j.viewInitial.aspectmode)}k.call("_guiRelayout",v,S)}function a(v,g){var y=g.currentTarget,p=y._previousVal,m=v._fullLayout,w=m._subplots.gl3d||[],u=["xaxis","yaxis","zaxis"],S={},_={};if(p)_=p,y._previousVal=null;else{for(var E=0;E<w.length;E++){var L=w[E],C=m[L],P=L+".hovermode";S[P]=C.hovermode,_[P]=!1;for(var I=0;I<3;I++){var j=u[I],R=L+"."+j+".showspikes";_[R]=!1,S[R]=C[j].showspikes}}y._previousVal=S}return _}function i(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout,u=w._subplots.geo||[],S=0;S<u.length;S++){var _=u[S];if("zoom"===p){var L=w[_].projection.scale;k.call("_guiRelayout",v,_+".projection.scale","in"===m?2*L:.5*L)}}"reset"===p&&x(v,"geo")}function c(v){var g=v._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function h(v){var g=c(v);k.call("_guiRelayout",v,"hovermode",g)}function f(v,g){for(var y=g.currentTarget.getAttribute("data-val"),p=v._fullLayout,m=p._subplots.mapbox||[],w={},u=0;u<m.length;u++){var S=m[u],_=p[S].zoom;w[S+".zoom"]="in"===y?1.05*_:_/1.05}k.call("_guiRelayout",v,w)}function x(v,g){for(var y=v._fullLayout,p=y._subplots[g]||[],m={},w=0;w<p.length;w++)for(var u=p[w],S=y[u]._subplot.viewInitial,_=Object.keys(S),E=0;E<_.length;E++){var L=_[E];m[u+"."+L]=S[L]}k.call("_guiRelayout",v,m)}t.toImage={name:"toImage",title:function(v){return s(v,"png"===((v._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:T.camera,click:function(v){var g=v._context.toImageButtonOptions,y={format:g.format||"png"};d.notifier(s(v,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==y.format&&d.isIE()&&(d.notifier(s(v,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(p){p in g&&(y[p]=g[p])}),k.call("downloadImage",v,y).then(function(p){d.notifier(s(v,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){d.notifier(s(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.disk,click:function(v){A.sendDataToCloud(v)}},t.editInChartStudio={name:"editInChartStudio",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.pencil,click:function(v){A.sendDataToCloud(v)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:o},t.pan2d={name:"pan2d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:o},t.select2d={name:"select2d",_cat:"select",title:function(v){return s(v,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:o},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return s(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:o},t.drawclosedpath={name:"drawclosedpath",title:function(v){return s(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:o},t.drawopenpath={name:"drawopenpath",title:function(v){return s(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:o},t.drawline={name:"drawline",title:function(v){return s(v,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:o},t.drawrect={name:"drawrect",title:function(v){return s(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:o},t.drawcircle={name:"drawcircle",title:function(v){return s(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:o},t.eraseshape={name:"eraseshape",title:function(v){return s(v,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return s(v,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:o},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return s(v,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:o},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return s(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:o},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return s(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:o},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(v){return s(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(v){return s(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return s(v,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return s(v,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);k.call("_guiRelayout",v,y)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return s(v,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:i},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(v){return s(v,"Reset view")},icon:T.home,click:function(v){for(var g={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<v._fullData.length;y++){var p=v._fullData[y]._viewInitial;g["node.groups"].push(p.node.groups.slice()),g["node.x"].push(p.node.x.slice()),g["node.y"].push(p.node.y.slice())}k.call("restyle",v,g)}},t.toggleHover={name:"toggleHover",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);y.hovermode=c(v),k.call("_guiRelayout",v,y)}},t.resetViews={name:"resetViews",title:function(v){return s(v,"Reset views")},icon:T.home,click:function(v,g){var y=g.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),o(v,g),y.setAttribute("data-attr","resetLastSave"),n(v,g),x(v,"geo"),x(v,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(v){return s(v,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var g=v._fullLayout;g._cartesianSpikesEnabled="on"===g._cartesianSpikesEnabled?"off":"on",k.call("_guiRelayout",v,function(p){for(var m="on"===p._fullLayout._cartesianSpikesEnabled,w=l.list(p,null,!0),u={},S=0;S<w.length;S++){var _=w[S];u[_._name+".showspikes"]=!!m||_._showSpikeInitial}return u}(v))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return s(v,"Reset view")},attr:"reset",icon:T.home,click:function(v){x(v,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:f},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:f}},93348:function(Q,z,e){"use strict";var k=e(26023),A=Object.keys(k),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),b=[];A.forEach(function(d){!function(s){if(-1===T.indexOf(s._cat||s.name)){var t=s.name,o=(s._cat||s.name).toLowerCase();-1===b.indexOf(t)&&b.push(t),-1===b.indexOf(o)&&b.push(o)}}(k[d])}),b.sort(),Q.exports={DRAW_MODES:l,backButtons:T,foreButtons:b}},35750:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(44467),T=e(42068);Q.exports=function(b,d){var s=b.modebar||{},t=l.newContainer(d,"modebar");function o(n,a){return k.coerce(s,t,T,n,a)}o("orientation"),o("bgcolor",A.addOpacity(d.paper_bgcolor,.5));var r=A.contrast(A.rgb(d.modebar.bgcolor));o("color",A.addOpacity(r,.3)),o("activecolor",A.addOpacity(r,.7)),o("uirevision",d.uirevision),o("add"),o("remove")}},64168:function(Q,z,e){"use strict";Q.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function(Q,z,e){"use strict";var k=e(41675),A=e(34098),l=e(73972),T=e(23469).isUnifiedHover,b=e(37676),d=e(26023),s=e(93348).DRAW_MODES,t=e(71828).extendDeep;Q.exports=function(o){var r=o._fullLayout,n=o._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,c=n.modeBarButtons;i=Array.isArray(c)&&c.length?function(h){for(var f=t([],h),x=0;x<f.length;x++)for(var v=f[x],g=0;g<v.length;g++){var y=v[g];if("string"==typeof y){if(void 0===d[y])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[x][g]=d[y]}}return f}(c):!n.displayModeBar&&n.watermark?[]:function(h){var f=h._fullLayout,x=h._fullData,v=h._context;function g(pe,xe){if("string"==typeof xe){if(xe.toLowerCase()===pe.toLowerCase())return!0}else if(xe.name===pe||(xe._cat||xe.name)===pe.toLowerCase())return!0;return!1}var y=f.modebar.add;"string"==typeof y&&(y=[y]);var p=f.modebar.remove;"string"==typeof p&&(p=[p]);var m=v.modeBarButtonsToAdd.concat(y.filter(function(pe){for(var xe=0;xe<v.modeBarButtonsToRemove.length;xe++)if(g(pe,v.modeBarButtonsToRemove[xe]))return!1;return!0})),w=v.modeBarButtonsToRemove.concat(p.filter(function(pe){for(var xe=0;xe<v.modeBarButtonsToAdd.length;xe++)if(g(pe,v.modeBarButtonsToAdd[xe]))return!1;return!0})),u=f._has("cartesian"),S=f._has("gl3d"),_=f._has("geo"),E=f._has("pie"),L=f._has("funnelarea"),C=f._has("gl2d"),P=f._has("ternary"),I=f._has("mapbox"),j=f._has("polar"),R=f._has("smith"),H=f._has("sankey"),F=function(pe){for(var xe=k.list({_fullLayout:pe},null,!0),ye=0;ye<xe.length;ye++)if(!xe[ye].fixedrange)return!1;return!0}(f),U=T(f.hovermode),B=[];function N(pe){if(pe.length){for(var xe=[],ye=0;ye<pe.length;ye++){for(var se=pe[ye],fe=d[se],Ee=fe.name.toLowerCase(),de=(fe._cat||fe.name).toLowerCase(),we=!1,ke=0;ke<w.length;ke++){var Te=w[ke].toLowerCase();if(Te===Ee||Te===de){we=!0;break}}we||xe.push(d[se])}B.push(xe)}}var J=["toImage"];v.showEditInChartStudio?J.push("editInChartStudio"):v.showSendToCloud&&J.push("sendDataToCloud"),N(J);var Z=[],V=[],W=[],X=[];(u||C||E||L||P)+_+S+I+j+R>1?(V=["toggleHover"],W=["resetViews"]):_?(Z=["zoomInGeo","zoomOutGeo"],V=["hoverClosestGeo"],W=["resetGeo"]):S?(V=["hoverClosest3d"],W=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(Z=["zoomInMapbox","zoomOutMapbox"],V=["toggleHover"],W=["resetViewMapbox"]):C?V=["hoverClosestGl2d"]:E?V=["hoverClosestPie"]:H?(V=["hoverClosestCartesian","hoverCompareCartesian"],W=["resetViewSankey"]):V=["toggleHover"],u&&(V=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(pe){for(var xe=0;xe<pe.length;xe++)if(!l.traceIs(pe[xe],"noHover"))return!1;return!0}(x)||U)&&(V=[]),!u&&!C||F||(Z=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==W[0]&&(W=["resetScale2d"])),S?X=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||C)&&!F||P?X=["zoom2d","pan2d"]:I||_?X=["pan2d"]:j&&(X=["zoom2d"]),function(pe){for(var xe=!1,ye=0;ye<pe.length&&!xe;ye++){var se=pe[ye];se._module&&se._module.selectPoints&&(l.traceIs(se,"scatter-like")?(A.hasMarkers(se)||A.hasText(se))&&(xe=!0):l.traceIs(se,"box-violin")&&"all"!==se.boxpoints&&"all"!==se.points||(xe=!0))}return xe}(x)&&X.push("select2d","lasso2d");var K=[],ne=function(pe){-1===K.indexOf(pe)&&-1!==V.indexOf(pe)&&K.push(pe)};if(Array.isArray(m)){for(var re=[],ae=0;ae<m.length;ae++){var le=m[ae];"string"==typeof le?(le=le.toLowerCase(),-1!==s.indexOf(le)?(f._has("mapbox")||f._has("cartesian"))&&X.push(le):"togglespikelines"===le?ne("toggleSpikelines"):"togglehover"===le?ne("toggleHover"):"hovercompare"===le?ne("hoverCompareCartesian"):"hoverclosest"===le?(ne("hoverClosestCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie")):"v1hovermode"===le&&(ne("toggleHover"),ne("hoverClosestCartesian"),ne("hoverCompareCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie"))):re.push(le)}m=re}return N(X),N(Z.concat(W)),N(K),function(pe,xe){if(xe.length)if(Array.isArray(xe[0]))for(var ye=0;ye<xe.length;ye++)pe.push(xe[ye]);else pe.push(xe);return pe}(B,m)}(o),a?a.update(o,i):r._modeBar=b(o,i)}else a&&(a.destroy(),delete r._modeBar)}},37676:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(71828),T=e(24255),b=e(11506).version,d=new DOMParser;function s(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(o,r){this.graphInfo=o;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,i="modebar-"+a._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===a.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var c=a.modebar,h="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(i),l.addRelatedStyleRule(i,h+"#"+i+" .modebar-group","background-color: "+c.bgcolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+c.color),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+c.activecolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+c.activecolor);var f=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,v=this.locale!==n.locale;if(this.locale=n.locale,(f||x||v)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var g=this.getLogo();n.watermark&&(g.className=g.className+" watermark"),"v"===a.modebar.orientation?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(o){var r=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(i){var c=i.name;if(!c)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(c))throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var h=r.createButton(i);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},t.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},t.createButton=function(o){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=o.title;void 0===a?a=o.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&n.setAttribute("data-title",a),void 0!==o.attr&&n.setAttribute("data-attr",o.attr);var i=o.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),"function"!=typeof o.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){o.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",o.toggle||!1),o.toggle&&k.select(n).classed("active",!0);var c=o.icon;return n.appendChild("function"==typeof c?c():this.createIcon(c||T.question)),n.setAttribute("data-gravity",o.gravity||"n"),n},t.createIcon=function(o){var r,n=A(o.height)?Number(o.height):o.ascent-o.descent,a="http://www.w3.org/2000/svg";if(o.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,o.width,n].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(a,"path");i.setAttribute("d",o.path),o.transform?i.setAttribute("transform",o.transform):void 0!==o.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),r.appendChild(i)}return o.svg&&(r=d.parseFromString(o.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(o){var r=this.graphInfo._fullLayout,n=void 0!==o?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var i=a.getAttribute("data-val")||!0,c=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle"),f=k.select(a);if(h)c===n&&f.classed("active",!f.classed("active"));else{var x=null===c?c:l.nestedProperty(r,c).get();f.classed("active",x===i)}})},t.hasButtons=function(o){var r=this.buttons;if(!r||o.length!==r.length)return!1;for(var n=0;n<o.length;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;a++)if(o[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var o=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(r),o},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},Q.exports=function(o,r){var n=o._fullLayout,a=new s({graphInfo:o,container:n._modebardiv.node(),buttons:r});return n._privateplot&&k.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},37113:function(Q,z,e){"use strict";var k=e(41940),A=e(22399),l=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Q.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:k({editType:"plot"}),bgcolor:{valType:"color",dflt:A.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(Q){"use strict";Q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(44467),T=e(85501),b=e(37113),d=e(89573);function s(t,o,r,n){var a=n.calendar;function i(h,f){return k.coerce(t,o,b.buttons,h,f)}if(i("visible")){var c=i("step");"all"!==c&&(!a||"gregorian"===a||"month"!==c&&"year"!==c?i("stepmode"):o.stepmode="backward",i("count")),i("label")}}Q.exports=function(t,o,r,n,a){var i=t.rangeselector||{},c=l.newContainer(o,"rangeselector");function h(v,g){return k.coerce(i,c,b,v,g)}if(h("visible",T(i,c,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var f=function(v,g,y){for(var p=y.filter(function(S){return g[S].anchor===v._id}),m=0,w=0;w<p.length;w++){var u=g[p[w]].domain;u&&(m=Math.max(u[1],m))}return[v.domain[0],m+d.yPad]}(o,r,n);h("x",f[0]),h("y",f[1]),k.noneOrAll(t,o,["x","y"]),h("xanchor"),h("yanchor"),k.coerceFont(h,"font",r.font);var x=h("bgcolor");h("activecolor",A.contrast(x,d.lightAmount,d.darkAmount)),h("bordercolor"),h("borderwidth")}}},21598:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(74875),T=e(7901),b=e(91424),d=e(71828),s=d.strTranslate,t=e(63893),o=e(41675),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR,c=e(89573),h=e(70565);function f(g){return g._id}function x(g,y,p){var w,u,m=d.ensureSingle(g,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});m.attr({rx:c.rx,ry:c.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,(w=y,u=p,u._isActive||u._isHovered?w.activecolor:w.bgcolor)).style("stroke-width",y.borderwidth+"px")}function v(g,y,p,m){var w,u;d.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,y.font).text((w=p,u=m._fullLayout._meta,w.label?u?d.templateString(w.label,u):w.label:"all"===w.step?"all":w.count+w.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}Q.exports=function(g){var y=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(p){for(var m=o.list(p,"x",!0),w=[],u=0;u<m.length;u++){var S=m[u];S.rangeselector&&S.rangeselector.visible&&w.push(S)}return w}(g),f);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(p){var m=k.select(this),w=p,u=w.rangeselector,S=m.selectAll("g.button").data(d.filterVisible(u.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(_){var E=k.select(this),L=h(w,_);_._isActive=function(C,P,I){if("all"===P.step)return!0===C.autorange;var j=Object.keys(I);return C.range[0]===I[j[0]]&&C.range[1]===I[j[1]]}(w,_,L),E.call(x,u,_),E.call(v,u,_,g),E.on("click",function(){g._dragged||A.call("_guiRelayout",g,L)}),E.on("mouseover",function(){_._isHovered=!0,E.call(x,u,_)}),E.on("mouseout",function(){_._isHovered=!1,E.call(x,u,_)})}),function(_,E,L,C,P){var I=0,j=0,R=L.borderwidth;E.each(function(){var J=k.select(this).select(".selector-text"),V=Math.max(L.font.size*n*t.lineCount(J),16)+3;j=Math.max(j,V)}),E.each(function(){var J=k.select(this),Z=J.select(".selector-rect"),V=J.select(".selector-text"),W=V.node()&&b.bBox(V.node()).width,X=L.font.size*n,K=t.lineCount(V),ne=Math.max(W+10,c.minButtonWidth);J.attr("transform",s(R+I,R)),Z.attr({x:0,y:0,width:ne,height:j}),t.positionText(V,ne/2,j/2-(K-1)*X/2+3),I+=ne+5});var H=_._fullLayout._size,F=H.l+H.w*L.x,U=H.t+H.h*(1-L.y),B="left";d.isRightAnchor(L)&&(F-=I,B="right"),d.isCenterAnchor(L)&&(F-=I/2,B="center");var N="top";d.isBottomAnchor(L)&&(U-=j,N="bottom"),d.isMiddleAnchor(L)&&(U-=j/2,N="middle"),I=Math.ceil(I),j=Math.ceil(j),F=Math.round(F),U=Math.round(U),l.autoMargin(_,C+"-range-selector",{x:L.x,y:L.y,l:I*a[B],r:I*i[B],b:j*i[N],t:j*a[N]}),P.attr("transform",s(F,U))}(g,S,u,w._name,m)})}},70565:function(Q,z,e){"use strict";var k=e(81041),A=e(71828).titleCase;Q.exports=function(l,T){var b=l._name,d={};if("all"===T.step)d[b+".autorange"]=!0;else{var s=function(t,o){var r,n=t.range,a=new Date(t.r2l(n[1])),c=k["utc"+A(o.step)],h=o.count;switch(o.stepmode){case"backward":r=t.l2r(+c.offset(a,-h));break;case"todate":var f=c.offset(a,-h);r=t.l2r(+c.ceil(f))}return[r,n[1]]}(l,T);d[b+".range[0]"]=s[0],d[b+".range[1]"]=s[1]}return d}},97218:function(Q,z,e){"use strict";Q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function(Q,z,e){"use strict";var k=e(22399);Q.exports={bgcolor:{valType:"color",dflt:k.background,editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(Q,z,e){"use strict";var k=e(41675).list,A=e(71739).getAutoRange,l=e(73251);Q.exports=function(T){for(var b=k(T,"x",!0),d=0;d<b.length;d++){var s=b[d],t=s[l.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=A(T,s))}}},73251:function(Q){"use strict";Q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(Q,z,e){"use strict";var k=e(71828),A=e(44467),l=e(41675),T=e(75148),b=e(47850);Q.exports=function(d,s,t){var o=d[t],r=s[t];if(o.rangeslider||s._requestRangeslider[r._id]){k.isPlainObject(o.rangeslider)||(o.rangeslider={});var n,a,i=o.rangeslider,c=A.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(i.range)),m("range");var h=s._subplots;if(h)for(var f=h.cartesian.filter(function(u){return u.substr(0,u.indexOf("y"))===l.name2id(t)}).map(function(u){return u.substr(u.indexOf("y"),u.length)}),x=k.simpleMap(f,l.id2name),v=0;v<x.length;v++){var g=x[v];n=i[g]||{},a=A.newContainer(c,g,"yaxis");var y,p=s[g];n.range&&p.isValidRange(n.range)&&(y="fixed"),"match"!==w("rangemode",y)&&w("range",p.range.slice())}c._input=i}}function m(u,S){return k.coerce(i,c,T,u,S)}function w(u,S){return k.coerce(n,a,b,u,S)}}},72413:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(74875),T=e(71828),b=T.strTranslate,d=e(91424),s=e(7901),t=e(92998),o=e(93612),r=e(41675),n=e(28569),a=e(6964),i=e(73251);function c(y,p,m,w){var u=T.ensureSingle(y,"rect",i.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,_=-w._offsetShift,E=d.crispRound(p,w.borderwidth);u.attr({width:w._width+S,height:w._height+S,transform:b(_,_),"stroke-width":E}).call(s.stroke,w.bordercolor).call(s.fill,w.bgcolor)}function h(y,p,m,w){T.ensureSingleById(p._fullLayout._topdefs,"clipPath",w._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function f(y,p,m,w){var u,S=p.calcdata,_=y.selectAll("g."+i.rangePlotClassName).data(m._subplotsWith,T.identity);_.enter().append("g").attr("class",function(E){return i.rangePlotClassName+" "+E}).call(d.setClipUrl,w._clipId,p),_.order(),_.exit().remove(),_.each(function(E,L){var C=k.select(this),P=0===L,I=r.getFromId(p,E,"y"),j=I._name,R=w[j],H={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:w.range.slice(),calendar:m.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:p._context};m.rangebreaks&&(H.layout.xaxis.rangebreaks=m.rangebreaks),H.layout[j]={type:I.type,domain:[0,1],range:"match"!==R.rangemode?R.range.slice():I.range.slice(),calendar:I.calendar},I.rangebreaks&&(H.layout[j].rangebreaks=I.rangebreaks),l.supplyDefaults(H);var F=H._fullLayout.xaxis,U=H._fullLayout[j];F.clearCalc(),F.setScale(),U.clearCalc(),U.setScale();var B={id:E,plotgroup:C,xaxis:F,yaxis:U,isRangePlot:!0};P?u=B:(B.mainplot="xy",B.mainplotinfo=u),o.rangePlot(p,B,function(N,J){for(var Z=[],V=0;V<N.length;V++){var W=N[V],X=W[0].trace;X.xaxis+X.yaxis===J&&Z.push(W)}return Z}(S,E))})}function x(y,p,m,w,u){T.ensureSingle(y,"rect",i.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),T.ensureSingle(y,"rect",i.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),"match"!==u.rangemode&&(T.ensureSingle(y,"rect",i.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(s.fill,i.maskOppAxisColor),T.ensureSingle(y,"rect",i.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",i.maskOppBorder).call(s.fill,i.maskOppAxisColor))}function v(y,p,m,w){p._context.staticPlot||T.ensureSingle(y,"rect",i.slideBoxClassName,function(u){u.attr({y:0,cursor:i.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:i.slideBoxFill})}function g(y,p,m,w){var u=T.ensureSingle(y,"g",i.grabberMinClassName),S=T.ensureSingle(y,"g",i.grabberMaxClassName),_={x:0,width:i.handleWidth,rx:i.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":i.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(w._height/4),height:Math.round(w._height/2)};T.ensureSingle(u,"rect",i.handleMinClassName,function(C){C.attr(_)}).attr(E),T.ensureSingle(S,"rect",i.handleMaxClassName,function(C){C.attr(_)}).attr(E);var L={width:i.grabAreaWidth,x:0,y:0,fill:i.grabAreaFill,cursor:p._context.staticPlot?void 0:i.grabAreaCursor};T.ensureSingle(u,"rect",i.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",w._height),T.ensureSingle(S,"rect",i.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",w._height)}Q.exports=function(y){for(var p=y._fullLayout,m=p._rangeSliderData,w=0;w<m.length;w++){var u=m[w][i.name];u._clipId=u._id+"-"+p._uid}var S=p._infolayer.selectAll("g."+i.containerClassName).data(m,function(_){return _._name});S.exit().each(function(_){p._topdefs.select("#"+_[i.name]._clipId).remove()}).remove(),0!==m.length&&(S.enter().append("g").classed(i.containerClassName,!0).attr("pointer-events","all"),S.each(function(_){var E=k.select(this),L=_[i.name],C=p[r.id2name(_.anchor)],P=L[r.id2name(_.anchor)];if(L.range){var I,j=T.simpleMap(L.range,_.r2l),R=T.simpleMap(_.range,_.r2l);I=R[0]<R[1]?[Math.min(j[0],R[0]),Math.max(j[1],R[1])]:[Math.max(j[0],R[0]),Math.min(j[1],R[1])],L.range=L._input.range=T.simpleMap(I,_.l2r)}_.cleanRange("rangeslider.range");var H=p._size,F=_.domain;L._width=H.w*(F[1]-F[0]);var U=Math.round(H.l+H.w*F[0]),B=Math.round(H.t+H.h*(1-_._counterDomainMin)+("bottom"===_.side?_._depth:0)+L._offsetShift+i.extraPad);E.attr("transform",b(U,B)),L._rl=T.simpleMap(L.range,_.r2l);var N=L._rl[0],J=L._rl[1],Z=J-N;if(L.p2d=function(pe){return pe/L._width*Z+N},L.d2p=function(pe){return(pe-N)/Z*L._width},_.rangebreaks){var V=_.locateBreaks(N,J);if(V.length){var W,X,K=0;for(W=0;W<V.length;W++)K+=(X=V[W]).max-X.min;var ne=L._width/(J-N-K),re=[-ne*N];for(W=0;W<V.length;W++)re.push(re[re.length-1]-ne*((X=V[W]).max-X.min));for(L.d2p=function(pe){for(var xe=re[0],ye=0;ye<V.length;ye++){var se=V[ye];if(pe>=se.max)xe=re[ye+1];else if(pe<se.min)break}return xe+ne*pe},W=0;W<V.length;W++)(X=V[W]).pmin=L.d2p(X.min),X.pmax=L.d2p(X.max);L.p2d=function(pe){for(var xe=re[0],ye=0;ye<V.length;ye++){var se=V[ye];if(pe>=se.pmax)xe=re[ye+1];else if(pe<se.pmin)break}return(pe-xe)/ne}}}if("match"!==P.rangemode){var ae=C.r2l(P.range[0]),le=C.r2l(P.range[1])-ae;L.d2pOppAxis=function(pe){return(pe-ae)/le*L._height}}E.call(c,y,_,L).call(h,y,_,L).call(f,y,_,L).call(x,y,_,L,P).call(v,y,_,L).call(g,y,_,L),function(pe,xe,ye,se){if(!xe._context.staticPlot){var fe=pe.select("rect."+i.slideBoxClassName).node(),Ee=pe.select("rect."+i.grabAreaMinClassName).node(),de=pe.select("rect."+i.grabAreaMaxClassName).node();pe.on("mousedown",we),pe.on("touchstart",we)}function we(){var ke=k.event,Te=ke.target,$=ke.clientX||ke.touches[0].clientX,oe=$-pe.node().getBoundingClientRect().left,he=se.d2p(ye._rl[0]),me=se.d2p(ye._rl[1]),Me=n.coverSlip();function Ie(ze){var ce,ge,_e,De=+(ze.clientX||ze.touches[0].clientX)-$;switch(Te){case fe:_e="ew-resize",ce=he+De,ge=me+De;break;case Ee:_e="col-resize",ce=he+De,ge=me;break;case de:_e="col-resize",ce=he,ge=me+De;break;default:_e="ew-resize",ce=oe,ge=oe+De}if(ge<ce){var He=ge;ge=ce,ce=He}se._pixelMin=ce,se._pixelMax=ge,a(k.select(Me),_e),function(Ve,nt,tt,at){function dt(_t){return tt.l2r(T.constrain(_t,at._rl[0],at._rl[1]))}var wt=dt(at.p2d(at._pixelMin)),bt=dt(at.p2d(at._pixelMax));window.requestAnimationFrame(function(){A.call("_guiRelayout",nt,tt._name+".range",[wt,bt])})}(0,xe,ye,se)}function Pe(){Me.removeEventListener("mousemove",Ie),Me.removeEventListener("mouseup",Pe),this.removeEventListener("touchmove",Ie),this.removeEventListener("touchend",Pe),T.removeElement(Me)}this.addEventListener("touchmove",Ie),this.addEventListener("touchend",Pe),Me.addEventListener("mousemove",Ie),Me.addEventListener("mouseup",Pe)}}(E,y,_,L),function(pe,xe,ye,se,fe,Ee){var de=i.handleWidth/2;function we(ze){return T.constrain(ze,0,se._width)}function ke(ze){return T.constrain(ze,0,se._height)}function Te(ze){return T.constrain(ze,-de,se._width+de)}var $=we(se.d2p(ye._rl[0])),oe=we(se.d2p(ye._rl[1]));if(pe.select("rect."+i.slideBoxClassName).attr("x",$).attr("width",oe-$),pe.select("rect."+i.maskMinClassName).attr("width",$),pe.select("rect."+i.maskMaxClassName).attr("x",oe).attr("width",se._width-oe),"match"!==Ee.rangemode){var he=se._height-ke(se.d2pOppAxis(fe._rl[1])),me=se._height-ke(se.d2pOppAxis(fe._rl[0]));pe.select("rect."+i.maskMinOppAxisClassName).attr("x",$).attr("height",he).attr("width",oe-$),pe.select("rect."+i.maskMaxOppAxisClassName).attr("x",$).attr("y",me).attr("height",se._height-me).attr("width",oe-$),pe.select("rect."+i.slideBoxClassName).attr("y",he).attr("height",me-he)}var Ie=Math.round(Te($-de))-.5,Pe=Math.round(Te(oe-de))+.5;pe.select("g."+i.grabberMinClassName).attr("transform",b(Ie,.5)),pe.select("g."+i.grabberMaxClassName).attr("transform",b(Pe,.5))}(E,0,_,L,C,P),"bottom"===_.side&&t.draw(y,_._id+"title",{propContainer:_,propName:_._name+".title",placeholder:p._dfltTitle.x,attributes:{x:_._offset+_._length/2,y:B+L._height+L._offsetShift+10+1.5*_.title.font.size,"text-anchor":"middle"}})}))}},549:function(Q,z,e){"use strict";var k=e(41675),A=e(63893),l=e(73251),T=e(18783).LINE_SPACING,b=l.name;function d(s){var t=s&&s[b];return t&&t.visible}z.isVisible=d,z.makeData=function(s){var t=k.list({_fullLayout:s},"x",!0),o=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(d(a)){r.push(a);var i=a[b];i._id=b+a._id,i._height=(s.height-o.b-o.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2)}}s._rangeSliderData=r},z.autoMarginOpts=function(s,t){var o=s._fullLayout,r=t[b],n=t._id.charAt(0),a=0,i=0;return"bottom"===t.side&&(a=t._depth,t.title.text!==o._dfltTitle[n]&&(i=1.5*t.title.font.size+10+r._offsetShift,i+=(t.title.text.match(A.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(o.margin.b,i),pad:l.extraPad+2*r._offsetShift}}},13137:function(Q,z,e){"use strict";var k=e(71828),A=e(75148),l=e(47850),T=e(549);Q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:k.extendFlat({},A,{yaxis:l})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function(Q){"use strict";Q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(Q,z,e){"use strict";var k=e(50215),A=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,b=e(30962).overrideAll,d=e(44467).templatedArray;e(24695),Q.exports=b(d("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},k.xref,{}),yref:T({},k.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:A.color,width:T({},A.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(Q){"use strict";Q.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(85501),T=e(8389),b=e(30477);function d(s,t,o){function r(E,L){return k.coerce(s,t,T,E,L)}var n=r("path"),a="path"!==r("type",n?"path":"rect");a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var i=["x","y"],c=0;c<2;c++){var h,f,x,v=i[c],g={_fullLayout:o},y=A.coerceRef(s,t,g,v);if((h=A.getFromId(g,y))._selectionIndices.push(t._index),x=b.rangeToShapePosition(h),f=b.shapePositionToRange(h),a){var p=v+"0",m=v+"1",w=s[p],u=s[m];s[p]=f(s[p],!0),s[m]=f(s[m],!0),A.coercePosition(t,g,r,y,p),A.coercePosition(t,g,r,y,m);var S=t[p],_=t[m];void 0!==S&&void 0!==_&&(t[p]=x(S),t[m]=x(_),s[p]=w,s[m]=u)}}a&&k.noneOrAll(s,t,["x0","x1","y0","y1"])}Q.exports=function(s,t){l(s,t,{name:"selections",handleItemDefaults:d});for(var o=t.selections,r=0;r<o.length;r++){var n=o[r];n&&void 0===n.path&&(void 0!==n.x0&&void 0!==n.x1&&void 0!==n.y0&&void 0!==n.y1||(t.selections[r]=null))}}},32485:function(Q,z,e){"use strict";var k=e(60165).readPaths,A=e(42359),l=e(51873).clearOutlineControllers,T=e(7901),b=e(91424),d=e(44467).arrayEditor,s=e(30477),t=s.getPathString;function o(c){var h=c._fullLayout;for(var f in l(c),h._selectionLayer.selectAll("path").remove(),h._plots){var x=h._plots[f].selectionLayer;x&&x.selectAll("path").remove()}for(var v=0;v<h.selections.length;v++)n(c,v)}function r(c){return c._context.editSelection}function n(c,h){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var f=s.makeSelectionsOptionsAndPlotinfo(c,h),x=f.options,v=f.plotinfo;x._input&&function(g){var y=t(c,x),p={"data-index":h,"fill-rule":"evenodd",d:y},m=x.opacity,w="rgba(0,0,0,0)",u=x.line.color||T.contrast(c._fullLayout.plot_bgcolor),S=x.line.width,_=x.line.dash;S||(S=5,_="solid");var E=r(c)&&c._fullLayout._activeSelectionIndex===h;E&&(w=c._fullLayout.activeselection.fillcolor,m=c._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var P=g.append("path").attr(p).style("opacity",C?.1:m).call(T.stroke,u).call(T.fill,w).call(b.dashLine,C?"solid":_,C?4+S:S);if(a(P,c,x),E){var I=d(c.layout,"selections",x);P.style({cursor:"move"});var j={element:P.node(),plotinfo:v,gd:c,editHelpers:I,isActiveSelection:!0},R=k(y,c);A(R,P,j)}else P.style("pointer-events",C?"all":"none");L[C]=P}var H=L[0];L[1].node().addEventListener("click",function(){return function(F,U){if(r(F)){var B=+U.node().getAttribute("data-index");if(B>=0){if(B===F._fullLayout._activeSelectionIndex)return void i(F);F._fullLayout._activeSelectionIndex=B,F._fullLayout._deactivateSelection=i,o(F)}}}(c,H)})}(c._fullLayout._selectionLayer)}function a(c,h,f){b.setClipUrl(c,"clip"+h._fullLayout._uid+(f.xref+f.yref),h)}function i(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(l(c),delete c._fullLayout._activeSelectionIndex,o(c))}Q.exports={draw:o,drawOne:n,activateLastSelection:function(c){r(c)&&(c._fullLayout._activeSelectionIndex=c._fullLayout.selections.length-1,c._fullLayout._deactivateSelection=i,o(c))}}},53777:function(Q,z,e){"use strict";var k=e(79952).P,A=e(1426).extendFlat;Q.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:A({},k,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(Q){"use strict";Q.exports=function(z,e,k){k("newselection.mode"),k("newselection.line.width")&&(k("newselection.line.color"),k("newselection.line.dash")),k("activeselection.fillcolor"),k("activeselection.opacity")}},35855:function(Q,z,e){"use strict";var k=e(64505).selectMode,A=e(51873).clearOutline,l=e(60165),T=l.readPaths,b=l.writePaths,d=l.fixDatesForPaths;Q.exports=function(s,t){if(s.length){var o=s[0][0];if(o){var r=o.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,i=t.plotinfo,c=i.xaxis,h=i.yaxis,f=t.isActiveSelection,x=t.dragmode,v=(n.layout||{}).selections||[];if(!k(x)&&void 0!==f){var g=n._fullLayout._activeSelectionIndex;if(g<v.length)switch(n._fullLayout.selections[g].type){case"rect":x="select";break;case"path":x="lasso"}}var y,p=T(r,n,i,f),m={xref:c._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===p.length&&(y=p[0]),y&&5===y.length&&"select"===x?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",c&&h&&d(p,c,h),m.path=b(p),y=null),A(n);for(var w=t.editHelpers,u=(w||{}).modifyItem,S=[],_=0;_<v.length;_++){var E=n._fullLayout.selections[_];if(E){if(S[_]=E._input,void 0!==f&&_===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":u("x0",L.x0),u("x1",L.x1),u("y0",L.y0),u("y1",L.y1);break;case"path":u("path",L.path)}}}else S[_]=E}return void 0===f?(S.push(m),S):w?w.getUpdateObj():{}}}}},75549:function(Q,z,e){"use strict";var k=e(71828).strTranslate;function A(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}Q.exports={p2r:A,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T="y"===l._id.charAt(0)?1:0;return function(b){return A(l,b[T])}},getTransform:function(l){return k(l.xaxis._offset,l.yaxis._offset)}}},47322:function(Q,z,e){"use strict";var k=e(32485),A=e(3937);Q.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:k.draw,drawOne:k.drawOne,reselect:A.reselect,prepSelect:A.prepSelect,clearOutline:A.clearOutline,clearSelectionsCache:A.clearSelectionsCache,selectOnClick:A.selectOnClick}},3937:function(Q,z,e){"use strict";var k=e(52142),A=e(38258),l=e(73972),T=e(91424).dashStyle,b=e(7901),d=e(30211),s=e(23469).makeEventData,t=e(64505),o=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,i=t.selectMode,c=e(30477),h=e(21459),f=e(42359),x=e(51873).clearOutline,v=e(60165),g=v.handleEllipse,y=v.readPaths,p=e(90551),m=e(35855),w=e(32485).activateLastSelection,u=e(71828),S=u.sorterAsc,_=e(61082),E=e(79990),L=e(41675).getFromId,C=e(33306),P=e(61549).redrawReglTraces,I=e(34122),j=I.MINSELECT,R=_.filter,H=_.tester,F=e(75549),U=F.p2r,B=F.axValue,N=F.getTransform;function J(Pe){return void 0!==Pe.subplot}function Z(Pe,ze,ce,ge,_e,De,He){var Ve,nt,tt,at,dt,wt,bt,_t,Lt,Ye,Ct=ze._hoverdata,Ot=ze._fullLayout.clickmode.indexOf("event")>-1,Ht=[];if((Ye=Ct)&&Array.isArray(Ye)&&!0!==Ye[0].hoverOnBox){K(Pe,ze,De);var It=function(Ye,rt){var Se,Re,Ke=Ye[0],st=-1,ct=[];for(Re=0;Re<rt.length;Re++)if(Ke.fullData._expandedIndex===(Se=rt[Re]).cd[0].trace._expandedIndex){if(!0===Ke.hoverOnBox)break;void 0!==Ke.pointNumber?st=Ke.pointNumber:void 0!==Ke.binNumber&&(st=Ke.binNumber,ct=Ke.pointNumbers);break}return{pointNumber:st,pointNumbers:ct,searchInfo:Se}}(Ct,Ve=ae(ze,ce,ge,_e));if(It.pointNumbers.length>0?function(Ye,rt){var Se,Re,Ke,st=[];for(Ke=0;Ke<Ye.length;Ke++)(Se=Ye[Ke]).cd[0].trace.selectedpoints&&Se.cd[0].trace.selectedpoints.length>0&&st.push(Se);if(1===st.length&&st[0]===rt.searchInfo&&(Re=rt.searchInfo.cd[0].trace).selectedpoints.length===rt.pointNumbers.length){for(Ke=0;Ke<rt.pointNumbers.length;Ke++)if(Re.selectedpoints.indexOf(rt.pointNumbers[Ke])<0)return!1;return!0}return!1}(Ve,It):function(Ye){var rt,Se,Re=0;for(Se=0;Se<Ye.length;Se++)if((rt=Ye[Se].cd[0].trace).selectedpoints&&(rt.selectedpoints.length>1||(Re+=rt.selectedpoints.length)>1))return!1;return 1===Re}(Ve)&&(wt=pe(It))){for(He&&He.remove(),Lt=0;Lt<Ve.length;Lt++)(nt=Ve[Lt])._module.selectPoints(nt,!1);xe(ze,Ve),ne(De),Ot&&Ie(ze)}else{for(bt=Pe.shiftKey&&(void 0!==wt?wt:pe(It)),tt=function(Ye,rt,Se){return{pointNumber:Ye,searchInfo:rt,subtract:!!Se}}(It.pointNumber,It.searchInfo,bt),at=X(De.selectionDefs.concat([tt])),Lt=0;Lt<Ve.length;Lt++)if(dt=se(Ve[Lt]._module.selectPoints(Ve[Lt],at),Ve[Lt]),Ht.length)for(var Ge=0;Ge<dt.length;Ge++)Ht.push(dt[Ge]);else Ht=dt;if(xe(ze,Ve,_t={points:Ht}),tt&&De&&De.selectionDefs.push(tt),He){var Ze=De.mergedPolygons,Be=a(De.dragmode);f(fe(Ze,Be),He,De)}Ot&&Me(ze,_t)}}}function V(Pe){return"pointNumber"in Pe&&"searchInfo"in Pe}function W(Pe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ze,ce,ge,_e){return _e.cd[0].trace._expandedIndex===Pe.searchInfo.cd[0].trace._expandedIndex&&ge===Pe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Pe.subtract}}function X(Pe){if(Pe.length){for(var ze=[],ce=V(Pe[0])?0:Pe[0][0][0],ge=ce,_e=V(Pe[0])?0:Pe[0][0][1],De=_e,He=0;He<Pe.length;He++)if(V(Pe[He]))ze.push(W(Pe[He]));else{var Ve=H(Pe[He]);Ve.subtract=!!Pe[He].subtract,ze.push(Ve),ce=Math.min(ce,Ve.xmin),ge=Math.max(ge,Ve.xmax),_e=Math.min(_e,Ve.ymin),De=Math.max(De,Ve.ymax)}return{xmin:ce,xmax:ge,ymin:_e,ymax:De,pts:[],contains:function(nt,tt,at,dt){for(var wt=!1,bt=0;bt<ze.length;bt++)ze[bt].contains(nt,tt,at,dt)&&(wt=!ze[bt].subtract);return wt},isRect:!1,degenerate:!1}}}function K(Pe,ze,ce){var ge=ze._fullLayout,_e=ce.plotinfo,De=ce.dragmode,He=ge._lastSelectedSubplot&&ge._lastSelectedSubplot===_e.id,Ve=(Pe.shiftKey||Pe.altKey)&&!(n(De)&&a(De));He&&Ve&&_e.selection&&_e.selection.selectionDefs&&!ce.selectionDefs?(ce.selectionDefs=_e.selection.selectionDefs,ce.mergedPolygons=_e.selection.mergedPolygons):Ve&&_e.selection||ne(ce),He||(x(ze),ge._lastSelectedSubplot=_e.id)}function ne(Pe,ze){var ce=Pe.dragmode,ge=Pe.plotinfo,_e=Pe.gd;_e._fullLayout._activeShapeIndex>=0&&_e._fullLayout._deactivateShape(_e),_e._fullLayout._activeSelectionIndex>=0&&_e._fullLayout._deactivateSelection(_e);var De=_e._fullLayout._zoomlayer,He=n(ce),Ve=i(ce);if(He||Ve){var nt,tt,at=De.selectAll(".select-outline-"+ge.id);at&&_e._fullLayout._outlining&&(He&&(nt=p(at,Pe)),nt&&l.call("_guiRelayout",_e,{shapes:nt}),Ve&&!J(Pe)&&(tt=m(at,Pe)),tt&&(_e._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",_e,{selections:tt}).then(function(){ze&&w(_e)})),_e._fullLayout._outlining=!1)}ge.selection={},ge.selection.selectionDefs=Pe.selectionDefs=[],ge.selection.mergedPolygons=Pe.mergedPolygons=[]}function re(Pe){return Pe._id}function ae(Pe,ze,ce,ge){if(!Pe.calcdata)return[];var _e,De,He,Ve=[],nt=ze.map(re),tt=ce.map(re);for(He=0;He<Pe.calcdata.length;He++)if(!0===(De=(_e=Pe.calcdata[He])[0].trace).visible&&De._module&&De._module.selectPoints)if(!J({subplot:ge})||De.subplot!==ge&&De.geo!==ge)if("splom"===De.type){if(De._xaxes[nt[0]]&&De._yaxes[tt[0]]){var at=le(De._module,_e,ze[0],ce[0]);at.scene=Pe._fullLayout._splomScenes[De.uid],Ve.push(at)}}else if("sankey"===De.type){var dt=le(De._module,_e,ze[0],ce[0]);Ve.push(dt)}else{if(-1===nt.indexOf(De.xaxis)||-1===tt.indexOf(De.yaxis))continue;Ve.push(le(De._module,_e,L(Pe,De.xaxis),L(Pe,De.yaxis)))}else Ve.push(le(De._module,_e,ze[0],ce[0]));return Ve}function le(Pe,ze,ce,ge){return{_module:Pe,cd:ze,xaxis:ce,yaxis:ge}}function pe(Pe){var ze=Pe.searchInfo.cd[0].trace,ge=Pe.pointNumbers;return!!ze.selectedpoints&&ze.selectedpoints.indexOf(ge.length>0?ge[0]:Pe.pointNumber)>-1}function xe(Pe,ze,ce){var ge,_e;for(ge=0;ge<ze.length;ge++){var De=ze[ge].cd[0].trace._fullInput,He=Pe._fullLayout._tracePreGUI[De.uid]||{};void 0===He.selectedpoints&&(He.selectedpoints=De._input.selectedpoints||null)}if(ce){var Ve=ce.points||[];for(ge=0;ge<ze.length;ge++)(_e=ze[ge].cd[0].trace)._input.selectedpoints=_e._fullInput.selectedpoints=[],_e._fullInput!==_e&&(_e.selectedpoints=[]);for(var nt=0;nt<Ve.length;nt++){var tt=Ve[nt],at=tt.data,dt=tt.fullData,wt=tt.pointIndex,bt=tt.pointIndices;bt?([].push.apply(at.selectedpoints,bt),_e._fullInput!==_e&&[].push.apply(dt.selectedpoints,bt)):(at.selectedpoints.push(wt),_e._fullInput!==_e&&dt.selectedpoints.push(wt))}}else for(ge=0;ge<ze.length;ge++)delete(_e=ze[ge].cd[0].trace).selectedpoints,delete _e._input.selectedpoints,_e._fullInput!==_e&&delete _e._fullInput.selectedpoints;!function(_t,Lt){for(var Ct=!1,Ot=0;Ot<Lt.length;Ot++){var Ht=Lt[Ot],It=Ht.cd;l.traceIs(It[0].trace,"regl")&&(Ct=!0);var Ge=Ht._module,Ze=Ge.styleOnSelect||Ge.style;Ze&&(Ze(_t,It,It[0].node3),It[0].nodeRangePlot3&&Ze(_t,It,It[0].nodeRangePlot3))}Ct&&(C(_t),P(_t))}(Pe,ze)}function ye(Pe,ze,ce){for(var ge=(ce?k.difference:k.union)({regions:Pe},{regions:[ze]}).regions.reverse(),_e=0;_e<ge.length;_e++){var De=ge[_e];De.subtract=$(De,ge.slice(0,_e))}return ge}function se(Pe,ze){if(Array.isArray(Pe))for(var ce=ze.cd,ge=ze.cd[0].trace,_e=0;_e<Pe.length;_e++)Pe[_e]=s(Pe[_e],ge,ce);return Pe}function fe(Pe,ze){for(var ce=[],ge=0;ge<Pe.length;ge++){ce[ge]=[];for(var _e=0;_e<Pe[ge].length;_e++){ce[ge][_e]=[],ce[ge][_e][0]=_e?"L":"M";for(var De=0;De<Pe[ge][_e].length;De++)ce[ge][_e].push(Pe[ge][_e][De])}ze||ce[ge].push(["Z",ce[ge][0][1],ce[ge][0][2]])}return ce}function Ee(Pe,ze){for(var ce,ge,_e=[],De=[],He=0;He<ze.length;He++){var Ve=ze[He];ge=Ve._module.selectPoints(Ve,Pe),De.push(ge),ce=se(ge,Ve),_e=_e.concat(ce)}return _e}function de(Pe,ze,ce,ge,_e){var De,He,Ve,nt=!!ge;_e&&(De=_e.plotinfo,He=_e.xaxes[0]._id,Ve=_e.yaxes[0]._id);var tt=[],at=[],dt=Te(Pe),wt=Pe._fullLayout;if(De){var bt=wt._zoomlayer,_t=wt.dragmode,Lt=n(_t),Ct=i(_t);if(Lt||Ct){var Ot=L(Pe,He,"x"),Ht=L(Pe,Ve,"y");if(Ot&&Ht){var It=bt.selectAll(".select-outline-"+De.id);if(It&&Pe._fullLayout._outlining&&It.length){for(var Ge=It[0][0].getAttribute("d"),Ze=y(Ge,Pe,De),Be=[],Ye=0;Ye<Ze.length;Ye++){for(var rt=Ze[Ye],Se=[],Re=0;Re<rt.length;Re++)Se.push([oe(Ot,rt[Re][1]),oe(Ht,rt[Re][2])]);Se.xref=He,Se.yref=Ve,Se.subtract=$(Se,Be),Be.push(Se)}dt=dt.concat(Be)}}}}var Ke=He&&Ve?[He+Ve]:wt._subplots.cartesian;!function(Rn){var Nn=Rn.calcdata;if(Nn)for(var jn=0;jn<Nn.length;jn++){var Kn=Rn._fullLayout._splomScenes;if(Kn){var yr=Kn[Nn[jn][0].trace.uid];yr&&(yr.selectBatch=[])}}}(Pe);for(var st={},ct=0;ct<Ke.length;ct++){var Tt=Ke[ct],Et=Tt.indexOf("y"),At=Tt.slice(0,Et),ht=Tt.slice(Et),pt=He&&Ve?ce:void 0;if(pt=ke(dt,At,ht,pt)){var gt=ge;if(!nt){var Pt=L(Pe,At,"x"),zt=L(Pe,ht,"y");gt=ae(Pe,[Pt],[zt],Tt);for(var Ut=0;Ut<gt.length;Ut++){var Nt=gt[Ut],jt=Nt.cd[0],Gt=jt.trace;if("scattergl"===Nt._module.name&&!jt.t.xpx){var un=Gt.x,hn=Gt.y,Qt=Gt._length;jt.t.xpx=[],jt.t.ypx=[];for(var _n=0;_n<Qt;_n++)jt.t.xpx[_n]=Pt.c2p(un[_n]),jt.t.ypx[_n]=zt.c2p(hn[_n])}"splom"===Nt._module.name&&(st[Gt.uid]||(st[Gt.uid]=!0))}}var Fn=Ee(pt,gt);tt=tt.concat(Fn),at=at.concat(gt)}}var yn={points:tt};xe(Pe,at,yn);var on=wt.clickmode.indexOf("event")>-1&&ze;if(!De&&ze){var pn=Te(Pe,!0);if(pn.length){var ln=pn[0].xref,dn=pn[0].yref;if(ln&&dn){var Cn=he(pn);me([L(Pe,ln,"x"),L(Pe,dn,"y")])(yn,Cn)}}Pe._fullLayout._noEmitSelectedAtStart?Pe._fullLayout._noEmitSelectedAtStart=!1:on&&Me(Pe,yn),wt._reselect=!1}if(!De&&wt._deselect){var kn=wt._deselect;(function(Rn,Nn,jn){for(var er=0;er<jn.length;er++){var Kn=jn[er];if(Kn.xaxis&&Kn.xaxis._id===Rn&&Kn.yaxis&&Kn.yaxis._id===Nn)return!0}return!1})(He=kn.xref,Ve=kn.yref,at)||we(Pe,He,Ve,ge),on&&(yn.points.length?Me(Pe,yn):Ie(Pe)),wt._deselect=!1}return{eventData:yn,selectionTesters:ce}}function we(Pe,ze,ce,ge){ge=ae(Pe,[L(Pe,ze,"x")],[L(Pe,ce,"y")],ze+ce);for(var _e=0;_e<ge.length;_e++){var De=ge[_e];De._module.selectPoints(De,!1)}xe(Pe,ge)}function ke(Pe,ze,ce,ge){for(var _e,De=0;De<Pe.length;De++){var He=Pe[De];ze===He.xref&&ce===He.yref&&(_e?ge=X(_e=ye(_e,He,!!He.subtract)):(_e=[He],ge=H(He)))}return ge}function Te(Pe,ze){for(var ce=[],ge=Pe._fullLayout,_e=ge.selections,De=_e.length,He=0;He<De;He++)if(!ze||He===ge._activeSelectionIndex){var Ve=_e[He];if(Ve){var nt,tt,at,dt,wt,bt=Ve.xref,_t=Ve.yref,Lt=L(Pe,bt,"x"),Ct=L(Pe,_t,"y");if("rect"===Ve.type){wt=[];var Ot=oe(Lt,Ve.x0),Ht=oe(Lt,Ve.x1),It=oe(Ct,Ve.y0),Ge=oe(Ct,Ve.y1);wt=[[Ot,It],[Ot,Ge],[Ht,Ge],[Ht,It]],nt=Math.min(Ot,Ht),tt=Math.max(Ot,Ht),at=Math.min(It,Ge),dt=Math.max(It,Ge),wt.xmin=nt,wt.xmax=tt,wt.ymin=at,wt.ymax=dt,wt.xref=bt,wt.yref=_t,wt.subtract=!1,wt.isRect=!0,ce.push(wt)}else if("path"===Ve.type)for(var Ze=Ve.path.split("Z"),Be=[],Ye=0;Ye<Ze.length;Ye++){var rt=Ze[Ye];if(rt){var Se=c.extractPathCoords(rt+="Z",h.paramIsX,"raw"),Re=c.extractPathCoords(rt,h.paramIsY,"raw");nt=1/0,tt=-1/0,at=1/0,dt=-1/0,wt=[];for(var Ke=0;Ke<Se.length;Ke++){var st=oe(Lt,Se[Ke]),ct=oe(Ct,Re[Ke]);wt.push([st,ct]),nt=Math.min(st,nt),tt=Math.max(st,tt),at=Math.min(ct,at),dt=Math.max(ct,dt)}wt.xmin=nt,wt.xmax=tt,wt.ymin=at,wt.ymax=dt,wt.xref=bt,wt.yref=_t,wt.subtract=$(wt,Be),Be.push(wt),ce.push(wt)}}}}return ce}function $(Pe,ze){for(var ce=!1,ge=0;ge<ze.length;ge++)for(var _e=ze[ge],De=0;De<Pe.length;De++)if(A(Pe[De],_e)){ce=!ce;break}return ce}function oe(Pe,ze){return"date"===Pe.type&&(ze=ze.replace("_"," ")),"log"===Pe.type?Pe.c2p(ze):Pe.r2p(ze,null,Pe.calendar)}function he(Pe){for(var ze=Pe.length,ce=[],ge=0;ge<ze;ge++){var _e=Pe[ge];ce=(ce=ce.concat(_e)).concat([_e[0]])}return(De=ce).isRect=5===De.length&&De[0][0]===De[4][0]&&De[0][1]===De[4][1]&&De[0][0]===De[1][0]&&De[2][0]===De[3][0]&&De[0][1]===De[3][1]&&De[1][1]===De[2][1]||De[0][1]===De[1][1]&&De[2][1]===De[3][1]&&De[0][0]===De[3][0]&&De[1][0]===De[2][0],De.isRect&&(De.xmin=Math.min(De[0][0],De[2][0]),De.xmax=Math.max(De[0][0],De[2][0]),De.ymin=Math.min(De[0][1],De[2][1]),De.ymax=Math.max(De[0][1],De[2][1])),De;var De}function me(Pe){return function(ze,ce){for(var ge,_e,De=0;De<Pe.length;De++){var He=Pe[De],Ve=He._id,nt=Ve.charAt(0);if(ce.isRect){ge||(ge={});var tt=ce[nt+"min"],at=ce[nt+"max"];void 0!==tt&&void 0!==at&&(ge[Ve]=[U(He,tt),U(He,at)].sort(S))}else _e||(_e={}),_e[Ve]=ce.map(B(He))}ge&&(ze.range=ge),_e&&(ze.lassoPoints=_e)}}function Me(Pe,ze){ze&&(ze.selections=(Pe.layout||{}).selections||[]),Pe.emit("plotly_selected",ze)}function Ie(Pe){Pe.emit("plotly_deselect",null)}Q.exports={reselect:de,prepSelect:function(Pe,ze,ce,ge,_e){var De=!J(ge),He=o(_e),Ve=r(_e),nt=a(_e),tt=n(_e),at=i(_e),dt="drawcircle"===_e,wt="drawline"===_e||dt,bt=ge.gd,_t=bt._fullLayout,Lt=at&&"immediate"===_t.newselection.mode&&De,Ct=_t._zoomlayer,Ot=ge.element.getBoundingClientRect(),Ht=ge.plotinfo,It=N(Ht),Ge=ze-Ot.left,Ze=ce-Ot.top;_t._calcInverseTransform(bt);var Ye,rt,Se,Re,Ke,st,ct,Be=u.apply3DTransform(_t._invTransform)(Ge,Ze),Tt=_t._invScaleX,Et=_t._invScaleY,At=Ge=Be[0],ht=Ze=Be[1],pt="M"+Ge+","+Ze,gt=ge.xaxes[0],Pt=ge.yaxes[0],zt=gt._length,Ut=Pt._length,Nt=Pe.altKey&&!(n(_e)&&nt);K(Pe,bt,ge),He&&(Ye=R([[Ge,Ze]],I.BENDPX));var jt=Ct.selectAll("path.select-outline-"+Ht.id).data([1]),Gt=tt?_t.newshape:_t.newselection,un=tt&&!nt?Gt.fillcolor:"rgba(0,0,0,0)",hn=Gt.line.color||(De?b.contrast(bt._fullLayout.plot_bgcolor):"#7f7f7f");jt.enter().append("path").attr("class","select-outline select-outline-"+Ht.id).style({opacity:tt?Gt.opacity/2:1,"stroke-dasharray":T(Gt.line.dash,Gt.line.width),"stroke-width":Gt.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,hn).call(b.fill,un).attr("fill-rule","evenodd").classed("cursor-move",!!tt).attr("transform",It).attr("d",pt+"Z");var Qt=Ct.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",It).attr("d","M0,0Z"),_n=_t._uid+I.SELECTID,Fn=[],yn=ae(bt,ge.xaxes,ge.yaxes,ge.subplot);Lt&&!Pe.shiftKey&&(ge._clearSubplotSelections=function(){if(De){var pn=gt._id,ln=Pt._id;we(bt,pn,ln,yn);for(var dn=(bt.layout||{}).selections||[],Cn=[],kn=!1,Rn=0;Rn<dn.length;Rn++){var Nn=_t.selections[Rn];Nn.xref!==pn||Nn.yref!==ln?Cn.push(dn[Rn]):kn=!0}kn&&(bt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",bt,{selections:Cn}))}});var pn,on=(pn=ge).plotinfo.fillRangeItems||me(pn.xaxes.concat(pn.yaxes));ge.moveFn=function(pn,ln){ge._clearSubplotSelections&&(ge._clearSubplotSelections(),ge._clearSubplotSelections=void 0),At=Math.max(0,Math.min(zt,Tt*pn+Ge)),ht=Math.max(0,Math.min(Ut,Et*ln+Ze));var dn=Math.abs(At-Ge),Cn=Math.abs(ht-Ze);if(Ve){var kn,Rn,Nn;if(at){var jn=_t.selectdirection;switch(kn="any"===jn?Cn<Math.min(.6*dn,j)?"h":dn<Math.min(.6*Cn,j)?"v":"d":jn){case"h":Rn=dt?Ut/2:0,Nn=Ut;break;case"v":Rn=dt?zt/2:0,Nn=zt}}if(tt)switch(_t.newshape.drawdirection){case"vertical":kn="h",Rn=dt?Ut/2:0,Nn=Ut;break;case"horizontal":kn="v",Rn=dt?zt/2:0,Nn=zt;break;case"ortho":dn<Cn?(kn="h",Rn=Ze,Nn=ht):(kn="v",Rn=Ge,Nn=At);break;default:kn="d"}"h"===kn?((Re=wt?g(dt,[At,Rn],[At,Nn]):[[Ge,Rn],[Ge,Nn],[At,Nn],[At,Rn]]).xmin=wt?At:Math.min(Ge,At),Re.xmax=wt?At:Math.max(Ge,At),Re.ymin=Math.min(Rn,Nn),Re.ymax=Math.max(Rn,Nn),Qt.attr("d","M"+Re.xmin+","+(Ze-j)+"h-4v"+2*j+"h4ZM"+(Re.xmax-1)+","+(Ze-j)+"h4v"+2*j+"h-4Z")):"v"===kn?((Re=wt?g(dt,[Rn,ht],[Nn,ht]):[[Rn,Ze],[Rn,ht],[Nn,ht],[Nn,Ze]]).xmin=Math.min(Rn,Nn),Re.xmax=Math.max(Rn,Nn),Re.ymin=wt?ht:Math.min(Ze,ht),Re.ymax=wt?ht:Math.max(Ze,ht),Qt.attr("d","M"+(Ge-j)+","+Re.ymin+"v-4h"+2*j+"v4ZM"+(Ge-j)+","+(Re.ymax-1)+"v4h"+2*j+"v-4Z")):"d"===kn&&((Re=wt?g(dt,[Ge,Ze],[At,ht]):[[Ge,Ze],[Ge,ht],[At,ht],[At,Ze]]).xmin=Math.min(Ge,At),Re.xmax=Math.max(Ge,At),Re.ymin=Math.min(Ze,ht),Re.ymax=Math.max(Ze,ht),Qt.attr("d","M0,0Z"))}else He&&(Ye.addPt([At,ht]),Re=Ye.filtered);if(ge.selectionDefs&&ge.selectionDefs.length?(Se=ye(ge.mergedPolygons,Re,Nt),Re.subtract=Nt,rt=X(ge.selectionDefs.concat([Re]))):(Se=[Re],rt=H(Re)),f(fe(Se,nt),jt,ge),at){var er,Kn=de(bt,!1),yr=Kn.eventData?Kn.eventData.points.slice():[];Kn=de(bt,!1,rt,yn,ge),rt=Kn.selectionTesters,ct=Kn.eventData,er=Ye?Ye.filtered:he(Se),E.throttle(_n,I.SELECTDELAY,function(){for(var lr=(Fn=Ee(rt,yn)).slice(),$n=0;$n<yr.length;$n++){for(var Gn=yr[$n],ir=!1,Jt=0;Jt<lr.length;Jt++)if(lr[Jt].curveNumber===Gn.curveNumber&&lr[Jt].pointNumber===Gn.pointNumber){ir=!0;break}ir||lr.push(Gn)}lr.length&&(ct||(ct={}),ct.points=lr),on(ct,er),bt.emit("plotly_selecting",ct)})}},ge.clickFn=function(pn,ln){if(Qt.remove(),bt._fullLayout._activeShapeIndex>=0)bt._fullLayout._deactivateShape(bt);else if(!tt){var dn=_t.clickmode;E.done(_n).then(function(){if(E.clear(_n),2===pn){for(jt.remove(),Ke=0;Ke<yn.length;Ke++)(st=yn[Ke])._module.selectPoints(st,!1);if(xe(bt,yn),ne(ge),Ie(bt),yn.length){var Cn=yn[0].xaxis,kn=yn[0].yaxis;if(Cn&&kn){for(var Rn=[],Nn=bt._fullLayout.selections,jn=0;jn<Nn.length;jn++){var er=Nn[jn];er&&(er.xref===Cn._id&&er.yref===kn._id||Rn.push(er))}Rn.length<Nn.length&&(bt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",bt,{selections:Rn}))}}}else dn.indexOf("select")>-1&&Z(ln,bt,ge.xaxes,ge.yaxes,ge.subplot,ge,jt),"event"===dn&&Me(bt,void 0);d.click(bt,ln)}).catch(u.error)}},ge.doneFn=function(){Qt.remove(),E.done(_n).then(function(){E.clear(_n),!Lt&&Re&&ge.selectionDefs&&(Re.subtract=Nt,ge.selectionDefs.push(Re),ge.mergedPolygons.length=0,[].push.apply(ge.mergedPolygons,Se)),(Lt||tt)&&ne(ge,Lt),ge.doneFnCompleted&&ge.doneFnCompleted(Fn),at&&Me(bt,ct)}).catch(u.error)}},clearOutline:x,clearSelectionsCache:ne,selectOnClick:Z}},89827:function(Q,z,e){"use strict";var k=e(50215),A=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,b=e(44467).templatedArray;e(24695),Q.exports=b("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},k.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},k.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},A.color,{editType:"arraydraw"}),width:T({},A.width,{editType:"calc+arraydraw"}),dash:T({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},5627:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(21459),T=e(30477);function b(o){return s(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function d(o){return s(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function s(o,r,n,a,i,c){var h=o/2,f=c;if("pixel"===r){var x=i?T.extractPathCoords(i,c?l.paramIsY:l.paramIsX):[n,a],v=k.aggNums(Math.max,null,x),g=k.aggNums(Math.min,null,x),y=g<0?Math.abs(g)+h:h,p=v>0?v+h:h;return{ppad:h,ppadplus:f?y:p,ppadminus:f?p:y}}return{ppad:h}}function t(o,r,n,a,i){var c="category"===o.type||"multicategory"===o.type?o.r2c:o.d2c;if(void 0!==r)return[c(r),c(n)];if(a){var h,f,x,v,g=1/0,y=-1/0,p=a.match(l.segmentRE);for("date"===o.type&&(c=T.decodeDate(c)),h=0;h<p.length;h++)void 0!==(f=i[p[h].charAt(0)].drawn)&&(!(x=p[h].substr(1).match(l.paramRE))||x.length<f||((v=c(x[f]))<g&&(g=v),v>y&&(y=v)));return y>=g?[g,y]:void 0}}Q.exports=function(o){var n=k.filterVisible(o._fullLayout.shapes);if(n.length&&o._fullData.length)for(var a=0;a<n.length;a++){var i,c,h=n[a];h._extremes={};var f=A.getRefType(h.xref),x=A.getRefType(h.yref);if("paper"!==h.xref&&"domain"!==f){var v="pixel"===h.xsizemode?h.xanchor:h.x0,g="pixel"===h.xsizemode?h.xanchor:h.x1;(c=t(i=A.getFromId(o,h.xref),v,g,h.path,l.paramIsX))&&(h._extremes[i._id]=A.findExtremes(i,c,b(h)))}if("paper"!==h.yref&&"domain"!==x){var y="pixel"===h.ysizemode?h.yanchor:h.y0,p="pixel"===h.ysizemode?h.yanchor:h.y1;(c=t(i=A.getFromId(o,h.yref),y,p,h.path,l.paramIsY))&&(h._extremes[i._id]=A.findExtremes(i,c,d(h)))}}}},21459:function(Q){"use strict";Q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(85501),T=e(89827),b=e(30477);function d(s,t,o){function r(P,I){return k.coerce(s,t,T,P,I)}if(r("visible")){var n=r("path"),a="path"!==r("type",n?"path":"rect");a&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var i=r("xsizemode"),c=r("ysizemode"),h=["x","y"],f=0;f<2;f++){var x,v,g,y=h[f],p=y+"anchor",m="x"===y?i:c,w={_fullLayout:o},u=A.coerceRef(s,t,w,y,void 0,"paper");if("range"===A.getRefType(u)?((x=A.getFromId(w,u))._shapeIndices.push(t._index),g=b.rangeToShapePosition(x),v=b.shapePositionToRange(x)):v=g=k.identity,a){var S=y+"0",_=y+"1",E=s[S],L=s[_];s[S]=v(s[S],!0),s[_]=v(s[_],!0),"pixel"===m?(r(S,0),r(_,10)):(A.coercePosition(t,w,r,u,S,.25),A.coercePosition(t,w,r,u,_,.75)),t[S]=g(t[S]),t[_]=g(t[_]),s[S]=E,s[_]=L}if("pixel"===m){var C=s[p];s[p]=v(s[p],!0),A.coercePosition(t,w,r,u,p,.25),t[p]=g(t[p]),s[p]=C}}a&&k.noneOrAll(s,t,["x0","x1","y0","y1"])}}Q.exports=function(s,t){l(s,t,{name:"shapes",handleItemDefaults:d})}},42359:function(Q,z,e){"use strict";var k=e(71828).strTranslate,A=e(28569),l=e(64505),T=l.drawMode,b=l.selectMode,d=e(73972),s=e(7901),t=e(89995),o=t.i000,r=t.i090,n=t.i180,a=t.i270,i=e(51873).clearOutlineControllers,c=e(60165),h=c.pointsOnRectangle,f=c.pointsOnEllipse,x=c.writePaths,v=e(90551),g=e(35855);function y(p,m){var w,u,S,L=p.length;return u=p[w=(m+1)%L][1],S=p[w][2],u===p[m][1]&&S===p[m][2]&&(u=p[w=(m+2)%L][1],S=p[w][2]),[w,u,S]}Q.exports=function p(m,w,u,S){S||(S=0);var _=u.gd;function E(){p(m,w,u,S++),f(m[0])&&L({redrawing:!0})}function L(re){var ae={};void 0!==u.isActiveShape&&(u.isActiveShape=!1,ae=v(w,u)),void 0!==u.isActiveSelection&&(u.isActiveSelection=!1,ae=g(w,u),_._fullLayout._reselect=!0),Object.keys(ae).length&&d.call((re||{}).redrawing?"relayout":"_guiRelayout",_,ae)}var C,P,I,j,R,H=_._fullLayout._zoomlayer,F=u.dragmode,U=T(F),B=b(F);function N(re){I=+re.srcElement.getAttribute("data-i"),j=+re.srcElement.getAttribute("data-j"),C[I][j].moveFn=J}function J(re,ae){if(m.length){var le=R[I][j][1],pe=R[I][j][2],xe=m[I],ye=xe.length;if(h(xe)){var se=re,fe=ae;u.isActiveSelection&&(y(xe,j)[1]===xe[j][1]?fe=0:se=0);for(var Ee=0;Ee<ye;Ee++)if(Ee!==j){var de=xe[Ee];de[1]===xe[j][1]&&(de[1]=le+se),de[2]===xe[j][2]&&(de[2]=pe+fe)}if(xe[j][1]=le+se,xe[j][2]=pe+fe,!h(xe))for(var we=0;we<ye;we++)for(var ke=0;ke<xe[we].length;ke++)xe[we][ke]=R[I][we][ke]}else xe[j][1]=le+re,xe[j][2]=pe+ae;E()}}function Z(){L()}function V(re,ae){if(2===re){I=+ae.srcElement.getAttribute("data-i"),j=+ae.srcElement.getAttribute("data-j");var le=m[I];h(le)||f(le)||function(){if(m.length&&m[I]&&m[I].length){for(var pe=[],xe=0;xe<m[I].length;xe++)xe!==j&&pe.push(m[I][xe]);pe.length>1&&(2!==pe.length||"Z"!==pe[1][0])&&(0===j&&(pe[0][0]="M"),m[I]=pe,E(),L())}}()}}function W(re,ae){(function(le,pe){if(m.length)for(var xe=0;xe<m.length;xe++)for(var ye=0;ye<m[xe].length;ye++)for(var se=0;se+2<m[xe][ye].length;se+=2)m[xe][ye][se+1]=R[xe][ye][se+1]+le,m[xe][ye][se+2]=R[xe][ye][se+2]+pe})(re,ae),E()}(U||B)&&(_._fullLayout._outlining=!0),i(_),w.attr("d",x(m)),S||!u.isActiveShape&&!u.isActiveSelection||(R=function(re,ae){for(var le=0;le<ae.length;le++){var pe=ae[le];re[le]=[];for(var xe=0;xe<pe.length;xe++){re[le][xe]=[];for(var ye=0;ye<pe[xe].length;ye++)re[le][xe][ye]=pe[xe][ye]}}return re}([],m),function(re){C=[];for(var ae=0;ae<m.length;ae++){var le=m[ae],pe=h(le),xe=!pe&&f(le);C[ae]=[];for(var ye=le.length,se=0;se<ye;se++)if("Z"!==le[se][0]&&(!xe||se===o||se===r||se===n||se===a)){var fe,Ee=pe&&u.isActiveSelection;Ee&&(fe=y(le,se));var de=le[se][1],we=le[se][2],ke=re.append(Ee?"rect":"circle").attr("data-i",ae).attr("data-j",se).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ee){var Te=fe[1]-de,$=fe[2]-we,oe=$?5:Math.max(Math.min(25,Math.abs(Te)-5),5),he=Te?5:Math.max(Math.min(25,Math.abs($)-5),5);ke.classed($?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",oe).attr("height",he).attr("x",de-oe/2).attr("y",we-he/2).attr("transform",k(Te/2,$/2))}else ke.classed("cursor-grab",!0).attr("r",5).attr("cx",de).attr("cy",we);C[ae][se]={element:ke.node(),gd:_,prepFn:N,doneFn:Z,clickFn:V},A.init(C[ae][se])}}}(H.append("g").attr("class","outline-controllers")),P=[],m.length&&(P[0]={element:w[0][0],gd:_,prepFn:function X(re){(I=+re.srcElement.getAttribute("data-i"))||(I=0),P[I].moveFn=W},doneFn:function K(){L()},clickFn:function ne(re){2===re&&function(ae){if(b(ae._fullLayout.dragmode)){i(ae);var le=ae._fullLayout._activeSelectionIndex,pe=(ae.layout||{}).selections||[];if(le<pe.length){for(var xe=[],ye=0;ye<pe.length;ye++)ye!==le&&xe.push(pe[ye]);delete ae._fullLayout._activeSelectionIndex;var se=ae._fullLayout.selections[le];ae._fullLayout._deselect={xref:se.xref,yref:se.yref},d.call("_guiRelayout",ae,{selections:xe})}}}(_)}},A.init(P[0])))}},34031:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(89298),T=e(60165).readPaths,b=e(42359),d=e(51873).clearOutlineControllers,s=e(7901),t=e(91424),o=e(44467).arrayEditor,r=e(28569),n=e(6964),a=e(21459),i=e(30477),c=i.getPathString;function h(m){var w=m._fullLayout;for(var u in w._shapeUpperLayer.selectAll("path").remove(),w._shapeLowerLayer.selectAll("path").remove(),w._plots){var S=w._plots[u].shapelayer;S&&S.selectAll("path").remove()}for(var _=0;_<w.shapes.length;_++)w.shapes[_].visible&&v(m,_)}function f(m){return!!m._fullLayout._outlining}function x(m){return!m._context.edits.shapePosition}function v(m,w){m._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+w+'"]').remove();var u=i.makeShapesOptionsAndPlotinfo(m,w),S=u.options,_=u.plotinfo;S._input&&!1!==S.visible&&function E(L){var C=c(m,S),P={"data-index":w,"fill-rule":S.fillrule,d:C},I=S.opacity,j=S.fillcolor,R=S.line.width?S.line.color:"rgba(0,0,0,0)",H=S.line.width,F=S.line.dash;H||!0!==S.editable||(H=5,F="solid");var U="Z"!==C[C.length-1],B=x(m)&&S.editable&&m._fullLayout._activeShapeIndex===w;B&&(j=U?"rgba(0,0,0,0)":m._fullLayout.activeshape.fillcolor,I=m._fullLayout.activeshape.opacity);var N,J=L.append("path").attr(P).style("opacity",I).call(s.stroke,R).call(s.fill,j).call(t.dashLine,F,H);if(g(J,m,S),(B||m._context.edits.shapePosition)&&(N=o(m.layout,"shapes",S)),B){J.style({cursor:"move"});var Z={element:J.node(),plotinfo:_,gd:m,editHelpers:N,isActiveShape:!0},V=T(C,m);b(V,J,Z)}else m._context.edits.shapePosition?function(W,X,K,ne,re,ae){var le,pe,xe,ye,se,fe,Ee,de,we,ke,Te,$,oe,he,me,Me,Ie="pixel"===K.xsizemode,Pe="pixel"===K.ysizemode,ze="line"===K.type,ce="path"===K.type,ge=ae.modifyItem,_e=l.getFromId(W,K.xref),De=l.getRefType(K.xref),He=l.getFromId(W,K.yref),Ve=l.getRefType(K.yref),nt=i.getDataToPixel(W,_e,!1,De),tt=i.getDataToPixel(W,He,!0,Ve),at=i.getPixelToData(W,_e,!1,De),dt=i.getPixelToData(W,He,!0,Ve),wt=ze?function(){var Ge=Math.max(K.line.width,10),Ze=re.append("g").attr("data-index",ne);Ze.append("path").attr("d",X.attr("d")).style({cursor:"move","stroke-width":Ge,"stroke-opacity":"0"});var Be={"fill-opacity":"0"},Ye=Math.max(Ge/2,10);return Ze.append("circle").attr({"data-line-point":"start-point",cx:Ie?nt(K.xanchor)+K.x0:nt(K.x0),cy:Pe?tt(K.yanchor)-K.y0:tt(K.y0),r:Ye}).style(Be).classed("cursor-grab",!0),Ze.append("circle").attr({"data-line-point":"end-point",cx:Ie?nt(K.xanchor)+K.x1:nt(K.x1),cy:Pe?tt(K.yanchor)-K.y1:tt(K.y1),r:Ye}).style(Be).classed("cursor-grab",!0),Ze}():X,bt={element:wt.node(),gd:W,prepFn:function(It){var Ge,Ze,Be,Ye,rt,Se,Re,Ke;f(W)||(Ie&&(se=nt(K.xanchor)),Pe&&(fe=tt(K.yanchor)),"path"===K.type?me=K.path:(le=Ie?K.x0:nt(K.x0),pe=Pe?K.y0:tt(K.y0),xe=Ie?K.x1:nt(K.x1),ye=Pe?K.y1:tt(K.y1)),le<xe?(we=le,oe="x0",ke=xe,he="x1"):(we=xe,oe="x1",ke=le,he="x0"),!Pe&&pe<ye||Pe&&pe>ye?(Ee=pe,Te="y0",de=ye,$="y1"):(Ee=ye,Te="y1",de=pe,$="y0"),_t(It),Ot(re,K),Ge=X,rt=(Ze=K).yref,Se=l.getFromId(Be=W,Ye=Ze.xref),Re=l.getFromId(Be,rt),Ke="","paper"===Ye||Se.autorange||(Ke+=Ye),"paper"===rt||Re.autorange||(Ke+=rt),t.setClipUrl(Ge,Ke?"clip"+Be._fullLayout._uid+Ke:null,Be),bt.moveFn="move"===Me?Lt:Ct,bt.altKey=It.altKey)},doneFn:function(){f(W)||(n(X),Ht(re),g(X,W,K),k.call("_guiRelayout",W,ae.getUpdateObj()))},clickFn:function(){f(W)||Ht(re)}};function _t(It){if(f(W))Me=null;else if(ze)Me="path"===It.target.tagName?"move":"start-point"===It.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ge=bt.element.getBoundingClientRect(),Ze=Ge.right-Ge.left,Be=Ge.bottom-Ge.top,Se=!ce&&Ze>10&&Be>10&&!It.shiftKey?r.getCursor((It.clientX-Ge.left)/Ze,1-(It.clientY-Ge.top)/Be):"move";n(X,Se),Me=Se.split("-")[0]}}function Lt(It,Ge){if("path"===K.type){var Ze=function(rt){return rt},Be=Ze,Ye=Ze;Ie?ge("xanchor",K.xanchor=at(se+It)):(Be=function(rt){return at(nt(rt)+It)},_e&&"date"===_e.type&&(Be=i.encodeDate(Be))),Pe?ge("yanchor",K.yanchor=dt(fe+Ge)):(Ye=function(rt){return dt(tt(rt)+Ge)},He&&"date"===He.type&&(Ye=i.encodeDate(Ye))),ge("path",K.path=y(me,Be,Ye))}else Ie?ge("xanchor",K.xanchor=at(se+It)):(ge("x0",K.x0=at(le+It)),ge("x1",K.x1=at(xe+It))),Pe?ge("yanchor",K.yanchor=dt(fe+Ge)):(ge("y0",K.y0=dt(pe+Ge)),ge("y1",K.y1=dt(ye+Ge)));X.attr("d",c(W,K)),Ot(re,K)}function Ct(It,Ge){if(ce){var Ze=function(zt){return zt},Be=Ze,Ye=Ze;Ie?ge("xanchor",K.xanchor=at(se+It)):(Be=function(zt){return at(nt(zt)+It)},_e&&"date"===_e.type&&(Be=i.encodeDate(Be))),Pe?ge("yanchor",K.yanchor=dt(fe+Ge)):(Ye=function(zt){return dt(tt(zt)+Ge)},He&&"date"===He.type&&(Ye=i.encodeDate(Ye))),ge("path",K.path=y(me,Be,Ye))}else if(ze){if("resize-over-start-point"===Me){var rt=le+It,Se=Pe?pe-Ge:pe+Ge;ge("x0",K.x0=Ie?rt:at(rt)),ge("y0",K.y0=Pe?Se:dt(Se))}else if("resize-over-end-point"===Me){var Re=xe+It,Ke=Pe?ye-Ge:ye+Ge;ge("x1",K.x1=Ie?Re:at(Re)),ge("y1",K.y1=Pe?Ke:dt(Ke))}}else{var st=function(zt){return-1!==Me.indexOf(zt)},ct=st("n"),Tt=st("s"),Et=st("w"),At=st("e"),ht=ct?Ee+Ge:Ee,pt=Tt?de+Ge:de,gt=Et?we+It:we,Pt=At?ke+It:ke;Pe&&(ct&&(ht=Ee-Ge),Tt&&(pt=de-Ge)),(!Pe&&pt-ht>10||Pe&&ht-pt>10)&&(ge(Te,K[Te]=Pe?ht:dt(ht)),ge($,K[$]=Pe?pt:dt(pt))),Pt-gt>10&&(ge(oe,K[oe]=Ie?gt:at(gt)),ge(he,K[he]=Ie?Pt:at(Pt)))}X.attr("d",c(W,K)),Ot(re,K)}function Ot(It,Ge){(Ie||Pe)&&function(){var Ze="path"!==Ge.type,Be=It.selectAll(".visual-cue").data([0]);Be.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ye=nt(Ie?Ge.xanchor:A.midRange(Ze?[Ge.x0,Ge.x1]:i.extractPathCoords(Ge.path,a.paramIsX))),rt=tt(Pe?Ge.yanchor:A.midRange(Ze?[Ge.y0,Ge.y1]:i.extractPathCoords(Ge.path,a.paramIsY)));Ye=i.roundPositionForSharpStrokeRendering(Ye,1),rt=i.roundPositionForSharpStrokeRendering(rt,1),Be.attr("d",Ie&&Pe?"M"+(Ye-1-1)+","+(rt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ie?"M"+(Ye-1-1)+","+(rt-9-1)+"v18 h2 v-18 Z":"M"+(Ye-9-1)+","+(rt-1-1)+"h18 v2 h-18 Z")}()}function Ht(It){It.selectAll(".visual-cue").remove()}r.init(bt),wt.node().onmousemove=_t}(m,J,S,w,L,N):!0===S.editable&&J.style("pointer-events",U||s.opacity(j)*I<=.5?"stroke":"all");J.node().addEventListener("click",function(){return function(W,X){if(x(W)){var K=+X.node().getAttribute("data-index");if(K>=0){if(K===W._fullLayout._activeShapeIndex)return void p(W);W._fullLayout._activeShapeIndex=K,W._fullLayout._deactivateShape=p,h(W)}}}(m,J)})}("below"!==S.layer?m._fullLayout._shapeUpperLayer:"paper"===S.xref||"paper"===S.yref?m._fullLayout._shapeLowerLayer:_._hadPlotinfo?(_.mainplotinfo||_).shapelayer:m._fullLayout._shapeLowerLayer)}function g(m,w,u){var S=(u.xref+u.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");t.setClipUrl(m,S?"clip"+w._fullLayout._uid+S:null,w)}function y(m,w,u){return m.replace(a.segmentRE,function(S){var _=0,E=S.charAt(0),L=a.paramIsX[E],C=a.paramIsY[E],P=a.numParams[E];return E+S.substr(1).replace(a.paramRE,function(I){return _>=P||(L[_]?I=w(I):C[_]&&(I=u(I)),_++),I})})}function p(m){x(m)&&m._fullLayout._activeShapeIndex>=0&&(d(m),delete m._fullLayout._activeShapeIndex,h(m))}Q.exports={draw:h,drawOne:v,eraseActiveShape:function(m){if(x(m)){d(m);var w=m._fullLayout._activeShapeIndex,u=(m.layout||{}).shapes||[];if(w<u.length){for(var S=[],_=0;_<u.length;_++)_!==w&&S.push(u[_]);delete m._fullLayout._activeShapeIndex,k.call("_guiRelayout",m,{shapes:S})}}}}},29241:function(Q,z,e){"use strict";var k=e(79952).P,A=e(1426).extendFlat;Q.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:A({},k,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function(Q){"use strict";Q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(Q,z,e){"use strict";var k=e(7901);Q.exports=function(A,l,T){T("newshape.drawdirection"),T("newshape.layer"),T("newshape.fillcolor"),T("newshape.fillrule"),T("newshape.opacity"),T("newshape.line.width")&&(T("newshape.line.color",k.contrast((A||{}).plot_bgcolor||"#FFF")),T("newshape.line.dash")),T("activeshape.fillcolor"),T("activeshape.opacity")}},60165:function(Q,z,e){"use strict";var k=e(95616),A=e(89995),l=A.CIRCLE_SIDES,T=A.SQRT2,b=e(75549),d=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function r(a,i){return Math.abs(a-i)<=1e-6}function n(a,i){var c=i[1]-a[1],h=i[2]-a[2];return Math.sqrt(c*c+h*h)}z.writePaths=function(a){var i=a.length;if(!i)return"M0,0Z";for(var c="",h=0;h<i;h++)for(var f=a[h].length,x=0;x<f;x++){var v=a[h][x][0];if("Z"===v)c+="Z";else for(var g=a[h][x].length,y=0;y<g;y++){var p=y;"Q"===v||"S"===v?p=o[y]:"C"===v&&(p=t[y]),c+=a[h][x][p],y>0&&y<g-1&&(c+=",")}}return c},z.readPaths=function(a,i,c,h){var f,x,v,g=k(a),y=[],p=-1,m=0,w=0,u=function(){x=m,v=w};u();for(var S=0;S<g.length;S++){var P=[],I=g[S][0],j=I;switch(I){case"M":y[++p]=[],P.push([j,m=+g[S][1],w=+g[S][2]]),u();break;case"Q":case"S":P.push([j,m=+g[S][3],w=+g[S][4],+g[S][1],+g[S][2]]);break;case"C":P.push([j,m=+g[S][5],w=+g[S][6],+g[S][1],+g[S][2],+g[S][3],+g[S][4]]);break;case"T":case"L":P.push([j,m=+g[S][1],w=+g[S][2]]);break;case"H":P.push([j="L",m=+g[S][1],w]);break;case"V":P.push([j="L",m,w=+g[S][1]]);break;case"A":j="L";var R=+g[S][1],H=+g[S][2];+g[S][4]||(R=-R,H=-H);var F=m-R,U=w;for(f=1;f<=l/2;f++){var B=2*Math.PI*f/l;P.push([j,F+R*Math.cos(B),U+H*Math.sin(B)])}break;case"Z":m===x&&w===v||P.push([j,m=x,w=v])}for(var N=(c||{}).domain,J=i._fullLayout._size,Z=c&&"pixel"===c.xsizemode,V=c&&"pixel"===c.ysizemode,W=!1===h,X=0;X<P.length;X++){for(f=0;f+2<7;f+=2){var K=P[X][f+1],ne=P[X][f+2];void 0!==K&&void 0!==ne&&(m=K,w=ne,c&&(c.xaxis&&c.xaxis.p2r?(W&&(K-=c.xaxis._offset),K=Z?s(c.xaxis,c.xanchor)+K:d(c.xaxis,K)):(W&&(K-=J.l),N?K=N.x[0]+K/J.w:K/=J.w),c.yaxis&&c.yaxis.p2r?(W&&(ne-=c.yaxis._offset),ne=V?s(c.yaxis,c.yanchor)-ne:d(c.yaxis,ne)):(W&&(ne-=J.t),ne=N?N.y[1]-ne/J.h:1-ne/J.h)),P[X][f+1]=K,P[X][f+2]=ne)}y[p].push(P[X].slice())}}return y},z.pointsOnRectangle=function(a){if(5!==a.length)return!1;for(var i=1;i<3;i++)if(!r(a[0][i]-a[1][i],a[3][i]-a[2][i])||!r(a[0][i]-a[3][i],a[1][i]-a[2][i]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},z.pointsOnEllipse=function(a){var i=a.length;if(i!==l+1)return!1;i=l;for(var c=0;c<i;c++){var h=(2*i-c)%i,f=(i/2+h)%i;if(!r(n(a[c],a[(i/2+c)%i]),n(a[h],a[f])))return!1}return!0},z.handleEllipse=function(a,i,c){if(!a)return[i,c];var h=z.ellipseOver({x0:i[0],y0:i[1],x1:c[0],y1:c[1]}),f=(h.x1+h.x0)/2,x=(h.y1+h.y0)/2,v=(h.x1-h.x0)/2,g=(h.y1-h.y0)/2;v||(v=g/=T),g||(g=v/=T);for(var y=[],p=0;p<l;p++){var m=2*p*Math.PI/l;y.push([f+v*Math.cos(m),x+g*Math.sin(m)])}return y},z.ellipseOver=function(a){var i=a.x0,c=a.y0,h=a.x1,f=a.y1,x=h-i,v=f-c,g=((i-=x)+h)/2,y=((c-=v)+f)/2;return{x0:g-(x*=T),y0:y-(v*=T),x1:g+x,y1:y+v}},z.fixDatesForPaths=function(a,i,c){var h="date"===i.type,f="date"===c.type;if(!h&&!f)return a;for(var x=0;x<a.length;x++)for(var v=0;v<a[x].length;v++)for(var g=0;g+2<a[x][v].length;g+=2)h&&(a[x][v][g+1]=a[x][v][g+1].replace(" ","_")),f&&(a[x][v][g+2]=a[x][v][g+2].replace(" ","_"));return a}},90551:function(Q,z,e){"use strict";var k=e(64505),A=k.drawMode,l=k.openMode,T=e(89995),b=T.i000,d=T.i090,s=T.i180,t=T.i270,o=T.cos45,r=T.sin45,n=e(75549),a=n.p2r,i=n.r2p,c=e(51873).clearOutline,h=e(60165),f=h.readPaths,x=h.writePaths,v=h.ellipseOver,g=h.fixDatesForPaths;Q.exports=function(y,p){if(y.length){var m=y[0][0];if(m){var w=m.getAttribute("d"),u=p.gd,S=u._fullLayout.newshape,_=p.plotinfo,E=_.xaxis,L=_.yaxis,C=!!_.domain||!_.xaxis,P=!!_.domain||!_.yaxis,I=p.isActiveShape,j=p.dragmode,R=(u.layout||{}).shapes||[];if(!A(j)&&void 0!==I){var H=u._fullLayout._activeShapeIndex;if(H<R.length)switch(u._fullLayout.shapes[H].type){case"rect":j="drawrect";break;case"circle":j="drawcircle";break;case"line":j="drawline";break;case"path":var F=R[H].path||"";j="Z"===F[F.length-1]?"drawclosedpath":"drawopenpath"}}var U,B=l(j),N=f(w,u,_,I),J={editable:!0,xref:C?"paper":E._id,yref:P?"paper":L._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};if(B||(J.fillcolor=S.fillcolor,J.fillrule=S.fillrule),1===N.length&&(U=N[0]),U&&5===U.length&&"drawrect"===j)J.type="rect",J.x0=U[0][1],J.y0=U[0][2],J.x1=U[2][1],J.y1=U[2][2];else if(U&&"drawline"===j)J.type="line",J.x0=U[0][1],J.y0=U[0][2],J.x1=U[1][1],J.y1=U[1][2];else if(U&&"drawcircle"===j){J.type="circle";var Z=U[b][1],V=U[d][1],W=U[s][1],X=U[t][1],K=U[b][2],ne=U[d][2],re=U[s][2],ae=U[t][2],le=_.xaxis&&("date"===_.xaxis.type||"log"===_.xaxis.type),pe=_.yaxis&&("date"===_.yaxis.type||"log"===_.yaxis.type);le&&(Z=i(_.xaxis,Z),V=i(_.xaxis,V),W=i(_.xaxis,W),X=i(_.xaxis,X)),pe&&(K=i(_.yaxis,K),ne=i(_.yaxis,ne),re=i(_.yaxis,re),ae=i(_.yaxis,ae));var xe=(V+X)/2,ye=(K+re)/2,se=v({x0:xe,y0:ye,x1:xe+(X-V+W-Z)/2*o,y1:ye+(ae-ne+re-K)/2*r});le&&(se.x0=a(_.xaxis,se.x0),se.x1=a(_.xaxis,se.x1)),pe&&(se.y0=a(_.yaxis,se.y0),se.y1=a(_.yaxis,se.y1)),J.x0=se.x0,J.y0=se.y0,J.x1=se.x1,J.y1=se.y1}else J.type="path",E&&L&&g(N,E,L),J.path=x(N),U=null;c(u);for(var fe=p.editHelpers,Ee=(fe||{}).modifyItem,de=[],we=0;we<R.length;we++){var ke=u._fullLayout.shapes[we];if(de[we]=ke._input,void 0!==I&&we===u._fullLayout._activeShapeIndex){var Te=J;switch(ke.type){case"line":case"rect":case"circle":Ee("x0",Te.x0),Ee("x1",Te.x1),Ee("y0",Te.y0),Ee("y1",Te.y1);break;case"path":Ee("path",Te.path)}}}return void 0===I?(de.push(J),de):fe?fe.getUpdateObj():{}}}}},51873:function(Q){"use strict";Q.exports={clearOutlineControllers:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),z._fullLayout._outlining=!1}}},30477:function(Q,z,e){"use strict";var k=e(21459),A=e(71828),l=e(89298);z.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(b){return b}},z.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(b){return b}},z.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},z.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},z.extractPathCoords=function(T,b,d){var s=[];return T.match(k.segmentRE).forEach(function(t){var o=b[t.charAt(0)].drawn;if(void 0!==o){var r=t.substr(1).match(k.paramRE);if(r&&!(r.length<o)){var n=r[o],a=d?n:A.cleanNumber(n);s.push(a)}}}),s},z.getDataToPixel=function(T,b,d,s){var t,o=T._fullLayout._size;if(b)if("domain"===s)t=function(n){return b._length*(d?1-n:n)+b._offset};else{var r=z.shapePositionToRange(b);t=function(n){return b._offset+b.r2p(r(n,!0))},"date"===b.type&&(t=z.decodeDate(t))}else t=d?function(n){return o.t+o.h*(1-n)}:function(n){return o.l+o.w*n};return t},z.getPixelToData=function(T,b,d,s){var t,o=T._fullLayout._size;if(b)if("domain"===s)t=function(n){var a=(n-b._offset)/b._length;return d?1-a:a};else{var r=z.rangeToShapePosition(b);t=function(n){return r(b.p2r(n-b._offset))}}else t=d?function(n){return 1-(n-o.t)/o.h}:function(n){return(n-o.l)/o.w};return t},z.roundPositionForSharpStrokeRendering=function(T,b){var d=1===Math.round(b%2),s=Math.round(T);return d?s+.5:s},z.makeShapesOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&"paper"!==d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&"paper"!==d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),s.xsizemode=d.xsizemode,s.ysizemode=d.ysizemode,s.xanchor=d.xanchor,s.yanchor=d.yanchor,{options:d,plotinfo:s}},z.makeSelectionsOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:s}},z.getPathString=function(T,b){var d,s,t,o,r,n,a,i,L,C,P,j,R,H,F,c=b.type,h=l.getRefType(b.xref),f=l.getRefType(b.yref),x=l.getFromId(T,b.xref),v=l.getFromId(T,b.yref),g=T._fullLayout._size;if(x?"domain"===h?s=function(L){return x._offset+x._length*L}:(d=z.shapePositionToRange(x),s=function(L){return x._offset+x.r2p(d(L,!0))}):s=function(L){return g.l+g.w*L},v?"domain"===f?o=function(L){return v._offset+v._length*(1-L)}:(t=z.shapePositionToRange(v),o=function(L){return v._offset+v.r2p(t(L,!0))}):o=function(L){return g.t+g.h*(1-L)},"path"===c)return x&&"date"===x.type&&(s=z.decodeDate(s)),v&&"date"===v.type&&(o=z.decodeDate(o)),C=s,P=o,j=(L=b).xsizemode,R=L.ysizemode,H=L.xanchor,F=L.yanchor,L.path.replace(k.segmentRE,function(U){var B=0,N=U.charAt(0),J=k.paramIsX[N],Z=k.paramIsY[N],V=k.numParams[N],W=U.substr(1).replace(k.paramRE,function(X){return J[B]?X="pixel"===j?C(H)+Number(X):C(X):Z[B]&&(X="pixel"===R?P(F)-Number(X):P(X)),++B>V&&(X="X"),X});return B>V&&(W=W.replace(/[\s,]*X.*/,""),A.log("Ignoring extra params in segment "+U)),N+W});if("pixel"===b.xsizemode){var y=s(b.xanchor);r=y+b.x0,n=y+b.x1}else r=s(b.x0),n=s(b.x1);if("pixel"===b.ysizemode){var p=o(b.yanchor);a=p-b.y0,i=p-b.y1}else a=o(b.y0),i=o(b.y1);if("line"===c)return"M"+r+","+a+"L"+n+","+i;if("rect"===c)return"M"+r+","+a+"H"+n+"V"+i+"H"+r+"Z";var m=(r+n)/2,w=(a+i)/2,u=Math.abs(m-r),S=Math.abs(w-a),_="A"+u+","+S,E=m+u+","+w;return"M"+E+_+" 0 1,1 "+m+","+(w-S)+_+" 0 0,1 "+E+"Z"}},89853:function(Q,z,e){"use strict";var k=e(34031);Q.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:k.draw,drawOne:k.drawOne}},75067:function(Q,z,e){"use strict";var k=e(41940),A=e(35025),l=e(1426).extendDeepAll,T=e(30962).overrideAll,b=e(85594),d=e(44467).templatedArray,s=e(98292),t=d("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Q.exports=T(d("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(A({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:k({})},font:k({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function(Q){"use strict";Q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(Q,z,e){"use strict";var k=e(71828),A=e(85501),l=e(75067),T=e(98292).name,b=l.steps;function d(t,o,r){function n(f,x){return k.coerce(t,o,l,f,x)}for(var a=A(t,o,{name:"steps",handleItemDefaults:s}),i=0,c=0;c<a.length;c++)a[c].visible&&i++;if(i<2?o.visible=!1:n("visible")){o._stepCount=i;var h=o._visibleSteps=k.filterVisible(a);(a[n("active")]||{}).visible||(o.active=h[0]._index),n("x"),n("y"),k.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),k.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),k.coerceFont(n,"currentvalue.font",o.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,o){function r(a,i){return k.coerce(t,o,b,a,i)}if("skip"===t.method||Array.isArray(t.args)?r("visible"):o.visible=!1){r("method"),r("args");var n=r("label","step-"+o._index);r("value",n),r("execute")}}Q.exports=function(t,o){A(t,o,{name:T,handleItemDefaults:d})}},44504:function(Q,z,e){"use strict";var k=e(39898),A=e(74875),l=e(7901),T=e(91424),b=e(71828),d=b.strTranslate,s=e(63893),t=e(44467).arrayEditor,o=e(98292),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR;function c(P){return o.autoMarginIdRoot+P._index}function h(P){return P._index}function f(P,I){var j=T.tester.selectAll("g."+o.labelGroupClass).data(I._visibleSteps);j.enter().append("g").classed(o.labelGroupClass,!0);var R=0,H=0;j.each(function(X){var K=g(k.select(this),{step:X},I).node();if(K){var ne=T.bBox(K);H=Math.max(H,ne.height),R=Math.max(R,ne.width)}}),j.remove();var F=I._dims={};F.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var U=P._fullLayout._size;if(F.lx=U.l+U.w*I.x,F.ly=U.t+U.h*(1-I.y),F.outerLength="fraction"===I.lenmode?Math.round(U.w*I.len):I.len,F.inputAreaStart=0,F.inputAreaLength=Math.round(F.outerLength-I.pad.l-I.pad.r),F.labelStride=Math.max(1,Math.ceil((R+o.labelPadding)/((F.inputAreaLength-2*o.stepInset)/(I._stepCount-1)))),F.labelHeight=H,F.currentValueMaxWidth=0,F.currentValueHeight=0,F.currentValueTotalHeight=0,F.currentValueMaxLines=1,I.currentvalue.visible){var J=T.tester.append("g");j.each(function(X){var K=x(J,I,X.label),ne=K.node()&&T.bBox(K.node())||{width:0,height:0},re=s.lineCount(K);F.currentValueMaxWidth=Math.max(F.currentValueMaxWidth,Math.ceil(ne.width)),F.currentValueHeight=Math.max(F.currentValueHeight,Math.ceil(ne.height)),F.currentValueMaxLines=Math.max(F.currentValueMaxLines,re)}),F.currentValueTotalHeight=F.currentValueHeight+I.currentvalue.offset,J.remove()}F.height=F.currentValueTotalHeight+o.tickOffset+I.ticklen+o.labelOffset+F.labelHeight+I.pad.t+I.pad.b;var Z="left";b.isRightAnchor(I)&&(F.lx-=F.outerLength,Z="right"),b.isCenterAnchor(I)&&(F.lx-=F.outerLength/2,Z="center");var V="top";b.isBottomAnchor(I)&&(F.ly-=F.height,V="bottom"),b.isMiddleAnchor(I)&&(F.ly-=F.height/2,V="middle"),F.outerLength=Math.ceil(F.outerLength),F.height=Math.ceil(F.height),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly);var W={y:I.y,b:F.height*i[V],t:F.height*a[V]};"fraction"===I.lenmode?(W.l=0,W.xl=I.x-I.len*a[Z],W.r=0,W.xr=I.x+I.len*i[Z]):(W.x=I.x,W.l=F.outerLength*a[Z],W.r=F.outerLength*i[Z]),A.autoMargin(P,c(I),W)}function x(P,I,j){if(I.currentvalue.visible){var R,H,F=I._dims;switch(I.currentvalue.xanchor){case"right":R=F.inputAreaLength-o.currentValueInset-F.currentValueMaxWidth,H="left";break;case"center":R=.5*F.inputAreaLength,H="middle";break;default:R=o.currentValueInset,H="left"}var U=b.ensureSingle(P,"text",o.labelClass,function(W){W.attr({"text-anchor":H,"data-notex":1})}),B=I.currentvalue.prefix?I.currentvalue.prefix:"";if("string"==typeof j)B+=j;else{var N=I.steps[I.active].label,J=I._gd._fullLayout._meta;J&&(N=b.templateString(N,J)),B+=N}I.currentvalue.suffix&&(B+=I.currentvalue.suffix),U.call(T.font,I.currentvalue.font).text(B).call(s.convertToTspans,I._gd);var Z=s.lineCount(U);return s.positionText(U,R,(F.currentValueMaxLines+1-Z)*I.currentvalue.font.size*n),U}}function v(P,I,j){b.ensureSingle(P,"rect",o.gripRectClass,function(R){R.call(w,I,P,j).style("pointer-events","all")}).attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(l.stroke,j.bordercolor).call(l.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px")}function g(P,I,j){var R=b.ensureSingle(P,"text",o.labelClass,function(U){U.attr({"text-anchor":"middle","data-notex":1})}),H=I.step.label,F=j._gd._fullLayout._meta;return F&&(H=b.templateString(H,F)),R.call(T.font,j.font).text(H).call(s.convertToTspans,j._gd),R}function y(P,I){var j=b.ensureSingle(P,"g",o.labelsClass),R=I._dims,H=j.selectAll("g."+o.labelGroupClass).data(R.labelSteps);H.enter().append("g").classed(o.labelGroupClass,!0),H.exit().remove(),H.each(function(F){var U=k.select(this);U.call(g,F,I),T.setTranslate(U,_(I,F.fraction),o.tickOffset+I.ticklen+I.font.size*n+o.labelOffset+R.currentValueTotalHeight)})}function p(P,I,j,R,H){var F=Math.round(R*(j._stepCount-1)),U=j._visibleSteps[F]._index;U!==j.active&&m(P,I,j,U,!0,H)}function m(P,I,j,R,H,F){var U=j.active;j.active=R,t(P.layout,o.name,j).applyUpdate("active",R);var B=j.steps[j.active];I.call(S,j,F),I.call(x,j),P.emit("plotly_sliderchange",{slider:j,step:j.steps[j.active],interaction:H,previousActive:U}),B&&B.method&&H&&(I._nextMethod?(I._nextMethod.step=B,I._nextMethod.doCallback=H,I._nextMethod.doTransition=F):(I._nextMethod={step:B,doCallback:H,doTransition:F},I._nextMethodRaf=window.requestAnimationFrame(function(){var N=I._nextMethod.step;N.method&&(N.execute&&A.executeAPICommand(P,N.method,N.args),I._nextMethod=null,I._nextMethodRaf=null)})))}function w(P,I,j){if(!I._context.staticPlot){var R=j.node(),H=k.select(I);P.on("mousedown",U),P.on("touchstart",U)}function F(){return j.data()[0]}function U(){var B=F();I.emit("plotly_sliderstart",{slider:B});var N=j.select("."+o.gripRectClass);k.event.stopPropagation(),k.event.preventDefault(),N.call(l.fill,B.activebgcolor);var J=E(B,k.mouse(R)[0]);function Z(){var W=F(),X=E(W,k.mouse(R)[0]);p(I,j,W,X,!1)}function V(){var W=F();W._dragging=!1,N.call(l.fill,W.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),I.emit("plotly_sliderend",{slider:W,step:W.steps[W.active]})}p(I,j,B,J,!0),B._dragging=!0,H.on("mousemove",Z),H.on("touchmove",Z),H.on("mouseup",V),H.on("touchend",V)}}function u(P,I){var j=P.selectAll("rect."+o.tickRectClass).data(I._visibleSteps),R=I._dims;j.enter().append("rect").classed(o.tickRectClass,!0),j.exit().remove(),j.attr({width:I.tickwidth+"px","shape-rendering":"crispEdges"}),j.each(function(H,F){var U=F%R.labelStride==0,B=k.select(this);B.attr({height:U?I.ticklen:I.minorticklen}).call(l.fill,I.tickcolor),T.setTranslate(B,_(I,F/(I._stepCount-1))-.5*I.tickwidth,(U?o.tickOffset:o.minorTickOffset)+R.currentValueTotalHeight)})}function S(P,I,j){for(var R=P.select("rect."+o.gripRectClass),H=0,F=0;F<I._stepCount;F++)if(I._visibleSteps[F]._index===I.active){H=F;break}var U=_(I,H/(I._stepCount-1));if(!I._invokingCommand){var B=R;j&&I.transition.duration>0&&(B=B.transition().duration(I.transition.duration).ease(I.transition.easing)),B.attr("transform",d(U-.5*o.gripWidth,I._dims.currentValueTotalHeight))}}function _(P,I){var j=P._dims;return j.inputAreaStart+o.stepInset+(j.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,I))}function E(P,I){var j=P._dims;return Math.min(1,Math.max(0,(I-o.stepInset-j.inputAreaStart)/(j.inputAreaLength-2*o.stepInset-2*j.inputAreaStart)))}function L(P,I,j){var R=j._dims,H=b.ensureSingle(P,"rect",o.railTouchRectClass,function(F){F.call(w,I,P,j).style("pointer-events","all")});H.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,o.tickOffset+j.ticklen+R.labelHeight)}).call(l.fill,j.bgcolor).attr("opacity",0),T.setTranslate(H,0,R.currentValueTotalHeight)}function C(P,I){var j=I._dims,R=j.inputAreaLength-2*o.railInset,H=b.ensureSingle(P,"rect",o.railRectClass);H.attr({width:R,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,I.bordercolor).call(l.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px"),T.setTranslate(H,o.railInset,.5*(j.inputAreaWidth-o.railWidth)+j.currentValueTotalHeight)}Q.exports=function(P){var I=P._context.staticPlot,j=P._fullLayout,R=function(J,Z){for(var V=J[o.name],W=[],X=0;X<V.length;X++){var K=V[X];K.visible&&(K._gd=Z,W.push(K))}return W}(j,P),H=j._infolayer.selectAll("g."+o.containerClassName).data(R.length>0?[0]:[]);function F(J){J._commandObserver&&(J._commandObserver.remove(),delete J._commandObserver),A.autoMargin(P,c(J))}if(H.enter().append("g").classed(o.containerClassName,!0).style("cursor",I?null:"ew-resize"),H.exit().each(function(){k.select(this).selectAll("g."+o.groupClassName).each(F)}).remove(),0!==R.length){var U=H.selectAll("g."+o.groupClassName).data(R,h);U.enter().append("g").classed(o.groupClassName,!0),U.exit().each(F).remove();for(var B=0;B<R.length;B++)f(P,R[B]);U.each(function(J){var Z=k.select(this);(function(V){var W=V._dims;W.labelSteps=[];for(var X=V._stepCount,K=0;K<X;K+=W.labelStride)W.labelSteps.push({fraction:K/(X-1),step:V._visibleSteps[K]})})(J),A.manageCommandObserver(P,J,J._visibleSteps,function(V){var W=Z.data()[0];W.active!==V.index&&(W._dragging||m(P,Z,W,V.index,!1,!0))}),function(V,W,X){(X.steps[X.active]||{}).visible||(X.active=X._visibleSteps[0]._index),W.call(x,X).call(C,X).call(y,X).call(u,X).call(L,V,X).call(v,V,X);var K=X._dims;T.setTranslate(W,K.lx+X.pad.l,K.ly+X.pad.t),W.call(S,X,!1),W.call(x,X)}(P,k.select(this),J)})}}},23243:function(Q,z,e){"use strict";var k=e(98292);Q.exports={moduleType:"component",name:k.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(74875),T=e(73972),b=e(71828),d=b.strTranslate,s=e(91424),t=e(7901),o=e(63893),r=e(37822),n=e(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;Q.exports={draw:function(i,c,h){var f,x=h.propContainer,v=h.propName,g=h.placeholder,y=h.traceIndex,p=h.avoid||{},m=h.attributes,w=h.transform,u=h.containerGroup,S=i._fullLayout,_=1,E=!1,L=x.title,C=(L&&L.text?L.text:"").trim(),P=L&&L.font?L.font:{},I=P.family,j=P.size,R=P.color;"title.text"===v?f="titleText":-1!==v.indexOf("axis")?f="axisTitleText":v.indexOf(!0)&&(f="colorbarTitleText");var H=i._context.edits[f];""===C?_=0:C.replace(a," % ")===g.replace(a," % ")&&(_=.2,E=!0,H||(C="")),h._meta?C=b.templateString(C,h._meta):S._meta&&(C=b.templateString(C,S._meta));var F,U=C||H;u||(u=b.ensureSingle(S._infolayer,"g","g-"+c),F=S._hColorbarMoveTitle);var B=u.selectAll("text").data(U?[0]:[]);if(B.enter().append("text"),B.text(C).attr("class",c),B.exit().remove(),!U)return u;function N(V){b.syncOrAsync([J,Z],V)}function J(V){var W;return!w&&F&&(w={}),w?(W="",w.rotate&&(W+="rotate("+[w.rotate,m.x,m.y]+")"),(w.offset||F)&&(W+=d(0,(w.offset||0)-(F||0)))):W=null,V.attr("transform",W),V.style({"font-family":I,"font-size":k.round(j,2)+"px",fill:t.rgb(R),opacity:_*t.opacity(R),"font-weight":l.fontWeight}).attr(m).call(o.convertToTspans,i),l.previousPromises(i)}function Z(V){var W=k.select(V.node().parentNode);if(p&&p.selection&&p.side&&C){W.attr("transform",null);var X=n[p.side],K="left"===p.side||"top"===p.side?-1:1,ne=A(p.pad)?p.pad:2,re=s.bBox(W.node()),le=p.maxShift||K*({left:0,top:0,right:S.width,bottom:S.height}[p.side]-re[p.side]),pe=0;if(le<0)pe=le;else{var xe=p.offsetLeft||0,ye=p.offsetTop||0;re.left-=xe,re.right-=xe,re.top-=ye,re.bottom-=ye,p.selection.each(function(){var fe=s.bBox(this);b.bBoxIntersect(re,fe,ne)&&(pe=Math.max(pe,K*(fe[p.side]-re[X])+ne))}),pe=Math.min(le,pe),x._titleScoot=Math.abs(pe)}if(pe>0||le<0){var se={left:[-pe,0],right:[pe,0],top:[0,-pe],bottom:[0,pe]}[p.side];W.attr("transform",d(se[0],se[1]))}}}return B.call(N),H&&(C?B.on(".opacity",null):(_=0,E=!0,B.text(g).on("mouseover.opacity",function(){k.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){k.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),B.call(o.makeEditable,{gd:i}).on("edit",function(V){void 0!==y?T.call("_guiRestyle",i,v,V,y):T.call("_guiRelayout",i,v,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(N)}).on("input",function(V){this.text(V||" ").call(o.positionText,m.x,m.y)})),B.classed("js-placeholder",E),u}}},7163:function(Q,z,e){"use strict";var k=e(41940),A=e(22399),l=e(1426).extendFlat,T=e(30962).overrideAll,b=e(35025),d=e(44467).templatedArray,s=d("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Q.exports=T(d("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(b({editType:"arraydraw"}),{}),font:k({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:A.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(Q){"use strict";Q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},64897:function(Q,z,e){"use strict";var k=e(71828),A=e(85501),l=e(7163),T=e(75909).name,b=l.buttons;function d(t,o,r){function n(a,i){return k.coerce(t,o,l,a,i)}n("visible",A(t,o,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),k.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),k.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,o){function r(n,a){return k.coerce(t,o,b,n,a)}r("visible","skip"===t.method||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}Q.exports=function(t,o){A(t,o,{name:T,handleItemDefaults:d})}},13689:function(Q,z,e){"use strict";var k=e(39898),A=e(74875),l=e(7901),T=e(91424),b=e(71828),d=e(63893),s=e(44467).arrayEditor,t=e(18783).LINE_SPACING,o=e(75909),r=e(25849);function n(_){return _._index}function a(_,E){return+_.attr(o.menuIndexAttrName)===E._index}function i(_,E,L,C,P,I,j,R){E.active=j,s(_.layout,o.name,E).applyUpdate("active",j),"buttons"===E.type?h(_,C,null,null,E):"dropdown"===E.type&&(P.attr(o.menuIndexAttrName,"-1"),c(_,C,P,I,E),R||h(_,C,P,I,E))}function c(_,E,L,C,P){var I=b.ensureSingle(E,"g",o.headerClassName,function(B){B.style("pointer-events","all")}),j=P._dims,F={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},U={width:j.headerWidth,height:j.headerHeight};I.call(f,P,P.buttons[P.active]||o.blankHeaderOpts,_).call(u,P,F,U),b.ensureSingle(E,"text",o.headerArrowClassName,function(B){B.attr("text-anchor","end").call(T.font,P.font).text(o.arrowSymbol[P.direction])}).attr({x:j.headerWidth-o.arrowOffsetX+P.pad.l,y:j.headerHeight/2+o.textOffsetY+P.pad.t}),I.on("click",function(){L.call(S,String(a(L,P)?-1:P._index)),h(_,E,L,C,P)}),I.on("mouseover",function(){I.call(y)}),I.on("mouseout",function(){I.call(p,P)}),T.setTranslate(E,j.lx,j.ly)}function h(_,E,L,C,P){L||(L=E).attr("pointer-events","all");var I=-1==+L.attr(o.menuIndexAttrName)&&"buttons"!==P.type?[]:P.buttons,j="dropdown"===P.type?o.dropdownButtonClassName:o.buttonClassName,R=L.selectAll("g."+j).data(b.filterVisible(I)),H=R.enter().append("g").classed(j,!0),F=R.exit();"dropdown"===P.type?(H.attr("opacity","0").transition().attr("opacity","1"),F.transition().attr("opacity","0").remove()):F.remove();var U=0,B=0,N=P._dims,J=-1!==["up","down"].indexOf(P.direction);"dropdown"===P.type&&(J?B=N.headerHeight+o.gapButtonHeader:U=N.headerWidth+o.gapButtonHeader),"dropdown"===P.type&&"up"===P.direction&&(B=-o.gapButtonHeader+o.gapButton-N.openHeight),"dropdown"===P.type&&"left"===P.direction&&(U=-o.gapButtonHeader+o.gapButton-N.openWidth);var W,X,K,Z={x:N.lx+U+P.pad.l,y:N.ly+B+P.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},V={l:Z.x+P.borderwidth,t:Z.y+P.borderwidth};R.each(function(W,X){var K=k.select(this);K.call(f,P,W,_).call(u,P,Z),K.on("click",function(){k.event.defaultPrevented||(W.execute&&(W.args2&&P.active===X?(i(_,P,0,E,L,C,-1),A.executeAPICommand(_,W.method,W.args2)):(i(_,P,0,E,L,C,X),A.executeAPICommand(_,W.method,W.args))),_.emit("plotly_buttonclicked",{menu:P,button:W,active:P.active}))}),K.on("mouseover",function(){K.call(y)}),K.on("mouseout",function(){K.call(p,P),R.call(g,P)})}),R.call(g,P),J?(V.w=Math.max(N.openWidth,N.headerWidth),V.h=Z.y-V.t):(V.w=Z.x-V.l,V.h=Math.max(N.openHeight,N.headerHeight)),V.direction=P.direction,C&&(R.size()?function(W,X,K,ne,re,ae){var le,pe,xe,ye=re.direction,fe=re._dims,Ee=re.active;if("up"===ye||"down"===ye)for(pe=0,xe=0;xe<Ee;xe++)pe+=fe.heights[xe]+o.gapButton;else for(le=0,xe=0;xe<Ee;xe++)le+=fe.widths[xe]+o.gapButton;ne.enable(ae,le,pe),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,V):(K=!!(W=C).vbar,(X=!!W.hbar)&&W.hbar.transition().attr("opacity","0").each("end",function(){X=!1,K||W.disable()}),K&&W.vbar.transition().attr("opacity","0").each("end",function(){K=!1,X||W.disable()})))}function f(_,E,L,C){_.call(x,E).call(v,E,L,C)}function x(_,E){b.ensureSingle(_,"rect",o.itemRectClassName,function(L){L.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function v(_,E,L,C){var P=b.ensureSingle(_,"text",o.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),I=L.label,j=C._fullLayout._meta;j&&(I=b.templateString(I,j)),P.call(T.font,E.font).text(I).call(d.convertToTspans,C)}function g(_,E){var L=E.active;_.each(function(C,P){var I=k.select(this);P===L&&E.showactive&&I.select("rect."+o.itemRectClassName).call(l.fill,o.activeColor)})}function y(_){_.select("rect."+o.itemRectClassName).call(l.fill,o.hoverColor)}function p(_,E){_.select("rect."+o.itemRectClassName).call(l.fill,E.bgcolor)}function m(_,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+o.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(o.dropdownButtonClassName,!0);var P=-1!==["up","down"].indexOf(E.direction);C.each(function(U,B){var N=k.select(this);N.call(f,E,U,_);var J=N.select("."+o.itemTextClassName),Z=J.node()&&T.bBox(J.node()).width,V=Math.max(Z+o.textPadX,o.minWidth),W=E.font.size*t,X=d.lineCount(J),K=Math.max(W*X,o.minHeight)+o.textOffsetY;K=Math.ceil(K),V=Math.ceil(V),L.widths[B]=V,L.heights[B]=K,L.height1=Math.max(L.height1,K),L.width1=Math.max(L.width1,V),P?(L.totalWidth=Math.max(L.totalWidth,V),L.openWidth=L.totalWidth,L.totalHeight+=K+o.gapButton,L.openHeight+=K+o.gapButton):(L.totalWidth+=V+o.gapButton,L.openWidth+=V+o.gapButton,L.totalHeight=Math.max(L.totalHeight,K),L.openHeight=L.totalHeight)}),P?L.totalHeight-=o.gapButton:L.totalWidth-=o.gapButton,L.headerWidth=L.width1+o.arrowPadX,L.headerHeight=L.height1,"dropdown"===E.type&&(P?(L.width1+=o.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=o.arrowPadX),C.remove();var I=L.totalWidth+E.pad.l+E.pad.r,j=L.totalHeight+E.pad.t+E.pad.b,R=_._fullLayout._size;L.lx=R.l+R.w*E.x,L.ly=R.t+R.h*(1-E.y);var H="left";b.isRightAnchor(E)&&(L.lx-=I,H="right"),b.isCenterAnchor(E)&&(L.lx-=I/2,H="center");var F="top";b.isBottomAnchor(E)&&(L.ly-=j,F="bottom"),b.isMiddleAnchor(E)&&(L.ly-=j/2,F="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),A.autoMargin(_,w(E),{x:E.x,y:E.y,l:I*({right:1,center:.5}[H]||0),r:I*({left:1,center:.5}[H]||0),b:j*({top:1,middle:.5}[F]||0),t:j*({bottom:1,middle:.5}[F]||0)})}function w(_){return o.autoMarginIdRoot+_._index}function u(_,E,L,C){C=C||{};var P=_.select("."+o.itemRectClassName),I=_.select("."+o.itemTextClassName),j=E.borderwidth,R=L.index,H=E._dims;T.setTranslate(_,j+L.x,j+L.y);var F=-1!==["up","down"].indexOf(E.direction),U=C.height||(F?H.heights[R]:H.height1);P.attr({x:0,y:0,width:C.width||(F?H.width1:H.widths[R]),height:U});var B=E.font.size*t,N=(d.lineCount(I)-1)*B/2;d.positionText(I,o.textOffsetX,U/2-N+o.textOffsetY),F?L.y+=H.heights[R]+L.yPad:L.x+=H.widths[R]+L.xPad,L.index++}function S(_,E){_.attr(o.menuIndexAttrName,E||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}Q.exports=function(_){var E=_._fullLayout,L=b.filterVisible(E[o.name]);function C(B){A.autoMargin(_,w(B))}var P=E._menulayer.selectAll("g."+o.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){k.select(this).selectAll("g."+o.headerGroupClassName).each(C)}).remove(),0!==L.length){var I=P.selectAll("g."+o.headerGroupClassName).data(L,n);I.enter().append("g").classed(o.headerGroupClassName,!0);for(var j=b.ensureSingle(P,"g",o.dropdownButtonGroupClassName,function(B){B.style("pointer-events","all")}),R=0;R<L.length;R++)m(_,L[R]);var U=new r(_,j,"updatemenus"+E._uid);I.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(S)),I.exit().each(function(B){j.call(S),C(B)}).remove(),I.each(function(B){var N=k.select(this),J="dropdown"===B.type?j:null;A.manageCommandObserver(_,B,B.buttons,function(Z){i(_,B,0,N,J,U,Z.index,!0)}),"dropdown"===B.type?(c(_,N,j,U,B),a(j,B)&&h(_,N,j,U,B)):h(_,N,null,null,B)})}}},20763:function(Q,z,e){"use strict";var k=e(75909);Q.exports={moduleType:"component",name:k.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function(Q,z,e){"use strict";Q.exports=b;var k=e(39898),A=e(7901),l=e(91424),T=e(71828);function b(d,s,t){this.gd=d,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(d,s,t){var o=this.gd._fullLayout,r=o.width,n=o.height;this.position=d;var a,i,c,h,f=this.position.l,x=this.position.w,v=this.position.t,g=this.position.h,y=this.position.direction,p="down"===y,m="left"===y,w="up"===y,u=x,S=g;p||m||"right"===y||w||(this.position.direction="down",p=!0),p||w?(i=(a=f)+u,p?(c=v,S=(h=Math.min(c+S,n))-c):S=(h=v+S)-(c=Math.max(h-S,0))):(h=(c=v)+S,m?u=(i=f+u)-(a=Math.max(i-u,0)):(a=f,u=(i=Math.min(a+u,r))-a)),this._box={l:a,t:c,w:u,h:S};var _=x>u,E=b.barLength+2*b.barPad,L=b.barWidth+2*b.barPad,C=f,P=v+g;P+L>n&&(P=n-L);var I=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-horizontal",!0).call(A.fill,b.barColor),_?(this.hbar=I.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:P,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=u-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var j=g>S,R=b.barWidth+2*b.barPad,H=b.barLength+2*b.barPad,F=f+x,U=v;F+R>r&&(F=r-R);var B=this.container.selectAll("rect.scrollbar-vertical").data(j?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-vertical",!0).call(A.fill,b.barColor),j?(this.vbar=B.attr({rx:b.barRadius,ry:b.barRadius,x:F,y:U,width:R,height:H}),this._vbarYMin=U+H/2,this._vbarTranslateMax=S-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,J=a-.5,Z=j?i+R+.5:i+.5,V=c-.5,W=_?h+L+.5:h+.5,X=o._topdefs.selectAll("#"+N).data(_||j?[0]:[]);if(X.exit().remove(),X.enter().append("clipPath").attr("id",N).append("rect"),_||j?(this._clipRect=X.select("rect").attr({x:Math.floor(J),y:Math.floor(V),width:Math.ceil(Z)-Math.floor(J),height:Math.ceil(W)-Math.floor(V)}),this.container.call(l.setClipUrl,N,this.gd),this.bg.attr({x:f,y:v,width:x,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),_||j){var K=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(K);var ne=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault(),k.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(ne),j&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d-=k.event.dx),this.vbar&&(s-=k.event.dy),this.setTranslate(d,s)},b.prototype._onBoxWheel=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d+=k.event.deltaY),this.vbar&&(s+=k.event.deltaY),this.setTranslate(d,s)},b.prototype._onBarDrag=function(){var d=this.translateX,s=this.translateY;if(this.hbar){var t=d+this._hbarXMin,o=t+this._hbarTranslateMax;d=(T.constrain(k.event.x,t,o)-t)/(o-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(k.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(d,s)},b.prototype.setTranslate=function(d,s){var t=this.position.w-this._box.w,o=this.position.h-this._box.h;d=T.constrain(d||0,0,t),s=T.constrain(s||0,0,o),this.translateX=d,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar&&this.hbar.call(l.setTranslate,d+d/t*this._hbarTranslateMax,s),this.vbar&&this.vbar.call(l.setTranslate,d,s+s/o*this._vbarTranslateMax)}},18783:function(Q){"use strict";Q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(Q){"use strict";Q.exports={axisRefDescription:function(z,e,k){return["If set to a",z,"axis id (e.g. *"+z+"* or","*"+z+"2*), the `"+z+"` position refers to a",z,"coordinate. If set to *paper*, the `"+z+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+k+"). If set to a",z,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+z+"2 domain* refers to the domain of the second",z," axis and a",z,"position of 0.5 refers to the","point between the",e,"and the",k,"of the domain of the","second",z,"axis."].join(" ")}}},22372:function(Q){"use strict";Q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},31562:function(Q){"use strict";Q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(Q){"use strict";Q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(Q){"use strict";Q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(Q){"use strict";Q.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},37822:function(Q){"use strict";Q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(Q){"use strict";Q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},77922:function(Q,z){"use strict";z.xmlns="http://www.w3.org/2000/xmlns/",z.svg="http://www.w3.org/2000/svg",z.xlink="http://www.w3.org/1999/xlink",z.svgAttrs={xmlns:z.svg,"xmlns:xlink":z.xlink}},8729:function(Q,z,e){"use strict";z.version=e(11506).version,e(7417),e(98847);for(var k=e(73972),A=z.register=k.register,l=e(10641),T=Object.keys(l),b=0;b<T.length;b++){var d=T[b];"_"!==d.charAt(0)&&(z[d]=l[d]),A({moduleType:"apiMethod",name:d,fn:l[d]})}A(e(67368)),A([e(2199),e(30211),e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(64168)]),A([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(A(window.PlotlyLocales),delete window.PlotlyLocales),z.Icons=e(24255);var s=e(30211),t=e(74875);z.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},z.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},z.Snapshot=e(44511),z.PlotSchema=e(86281)},24255:function(Q){"use strict";Q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(Q,z){"use strict";z.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=.3333333333333333},z.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>.3333333333333333&&e.x<.6666666666666666},z.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=.6666666666666666},z.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=.6666666666666666},z.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>.3333333333333333&&e.y<.6666666666666666},z.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=.3333333333333333}},26348:function(Q,z,e){"use strict";var k=e(64872),A=k.mod,l=k.modHalf,T=Math.PI,b=2*T;function d(r){return Math.abs(r[1]-r[0])>b-1e-14}function s(r,n){return l(n-r,b)}function t(r,n){if(d(n))return!0;var a,i;n[0]<n[1]?(a=n[0],i=n[1]):(a=n[1],i=n[0]),(a=A(a,b))>(i=A(i,b))&&(i+=b);var c=A(r,b),h=c+b;return c>=a&&c<=i||h>=a&&h<=i}function o(r,n,a,i,c,h,f){c=c||0,h=h||0;var x,v,g,y,p,m=d([a,i]);function w(E,L){return[E*Math.cos(L)+c,h-E*Math.sin(L)]}m?(x=0,v=T,g=b):a<i?(x=a,g=i):(x=i,g=a),r<n?(y=r,p=n):(y=n,p=r);var u,S=Math.abs(g-x)<=T?0:1;function _(E,L,C){return"A"+[E,E]+" "+[0,S,C]+" "+w(E,L)}return m?u=null===y?"M"+w(p,x)+_(p,v,0)+_(p,g,0)+"Z":"M"+w(y,x)+_(y,v,0)+_(y,g,0)+"ZM"+w(p,x)+_(p,v,1)+_(p,g,1)+"Z":null===y?(u="M"+w(p,x)+_(p,g,0),f&&(u+="L0,0Z")):u="M"+w(y,x)+"L"+w(p,x)+_(p,g,0)+"L"+w(y,g)+_(y,x,1)+"Z",u}Q.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:d,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,i){return!!t(n,i)&&(a[0]<a[1]?(c=a[0],h=a[1]):(c=a[1],h=a[0]),r>=c&&r<=h);var c,h},pathArc:function(r,n,a,i,c){return o(null,r,n,a,i,c,0)},pathSector:function(r,n,a,i,c){return o(null,r,n,a,i,c,1)},pathAnnulus:function(r,n,a,i,c,h){return o(r,n,a,i,c,h,1)}}},73627:function(Q,z){"use strict";var e=Array.isArray,k=ArrayBuffer,A=DataView;function l(d){return k.isView(d)&&!(d instanceof A)}function T(d){return e(d)||l(d)}function b(d,s,t){if(T(d)){if(T(d[0])){for(var o=t,r=0;r<d.length;r++)o=s(o,d[r].length);return o}return d.length}return 0}z.isTypedArray=l,z.isArrayOrTypedArray=T,z.isArray1D=function(d){return!T(d[0])},z.ensureArray=function(d,s){return e(d)||(d=[]),d.length=s,d},z.concat=function(){var d,s,t,o,r,n,a,i,c=[],h=!0,f=0;for(t=0;t<arguments.length;t++)(n=(o=arguments[t]).length)&&(s?c.push(o):(s=o,r=n),e(o)?d=!1:(h=!1,f?d!==o.constructor&&(d=!1):d=o.constructor),f+=n);if(!f)return[];if(!c.length)return s;if(h)return s.concat.apply(s,c);if(d){for((a=new d(f)).set(s),t=0;t<c.length;t++)a.set(o=c[t],r),r+=o.length;return a}for(a=new Array(f),i=0;i<s.length;i++)a[i]=s[i];for(t=0;t<c.length;t++){for(o=c[t],i=0;i<o.length;i++)a[r+i]=o[i];r+=i}return a},z.maxRowLength=function(d){return b(d,Math.max,0)},z.minRowLength=function(d){return b(d,Math.min,1/0)}},95218:function(Q,z,e){"use strict";var k=e(92770),A=e(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Q.exports=function(T){return"string"==typeof T&&(T=T.replace(l,"")),k(T)?Number(T):A}},33306:function(Q){"use strict";Q.exports=function(z){var e=z._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(k){k.regl&&k.regl.clear({color:!0,depth:!0})})}},86367:function(Q){"use strict";Q.exports=function(z){z._responsiveChartHandler&&(window.removeEventListener("resize",z._responsiveChartHandler),delete z._responsiveChartHandler)}},96554:function(Q,z,e){"use strict";var k=e(92770),A=e(84267),l=e(9012),T=e(63282),b=e(7901),d=e(37822).DESELECTDIM,s=e(65487),t=e(30587).counter,o=e(64872).modHalf,r=e(73627).isArrayOrTypedArray;function n(a,i){var c=z.valObjectMeta[i.valType];if(i.arrayOk&&r(a))return!0;if(c.validateFunction)return c.validateFunction(a,i);var h={},f=h;return c.coerceFunction(a,{set:function(v){f=v}},h,i),f!==h}z.valObjectMeta={data_array:{coerceFunction:function(a,i,c){r(a)?i.set(a):void 0!==c&&i.set(c)}},enumerated:{coerceFunction:function(a,i,c,h){h.coerceNumber&&(a=+a),-1===h.values.indexOf(a)?i.set(c):i.set(a)},validateFunction:function(a,i){i.coerceNumber&&(a=+a);for(var c=i.values,h=0;h<c.length;h++){var f=String(c[h]);if("/"===f.charAt(0)&&"/"===f.charAt(f.length-1)){if(new RegExp(f.substr(1,f.length-2)).test(a))return!0}else if(a===c[h])return!0}return!1}},boolean:{coerceFunction:function(a,i,c){i.set(!0===a||!1===a?a:c)}},number:{coerceFunction:function(a,i,c,h){!k(a)||void 0!==h.min&&a<h.min||void 0!==h.max&&a>h.max?i.set(c):i.set(+a)}},integer:{coerceFunction:function(a,i,c,h){a%1||!k(a)||void 0!==h.min&&a<h.min||void 0!==h.max&&a>h.max?i.set(c):i.set(+a)}},string:{coerceFunction:function(a,i,c,h){i.set("string"!=typeof a?!0!==h.strict&&"number"==typeof a?String(a):c:h.noBlank&&!a?c:a)}},color:{coerceFunction:function(a,i,c){A(a).isValid()?i.set(a):i.set(c)}},colorlist:{coerceFunction:function(a,i,c){Array.isArray(a)&&a.length&&a.every(function(h){return A(h).isValid()})?i.set(a):i.set(c)}},colorscale:{coerceFunction:function(a,i,c){i.set(T.get(a,c))}},angle:{coerceFunction:function(a,i,c){"auto"===a?i.set("auto"):k(a)?i.set(o(+a,360)):i.set(c)}},subplotid:{coerceFunction:function(a,i,c,h){var f=h.regex||t(c);"string"==typeof a&&f.test(a)?i.set(a):i.set(c)},validateFunction:function(a,i){var c=i.dflt;return a===c||"string"==typeof a&&!!t(c).test(a)}},flaglist:{coerceFunction:function(a,i,c,h){if(-1===(h.extras||[]).indexOf(a))if("string"==typeof a){for(var f=a.split("+"),x=0;x<f.length;){var v=f[x];-1===h.flags.indexOf(v)||f.indexOf(v)<x?f.splice(x,1):x++}i.set(f.length?f.join("+"):c)}else i.set(c);else i.set(a)}},any:{coerceFunction:function(a,i,c){i.set(void 0===a?c:a)}},info_array:{coerceFunction:function(a,i,c,h){function f(P,I,j){var R;return void 0===j&&(j=I.dflt),z.valObjectMeta[I.valType].coerceFunction(P,{set:function(F){R=F}},j,I),R}var x=2===h.dimensions||"1-2"===h.dimensions&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var v,g,y,m,w,u=h.items,S=[],_=Array.isArray(u),E=_&&x&&Array.isArray(u[0]),L=x&&_&&!E,C=_&&!L?u.length:a.length;if(c=Array.isArray(c)?c:[],x)for(v=0;v<C;v++)for(S[v]=[],y=Array.isArray(a[v])?a[v]:[],m=L?u.length:_?u[v].length:y.length,g=0;g<m;g++)void 0!==(w=f(y[g],L?u[g]:_?u[v][g]:u,(c[v]||[])[g]))&&(S[v][g]=w);else for(v=0;v<C;v++)void 0!==(w=f(a[v],_?u[v]:u,c[v]))&&(S[v]=w);i.set(S)}else i.set(c)},validateFunction:function(a,i){if(!Array.isArray(a))return!1;var c=i.items,h=Array.isArray(c),f=2===i.dimensions;if(!i.freeLength&&a.length!==c.length)return!1;for(var x=0;x<a.length;x++)if(f){if(!Array.isArray(a[x])||!i.freeLength&&a[x].length!==c[x].length)return!1;for(var v=0;v<a[x].length;v++)if(!n(a[x][v],h?c[x][v]:c))return!1}else if(!n(a[x],h?c[x]:c))return!1;return!0}}},z.coerce=function(a,i,c,h,f){var x=s(c,h).get(),v=s(a,h),g=s(i,h),y=v.get(),p=i._template;if(void 0===y&&p&&(y=s(p,h).get(),p=0),void 0===f&&(f=x.dflt),x.arrayOk&&r(y))return g.set(y),y;var m=z.valObjectMeta[x.valType].coerceFunction;m(y,g,f,x);var w=g.get();return p&&w===f&&!n(y,x)&&(m(y=s(p,h).get(),g,f,x),w=g.get()),w},z.coerce2=function(a,i,c,h,f){var x=s(a,h),v=z.coerce(a,i,c,h,f);return null!=x.get()&&v},z.coerceFont=function(a,i,c){var h={};return h.family=a(i+".family",(c=c||{}).family),h.size=a(i+".size",c.size),h.color=a(i+".color",c.color),h},z.coercePattern=function(a,i,c,h){if(a(i+".shape")){a(i+".solidity"),a(i+".size");var f="overlay"===a(i+".fillmode");if(!h){var x=a(i+".bgcolor",f?c:void 0);a(i+".fgcolor",f?b.contrast(x):c)}a(i+".fgopacity",f?.5:1)}},z.coerceHoverinfo=function(a,i,c){var h,f=i._module.attributes,x=f.hoverinfo?f:l,v=x.hoverinfo;if(1===c._dataLength){var g="all"===v.dflt?v.flags.slice():v.dflt.split("+");g.splice(g.indexOf("name"),1),h=g.join("+")}return z.coerce(a,i,x,"hoverinfo",h)},z.coerceSelectionMarkerOpacity=function(a,i){if(a.marker){var c,h,f=a.marker.opacity;void 0!==f&&(r(f)||a.selected||a.unselected||(c=f,h=d*f),i("selected.marker.opacity",c),i("unselected.marker.opacity",h))}},z.validate=n},41631:function(Q,z,e){"use strict";var k,A,l=e(84096).i$,T=e(92770),b=e(47769),d=e(64872).mod,s=e(50606),t=s.BADNUM,o=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,i=s.EPOCHJD,c=e(73972),h=e(84096).g0,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=(new Date).getFullYear()-70;function g(I){return I&&c.componentsRegistry.calendars&&"string"==typeof I&&"gregorian"!==I}function y(I,j){return String(I+Math.pow(10,j)).substr(1)}z.dateTick0=function(I,j){var F,U,R=(U=!!j,g(F=I)?U?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[F]:c.getComponentMethod("calendars","CANONICAL_TICK")[F]:U?"2000-01-02":"2000-01-01");if(j<2)return R;var H=z.dateTime2ms(R,I);return z.ms2DateTime(H+=o*(j-1),0,I)},z.dfltRange=function(I){return g(I)?c.getComponentMethod("calendars","DFLTRANGE")[I]:["2000-01-01","2001-01-01"]},z.isJSDate=function(I){return"object"==typeof I&&null!==I&&"function"==typeof I.getTime},z.dateTime2ms=function(I,j){if(z.isJSDate(I)){var R=I.getTimezoneOffset()*n,H=(I.getUTCMinutes()-I.getMinutes())*n+(I.getUTCSeconds()-I.getSeconds())*a+(I.getUTCMilliseconds()-I.getMilliseconds());if(H){var F=3*n;R=R-F/2+d(H-R+F/2,F)}return(I=Number(I)-R)>=k&&I<=A?I:t}if("string"!=typeof I&&"number"!=typeof I)return t;I=String(I);var U=g(j),B=I.charAt(0);!U||"G"!==B&&"g"!==B||(I=I.substr(1),j="");var N=U&&"chinese"===j.substr(0,7),J=I.match(N?x:f);if(!J)return t;var Z=J[1],V=J[3]||"1",W=Number(J[5]||1),X=Number(J[7]||0),K=Number(J[9]||0),ne=Number(J[11]||0);if(U){if(2===Z.length)return t;var re;Z=Number(Z);try{var ae=c.getComponentMethod("calendars","getCal")(j);if(N){var le="i"===V.charAt(V.length-1);V=parseInt(V,10),re=ae.newDate(Z,ae.toMonthIndex(Z,V,le),W)}else re=ae.newDate(Z,Number(V),W)}catch{return t}return re?(re.toJD()-i)*o+X*r+K*n+ne*a:t}Z=2===Z.length?(Number(Z)+2e3-v)%100+v:Number(Z),V-=1;var pe=new Date(Date.UTC(2e3,V,W,X,K));return pe.setUTCFullYear(Z),pe.getUTCMonth()!==V||pe.getUTCDate()!==W?t:pe.getTime()+ne*a},k=z.MIN_MS=z.dateTime2ms("-9999"),A=z.MAX_MS=z.dateTime2ms("9999-12-31 23:59:59.9999"),z.isDateTime=function(I,j){return z.dateTime2ms(I,j)!==t};var p=90*o,m=3*r,w=5*n;function u(I,j,R,H,F){if((j||R||H||F)&&(I+=" "+y(j,2)+":"+y(R,2),(H||F)&&(I+=":"+y(H,2),F))){for(var U=4;F%10==0;)U-=1,F/=10;I+="."+y(F,U)}return I}z.ms2DateTime=function(I,j,R){if("number"!=typeof I||!(I>=k&&I<=A))return t;j||(j=0);var H,F,U,B,N,J,Z=Math.floor(10*d(I+.05,1)),V=Math.round(I-Z/10);if(g(R)){var W=Math.floor(V/o)+i,X=Math.floor(d(I,o));try{H=c.getComponentMethod("calendars","getCal")(R).fromJD(W).formatDate("yyyy-mm-dd")}catch{H=h("G%Y-%m-%d")(new Date(V))}if("-"===H.charAt(0))for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;F=j<p?Math.floor(X/r):0,U=j<p?Math.floor(X%r/n):0,B=j<m?Math.floor(X%n/a):0,N=j<w?X%a*10+Z:0}else J=new Date(V),H=h("%Y-%m-%d")(J),F=j<p?J.getUTCHours():0,U=j<p?J.getUTCMinutes():0,B=j<m?J.getUTCSeconds():0,N=j<w?10*J.getUTCMilliseconds()+Z:0;return u(H,F,U,B,N)},z.ms2DateTimeLocal=function(I){if(!(I>=k+o&&I<=A-o))return t;var j=Math.floor(10*d(I+.05,1)),R=new Date(Math.round(I-j/10));return u(l("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+j)},z.cleanDate=function(I,j,R){if(I===t)return j;if(z.isJSDate(I)||"number"==typeof I&&isFinite(I)){if(g(R))return b.error("JS Dates and milliseconds are incompatible with world calendars",I),j;if(!(I=z.ms2DateTimeLocal(+I))&&void 0!==j)return j}else if(!z.isDateTime(I,R))return b.error("unrecognized date",I),j;return I};var S=/%\d?f/g,_=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(I,j,R,H){I=I.replace(S,function(U){var B=Math.min(+U.charAt(1)||6,6);return(j/1e3%1+2).toFixed(B).substr(2).replace(/0+$/,"")||"0"});var F=new Date(Math.floor(j+.05));if(I=I.replace(_,function(){return E[R("%q")(F)]}),g(H))try{I=c.getComponentMethod("calendars","worldCalFmt")(I,j,H)}catch{return"Invalid"}return R(I)(F)}var C=[59,59.9,59.99,59.999,59.9999];z.formatDate=function(I,j,R,H,F,U){if(F=g(F)&&F,!j)if("y"===R)j=U.year;else if("m"===R)j=U.month;else{if("d"!==R)return function(B,N){var J=d(B+.05,o),Z=y(Math.floor(J/r),2)+":"+y(d(Math.floor(J/n),60),2);if("M"!==N){T(N)||(N=0);var V=(100+Math.min(d(B/a,60),C[N])).toFixed(N).substr(1);N>0&&(V=V.replace(/0+$/,"").replace(/[\.]$/,"")),Z+=":"+V}return Z}(I,R)+"\n"+L(U.dayMonthYear,I,H,F);j=U.dayMonth+"\n"+U.year}return L(j,I,H,F)};var P=3*o;z.incrementMonth=function(I,j,R){R=g(R)&&R;var H=d(I,o);if(I=Math.round(I-H),R)try{var F=Math.round(I/o)+i,U=c.getComponentMethod("calendars","getCal")(R),B=U.fromJD(F);return j%12?U.add(B,j,"m"):U.add(B,j/12,"y"),(B.toJD()-i)*o+H}catch{b.error("invalid ms "+I+" in calendar "+R)}var N=new Date(I+P);return N.setUTCMonth(N.getUTCMonth()+j)+H-P},z.findExactDates=function(I,j){for(var R,H,F=0,U=0,B=0,N=0,J=g(j)&&c.getComponentMethod("calendars","getCal")(j),Z=0;Z<I.length;Z++)if(T(H=I[Z])){if(!(H%o))if(J)try{1===(R=J.fromJD(H/o+i)).day()?1===R.month()?F++:U++:B++}catch{}else 1===(R=new Date(H)).getUTCDate()?0===R.getUTCMonth()?F++:U++:B++}else N++;B+=U+=F;var V=I.length-N;return{exactYears:F/V,exactMonths:U/V,exactDays:B/V}}},24401:function(Q,z,e){"use strict";var k=e(39898),A=e(47769),l=e(35657),T=e(79576);function b(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function d(r,n,a){var i="plotly.js-style-"+r,c=document.getElementById(i);c||((c=document.createElement("style")).setAttribute("id",i),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):A.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return"none"===a?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function t(r){for(var n=[];o(r);)n.push(r),r=r.parentNode;return n}function o(r){return r&&(r instanceof Element||r instanceof HTMLElement)}Q.exports={getGraphDiv:function(r){var n;if("string"==typeof r){if(null===(n=document.getElementById(r)))throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(null==r)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=k.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(r,n){d("global",r,n)},addRelatedStyleRule:d,deleteRelatedStyleRule:function(r){var a=document.getElementById("plotly.js-style-"+r);a&&b(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(i){var c=s(i);if(c){var h=l.convertCssMatrix(c);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function(Q,z,e){"use strict";var k=e(15398).EventEmitter;Q.exports={init:function(l){if(l._ev instanceof k)return l;var T=new k,b=new k;return l._ev=T,l._internalEv=b,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=b.on.bind(b),l._internalOnce=b.once.bind(b),l._removeInternalListener=b.removeListener.bind(b),l._removeAllInternalListeners=b.removeAllListeners.bind(b),l.emit=function(d,s){typeof jQuery<"u"&&jQuery(l).trigger(d,s),T.emit(d,s),b.emit(d,s)},l},triggerHandler:function(l,T,b){var d,s;typeof jQuery<"u"&&(d=jQuery(l).triggerHandler(T,b));var t=l._ev;if(!t)return d;var o,r=t._events[T];if(!r)return d;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[b]))):a.apply(t,[b])}for(r=Array.isArray(r)?r:[r],o=0;o<r.length-1;o++)n(r[o]);return s=n(r[o]),void 0!==d?d:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}}},1426:function(Q,z,e){"use strict";var k=e(41965),A=Array.isArray;function l(T,b,d,s){var t,o,r,n,a,i,h=T[0],f=T.length;if(2===f&&A(h)&&A(T[1])&&0===h.length){if(function(v,g){var y,p;for(y=0;y<v.length;y++){if(null!==(p=v[y])&&"object"==typeof p)return!1;void 0!==p&&(g[y]=p)}return!0}(T[1],h))return h;h.splice(0,h.length)}for(var x=1;x<f;x++)for(o in t=T[x])r=h[o],n=t[o],s&&A(n)?h[o]=n:b&&n&&(k(n)||(a=A(n)))?(a?(a=!1,i=r&&A(r)?r:[]):i=r&&k(r)?r:{},h[o]=l([i,n],b,d,s)):(void 0!==n||d)&&(h[o]=n);return h}z.extendFlat=function(){return l(arguments,!1,!1,!1)},z.extendDeep=function(){return l(arguments,!0,!1,!1)},z.extendDeepAll=function(){return l(arguments,!0,!0,!1)},z.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function(Q){"use strict";Q.exports=function(z){for(var e={},k=[],A=0,l=0;l<z.length;l++){var T=z[l];1!==e[T]&&(e[T]=1,k[A++]=T)}return k}},76756:function(Q){"use strict";function z(k){return!0===k.visible}function e(k){var A=k[0].trace;return!0===A.visible&&0!==A._length}Q.exports=function(k){for(var A,l=(A=k,Array.isArray(A)&&Array.isArray(A[0])&&A[0][0]&&A[0][0].trace?e:z),T=[],b=0;b<k.length;b++){var d=k[b];l(d)&&T.push(d)}return T}},41327:function(Q,z,e){"use strict";var k=e(39898),A=e(24138),l=e(30774),T=e(29261),b=e(85268),d=e(23389),s=e(47769),t=e(41965),o=e(65487),r=e(61082),n=Object.keys(A),a={"ISO-3":d,"USA-states":d,"country names":function(c){for(var h=0;h<n.length;h++){var f=n[h];if(new RegExp(A[f]).test(c.trim().toLowerCase()))return f}return s.log("Unrecognized country name: "+c+"."),!1}};function i(c){var h=c.geojson,f=window.PlotlyGeoAssets||{},x="string"==typeof h?f[h]:h;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+h),!1)}Q.exports={locationToFeature:function(c,h,f){if(!h||"string"!=typeof h)return!1;var x,v,g,y=a[c](h);if(y){if("USA-states"===c)for(x=[],g=0;g<f.length;g++)(v=f[g]).properties&&v.properties.gu&&"USA"===v.properties.gu&&x.push(v);else x=f;for(g=0;g<x.length;g++)if((v=x[g]).id===y)return v;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,f,x,v,g=c.geometry,y=g.coordinates,p=c.id,m=[];function w(u){for(var S=0;S<u.length-1;S++)if(u[S][0]>0&&u[S+1][0]<0)return S;return null}switch(h="RUS"===p||"FJI"===p?function(u){var S;if(null===w(u))S=u;else for(S=new Array(u.length),v=0;v<u.length;v++)S[v]=[u[v][0]<0?u[v][0]+360:u[v][0],u[v][1]];m.push(r.tester(S))}:"ATA"===p?function(u){var S=w(u);if(null===S)return m.push(r.tester(u));var _=new Array(u.length+1),E=0;for(v=0;v<u.length;v++)v>S?_[E++]=[u[v][0]+360,u[v][1]]:v===S?(_[E++]=u[v],_[E++]=[u[v][0],-90]):_[E++]=u[v];var L=r.tester(_);L.pts.pop(),m.push(L)}:function(u){m.push(r.tester(u))},g.type){case"MultiPolygon":for(f=0;f<y.length;f++)for(x=0;x<y[f].length;x++)h(y[f][x]);break;case"Polygon":for(f=0;f<y.length;f++)h(y[f])}return m},getTraceGeojson:i,extractTraceFeature:function(c){var h=c[0].trace,f=i(h);if(!f)return!1;var x,v={},g=[];for(x=0;x<h._length;x++){var y=c[x];(y.loc||0===y.loc)&&(v[y.loc]=y)}function p(u){var S=o(u,h.featureidkey||"id").get(),_=v[S];if(_){var E=u.geometry;if("Polygon"===E.type||"MultiPolygon"===E.type){var L={type:"Feature",id:S,geometry:E,properties:{}};L.properties.ct=function(C){var P,I=C.geometry;if("MultiPolygon"===I.type)for(var j=I.coordinates,R=0,H=0;H<j.length;H++){var F={type:"Polygon",coordinates:j[H]},U=l.default(F);U>R&&(R=U,P=F)}else P=I;return T.default(P).geometry.coordinates}(L),_.fIn=u,_.fOut=L,g.push(L)}else s.log(["Location",_.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[S]}switch(f.type){case"FeatureCollection":var m=f.features;for(x=0;x<m.length;x++)p(m[x]);break;case"Feature":p(f);break;default:return s.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in v)s.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},f=[];function x(p){return new Promise(function(m,w){k.json(p,function(u,S){return u?(delete h[p],w(new Error(404===u.status?'GeoJSON at URL "'+p+'" does not exist.':"Unexpected error while fetching from "+p))):(h[p]=S,m(S))})})}function v(p){return new Promise(function(m,w){var u=0,S=setInterval(function(){return h[p]&&"pending"!==h[p]?(clearInterval(S),m(h[p])):u>100?(clearInterval(S),w("Unexpected error while fetching from "+p)):void u++},50)})}for(var g=0;g<c.length;g++){var y=c[g][0].trace.geojson;"string"==typeof y&&(h[y]?"pending"===h[y]&&f.push(v(y)):(h[y]="pending",f.push(x(y))))}return f},computeBbox:function(c){return b.default(c)}}},18214:function(Q,z,e){"use strict";var k=e(50606).BADNUM;z.calcTraceToLineCoords=function(A){for(var l=A[0].trace.connectgaps,T=[],b=[],d=0;d<A.length;d++){var s=A[d].lonlat;s[0]!==k?b.push(s):!l&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},z.makeLine=function(A){return 1===A.length?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A}},z.makePolygon=function(A){if(1===A.length)return{type:"Polygon",coordinates:A};for(var l=new Array(A.length),T=0;T<A.length;T++)l[T]=[A[T]];return{type:"MultiPolygon",coordinates:l}},z.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(Q,z,e){"use strict";var k,A,l,T=e(64872).mod;function b(s,t,o,r,n,a,i,c){var h=o-s,f=n-s,x=i-n,v=r-t,g=a-t,y=c-a,p=h*y-x*v;if(0===p)return null;var m=(f*y-x*g)/p,w=(f*v-h*g)/p;return w<0||w>1||m<0||m>1?null:{x:s+h*m,y:t+v*m}}function d(s,t,o,r,n){var a=r*s+n*t;if(a<0)return r*r+n*n;if(a>o){var i=r-s,c=n-t;return i*i+c*c}var h=r*t-n*s;return h*h/o}z.segmentsIntersect=b,z.segmentDistance=function(s,t,o,r,n,a,i,c){if(b(s,t,o,r,n,a,i,c))return 0;var h=o-s,f=r-t,x=i-n,v=c-a,g=h*h+f*f,y=x*x+v*v,p=Math.min(d(h,f,g,n-s,a-t),d(h,f,g,i-s,c-t),d(x,v,y,s-n,t-a),d(x,v,y,o-n,r-a));return Math.sqrt(p)},z.getTextLocation=function(s,t,o,r){if(s===A&&r===l||(k={},A=s,l=r),k[o])return k[o];var n=s.getPointAtLength(T(o-r/2,t)),a=s.getPointAtLength(T(o+r/2,t)),i=Math.atan((a.y-n.y)/(a.x-n.x)),c=s.getPointAtLength(T(o,t)),h={x:(4*c.x+n.x+a.x)/6,y:(4*c.y+n.y+a.y)/6,theta:i};return k[o]=h,h},z.clearLocationCache=function(){A=null},z.getVisibleSegment=function(s,t,o){var r,n,a=t.left,i=t.right,c=t.top,h=t.bottom,f=0,x=s.getTotalLength(),v=x;function g(p){var m=s.getPointAtLength(p);0===p?r=m:p===x&&(n=m);var w=m.x<a?a-m.x:m.x>i?m.x-i:0,u=m.y<c?c-m.y:m.y>h?m.y-h:0;return Math.sqrt(w*w+u*u)}for(var y=g(f);y;){if((f+=y+o)>v)return;y=g(f)}for(y=g(v);y;){if(f>(v-=y+o))return;y=g(v)}return{min:f,max:v,len:v-f,total:x,isClosed:0===f&&v===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},z.findPointOnPath=function(s,t,o,r){for(var n,a,i,c=(r=r||{}).pathLength||s.getTotalLength(),h=r.tolerance||.001,f=r.iterationLimit||30,x=s.getPointAtLength(0)[o]>s.getPointAtLength(c)[o]?-1:1,v=0,g=0,y=c;v<f;){if(i=(a=s.getPointAtLength(n=(g+y)/2))[o]-t,Math.abs(i)<h)return a;x*i>0?y=n:g=n,v++}return a}},81697:function(Q,z,e){"use strict";var k=e(92770),A=e(84267),l=e(25075),T=e(21081),b=e(22399).defaultLine,d=e(73627).isArrayOrTypedArray,s=l(b);function t(n,a){var i=n;return i[3]*=a,i}function o(n){if(k(n))return s;var a=l(n);return a.length?a:s}function r(n){return k(n)?n:1}Q.exports={formatColor:function(n,a,i){var c,h,f,x,v,g=n.color,y=d(g),p=d(a),m=T.extractOpts(n),w=[];if(c=void 0!==m.colorscale?T.makeColorScaleFuncFromTrace(n):o,h=y?function(S,_){return void 0===S[_]?s:l(c(S[_]))}:o,f=p?function(S,_){return void 0===S[_]?1:r(S[_])}:r,y||p)for(var u=0;u<i;u++)x=h(g,u),v=f(a,u),w[u]=t(x,v);else w=t(l(g),a);return w},parseColorScale:function(n){var a=T.extractOpts(n),i=a.colorscale;return a.reversescale&&(i=T.flipScale(a.colorscale)),i.map(function(c){var h=c[0],f=A(c[1]).toRgb();return{index:h,rgb:[f.r,f.g,f.b,f.a]}})}}},28984:function(Q,z,e){"use strict";var k=e(23389);function A(l){return[l]}Q.exports={keyFun:function(l){return l.key},repeat:A,descend:k,wrap:A,unwrap:function(l){return l[0]}}},23389:function(Q){"use strict";Q.exports=function(z){return z}},39240:function(Q){"use strict";Q.exports=function(z,e){if(!e)return z;var k=1/Math.abs(e),A=k>1?(k*z+k*e)/k:z+e,l=String(A).length;if(l>16){var T=String(e).length;if(l>=String(z).length+T){var b=parseFloat(A).toPrecision(12);-1===b.indexOf("e+")&&(A=+b)}}return A}},71828:function(Q,z,e){"use strict";var k=e(39898),A=e(84096).g0,l=e(60721).WU,T=e(92770),b=e(50606),d=b.FP_SAFE,s=-d,t=b.BADNUM,o=Q.exports={};o.adjustFormat=function(Z){return!Z||/^\d[.]\df/.test(Z)||/[.]\d%/.test(Z)?Z:"0.f"===Z?"~f":/^\d%/.test(Z)?"~%":/^\ds/.test(Z)?"~s":!/^[~,.0$]/.test(Z)&&/[&fps]/.test(Z)?"~"+Z:Z};var r={};o.warnBadFormat=function(Z){var V=String(Z);r[V]||(r[V]=1,o.warn('encountered bad format: "'+V+'"'))},o.noFormat=function(Z){return String(Z)},o.numberFormat=function(Z){var V;try{V=l(o.adjustFormat(Z))}catch{return o.warnBadFormat(Z),o.noFormat}return V},o.nestedProperty=e(65487),o.keyedContainer=e(66636),o.relativeAttr=e(6962),o.isPlainObject=e(41965),o.toLogRange=e(58163),o.relinkPrivateKeys=e(51332);var n=e(73627);o.isTypedArray=n.isTypedArray,o.isArrayOrTypedArray=n.isArrayOrTypedArray,o.isArray1D=n.isArray1D,o.ensureArray=n.ensureArray,o.concat=n.concat,o.maxRowLength=n.maxRowLength,o.minRowLength=n.minRowLength;var a=e(64872);o.mod=a.mod,o.modHalf=a.modHalf;var i=e(96554);o.valObjectMeta=i.valObjectMeta,o.coerce=i.coerce,o.coerce2=i.coerce2,o.coerceFont=i.coerceFont,o.coercePattern=i.coercePattern,o.coerceHoverinfo=i.coerceHoverinfo,o.coerceSelectionMarkerOpacity=i.coerceSelectionMarkerOpacity,o.validate=i.validate;var c=e(41631);o.dateTime2ms=c.dateTime2ms,o.isDateTime=c.isDateTime,o.ms2DateTime=c.ms2DateTime,o.ms2DateTimeLocal=c.ms2DateTimeLocal,o.cleanDate=c.cleanDate,o.isJSDate=c.isJSDate,o.formatDate=c.formatDate,o.incrementMonth=c.incrementMonth,o.dateTick0=c.dateTick0,o.dfltRange=c.dfltRange,o.findExactDates=c.findExactDates,o.MIN_MS=c.MIN_MS,o.MAX_MS=c.MAX_MS;var h=e(65888);o.findBin=h.findBin,o.sorterAsc=h.sorterAsc,o.sorterDes=h.sorterDes,o.distinctVals=h.distinctVals,o.roundUp=h.roundUp,o.sort=h.sort,o.findIndexOfMin=h.findIndexOfMin,o.sortObjectKeys=e(78607);var f=e(80038);o.aggNums=f.aggNums,o.len=f.len,o.mean=f.mean,o.median=f.median,o.midRange=f.midRange,o.variance=f.variance,o.stdev=f.stdev,o.interp=f.interp;var x=e(35657);o.init2dArray=x.init2dArray,o.transposeRagged=x.transposeRagged,o.dot=x.dot,o.translationMatrix=x.translationMatrix,o.rotationMatrix=x.rotationMatrix,o.rotationXYMatrix=x.rotationXYMatrix,o.apply3DTransform=x.apply3DTransform,o.apply2DTransform=x.apply2DTransform,o.apply2DTransform2=x.apply2DTransform2,o.convertCssMatrix=x.convertCssMatrix,o.inverseTransformMatrix=x.inverseTransformMatrix;var v=e(26348);o.deg2rad=v.deg2rad,o.rad2deg=v.rad2deg,o.angleDelta=v.angleDelta,o.angleDist=v.angleDist,o.isFullCircle=v.isFullCircle,o.isAngleInsideSector=v.isAngleInsideSector,o.isPtInsideSector=v.isPtInsideSector,o.pathArc=v.pathArc,o.pathSector=v.pathSector,o.pathAnnulus=v.pathAnnulus;var g=e(99863);o.isLeftAnchor=g.isLeftAnchor,o.isCenterAnchor=g.isCenterAnchor,o.isRightAnchor=g.isRightAnchor,o.isTopAnchor=g.isTopAnchor,o.isMiddleAnchor=g.isMiddleAnchor,o.isBottomAnchor=g.isBottomAnchor;var y=e(87642);o.segmentsIntersect=y.segmentsIntersect,o.segmentDistance=y.segmentDistance,o.getTextLocation=y.getTextLocation,o.clearLocationCache=y.clearLocationCache,o.getVisibleSegment=y.getVisibleSegment,o.findPointOnPath=y.findPointOnPath;var p=e(1426);o.extendFlat=p.extendFlat,o.extendDeep=p.extendDeep,o.extendDeepAll=p.extendDeepAll,o.extendDeepNoArrays=p.extendDeepNoArrays;var m=e(47769);o.log=m.log,o.warn=m.warn,o.error=m.error;var w=e(30587);o.counterRegex=w.counter;var u=e(79990);o.throttle=u.throttle,o.throttleDone=u.done,o.clearThrottle=u.clear;var S=e(24401);function _(Z){var V={};for(var W in Z)for(var X=Z[W],K=0;K<X.length;K++)V[X[K]]=+W;return V}o.getGraphDiv=S.getGraphDiv,o.isPlotDiv=S.isPlotDiv,o.removeElement=S.removeElement,o.addStyleRule=S.addStyleRule,o.addRelatedStyleRule=S.addRelatedStyleRule,o.deleteRelatedStyleRule=S.deleteRelatedStyleRule,o.getFullTransformMatrix=S.getFullTransformMatrix,o.getElementTransformMatrix=S.getElementTransformMatrix,o.getElementAndAncestors=S.getElementAndAncestors,o.equalDomRects=S.equalDomRects,o.clearResponsive=e(86367),o.preserveDrawingBuffer=e(45142),o.makeTraceGroups=e(77310),o._=e(15867),o.notifier=e(75046),o.filterUnique=e(75744),o.filterVisible=e(76756),o.pushUnique=e(75138),o.increment=e(39240),o.cleanNumber=e(95218),o.ensureNumber=function(Z){return T(Z)?(Z=Number(Z))>d||Z<s?t:Z:t},o.isIndex=function(Z,V){return!(void 0!==V&&Z>=V)&&T(Z)&&Z>=0&&Z%1==0},o.noop=e(64213),o.identity=e(23389),o.repeat=function(Z,V){for(var W=new Array(V),X=0;X<V;X++)W[X]=Z;return W},o.swapAttrs=function(Z,V,W,X){W||(W="x"),X||(X="y");for(var K=0;K<V.length;K++){var ne=V[K],re=o.nestedProperty(Z,ne.replace("?",W)),ae=o.nestedProperty(Z,ne.replace("?",X)),le=re.get();re.set(ae.get()),ae.set(le)}},o.raiseToTop=function(Z){Z.parentNode.appendChild(Z)},o.cancelTransition=function(Z){return Z.transition().duration(0)},o.constrain=function(Z,V,W){return V>W?Math.max(W,Math.min(V,Z)):Math.max(V,Math.min(W,Z))},o.bBoxIntersect=function(Z,V,W){return Z.left<=V.right+(W=W||0)&&V.left<=Z.right+W&&Z.top<=V.bottom+W&&V.top<=Z.bottom+W},o.simpleMap=function(Z,V,W,X,K){for(var ne=Z.length,re=new Array(ne),ae=0;ae<ne;ae++)re[ae]=V(Z[ae],W,X,K);return re},o.randstr=function Z(V,W,X,K){if(X||(X=16),void 0===W&&(W=24),W<=0)return"0";var ne,re,ae=Math.log(Math.pow(2,W))/Math.log(X),le="";for(ne=2;ae===1/0;ne*=2)ae=Math.log(Math.pow(2,W/ne))/Math.log(X)*ne;var pe=ae-Math.floor(ae);for(ne=0;ne<Math.floor(ae);ne++)le=Math.floor(Math.random()*X).toString(X)+le;pe&&(re=Math.pow(X,pe),le=Math.floor(Math.random()*re).toString(X)+le);var xe=parseInt(le,X);return V&&V[le]||xe!==1/0&&xe>=Math.pow(2,W)?K>10?(o.warn("randstr failed uniqueness"),le):Z(V,W,X,(K||0)+1):le},o.OptionControl=function(Z,V){Z||(Z={}),V||(V="opt");var W={optionList:[],_newoption:function(X){X[V]=Z,W[X.name]=X,W.optionList.push(X)}};return W["_"+V]=Z,W},o.smooth=function(Z,V){if((V=Math.round(V)||0)<2)return Z;var W,X,K,ne,re=Z.length,ae=2*re,le=2*V-1,pe=new Array(le),xe=new Array(re);for(W=0;W<le;W++)pe[W]=(1-Math.cos(Math.PI*(W+1)/V))/(2*V);for(W=0;W<re;W++){for(ne=0,X=0;X<le;X++)(K=W+X+1-V)<-re?K-=ae*Math.round(K/ae):K>=ae&&(K-=ae*Math.floor(K/ae)),K<0?K=-1-K:K>=re&&(K=ae-1-K),ne+=Z[K]*pe[X];xe[W]=ne}return xe},o.syncOrAsync=function(Z,V,W){var X;function K(){return o.syncOrAsync(Z,V,W)}for(;Z.length;)if((X=(0,Z.splice(0,1)[0])(V))&&X.then)return X.then(K);return W&&W(V)},o.stripTrailingSlash=function(Z){return"/"===Z.substr(-1)?Z.substr(0,Z.length-1):Z},o.noneOrAll=function(Z,V,W){if(Z){var X,K=!1,ne=!0;for(X=0;X<W.length;X++)null!=Z[W[X]]?K=!0:ne=!1;if(K&&!ne)for(X=0;X<W.length;X++)Z[W[X]]=V[W[X]]}},o.mergeArray=function(Z,V,W,X){var K="function"==typeof X;if(o.isArrayOrTypedArray(Z))for(var ne=Math.min(Z.length,V.length),re=0;re<ne;re++){var ae=Z[re];V[re][W]=K?X(ae):ae}},o.mergeArrayCastPositive=function(Z,V,W){return o.mergeArray(Z,V,W,function(X){var K=+X;return isFinite(K)&&K>0?K:0})},o.fillArray=function(Z,V,W,X){if(X=X||o.identity,o.isArrayOrTypedArray(Z))for(var K=0;K<V.length;K++)V[K][W]=X(Z[K])},o.castOption=function(Z,V,W,X){X=X||o.identity;var K=o.nestedProperty(Z,W).get();return o.isArrayOrTypedArray(K)?Array.isArray(V)&&o.isArrayOrTypedArray(K[V[0]])?X(K[V[0]][V[1]]):X(K[V]):K},o.extractOption=function(Z,V,W,X){if(W in Z)return Z[W];var K=o.nestedProperty(V,X).get();return Array.isArray(K)?void 0:K},o.tagSelected=function(Z,V,W){var X,K,ne=V.selectedpoints,re=V._indexToPoints;re&&(X=_(re));for(var ae=0;ae<ne.length;ae++){var le=ne[ae];if(o.isIndex(le)||o.isArrayOrTypedArray(le)&&o.isIndex(le[0])&&o.isIndex(le[1])){var pe=X?X[le]:le,xe=W?W[pe]:pe;void 0!==(K=xe)&&K<Z.length&&(Z[xe].selected=1)}}},o.selIndices2selPoints=function(Z){var V=Z.selectedpoints,W=Z._indexToPoints;if(W){for(var X=_(W),K=[],ne=0;ne<V.length;ne++){var re=V[ne];if(o.isIndex(re)){var ae=X[re];o.isIndex(ae)&&K.push(ae)}}return K}return V},o.getTargetArray=function(Z,V){var W=V.target;if("string"==typeof W&&W){var X=o.nestedProperty(Z,W).get();return!!Array.isArray(X)&&X}return!!Array.isArray(W)&&W},o.minExtend=function(Z,V){var W={};"object"!=typeof V&&(V={});var X,K,ne,re=Object.keys(Z);for(X=0;X<re.length;X++)ne=Z[K=re[X]],"_"!==K.charAt(0)&&"function"!=typeof ne&&(W[K]="module"===K?ne:Array.isArray(ne)?"colorscale"===K?ne.slice():ne.slice(0,3):o.isTypedArray(ne)?ne.subarray(0,3):ne&&"object"==typeof ne?o.minExtend(Z[K],V[K]):ne);for(re=Object.keys(V),X=0;X<re.length;X++)"object"==typeof(ne=V[K=re[X]])&&K in W&&"object"==typeof W[K]||(W[K]=ne);return W},o.titleCase=function(Z){return Z.charAt(0).toUpperCase()+Z.substr(1)},o.containsAny=function(Z,V){for(var W=0;W<V.length;W++)if(-1!==Z.indexOf(V[W]))return!0;return!1},o.isIE=function(){return void 0!==window.navigator.msSaveBlob};var E=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;o.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var Z=C.exec(window.navigator.userAgent);if(Z&&2===Z.length){var V=parseInt(Z[1]);if(!isNaN(V))return V}return null},o.isD3Selection=function(Z){return Z instanceof k.selection},o.ensureSingle=function(Z,V,W,X){var K=Z.select(V+(W?"."+W:""));if(K.size())return K;var ne=Z.append(V);return W&&ne.classed(W,!0),X&&ne.call(X),ne},o.ensureSingleById=function(Z,V,W,X){var K=Z.select(V+"#"+W);if(K.size())return K;var ne=Z.append(V).attr("id",W);return X&&ne.call(X),ne},o.objectFromPath=function(Z,V){for(var W,X=Z.split("."),K=W={},ne=0;ne<X.length;ne++){var re=X[ne],ae=null,le=X[ne].match(/(.*)\[([0-9]+)\]/);le?(ae=le[2],(W=W[re=le[1]]=[])[ae]=ne===X.length-1?V:{},W=W[ae]):(W[re]=ne===X.length-1?V:{},W=W[re])}return K};var P=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;o.expandObjectPaths=function(Z){var V,W,X,K,ne,re,ae;if("object"==typeof Z&&!Array.isArray(Z))for(W in Z)Z.hasOwnProperty(W)&&((V=W.match(P))?(K=Z[W],X=V[1],delete Z[W],Z[X]=o.extendDeepNoArrays(Z[X]||{},o.objectFromPath(W,o.expandObjectPaths(K))[X])):(V=W.match(I))?(K=Z[W],X=V[1],ne=parseInt(V[2]),delete Z[W],Z[X]=Z[X]||[],"."===V[3]?(ae=V[4],re=Z[X][ne]=Z[X][ne]||{},o.extendDeepNoArrays(re,o.objectFromPath(ae,o.expandObjectPaths(K)))):Z[X][ne]=o.expandObjectPaths(K)):Z[W]=o.expandObjectPaths(Z[W]));return Z},o.numSeparate=function(Z,V,W){if(W||(W=!1),"string"!=typeof V||0===V.length)throw new Error("Separator string required for formatting!");"number"==typeof Z&&(Z=String(Z));var X=/(\d+)(\d{3})/,K=V.charAt(0),ne=V.charAt(1),re=Z.split("."),ae=re[0],le=re.length>1?K+re[1]:"";if(ne&&(re.length>1||ae.length>4||W))for(;X.test(ae);)ae=ae.replace(X,"$1"+ne+"$2");return ae+le},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var j=/^\w*$/;o.templateString=function(Z,V){var W={};return Z.replace(o.TEMPLATE_STRING_REGEX,function(X,K){var ne;return j.test(K)?ne=V[K]:(W[K]=W[K]||o.nestedProperty(V,K).get,ne=W[K]()),o.isValidTextValue(ne)?ne:""})};var R={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return U.apply(R,arguments)};var H={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return U.apply(H,arguments)};var F=/^[:|\|]/;function U(Z,V,W){var X=this,K=arguments;V||(V={});var ne={};return Z.replace(o.TEMPLATE_STRING_REGEX,function(re,ae,le){var pe,xe,ye,se="_xother"===ae||"_yother"===ae,fe="_xother_"===ae||"_yother_"===ae,Ee="xother_"===ae||"yother_"===ae,de="xother"===ae||"yother"===ae||se||Ee||fe,we=ae;if((se||fe)&&(we=we.substring(1)),(Ee||fe)&&(we=we.substring(0,we.length-1)),de){if(void 0===(pe=V[we]))return""}else for(ye=3;ye<K.length;ye++)if(xe=K[ye]){if(xe.hasOwnProperty(we)){pe=xe[we];break}if(j.test(we)||(pe=o.nestedProperty(xe,we).get(),(pe=ne[we]||o.nestedProperty(xe,we).get())&&(ne[we]=pe)),void 0!==pe)break}if(void 0===pe&&X)return X.count<X.max&&(o.warn("Variable '"+we+"' in "+X.name+" could not be found!"),pe=re),X.count===X.max&&o.warn("Too many "+X.name+" warnings - additional warnings will be suppressed"),X.count++,re;if(le){var ke;if(":"===le[0]&&(pe=(ke=W?W.numberFormat:o.numberFormat)(le.replace(F,""))(pe)),"|"===le[0]){ke=W?W.timeFormat:A;var Te=o.dateTime2ms(pe);pe=o.formatDate(Te,le.replace(F,""),!1,ke)}}else{var $=we+"Label";V.hasOwnProperty($)&&(pe=V[$])}return de&&(pe="("+pe+")",(se||fe)&&(pe=" "+pe),(Ee||fe)&&(pe+=" ")),pe})}o.subplotSort=function(Z,V){for(var W=Math.min(Z.length,V.length)+1,X=0,K=0,ne=0;ne<W;ne++){var re=Z.charCodeAt(ne)||0,ae=V.charCodeAt(ne)||0,le=re>=48&&re<=57,pe=ae>=48&&ae<=57;if(le&&(X=10*X+re-48),pe&&(K=10*K+ae-48),!le||!pe){if(X!==K)return X-K;if(re!==ae)return re-ae}}return K-X};var B=2e9;o.seedPseudoRandom=function(){B=2e9},o.pseudoRandom=function(){var Z=B;return B=(69069*B+1)%4294967296,Math.abs(B-Z)<429496729?o.pseudoRandom():B/4294967296},o.fillText=function(Z,V,W){var X=Array.isArray(W)?function(re){W.push(re)}:function(re){W.text=re},K=o.extractOption(Z,V,"htx","hovertext");if(o.isValidTextValue(K))return X(K);var ne=o.extractOption(Z,V,"tx","text");return o.isValidTextValue(ne)?X(ne):void 0},o.isValidTextValue=function(Z){return Z||0===Z},o.formatPercent=function(Z,V){V=V||0;for(var W=(Math.round(100*Z*Math.pow(10,V))*Math.pow(.1,V)).toFixed(V)+"%",X=0;X<V;X++)-1!==W.indexOf(".")&&(W=(W=W.replace("0%","%")).replace(".%","%"));return W},o.isHidden=function(Z){var V=window.getComputedStyle(Z).display;return!V||"none"===V},o.strTranslate=function(Z,V){return Z||V?"translate("+Z+","+V+")":""},o.strRotate=function(Z){return Z?"rotate("+Z+")":""},o.strScale=function(Z){return 1!==Z?"scale("+Z+")":""},o.getTextTransform=function(Z){var V=Z.noCenter,W=Z.textX,X=Z.textY,le=Z.rotate,pe=Z.scale;return pe?pe>1&&(pe=1):pe=0,o.strTranslate(Z.targetX-pe*(W+(Z.anchorX||0)),Z.targetY-pe*(X+(Z.anchorY||0)))+o.strScale(pe)+(le?"rotate("+le+(V?"":" "+W+" "+X)+")":"")},o.setTransormAndDisplay=function(Z,V){Z.attr("transform",o.getTextTransform(V)),Z.style("display",V.scale?null:"none")},o.ensureUniformFontSize=function(Z,V){var W=o.extendFlat({},V);return W.size=Math.max(V.size,Z._fullLayout.uniformtext.minsize||0),W},o.join2=function(Z,V,W){var X=Z.length;return X>1?Z.slice(0,-1).join(V)+W+Z[X-1]:Z.join(V)},o.bigFont=function(Z){return Math.round(1.2*Z)};var N=o.getFirefoxVersion(),J=null!==N&&N<86;o.getPositionFromD3Event=function(){return J?[k.event.layerX,k.event.layerY]:[k.event.offsetX,k.event.offsetY]}},41965:function(Q){"use strict";Q.exports=function(z){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(z):"[object Object]"===Object.prototype.toString.call(z)&&Object.getPrototypeOf(z).hasOwnProperty("hasOwnProperty")}},66636:function(Q,z,e){"use strict";var k=e(65487),A=/^\w*$/;Q.exports=function(l,T,b,d){var s,t,o;b=b||"name",d=d||"value";var r={};T&&T.length?(o=k(l,T),t=o.get()):t=l,T=T||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][b]]=s;var a=A.test(d),i={set:function(c,h){var f=null===h?4:0;if(!t){if(!o||4===f)return;o.set(t=[])}var x=n[c];if(void 0===x){if(4===f)return;f|=3,n[c]=x=t.length}else h!==(a?t[x][d]:k(t[x],d).get())&&(f|=2);var v=t[x]=t[x]||{};return v[b]=c,a?v[d]=h:k(v,d).set(h),null!==h&&(f&=-5),r[x]=r[x]|f,i},get:function(c){if(t){var h=n[c];return void 0===h?void 0:a?t[h][d]:k(t[h],d).get()}},rename:function(c,h){var f=n[c];return void 0===f||(r[f]=1|r[f],n[h]=f,delete n[c],t[f][b]=h),i},remove:function(c){var h=n[c];if(void 0===h)return i;var f=t[h];if(Object.keys(f).length>2)return r[h]=2|r[h],i.set(c,null);if(a){for(s=h;s<t.length;s++)r[s]=3|r[s];for(s=h;s<t.length;s++)n[t[s][b]]--;t.splice(h,1),delete n[c]}else k(f,d).set(null),r[h]=6|r[h];return i},constructUpdate:function(){for(var c,h,f={},x=Object.keys(r),v=0;v<x.length;v++)c=T+"["+(h=x[v])+"]",t[h]?(1&r[h]&&(f[c+"."+b]=t[h][b]),2&r[h]&&(f[c+"."+d]=a?4&r[h]?null:t[h][d]:4&r[h]?null:k(t[h],d).get())):f[c]=null;return f}};return i}},15867:function(Q,z,e){"use strict";var k=e(73972);Q.exports=function(A,l){for(var T=A._context.locale,b=0;b<2;b++){for(var d=A._context.locales,s=0;s<2;s++){var t=(d[T]||{}).dictionary;if(t){var o=t[l];if(o)return o}d=k.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function(Q,z,e){"use strict";var k=e(72075).dfltConfig,A=e(75046),l=Q.exports={};l.log=function(){var T;if(k.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(k.notifyOnLogging>1){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);A(d.join("<br>"),"long")}},l.warn=function(){var T;if(k.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(k.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);A(d.join("<br>"),"stick")}},l.error=function(){var T;if(k.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(k.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);A(d.join("<br>"),"stick")}}},77310:function(Q,z,e){"use strict";var k=e(39898);Q.exports=function(A,l,T){var b=A.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var d=A.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][d]=k.select(this)}),b}},35657:function(Q,z,e){"use strict";var k=e(79576);z.init2dArray=function(A,l){for(var T=new Array(A),b=0;b<A;b++)T[b]=new Array(l);return T},z.transposeRagged=function(A){var l,T,b=0,d=A.length;for(l=0;l<d;l++)b=Math.max(b,A[l].length);var s=new Array(b);for(l=0;l<b;l++)for(s[l]=new Array(d),T=0;T<d;T++)s[l][T]=A[T][l];return s},z.dot=function(A,l){if(!A.length||!l.length||A.length!==l.length)return null;var T,b,d=A.length;if(A[0].length)for(T=new Array(d),b=0;b<d;b++)T[b]=z.dot(A[b],l);else if(l[0].length){var s=z.transposeRagged(l);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=z.dot(A,s[b])}else for(T=0,b=0;b<d;b++)T+=A[b]*l[b];return T},z.translationMatrix=function(A,l){return[[1,0,A],[0,1,l],[0,0,1]]},z.rotationMatrix=function(A){var l=A*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},z.rotationXYMatrix=function(A,l,T){return z.dot(z.dot(z.translationMatrix(l,T),z.rotationMatrix(A)),z.translationMatrix(-l,-T))},z.apply3DTransform=function(A){return function(){var l=arguments,T=1===arguments.length?l[0]:[l[0],l[1],l[2]||0];return z.dot(A,[T[0],T[1],T[2],1]).slice(0,3)}},z.apply2DTransform=function(A){return function(){var l=arguments;3===l.length&&(l=l[0]);var T=1===arguments.length?l[0]:[l[0],l[1]];return z.dot(A,[T[0],T[1],1]).slice(0,2)}},z.apply2DTransform2=function(A){var l=z.apply2DTransform(A);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},z.convertCssMatrix=function(A){if(A){var l=A.length;if(16===l)return A;if(6===l)return[A[0],A[1],0,0,A[2],A[3],0,0,0,0,1,0,A[4],A[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},z.inverseTransformMatrix=function(A){var l=[];return k.invert(l,A),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function(Q){"use strict";Q.exports={mod:function(z,e){var k=z%e;return k<0?k+e:k},modHalf:function(z,e){return Math.abs(z)>e/2?z-Math.round(z/e)*e:z}}},65487:function(Q,z,e){"use strict";var k=e(92770),A=e(73627).isArrayOrTypedArray;function l(r,n){return function(){var a,i,c,h,f,x=r;for(h=0;h<n.length-1;h++){if(-1===(a=n[h])){for(i=!0,c=[],f=0;f<x.length;f++)c[f]=l(x[f],n.slice(h+1))(),c[f]!==c[0]&&(i=!1);return i?c[0]:c}if("number"==typeof a&&!A(x)||"object"!=typeof(x=x[a])||null===x)return}if("object"==typeof x&&null!==x&&null!==(c=x[n[h]]))return c}}Q.exports=function(r,n){if(k(n))n=String(n);else if("string"!=typeof n||"[-1]"===n.substr(n.length-4))throw"bad property string";for(var a,i,c,h=0,f=n.split(".");h<f.length;){if(a=String(f[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])f[h]=a[1];else{if(0!==h)throw"bad property string";f.splice(0,1)}for(i=a[2].substr(1,a[2].length-2).split("]["),c=0;c<i.length;c++)h++,f.splice(h,0,Number(i[c]))}h++}return"object"!=typeof r?{set:function(){throw"bad container"},get:function(){},astr:n,parts:f,obj:r}:{set:d(r,f,n),get:l(r,f),astr:n,parts:f,obj:r}};var T=/(^|\.)args\[/;function b(r,n){return void 0===r||null===r&&!n.match(T)}function d(r,n,a){return function(i){var c,h,f=r,x="",v=[[r,x]],g=b(i,a);for(h=0;h<n.length-1;h++){if("number"==typeof(c=n[h])&&!A(f))throw"array index but container is not an array";if(-1===c){if(g=!t(f,n.slice(h+1),i,a))break;return}if(!o(f,c,n[h+1],g))break;if("object"!=typeof(f=f[c])||null===f)throw"container is not an object";x=s(x,c),v.push([f,x])}if(g){if(h===n.length-1&&(delete f[n[h]],Array.isArray(f)&&+n[h]==f.length-1))for(;f.length&&void 0===f[f.length-1];)f.pop()}else f[n[h]]=i}}function s(r,n){var a=n;return k(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,i){var c,h=A(a),f=!0,x=a,v=i.replace("-1",0),g=!h&&b(a,v),y=n[0];for(c=0;c<r.length;c++)v=i.replace("-1",c),h&&(g=b(x=a[c%a.length],v)),g&&(f=!1),o(r,c,y,g)&&d(r[c],n,i.replace("-1",c))(x);return f}function o(r,n,a,i){if(void 0===r[n]){if(i)return!1;r[n]="number"==typeof a?[]:{}}return!0}},64213:function(Q){"use strict";Q.exports=function(){}},75046:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=[];Q.exports=function(T,b){if(-1===l.indexOf(T)){l.push(T);var d=1e3;A(b)?d=b:"long"===b&&(d=3e3);var s=k.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var r=k.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=o.split(/<br\s*\/?>/g),i=0;i<a.length;i++)i&&n.append("br"),n.append("span").text(a[i]);"stick"===b?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(d).call(t)})}function t(o){o.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);-1!==n&&l.splice(n,1),k.select(this).remove()})}}},39918:function(Q,z,e){"use strict";var k=e(6964),A="data-savedcursor";Q.exports=function(l,T){var b=l.attr(A);if(T){if(!b){for(var d=(l.attr("class")||"").split(" "),s=0;s<d.length;s++){var t=d[s];0===t.indexOf("cursor-")&&l.attr(A,t.substr(7)).classed(t,!1)}l.attr(A)||l.attr(A,"!!")}k(l,T)}else b&&(l.attr(A,null),"!!"===b?k(l):k(l,b))}},61082:function(Q,z,e){"use strict";var k=e(35657).dot,A=e(50606).BADNUM,l=Q.exports={};l.tester=function(T){var b,d=T.slice(),s=d[0][0],t=s,o=d[0][1],r=o;for(d[d.length-1][0]===d[0][0]&&d[d.length-1][1]===d[0][1]||d.push(d[0]),b=1;b<d.length;b++)s=Math.min(s,d[b][0]),t=Math.max(t,d[b][0]),o=Math.min(o,d[b][1]),r=Math.max(r,d[b][1]);var n,a=!1;5===d.length&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(a=!0,n=function(h){return h[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(a=!0,n=function(h){return h[1]===d[0][1]}));var i=!0,c=d[0];for(b=1;b<d.length;b++)if(c[0]!==d[b][0]||c[1]!==d[b][1]){i=!1;break}return{xmin:s,xmax:t,ymin:o,ymax:r,pts:d,contains:a?function(h,f){var x=h[0],v=h[1];return!(x===A||x<s||x>t||v===A||v<o||v>r||f&&n(h))}:function(h,f){var x=h[0],v=h[1];if(x===A||x<s||x>t||v===A||v<o||v>r)return!1;var g,y,p,m,w,u=d.length,S=d[0][0],_=d[0][1],E=0;for(g=1;g<u;g++)if(y=S,p=_,S=d[g][0],_=d[g][1],!(x<(m=Math.min(y,S))||x>Math.max(y,S)||v>Math.max(p,_)))if(v<Math.min(p,_))x!==m&&E++;else{if(v===(w=S===y?v:p+(x-y)*(_-p)/(S-y)))return 1!==g||!f;v<=w&&x!==m&&E++}return E%2==1},isRect:a,degenerate:i}},l.isSegmentBent=function(T,b,d,s){var t,o,r,n=T[b],a=[T[d][0]-n[0],T[d][1]-n[1]],i=k(a,a),c=Math.sqrt(i),h=[-a[1]/c,a[0]/c];for(t=b+1;t<d;t++)if((r=k(o=[T[t][0]-n[0],T[t][1]-n[1]],a))<0||r>i||Math.abs(k(o,h))>s)return!0;return!1},l.filter=function(T,b){var d=[T[0]],s=0,t=0;function o(r){T.push(r);var n=d.length,a=s;d.splice(t+1);for(var i=a+1;i<T.length;i++)(i===T.length-1||l.isSegmentBent(T,a,i+1,b))&&(d.push(T[i]),d.length<n-2&&(s=i,t=d.length-1),a=i)}return T.length>1&&o(T.pop()),{addPt:o,raw:T,filtered:d}}},79749:function(Q,z,e){"use strict";var k=e(58617),A=e(98580);Q.exports=function(l,T,b){var d=l._fullLayout,s=!0;return d._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||d._has("parcoords")){try{t.regl=A({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(o){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:o,layer:t.key})},!1)}}),s||k({container:d._glcontainer.node()}),s}},45142:function(Q,z,e){"use strict";var k=e(92770),A=e(35791);Q.exports=function(l){var T,n;if("string"!=typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:(typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),n)))return!0;var b=A({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b)for(var d=T.split(" "),s=1;s<d.length;s++)if(-1!==d[s].indexOf("Safari"))for(var t=s-1;t>-1;t--){var o=d[t];if("Version/"===o.substr(0,8)){var r=o.substr(8).split(".")[0];if(k(r)&&(r=+r),r>=13)return!0}}return b}},75138:function(Q){"use strict";Q.exports=function(z,e){if(e instanceof RegExp){for(var k=e.toString(),A=0;A<z.length;A++)if(z[A]instanceof RegExp&&z[A].toString()===k)return z;z.push(e)}else!e&&0!==e||-1!==z.indexOf(e)||z.push(e);return z}},10847:function(Q,z,e){"use strict";var k=e(71828),A=e(72075).dfltConfig,l={add:function(T,b,d,s,t){var o,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),T.undoQueue.index+=1):o=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(b),o.undo.args.unshift(d),o.redo.calls.push(s),o.redo.args.push(t)),T.undoQueue.queue.length>A.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,d;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.undo.calls.length;d++)l.plotDo(T,b.undo.calls[d],b.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,d;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.redo.calls.length;d++)l.plotDo(T,b.redo.calls[d],b.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,d){T.autoplay=!0,d=function(s,t){for(var o,r=[],n=0;n<t.length;n++)r[n]=(o=t[n])===s?o:"object"==typeof o?Array.isArray(o)?k.extendDeep([],o):k.extendDeepAll({},o):o;return r}(T,d),b.apply(null,d)}};Q.exports=l},30587:function(Q,z){"use strict";z.counter=function(e,k,A,l){var T=(k||"")+(A?"":"$"),b=!1===l?"":"^";return"xy"===e?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function(Q){"use strict";var z=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;Q.exports=function(k,A){for(;A;){var l=k.match(z);if(l)k=l[1];else{if(!k.match(e))throw new Error("bad relativeAttr call:"+[k,A]);k=""}if("^"!==A.charAt(0))break;A=A.slice(1)}return k&&"["!==A.charAt(0)?k+"."+A:k+A}},51332:function(Q,z,e){"use strict";var k=e(73627).isArrayOrTypedArray,A=e(41965);Q.exports=function l(T,b){for(var d in b){var s=b[d],t=T[d];if(t!==s)if("_"===d.charAt(0)||"function"==typeof s){if(d in T)continue;T[d]=s}else if(k(s)&&k(t)&&A(s[0])){if("customdata"===d||"ids"===d)continue;for(var o=Math.min(s.length,t.length),r=0;r<o;r++)t[r]!==s[r]&&A(s[r])&&A(t[r])&&l(t[r],s[r])}else A(s)&&A(t)&&(l(t,s),Object.keys(t).length||delete T[d])}}},65888:function(Q,z,e){"use strict";var k=e(92770),A=e(47769),l=e(23389),T=e(50606).BADNUM,b=1e-9;function d(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function o(r,n){return r>=n}z.findBin=function(r,n,a){if(k(n.start))return a?Math.ceil((r-n.start)/n.size-b)-1:Math.floor((r-n.start)/n.size+b);var i,c,h=0,f=n.length,x=0,v=f>1?(n[f-1]-n[0])/(f-1):1;for(c=v>=0?a?d:s:a?o:t,r+=v*b*(a?-1:1)*(v>=0?1:-1);h<f&&x++<100;)c(n[i=Math.floor((h+f)/2)],r)?h=i+1:f=i;return x>90&&A.log("Long binary search..."),h-1},z.sorterAsc=function(r,n){return r-n},z.sorterDes=function(r,n){return n-r},z.distinctVals=function(r){var n,a=r.slice();for(a.sort(z.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var i,c=a[n]-a[0]||1,h=c/(n||1)/1e4,f=[],x=0;x<=n;x++){var v=a[x],g=v-i;void 0===i?(f.push(v),i=v):g>h&&(c=Math.min(c,g),f.push(v),i=v)}return{vals:f,minDiff:c}},z.roundUp=function(r,n,a){for(var i,c=0,h=n.length-1,f=0,x=a?0:1,v=a?1:0,g=a?Math.ceil:Math.floor;c<h&&f++<100;)n[i=g((c+h)/2)]<=r?c=i+x:h=i-v;return n[c]},z.sort=function(r,n){for(var a=0,i=0,c=1;c<r.length;c++){var h=n(r[c],r[c-1]);if(h<0?a=1:h>0&&(i=1),a&&i)return r.sort(n)}return i?r:r.reverse()},z.findIndexOfMin=function(r,n){n=n||l;for(var a,i=1/0,c=0;c<r.length;c++){var h=n(r[c]);h<i&&(i=h,a=c)}return a}},6964:function(Q){"use strict";Q.exports=function(z,e){(z.attr("class")||"").split(" ").forEach(function(k){0===k.indexOf("cursor-")&&z.classed(k,!1)}),e&&z.classed("cursor-"+e,!0)}},58617:function(Q,z,e){"use strict";var k=e(7901),A=function(){};Q.exports=function(l){for(var T in l)"function"==typeof l[T]&&(l[T]=A);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=k.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=k.lightLine,b.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",b.appendChild(d),l.container.appendChild(b),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(Q){"use strict";Q.exports=function(z){return Object.keys(z).sort()}},80038:function(Q,z,e){"use strict";var k=e(92770),A=e(73627).isArrayOrTypedArray;z.aggNums=function(l,T,b,d){var s,t;if((!d||d>b.length)&&(d=b.length),k(T)||(T=!1),A(b[0])){for(t=new Array(d),s=0;s<d;s++)t[s]=z.aggNums(l,T,b[s]);b=t}for(s=0;s<d;s++)k(T)?k(b[s])&&(T=l(+T,+b[s])):T=b[s];return T},z.len=function(l){return z.aggNums(function(T){return T+1},0,l)},z.mean=function(l,T){return T||(T=z.len(l)),z.aggNums(function(b,d){return b+d},0,l)/T},z.midRange=function(l){if(void 0!==l&&0!==l.length)return(z.aggNums(Math.max,null,l)+z.aggNums(Math.min,null,l))/2},z.variance=function(l,T,b){return T||(T=z.len(l)),k(b)||(b=z.mean(l,T)),z.aggNums(function(d,s){return d+Math.pow(s-b,2)},0,l)/T},z.stdev=function(l,T,b){return Math.sqrt(z.variance(l,T,b))},z.median=function(l){var T=l.slice().sort();return z.interp(T,.5)},z.interp=function(l,T){if(!k(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var b=T%1;return b*l[Math.ceil(T)]+(1-b)*l[Math.floor(T)]}},78614:function(Q,z,e){"use strict";var k=e(25075);Q.exports=function(A){return A?k(A):[0,0,0,1]}},63893:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=A.strTranslate,T=e(77922),b=e(18783).LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;z.convertToTspans=function(I,j,R){var H=I.text(),F=!I.attr("data-notex")&&j&&j._context.typesetMath&&typeof MathJax<"u"&&H.match(d),U=k.select(I.node().parentNode);if(!U.empty()){var B=I.attr("class")?I.attr("class").split(" ")[0]:"text";return U.selectAll("svg."+(B+="-math")).remove(),U.selectAll("g."+B+"-group").remove(),I.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),F?(j&&j._promises||[]).push(new Promise(function(J){I.style("display","none");var Z=parseInt(I.node().style.fontSize,10);!function(W,X,K){var ne,re,ae,le,pe=parseInt((MathJax.version||"").split(".")[0]);if(2===pe||3===pe){var xe=function(){var se="math-output-"+A.randstr({},64),fe=(le=k.select("body").append("div").attr({id:se}).style({visibility:"hidden",position:"absolute","font-size":X.fontSize+"px"}).text(W.replace(s,"\\lt ").replace(t,"\\gt "))).node();return 2===pe?MathJax.Hub.Typeset(fe):MathJax.typeset([fe])},ye=function(){var se=le.select(2===pe?".MathJax_SVG":".MathJax"),fe=!se.empty()&&le.select("svg").node();if(fe){var Ee,de=fe.getBoundingClientRect();Ee=2===pe?k.select("body").select("#MathJax_SVG_glyphs"):se.select("defs"),K(se,Ee,de)}else A.log("There was an error in the tex syntax.",W),K();le.remove()};2===pe?MathJax.Hub.Queue(function(){return re=A.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},function(){if("SVG"!==(ne=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},xe,ye,function(){if("SVG"!==ne)return MathJax.Hub.setRenderer(ne)},function(){return void 0!==ae&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(re)}):3===pe&&(re=A.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o,"svg"!==(ne=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){xe(),ye(),"svg"!==ne&&(MathJax.config.startup.output=ne),MathJax.config=re}))}else A.warn("No MathJax version:",MathJax.version)}(F[2],{fontSize:Z},function(W,X,K){U.selectAll("svg."+B).remove(),U.selectAll("g."+B+"-group").remove();var ne=W&&W.select("svg");if(!ne||!ne.node())return N(),void J();var re=U.append("g").classed(B+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});re.node().appendChild(ne.node()),X&&X.node()&&ne.node().insertBefore(X.node().cloneNode(!0),ne.node().firstChild);var ae=K.width,le=K.height;ne.attr({class:B,height:le,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var pe=I.node().style.fill||"black",xe=ne.select("g");xe.attr({fill:pe,stroke:pe});var ye=xe.node().getBoundingClientRect(),se=ye.width,fe=ye.height;(se>ae||fe>le)&&(ne.style("overflow","hidden"),se=(ye=ne.node().getBoundingClientRect()).width,fe=ye.height);var Ee=+I.attr("x"),de=+I.attr("y"),we=-(Z||I.node().getBoundingClientRect().height)/4;if("y"===B[0])re.attr({transform:"rotate("+[-90,Ee,de]+")"+l(-se/2,we-fe/2)});else if("l"===B[0])de=we-fe/2;else if("a"===B[0]&&0!==B.indexOf("atitle"))Ee=0,de=we;else{var ke=I.attr("text-anchor");Ee-=se*("middle"===ke?.5:"end"===ke?1:0),de=de+we-fe/2}ne.attr({x:Ee,y:de}),R&&R.call(I,re),J(re)})})):N(),I}function N(){U.empty()||(B=I.attr("class")+"-math",U.select("svg."+B).remove()),I.text("").style("white-space","pre"),function(Z,V){V=V.replace(h," ");var W,X=!1,K=[],ne=-1;function re(){ne++;var he=document.createElementNS(T.svg,"tspan");k.select(he).attr({class:"line",dy:ne*b+"em"}),Z.appendChild(he),W=he;var me=K;if(K=[{node:he}],me.length>1)for(var Me=1;Me<me.length;Me++)ae(me[Me])}function ae(he){var me,Me=he.type,Ie={};if("a"===Me){me="a";var Pe=he.target,ze=he.href,ce=he.popup;ze&&(Ie={"xlink:xlink:show":"_blank"===Pe||"_"!==Pe.charAt(0)?"new":"replace",target:Pe,"xlink:xlink:href":ze},ce&&(Ie.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ce+'");return false;'))}else me="tspan";he.style&&(Ie.style=he.style);var ge=document.createElementNS(T.svg,me);if("sup"===Me||"sub"===Me){le(W,i),W.appendChild(ge);var _e=document.createElementNS(T.svg,"tspan");le(_e,i),k.select(_e).attr("dy",a[Me]),Ie.dy=n[Me],W.appendChild(ge),W.appendChild(_e)}else W.appendChild(ge);k.select(ge).attr(Ie),W=he.node=ge,K.push(he)}function le(he,me){he.appendChild(document.createTextNode(me))}function pe(he){if(1!==K.length){var me=K.pop();he!==me.type&&A.log("Start tag <"+me.type+"> doesnt match end tag <"+he+">. Pretending it did match.",V),W=K[K.length-1].node}else A.log("Ignoring unexpected end tag </"+he+">.",V)}v.test(V)?re():(W=Z,K=[{node:Z}]);for(var xe=V.split(f),ye=0;ye<xe.length;ye++){var se=xe[ye],fe=se.match(x),Ee=fe&&fe[2].toLowerCase(),de=r[Ee];if("br"===Ee)re();else if(void 0===de)le(W,E(se));else if(fe[1])pe(Ee);else{var we=fe[4],ke={type:Ee},Te=w(we,g);if(Te?(Te=Te.replace(u,"$1 fill:"),de&&(Te+=";"+de)):de&&(Te=de),Te&&(ke.style=Te),"a"===Ee){X=!0;var $=w(we,y);if($){var oe=L($);oe&&(ke.href=oe,ke.target=w(we,p)||"_blank",ke.popup=w(we,m))}}ae(ke)}}return X}(I.node(),H)&&I.style("pointer-events","all"),z.positionText(I),R&&R.call(I)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,o=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},i="\u200b",c=["http:","https:","mailto:","",void 0,":"],h=z.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;z.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(I,j){if(!I)return null;var R=I.match(j),H=R&&(R[3]||R[4]);return H&&E(H)}var u=/(^|;)\s*color:/;z.plainText=function(I,j){for(var R=void 0!==(j=j||{}).len&&-1!==j.len?j.len:1/0,H=void 0!==j.allowedTags?j.allowedTags:["br"],U=I.split(f),B=[],N="",J=0,Z=0;Z<U.length;Z++){var V=U[Z],W=V.match(x),X=W&&W[2].toLowerCase();if(X)-1!==H.indexOf(X)&&(B.push(V),N=X);else{var K=V.length;if(J+K<R)B.push(V),J+=K;else if(J<R){var ne=R-J;N&&("br"!==N||ne<=3||K<=3)&&B.pop(),B.push(R>3?V.substr(0,ne-3)+"...":V.substr(0,ne));break}N=""}}return B.join("")};var S={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},_=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(I){return I.replace(_,function(j,R){return("#"===R.charAt(0)?function(H){if(!(H>1114111)){var F=String.fromCodePoint;if(F)return F(H);var U=String.fromCharCode;return H<=65535?U(H):U(55232+(H>>10),H%1024+56320)}}("x"===R.charAt(1)?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):S[R])||j})}function L(I){var j=encodeURI(decodeURI(I)),R=document.createElement("a"),H=document.createElement("a");R.href=I,H.href=j;var U=H.protocol;return-1!==c.indexOf(R.protocol)&&-1!==c.indexOf(U)?j:""}function C(I,j,R){var H,F,U,B=R.horizontalAlign,N=R.verticalAlign||"top",J=I.node().getBoundingClientRect(),Z=j.node().getBoundingClientRect();return F="bottom"===N?function(){return J.bottom-H.height}:"middle"===N?function(){return J.top+(J.height-H.height)/2}:function(){return J.top},U="right"===B?function(){return J.right-H.width}:"center"===B?function(){return J.left+(J.width-H.width)/2}:function(){return J.left},function(){H=this.node().getBoundingClientRect();var V=U()-Z.left,W=F()-Z.top,X=R.gd||{};if(R.gd){X._fullLayout._calcInverseTransform(X);var K=A.apply3DTransform(X._fullLayout._invTransform)(V,W);V=K[0],W=K[1]}return this.style({top:W+"px",left:V+"px","z-index":1e3}),this}}z.convertEntities=E,z.sanitizeHTML=function(I){I=I.replace(h," ");for(var j=document.createElement("p"),R=j,H=[],F=I.split(f),U=0;U<F.length;U++){var B=F[U],N=B.match(x),J=N&&N[2].toLowerCase();if(J in r)if(N[1])H.length&&(R=H.pop());else{var Z=N[4],V=w(Z,g),W=V?{style:V}:{};if("a"===J){var X=w(Z,y);if(X){var K=L(X);if(K){W.href=K;var ne=w(Z,p);ne&&(W.target=ne)}}}var re=document.createElement(J);R.appendChild(re),k.select(re).attr(W),R=re,H.push(re)}else R.appendChild(document.createTextNode(E(B)))}return j.innerHTML},z.lineCount=function(I){return I.selectAll("tspan.line").size()||1},z.positionText=function(I,j,R){return I.each(function(){var H=k.select(this);function F(N,J){return void 0===J?null===(J=H.attr(N))&&(H.attr(N,0),J=0):H.attr(N,J),J}var U=F("x",j),B=F("y",R);"text"===this.nodeName&&H.selectAll("tspan.line").attr({x:U,y:B})})};var P="1px ";z.makeTextShadow=function(I){return"1px 1px 1px "+I+", -1px -"+P+P+I+", 1px -"+P+P+I+", -"+P+P+P+I},z.makeEditable=function(I,j){var R=j.gd,H=j.delegate,F=k.dispatch("edit","input","cancel"),U=H||I;if(I.style({"pointer-events":H?"none":"all"}),1!==I.size())throw new Error("boo");function B(){var J,Z,V,W,X;J=k.select(R).select(".svg-container"),Z=J.append("div"),V=I.node().style,W=parseFloat(V.fontSize||12),void 0===(X=j.text)&&(X=I.attr("data-unformatted")),Z.classed("plugin-editable editable",!0).style({position:"absolute","font-family":V.fontFamily||"Arial","font-size":W,color:j.fill||V.fill||"black",opacity:1,"background-color":j.background||"transparent",outline:"#ffffff33 1px solid",margin:[-W/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(C(I,J,j)).on("blur",function(){R._editing=!1,I.text(this.textContent).style({opacity:1});var re,ae=k.select(this).attr("class");(re=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&k.select(I.node().parentNode).select(re).style({opacity:0});var le=this.textContent;k.select(this).transition().duration(0).remove(),k.select(document).on("mouseup",null),F.edit.call(I,le)}).on("focus",function(){var re=this;R._editing=!0,k.select(document).on("mouseup",function(){if(k.event.target===re)return!1;document.activeElement===Z.node()&&Z.node().blur()})}).on("keyup",function(){27===k.event.which?(R._editing=!1,I.style({opacity:1}),k.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(I,this.textContent)):(F.input.call(I,this.textContent),k.select(this).call(C(I,J,j)))}).on("keydown",function(){13===k.event.which&&this.blur()}).call(N),I.style({opacity:0});var K,ne=U.attr("class");(K=ne?"."+ne.split(" ")[0]+"-math-group":"[class*=-math-group]")&&k.select(I.node().parentNode).select(K).style({opacity:0})}function N(J){var Z=J.node(),V=document.createRange();V.selectNodeContents(Z);var W=window.getSelection();W.removeAllRanges(),W.addRange(V),Z.focus()}return j.immediate?B():U.on("click",B),k.rebind(I,F,"on")}},79990:function(Q,z){"use strict";var e={};function k(A){A&&null!==A.timer&&(clearTimeout(A.timer),A.timer=null)}z.throttle=function(A,l,T){var b=e[A],d=Date.now();if(!b){for(var s in e)e[s].ts<d-6e4&&delete e[s];b=e[A]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}k(b),d>b.ts+l?t():b.timer=setTimeout(function(){t(),b.timer=null},l)},z.done=function(A){var l=e[A];return l&&l.timer?new Promise(function(T){var b=l.onDone;l.onDone=function(){b&&b(),T(),l.onDone=null}}):Promise.resolve()},z.clear=function(A){if(A)k(e[A]),delete e[A];else for(var l in e)z.clear(l)}},58163:function(Q,z,e){"use strict";var k=e(92770);Q.exports=function(A,l){if(A>0)return Math.log(A)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return k(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function(Q,z,e){"use strict";var k=Q.exports={},A=e(78776).locationmodeToLayer,l=e(96892).zL;k.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},k.getTopojsonPath=function(T,b){return T+b+".json"},k.getTopojsonFeatures=function(T,b){return l(b,b.objects[A[T.locationmode]]).features}},37815:function(Q){"use strict";Q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(Q){"use strict";Q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(Q,z,e){"use strict";var k=e(73972);Q.exports=function(A){for(var l,T,b=k.layoutArrayContainers,d=k.layoutArrayRegexes,s=A.split("[")[0],t=0;t<d.length;t++)if((T=A.match(d[t]))&&0===T.index){l=T[0];break}if(l||(l=b[b.indexOf(s)]),!l)return!1;var o=A.substr(l.length);return o?!!(T=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function(Q,z,e){"use strict";var k=e(71828),A=k.extendFlat,l=k.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},b={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},d=T.flags.slice().concat(["fullReplot"]),s=b.flags.slice().concat("layoutReplot");function t(n){for(var a={},i=0;i<n.length;i++)a[n[i]]=!1;return a}function o(n,a,i){var c=A({},n);for(var h in c){var f=c[h];l(f)&&(c[h]=r(f,a,0,h))}return"from-root"===i&&(c.editType=a),c}function r(n,a,i,c){if(n.valType){var h=A({},n);if(h.editType=a,Array.isArray(n.items)){h.items=new Array(n.items.length);for(var f=0;f<n.items.length;f++)h.items[f]=r(n.items[f],a)}return h}return o(n,a,"_"===c.charAt(0)?"nested":"from-root")}Q.exports={traces:T,layout:b,traceFlags:function(){return t(d)},layoutFlags:function(){return t(s)},update:function(n,a){var i=a.editType;if(i&&"none"!==i)for(var c=i.split("+"),h=0;h<c.length;h++)n[c[h]]=!0},overrideAll:o}},58377:function(Q,z,e){"use strict";var k=e(92770),A=e(27812),l=e(73972),T=e(71828),b=e(74875),d=e(41675),s=e(7901),t=d.cleanId,o=d.getFromTrace,r=l.traceIs;function n(y,p){var m=y[p],w=p.charAt(0);m&&"paper"!==m&&(y[p]=t(m,w,!0))}function a(y){function p(m,w){y[m]&&(!y.title||!y.title[w])&&(y.title||(y.title={}),y.title[w]=y[m],delete y[m])}y&&("string"!=typeof y.title&&"number"!=typeof y.title||(y.title={text:y.title}),p("titlefont","font"),p("titleposition","position"),p("titleside","side"),p("titleoffset","offset"))}function i(y){if(!T.isPlainObject(y))return!1;var p=y.name;return delete y.name,delete y.showlegend,("string"==typeof p||"number"==typeof p)&&String(p)}function c(y,p,m,w){if(m&&!w)return y;if(w&&!m||!y.trim())return p;if(!p.trim())return y;var u,S=Math.min(y.length,p.length);for(u=0;u<S&&y.charAt(u)===p.charAt(u);u++);return y.substr(0,u).trim()}function h(y){var p="middle",m="center";return"string"==typeof y&&(-1!==y.indexOf("top")?p="top":-1!==y.indexOf("bottom")&&(p="bottom"),-1!==y.indexOf("left")?m="left":-1!==y.indexOf("right")&&(m="right")),p+" "+m}function f(y,p){return p in y&&"object"==typeof y[p]&&0===Object.keys(y[p]).length}z.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},z.cleanLayout=function(y){var p,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var w=(b.subplotsRegistry.cartesian||{}).attrRegex,u=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,_=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(p=0;p<E.length;p++){var L=E[p];if(w&&w.test(L)){var C=y[L];C.anchor&&"free"!==C.anchor&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":!1===C.isdate&&!1===C.islog&&(C.type="linear")),"withzero"!==C.autorange&&"tozero"!==C.autorange||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,f(C,"domain")&&delete C.domain,void 0!==C.autotick&&(void 0===C.tickmode&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(u&&u.test(L))a(y[L].radialaxis);else if(S&&S.test(L)){var P=y[L];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(_&&_.test(L)){var I=y[L],j=I.cameraposition;if(Array.isArray(j)&&4===j[0].length){var H=j[1],F=j[2],U=A([],j[0]),B=[];for(m=0;m<3;++m)B[m]=H[m]+F*U[2+4*m];I.camera={eye:{x:B[0],y:B[1],z:B[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}a(I.xaxis),a(I.yaxis),a(I.zaxis)}}var N=Array.isArray(y.annotations)?y.annotations.length:0;for(p=0;p<N;p++){var J=y.annotations[p];T.isPlainObject(J)&&(J.ref&&("paper"===J.ref?(J.xref="paper",J.yref="paper"):"data"===J.ref&&(J.xref="x",J.yref="y"),delete J.ref),n(J,"xref"),n(J,"yref"))}var Z=Array.isArray(y.shapes)?y.shapes.length:0;for(p=0;p<Z;p++){var V=y.shapes[p];T.isPlainObject(V)&&(n(V,"xref"),n(V,"yref"))}var W=Array.isArray(y.images)?y.images.length:0;for(p=0;p<W;p++){var X=y.images[p];T.isPlainObject(X)&&(n(X,"xref"),n(X,"yref"))}var K=y.legend;return K&&(K.x>3?(K.x=1.02,K.xanchor="left"):K.x<-2&&(K.x=-.02,K.xanchor="right"),K.y>3?(K.y=1.02,K.yanchor="bottom"):K.y<-2&&(K.y=-.02,K.yanchor="top")),a(y),"rotate"===y.dragmode&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&z.cleanLayout(y.template.layout),y},z.cleanData=function(y){for(var p=0;p<y.length;p++){var m,w=y[p];if("histogramy"===w.type&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var u=s.defaults,S=w.error_y.color||(r(w,"bar")?s.defaultLine:u[p%u.length]);w.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&("h"!==w.bardir||!r(w,"bar")&&"histogram"!==w.type.substr(0,9)||(w.orientation="h",z.swapXYData(w)),delete w.bardir),"histogramy"===w.type&&z.swapXYData(w),"histogramx"!==w.type&&"histogramy"!==w.type||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=t(w.xaxis,"x")),w.yaxis&&(w.yaxis=t(w.yaxis,"y")),r(w,"gl3d")&&w.scene&&(w.scene=b.subplotsRegistry.gl3d.cleanId(w.scene)),!r(w,"pie-like")&&!r(w,"bar-like"))if(Array.isArray(w.textposition))for(m=0;m<w.textposition.length;m++)w.textposition[m]=h(w.textposition[m]);else w.textposition&&(w.textposition=h(w.textposition));var _=l.getModule(w);if(_&&_.colorbar){var E=_.colorbar.container,L=E?w[E]:w;L&&L.colorscale&&("YIGnBu"===L.colorscale&&(L.colorscale="YlGnBu"),"YIOrRd"===L.colorscale&&(L.colorscale="YlOrRd"))}if("surface"===w.type&&T.isPlainObject(w.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=w.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if("candlestick"===w.type||"ohlc"===w.type){var I=!1!==(w.increasing||{}).showlegend,j=!1!==(w.decreasing||{}).showlegend,R=i(w.increasing),H=i(w.decreasing);if(!1!==R&&!1!==H){var F=c(R,H,I,j);F&&(w.name=F)}else!R&&!H||w.name||(w.name=R||H)}if(Array.isArray(w.transforms)){var U=w.transforms;for(m=0;m<U.length;m++){var B=U[m];if(T.isPlainObject(B))switch(B.type){case"filter":B.filtersrc&&(B.target=B.filtersrc,delete B.filtersrc),B.calendar&&(B.valuecalendar||(B.valuecalendar=B.calendar),delete B.calendar);break;case"groupby":if(B.styles=B.styles||B.style,B.styles&&!Array.isArray(B.styles)){var N=B.styles,J=Object.keys(N);B.styles=[];for(var Z=0;Z<J.length;Z++)B.styles.push({target:J[Z],value:N[J[Z]]})}}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),s.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),a(w),w.colorbar&&a(w.colorbar),w.marker&&w.marker.colorbar&&a(w.marker.colorbar),w.line&&w.line.colorbar&&a(w.line.colorbar),w.aaxis&&a(w.aaxis),w.baxis&&a(w.baxis)}},z.swapXYData=function(y){var p;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,w="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),w&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof y.hoverinfo){var u=y.hoverinfo.split("+");for(p=0;p<u.length;p++)"x"===u[p]?u[p]="y":"y"===u[p]&&(u[p]="x");y.hoverinfo=u.join("+")}},z.coerceTraceIndices=function(y,p){if(k(p))return[p];if(!Array.isArray(p)||!p.length)return y.data.map(function(u,S){return S});if(Array.isArray(p)){for(var m=[],w=0;w<p.length;w++)T.isIndex(p[w],y.data.length)?m.push(p[w]):T.warn("trace index (",p[w],") is not a number or is out of bounds");return m}return p},z.manageArrayContainers=function(y,p,m){var w=y.obj,u=y.parts,S=u.length,_=u[S-1],E=k(_);if(E&&null===p){var L=u.slice(0,S-1).join(".");T.nestedProperty(w,L).get().splice(_,1)}else E&&void 0===y.get()&&void 0===y.get()&&(m[y.astr]=null),y.set(p)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(y){var p=y.search(x);if(p>0)return y.substr(0,p)}z.hasParent=function(y,p){for(var m=v(p);m;){if(m in y)return!0;m=v(m)}return!1};var g=["x","y","z"];z.clearAxisTypes=function(y,p,m){for(var w=0;w<p.length;w++)for(var u=y._fullData[w],S=0;S<3;S++){var _=o(y,u,g[S]);if(_&&"log"!==_.type){var E=_._name,L=_._id.substr(1);if("scene"===L.substr(0,5)){if(void 0!==m[L])continue;E=L+"."+E}var C=E+".type";void 0===m[E]&&void 0===m[C]&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function(Q,z,e){"use strict";var k=e(72391);z._doPlot=k._doPlot,z.newPlot=k.newPlot,z.restyle=k.restyle,z.relayout=k.relayout,z.redraw=k.redraw,z.update=k.update,z._guiRestyle=k._guiRestyle,z._guiRelayout=k._guiRelayout,z._guiUpdate=k._guiUpdate,z._storeDirectGUIEdit=k._storeDirectGUIEdit,z.react=k.react,z.extendTraces=k.extendTraces,z.prependTraces=k.prependTraces,z.addTraces=k.addTraces,z.deleteTraces=k.deleteTraces,z.moveTraces=k.moveTraces,z.purge=k.purge,z.addFrames=k.addFrames,z.deleteFrames=k.deleteFrames,z.animate=k.animate,z.setPlotConfig=k.setPlotConfig,z.toImage=e(403),z.validate=e(84936),z.downloadImage=e(7239);var A=e(96318);z.makeTemplate=A.makeTemplate,z.validateTemplate=A.validateTemplate},6611:function(Q,z,e){"use strict";var k=e(41965),A=e(64213),l=e(47769),T=e(65888).sorterAsc,b=e(73972);z.containerArrayMatch=e(14458);var d=z.isAddVal=function(t){return"add"===t||k(t)},s=z.isRemoveVal=function(t){return null===t||"remove"===t};z.applyContainerArrayChanges=function(t,o,r,n,a){var i=o.astr,c=b.getComponentMethod(i,"supplyLayoutDefaults"),h=b.getComponentMethod(i,"draw"),f=b.getComponentMethod(i,"drawOne"),x=n.replot||n.recalc||c===A||h===A,v=t.layout,g=t._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",i);var y=r[""][""];if(s(y))o.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",i,y),!0;o.set(y)}return!x&&(c(v,g),h(t),!0)}var p,m,w,u,S,_,E,C=Object.keys(r).map(Number).sort(T),P=o.get(),I=P||[],j=a(g,i).get(),R=[],H=-1,F=I.length;for(p=0;p<C.length;p++)if(u=r[w=C[p]],S=Object.keys(u),E=d(_=u[""]),w<0||w>I.length-(E?0:1))l.warn("index out of range",i,w);else if(void 0!==_)S.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",i,w),s(_)?R.push(w):E?("add"===_&&(_={}),I.splice(w,0,_),j&&j.splice(w,0,{})):l.warn("Unrecognized full object edit value",i,w,_),-1===H&&(H=w);else for(m=0;m<S.length;m++)a(I[w],S[m],i+"["+w+"].").set(u[S[m]]);for(p=R.length-1;p>=0;p--)I.splice(R[p],1),j&&j.splice(R[p],1);if(I.length?P||o.set(I):o.set(null),x)return!1;if(c(v,g),f!==A){var U;if(-1===H)U=C;else{for(F=Math.max(I.length,F),U=[],p=0;p<C.length&&!((w=C[p])>=H);p++)U.push(w);for(p=H;p<F;p++)U.push(p)}for(p=0;p<U.length;p++)f(t,U[p])}else h(t);return!0}},72391:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(57035),T=e(71828),b=T.nestedProperty,d=e(11086),s=e(10847),t=e(73972),o=e(86281),r=e(74875),n=e(89298),a=e(91424),i=e(7901),c=e(4305).initInteractions,h=e(77922),f=e(47322).clearOutline,x=e(72075).dfltConfig,v=e(6611),g=e(58377),y=e(61549),p=e(30962),m=e(85555).AX_NAME_PATTERN,w=0;function u($){var oe=$._fullLayout;oe._redrawFromAutoMarginCount?oe._redrawFromAutoMarginCount--:$.emit("plotly_afterplot")}function S($,oe){try{$._fullLayout._paper.style("background",oe)}catch(he){T.error(he)}}function _($,oe){S($,i.combine(oe,"white"))}function E($,oe){if(!$._context){$._context=T.extendDeep({},x);var he=k.select("base");$._context._baseUrl=he.size()&&he.attr("href")?window.location.href.split("#")[0]:""}var me,Me,Ie,Pe=$._context;if(oe){for(Me=Object.keys(oe),me=0;me<Me.length;me++)"editable"!==(Ie=Me[me])&&"edits"!==Ie&&Ie in Pe&&(Pe[Ie]="setBackground"===Ie&&"opaque"===oe[Ie]?_:oe[Ie]);oe.plot3dPixelRatio&&!Pe.plotGlPixelRatio&&(Pe.plotGlPixelRatio=Pe.plot3dPixelRatio);var ze=oe.editable;if(void 0!==ze)for(Pe.editable=ze,Me=Object.keys(Pe.edits),me=0;me<Me.length;me++)Pe.edits[Me[me]]=ze;if(oe.edits)for(Me=Object.keys(oe.edits),me=0;me<Me.length;me++)(Ie=Me[me])in Pe.edits&&(Pe.edits[Ie]=oe.edits[Ie]);Pe._exportedPlot=oe._exportedPlot}Pe.staticPlot&&(Pe.editable=!1,Pe.edits={},Pe.autosizable=!1,Pe.scrollZoom=!1,Pe.doubleClick=!1,Pe.showTips=!1,Pe.showLink=!1,Pe.displayModeBar=!1),"hover"!==Pe.displayModeBar||l||(Pe.displayModeBar=!0),"transparent"!==Pe.setBackground&&"function"==typeof Pe.setBackground||(Pe.setBackground=S),Pe._hasZeroHeight=Pe._hasZeroHeight||0===$.clientHeight,Pe._hasZeroWidth=Pe._hasZeroWidth||0===$.clientWidth;var ce=Pe.scrollZoom,ge=Pe._scrollZoom={};if(!0===ce)ge.cartesian=1,ge.gl3d=1,ge.geo=1,ge.mapbox=1;else if("string"==typeof ce){var _e=ce.split("+");for(me=0;me<_e.length;me++)ge[_e[me]]=1}else!1!==ce&&(ge.gl3d=1,ge.geo=1,ge.mapbox=1)}function L($,oe){var he,me,Me=oe+1,Ie=[];for(he=0;he<$.length;he++)(me=$[he])<0?Ie.push(Me+me):Ie.push(me);return Ie}function C($,oe,he){var me,Me;for(me=0;me<oe.length;me++){if((Me=oe[me])!==parseInt(Me,10))throw new Error("all values in "+he+" must be integers");if(Me>=$.data.length||Me<-$.data.length)throw new Error(he+" must be valid indices for gd.data.");if(oe.indexOf(Me,me+1)>-1||Me>=0&&oe.indexOf(-$.data.length+Me)>-1||Me<0&&oe.indexOf($.data.length+Me)>-1)throw new Error("each index in "+he+" must be unique.")}}function P($,oe,he){if(!Array.isArray($.data))throw new Error("gd.data must be an array.");if(void 0===oe)throw new Error("currentIndices is a required argument.");if(Array.isArray(oe)||(oe=[oe]),C($,oe,"currentIndices"),void 0===he||Array.isArray(he)||(he=[he]),void 0!==he&&C($,he,"newIndices"),void 0!==he&&oe.length!==he.length)throw new Error("current and new indices must be of equal length.")}function I($,oe,he,me,Me){!function(He,Ve,nt,tt){var at=T.isPlainObject(tt);if(!Array.isArray(He.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ve))throw new Error("update must be a key:value object");if(void 0===nt)throw new Error("indices must be an integer or array of integers");for(var dt in C(He,nt,"indices"),Ve){if(!Array.isArray(Ve[dt])||Ve[dt].length!==nt.length)throw new Error("attribute "+dt+" must be an array of length equal to indices array length");if(at&&(!(dt in tt)||!Array.isArray(tt[dt])||tt[dt].length!==Ve[dt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}($,oe,he,me);for(var Ie=function(He,Ve,nt,tt){var dt,wt,bt,_t,Lt=T.isPlainObject(tt),Ct=[];for(var Ot in Array.isArray(nt)||(nt=[nt]),nt=L(nt,He.data.length-1),Ve)for(var Ht=0;Ht<nt.length;Ht++){if(dt=(wt=b(He.data[nt[Ht]],Ot)).get(),!T.isArrayOrTypedArray(bt=Ve[Ot][Ht]))throw new Error("attribute: "+Ot+" index: "+Ht+" must be an array");if(!T.isArrayOrTypedArray(dt))throw new Error("cannot extend missing or non-array attribute: "+Ot);if(dt.constructor!==bt.constructor)throw new Error("cannot extend array with an array of a different type: "+Ot);A(_t=Lt?tt[Ot][Ht]:tt)||(_t=-1),Ct.push({prop:wt,target:dt,insert:bt,maxp:Math.floor(_t)})}return Ct}($,oe,he,me),Pe={},ze={},ce=0;ce<Ie.length;ce++){var ge=Ie[ce].prop,De=Me(Ie[ce].target,Ie[ce].insert,Ie[ce].maxp);ge.set(De[0]),Array.isArray(Pe[ge.astr])||(Pe[ge.astr]=[]),Pe[ge.astr].push(De[1]),Array.isArray(ze[ge.astr])||(ze[ge.astr]=[]),ze[ge.astr].push(Ie[ce].target.length)}return{update:Pe,maxPoints:ze}}function j($,oe){var he=new $.constructor($.length+oe.length);return he.set($),he.set(oe,$.length),he}function R($,oe,he,me){$=T.getGraphDiv($),g.clearPromiseQueue($);var Me={};if("string"==typeof oe)Me[oe]=he;else{if(!T.isPlainObject(oe))return T.warn("Restyle fail.",oe,he,me),Promise.reject();Me=T.extendFlat({},oe),void 0===me&&(me=he)}Object.keys(Me).length&&($.changed=!0);var Ie=g.coerceTraceIndices($,me),Pe=B($,Me,Ie),ze=Pe.flags;ze.calc&&($.calcdata=void 0),ze.clearAxisTypes&&g.clearAxisTypes($,Ie,{});var ce=[];ze.fullReplot?ce.push(z._doPlot):(ce.push(r.previousPromises),r.supplyDefaults($),ze.markerSize&&(r.doCalcdata($),V(ce)),ze.style&&ce.push(y.doTraceStyle),ze.colorbars&&ce.push(y.doColorBars),ce.push(u)),ce.push(r.rehover,r.redrag,r.reselect),s.add($,R,[$,Pe.undoit,Pe.traces],R,[$,Pe.redoit,Pe.traces]);var ge=T.syncOrAsync(ce,$);return ge&&ge.then||(ge=Promise.resolve()),ge.then(function(){return $.emit("plotly_restyle",Pe.eventData),$})}function H($){return void 0===$?null:$}function F($,oe){return oe?function(he,me,Me){var Ie=b(he,me),Pe=Ie.set;return Ie.set=function(ze){U((Me||"")+me,Ie.get(),ze,$),Pe(ze)},Ie}:b}function U($,oe,he,me){if(Array.isArray(oe)||Array.isArray(he))for(var Me=Array.isArray(oe)?oe:[],Ie=Array.isArray(he)?he:[],Pe=Math.max(Me.length,Ie.length),ze=0;ze<Pe;ze++)U($+"["+ze+"]",Me[ze],Ie[ze],me);else if(T.isPlainObject(oe)||T.isPlainObject(he)){var ce=T.isPlainObject(oe)?oe:{},ge=T.isPlainObject(he)?he:{},_e=T.extendFlat({},ce,ge);for(var De in _e)U($+"."+De,ce[De],ge[De],me)}else void 0===me[$]&&(me[$]=H(oe))}function B($,oe,he){var me,Me=$._fullLayout,Ie=$._fullData,Pe=$.data,ze=Me._guiEditing,ce=F(Me._preGUI,ze),ge=T.extendDeepAll({},oe);N(oe);var _e,De=p.traceFlags(),He={},Ve={};function nt(){return he.map(function(){})}function tt(jt){var Gt=n.id2name(jt);-1===_e.indexOf(Gt)&&_e.push(Gt)}function at(jt){return"LAYOUT"+jt+".autorange"}function dt(jt){return"LAYOUT"+jt+".range"}function wt(jt){for(var Gt=jt;Gt<Ie.length;Gt++)if(Ie[Gt]._input===Pe[jt])return Ie[Gt]}function bt(jt,Gt,un){if(Array.isArray(jt))jt.forEach(function(_n){bt(_n,Gt,un)});else if(!(jt in oe)&&!g.hasParent(oe,jt)){var hn;if("LAYOUT"===jt.substr(0,6))hn=ce($.layout,jt.replace("LAYOUT",""));else{var Qt=he[un];hn=F(Me._tracePreGUI[wt(Qt)._fullInput.uid],ze)(Pe[Qt],jt)}jt in Ve||(Ve[jt]=nt()),void 0===Ve[jt][un]&&(Ve[jt][un]=H(hn.get())),void 0!==Gt&&hn.set(Gt)}}function _t(jt){return function(Gt){return Ie[Gt][jt]}}function Lt(jt){return function(Gt,un){return!1===Gt?Ie[he[un]][jt]:null}}for(var Ct in oe){if(g.hasParent(oe,Ct))throw new Error("cannot set "+Ct+" and a parent attribute simultaneously");var Ot,Ht,It,Ge,Ze,Be,Ye=oe[Ct];if("autobinx"!==Ct&&"autobiny"!==Ct||(Ct=Ct.charAt(Ct.length-1)+"bins",Ye=Array.isArray(Ye)?Ye.map(Lt(Ct)):!1===Ye?he.map(_t(Ct)):null),He[Ct]=Ye,"LAYOUT"!==Ct.substr(0,6)){for(Ve[Ct]=nt(),me=0;me<he.length;me++)if(Ot=Pe[he[me]],Ht=wt(he[me]),Ge=(It=F(Me._tracePreGUI[Ht._fullInput.uid],ze)(Ot,Ct)).get(),void 0!==(Ze=Array.isArray(Ye)?Ye[me%Ye.length]:Ye)){var rt=It.parts[It.parts.length-1],Se=Ct.substr(0,Ct.length-rt.length-1),Re=Se?Se+".":"",Ke=Se?b(Ht,Se).get():Ht;if((Be=o.getTraceValObject(Ht,It.parts))&&Be.impliedEdits&&null!==Ze)for(var st in Be.impliedEdits)bt(T.relativeAttr(Ct,st),Be.impliedEdits[st],me);else if("thicknessmode"!==rt&&"lenmode"!==rt||Ge===Ze||"fraction"!==Ze&&"pixels"!==Ze||!Ke){if("type"===Ct&&("pie"===Ze!=("pie"===Ge)||"funnelarea"===Ze!=("funnelarea"===Ge))){var ct="x",Tt="y";"bar"!==Ze&&"bar"!==Ge||"h"!==Ot.orientation||(ct="y",Tt="x"),T.swapAttrs(Ot,["?","?src"],"labels",ct),T.swapAttrs(Ot,["d?","?0"],"label",ct),T.swapAttrs(Ot,["?","?src"],"values",Tt),"pie"===Ge||"funnelarea"===Ge?(b(Ot,"marker.color").set(b(Ot,"marker.colors").get()),Me._pielayer.selectAll("g.trace").remove()):t.traceIs(Ot,"cartesian")&&b(Ot,"marker.colors").set(b(Ot,"marker.color").get())}}else{var Et=Me._size,At=Ke.orient,ht="top"===At||"bottom"===At;if("thicknessmode"===rt){var pt=ht?Et.h:Et.w;bt(Re+"thickness",Ke.thickness*("fraction"===Ze?1/pt:pt),me)}else{var gt=ht?Et.w:Et.h;bt(Re+"len",Ke.len*("fraction"===Ze?1/gt:gt),me)}}if(Ve[Ct][me]=H(Ge),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ct)){if("orientation"===Ct){It.set(Ze);var Pt=Ot.x&&!Ot.y?"h":"v";if((It.get()||Pt)===Ht.orientation)continue}else"orientationaxes"===Ct&&(Ot.orientation={v:"h",h:"v"}[Ht.orientation]);g.swapXYData(Ot),De.calc=De.clearAxisTypes=!0}else-1!==r.dataArrayContainers.indexOf(It.parts[0])?(g.manageArrayContainers(It,Ze,Ve),De.calc=!0):(Be?Be.arrayOk&&!t.traceIs(Ht,"regl")&&(T.isArrayOrTypedArray(Ze)||T.isArrayOrTypedArray(Ge))?De.calc=!0:p.update(De,Be):De.calc=!0,It.set(Ze))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Ct)&&n.swap($,he),"orientationaxes"===Ct){var zt=b($.layout,"hovermode"),Ut=zt.get();"x"===Ut?zt.set("y"):"y"===Ut?zt.set("x"):"x unified"===Ut?zt.set("y unified"):"y unified"===Ut&&zt.set("x unified")}if(-1!==["orientation","type"].indexOf(Ct)){for(_e=[],me=0;me<he.length;me++){var Nt=Pe[he[me]];t.traceIs(Nt,"cartesian")&&(tt(Nt.xaxis||"x"),tt(Nt.yaxis||"y"))}bt(_e.map(at),!0,0),bt(_e.map(dt),[0,1],0)}}else It=ce($.layout,Ct.replace("LAYOUT","")),Ve[Ct]=[H(It.get())],It.set(Array.isArray(Ye)?Ye[0]:Ye),De.calc=!0}return(De.calc||De.plot)&&(De.fullReplot=!0),{flags:De,undoit:Ve,redoit:He,traces:he,eventData:T.extendDeepNoArrays([],[ge,he])}}function N($){var oe,he,me,Me=T.counterRegex("axis",".title",!1,!1),Ie=/colorbar\.title$/,Pe=Object.keys($);for(oe=0;oe<Pe.length;oe++)me=$[he=Pe[oe]],"title"!==he&&!Me.test(he)&&!Ie.test(he)||"string"!=typeof me&&"number"!=typeof me?he.indexOf("titlefont")>-1&&-1===he.indexOf("grouptitlefont")?ze(he,he.replace("titlefont","title.font")):he.indexOf("titleposition")>-1?ze(he,he.replace("titleposition","title.position")):he.indexOf("titleside")>-1?ze(he,he.replace("titleside","title.side")):he.indexOf("titleoffset")>-1&&ze(he,he.replace("titleoffset","title.offset")):ze(he,he.replace("title","title.text"));function ze(ce,ge){$[ge]=$[ce],delete $[ce]}}function J($,oe,he){$=T.getGraphDiv($),g.clearPromiseQueue($);var me={};if("string"==typeof oe)me[oe]=he;else{if(!T.isPlainObject(oe))return T.warn("Relayout fail.",oe,he),Promise.reject();me=T.extendFlat({},oe)}Object.keys(me).length&&($.changed=!0);var Me=ne($,me),Ie=Me.flags;Ie.calc&&($.calcdata=void 0);var Pe=[r.previousPromises];Ie.layoutReplot?Pe.push(y.layoutReplot):Object.keys(me).length&&(Z($,Ie,Me)||r.supplyDefaults($),Ie.legend&&Pe.push(y.doLegend),Ie.layoutstyle&&Pe.push(y.layoutStyles),Ie.axrange&&V(Pe,Me.rangesAltered),Ie.ticks&&Pe.push(y.doTicksRelayout),Ie.modebar&&Pe.push(y.doModeBar),Ie.camera&&Pe.push(y.doCamera),Ie.colorbars&&Pe.push(y.doColorBars),Pe.push(u)),Pe.push(r.rehover,r.redrag,r.reselect),s.add($,J,[$,Me.undoit],J,[$,Me.redoit]);var ze=T.syncOrAsync(Pe,$);return ze&&ze.then||(ze=Promise.resolve($)),ze.then(function(){return $.emit("plotly_relayout",Me.eventData),$})}function Z($,oe,he){var me=$._fullLayout;if(!oe.axrange)return!1;for(var Me in oe)if("axrange"!==Me&&oe[Me])return!1;for(var Ie in he.rangesAltered){var Pe=n.id2name(Ie),ze=$.layout[Pe],ce=me[Pe];if(ce.autorange=ze.autorange,ze.range&&(ce.range=ze.range.slice()),ce.cleanRange(),ce._matchGroup)for(var ge in ce._matchGroup)if(ge!==Ie){var _e=me[n.id2name(ge)];_e.autorange=ce.autorange,_e.range=ce.range.slice(),_e._input.range=ce.range.slice()}}return!0}function V($,oe){$.push(f,y.doAutoRangeAndConstraints,oe?function(me){var Me=[];for(var Ie in oe){var Pe=n.getFromId(me,Ie);if(Me.push(Ie),-1!==(Pe.ticklabelposition||"").indexOf("inside")&&Pe._anchorAxis&&Me.push(Pe._anchorAxis._id),Pe._matchGroup)for(var ze in Pe._matchGroup)oe[ze]||Me.push(ze)}return n.draw(me,Me,{skipTitle:!0})}:function(me){return n.draw(me,"redraw")},y.drawData,y.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,X=/^[xyz]axis[0-9]*\.autorange$/,K=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ne($,oe){var he,me,Me,Ie=$.layout,Pe=$._fullLayout,ce=F(Pe._preGUI,Pe._guiEditing),ge=Object.keys(oe),_e=n.list($),De=T.extendDeepAll({},oe),He={};for(N(oe),ge=Object.keys(oe),me=0;me<ge.length;me++)if(0===ge[me].indexOf("allaxes")){for(Me=0;Me<_e.length;Me++){var Ve=_e[Me]._id.substr(1),nt=-1!==Ve.indexOf("scene")?Ve+".":"",tt=ge[me].replace("allaxes",nt+_e[Me]._name);oe[tt]||(oe[tt]=oe[ge[me]])}delete oe[ge[me]]}var at=p.layoutFlags(),dt={},wt={};function bt(Qt,_n){if(Array.isArray(Qt))Qt.forEach(function(yn){bt(yn,_n)});else if(!(Qt in oe)&&!g.hasParent(oe,Qt)){var Fn=ce(Ie,Qt);Qt in wt||(wt[Qt]=H(Fn.get())),void 0!==_n&&Fn.set(_n)}}var _t,Lt={};function Ct(Qt){var _n=n.name2id(Qt.split(".")[0]);return Lt[_n]=1,_n}for(var Ot in oe){if(g.hasParent(oe,Ot))throw new Error("cannot set "+Ot+" and a parent attribute simultaneously");for(var Ht=ce(Ie,Ot),It=oe[Ot],Ge=Ht.parts.length-1;Ge>0&&"string"!=typeof Ht.parts[Ge];)Ge--;var Ze=Ht.parts[Ge],Be=Ht.parts[Ge-1]+"."+Ze,Ye=Ht.parts.slice(0,Ge).join("."),rt=b($.layout,Ye).get(),Se=b(Pe,Ye).get(),Re=Ht.get();if(void 0!==It){dt[Ot]=It,wt[Ot]="reverse"===Ze?It:H(Re);var Ke=o.getLayoutValObject(Pe,Ht.parts);if(Ke&&Ke.impliedEdits&&null!==It)for(var st in Ke.impliedEdits)bt(T.relativeAttr(Ot,st),Ke.impliedEdits[st]);if(-1!==["width","height"].indexOf(Ot))if(It){bt("autosize",null);var ct="height"===Ot?"width":"height";bt(ct,Pe[ct])}else Pe[Ot]=$._initialAutoSize[Ot];else if("autosize"===Ot)bt("width",It?null:Pe.width),bt("height",It?null:Pe.height);else if(Be.match(W))Ct(Be),b(Pe,Ye+"._inputRange").set(null);else if(Be.match(X)){Ct(Be),b(Pe,Ye+"._inputRange").set(null);var Tt=b(Pe,Ye).get();Tt._inputDomain&&(Tt._input.domain=Tt._inputDomain.slice())}else Be.match(K)&&b(Pe,Ye+"._inputDomain").set(null);if("type"===Ze){_t=rt;var Et="linear"===Se.type&&"log"===It;if(Et||"log"===Se.type&&"linear"===It){if(_t&&_t.range)if(Se.autorange)Et&&(_t.range=_t.range[1]>_t.range[0]?[1,2]:[2,1]);else{var ht=_t.range[0],pt=_t.range[1];Et?(ht<=0&&pt<=0&&bt(Ye+".autorange",!0),ht<=0?ht=pt/1e6:pt<=0&&(pt=ht/1e6),bt(Ye+".range[0]",Math.log(ht)/Math.LN10),bt(Ye+".range[1]",Math.log(pt)/Math.LN10)):(bt(Ye+".range[0]",Math.pow(10,ht)),bt(Ye+".range[1]",Math.pow(10,pt)))}else bt(Ye+".autorange",!0);Array.isArray(Pe._subplots.polar)&&Pe._subplots.polar.length&&Pe[Ht.parts[0]]&&"radialaxis"===Ht.parts[1]&&delete Pe[Ht.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")($,Se,It,bt),t.getComponentMethod("images","convertCoords")($,Se,It,bt)}else bt(Ye+".autorange",!0),bt(Ye+".range",null);b(Pe,Ye+"._inputRange").set(null)}else if(Ze.match(m)){var gt=b(Pe,Ot).get(),Pt=(It||{}).type;Pt&&"-"!==Pt||(Pt="linear"),t.getComponentMethod("annotations","convertCoords")($,gt,Pt,bt),t.getComponentMethod("images","convertCoords")($,gt,Pt,bt)}var zt=v.containerArrayMatch(Ot);if(zt){he=zt.array;var Ut=zt.property,Nt=Ke||{editType:"calc"};""!==(me=zt.index)&&""===Ut&&(v.isAddVal(It)?wt[Ot]=null:v.isRemoveVal(It)?wt[Ot]=(b(Ie,he).get()||[])[me]:T.warn("unrecognized full object value",oe)),p.update(at,Nt),He[he]||(He[he]={});var jt=He[he][me];jt||(jt=He[he][me]={}),jt[Ut]=It,delete oe[Ot]}else"reverse"===Ze?(rt.range?rt.range.reverse():(bt(Ye+".autorange",!0),rt.range=[1,0]),Se.autorange?at.calc=!0:at.plot=!0):("dragmode"===Ot&&(!1===It&&!1!==Re||!1!==It&&!1===Re)||Pe._has("scatter-like")&&Pe._has("regl")&&"dragmode"===Ot&&("lasso"===It||"select"===It)&&"lasso"!==Re&&"select"!==Re||Pe._has("gl2d")?at.plot=!0:Ke?p.update(at,Ke):at.calc=!0,Ht.set(It))}}for(he in He)v.applyContainerArrayChanges($,ce(Ie,he),He[he],at,ce)||(at.plot=!0);for(var Gt in Lt){var un=(_t=n.getFromId($,Gt))&&_t._constraintGroup;if(un)for(var hn in at.calc=!0,un)Lt[hn]||(n.getFromId($,hn)._constraintShrinkable=!0)}return(re($)||oe.height||oe.width)&&(at.plot=!0),(at.plot||at.calc)&&(at.layoutReplot=!0),{flags:at,rangesAltered:Lt,undoit:wt,redoit:dt,eventData:De}}function re($){var oe=$._fullLayout,he=oe.width,me=oe.height;return $.layout.autosize&&r.plotAutoSize($,$.layout,oe),oe.width!==he||oe.height!==me}function ae($,oe,he,me){$=T.getGraphDiv($),g.clearPromiseQueue($),T.isPlainObject(oe)||(oe={}),T.isPlainObject(he)||(he={}),Object.keys(oe).length&&($.changed=!0),Object.keys(he).length&&($.changed=!0);var Me=g.coerceTraceIndices($,me),Ie=B($,T.extendFlat({},oe),Me),Pe=Ie.flags,ze=ne($,T.extendFlat({},he)),ce=ze.flags;(Pe.calc||ce.calc)&&($.calcdata=void 0),Pe.clearAxisTypes&&g.clearAxisTypes($,Me,he);var ge=[];ce.layoutReplot?ge.push(y.layoutReplot):Pe.fullReplot?ge.push(z._doPlot):(ge.push(r.previousPromises),Z($,ce,ze)||r.supplyDefaults($),Pe.style&&ge.push(y.doTraceStyle),(Pe.colorbars||ce.colorbars)&&ge.push(y.doColorBars),ce.legend&&ge.push(y.doLegend),ce.layoutstyle&&ge.push(y.layoutStyles),ce.axrange&&V(ge,ze.rangesAltered),ce.ticks&&ge.push(y.doTicksRelayout),ce.modebar&&ge.push(y.doModeBar),ce.camera&&ge.push(y.doCamera),ge.push(u)),ge.push(r.rehover,r.redrag,r.reselect),s.add($,ae,[$,Ie.undoit,ze.undoit,Ie.traces],ae,[$,Ie.redoit,ze.redoit,Ie.traces]);var _e=T.syncOrAsync(ge,$);return _e&&_e.then||(_e=Promise.resolve($)),_e.then(function(){return $.emit("plotly_update",{data:Ie.eventData,layout:ze.eventData}),$})}function le($){return function(oe){oe._fullLayout._guiEditing=!0;var he=$.apply(null,arguments);return oe._fullLayout._guiEditing=!1,he}}var pe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],xe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ye($,oe){for(var he=0;he<oe.length;he++){var me=oe[he],Me=$.match(me.pattern);if(Me){var Ie=Me[1]||"";return{head:Ie,tail:$.substr(Ie.length+1),attr:me.attr}}}}function se($,oe){var he=b(oe,$).get();if(void 0!==he)return he;var me=$.split(".");for(me.pop();me.length>1;)if(me.pop(),void 0!==(he=b(oe,me.join(".")+".uirevision").get()))return he;return oe.uirevision}function fe($,oe){for(var he=0;he<oe.length;he++)if(oe[he]._fullInput.uid===$)return he;return-1}function Ee($,oe,he){for(var me=0;me<oe.length;me++)if(oe[me].uid===$)return me;return!oe[he]||oe[he].uid?-1:he}function de($,oe){var he=T.isPlainObject($),me=Array.isArray($);return he||me?(he&&T.isPlainObject(oe)||me&&Array.isArray(oe))&&JSON.stringify($)===JSON.stringify(oe):$===oe}function we($,oe,he,me){var Me,Ie,Pe,ze=me.getValObject,ce=me.flags,ge=me.immutable,_e=me.inArray,De=me.arrayIndex;function He(){var rt=Me.editType;_e&&-1!==rt.indexOf("arraydraw")?T.pushUnique(ce.arrays[_e],De):(p.update(ce,Me),"none"!==rt&&ce.nChanges++,me.transition&&Me.anim&&ce.nChangesAnim++,(W.test(Pe)||X.test(Pe))&&(ce.rangesAltered[he[0]]=1),K.test(Pe)&&b(oe,"_inputDomain").set(null),"datarevision"===Ie&&(ce.newDataRevision=1))}function Ve(rt){return"data_array"===rt.valType||rt.arrayOk}for(Ie in $){if(ce.calc&&!me.transition)return;var nt=$[Ie],tt=oe[Ie],at=he.concat(Ie);if(Pe=at.join("."),"_"!==Ie.charAt(0)&&"function"!=typeof nt&&nt!==tt){if(("tick0"===Ie||"dtick"===Ie)&&"geo"!==he[0]){var dt=oe.tickmode;if("auto"===dt||"array"===dt||!dt)continue}if(("range"!==Ie||!oe.autorange)&&("zmin"!==Ie&&"zmax"!==Ie||"contourcarpet"!==oe.type)&&(Me=ze(at))&&(!Me._compareAsJSON||JSON.stringify(nt)!==JSON.stringify(tt))){var wt,bt=Me.valType,_t=Ve(Me),Lt=Array.isArray(nt),Ct=Array.isArray(tt);if(Lt&&Ct){var Ot="_input_"+Ie,Ht=$[Ot],It=oe[Ot];if(Array.isArray(Ht)&&Ht===It)continue}if(void 0===tt)_t&&Lt?ce.calc=!0:He();else if(Me._isLinkedToArray){var Ge=[],Ze=!1;_e||(ce.arrays[Ie]=Ge);var Be=Math.min(nt.length,tt.length),Ye=Math.max(nt.length,tt.length);if(Be!==Ye){if("arraydraw"!==Me.editType){He();continue}Ze=!0}for(wt=0;wt<Be;wt++)we(nt[wt],tt[wt],at.concat(wt),T.extendFlat({inArray:Ie,arrayIndex:wt},me));if(Ze)for(wt=Be;wt<Ye;wt++)Ge.push(wt)}else!bt&&T.isPlainObject(nt)?we(nt,tt,at,me):_t?Lt&&Ct?(ge&&(ce.calc=!0),(ge||me.newDataRevision)&&He()):Lt!==Ct?ce.calc=!0:He():Lt&&Ct&&nt.length===tt.length&&String(nt)===String(tt)||He()}}}for(Ie in oe)if(!(Ie in $)&&"_"!==Ie.charAt(0)&&"function"!=typeof oe[Ie]){if(Ve(Me=ze(he.concat(Ie)))&&Array.isArray(oe[Ie]))return void(ce.calc=!0);He()}}function ke($,oe){var he;for(he in $)if("_"!==he.charAt(0)){var me=$[he],Me=oe[he];if(me!==Me)if(T.isPlainObject(me)&&T.isPlainObject(Me)){if(ke(me,Me))return!0}else{if(!Array.isArray(me)||!Array.isArray(Me)||me.length!==Me.length)return!0;for(var Ie=0;Ie<me.length;Ie++)if(me[Ie]!==Me[Ie]&&(!T.isPlainObject(me[Ie])||!T.isPlainObject(Me[Ie])||ke(me[Ie],Me[Ie])))return!0}}}function Te($){var oe=$._fullLayout,he=$.getBoundingClientRect();if(!T.equalDomRects(he,oe._lastBBox)){var me=oe._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix($));oe._invScaleX=Math.sqrt(me[0][0]*me[0][0]+me[0][1]*me[0][1]+me[0][2]*me[0][2]),oe._invScaleY=Math.sqrt(me[1][0]*me[1][0]+me[1][1]*me[1][1]+me[1][2]*me[1][2]),oe._lastBBox=he}}z.animate=function($,oe,he){if($=T.getGraphDiv($),!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var me=$._transitionData;me._frameQueue||(me._frameQueue=[]);var Me=(he=r.supplyAnimationDefaults(he)).transition,Ie=he.frame;function Pe(ge){return Array.isArray(Me)?ge>=Me.length?Me[0]:Me[ge]:Me}function ze(ge){return Array.isArray(Ie)?ge>=Ie.length?Ie[0]:Ie[ge]:Ie}function ce(ge,_e){var De=0;return function(){if(ge&&++De===_e)return ge()}}return void 0===me._frameWaitingCnt&&(me._frameWaitingCnt=0),new Promise(function(ge,_e){var He,Ve,nt=0;function tt(Ot){return Ot.transitionOpts=Array.isArray(Me)?nt>=Me.length?Me[nt]:Me[0]:Me,nt++,Ot}var at=[],dt=null==oe,wt=Array.isArray(oe);if(dt||wt||!T.isPlainObject(oe)){if(dt||-1!==["string","number"].indexOf(typeof oe))for(He=0;He<me._frames.length;He++)(Ve=me._frames[He])&&(dt||String(Ve.group)===String(oe))&&at.push({type:"byname",name:String(Ve.name),data:tt({name:Ve.name})});else if(wt)for(He=0;He<oe.length;He++){var bt=oe[He];-1!==["number","string"].indexOf(typeof bt)?(bt=String(bt),at.push({type:"byname",name:bt,data:tt({name:bt})})):T.isPlainObject(bt)&&at.push({type:"object",data:tt(T.extendFlat({},bt))})}}else at.push({type:"object",data:tt(T.extendFlat({},oe))});for(He=0;He<at.length;He++)if("byname"===(Ve=at[He]).type&&!me._frameHash[Ve.data.name])return T.warn('animate failure: frame not found: "'+Ve.data.name+'"'),void _e();-1!==["next","immediate"].indexOf(he.mode)&&function(){if(0!==me._frameQueue.length){for(;me._frameQueue.length;){var Ot=me._frameQueue.pop();Ot.onInterrupt&&Ot.onInterrupt()}$.emit("plotly_animationinterrupted",[])}}(),"reverse"===he.direction&&at.reverse();var _t=$._fullLayout._currentFrame;if(_t&&he.fromcurrent){var Lt=-1;for(He=0;He<at.length;He++)if("byname"===(Ve=at[He]).type&&Ve.name===_t){Lt=He;break}if(Lt>0&&Lt<at.length-1){var Ct=[];for(He=0;He<at.length;He++)Ve=at[He],("byname"!==at[He].type||He>Lt)&&Ct.push(Ve);at=Ct}}at.length>0?function(Ot){if(0!==Ot.length){for(var Ht=0;Ht<Ot.length;Ht++){var It;It="byname"===Ot[Ht].type?r.computeFrame($,Ot[Ht].name):Ot[Ht].data;var Ge=ze(Ht),Ze=Pe(Ht);Ze.duration=Math.min(Ze.duration,Ge.duration);var Be={frame:It,name:Ot[Ht].name,frameOpts:Ge,transitionOpts:Ze};Ht===Ot.length-1&&(Be.onComplete=ce(ge,2),Be.onInterrupt=_e),me._frameQueue.push(Be)}"immediate"===he.mode&&(me._lastFrameAt=-1/0),me._animationRaf||function De(){$.emit("plotly_animating"),me._lastFrameAt=-1/0,me._timeToNext=0,me._runningTransitions=0,me._currentFrame=null;var Ot=function(){me._animationRaf=window.requestAnimationFrame(Ot),Date.now()-me._lastFrameAt>me._timeToNext&&function(){me._currentFrame&&me._currentFrame.onComplete&&me._currentFrame.onComplete();var Ht=me._currentFrame=me._frameQueue.shift();if(Ht){var It=Ht.name?Ht.name.toString():null;$._fullLayout._currentFrame=It,me._lastFrameAt=Date.now(),me._timeToNext=Ht.frameOpts.duration,r.transition($,Ht.frame.data,Ht.frame.layout,g.coerceTraceIndices($,Ht.frame.traces),Ht.frameOpts,Ht.transitionOpts).then(function(){Ht.onComplete&&Ht.onComplete()}),$.emit("plotly_animatingframe",{name:It,frame:Ht.frame,animation:{frame:Ht.frameOpts,transition:Ht.transitionOpts}})}else $.emit("plotly_animated"),window.cancelAnimationFrame(me._animationRaf),me._animationRaf=null}()};Ot()}()}}(at):($.emit("plotly_animated"),ge())})},z.addFrames=function($,oe,he){if($=T.getGraphDiv($),null==oe)return Promise.resolve();if(!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var me,Me,Ie,Pe,ze=$._transitionData._frames,ce=$._transitionData._frameHash;if(!Array.isArray(oe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+oe);var ge=ze.length+2*oe.length,_e=[],De={};for(me=oe.length-1;me>=0;me--)if(T.isPlainObject(oe[me])){var He=oe[me].name,Ve=(ce[He]||De[He]||{}).name,nt=oe[me].name;Ve&&nt&&"number"==typeof nt&&(ce[Ve]||De[Ve])&&w<5&&(w++,T.warn('addFrames: overwriting frame "'+(ce[Ve]||De[Ve]).name+'" with a frame whose name of type "number" also equates to "'+Ve+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),De[He]={name:He},_e.push({frame:r.supplyFrameDefaults(oe[me]),index:he&&null!=he[me]?he[me]:ge+me})}_e.sort(function(Ot,Ht){return Ot.index>Ht.index?-1:Ot.index<Ht.index?1:0});var at=[],dt=[],wt=ze.length;for(me=_e.length-1;me>=0;me--){if("number"==typeof(Me=_e[me].frame).name&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Me.name)for(;ce[Me.name="frame "+$._transitionData._counter++];);if(ce[Me.name]){for(Ie=0;Ie<ze.length&&(ze[Ie]||{}).name!==Me.name;Ie++);at.push({type:"replace",index:Ie,value:Me}),dt.unshift({type:"replace",index:Ie,value:ze[Ie]})}else Pe=Math.max(0,Math.min(_e[me].index,wt)),at.push({type:"insert",index:Pe,value:Me}),dt.unshift({type:"delete",index:Pe}),wt++}return s&&s.add($,r.modifyFrames,[$,dt],r.modifyFrames,[$,at]),r.modifyFrames($,at)},z.deleteFrames=function($,oe){if($=T.getGraphDiv($),!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$);var he,me,Me=$._transitionData._frames,Ie=[],Pe=[];if(!oe)for(oe=[],he=0;he<Me.length;he++)oe.push(he);for((oe=oe.slice()).sort(),he=oe.length-1;he>=0;he--)Ie.push({type:"delete",index:me=oe[he]}),Pe.unshift({type:"insert",index:me,value:Me[me]});return s&&s.add($,r.modifyFrames,[$,Pe],r.modifyFrames,[$,Ie]),r.modifyFrames($,Ie)},z.addTraces=function $(oe,he,me){oe=T.getGraphDiv(oe);var Me,Ie,Pe=[],ze=z.deleteTraces,ce=$,ge=[oe,Pe],_e=[oe,he];for(function(De,He,Ve){var nt,tt;if(!Array.isArray(De.data))throw new Error("gd.data must be an array.");if(void 0===He)throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),nt=0;nt<He.length;nt++)if("object"!=typeof(tt=He[nt])||Array.isArray(tt)||null===tt)throw new Error("all values in traces array must be non-array objects");if(void 0===Ve||Array.isArray(Ve)||(Ve=[Ve]),void 0!==Ve&&Ve.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(oe,he,me),Array.isArray(he)||(he=[he]),he=he.map(function(De){return T.extendFlat({},De)}),g.cleanData(he),Me=0;Me<he.length;Me++)oe.data.push(he[Me]);for(Me=0;Me<he.length;Me++)Pe.push(-he.length+Me);if(void 0===me)return Ie=z.redraw(oe),s.add(oe,ze,ge,ce,_e),Ie;Array.isArray(me)||(me=[me]);try{P(oe,Pe,me)}catch(De){throw oe.data.splice(oe.data.length-he.length,he.length),De}return s.startSequence(oe),s.add(oe,ze,ge,ce,_e),Ie=z.moveTraces(oe,Pe,me),s.stopSequence(oe),Ie},z.deleteTraces=function $(oe,he){oe=T.getGraphDiv(oe);var me,Me,Ie=[],Pe=z.addTraces,ze=$,ce=[oe,Ie,he],ge=[oe,he];if(void 0===he)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(he)||(he=[he]),C(oe,he,"indices"),(he=L(he,oe.data.length-1)).sort(T.sorterDes),me=0;me<he.length;me+=1)Me=oe.data.splice(he[me],1)[0],Ie.push(Me);var _e=z.redraw(oe);return s.add(oe,Pe,ce,ze,ge),_e},z.extendTraces=function $(oe,he,me,Me){var Pe=I(oe=T.getGraphDiv(oe),he,me,Me,function Ie(ge,_e,De){var He,Ve;if(T.isTypedArray(ge))if(De<0){var nt=new ge.constructor(0),tt=j(ge,_e);De<0?(He=tt,Ve=nt):(He=nt,Ve=tt)}else if(He=new ge.constructor(De),Ve=new ge.constructor(ge.length+_e.length-De),De===_e.length)He.set(_e),Ve.set(ge);else if(De<_e.length){var at=_e.length-De;He.set(_e.subarray(at)),Ve.set(ge),Ve.set(_e.subarray(0,at),ge.length)}else{var dt=De-_e.length,wt=ge.length-dt;He.set(ge.subarray(wt)),He.set(_e,dt),Ve.set(ge.subarray(0,wt))}else He=ge.concat(_e),Ve=De>=0&&De<He.length?He.splice(0,He.length-De):[];return[He,Ve]}),ze=z.redraw(oe);return s.add(oe,z.prependTraces,[oe,Pe.update,me,Pe.maxPoints],$,arguments),ze},z.moveTraces=function $(oe,he,me){var Me,Ie=[],Pe=[],ze=$,ce=$,ge=[oe=T.getGraphDiv(oe),me,he],_e=[oe,he,me];if(P(oe,he,me),he=Array.isArray(he)?he:[he],void 0===me)for(me=[],Me=0;Me<he.length;Me++)me.push(-he.length+Me);for(me=Array.isArray(me)?me:[me],he=L(he,oe.data.length-1),me=L(me,oe.data.length-1),Me=0;Me<oe.data.length;Me++)-1===he.indexOf(Me)&&Ie.push(oe.data[Me]);for(Me=0;Me<he.length;Me++)Pe.push({newIndex:me[Me],trace:oe.data[he[Me]]});for(Pe.sort(function(He,Ve){return He.newIndex-Ve.newIndex}),Me=0;Me<Pe.length;Me+=1)Ie.splice(Pe[Me].newIndex,0,Pe[Me].trace);oe.data=Ie;var De=z.redraw(oe);return s.add(oe,ze,ge,ce,_e),De},z.prependTraces=function $(oe,he,me,Me){var Pe=I(oe=T.getGraphDiv(oe),he,me,Me,function Ie(ge,_e,De){var He,Ve;if(T.isTypedArray(ge))if(De<=0){var nt=new ge.constructor(0),tt=j(_e,ge);De<0?(He=tt,Ve=nt):(He=nt,Ve=tt)}else if(He=new ge.constructor(De),Ve=new ge.constructor(ge.length+_e.length-De),De===_e.length)He.set(_e),Ve.set(ge);else if(De<_e.length){var at=_e.length-De;He.set(_e.subarray(0,at)),Ve.set(_e.subarray(at)),Ve.set(ge,at)}else{var dt=De-_e.length;He.set(_e),He.set(ge.subarray(0,dt),_e.length),Ve.set(ge.subarray(dt))}else He=_e.concat(ge),Ve=De>=0&&De<He.length?He.splice(De,He.length):[];return[He,Ve]}),ze=z.redraw(oe);return s.add(oe,z.extendTraces,[oe,Pe.update,me,Pe.maxPoints],$,arguments),ze},z.newPlot=function($,oe,he,me){return $=T.getGraphDiv($),r.cleanPlot([],{},$._fullData||[],$._fullLayout||{}),r.purge($),z._doPlot($,oe,he,me)},z._doPlot=function($,oe,he,me){var Me;if($=T.getGraphDiv($),d.init($),T.isPlainObject(oe)){var Ie=oe;oe=Ie.data,he=Ie.layout,me=Ie.config,Me=Ie.frames}if(!1===d.triggerHandler($,"plotly_beforeplot",[oe,he,me]))return Promise.reject();oe||he||T.isPlotDiv($)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",$),E($,me),he||(he={}),k.select($).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray($._promises)||($._promises=[]);var Pe=0===($.data||[]).length&&Array.isArray(oe);Array.isArray(oe)&&(g.cleanData(oe),Pe?$.data=oe:$.data.push.apply($.data,oe),$.empty=!1),$.layout&&!Pe||($.layout=g.cleanLayout(he)),r.supplyDefaults($);var ze=$._fullLayout,ce=ze._has("cartesian");ze._replotting=!0,(Pe||ze._shouldCreateBgLayer)&&(function(dt){var wt=k.select(dt),bt=dt._fullLayout;if(bt._calcInverseTransform=Te,bt._calcInverseTransform(dt),bt._container=wt.selectAll(".plot-container").data([0]),bt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),bt._paperdiv=bt._container.selectAll(".svg-container").data([0]),bt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),bt._glcontainer=bt._paperdiv.selectAll(".gl-container").data([{}]),bt._glcontainer.enter().append("div").classed("gl-container",!0),bt._paperdiv.selectAll(".main-svg").remove(),bt._paperdiv.select(".modebar-container").remove(),bt._paper=bt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),bt._toppaper=bt._paperdiv.append("svg").classed("main-svg",!0),bt._modebardiv=bt._paperdiv.append("div"),delete bt._modeBar,bt._hoverpaper=bt._paperdiv.append("svg").classed("main-svg",!0),!bt._uid){var _t={};k.selectAll("defs").each(function(){this.id&&(_t[this.id.split("-")[1]]=1)}),bt._uid=T.randstr(_t)}bt._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),bt._defs=bt._paper.append("defs").attr("id","defs-"+bt._uid),bt._clips=bt._defs.append("g").classed("clips",!0),bt._topdefs=bt._toppaper.append("defs").attr("id","topdefs-"+bt._uid),bt._topclips=bt._topdefs.append("g").classed("clips",!0),bt._bgLayer=bt._paper.append("g").classed("bglayer",!0),bt._draggers=bt._paper.append("g").classed("draglayer",!0);var Lt=bt._paper.append("g").classed("layer-below",!0);bt._imageLowerLayer=Lt.append("g").classed("imagelayer",!0),bt._shapeLowerLayer=Lt.append("g").classed("shapelayer",!0),bt._cartesianlayer=bt._paper.append("g").classed("cartesianlayer",!0),bt._polarlayer=bt._paper.append("g").classed("polarlayer",!0),bt._smithlayer=bt._paper.append("g").classed("smithlayer",!0),bt._ternarylayer=bt._paper.append("g").classed("ternarylayer",!0),bt._geolayer=bt._paper.append("g").classed("geolayer",!0),bt._funnelarealayer=bt._paper.append("g").classed("funnelarealayer",!0),bt._pielayer=bt._paper.append("g").classed("pielayer",!0),bt._iciclelayer=bt._paper.append("g").classed("iciclelayer",!0),bt._treemaplayer=bt._paper.append("g").classed("treemaplayer",!0),bt._sunburstlayer=bt._paper.append("g").classed("sunburstlayer",!0),bt._indicatorlayer=bt._toppaper.append("g").classed("indicatorlayer",!0),bt._glimages=bt._paper.append("g").classed("glimages",!0);var Ct=bt._toppaper.append("g").classed("layer-above",!0);bt._imageUpperLayer=Ct.append("g").classed("imagelayer",!0),bt._shapeUpperLayer=Ct.append("g").classed("shapelayer",!0),bt._selectionLayer=bt._toppaper.append("g").classed("selectionlayer",!0),bt._infolayer=bt._toppaper.append("g").classed("infolayer",!0),bt._menulayer=bt._toppaper.append("g").classed("menulayer",!0),bt._zoomlayer=bt._toppaper.append("g").classed("zoomlayer",!0),bt._hoverlayer=bt._hoverpaper.append("g").classed("hoverlayer",!0),bt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),dt.emit("plotly_framework")}($),ze._shouldCreateBgLayer&&delete ze._shouldCreateBgLayer),a.initGradients($),a.initPatterns($),Pe&&n.saveShowSpikeInitial($);var ge=!$.calcdata||$.calcdata.length!==($._fullData||[]).length;ge&&r.doCalcdata($);for(var _e=0;_e<$.calcdata.length;_e++)$.calcdata[_e][0].trace=$._fullData[_e];$._context.responsive?$._responsiveChartHandler||($._responsiveChartHandler=function(){T.isHidden($)||r.resize($)},window.addEventListener("resize",$._responsiveChartHandler)):T.clearResponsive($);var De=T.extendFlat({},ze._size),He=0;function Ve(){if(r.clearAutoMarginIds($),y.drawMarginPushers($),n.allowAutoMargin($),ze._has("pie"))for(var dt=$._fullData,wt=0;wt<dt.length;wt++){var bt=dt[wt];"pie"===bt.type&&bt.automargin&&r.allowAutoMargin($,"pie."+bt.uid+".automargin")}return r.doAutoMargin($),r.previousPromises($)}function nt(){$._transitioning||(y.doAutoRangeAndConstraints($),Pe&&n.saveRangeInitial($),t.getComponentMethod("rangeslider","calcAutorange")($))}var tt=[r.previousPromises,function(){if(Me)return z.addFrames($,Me)},function dt(){for(var wt=ze._basePlotModules,bt=0;bt<wt.length;bt++)wt[bt].drawFramework&&wt[bt].drawFramework($);!ze._glcanvas&&ze._has("gl")&&(ze._glcanvas=ze._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ot){return Ot.key}),ze._glcanvas.enter().append("canvas").attr("class",function(Ot){return"gl-canvas gl-canvas-"+Ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var _t=$._context.plotGlPixelRatio;if(ze._glcanvas){ze._glcanvas.attr("width",ze.width*_t).attr("height",ze.height*_t).style("width",ze.width+"px").style("height",ze.height+"px");var Lt=ze._glcanvas.data()[0].regl;if(Lt&&(Math.floor(ze.width*_t)!==Lt._gl.drawingBufferWidth||Math.floor(ze.height*_t)!==Lt._gl.drawingBufferHeight)){var Ct="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!He)return T.log(Ct+" Clearing graph and plotting again."),r.cleanPlot([],{},$._fullData,ze),r.supplyDefaults($),ze=$._fullLayout,r.doCalcdata($),He++,dt();T.error(Ct)}}return"h"===ze.modebar.orientation?ze._modebardiv.style("height",null).style("width","100%"):ze._modebardiv.style("width",null).style("height",ze.height+"px"),r.previousPromises($)},Ve,function(){if(r.didMarginChange(De,ze._size))return T.syncOrAsync([Ve,y.layoutStyles],$)}];ce&&tt.push(function(){if(ge)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),nt],$);nt()}),tt.push(y.layoutStyles),ce&&tt.push(function(){return n.draw($,Pe?"":"redraw")},function(dt){dt._fullLayout._insideTickLabelsAutorange&&J(dt,dt._fullLayout._insideTickLabelsAutorange).then(function(){dt._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(y.drawData,y.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,function(dt){dt._fullLayout._insideTickLabelsAutorange&&Pe&&n.saveRangeInitial(dt,!0)},r.previousPromises);var at=T.syncOrAsync(tt,$);return at&&at.then||(at=Promise.resolve()),at.then(function(){return u($),$})},z.purge=function($){var oe=($=T.getGraphDiv($))._fullLayout||{};return r.cleanPlot([],{},$._fullData||[],oe),r.purge($),d.purge($),oe._container&&oe._container.remove(),delete $._context,$},z.react=function($,oe,he,me){var Me,Ie;$=T.getGraphDiv($),g.clearPromiseQueue($);var Ye,rt,Se,Re,Ke,st,Pe=$._fullData,ze=$._fullLayout;if(T.isPlotDiv($)&&Pe&&ze){if(T.isPlainObject(oe)){var ce=oe;oe=ce.data,he=ce.layout,me=ce.config,Me=ce.frames}var ge=!1;if(me){var _e=T.extendDeep({},$._context);$._context=void 0,E($,me),ge=ke(_e,$._context)}$.data=oe||[],g.cleanData($.data),$.layout=he||{},g.cleanLayout($.layout),function(Ye,rt,Se,Re){var Ke,st,ct,Tt,Et,At,ht,pt,gt,Pt,zt=Re._preGUI,Ut=[],Nt={},jt={};for(Ke in zt){if(Et=ye(Ke,pe)){if(gt=Et.head,Pt=Et.tail,(Tt=(ct=b(Re,st=Et.attr||gt+".uirevision").get())&&se(st,rt))&&Tt===ct){if(null===(At=zt[Ke])&&(At=void 0),de(pt=(ht=b(rt,Ke)).get(),At)){void 0===pt&&"autorange"===Pt&&Ut.push(gt),ht.set(H(b(Re,Ke).get()));continue}if("autorange"===Pt||"range["===Pt.substr(0,6)){var hn=zt[gt+".autorange"];if(hn||null===hn&&null===zt[gt+".range[0]"]&&null===zt[gt+".range[1]"]){if(!(gt in Nt)){var Qt=b(rt,gt).get();Nt[gt]=Qt&&(Qt.autorange||!1!==Qt.autorange&&(!Qt.range||2!==Qt.range.length))}if(Nt[gt]){ht.set(H(b(Re,Ke).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ke);delete zt[Ke],Et&&"range["===Et.tail.substr(0,6)&&(jt[Et.head]=1)}for(var _n=0;_n<Ut.length;_n++){var Fn=Ut[_n];if(jt[Fn]){var yn=b(rt,Fn).get();yn&&delete yn.autorange}}var on=Re._tracePreGUI;for(var pn in on){var ln,dn=on[pn],Cn=null;for(Ke in dn){if(!Cn){var kn=fe(pn,Se);if(kn<0){delete on[pn];break}var Rn=Ee(pn,Ye,(ln=Se[kn]._fullInput).index);if(Rn<0){delete on[pn];break}Cn=Ye[Rn]}if(Et=ye(Ke,xe)){if(Et.attr?Tt=(ct=b(Re,Et.attr).get())&&se(Et.attr,rt):(ct=ln.uirevision,void 0===(Tt=Cn.uirevision)&&(Tt=rt.uirevision)),Tt&&Tt===ct&&(null===(At=dn[Ke])&&(At=void 0),de(pt=(ht=b(Cn,Ke)).get(),At))){ht.set(H(b(ln,Ke).get()));continue}}else T.warn("unrecognized GUI edit: "+Ke+" in trace uid "+pn);delete dn[Ke]}}}($.data,$.layout,Pe,ze),r.supplyDefaults($,{skipUpdateCalc:!0});var De=$._fullData,He=$._fullLayout,Ve=void 0===He.datarevision,nt=He.transition,tt=(Ye=$,rt=ze,Se=He,Re=Ve,Ke=nt,(st=p.layoutFlags()).arrays={},st.rangesAltered={},st.nChanges=0,st.nChangesAnim=0,we(rt,Se,[],{getValObject:function(ct){return o.getLayoutValObject(Se,ct)},flags:st,immutable:Re,transition:Ke,gd:Ye}),(st.plot||st.calc)&&(st.layoutReplot=!0),Ke&&st.nChanges&&st.nChangesAnim&&(st.anim=st.nChanges===st.nChangesAnim?"all":"some"),st),dt=function(Ye,rt,Se,Re,Ke,st){var ct=rt.length===Se.length;if(!Ke&&!ct)return{fullReplot:!0,calc:!0};var Tt,Et,At=p.traceFlags();At.arrays={},At.nChanges=0,At.nChangesAnim=0;var ht={getValObject:function(gt){var Pt=o.getTraceValObject(Et,gt);return!Et._module.animatable&&Pt.anim&&(Pt.anim=!1),Pt},flags:At,immutable:Re,transition:Ke,newDataRevision:st,gd:Ye},pt={};for(Tt=0;Tt<rt.length;Tt++)if(Se[Tt]){if(r.hasMakesDataTransform(Et=Se[Tt]._fullInput)&&(Et=Se[Tt]),pt[Et.uid])continue;pt[Et.uid]=1,we(rt[Tt]._fullInput,Et,[],ht)}return(At.calc||At.plot)&&(At.fullReplot=!0),Ke&&At.nChanges&&At.nChangesAnim&&(At.anim=At.nChanges===At.nChangesAnim&&ct?"all":"some"),At}($,Pe,De,Ve,nt,tt.newDataRevision);if(re($)&&(tt.layoutReplot=!0),dt.calc||tt.calc){$.calcdata=void 0;for(var wt=Object.getOwnPropertyNames(He),bt=0;bt<wt.length;bt++){var _t=wt[bt],Lt=_t.substring(0,5);if("xaxis"===Lt||"yaxis"===Lt){var Ct=He[_t]._emptyCategories;Ct&&Ct()}}}else r.supplyDefaultsUpdateCalc($.calcdata,De);var Ot=[];if(Me&&($._transitionData={},r.createTransitionData($),Ot.push(function(){return z.addFrames($,Me)})),He.transition&&!ge&&(dt.anim||tt.anim))tt.ticks&&Ot.push(y.doTicksRelayout),r.doCalcdata($),y.doAutoRangeAndConstraints($),Ot.push(function(){return r.transitionFromReact($,dt,tt,ze)});else if(dt.fullReplot||tt.layoutReplot||ge)$._fullLayout._skipDefaults=!0,Ot.push(z._doPlot);else{for(var Ht in tt.arrays){var It=tt.arrays[Ht];if(It.length){var Ge=t.getComponentMethod(Ht,"drawOne");if(Ge!==T.noop)for(var Ze=0;Ze<It.length;Ze++)Ge($,It[Ze]);else{var Be=t.getComponentMethod(Ht,"draw");if(Be===T.noop)throw new Error("cannot draw components: "+Ht);Be($)}}}Ot.push(r.previousPromises),dt.style&&Ot.push(y.doTraceStyle),(dt.colorbars||tt.colorbars)&&Ot.push(y.doColorBars),tt.legend&&Ot.push(y.doLegend),tt.layoutstyle&&Ot.push(y.layoutStyles),tt.axrange&&V(Ot),tt.ticks&&Ot.push(y.doTicksRelayout),tt.modebar&&Ot.push(y.doModeBar),tt.camera&&Ot.push(y.doCamera),Ot.push(u)}Ot.push(r.rehover,r.redrag,r.reselect),(Ie=T.syncOrAsync(Ot,$))&&Ie.then||(Ie=Promise.resolve($))}else Ie=z.newPlot($,oe,he,me);return Ie.then(function(){return $.emit("plotly_react",{data:oe,layout:he}),$})},z.redraw=function($){if($=T.getGraphDiv($),!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$);return g.cleanData($.data),g.cleanLayout($.layout),$.calcdata=void 0,z._doPlot($).then(function(){return $.emit("plotly_redraw"),$})},z.relayout=J,z.restyle=R,z.setPlotConfig=function($){return T.extendFlat(x,$)},z.update=ae,z._guiRelayout=le(J),z._guiRestyle=le(R),z._guiUpdate=le(ae),z._storeDirectGUIEdit=function($,oe,he){for(var me in he)U(me,b($,me).get(),he[me],oe)}},72075:function(Q){"use strict";var z={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function k(A,l){for(var T in A){var b=A[T];b.valType?l[T]=b.dflt:(l[T]||(l[T]={}),k(b,l[T]))}})(z,e),Q.exports={configAttributes:z,dfltConfig:e}},86281:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(9012),T=e(10820),b=e(31391),d=e(85594),s=e(72075).configAttributes,t=e(30962),o=A.extendDeepAll,r=A.isPlainObject,n=A.isArrayOrTypedArray,a=A.nestedProperty,i=A.valObjectMeta,c="_isSubplotObj",h="_isLinkedToArray",f="_deprecated",x=[c,h,"_arrayAttrRegexps",f];function v(u,S,_){if(!u)return!1;if(u._isLinkedToArray)if(g(S[_]))_++;else if(_<S.length)return!1;for(;_<S.length;_++){var E=u[S[_]];if(!r(E)||(u=E,_===S.length-1))break;if(u._isLinkedToArray){if(!g(S[++_]))return!1}else if("info_array"===u.valType){var L=S[++_];if(!g(L))return!1;var C=u.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(2===u.dimensions){if(_++,S.length===_)return u;var P=S[_];if(!g(P))return!1;u=C[L][P]}else u=C[L]}else u=C}}return u}function g(u){return u===Math.round(u)&&u>=0}function y(){var u,S,_={};for(u in o(_,T),k.subplotsRegistry)if((S=k.subplotsRegistry[u]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(_,S,S.attr[E]);else m(_,S,"subplot"===S.attr?S.name:S.attr);for(u in k.componentsRegistry){var L=(S=k.componentsRegistry[u]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete _.yaxis[P];delete _.xaxis.shift,delete _.xaxis.autoshift}else"colorscale"===S.name?o(_,S.layoutAttributes):S.layoutAttributes&&w(_,S.layoutAttributes,S.name)}return{layoutAttributes:p(_)}}function p(u){return z.crawl(u,function(_,E,L){z.isValObject(_)?!0!==_.arrayOk&&"data_array"!==_.valType||(L[E+"src"]={valType:"string",editType:"none"}):r(_)&&(_.role="object")}),z.crawl(u,function(_,E,L){if(_){var C=_._isLinkedToArray;C&&(delete _._isLinkedToArray,L[E]={items:{}},L[E].items[C]=_,L[E].role="object")}}),function(S){!function _(E){for(var L in E)if(r(E[L]))_(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)_(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())}(S)}(u),u}function m(u,S,_){var E=a(u,_),L=o({},S.layoutAttributes);L._isSubplotObj=!0,E.set(L)}function w(u,S,_){var E=a(u,_);E.set(o(E.get()||{},S))}z.IS_SUBPLOT_OBJ=c,z.IS_LINKED_TO_ARRAY=h,z.DEPRECATED=f,z.UNDERSCORE_ATTRS=x,z.get=function(){var u={};k.allTypes.forEach(function(E){u[E]=function(L){var C,P;P=(C=k.modules[L]._module).basePlotModule;var I={type:null},j=o({},l),R=o({},C.attributes);z.crawl(R,function(U,B,N,J,Z){a(j,Z).set(void 0),void 0===U&&a(R,Z).set(void 0)}),o(I,j),k.traceIs(L,"noOpacity")&&delete I.opacity,k.traceIs(L,"showLegend")||(delete I.showlegend,delete I.legendgroup),k.traceIs(L,"noHover")&&(delete I.hoverinfo,delete I.hoverlabel),C.selectPoints||delete I.selectedpoints,o(I,R),P.attributes&&o(I,P.attributes),I.type=L;var H={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:L,attributes:p(I)};if(C.layoutAttributes){var F={};o(F,C.layoutAttributes),H.layoutAttributes=p(F)}return C.animatable||z.crawl(H,function(U){z.isValObject(U)&&"anim"in U&&delete U.anim}),H}(E)});var S,_={};return Object.keys(k.transformsRegistry).forEach(function(E){var L,P;_[E]=(P=o({},k.transformsRegistry[L=E].attributes),Object.keys(k.componentsRegistry).forEach(function(I){var j=k.componentsRegistry[I];j.schema&&j.schema.transforms&&j.schema.transforms[L]&&Object.keys(j.schema.transforms[L]).forEach(function(R){w(P,j.schema.transforms[L][R],R)})}),{attributes:p(P)})}),{defs:{valObjects:i,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:u,layout:y(),transforms:_,frames:(S={frames:o({},b)},p(S),S.frames),animation:p(d),config:p(s)}},z.crawl=function(u,S,_,E){var L=_||0;E=E||"",Object.keys(u).forEach(function(C){var P=u[C];if(-1===x.indexOf(C)){var I=(E?E+".":"")+C;S(P,C,u,L,I),z.isValObject(P)||r(P)&&"impliedEdits"!==C&&z.crawl(P,S,L+1,I)}})},z.isValObject=function(u){return u&&void 0!==u.valType},z.findArrayAttributes=function(u){var S,_,E=[],L=[],C=[];function P(U,B,N,J){L=L.slice(0,J).concat([B]),C=C.slice(0,J).concat([U&&U._isLinkedToArray]),U&&("data_array"===U.valType||!0===U.arrayOk)&&("colorbar"!==L[J-1]||"ticktext"!==B&&"tickvals"!==B)&&I(S,0,"")}function I(U,B,N){var J=U[L[B]],Z=N+L[B];if(B===L.length-1)n(J)&&E.push(_+Z);else if(C[B]){if(Array.isArray(J))for(var V=0;V<J.length;V++)r(J[V])&&I(J[V],B+1,Z+"["+V+"].")}else r(J)&&I(J,B+1,Z+".")}S=u,_="",z.crawl(l,P),u._module&&u._module.attributes&&z.crawl(u._module.attributes,P);var j=u.transforms;if(j)for(var R=0;R<j.length;R++){var H=j[R],F=H._module;F&&(_="transforms["+R+"].",S=H,z.crawl(F.attributes,P))}return E},z.getTraceValObject=function(u,S){var _,E,L=S[0],C=1;if("transforms"===L){if(1===S.length)return l.transforms;var P=u.transforms;if(!Array.isArray(P)||!P.length)return!1;var I=S[1];if(!g(I)||I>=P.length)return!1;E=(_=(k.transformsRegistry[P[I].type]||{}).attributes)&&_[S[2]],C=3}else{var j=u._module;if(j||(j=(k.modules[u.type||l.type.dflt]||{})._module),!j)return!1;if(!(E=(_=j.attributes)&&_[L])){var R=j.basePlotModule;R&&R.attributes&&(E=R.attributes[L])}E||(E=l[L])}return v(E,S,C)},z.getLayoutValObject=function(u,S){return v(function(E,L){var C,P,I,j,R=E._basePlotModules;if(R){var H;for(C=0;C<R.length;C++){if((I=R[C]).attrRegex&&I.attrRegex.test(L)){if(I.layoutAttrOverrides)return I.layoutAttrOverrides;!H&&I.layoutAttributes&&(H=I.layoutAttributes)}var F=I.baseLayoutAttrOverrides;if(F&&L in F)return F[L]}if(H)return H}var U=E._modules;if(U)for(C=0;C<U.length;C++)if((j=U[C].layoutAttributes)&&L in j)return j[L];for(P in k.componentsRegistry){if("colorscale"===(I=k.componentsRegistry[P]).name&&0===L.indexOf("coloraxis"))return I.layoutAttributes[L];if(!I.schema&&L===I.name)return I.layoutAttributes}return L in T&&T[L]}(u,S[0]),S,1)}},44467:function(Q,z,e){"use strict";var k=e(71828),A=e(9012),l={name:{valType:"string",editType:"none"}};function T(d){return d&&"string"==typeof d}function b(d){return"s"!==d.charAt(d.length-1)&&k.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}l.templateitemname={valType:"string",editType:"calc"},z.templatedArray=function(d,s){return s._isLinkedToArray=d,s.name=l.name,s.templateitemname=l.templateitemname,s},z.traceTemplater=function(d){var s,t,o={};for(s in d)t=d[s],Array.isArray(t)&&t.length&&(o[s]=0);return{newTrace:function(r){var n={type:s=k.coerce(r,{},A,"type"),_template:null};if(s in o){var a=o[s]%(t=d[s]).length;o[s]++,n._template=t[a]}return n}}},z.newContainer=function(d,s,t){var o=d._template,r=o&&(o[s]||t&&o[t]);return k.isPlainObject(r)||(r=null),d[s]={_template:r}},z.arrayTemplater=function(d,s,t){var o=d._template,r=o&&o[b(s)],n=o&&o[s];Array.isArray(n)&&n.length||(n=[]);var a={};return{newItem:function(i){var c={name:i.name,_input:i},h=c.templateitemname=i.templateitemname;if(!T(h))return c._template=r,c;for(var f=0;f<n.length;f++){var x=n[f];if(x.name===h)return a[h]=1,c._template=x,c}return c[t]=i[t]||!1,c._template=!1,c},defaultItems:function(){for(var i=[],c=0;c<n.length;c++){var h=n[c],f=h.name;if(T(f)&&!a[f]){var x={_template:h,name:f,_input:{_templateitemname:f}};x.templateitemname=h.templateitemname,i.push(x),a[f]=1}}return i}}},z.arrayDefaultKey=b,z.arrayEditor=function(d,s,t){var o=(k.nestedProperty(d,s).get()||[]).length,r=t._index,n=r>=o&&(t._input||{})._templateitemname;n&&(r=o);var a,i=s+"["+r+"]";function c(){a={},n&&(a[i]={},a[i].templateitemname=n)}function h(x,v){n?k.nestedProperty(a[i],x).set(v):a[i+"."+x]=v}function f(){var x=a;return c(),x}return c(),{modifyBase:function(x,v){a[x]=v},modifyItem:h,getUpdateObj:f,applyUpdate:function(x,v){x&&h(x,v);var g=f();for(var y in g)k.nestedProperty(d,y).set(g[y])}}}},61549:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(74875),T=e(71828),b=e(33306),d=e(7901),s=e(91424),t=e(92998),o=e(64168),r=e(89298),n=e(18783),a=e(99082),i=a.enforce,c=a.clean,h=e(71739).doAutoRange,f="start";function x(u,S,_){for(var E=0;E<_.length;E++){var L=_[E][0],C=_[E][1];if(!(L[0]>=u[1]||L[1]<=u[0])&&C[0]<S[1]&&C[1]>S[0])return!0}return!1}function v(u){var S,_,E,L,C,P,I=u._fullLayout,j=I._size,R=j.p,H=r.list(u,"",!0);if(I._paperdiv.style({width:u._context.responsive&&I.autosize&&!u._context._hasZeroWidth&&!u.layout.width?"100%":I.width+"px",height:u._context.responsive&&I.autosize&&!u._context._hasZeroHeight&&!u.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(s.setSize,I.width,I.height),u._context.setBackground(u,I.paper_bgcolor),z.drawMainTitle(u),o.manage(u),!I._has("cartesian"))return l.previousPromises(u);function F(He,Ve,nt){var tt=He._lw/2;return"x"===He._id.charAt(0)?Ve?"top"===nt?Ve._offset-R-tt:Ve._offset+Ve._length+R+tt:j.t+j.h*(1-(He.position||0))+tt%1:Ve?"right"===nt?Ve._offset+Ve._length+R+tt:Ve._offset-R-tt:j.l+j.w*(He.position||0)+tt%1}for(S=0;S<H.length;S++){var U=(L=H[S])._anchorAxis;L._linepositions={},L._lw=s.crispRound(u,L.linewidth,1),L._mainLinePosition=F(L,U,L.side),L._mainMirrorPosition=L.mirror&&U?F(L,U,n.OPPOSITE_SIDE[L.side]):null}var B=[],N=[],J=[],Z=1===d.opacity(I.paper_bgcolor)&&1===d.opacity(I.plot_bgcolor)&&I.paper_bgcolor===I.plot_bgcolor;for(_ in I._plots)if((E=I._plots[_]).mainplot)E.bg&&E.bg.remove(),E.bg=void 0;else{var V=E.xaxis.domain,W=E.yaxis.domain,X=E.plotgroup;if(x(V,W,J)){var K=X.node(),ne=E.bg=T.ensureSingle(X,"rect","bg");K.insertBefore(ne.node(),K.childNodes[0]),N.push(_)}else X.select("rect.bg").remove(),J.push([V,W]),Z||(B.push(_),N.push(_))}var re,ae,le,pe,xe,ye,se,fe,Ee,de,we,ke,Te,$=I._bgLayer.selectAll(".bg").data(B);for($.enter().append("rect").classed("bg",!0),$.exit().remove(),$.each(function(He){I._plots[He].bg=k.select(this)}),S=0;S<N.length;S++)C=(E=I._plots[N[S]]).xaxis,P=E.yaxis,E.bg&&void 0!==C._offset&&void 0!==P._offset&&E.bg.call(s.setRect,C._offset-R,P._offset-R,C._length+2*R,P._length+2*R).call(d.fill,I.plot_bgcolor).style("stroke-width",0);if(!I._hasOnlyLargeSploms)for(_ in I._plots){C=(E=I._plots[_]).xaxis,P=E.yaxis;var oe,he,me=E.clipId="clip"+I._uid+_+"plot",Me=T.ensureSingleById(I._clips,"clipPath",me,function(He){He.classed("plotclip",!0).append("rect")});E.clipRect=Me.select("rect").attr({width:C._length,height:P._length}),s.setTranslate(E.plot,C._offset,P._offset),E._hasClipOnAxisFalse?(oe=null,he=me):(oe=me,he=null),s.setClipUrl(E.plot,oe,u),E.layerClipId=he}function Ie(He){return"M"+re+","+He+"H"+ae}function Pe(He){return"M"+C._offset+","+He+"h"+C._length}function ze(He){return"M"+He+","+fe+"V"+se}function ce(He){return void 0!==P._shift&&(He+=P._shift),"M"+He+","+P._offset+"v"+P._length}function ge(He,Ve,nt){if(!He.showline||_!==He._mainSubplot)return"";if(!He._anchorAxis)return nt(He._mainLinePosition);var tt=Ve(He._mainLinePosition);return He.mirror&&(tt+=Ve(He._mainMirrorPosition)),tt}for(_ in I._plots){P=(E=I._plots[_]).yaxis;var _e="M0,0";g(C=E.xaxis,_)&&(xe=p(C,"left",P,H),re=C._offset-(xe?R+xe:0),ye=p(C,"right",P,H),ae=C._offset+C._length+(ye?R+ye:0),le=F(C,P,"bottom"),pe=F(C,P,"top"),!(Te=!C._anchorAxis||_!==C._mainSubplot)||"allticks"!==C.mirror&&"all"!==C.mirror||(C._linepositions[_]=[le,pe]),_e=ge(C,Ie,Pe),Te&&C.showline&&("all"===C.mirror||"allticks"===C.mirror)&&(_e+=Ie(le)+Ie(pe)),E.xlines.style("stroke-width",C._lw+"px").call(d.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),E.xlines.attr("d",_e);var De="M0,0";g(P,_)&&(we=p(P,"bottom",C,H),se=P._offset+P._length+(we?R:0),ke=p(P,"top",C,H),fe=P._offset-(ke?R:0),Ee=F(P,C,"left"),de=F(P,C,"right"),!(Te=!P._anchorAxis||_!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[_]=[Ee,de]),De=ge(P,ze,ce),Te&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(De+=ze(Ee)+ze(de)),E.ylines.style("stroke-width",P._lw+"px").call(d.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),E.ylines.attr("d",De)}return r.makeClipPaths(u),l.previousPromises(u)}function g(u,S){return(u.ticks||u.showline)&&(S===u._mainSubplot||"all"===u.mirror||"allticks"===u.mirror)}function y(u,S,_){if(!_.showline||!_._lw)return!1;if("all"===_.mirror||"allticks"===_.mirror)return!0;var E=_._anchorAxis;if(!E)return!1;var L=n.FROM_BL[S];return _.side===S?E.domain[L]===u.domain[L]:_.mirror&&E.domain[1-L]===u.domain[1-L]}function p(u,S,_,E){if(y(u,S,_))return _._lw;for(var L=0;L<E.length;L++){var C=E[L];if(C._mainAxis===_._mainAxis&&y(u,S,C))return C._lw}return 0}function m(u,S){var _=u.title,E=u._size,L=0;return S===f?L=_.pad.l:"end"===S&&(L=-_.pad.r),"paper"===_.xref?E.l+E.w*_.x+L:u.width*_.x+L}function w(u,S){var _=u.title,E=u._size,L=0;return"0em"!==S&&S?S===n.CAP_SHIFT+"em"&&(L=_.pad.t):L=-_.pad.b,"auto"===_.y?E.t/2:"paper"===_.yref?E.t+E.h-E.h*_.y+L:u.height-u.height*_.y+L}z.layoutStyles=function(u){return T.syncOrAsync([l.doAutoMargin,v],u)},z.drawMainTitle=function(u){var C,P,S=u._fullLayout,_=(P="middle",T.isRightAnchor(C=S.title)?P="end":T.isLeftAnchor(C)&&(P=f),P),E=function(L){var C=L.title,P="0em";return T.isTopAnchor(C)?P=n.CAP_SHIFT+"em":T.isMiddleAnchor(C)&&(P=n.MID_SHIFT+"em"),P}(S);t.draw(u,"gtitle",{propContainer:S,propName:"title.text",placeholder:S._dfltTitle.plot,attributes:{x:m(S,_),y:w(S,E),"text-anchor":_,dy:E}})},z.doTraceStyle=function(u){var S,_=u.calcdata,E=[];for(S=0;S<_.length;S++){var L=_[S],C=L[0]||{},P=C.trace||{},I=P._module||{},j=I.arraysToCalcdata;j&&j(L,P);var R=I.editStyle;R&&E.push({fn:R,cd0:C})}if(E.length){for(S=0;S<E.length;S++){var H=E[S];H.fn(u,H.cd0)}b(u),z.redrawReglTraces(u)}return l.style(u),A.getComponentMethod("legend","draw")(u),l.previousPromises(u)},z.doColorBars=function(u){return A.getComponentMethod("colorbar","draw")(u),l.previousPromises(u)},z.layoutReplot=function(u){var S=u.layout;return u.layout=void 0,A.call("_doPlot",u,"",S)},z.doLegend=function(u){return A.getComponentMethod("legend","draw")(u),l.previousPromises(u)},z.doTicksRelayout=function(u){return r.draw(u,"redraw"),u._fullLayout._hasOnlyLargeSploms&&(A.subplotsRegistry.splom.updateGrid(u),b(u),z.redrawReglTraces(u)),z.drawMainTitle(u),l.previousPromises(u)},z.doModeBar=function(u){var S=u._fullLayout;o.manage(u);for(var _=0;_<S._basePlotModules.length;_++){var E=S._basePlotModules[_].updateFx;E&&E(u)}return l.previousPromises(u)},z.doCamera=function(u){for(var S=u._fullLayout,_=S._subplots.gl3d,E=0;E<_.length;E++){var L=S[_[E]];L._scene.setViewport(L)}},z.drawData=function(u){var S=u._fullLayout;b(u);for(var _=S._basePlotModules,E=0;E<_.length;E++)_[E].plot(u);return z.redrawReglTraces(u),l.style(u),A.getComponentMethod("selections","draw")(u),A.getComponentMethod("shapes","draw")(u),A.getComponentMethod("annotations","draw")(u),A.getComponentMethod("images","draw")(u),S._replotting=!1,l.previousPromises(u)},z.redrawReglTraces=function(u){var S=u._fullLayout;if(S._has("regl")){var _,E,L=u._fullData,C=[],P=[];for(S._hasOnlyLargeSploms&&S._splomGrid.draw(),_=0;_<L.length;_++){var I=L[_];!0===I.visible&&0!==I._length&&("splom"===I.type?S._splomScenes[I.uid].draw():"scattergl"===I.type?T.pushUnique(C,I.xaxis+I.yaxis):"scatterpolargl"===I.type&&T.pushUnique(P,I.subplot))}for(_=0;_<C.length;_++)(E=S._plots[C[_]])._scene&&E._scene.draw();for(_=0;_<P.length;_++)(E=S[P[_]]._subplot)._scene&&E._scene.draw()}},z.doAutoRangeAndConstraints=function(u){for(var S,_=r.list(u,"",!0),E={},L=0;L<_.length;L++)if(!E[(S=_[L])._id]){E[S._id]=1,c(u,S),h(u,S);var C=S._matchGroup;if(C)for(var P in C){var I=r.getFromId(u,P);h(u,I,S.range),E[P]=1}}i(u)},z.finalDraw=function(u){A.getComponentMethod("rangeslider","draw")(u),A.getComponentMethod("rangeselector","draw")(u)},z.drawMarginPushers=function(u){A.getComponentMethod("legend","draw")(u),A.getComponentMethod("rangeselector","draw")(u),A.getComponentMethod("sliders","draw")(u),A.getComponentMethod("updatemenus","draw")(u),A.getComponentMethod("colorbar","draw")(u)}},96318:function(Q,z,e){"use strict";var k=e(71828),A=k.isPlainObject,l=e(86281),T=e(74875),b=e(9012),d=e(44467),s=e(72075).dfltConfig;function t(f,x){f=k.extendDeep({},f);var v,g,y=Object.keys(f).sort();function p(_,E,L){if(A(E)&&A(_))t(_,E);else if(Array.isArray(E)&&Array.isArray(_)){var C=d.arrayTemplater({_template:f},L);for(g=0;g<E.length;g++){var P=E[g],I=C.newItem(P)._template;I&&t(I,P)}var j=C.defaultItems();for(g=0;g<j.length;g++)E.push(j[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(v=0;v<y.length;v++){var m=y[v],w=f[m];if(m in x?p(w,x[m],m):x[m]=w,o(m)===m)for(var u in x){var S=o(u);u===S||S!==m||u in f||p(w,x[u],m)}}}function o(f){return f.replace(/[0-9]+$/,"")}function r(f,x,v,g,y){var p=y&&v(y);for(var m in f){var w=f[m],u=i(f,m,g),S=i(f,m,y),_=v(S);if(!_){var E=o(m);E!==m&&(_=v(S=i(f,E,y)))}if(!(p&&p===_||!_||_._noTemplating||"data_array"===_.valType||_.arrayOk&&Array.isArray(w)))if(!_.valType&&A(w))r(w,x,v,u,S);else if(_._isLinkedToArray&&Array.isArray(w))for(var L=!1,C=0,P={},I=0;I<w.length;I++){var j=w[I];if(A(j)){var R=j.name;if(R)P[R]||(r(j,x,v,i(w,C,u),i(w,C,S)),C++,P[R]=1);else if(!L){var H=i(f,d.arrayDefaultKey(m),g),F=i(w,C,u);r(j,x,v,F,i(w,C,S));var U=k.nestedProperty(x,F);k.nestedProperty(x,H).set(U.get()),U.set(null),L=!0}}}else k.nestedProperty(x,u).set(w)}}function n(f,x){return l.getLayoutValObject(f,k.nestedProperty({},x).parts)}function a(f,x){return l.getTraceValObject(f,k.nestedProperty({},x).parts)}function i(f,x,v){return v?Array.isArray(f)?v+"["+x+"]":v+"."+x:x}function c(f){for(var x=0;x<f.length;x++)if(A(f[x]))return!0}function h(f){var x;switch(f.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":x=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=x,f}z.makeTemplate=function(f){f=k.isPlainObject(f)?f:k.getGraphDiv(f),f=k.extendDeep({_context:s},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var x=f.data||[],v=f.layout||{};v._basePlotModules=f._fullLayout._basePlotModules,v._modules=f._fullLayout._modules;var g={data:{},layout:{}};x.forEach(function(C){var P={};r(C,P,a.bind(null,C));var I=k.coerce(C,{},b,"type"),j=g.data[I];j||(j=g.data[I]=[]),j.push(P)}),r(v,g.layout,n.bind(null,v)),delete g.layout.template;var y=v.template;if(A(y)){var p,m,w,u,S,_,E=y.layout;A(E)&&t(E,g.layout);var L=y.data;if(A(L)){for(m in g.data)if(w=L[m],Array.isArray(w)){for(_=(S=g.data[m]).length,u=w.length,p=0;p<_;p++)t(w[p%u],S[p]);for(p=_;p<u;p++)S.push(k.extendDeep({},w[p]))}for(m in L)m in g.data||(g.data[m]=k.extendDeep([],L[m]))}}return g},z.validateTemplate=function(f,x){var v=k.extendDeep({},{_context:s,data:f.data,layout:f.layout}),g=v.layout||{};A(x)||(x=g.template||{});var y=x.layout,p=x.data,m=[];v.layout=g,v.layout.template=x,T.supplyDefaults(v);var w=v._fullLayout,u=v._fullData,S={};if(A(y)?(function j(R,H){for(var F in R)if("_"!==F.charAt(0)&&A(R[F])){var U,B=o(F),N=[];for(U=0;U<H.length;U++)N.push(i(R,F,H[U])),B!==F&&N.push(i(R,B,H[U]));for(U=0;U<N.length;U++)S[N[U]]=1;j(R[F],N)}}(w,["layout"]),function j(R,H){for(var F in R)if(-1===F.indexOf("defaults")&&A(R[F])){var U=i(R,F,H);S[U]?j(R[F],U):m.push({code:"unused",path:U})}}(y,"layout")):m.push({code:"layout"}),A(p)){for(var _,E={},L=0;L<u.length;L++){var C=u[L];E[_=C.type]=(E[_]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:_})}for(_ in p){var P=p[_].length,I=E[_]||0;P>I?m.push({code:"unused",traceType:_,templateCount:P,dataCount:I}):I>P&&m.push({code:"reused",traceType:_,templateCount:P,dataCount:I})}}else m.push({code:"data"});if(function j(R,H){for(var F in R)if("_"!==F.charAt(0)){var U=R[F],B=i(R,F,H);A(U)?(Array.isArray(R)&&!1===U._template&&U.templateitemname&&m.push({code:"missing",path:B,templateitemname:U.templateitemname}),j(U,B)):Array.isArray(U)&&c(U)&&j(U,B)}}({data:u,layout:w},""),m.length)return m.map(h)}},403:function(Q,z,e){"use strict";var k=e(92770),A=e(72391),l=e(74875),T=e(71828),b=e(25095),d=e(5900),s=e(70942),t=e(11506).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};Q.exports=function(r,n){var a,i,c,h;function f(I){return!(I in n)||T.validate(n[I],o[I])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],i=r.layout||{},c=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),i=T.extendDeep({},r.layout),c=r._context,h=r._fullLayout||{}),!f("width")&&null!==n.width||!f("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+T.join2(o.format.values,", "," or ")+".");var x={};function v(I,j){return T.coerce(n,x,o,I,j)}var g=v("format"),y=v("width"),p=v("height"),m=v("scale"),w=v("setBackground"),u=v("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var _=T.extendFlat({},i);y?_.width=y:null===n.width&&k(h.width)&&(_.width=h.width),p?_.height=p:null===n.height&&k(h.height)&&(_.height=h.height);var E=T.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=b.getRedrawFunc(S);function C(){return new Promise(function(I){setTimeout(I,b.getDelay(S._fullLayout))})}function P(){return new Promise(function(I,j){var R=d(S,g,m),H=S._fullLayout.width,F=S._fullLayout.height;function U(){A.purge(S),document.body.removeChild(S)}if("full-json"===g){var B=l.graphJson(S,!1,"keepdata","object",!0,!0);return B.version=t,B=JSON.stringify(B),U(),I(u?B:b.encodeJSON(B))}if(U(),"svg"===g)return I(u?R:b.encodeSVG(R));var N=document.createElement("canvas");N.id=T.randstr(),s({format:g,width:H,height:F,scale:m,canvas:N,svg:R,promise:!0}).then(I).catch(j)})}return new Promise(function(I,j){A.newPlot(S,a,_,E).then(L).then(C).then(P).then(function(R){var H;I((H=R,u?H.replace(b.IMAGE_URL_PREFIX,""):H))}).catch(function(R){j(R)})})}},84936:function(Q,z,e){"use strict";var k=e(71828),A=e(74875),l=e(86281),T=e(72075).dfltConfig,b=k.isPlainObject,d=Array.isArray,s=k.isArrayOrTypedArray;function t(x,v,g,y,p,m){m=m||[];for(var w=Object.keys(x),u=0;u<w.length;u++){var S=w[u];if("transforms"!==S){var _=m.slice();_.push(S);var E=x[S],L=v[S],C=c(g,S),P=(C||{}).valType,I="info_array"===P,j="colorscale"===P,R=(C||{}).items;if(i(g,S))if(b(E)&&b(L)&&"any"!==P)t(E,L,C,y,p,_);else if(I&&d(E)){E.length>L.length&&y.push(a("unused",p,_.concat(L.length)));var H,F,B,N,J=L.length,Z=Array.isArray(R);if(Z&&(J=Math.min(J,R.length)),2===C.dimensions)for(F=0;F<J;F++)if(d(E[F])){E[F].length>L[F].length&&y.push(a("unused",p,_.concat(F,L[F].length)));var V=L[F].length;for(H=0;H<(Z?Math.min(V,R[F].length):V);H++)N=L[F][H],k.validate(B=E[F][H],Z?R[F][H]:R)?N!==B&&N!==+B&&y.push(a("dynamic",p,_.concat(F,H),B,N)):y.push(a("value",p,_.concat(F,H),B))}else y.push(a("array",p,_.concat(F),E[F]));else for(F=0;F<J;F++)N=L[F],k.validate(B=E[F],Z?R[F]:R)?N!==B&&N!==+B&&y.push(a("dynamic",p,_.concat(F),B,N)):y.push(a("value",p,_.concat(F),B))}else if(C.items&&!I&&d(E)){var W,X,K=R[Object.keys(R)[0]],ne=[];for(W=0;W<L.length;W++){var re=L[W]._index||W;if((X=_.slice()).push(re),b(E[re])&&b(L[W])){ne.push(re);var ae=E[re],le=L[W];b(ae)&&!1!==ae.visible&&!1===le.visible?y.push(a("invisible",p,X)):t(ae,le,K,y,p,X)}}for(W=0;W<E.length;W++)(X=_.slice()).push(W),b(E[W])?-1===ne.indexOf(W)&&y.push(a("unused",p,X)):y.push(a("object",p,X,E[W]))}else!b(E)&&b(L)?y.push(a("object",p,_,E)):s(E)||!s(L)||I||j?S in v?k.validate(E,C)?"enumerated"===C.valType&&(C.coerceNumber&&E!==+L||E!==L)&&y.push(a("dynamic",p,_,E,L)):y.push(a("value",p,_,E)):y.push(a("unused",p,_,E)):y.push(a("array",p,_,E));else y.push(a("schema",p,_))}}return y}Q.exports=function(x,v){void 0===x&&(x=[]),void 0===v&&(v={});var g,y,p=l.get(),m=[],w={_context:k.extendFlat({},T)};d(x)?(w.data=k.extendDeep([],x),g=x):(w.data=[],g=[],m.push(a("array","data"))),b(v)?(w.layout=k.extendDeep({},v),y=v):(w.layout={},y={},arguments.length>1&&m.push(a("object","layout"))),A.supplyDefaults(w);for(var u=w._fullData,S=g.length,_=0;_<S;_++){var E=g[_],L=["data",_];if(b(E)){var C=u[_],P=C.type,I=p.traces[P].attributes;I.type={valType:"enumerated",values:[P]},!1===C.visible&&!1!==E.visible&&m.push(a("invisible",L)),t(E,C,I,m,L);var j=E.transforms,R=C.transforms;if(j){d(j)||m.push(a("array",L,["transforms"])),L.push("transforms");for(var H=0;H<j.length;H++){var F=["transforms",H],U=j[H].type;if(b(j[H])){var B=p.transforms[U]?p.transforms[U].attributes:{};B.type={valType:"enumerated",values:Object.keys(p.transforms)},t(j[H],R[H],B,m,L,F)}else m.push(a("object",L,F))}}}else m.push(a("object",L))}var N=w._fullLayout,J=function o(x,v){for(var g=x.layout.layoutAttributes,y=0;y<v.length;y++){var p=v[y],m=x.traces[p.type],w=m.layoutAttributes;w&&k.extendFlat(p.subplot?g[m.attributes.subplot.dflt]:g,w)}return g}(p,u);return t(y,N,J,m,"layout"),0===m.length?void 0:m};var r={object:function(x,v){return("layout"===x&&""===v?"The layout argument":"data"===x[0]&&""===v?"Trace "+x[1]+" in the data argument":n(x)+"key "+v)+" must be linked to an object container"},array:function(x,v){return("data"===x?"The data argument":n(x)+"key "+v)+" must be linked to an array container"},schema:function(x,v){return n(x)+"key "+v+" is not part of the schema"},unused:function(x,v,g){var y=b(g)?"container":"key";return n(x)+y+" "+v+" did not get coerced"},dynamic:function(x,v,g,y){return[n(x)+"key",v,"(set to '"+g+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(x,v){return(v?n(x)+"item "+v:"Trace "+x[1])+" got defaulted to be not visible"},value:function(x,v,g){return[n(x)+"key "+v,"is set to an invalid value ("+g+")"].join(" ")}};function n(x){return d(x)?"In data trace "+x[1]+", ":"In "+x+", "}function a(x,v,g,y,p){var m,w;g=g||"",d(v)?(m=v[0],w=v[1]):(m=v,w=null);var u=function(_){if(!d(_))return String(_);for(var E="",L=0;L<_.length;L++){var C=_[L];"number"==typeof C?E=E.substr(0,E.length-1)+"["+C+"]":E+=C,L<_.length-1&&(E+=".")}return E}(g),S=r[x](v,u,y,p);return k.log(S),{code:x,container:m,trace:w,path:g,astr:u,msg:S}}function i(x,v){var g=f(v),y=g.keyMinusId;return!!(y in x&&x[y]._isSubplotObj&&g.id)||v in x}function c(x,v){return v in x?x[v]:x[f(v).keyMinusId]}var h=k.counterRegex("([a-z]+)");function f(x){var v=x.match(h);return{keyMinusId:v&&v[1],id:v&&v[2]}}},85594:function(Q){"use strict";Q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(Q,z,e){"use strict";var k=e(71828),A=e(44467);Q.exports=function(l,T,b){var d,s,t=b.name,o=b.inclusionAttr||"visible",r=T[t],n=k.isArrayOrTypedArray(l[t])?l[t]:[],a=T[t]=[],i=A.arrayTemplater(T,t,o);for(d=0;d<n.length;d++){var c=n[d];k.isPlainObject(c)?s=i.newItem(c):(s=i.newItem({}))[o]=!1,s._index=d,!1!==s[o]&&b.handleItemDefaults(c,s,T,b),a.push(s)}var h=i.defaultItems();for(d=0;d<h.length;d++)(s=h[d])._index=a.length,b.handleItemDefaults({},s,T,b,{}),a.push(s);if(k.isArrayOrTypedArray(r)){var f=Math.min(r.length,a.length);for(d=0;d<f;d++)k.relinkPrivateKeys(a[d],r[d])}return a}},9012:function(Q,z,e){"use strict";var k=e(41940),A=e(77914);Q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:k({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:A.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=A.dateTime2ms,T=A.incrementMonth,b=e(50606).ONEAVGMONTH;Q.exports=function(d,s,t,o){if("date"!==s.type)return{vals:o};var r=d[t+"periodalignment"];if(!r)return{vals:o};var n,a=d[t+"period"];if(k(a)){if((a=+a)<=0)return{vals:o}}else if("string"==typeof a&&"M"===a.charAt(0)){var i=+a.substring(1);if(!(i>0&&Math.round(i)===i))return{vals:o};n=i}for(var c=s.calendar,h="start"===r,f="end"===r,v=l(d[t+"period0"],c)||0,g=[],y=[],p=[],m=o.length,w=0;w<m;w++){var u,S,_,E=o[w];if(n){for(u=Math.round((E-v)/(n*b)),_=T(v,n*u,c);_>E;)_=T(_,-n,c);for(;_<=E;)_=T(_,n,c);S=T(_,-n,c)}else{for(_=v+(u=Math.round((E-v)/a))*a;_>E;)_-=a;for(;_<=E;)_+=a;S=_-a}g[w]=h?S:f?_:(S+_)/2,y[w]=S,p[w]=_}return{vals:g,starts:y,ends:p}}},89502:function(Q){"use strict";Q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(71828),T=e(50606).FP_SAFE,b=e(73972),d=e(91424),s=e(41675),t=s.getFromId,o=s.isLinked;function r(y,p){var m,w,u=[],S=y._fullLayout,_=a(S,p,0),E=a(S,p,1),L=i(y,p),C=L.min,P=L.max;if(0===C.length||0===P.length)return l.simpleMap(p.range,p.r2l);var I=C[0].val,j=P[0].val;for(m=1;m<C.length&&I===j;m++)I=Math.min(I,C[m].val);for(m=1;m<P.length&&I===j;m++)j=Math.max(j,P[m].val);var R=!1;if(p.range){var H=l.simpleMap(p.range,p.r2l);R=H[1]<H[0]}"reversed"===p.autorange&&(R=!0,p.autorange=!0);var F,U,B,N,J,Z,V=p.rangemode,W="tozero"===V,X="nonnegative"===V,K=p._length,ne=K/10,re=0;for(m=0;m<C.length;m++)for(F=C[m],w=0;w<P.length;w++)(Z=(U=P[w]).val-F.val-n(p,F.val,U.val))>0&&((J=K-_(F)-E(U))>ne?Z/J>re&&(B=F,N=U,re=Z/J):Z/K>re&&(B={val:F.val,nopad:1},N={val:U.val,nopad:1},re=Z/K));if(I===j){var ae=I-1,le=I+1;if(W)if(0===I)u=[0,1];else{var pe=(I>0?P:C).reduce(function(ye,se){return Math.max(ye,E(se))},0),xe=I/(1-Math.min(.5,pe/K));u=I>0?[0,xe]:[xe,0]}else u=X?[Math.max(0,ae),Math.max(1,le)]:[ae,le]}else W?(B.val>=0&&(B={val:0,nopad:1}),N.val<=0&&(N={val:0,nopad:1})):X&&(B.val-re*_(B)<0&&(B={val:0,nopad:1}),N.val<=0&&(N={val:1,nopad:1})),re=(N.val-B.val-n(p,F.val,U.val))/(K-_(B)-E(N)),u=[B.val-re*_(B),N.val+re*E(N)];return R&&u.reverse(),l.simpleMap(u,p.l2r||Number)}function n(y,p,m){var w=0;if(y.rangebreaks)for(var u=y.locateBreaks(p,m),S=0;S<u.length;S++){var _=u[S];w+=_.max-_.min}return w}function a(y,p,m){var w=.05*p._length,u=p._anchorAxis||{};if(-1!==(p.ticklabelposition||"").indexOf("inside")||-1!==(u.ticklabelposition||"").indexOf("inside")){var S="reversed"===p.autorange;if(!S){var _=l.simpleMap(p.range,p.r2l);S=_[1]<_[0]}S&&(m=!m)}var E=0;return o(y,p._id)||(E=function(L,C,P){var I=0,j="x"===C._id.charAt(0);for(var R in L._plots){var H=L._plots[R];if(C._id===H.xaxis._id||C._id===H.yaxis._id){var F=(j?H.yaxis:H.xaxis)||{};if(-1!==(F.ticklabelposition||"").indexOf("inside")&&(!P&&("left"===F.side||"bottom"===F.side)||P&&("top"===F.side||"right"===F.side))){if(F._vals){var U=l.deg2rad(F._tickAngles[F._id+"tick"]||0),B=Math.abs(Math.cos(U)),N=Math.abs(Math.sin(U));F._vals[0].bb||F._selections[F._id+"tick"].each(function(K){var ne=k.select(this);ne.select(".text-math-group").empty()&&(K.bb=d.bBox(ne.node()))});for(var Z=0;Z<F._vals.length;Z++){var V=F._vals[Z].bb;if(V){var W=6+V.width,X=6+V.height;I=Math.max(I,j?Math.max(W*B,X*N):Math.max(X*B,W*N))}}}"inside"===F.ticks&&"inside"===F.ticklabelposition&&(I+=F.ticklen||0)}}}return I}(y,p,m)),w=Math.max(E,w),"domain"===p.constrain&&p._inputDomain&&(w*=(p._inputDomain[1]-p._inputDomain[0])/(p.domain[1]-p.domain[0])),function(L){return L.nopad?0:L.pad+(L.extrapad?w:E)}}function i(y,p,m){var w,u,S,_=p._id,L=y._fullLayout,C=[],P=[];function I(U,B){for(w=0;w<B.length;w++){var N=U[B[w]],J=(N._extremes||{})[_];if(!0===N.visible&&J){for(u=0;u<J.min.length;u++)c(C,(S=J.min[u]).val,S.pad,{extrapad:S.extrapad});for(u=0;u<J.max.length;u++)h(P,(S=J.max[u]).val,S.pad,{extrapad:S.extrapad})}}}if(I(y._fullData,p._traceIndices),I(L.annotations||[],p._annIndices||[]),I(L.shapes||[],p._shapeIndices||[]),p._matchGroup&&!m)for(var j in p._matchGroup)if(j!==p._id){var R=t(y,j),H=i(y,R,!0),F=p._length/R._length;for(u=0;u<H.min.length;u++)c(C,(S=H.min[u]).val,S.pad*F,{extrapad:S.extrapad});for(u=0;u<H.max.length;u++)h(P,(S=H.max[u]).val,S.pad*F,{extrapad:S.extrapad})}return{min:C,max:P}}function c(y,p,m,w){f(y,p,m,w,v)}function h(y,p,m,w){f(y,p,m,w,g)}function f(y,p,m,w,u){for(var S=w.tozero,_=w.extrapad,E=!0,L=0;L<y.length&&E;L++){var C=y[L];if(u(C.val,p)&&C.pad>=m&&(C.extrapad||!_)){E=!1;break}u(p,C.val)&&C.pad<=m&&(_||!C.extrapad)&&(y.splice(L,1),L--)}if(E){var P=S&&0===p;y.push({val:p,pad:P?0:m,extrapad:!P&&_})}}function x(y){return A(y)&&Math.abs(y)<T}function v(y,p){return y<=p}function g(y,p){return y>=p}Q.exports={getAutoRange:r,makePadFn:a,doAutoRange:function(y,p,m){if(p.setScale(),p.autorange){p.range=m?m.slice():r(y,p),p._r=p.range.slice(),p._rl=l.simpleMap(p._r,p.r2l);var w=p._input,u={};u[p._attr+".range"]=p.range,u[p._attr+".autorange"]=p.autorange,b.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,u),w.range=p.range.slice(),w.autorange=p.autorange}var S=p._anchorAxis;if(S&&S.rangeslider){var _=S.rangeslider[p._name];_&&"auto"===_.rangemode&&(_.range=r(y,p)),S._input.rangeslider[p._name]=l.extendFlat({},_)}},findExtremes:function(y,p,m){m||(m={}),y._m||y.setScale();var w,u,S,_,E,L,C,P,I,j=[],R=[],H=p.length,F=m.padded||!1,U=m.tozero&&("linear"===y.type||"-"===y.type),B="log"===y.type,N=!1,J=m.vpadLinearized||!1;function Z(le){if(Array.isArray(le))return N=!0,function(xe){return Math.max(Number(le[xe]||0),0)};var pe=Math.max(Number(le||0),0);return function(){return pe}}var V=Z((y._m>0?m.ppadplus:m.ppadminus)||m.ppad||0),W=Z((y._m>0?m.ppadminus:m.ppadplus)||m.ppad||0),X=Z(m.vpadplus||m.vpad),K=Z(m.vpadminus||m.vpad);if(!N){if(P=1/0,I=-1/0,B)for(w=0;w<H;w++)(u=p[w])<P&&u>0&&(P=u),u>I&&u<T&&(I=u);else for(w=0;w<H;w++)(u=p[w])<P&&u>-T&&(P=u),u>I&&u<T&&(I=u);p=[P,I],H=2}var ne={tozero:U,extrapad:F};function re(le){A(S=p[le])&&(L=V(le),C=W(le),J?(_=y.c2l(S)-K(le),E=y.c2l(S)+X(le)):(P=S-K(le),I=S+X(le),B&&P<I/10&&(P=I/10),_=y.c2l(P),E=y.c2l(I)),U&&(_=Math.min(0,_),E=Math.max(0,E)),x(_)&&c(j,_,C,ne),x(E)&&h(R,E,L,ne))}var ae=Math.min(6,H);for(w=0;w<ae;w++)re(w);for(w=H-1;w>=ae;w--)re(w);return{min:j,max:R,opts:m}},concatExtremes:i}},89298:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(74875),T=e(73972),b=e(71828),d=b.strTranslate,s=e(63893),t=e(92998),o=e(7901),r=e(91424),n=e(13838),a=e(66287),i=e(50606),c=i.ONEMAXYEAR,h=i.ONEAVGYEAR,f=i.ONEMINYEAR,x=i.ONEMAXQUARTER,v=i.ONEAVGQUARTER,g=i.ONEMINQUARTER,y=i.ONEMAXMONTH,p=i.ONEAVGMONTH,m=i.ONEMINMONTH,w=i.ONEWEEK,u=i.ONEDAY,S=u/2,_=i.ONEHOUR,E=i.ONEMIN,L=i.ONESEC,C=i.MINUS_SIGN,P=i.BADNUM,I={K:"zeroline"},j={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},F={K:"tick",L:"text"},U={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},B=e(18783),N=B.MID_SHIFT,J=B.CAP_SHIFT,Z=B.LINE_SPACING,V=B.OPPOSITE_SIDE,W=Q.exports={};W.setConvert=e(21994);var X=e(4322),K=e(41675),ne=K.idSort,re=K.isLinked;W.id2name=K.id2name,W.name2id=K.name2id,W.cleanId=K.cleanId,W.list=K.list,W.listIds=K.listIds,W.getFromId=K.getFromId,W.getFromTrace=K.getFromTrace;var ae=e(71739);function le(Se){var Re=1e-4*(Se[1]-Se[0]);return[Se[0]-Re,Se[1]+Re]}W.getAutoRange=ae.getAutoRange,W.findExtremes=ae.findExtremes,W.coerceRef=function(Se,Re,Ke,st,ct,Tt){var Et=st.charAt(st.length-1),At=Ke._fullLayout._subplots[Et+"axis"],ht=st+"ref",pt={};return ct||(ct=At[0]||("string"==typeof Tt?Tt:Tt[0])),Tt||(Tt=ct),At=At.concat(At.map(function(gt){return gt+" domain"})),pt[ht]={valType:"enumerated",values:At.concat(Tt?"string"==typeof Tt?[Tt]:Tt:[]),dflt:ct},b.coerce(Se,Re,pt,ht)},W.getRefType=function(Se){return void 0===Se?Se:"paper"===Se?"paper":"pixel"===Se?"pixel":/( domain)$/.test(Se)?"domain":"range"},W.coercePosition=function(Se,Re,Ke,st,ct,Tt){var Et,At;if("range"!==W.getRefType(st))Et=b.ensureNumber,At=Ke(ct,Tt);else{var ht=W.getFromId(Re,st);At=Ke(ct,Tt=ht.fraction2r(Tt)),Et=ht.cleanPos}Se[ct]=Et(At)},W.cleanPosition=function(Se,Re,Ke){return("paper"===Ke||"pixel"===Ke?b.ensureNumber:W.getFromId(Re,Ke).cleanPos)(Se)},W.redrawComponents=function(Se,Re){Re=Re||W.listIds(Se);var Ke=Se._fullLayout;function st(ct,Tt,Et,At){for(var ht=T.getComponentMethod(ct,Tt),pt={},gt=0;gt<Re.length;gt++)for(var Pt=Ke[W.id2name(Re[gt])][Et],zt=0;zt<Pt.length;zt++){var Ut=Pt[zt];if(!pt[Ut]&&(ht(Se,Ut),pt[Ut]=1,At))return}}st("annotations","drawOne","_annIndices"),st("shapes","drawOne","_shapeIndices"),st("images","draw","_imgIndices",!0),st("selections","drawOne","_selectionIndices")};var pe=W.getDataConversions=function(Se,Re,Ke,st){var ct,Tt="x"===Ke||"y"===Ke||"z"===Ke?Ke:st;if(Array.isArray(Tt)){if(ct={type:X(st,void 0,{autotypenumbers:Se._fullLayout.autotypenumbers}),_categories:[]},W.setConvert(ct),"category"===ct.type)for(var Et=0;Et<st.length;Et++)ct.d2c(st[Et])}else ct=W.getFromTrace(Se,Re,Tt);return ct?{d2c:ct.d2c,c2d:ct.c2d}:"ids"===Tt?{d2c:ye,c2d:ye}:{d2c:xe,c2d:xe}};function xe(Se){return+Se}function ye(Se){return String(Se)}function se(Se,Re){return Math.abs((Se/Re+.5)%1-.5)<.001}function fe(Se,Re){return Math.abs(Se/Re-1)<.001}function Ee(Se){return+Se.substring(1)}function de(Se,Re){return Se.rangebreaks&&(Re=Re.filter(function(Ke){return Se.maskBreaks(Ke.x)!==P})),Re}function we(Se){var Re=Se._mainAxis,Ke=[];if(Re._vals)for(var st=0;st<Re._vals.length;st++)if(!Re._vals[st].noTick){var ct=Re.l2p(Re._vals[st].x),Tt=Se.p2l(ct),Et=W.tickText(Se,Tt);Re._vals[st].minor&&(Et.minor=!0,Et.text=""),Ke.push(Et)}return de(Se,Ke)}function ke(Se){var Re=le(b.simpleMap(Se.range,Se.r2l)),Ke=Math.min(Re[0],Re[1]),st=Math.max(Re[0],Re[1]),ct="category"===Se.type?Se.d2l_noadd:Se.d2l;"log"===Se.type&&"L"!==String(Se.dtick).charAt(0)&&(Se.dtick="L"+Math.pow(10,Math.floor(Math.min(Se.range[0],Se.range[1]))-1));for(var Tt=[],Et=0;Et<=1;Et++)if(!Et||Se.minor){var At=Et?Se.minor.tickvals:Se.tickvals,ht=Et?[]:Se.ticktext;if(At){Array.isArray(ht)||(ht=[]);for(var pt=0;pt<At.length;pt++){var gt=ct(At[pt]);if(gt>Ke&&gt<st){var Pt=void 0===ht[pt]?W.tickText(Se,gt):ce(Se,gt,String(ht[pt]));Et&&(Pt.minor=!0,Pt.text=""),Tt.push(Pt)}}}}return de(Se,Tt)}W.getDataToCoordFunc=function(Se,Re,Ke,st){return pe(Se,Re,Ke,st).d2c},W.counterLetter=function(Se){var Re=Se.charAt(0);return"x"===Re?"y":"y"===Re?"x":void 0},W.minDtick=function(Se,Re,Ke,st){-1===["log","category","multicategory"].indexOf(Se.type)&&st?void 0===Se._minDtick?(Se._minDtick=Re,Se._forceTick0=Ke):Se._minDtick&&((Se._minDtick/Re+1e-6)%1<2e-6&&((Ke-Se._forceTick0)/Re%1+1.000001)%1<2e-6?(Se._minDtick=Re,Se._forceTick0=Ke):((Re/Se._minDtick+1e-6)%1>2e-6||((Ke-Se._forceTick0)/Se._minDtick%1+1.000001)%1>2e-6)&&(Se._minDtick=0)):Se._minDtick=0},W.saveRangeInitial=function(Se,Re){for(var Ke=W.list(Se,"",!0),st=!1,ct=0;ct<Ke.length;ct++){var Tt=Ke[ct],Et=void 0===Tt._rangeInitial;(Et&&!1===Tt.autorange||Re&&(Et||Tt.range[0]!==Tt._rangeInitial[0]||Tt.range[1]!==Tt._rangeInitial[1]))&&(Tt._rangeInitial=Tt.range.slice(),st=!0)}return st},W.saveShowSpikeInitial=function(Se,Re){for(var Ke=W.list(Se,"",!0),st=!1,ct="on",Tt=0;Tt<Ke.length;Tt++){var Et=Ke[Tt],At=void 0===Et._showSpikeInitial;(At||Re&&(At||Et.showspikes!==Et._showspikes))&&(Et._showSpikeInitial=Et.showspikes,st=!0),"on"!==ct||Et.showspikes||(ct="off")}return Se._fullLayout._cartesianSpikesEnabled=ct,st},W.autoBin=function(Se,Re,Ke,st,ct,Tt){var Et,At=b.aggNums(Math.min,null,Se),ht=b.aggNums(Math.max,null,Se);if("category"===Re.type||"multicategory"===Re.type)return{start:At-.5,end:ht+.5,size:Math.max(1,Math.round(Tt)||1),_dataSpan:ht-At};if(ct||(ct=Re.calendar),Et="log"===Re.type?{type:"linear",range:[At,ht]}:{type:Re.type,range:b.simpleMap([At,ht],Re.c2r,0,ct),calendar:ct},W.setConvert(Et),Tt=Tt&&a.dtick(Tt,Et.type))Et.dtick=Tt,Et.tick0=a.tick0(void 0,Et.type,ct);else{var pt;if(Ke)pt=(ht-At)/Ke;else{var gt=b.distinctVals(Se),Pt=Math.pow(10,Math.floor(Math.log(gt.minDiff)/Math.LN10)),zt=Pt*b.roundUp(gt.minDiff/Pt,[.9,1.9,4.9,9.9],!0);pt=Math.max(zt,2*b.stdev(Se)/Math.pow(Se.length,st?.25:.4)),A(pt)||(pt=1)}W.autoTicks(Et,pt)}var Ut,Nt=Et.dtick,jt=W.tickIncrement(W.tickFirst(Et),Nt,"reverse",ct);if("number"==typeof Nt)Ut=(jt=function(Gt,un,hn,Qt,_n){var Fn=0,yn=0,on=0,pn=0;function ln(Rn){return(1+100*(Rn-Gt)/hn.dtick)%100<2}for(var dn=0;dn<un.length;dn++)un[dn]%1==0?on++:A(un[dn])||pn++,ln(un[dn])&&Fn++,ln(un[dn]+hn.dtick/2)&&yn++;var Cn=un.length-pn;if(on===Cn&&"date"!==hn.type)hn.dtick<1?Gt=Qt-.5*hn.dtick:(Gt-=.5)+hn.dtick<Qt&&(Gt+=hn.dtick);else if(yn<.1*Cn&&(Fn>.3*Cn||ln(Qt)||ln(_n))){var kn=hn.dtick/2;Gt+=Gt+kn<Qt?kn:-kn}return Gt}(jt,Se,Et,At,ht))+(1+Math.floor((ht-jt)/Nt))*Nt;else for("M"===Et.dtick.charAt(0)&&(jt=function(Gt,un,hn,Qt,_n){var Fn=b.findExactDates(un,_n);if(Fn.exactDays>.8){var yn=Number(hn.substr(1));Fn.exactYears>.8&&yn%12==0?Gt=W.tickIncrement(Gt,"M6","reverse")+1.5*u:Fn.exactMonths>.8?Gt=W.tickIncrement(Gt,"M1","reverse")+15.5*u:Gt-=S;var on=W.tickIncrement(Gt,hn);if(on<=Qt)return on}return Gt}(jt,Se,Nt,At,ct)),Ut=jt;Ut<=ht;)Ut=W.tickIncrement(Ut,Nt,!1,ct);return{start:Re.c2r(jt,0,ct),end:Re.c2r(Ut,0,ct),size:Nt,_dataSpan:ht-At}},W.prepMinorTicks=function(Se,Re,Ke){if(!Re.minor.dtick){delete Se.dtick;var st,ct=Re.dtick&&A(Re._tmin);if(ct){var Tt=W.tickIncrement(Re._tmin,Re.dtick,!0);st=[Re._tmin,.99*Tt+.01*Re._tmin]}else{var Et=b.simpleMap(Re.range,Re.r2l);st=[Et[0],.8*Et[0]+.2*Et[1]]}if(Se.range=b.simpleMap(st,Re.l2r),Se._isMinor=!0,W.prepTicks(Se,Ke),ct){var At=A(Re.dtick),ht=A(Se.dtick),pt=At?Re.dtick:+Re.dtick.substring(1),gt=ht?Se.dtick:+Se.dtick.substring(1);At&&ht?se(pt,gt)?pt===2*w&&gt===2*u&&(Se.dtick=w):Se.dtick=pt===2*w&&gt===3*u?w:pt!==w||(Re._input.minor||{}).nticks?fe(pt/gt,2.5)?pt/2:pt:u:"M"===String(Re.dtick).charAt(0)?ht?Se.dtick="M1":se(pt,gt)?pt>=12&&2===gt&&(Se.dtick="M3"):Se.dtick=Re.dtick:"L"===String(Se.dtick).charAt(0)?"L"===String(Re.dtick).charAt(0)?se(pt,gt)||(Se.dtick=fe(pt/gt,2.5)?Re.dtick/2:Re.dtick):Se.dtick="D1":"D2"===Se.dtick&&+Re.dtick>1&&(Se.dtick=1)}Se.range=Re.range}void 0===Re.minor._tick0Init&&(Se.tick0=Re.tick0)},W.prepTicks=function(Se,Re){var Ke=b.simpleMap(Se.range,Se.r2l,void 0,void 0,Re);if("auto"===Se.tickmode||!Se.dtick){var st,ct=Se.nticks;ct||("category"===Se.type||"multicategory"===Se.type?(st=Se.tickfont?b.bigFont(Se.tickfont.size||12):15,ct=Se._length/st):(st="y"===Se._id.charAt(0)?40:80,ct=b.constrain(Se._length/st,4,9)+1),"radialaxis"===Se._name&&(ct*=2)),Se.minor&&"array"!==Se.minor.tickmode||"array"===Se.tickmode&&(ct*=100),Se._roughDTick=Math.abs(Ke[1]-Ke[0])/ct,W.autoTicks(Se,Se._roughDTick),Se._minDtick>0&&Se.dtick<2*Se._minDtick&&(Se.dtick=Se._minDtick,Se.tick0=Se.l2r(Se._forceTick0))}"period"===Se.ticklabelmode&&function(Tt){var Et;function At(){return!(A(Tt.dtick)||"M"!==Tt.dtick.charAt(0))}var ht=At(),pt=W.getTickFormat(Tt);if(pt){var gt=Tt._dtickInit!==Tt.dtick;/%[fLQsSMX]/.test(pt)||(/%[HI]/.test(pt)?(Et=_,gt&&!ht&&Tt.dtick<_&&(Tt.dtick=_)):/%p/.test(pt)?(Et=S,gt&&!ht&&Tt.dtick<S&&(Tt.dtick=S)):/%[Aadejuwx]/.test(pt)?(Et=u,gt&&!ht&&Tt.dtick<u&&(Tt.dtick=u)):/%[UVW]/.test(pt)?(Et=w,gt&&!ht&&Tt.dtick<w&&(Tt.dtick=w)):/%[Bbm]/.test(pt)?(Et=p,gt&&(ht?Ee(Tt.dtick)<1:Tt.dtick<m)&&(Tt.dtick="M1")):/%[q]/.test(pt)?(Et=v,gt&&(ht?Ee(Tt.dtick)<3:Tt.dtick<g)&&(Tt.dtick="M3")):/%[Yy]/.test(pt)&&(Et=h,gt&&(ht?Ee(Tt.dtick)<12:Tt.dtick<f)&&(Tt.dtick="M12")))}(ht=At())&&Tt.tick0===Tt._dowTick0&&(Tt.tick0=Tt._rawTick0),Tt._definedDelta=Et}(Se),Se.tick0||(Se.tick0="date"===Se.type?"2000-01-01":0),"date"===Se.type&&Se.dtick<.1&&(Se.dtick=.1),ze(Se)},W.calcTicks=function(Se,Re){for(var Ke,st,ct=Se.type,Tt=Se.calendar,Et=Se.ticklabelstep,At="period"===Se.ticklabelmode,ht=b.simpleMap(Se.range,Se.r2l,void 0,void 0,Re),pt=ht[1]<ht[0],gt=Math.min(ht[0],ht[1]),Pt=Math.max(ht[0],ht[1]),zt=Math.max(1e3,Se._length||0),Ut=[],Nt=[],jt=[],Gt=[],un=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),hn=1;hn>=(un?0:1);hn--){var Qt=!hn;hn?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var _n=hn?Se:b.extendFlat({},Se,Se.minor);if(Qt?W.prepMinorTicks(_n,Se,Re):W.prepTicks(_n,Re),"array"!==_n.tickmode)if("sync"!==_n.tickmode){var Fn=le(ht),yn=Fn[0],on=Fn[1],pn=A(_n.dtick),ln="log"===ct&&!(pn||"L"===_n.dtick.charAt(0)),dn=W.tickFirst(_n,Re);if(hn){if(Se._tmin=dn,dn<yn!==pt)break;"category"!==ct&&"multicategory"!==ct||(on=pt?Math.max(-.5,on):Math.min(Se._categories.length-.5,on))}var Cn,kn,Rn=null,Nn=dn;hn&&(pn?kn=Se.dtick:"date"===ct?"string"==typeof Se.dtick&&"M"===Se.dtick.charAt(0)&&(kn=p*Se.dtick.substring(1)):kn=Se._roughDTick,Cn=Math.round((Se.r2l(Nn)-Se.r2l(Se.tick0))/kn)-1);var jn=_n.dtick;for(_n.rangebreaks&&_n._tick0Init!==_n.tick0&&(Nn=Ze(Nn,Se),pt||(Nn=W.tickIncrement(Nn,jn,!pt,Tt))),hn&&At&&(Nn=W.tickIncrement(Nn,jn,!pt,Tt),Cn--);pt?Nn>=on:Nn<=on;Nn=W.tickIncrement(Nn,jn,pt,Tt)){if(hn&&Cn++,_n.rangebreaks&&!pt){if(Nn<yn)continue;if(_n.maskBreaks(Nn)===P&&Ze(Nn,_n)>=Pt)break}if(jt.length>zt||Nn===Rn)break;Rn=Nn;var er={value:Nn};hn?(ln&&Nn!==(0|Nn)&&(er.simpleLabel=!0),Et>1&&Cn%Et&&(er.skipLabel=!0),jt.push(er)):(er.minor=!0,Gt.push(er))}}else jt=[],Ut=we(Se);else hn?(jt=[],Ut=ke(Se)):(Gt=[],Nt=ke(Se))}if(un&&!("inside"===Se.minor.ticks&&"outside"===Se.ticks||"outside"===Se.minor.ticks&&"inside"===Se.ticks)){for(var Kn=jt.map(function(An){return An.value}),yr=[],lr=0;lr<Gt.length;lr++){var $n=Gt[lr],Gn=$n.value;if(-1===Kn.indexOf(Gn)){for(var ir=!1,Jt=0;!ir&&Jt<jt.length;Jt++)1e7+jt[Jt].value===1e7+Gn&&(ir=!0);ir||yr.push($n)}}Gt=yr}if(At&&function(An,Rt,Zt){for(var tn=0;tn<An.length;tn++){var En=An[tn].value,Mn=tn,wn=tn+1;tn<An.length-1?(Mn=tn,wn=tn+1):tn>0?(Mn=tn-1,wn=tn):(Mn=tn,wn=tn);var an,fn=Math.abs(An[wn].value-An[Mn].value),mn=Zt||fn,Pn=0;mn>=f?Pn=fn>=f&&fn<=c?fn:h:Zt===v&&mn>=g?Pn=fn>=g&&fn<=x?fn:v:mn>=m?Pn=fn>=m&&fn<=y?fn:p:Zt===w&&mn>=w?Pn=w:mn>=u?Pn=u:Zt===S&&mn>=S?Pn=S:Zt===_&&mn>=_&&(Pn=_),Pn>=fn&&(Pn=fn,an=!0);var qn=En+Pn;if(Rt.rangebreaks&&Pn>0){for(var Zn=0,Jn=0;Jn<84;Jn++){var rr=(Jn+.5)/84;Rt.maskBreaks(En*(1-rr)+rr*qn)!==P&&Zn++}(Pn*=Zn/84)||(An[tn].drop=!0),an&&fn>w&&(Pn=fn)}(Pn>0||0===tn)&&(An[tn].periodX=En+Pn/2)}}(jt,Se,Se._definedDelta),Se.rangebreaks){var rn="y"===Se._id.charAt(0),Sn=1;"auto"===Se.tickmode&&(Sn=Se.tickfont?Se.tickfont.size:12);var Tn=NaN;for(Ke=jt.length-1;Ke>-1;Ke--)if(jt[Ke].drop)jt.splice(Ke,1);else{jt[Ke].value=Ze(jt[Ke].value,Se);var Ln=Se.c2p(jt[Ke].value);(rn?Tn>Ln-Sn:Tn<Ln+Sn)?jt.splice(pt?Ke+1:Ke,1):Tn=Ln}}Ge(Se)&&360===Math.abs(ht[1]-ht[0])&&jt.pop(),Se._tmax=(jt[jt.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var Bn,Hn,or=function(An){An.text="",Se._prevDateHead=st};for(jt=jt.concat(Gt),Ke=0;Ke<jt.length;Ke++){var Kt=jt[Ke].value;jt[Ke].minor?Nt.push({x:Kt,minor:!0}):(st=Se._prevDateHead,Bn=W.tickText(Se,Kt,!1,jt[Ke].simpleLabel),void 0!==(Hn=jt[Ke].periodX)&&(Bn.periodX=Hn,(Hn>Pt||Hn<gt)&&(Hn>Pt&&(Bn.periodX=Pt),Hn<gt&&(Bn.periodX=gt),or(Bn))),jt[Ke].skipLabel&&or(Bn),Ut.push(Bn))}return Ut=Ut.concat(Nt),Se._inCalcTicks=!1,At&&Ut.length&&(Ut[0].noTick=!0),Ut};var Te=[2,5,10],$=[1,2,3,6,12],oe=[1,2,5,10,15,30],he=[1,2,3,7,14],me=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Me=[-.301,0,.301,.699,1],Ie=[15,30,45,90,180];function Pe(Se,Re,Ke){return Re*b.roundUp(Se/Re,Ke)}function ze(Se){var Re=Se.dtick;if(Se._tickexponent=0,A(Re)||"string"==typeof Re||(Re=1),"category"!==Se.type&&"multicategory"!==Se.type||(Se._tickround=null),"date"===Se.type){var Ke=Se.r2l(Se.tick0),st=Se.l2r(Ke).replace(/(^-|i)/g,""),ct=st.length;if("M"===String(Re).charAt(0))Se._tickround=ct>10||"01-01"!==st.substr(5)?"d":+Re.substr(1)%12==0?"y":"m";else if(Re>=u&&ct<=10||Re>=15*u)Se._tickround="d";else if(Re>=E&&ct<=16||Re>=_)Se._tickround="M";else if(Re>=L&&ct<=19||Re>=E)Se._tickround="S";else{var Tt=Se.l2r(Ke+Re).replace(/^-/,"").length;Se._tickround=Math.max(ct,Tt)-20,Se._tickround<0&&(Se._tickround=4)}}else if(A(Re)||"L"===Re.charAt(0)){var Et=Se.range.map(Se.r2d||Number);A(Re)||(Re=Number(Re.substr(1))),Se._tickround=2-Math.floor(Math.log(Re)/Math.LN10+.01);var At=Math.max(Math.abs(Et[0]),Math.abs(Et[1])),ht=Math.floor(Math.log(At)/Math.LN10+.01),pt=void 0===Se.minexponent?3:Se.minexponent;Math.abs(ht)>pt&&(Se._tickexponent=_e(Se.exponentformat)&&!De(ht)?3*Math.round((ht-1)/3):ht)}else Se._tickround=null}function ce(Se,Re,Ke){var st=Se.tickfont||{};return{x:Re,dx:0,dy:0,text:Ke||"",fontSize:st.size,font:st.family,fontColor:st.color}}W.autoTicks=function(Se,Re,Ke){var st;function ct(Pt){return Math.pow(Pt,Math.floor(Math.log(Re)/Math.LN10))}if("date"===Se.type){Se.tick0=b.dateTick0(Se.calendar,0);var Tt=2*Re;if(Tt>h)Re/=h,st=ct(10),Se.dtick="M"+12*Pe(Re,st,Te);else if(Tt>p)Se.dtick="M"+Pe(Re/=p,1,$);else if(Tt>u){if(Se.dtick=Pe(Re,u,Se._hasDayOfWeekBreaks?[1,2,7,14]:he),!Ke){var Et=W.getTickFormat(Se),At="period"===Se.ticklabelmode;At&&(Se._rawTick0=Se.tick0),Se.tick0=/%[uVW]/.test(Et)?b.dateTick0(Se.calendar,2):b.dateTick0(Se.calendar,1),At&&(Se._dowTick0=Se.tick0)}}else Tt>_?Se.dtick=Pe(Re,_,$):Tt>E?Se.dtick=Pe(Re,E,oe):Tt>L?Se.dtick=Pe(Re,L,oe):(st=ct(10),Se.dtick=Pe(Re,st,Te))}else if("log"===Se.type){Se.tick0=0;var ht=b.simpleMap(Se.range,Se.r2l);if(Se._isMinor&&(Re*=1.5),Re>.7)Se.dtick=Math.ceil(Re);else if(Math.abs(ht[1]-ht[0])<1){var pt=1.5*Math.abs((ht[1]-ht[0])/Re);Re=Math.abs(Math.pow(10,ht[1])-Math.pow(10,ht[0]))/pt,st=ct(10),Se.dtick="L"+Pe(Re,st,Te)}else Se.dtick=Re>.3?"D2":"D1"}else"category"===Se.type||"multicategory"===Se.type?(Se.tick0=0,Se.dtick=Math.ceil(Math.max(Re,1))):Ge(Se)?(Se.tick0=0,Se.dtick=Pe(Re,st=1,Ie)):(Se.tick0=0,st=ct(10),Se.dtick=Pe(Re,st,Te));if(0===Se.dtick&&(Se.dtick=1),!A(Se.dtick)&&"string"!=typeof Se.dtick){var gt=Se.dtick;throw Se.dtick=1,"ax.dtick error: "+String(gt)}},W.tickIncrement=function(Se,Re,Ke,st){var ct=Ke?-1:1;if(A(Re))return b.increment(Se,ct*Re);var Tt=Re.charAt(0),Et=ct*Number(Re.substr(1));if("M"===Tt)return b.incrementMonth(Se,Et,st);if("L"===Tt)return Math.log(Math.pow(10,Se)+Et)/Math.LN10;if("D"===Tt){var At="D2"===Re?Me:me,ht=Se+.01*ct,pt=b.roundUp(b.mod(ht,1),At,Ke);return Math.floor(ht)+Math.log(k.round(Math.pow(10,pt),1))/Math.LN10}throw"unrecognized dtick "+String(Re)},W.tickFirst=function(Se,Re){var Ke=Se.r2l||Number,st=b.simpleMap(Se.range,Ke,void 0,void 0,Re),ct=st[1]<st[0],Tt=ct?Math.floor:Math.ceil,Et=le(st)[0],At=Se.dtick,ht=Ke(Se.tick0);if(A(At)){var pt=Tt((Et-ht)/At)*At+ht;return"category"!==Se.type&&"multicategory"!==Se.type||(pt=b.constrain(pt,0,Se._categories.length-1)),pt}var gt=At.charAt(0),Pt=Number(At.substr(1));if("M"===gt){for(var zt,Ut,Nt,jt=0,Gt=ht;jt<10;){if(((zt=W.tickIncrement(Gt,At,ct,Se.calendar))-Et)*(Gt-Et)<=0)return ct?Math.min(Gt,zt):Math.max(Gt,zt);Ut=(Et-(Gt+zt)/2)/(zt-Gt),Nt=gt+(Math.abs(Math.round(Ut))||1)*Pt,Gt=W.tickIncrement(Gt,Nt,Ut<0?!ct:ct,Se.calendar),jt++}return b.error("tickFirst did not converge",Se),Gt}if("L"===gt)return Math.log(Tt((Math.pow(10,Et)-ht)/Pt)*Pt+ht)/Math.LN10;if("D"===gt){var un="D2"===At?Me:me,hn=b.roundUp(b.mod(Et,1),un,ct);return Math.floor(Et)+Math.log(k.round(Math.pow(10,hn),1))/Math.LN10}throw"unrecognized dtick "+String(At)},W.tickText=function(Se,Re,Ke,st){var ct,Tt=ce(Se,Re),Et="array"===Se.tickmode,At=Ke||Et,ht=Se.type,pt="category"===ht?Se.d2l_noadd:Se.d2l;if(Et&&Array.isArray(Se.ticktext)){var gt=b.simpleMap(Se.range,Se.r2l),Pt=(Math.abs(gt[1]-gt[0])-(Se._lBreaks||0))/1e4;for(ct=0;ct<Se.ticktext.length&&!(Math.abs(Re-pt(Se.tickvals[ct]))<Pt);ct++);if(ct<Se.ticktext.length)return Tt.text=String(Se.ticktext[ct]),Tt}function zt(jt){return void 0===jt||(Ke?"none"===jt:"all"!==jt&&Re!=={first:Se._tmin,last:Se._tmax}[jt])}var Gt,un,Ut=Ke?"never":"none"!==Se.exponentformat&&zt(Se.showexponent)?"hide":"";if("date"===ht?function(jt,Gt,un,hn){var Qt=jt._tickround,_n=un&&jt.hoverformat||W.getTickFormat(jt);hn&&(Qt=A(Qt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Qt]);var Fn,yn=b.formatDate(Gt.x,_n,Qt,jt._dateFormat,jt.calendar,jt._extraFormat),on=yn.indexOf("\n");if(-1!==on&&(Fn=yn.substr(on+1),yn=yn.substr(0,on)),hn&&("00:00:00"===yn||"00:00"===yn?(yn=Fn,Fn=""):8===yn.length&&(yn=yn.replace(/:00$/,""))),Fn)if(un)"d"===Qt?yn+=", "+Fn:yn=Fn+(yn?", "+yn:"");else if(jt._inCalcTicks&&jt._prevDateHead===Fn){var pn=Be(jt),ln=jt._trueSide||jt.side;(!pn&&"top"===ln||pn&&"bottom"===ln)&&(yn+="<br> ")}else jt._prevDateHead=Fn,yn+="<br>"+Fn;Gt.text=yn}(Se,Tt,Ke,At):"log"===ht?function(jt,Gt,un,hn,Qt){var _n=jt.dtick,Fn=Gt.x,yn=jt.tickformat,on="string"==typeof _n&&_n.charAt(0);if("never"===Qt&&(Qt=""),hn&&"L"!==on&&(_n="L3",on="L"),yn||"L"===on)Gt.text=He(Math.pow(10,Fn),jt,Qt,hn);else if(A(_n)||"D"===on&&b.mod(Fn+.01,1)<.1){var pn=Math.round(Fn),ln=Math.abs(pn),dn=jt.exponentformat;"power"===dn||_e(dn)&&De(pn)?(Gt.text=0===pn?1:1===pn?"10":"10<sup>"+(pn>1?"":C)+ln+"</sup>",Gt.fontSize*=1.25):("e"===dn||"E"===dn)&&ln>2?Gt.text="1"+dn+(pn>0?"+":C)+ln:(Gt.text=He(Math.pow(10,Fn),jt,"","fakehover"),"D1"===_n&&"y"===jt._id.charAt(0)&&(Gt.dy-=Gt.fontSize/6))}else{if("D"!==on)throw"unrecognized dtick "+String(_n);Gt.text=String(Math.round(Math.pow(10,b.mod(Fn,1)))),Gt.fontSize*=.75}if("D1"===jt.dtick){var Cn=String(Gt.text).charAt(0);"0"!==Cn&&"1"!==Cn||("y"===jt._id.charAt(0)?Gt.dx-=Gt.fontSize/4:(Gt.dy+=Gt.fontSize/2,Gt.dx+=(jt.range[1]>jt.range[0]?1:-1)*Gt.fontSize*(Fn<0?.5:.25)))}}(Se,Tt,0,At,Ut):"category"===ht?(Gt=Tt,void 0===(un=Se._categories[Math.round(Gt.x)])&&(un=""),Gt.text=String(un)):"multicategory"===ht?function(jt,Gt,un){var hn=Math.round(Gt.x),Qt=jt._categories[hn]||[],_n=void 0===Qt[1]?"":String(Qt[1]),Fn=void 0===Qt[0]?"":String(Qt[0]);un?Gt.text=Fn+" - "+_n:(Gt.text=_n,Gt.text2=Fn)}(Se,Tt,Ke):Ge(Se)?function(jt,Gt,un,hn,Qt){if("radians"!==jt.thetaunit||un)Gt.text=He(Gt.x,jt,Qt,hn);else{var _n=Gt.x/180;if(0===_n)Gt.text="0";else{var Fn=function(on){function pn(kn,Rn){return Math.abs(kn-Rn)<=1e-6}var ln=function(kn){for(var Rn=1;!pn(Math.round(kn*Rn)/Rn,kn);)Rn*=10;return Rn}(on),dn=on*ln,Cn=Math.abs(function kn(Rn,Nn){return pn(Nn,0)?Rn:kn(Nn,Rn%Nn)}(dn,ln));return[Math.round(dn/Cn),Math.round(ln/Cn)]}(_n);if(Fn[1]>=100)Gt.text=He(b.deg2rad(Gt.x),jt,Qt,hn);else{var yn=Gt.x<0;Gt.text=1===Fn[1]?1===Fn[0]?"\u03c0":Fn[0]+"\u03c0":["<sup>",Fn[0],"</sup>","\u2044","<sub>",Fn[1],"</sub>","\u03c0"].join(""),yn&&(Gt.text=C+Gt.text)}}}}(Se,Tt,Ke,At,Ut):function(jt,Gt,un,hn,Qt){"never"===Qt?Qt="":"all"===jt.showexponent&&Math.abs(Gt.x/jt.dtick)<1e-6&&(Qt="hide"),Gt.text=He(Gt.x,jt,Qt,hn)}(Se,Tt,0,At,Ut),st||(Se.tickprefix&&!zt(Se.showtickprefix)&&(Tt.text=Se.tickprefix+Tt.text),Se.ticksuffix&&!zt(Se.showticksuffix)&&(Tt.text+=Se.ticksuffix)),"boundaries"===Se.tickson||Se.showdividers){var Nt=function(jt){var Gt=Se.l2p(jt);return Gt>=0&&Gt<=Se._length?jt:null};Tt.xbnd=[Nt(Tt.x-.5),Nt(Tt.x+Se.dtick-.5)]}return Tt},W.hoverLabelText=function(Se,Re,Ke){Ke&&(Se=b.extendFlat({},Se,{hoverformat:Ke}));var st=Array.isArray(Re)?Re[0]:Re,ct=Array.isArray(Re)?Re[1]:void 0;if(void 0!==ct&&ct!==st)return W.hoverLabelText(Se,st,Ke)+" - "+W.hoverLabelText(Se,ct,Ke);var Tt="log"===Se.type&&st<=0,Et=W.tickText(Se,Se.c2l(Tt?-st:st),"hover").text;return Tt?0===st?"0":C+Et:Et};var ge=["f","p","n","\u03bc","m","","k","M","G","T"];function _e(Se){return"SI"===Se||"B"===Se}function De(Se){return Se>14||Se<-15}function He(Se,Re,Ke,st){var ct=Se<0,Tt=Re._tickround,Et=Ke||Re.exponentformat||"B",At=Re._tickexponent,ht=W.getTickFormat(Re),pt=Re.separatethousands;if(st){var gt={exponentformat:Et,minexponent:Re.minexponent,dtick:"none"===Re.showexponent?Re.dtick:A(Se)&&Math.abs(Se)||1,range:"none"===Re.showexponent?Re.range.map(Re.r2d):[0,Se||1]};ze(gt),Tt=(Number(gt._tickround)||0)+4,At=gt._tickexponent,Re.hoverformat&&(ht=Re.hoverformat)}if(ht)return Re._numFormat(ht)(Se).replace(/-/g,C);var Pt,zt=Math.pow(10,-Tt)/2;if("none"===Et&&(At=0),(Se=Math.abs(Se))<zt)Se="0",ct=!1;else{if(Se+=zt,At&&(Se*=Math.pow(10,-At),Tt+=At),0===Tt)Se=String(Math.floor(Se));else if(Tt<0){Se=(Se=String(Math.round(Se))).substr(0,Se.length+Tt);for(var Ut=Tt;Ut<0;Ut++)Se+="0"}else{var Nt=(Se=String(Se)).indexOf(".")+1;Nt&&(Se=Se.substr(0,Nt+Tt).replace(/\.?0+$/,""))}Se=b.numSeparate(Se,Re._separators,pt)}return At&&"hide"!==Et&&(_e(Et)&&De(At)&&(Et="power"),Pt=At<0?C+-At:"power"!==Et?"+"+At:String(At),"e"===Et||"E"===Et?Se+=Et+Pt:"power"===Et?Se+="\xd710<sup>"+Pt+"</sup>":"B"===Et&&9===At?Se+="B":_e(Et)&&(Se+=ge[At/3+5])),ct?C+Se:Se}function Ve(Se,Re){if(Se){var Ke=Object.keys(U).reduce(function(st,ct){return-1!==Re.indexOf(ct)&&U[ct].forEach(function(Tt){st[Tt]=1}),st},{});Object.keys(Se).forEach(function(st){Ke[st]||(1===st.length?Se[st]=0:delete Se[st])})}}function nt(Se,Re){for(var Ke=[],st={},ct=0;ct<Re.length;ct++){var Tt=Re[ct];st[Tt.text2]?st[Tt.text2].push(Tt.x):st[Tt.text2]=[Tt.x]}for(var Et in st)Ke.push(ce(Se,b.interp(st[Et],.5),Et));return Ke}function tt(Se){return void 0!==Se.periodX?Se.periodX:Se.x}function at(Se){return[Se.text,Se.x,Se.axInfo,Se.font,Se.fontSize,Se.fontColor].join("_")}function dt(Se){var Re=Se.title.font.size,Ke=(Se.title.text.match(s.BR_TAG_ALL)||[]).length;return Se.title.hasOwnProperty("standoff")?Ke?Re*(J+Ke*Z):Re*J:Ke?Re*(Ke+1)*Z:Re}function wt(Se,Re){var Ke=Se.l2p(Re);return Ke>1&&Ke<Se._length-1}function bt(Se){var Re=k.select(Se),Ke=Re.select(".text-math-group");return Ke.empty()?Re.select("text"):Ke}function _t(Se){return Se._id+".automargin"}function Lt(Se){return _t(Se)+".mirror"}function Ct(Se){return Se._id+".rangeslider"}function Ot(Se,Re){for(var Ke=0;Ke<Re.length;Ke++)-1===Se.indexOf(Re[Ke])&&Se.push(Re[Ke])}function Ht(Se,Re,Ke){var st,ct,Tt=[],Et=[],At=Se.layout;for(st=0;st<Re.length;st++)Tt.push(W.getFromId(Se,Re[st]));for(st=0;st<Ke.length;st++)Et.push(W.getFromId(Se,Ke[st]));var ht=Object.keys(n),pt=["anchor","domain","overlaying","position","side","tickangle","editType"],gt=["linear","log"];for(st=0;st<ht.length;st++){var Pt=ht[st],zt=Tt[0][Pt],Ut=Et[0][Pt],Nt=!0,jt=!1,Gt=!1;if("_"!==Pt.charAt(0)&&"function"!=typeof zt&&-1===pt.indexOf(Pt)){for(ct=1;ct<Tt.length&&Nt;ct++){var un=Tt[ct][Pt];"type"===Pt&&-1!==gt.indexOf(zt)&&-1!==gt.indexOf(un)&&zt!==un?jt=!0:un!==zt&&(Nt=!1)}for(ct=1;ct<Et.length&&Nt;ct++){var hn=Et[ct][Pt];"type"===Pt&&-1!==gt.indexOf(Ut)&&-1!==gt.indexOf(hn)&&Ut!==hn?Gt=!0:Et[ct][Pt]!==Ut&&(Nt=!1)}Nt&&(jt&&(At[Tt[0]._name].type="linear"),Gt&&(At[Et[0]._name].type="linear"),It(At,Pt,Tt,Et,Se._fullLayout._dfltTitle))}}for(st=0;st<Se._fullLayout.annotations.length;st++){var Qt=Se._fullLayout.annotations[st];-1!==Re.indexOf(Qt.xref)&&-1!==Ke.indexOf(Qt.yref)&&b.swapAttrs(At.annotations[st],["?"])}}function It(Se,Re,Ke,st,ct){var Tt,Et=b.nestedProperty,At=Et(Se[Ke[0]._name],Re).get(),ht=Et(Se[st[0]._name],Re).get();for("title"===Re&&(At&&At.text===ct.x&&(At.text=ct.y),ht&&ht.text===ct.y&&(ht.text=ct.x)),Tt=0;Tt<Ke.length;Tt++)Et(Se,Ke[Tt]._name+"."+Re).set(ht);for(Tt=0;Tt<st.length;Tt++)Et(Se,st[Tt]._name+"."+Re).set(At)}function Ge(Se){return"angularaxis"===Se._id}function Ze(Se,Re){for(var Ke=Re._rangebreaks.length,st=0;st<Ke;st++){var ct=Re._rangebreaks[st];if(Se>=ct.min&&Se<ct.max)return ct.max}return Se}function Be(Se){return-1!==(Se.ticklabelposition||"").indexOf("inside")}function Ye(Se,Re){Be(Se._anchorAxis||{})&&Se._hideCounterAxisInsideTickLabels&&Se._hideCounterAxisInsideTickLabels(Re)}function rt(Se,Re,Ke,st){var ct,Tt="free"===Se.anchor||void 0!==Se.overlaying&&!1!==Se.overlaying?Se.overlaying:Se._id;ct=st?"right"===Se.side?Re:-Re:Re,Tt in Ke||(Ke[Tt]={}),Se.side in Ke[Tt]||(Ke[Tt][Se.side]=0),Ke[Tt][Se.side]+=ct}W.getTickFormat=function(Se){var Re,Ke,st,ct,Tt,Et,At,ht,zt,Ut,Nt,jt,Gt,un;function pt(zt){return"string"!=typeof zt?zt:Number(zt.replace("M",""))*p}function gt(zt,Ut){var Nt=["L","D"];if(typeof zt==typeof Ut){if("number"==typeof zt)return zt-Ut;var jt=Nt.indexOf(zt.charAt(0)),Gt=Nt.indexOf(Ut.charAt(0));return jt===Gt?Number(zt.replace(/(L|D)/g,""))-Number(Ut.replace(/(L|D)/g,"")):jt-Gt}return"number"==typeof zt?1:-1}if(Se.tickformatstops&&Se.tickformatstops.length>0)switch(Se.type){case"date":case"linear":for(Re=0;Re<Se.tickformatstops.length;Re++)if((st=Se.tickformatstops[Re]).enabled&&(ct=Se.dtick,Et=void 0,Et=pt||function(zt){return zt},ht=(Tt=st.dtickrange)[1],(!(At=Tt[0])&&"number"!=typeof At||Et(At)<=Et(ct))&&(!ht&&"number"!=typeof ht||Et(ht)>=Et(ct)))){Ke=st;break}break;case"log":for(Re=0;Re<Se.tickformatstops.length;Re++)if((st=Se.tickformatstops[Re]).enabled&&(void 0,void 0,void 0,void 0,Nt=null===(Ut=st.dtickrange)[0],jt=null===Ut[1],Gt=gt(zt=Se.dtick,Ut[0])>=0,un=gt(zt,Ut[1])<=0,(Nt||Gt)&&(jt||un))){Ke=st;break}}return Ke?Ke.value:Se.tickformat},W.getSubplots=function(Se,Re){var Ke=Se._fullLayout._subplots,st=Ke.cartesian.concat(Ke.gl2d||[]),ct=Re?W.findSubplotsWithAxis(st,Re):st;return ct.sort(function(Tt,Et){var At=Tt.substr(1).split("y"),ht=Et.substr(1).split("y");return At[0]===ht[0]?+At[1]-+ht[1]:+At[0]-+ht[0]}),ct},W.findSubplotsWithAxis=function(Se,Re){for(var Ke=new RegExp("x"===Re._id.charAt(0)?"^"+Re._id+"y":Re._id+"$"),st=[],ct=0;ct<Se.length;ct++){var Tt=Se[ct];Ke.test(Tt)&&st.push(Tt)}return st},W.makeClipPaths=function(Se){var Re=Se._fullLayout;if(!Re._hasOnlyLargeSploms){var Ke,st,ct={_offset:0,_length:Re.width,_id:""},Tt={_offset:0,_length:Re.height,_id:""},Et=W.list(Se,"x",!0),At=W.list(Se,"y",!0),ht=[];for(Ke=0;Ke<Et.length;Ke++)for(ht.push({x:Et[Ke],y:Tt}),st=0;st<At.length;st++)0===Ke&&ht.push({x:ct,y:At[st]}),ht.push({x:Et[Ke],y:At[st]});var pt=Re._clips.selectAll(".axesclip").data(ht,function(gt){return gt.x._id+gt.y._id});pt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gt){return"clip"+Re._uid+gt.x._id+gt.y._id}).append("rect"),pt.exit().remove(),pt.each(function(gt){k.select(this).select("rect").attr({x:gt.x._offset||0,y:gt.y._offset||0,width:gt.x._length||1,height:gt.y._length||1})})}},W.draw=function(Se,Re,Ke){var st=Se._fullLayout;"redraw"===Re&&st._paper.selectAll("g.subplot").each(function(At){var pt=st._plots[At[0]];if(pt){var gt=pt.xaxis,Pt=pt.yaxis;pt.xaxislayer.selectAll("."+gt._id+"tick").remove(),pt.yaxislayer.selectAll("."+Pt._id+"tick").remove(),pt.xaxislayer.selectAll("."+gt._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Pt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+gt._id+"divider").remove(),pt.yaxislayer.selectAll("."+Pt._id+"divider").remove(),pt.minorGridlayer&&pt.minorGridlayer.selectAll("path").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),st._infolayer.select(".g-"+gt._id+"title").remove(),st._infolayer.select(".g-"+Pt._id+"title").remove()}});var ct=Re&&"redraw"!==Re?Re:W.listIds(Se),Tt=W.list(Se).filter(function(At){return At.autoshift}).map(function(At){return At.overlaying});ct.map(function(At){var ht=W.getFromId(Se,At);if("sync"===ht.tickmode&&ht.overlaying){var pt=ct.findIndex(function(gt){return gt===ht.overlaying});pt>=0&&ct.unshift(ct.splice(pt,1).shift())}});var Et={false:{left:0,right:0}};return b.syncOrAsync(ct.map(function(At){return function(){if(At){var ht=W.getFromId(Se,At);Ke||(Ke={}),Ke.axShifts=Et,Ke.overlayingShiftedAx=Tt;var pt=W.drawOne(Se,ht,Ke);return ht._shiftPusher&&rt(ht,ht._fullDepth||0,Et,!0),ht._r=ht.range.slice(),ht._rl=b.simpleMap(ht._r,ht.r2l),pt}}}))},W.drawOne=function(Se,Re,Ke){var st,ct,Tt,Et=(Ke=Ke||{}).axShifts||{},At=Ke.overlayingShiftedAx||[];Re.setScale();var wn,ht=Se._fullLayout,pt=Re._id,gt=pt.charAt(0),Pt=W.counterLetter(pt),zt=ht._plots[Re._mainSubplot];if(zt){if(Re._shiftPusher=Re.autoshift||-1!==At.indexOf(Re._id)||-1!==At.indexOf(Re.overlaying),Re._shiftPusher&"free"===Re.anchor){var Ut=Re.linewidth/2||0;"inside"===Re.ticks&&(Ut+=Re.ticklen),rt(Re,Ut,Et,!0),rt(Re,Re.shift||0,Et,!1)}!0===Ke.skipTitle&&void 0!==Re._shift||(Re._shift=(wn=Re).autoshift?Et[wn.overlaying][wn.side]:wn.shift||0);var Nt=zt[gt+"axislayer"],jt=Re._mainLinePosition,Gt=jt+=Re._shift,un=Re._mainMirrorPosition,hn=Re._vals=W.calcTicks(Re),Qt=[Re.mirror,Gt,un].join("_");for(st=0;st<hn.length;st++)hn[st].axInfo=Qt;Re._selections={},Re._tickAngles&&(Re._prevTickAngles=Re._tickAngles),Re._tickAngles={},Re._depth=null;var _n={};if(Re.visible){var Fn,yn,on=W.makeTransTickFn(Re),pn=W.makeTransTickLabelFn(Re),ln="inside"===Re.ticks,dn="outside"===Re.ticks;if("boundaries"===Re.tickson){var Cn=function(wn,an){var vn,sn=[],fn=function(mn,Pn){var qn=mn.xbnd[Pn];null!==qn&&sn.push(b.extendFlat({},mn,{x:qn}))};if(an.length){for(vn=0;vn<an.length;vn++)fn(an[vn],0);fn(an[vn-1],1)}return sn}(0,hn);yn=W.clipEnds(Re,Cn),Fn=ln?yn:Cn}else yn=W.clipEnds(Re,hn),Fn=ln&&"period"!==Re.ticklabelmode?yn:hn;var kn,Rn=Re._gridVals=yn,Nn=function(wn,an){var vn,sn,fn=[],mn=an.length&&an[an.length-1].x<an[0].x,Pn=function(Zn,Jn){var rr=Zn.xbnd[Jn];null!==rr&&fn.push(b.extendFlat({},Zn,{x:rr}))};if(wn.showdividers&&an.length){for(vn=0;vn<an.length;vn++){var qn=an[vn];qn.text2!==sn&&Pn(qn,mn?1:0),sn=qn.text2}Pn(an[vn-1],mn?0:1)}return fn}(Re,hn);if(!ht._hasOnlyLargeSploms){var jn=Re._subplotsWith,er={};for(st=0;st<jn.length;st++){var Kn=(Tt=ht._plots[ct=jn[st]])[Pt+"axis"],yr=Kn._mainAxis._id;if(!er[yr]){er[yr]=1;var lr="x"===gt?"M0,"+Kn._offset+"v"+Kn._length:"M"+Kn._offset+",0h"+Kn._length;W.drawGrid(Se,Re,{vals:Rn,counterAxis:Kn,layer:Tt.gridlayer.select("."+pt),minorLayer:Tt.minorGridlayer.select("."+pt),path:lr,transFn:on}),W.drawZeroLine(Se,Re,{counterAxis:Kn,layer:Tt.zerolinelayer,path:lr,transFn:on})}}}var $n=W.getTickSigns(Re),Gn=W.getTickSigns(Re,"minor");if(Re.ticks||Re.minor&&Re.minor.ticks){var ir,Jt,rn,Sn,Tn=W.makeTickPath(Re,Gt,$n[2]),Ln=W.makeTickPath(Re,Gt,Gn[2],{minor:!0});if(Re._anchorAxis&&Re.mirror&&!0!==Re.mirror?(ir=W.makeTickPath(Re,un,$n[3]),Jt=W.makeTickPath(Re,un,Gn[3],{minor:!0}),rn=Tn+ir,Sn=Ln+Jt):(ir="",Jt="",rn=Tn,Sn=Ln),Re.showdividers&&dn&&"boundaries"===Re.tickson){var Bn={};for(st=0;st<Nn.length;st++)Bn[Nn[st].x]=1;kn=function(wn){return Bn[wn.x]?ir:rn}}else kn=function(wn){return wn.minor?Sn:rn}}if(W.drawTicks(Se,Re,{vals:Fn,layer:Nt,path:kn,transFn:on}),"allticks"===Re.mirror){var Hn=Object.keys(Re._linepositions||{});for(st=0;st<Hn.length;st++){Tt=ht._plots[ct=Hn[st]];var or=Re._linepositions[ct]||[],Kt=or[1],An=or[2],Rt=W.makeTickPath(Re,or[0],An?$n[0]:Gn[0],{minor:An})+W.makeTickPath(Re,Kt,An?$n[1]:Gn[1],{minor:An});W.drawTicks(Se,Re,{vals:Fn,layer:Tt[gt+"axislayer"],path:Rt,transFn:on})}}var Zt=[];if(Zt.push(function(){return W.drawLabels(Se,Re,{vals:hn,layer:Nt,plotinfo:Tt,transFn:pn,labelFns:W.makeLabelFns(Re,Gt)})}),"multicategory"===Re.type){var tn={x:2,y:10}[gt];Zt.push(function(){var wn={x:"height",y:"width"}[gt],an=Mn()[wn]+tn+(Re._tickAngles[pt+"tick"]?Re.tickfont.size*Z:0);return W.drawLabels(Se,Re,{vals:nt(Re,hn),layer:Nt,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:on,labelFns:W.makeLabelFns(Re,Gt+an*$n[4])})}),Zt.push(function(){return Re._depth=$n[4]*(Mn("tick2")[Re.side]-Gt),function(wn,an,vn){var sn=an._id+"divider",fn=vn.vals,mn=vn.layer.selectAll("path."+sn).data(fn,at);mn.exit().remove(),mn.enter().insert("path",":first-child").classed(sn,1).classed("crisp",1).call(o.stroke,an.dividercolor).style("stroke-width",r.crispRound(wn,an.dividerwidth,1)+"px"),mn.attr("transform",vn.transFn).attr("d",vn.path)}(Se,Re,{vals:Nn,layer:Nt,path:W.makeTickPath(Re,Gt,$n[4],{len:Re._depth}),transFn:on})})}else Re.title.hasOwnProperty("standoff")&&Zt.push(function(){Re._depth=$n[4]*(Mn()[Re.side]-Gt)});var En=T.getComponentMethod("rangeslider","isVisible")(Re);return Ke.skipTitle||En&&"bottom"===Re.side||Zt.push(function(){return function(wn,an){var vn,sn=wn._fullLayout,fn=an._id,mn=fn.charAt(0),Pn=an.title.font.size;if(an.title.hasOwnProperty("standoff"))vn=an._depth+an.title.standoff+dt(an);else{var qn=Be(an);if("multicategory"===an.type)vn=an._depth;else{var Zn=1.5*Pn;qn&&(Zn=.5*Pn,"outside"===an.ticks&&(Zn+=an.ticklen)),vn=10+Zn+(an.linewidth?an.linewidth-1:0)}qn||(vn+="x"===mn?"top"===an.side?Pn*(an.showticklabels?1:0):Pn*(an.showticklabels?1.5:.5):"right"===an.side?Pn*(an.showticklabels?1:.5):Pn*(an.showticklabels?.5:0))}var Jn,rr,tr,sr,ar=W.getPxPosition(wn,an);if("x"===mn?(rr=an._offset+an._length/2,tr="top"===an.side?ar-vn:ar+vn):(tr=an._offset+an._length/2,rr="right"===an.side?ar+vn:ar-vn,Jn={rotate:"-90",offset:0}),"multicategory"!==an.type){var cr=an._selections[an._id+"tick"];if(sr={selection:cr,side:an.side},cr&&cr.node()&&cr.node().parentNode){var br=r.getTranslate(cr.node().parentNode);sr.offsetLeft=br.x,sr.offsetTop=br.y}an.title.hasOwnProperty("standoff")&&(sr.pad=0)}return an._titleStandoff=vn,t.draw(wn,fn+"title",{propContainer:an,propName:an._name+".title.text",placeholder:sn._dfltTitle[mn],avoid:sr,transform:Jn,attributes:{x:rr,y:tr,"text-anchor":"middle"}})}(Se,Re)}),Zt.push(function(){var wn,an,vn,sn,fn=Re.side.charAt(0),mn=V[Re.side].charAt(0),Pn=W.getPxPosition(Se,Re),qn=dn?Re.ticklen:0;(Re.automargin||En||Re._shiftPusher)&&("multicategory"===Re.type?wn=Mn("tick2"):(wn=Mn(),"x"===gt&&"b"===fn&&(Re._depth=Math.max(wn.width>0?wn.bottom-Pn:0,qn))));var Zn=0,Jn=0;if(Re._shiftPusher&&(Zn=Math.max(qn,wn.height>0?"l"===fn?Pn-wn.left:wn.right-Pn:0),Re.title.text!==ht._dfltTitle[gt]&&(Jn=(Re._titleStandoff||0)+(Re._titleScoot||0),"l"===fn&&(Jn+=dt(Re))),Re._fullDepth=Math.max(Zn,Jn)),Re.automargin){an={x:0,y:0,r:0,l:0,t:0,b:0};var rr=[0,1],tr="number"==typeof Re._shift?Re._shift:0;if("x"===gt){if("b"===fn?an[fn]=Re._depth:(an[fn]=Re._depth=Math.max(wn.width>0?Pn-wn.top:0,qn),rr.reverse()),wn.width>0){var sr=wn.right-(Re._offset+Re._length);sr>0&&(an.xr=1,an.r=sr);var ar=Re._offset-wn.left;ar>0&&(an.xl=0,an.l=ar)}}else if("l"===fn?(Re._depth=Math.max(wn.height>0?Pn-wn.left:0,qn),an[fn]=Re._depth-tr):(Re._depth=Math.max(wn.height>0?wn.right-Pn:0,qn),an[fn]=Re._depth+tr,rr.reverse()),wn.height>0){var cr=wn.bottom-(Re._offset+Re._length);cr>0&&(an.yb=0,an.b=cr);var br=Re._offset-wn.top;br>0&&(an.yt=1,an.t=br)}an[Pt]="free"===Re.anchor?Re.position:Re._anchorAxis.domain[rr[0]],Re.title.text!==ht._dfltTitle[gt]&&(an[fn]+=dt(Re)+(Re.title.standoff||0)),Re.mirror&&"free"!==Re.anchor&&((vn={x:0,y:0,r:0,l:0,t:0,b:0})[mn]=Re.linewidth,Re.mirror&&!0!==Re.mirror&&(vn[mn]+=qn),!0===Re.mirror||"ticks"===Re.mirror?vn[Pt]=Re._anchorAxis.domain[rr[1]]:"all"!==Re.mirror&&"allticks"!==Re.mirror||(vn[Pt]=[Re._counterDomainMin,Re._counterDomainMax][rr[1]]))}En&&(sn=T.getComponentMethod("rangeslider","autoMarginOpts")(Se,Re)),"string"==typeof Re.automargin&&(Ve(an,Re.automargin),Ve(vn,Re.automargin)),l.autoMargin(Se,_t(Re),an),l.autoMargin(Se,Lt(Re),vn),l.autoMargin(Se,Ct(Re),sn)}),b.syncOrAsync(Zt)}}function Mn(wn){var vn,sn,fn,mn,Pn,qn,an=pt+(wn||"tick");return _n[an]||(_n[an]=((vn=Re)._selections[sn=an].size()?(fn=1/0,mn=-1/0,Pn=1/0,qn=-1/0,vn._selections[sn].each(function(){var Zn=bt(this),Jn=r.bBox(Zn.node().parentNode);fn=Math.min(fn,Jn.top),mn=Math.max(mn,Jn.bottom),Pn=Math.min(Pn,Jn.left),qn=Math.max(qn,Jn.right)})):(fn=0,mn=0,Pn=0,qn=0),{top:fn,bottom:mn,left:Pn,right:qn,height:mn-fn,width:qn-Pn})),_n[an]}},W.getTickSigns=function(Se,Re){var Ke=Se._id.charAt(0),ct=Se.side==={x:"top",y:"right"}[Ke]?1:-1,Tt=[-1,1,ct,-ct];return"inside"!==(Re?(Se.minor||{}).ticks:Se.ticks)==("x"===Ke)&&(Tt=Tt.map(function(Et){return-Et})),Se.side&&Tt.push({l:-1,t:-1,r:1,b:1}[Se.side.charAt(0)]),Tt},W.makeTransTickFn=function(Se){return"x"===Se._id.charAt(0)?function(Re){return d(Se._offset+Se.l2p(Re.x),0)}:function(Re){return d(0,Se._offset+Se.l2p(Re.x))}},W.makeTransTickLabelFn=function(Se){var Re=function(ct){var Tt=ct.ticklabelposition||"",Et=function(un){return-1!==Tt.indexOf(un)},At=Et("top"),ht=Et("left"),pt=Et("right"),gt=Et("bottom"),Pt=Et("inside"),zt=gt||ht||At||pt;if(!zt&&!Pt)return[0,0];var Ut=ct.side,Nt=zt?(ct.tickwidth||0)/2:0,jt=3,Gt=ct.tickfont?ct.tickfont.size:12;return(gt||At)&&(Nt+=Gt*J,jt+=(ct.linewidth||0)/2),(ht||pt)&&(Nt+=(ct.linewidth||0)/2,jt+=3),Pt&&"top"===Ut&&(jt-=Gt*(1-J)),(ht||At)&&(Nt=-Nt),"bottom"!==Ut&&"right"!==Ut||(jt=-jt),[zt?Nt:0,Pt?jt:0]}(Se),Ke=Re[0],st=Re[1];return"x"===Se._id.charAt(0)?function(ct){return d(Ke+Se._offset+Se.l2p(tt(ct)),st)}:function(ct){return d(st,Ke+Se._offset+Se.l2p(tt(ct)))}},W.makeTickPath=function(Se,Re,Ke,st){st||(st={});var ct=st.minor;if(ct&&!Se.minor)return"";var Tt=void 0!==st.len?st.len:ct?Se.minor.ticklen:Se.ticklen,Et=Se._id.charAt(0),At=(Se.linewidth||1)/2;return"x"===Et?"M0,"+(Re+At*Ke)+"v"+Tt*Ke:"M"+(Re+At*Ke)+",0h"+Tt*Ke},W.makeLabelFns=function(Se,Re,Ke){var st=Se.ticklabelposition||"",ct=function(Cn){return-1!==st.indexOf(Cn)},Tt=ct("top"),Et=ct("left"),At=ct("right"),ht=ct("bottom")||Et||Tt||At,pt=ct("inside"),gt="inside"===st&&"inside"===Se.ticks||!pt&&"outside"===Se.ticks&&"boundaries"!==Se.tickson,Pt=0,zt=0,Ut=gt?Se.ticklen:0;if(pt?Ut*=-1:ht&&(Ut=0),gt&&(Pt+=Ut,Ke)){var Nt=b.deg2rad(Ke);Pt=Ut*Math.cos(Nt)+1,zt=Ut*Math.sin(Nt)}Se.showticklabels&&(gt||Se.showline)&&(Pt+=.2*Se.tickfont.size);var jt,Gt,un,hn,Qt,_n={labelStandoff:Pt+=(Se.linewidth||1)/2*(pt?-1:1),labelShift:zt},Fn=0,yn=Se.side,on=Se._id.charAt(0),pn=Se.tickangle;if("x"===on)hn=(Qt=!pt&&"bottom"===yn||pt&&"top"===yn)?1:-1,pt&&(hn*=-1),jt=zt*hn,Gt=Re+Pt*hn,un=Qt?1:-.2,90===Math.abs(pn)&&(pt?un+=N:un=-90===pn&&"bottom"===yn?J:90===pn&&"top"===yn?N:.5,Fn=N/2*(pn/90)),_n.xFn=function(Cn){return Cn.dx+jt+Fn*Cn.fontSize},_n.yFn=function(Cn){return Cn.dy+Gt+Cn.fontSize*un},_n.anchorFn=function(Cn,kn){if(ht){if(Et)return"end";if(At)return"start"}return A(kn)&&0!==kn&&180!==kn?kn*hn<0!==pt?"end":"start":"middle"},_n.heightFn=function(Cn,kn,Rn){return kn<-60||kn>60?-.5*Rn:"top"===Se.side!==pt?-Rn:0};else if("y"===on){if(hn=(Qt=!pt&&"left"===yn||pt&&"right"===yn)?1:-1,pt&&(hn*=-1),jt=Pt,Gt=zt*hn,un=0,pt||90!==Math.abs(pn)||(un=-90===pn&&"left"===yn||90===pn&&"right"===yn?J:.5),pt){var ln=A(pn)?+pn:0;if(0!==ln){var dn=b.deg2rad(ln);Fn=Math.abs(Math.sin(dn))*J*hn,un=0}}_n.xFn=function(Cn){return Cn.dx+Re-(jt+Cn.fontSize*un)*hn+Fn*Cn.fontSize},_n.yFn=function(Cn){return Cn.dy+Gt+Cn.fontSize*N},_n.anchorFn=function(Cn,kn){return A(kn)&&90===Math.abs(kn)?"middle":Qt?"end":"start"},_n.heightFn=function(Cn,kn,Rn){return"right"===Se.side&&(kn*=-1),kn<-30?-Rn:kn<30?-.5*Rn:0}}return _n},W.drawTicks=function(Se,Re,Ke){Ke=Ke||{};var st=Re._id+"tick",ct=[].concat(Re.minor&&Re.minor.ticks?Ke.vals.filter(function(Et){return Et.minor&&!Et.noTick}):[]).concat(Re.ticks?Ke.vals.filter(function(Et){return!Et.minor&&!Et.noTick}):[]),Tt=Ke.layer.selectAll("path."+st).data(ct,at);Tt.exit().remove(),Tt.enter().append("path").classed(st,1).classed("ticks",1).classed("crisp",!1!==Ke.crisp).each(function(Et){return o.stroke(k.select(this),Et.minor?Re.minor.tickcolor:Re.tickcolor)}).style("stroke-width",function(Et){return r.crispRound(Se,Et.minor?Re.minor.tickwidth:Re.tickwidth,1)+"px"}).attr("d",Ke.path).style("display",null),Ye(Re,[H]),Tt.attr("transform",Ke.transFn)},W.drawGrid=function(Se,Re,Ke){if(Ke=Ke||{},"sync"!==Re.tickmode){var st=Re._id+"grid",ct=Re.minor&&Re.minor.showgrid,Tt=ct?Ke.vals.filter(function(un){return un.minor}):[],Et=Re.showgrid?Ke.vals.filter(function(un){return!un.minor}):[],At=Ke.counterAxis;if(At&&W.shouldShowZeroLine(Se,Re,At))for(var ht="array"===Re.tickmode,pt=0;pt<Et.length;pt++){var gt=Et[pt].x;if(ht?!gt:Math.abs(gt)<Re.dtick/100){if(Et=Et.slice(0,pt).concat(Et.slice(pt+1)),!ht)break;pt--}}Re._gw=r.crispRound(Se,Re.gridwidth,1);for(var Pt=ct?r.crispRound(Se,Re.minor.gridwidth,1):0,zt=Ke.layer,Ut=Ke.minorLayer,Nt=1;Nt>=0;Nt--){var jt=Nt?zt:Ut;if(jt){var Gt=jt.selectAll("path."+st).data(Nt?Et:Tt,at);Gt.exit().remove(),Gt.enter().append("path").classed(st,1).classed("crisp",!1!==Ke.crisp),Gt.attr("transform",Ke.transFn).attr("d",Ke.path).each(function(un){return o.stroke(k.select(this),un.minor?Re.minor.gridcolor:Re.gridcolor||"#ddd")}).style("stroke-dasharray",function(un){return r.dashStyle(un.minor?Re.minor.griddash:Re.griddash,un.minor?Re.minor.gridwidth:Re.gridwidth)}).style("stroke-width",function(un){return(un.minor?Pt:Re._gw)+"px"}).style("display",null),"function"==typeof Ke.path&&Gt.attr("d",Ke.path)}}Ye(Re,[j,R])}},W.drawZeroLine=function(Se,Re,Ke){var st=Re._id+"zl",ct=W.shouldShowZeroLine(Se,Re,(Ke=Ke||Ke).counterAxis),Tt=Ke.layer.selectAll("path."+st).data(ct?[{x:0,id:Re._id}]:[]);Tt.exit().remove(),Tt.enter().append("path").classed(st,1).classed("zl",1).classed("crisp",!1!==Ke.crisp).each(function(){Ke.layer.selectAll("path").sort(function(Et,At){return ne(Et.id,At.id)})}),Tt.attr("transform",Ke.transFn).attr("d",Ke.path).call(o.stroke,Re.zerolinecolor||o.defaultLine).style("stroke-width",r.crispRound(Se,Re.zerolinewidth,Re._gw||1)+"px").style("display",null),Ye(Re,[I])},W.drawLabels=function(Se,Re,Ke){Ke=Ke||{};var st=Se._fullLayout,ct=Re._id,Tt=ct.charAt(0),Et=Ke.cls||ct+"tick",At=Ke.vals.filter(function(hn){return hn.text}),ht=Ke.labelFns,pt=Ke.secondary?0:Re.tickangle,gt=(Re._prevTickAngles||{})[Et],Pt=Ke.layer.selectAll("g."+Et).data(Re.showticklabels?At:[],at),zt=[];function Ut(hn,Qt){hn.each(function(_n){var Fn=k.select(this),yn=Fn.select(".text-math-group"),on=ht.anchorFn(_n,Qt),pn=Ke.transFn.call(Fn.node(),_n)+(A(Qt)&&0!=+Qt?" rotate("+Qt+","+ht.xFn(_n)+","+(ht.yFn(_n)-_n.fontSize/2)+")":""),ln=s.lineCount(Fn),dn=Z*_n.fontSize,Cn=ht.heightFn(_n,A(Qt)?+Qt:0,(ln-1)*dn);if(Cn&&(pn+=d(0,Cn)),yn.empty()){var kn=Fn.select("text");kn.attr({transform:pn,"text-anchor":on}),kn.style("opacity",1),Re._adjustTickLabelsOverflow&&Re._adjustTickLabelsOverflow()}else{var Rn=r.bBox(yn.node()).width*{end:-.5,start:.5}[on];yn.attr("transform",pn+d(Rn,0))}})}Pt.enter().append("g").classed(Et,1).append("text").attr("text-anchor","middle").each(function(hn){var Qt=k.select(this),_n=Se._promises.length;Qt.call(s.positionText,ht.xFn(hn),ht.yFn(hn)).call(r.font,hn.font,hn.fontSize,hn.fontColor).text(hn.text).call(s.convertToTspans,Se),Se._promises[_n]?zt.push(Se._promises.pop().then(function(){Ut(Qt,pt)})):Ut(Qt,pt)}),Ye(Re,[F]),Pt.exit().remove(),Ke.repositionOnUpdate&&Pt.each(function(hn){k.select(this).select("text").call(s.positionText,ht.xFn(hn),ht.yFn(hn))}),Re._adjustTickLabelsOverflow=function(){var hn=Re.ticklabeloverflow;if(hn&&"allow"!==hn){var Qt=-1!==hn.indexOf("hide"),_n="x"===Re._id.charAt(0),Fn=0,yn=_n?Se._fullLayout.width:Se._fullLayout.height;if(-1!==hn.indexOf("domain")){var on=b.simpleMap(Re.range,Re.r2l);Fn=Re.l2p(on[0])+Re._offset,yn=Re.l2p(on[1])+Re._offset}var pn=Math.min(Fn,yn),ln=Math.max(Fn,yn),dn=Re.side,Cn=1/0,kn=-1/0;for(var Rn in Pt.each(function(er){var Kn=k.select(this);if(Kn.select(".text-math-group").empty()){var yr=r.bBox(Kn.node()),lr=0;_n?(yr.right>ln||yr.left<pn)&&(lr=1):(yr.bottom>ln||yr.top+(Re.tickangle?0:er.fontSize/4)<pn)&&(lr=1);var $n=Kn.select("text");lr?Qt&&$n.style("opacity",0):($n.style("opacity",1),Cn="bottom"===dn||"right"===dn?Math.min(Cn,_n?yr.top:yr.left):-1/0,kn="top"===dn||"left"===dn?Math.max(kn,_n?yr.bottom:yr.right):1/0)}}),st._plots){var Nn=st._plots[Rn];if(Re._id===Nn.xaxis._id||Re._id===Nn.yaxis._id){var jn=_n?Nn.yaxis:Nn.xaxis;jn&&(jn["_visibleLabelMin_"+Re._id]=Cn,jn["_visibleLabelMax_"+Re._id]=kn)}}}},Re._hideCounterAxisInsideTickLabels=function(hn){var Qt="x"===Re._id.charAt(0),_n=[];for(var Fn in st._plots){var yn=st._plots[Fn];Re._id!==yn.xaxis._id&&Re._id!==yn.yaxis._id||_n.push(Qt?yn.yaxis:yn.xaxis)}_n.forEach(function(on,pn){on&&Be(on)&&(hn||[I,R,j,H,F]).forEach(function(ln){var dn="tick"===ln.K&&"text"===ln.L&&"period"===Re.ticklabelmode,Cn=st._plots[Re._mainSubplot];(ln.K===I.K?Cn.zerolinelayer.selectAll("."+Re._id+"zl"):ln.K===R.K?Cn.minorGridlayer.selectAll("."+Re._id):ln.K===j.K?Cn.gridlayer.selectAll("."+Re._id):Cn[Re._id.charAt(0)+"axislayer"]).each(function(){var kn=k.select(this);ln.L&&(kn=kn.selectAll(ln.L)),kn.each(function(Rn){var Nn=Re.l2p(dn?tt(Rn):Rn.x)+Re._offset,jn=k.select(this);Nn<Re["_visibleLabelMax_"+on._id]&&Nn>Re["_visibleLabelMin_"+on._id]?jn.style("display","none"):"tick"!==ln.K||pn||jn.style("display",null)})})})})},Ut(Pt,gt+1?gt:pt);var Nt=null;Re._selections&&(Re._selections[Et]=Pt);var jt=[function(){return zt.length&&Promise.all(zt)}];Re.automargin&&st._redrawFromAutoMarginCount&&90===gt?(Nt=90,jt.push(function(){Ut(Pt,gt)})):jt.push(function(){if(Ut(Pt,pt),At.length&&"x"===Tt&&!A(pt)&&("log"!==Re.type||"D"!==String(Re.dtick).charAt(0))){Nt=0;var hn,Qt=0,_n=[];if(Pt.each(function(Kn){Qt=Math.max(Qt,Kn.fontSize);var yr=Re.l2p(Kn.x),lr=bt(this),$n=r.bBox(lr.node());_n.push({top:0,bottom:10,height:10,left:yr-$n.width/2,right:yr+$n.width/2+2,width:$n.width+2})}),"boundaries"!==Re.tickson&&!Re.showdividers||Ke.secondary){var Fn=At.length,yn=Math.abs((At[Fn-1].x-At[0].x)*Re._m)/(Fn-1),on=Re.ticklabelposition||"",pn=function(Kn){return-1!==on.indexOf(Kn)},ln=pn("top"),dn=pn("left"),Cn=pn("right"),kn=pn("bottom")||dn||ln||Cn?(Re.tickwidth||0)+6:0,Rn=yn<2.5*Qt||"multicategory"===Re.type||"realaxis"===Re._name;for(hn=0;hn<_n.length-1;hn++)if(b.bBoxIntersect(_n[hn],_n[hn+1],kn)){Nt=Rn?90:30;break}}else{var Nn=2;for(Re.ticks&&(Nn+=Re.tickwidth/2),hn=0;hn<_n.length;hn++){var jn=At[hn].xbnd,er=_n[hn];if(null!==jn[0]&&er.left-Re.l2p(jn[0])<Nn||null!==jn[1]&&Re.l2p(jn[1])-er.right<Nn){Nt=90;break}}}Nt&&Ut(Pt,Nt)}}),Re._tickAngles&&jt.push(function(){Re._tickAngles[Et]=null===Nt?A(pt)?pt:0:Nt});var Gt=Re._anchorAxis;Gt&&Gt.autorange&&Be(Re)&&!re(st,Re._id)&&(st._insideTickLabelsAutorange||(st._insideTickLabelsAutorange={}),st._insideTickLabelsAutorange[Gt._name+".autorange"]=Gt.autorange,jt.push(function(){Pt.each(function(hn,Qt){var _n=bt(this);_n.select(".text-math-group").empty()&&(Re._vals[Qt].bb=r.bBox(_n.node()))})}));var un=b.syncOrAsync(jt);return un&&un.then&&Se._promises.push(un),un},W.getPxPosition=function(Se,Re){var Ke,st=Se._fullLayout._size,ct=Re._id.charAt(0),Tt=Re.side;return"free"!==Re.anchor?Ke=Re._anchorAxis:"x"===ct?Ke={_offset:st.t+(1-(Re.position||0))*st.h,_length:0}:"y"===ct&&(Ke={_offset:st.l+(Re.position||0)*st.w+Re._shift,_length:0}),"top"===Tt||"left"===Tt?Ke._offset:"bottom"===Tt||"right"===Tt?Ke._offset+Ke._length:void 0},W.shouldShowZeroLine=function(Se,Re,Ke){var st=b.simpleMap(Re.range,Re.r2l);return st[0]*st[1]<=0&&Re.zeroline&&("linear"===Re.type||"-"===Re.type)&&!(Re.rangebreaks&&Re.maskBreaks(0)===P)&&(wt(Re,0)||!function(ct,Tt,Et,At){var ht=Et._mainAxis;if(ht){var pt=ct._fullLayout,gt=Tt._id.charAt(0),Pt=W.counterLetter(Tt._id),zt=Tt._offset+(Math.abs(At[0])<Math.abs(At[1])==("x"===gt)?0:Tt._length),Ut=pt._plots[Et._mainSubplot];if(!(Ut.mainplotinfo||Ut).overlays.length)return un(Et);for(var Nt=W.list(ct,Pt),jt=0;jt<Nt.length;jt++){var Gt=Nt[jt];if(Gt._mainAxis===ht&&un(Gt))return!0}}function un(hn){if(!hn.showline||!hn.linewidth)return!1;var Qt=Math.max((hn.linewidth+Tt.zerolinewidth)/2,1);function _n(on){return"number"==typeof on&&Math.abs(on-zt)<Qt}if(_n(hn._mainLinePosition)||_n(hn._mainMirrorPosition))return!0;var Fn=hn._linepositions||{};for(var yn in Fn)if(_n(Fn[yn][0])||_n(Fn[yn][1]))return!0}}(Se,Re,Ke,st)||function(ct,Tt){for(var Et=ct._fullData,At=Tt._mainSubplot,ht=Tt._id.charAt(0),pt=0;pt<Et.length;pt++){var gt=Et[pt];if(!0===gt.visible&&gt.xaxis+gt.yaxis===At&&(T.traceIs(gt,"bar-like")&&gt.orientation==={x:"h",y:"v"}[ht]||gt.fill&&gt.fill.charAt(gt.fill.length-1)===ht))return!0}return!1}(Se,Re))},W.clipEnds=function(Se,Re){return Re.filter(function(Ke){return wt(Se,Ke.x)})},W.allowAutoMargin=function(Se){for(var Re=W.list(Se,"",!0),Ke=0;Ke<Re.length;Ke++){var st=Re[Ke];st.automargin&&(l.allowAutoMargin(Se,_t(st)),st.mirror&&l.allowAutoMargin(Se,Lt(st))),T.getComponentMethod("rangeslider","isVisible")(st)&&l.allowAutoMargin(Se,Ct(st))}},W.swap=function(Se,Re){for(var Ke=function(ct,Tt){var Et,At,ht=[];for(Et=0;Et<Tt.length;Et++){var pt=[],gt=ct._fullData[Tt[Et]].xaxis,Pt=ct._fullData[Tt[Et]].yaxis;if(gt&&Pt){for(At=0;At<ht.length;At++)-1===ht[At].x.indexOf(gt)&&-1===ht[At].y.indexOf(Pt)||pt.push(At);if(pt.length){var zt,Ut=ht[pt[0]];if(pt.length>1)for(At=1;At<pt.length;At++)Ot(Ut.x,(zt=ht[pt[At]]).x),Ot(Ut.y,zt.y);Ot(Ut.x,[gt]),Ot(Ut.y,[Pt])}else ht.push({x:[gt],y:[Pt]})}}return ht}(Se,Re),st=0;st<Ke.length;st++)Ht(Se,Ke[st].x,Ke[st].y)}},4322:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(50606).BADNUM,T=A.isArrayOrTypedArray,b=A.isDateTime,d=A.cleanNumber,s=Math.round;function t(r,n){return n?k(r):"number"==typeof r}function o(r){return Math.max(1,(r-1)/1e3)}Q.exports=function(r,n,a){var g,i=r,c=a.noMultiCategory;if(T(i)&&!i.length)return"-";if(!c&&T((g=i)[0])&&T(g[1]))return"multicategory";if(c&&Array.isArray(i[0])){for(var h=[],f=0;f<i.length;f++)if(T(i[f]))for(var x=0;x<i[f].length;x++)h.push(i[f][x]);i=h}if(function(g,y){for(var p=g.length,m=o(p),w=0,u=0,S={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);S[L]||(S[L]=1,b(E,y)&&w++,k(E)&&u++)}return w>2*u}(i,n))return"date";var v="strict"!==a.autotypenumbers;return function(g,y){for(var p=g.length,m=o(p),w=0,u=0,S={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);if(!S[L]){S[L]=1;var C=typeof E;"boolean"===C?u++:(y?d(E)!==l:"number"===C)?w++:"string"===C&&u++}}return u>2*w}(i,v)?"category":function(g,y){for(var p=g.length,m=0;m<p;m++)if(t(g[m],y))return!0;return!1}(i,v)?"linear":"-"}},71453:function(Q,z,e){"use strict";var k=e(92770),A=e(73972),l=e(71828),T=e(44467),b=e(85501),d=e(13838),s=e(26218),t=e(38701),o=e(96115),r=e(89426),n=e(15258),a=e(92128),i=e(21994),c=e(85555).WEEKDAY_PATTERN,h=e(85555).HOUR_PATTERN;function f(g,y,p){function m(P,I){return l.coerce(g,y,d.rangebreaks,P,I)}if(m("enabled")){var w=m("bounds");if(w&&w.length>=2){var u,S,_="";if(2===w.length)for(u=0;u<2;u++)if(S=v(w[u])){_=c;break}var E=m("pattern",_);if(E===c)for(u=0;u<2;u++)(S=v(w[u]))&&(y.bounds[u]=w[u]=S-1);if(E)for(u=0;u<2;u++)switch(S=w[u],E){case c:if(!k(S)||(S=+S)!==Math.floor(S)||S<0||S>=7)return void(y.enabled=!1);y.bounds[u]=w[u]=S;break;case h:if(!k(S)||(S=+S)<0||S>24)return void(y.enabled=!1);y.bounds[u]=w[u]=S}if(!1===p.autorange){var L=p.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1])return void(y.enabled=!1)}else if(w[0]>L[0]&&w[1]<L[1])return void(y.enabled=!1)}}else{var C=m("values");if(!C||!C.length)return void(y.enabled=!1);m("dvalue")}}}Q.exports=function(g,y,p,m,w){var u,S=m.letter,_=m.font||{},E=m.splomStash||{},L=p("visible",!m.visibleDflt),P=y.type||(y._template||{}).type||"-";"date"===P&&(A.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",m.calendar),m.noTicklabelmode||(u=p("ticklabelmode")));var I="";m.noTicklabelposition&&"multicategory"!==P||(I=l.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===u?["outside","inside"]:"x"===S?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),m.noTicklabeloverflow||p("ticklabeloverflow",-1!==I.indexOf("inside")?"hide past domain":"category"===P||"multicategory"===P?"allow":"hide past div"),i(y,w);var j=!y.isValidRange(g.range);j&&m.reverseDflt&&(j="reversed"),!p("autorange",j)||"linear"!==P&&"-"!==P||p("rangemode"),p("range"),y.cleanRange(),n(g,y,p,m),"category"===P||m.noHover||p("hoverformat");var R=p("color"),H=R!==d.color.dflt?R:_.color,F=E.label||w._dfltTitle[S];if(r(g,y,p,P,m),!L)return y;p("title.text",F),l.coerceFont(p,"title.font",{family:_.family,size:l.bigFont(_.size),color:H}),s(g,y,p,P);var U=m.hasMinor;if(U&&(T.newContainer(y,"minor"),s(g,y,p,P,{isMinor:!0})),o(g,y,p,P,m),t(g,y,p,m),U){var B=m.isMinor;m.isMinor=!0,t(g,y,p,m),m.isMinor=B}a(g,y,p,{dfltColor:R,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:U,attributes:d}),!U||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&p("mirror");var N,J="multicategory"===P;if(m.noTickson||"category"!==P&&!J||!y.ticks&&!y.showgrid||(J&&(N="boundaries"),"boundaries"===p("tickson",N)&&delete y.ticklabelposition),J&&p("showdividers")&&(p("dividercolor"),p("dividerwidth")),"date"===P)if(b(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),y.rangebreaks.length){for(var Z=0;Z<y.rangebreaks.length;Z++)if(y.rangebreaks[Z].pattern===c){y._hasDayOfWeekBreaks=!0;break}if(i(y,w),w._has("scattergl")||w._has("splom"))for(var V=0;V<m.data.length;V++){var W=m.data[V];"scattergl"!==W.type&&"splom"!==W.type||(W.visible=!1,l.warn(W.type+" traces do not work on axes with rangebreaks. Setting trace "+W.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var x={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if("string"==typeof g)return x[g.substr(0,3).toLowerCase()]}},12663:function(Q,z,e){"use strict";var k=e(31562),A=k.FORMAT_LINK,l=k.DATE_FORMAT_LINK;function T(d,s){return["Sets the "+d+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+A+"."].join(" ")}function b(d,s){return T(d,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Q.exports={axisHoverFormat:function(d,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",d)+["By default the values are formatted using "+(s?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},41675:function(Q,z,e){"use strict";var k=e(73972),A=e(85555);function l(T,b){if(b&&b.length)for(var d=0;d<b.length;d++)if(b[d][T])return!0;return!1}z.id2name=function(T){if("string"==typeof T&&T.match(A.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return"1"===b&&(b=""),T.charAt(0)+"axis"+b}},z.name2id=function(T){if(T.match(A.AX_NAME_PATTERN)){var b=T.substr(5);return"1"===b&&(b=""),T.charAt(0)+b}},z.cleanId=function(T,b,d){var s=/( domain)$/.test(T);if("string"==typeof T&&T.match(A.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||d)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),T.charAt(0)+t+(s&&d?" domain":"")}},z.list=function(T,b,d){var s=T._fullLayout;if(!s)return[];var t,o=z.listIds(T,b),r=new Array(o.length);for(t=0;t<o.length;t++){var n=o[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!d){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var i=s[a[t]];b?r.push(i[b+"axis"]):r.push(i.xaxis,i.yaxis,i.zaxis)}}return r},z.listIds=function(T,b){var d=T._fullLayout;if(!d)return[];var s=d._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},z.getFromId=function(T,b,d){var s=T._fullLayout;return b=void 0===b||"string"!=typeof b?b:b.replace(" domain",""),"x"===d?b=b.replace(/y[0-9]*/,""):"y"===d&&(b=b.replace(/x[0-9]*/,"")),s[z.id2name(b)]},z.getFromTrace=function(T,b,d){var s=T._fullLayout,t=null;if(k.traceIs(b,"gl3d")){var o=b.scene;"scene"===o.substr(0,5)&&(t=s[o][d+"axis"])}else t=z.getFromId(T,b[d+"axis"]||d);return t},z.idSort=function(T,b){var d=T.charAt(0),s=b.charAt(0);return d!==s?d>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},z.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},z.isLinked=function(T,b){return l(b,T._axisMatchGroups)||l(b,T._axisConstraintGroups)}},15258:function(Q){"use strict";Q.exports=function(z,e,k,A){if("category"===e.type){var l,T=z.categoryarray,b=Array.isArray(T)&&T.length>0;b&&(l="array");var d,s=k("categoryorder",l);"array"===s&&(d=k("categoryarray")),b||"array"!==s||(s=e.categoryorder="trace"),"trace"===s?e._initialCategories=[]:"array"===s?e._initialCategories=d.slice():(d=function(t,o){var r,n,a,i=o.dataAttr||t._id.charAt(0),c={};if(o.axData)r=o.axData;else for(r=[],n=0;n<o.data.length;n++){var h=o.data[n];h[i+"axis"]===t._id&&r.push(h)}for(n=0;n<r.length;n++){var f=r[n][i];for(a=0;a<f.length;a++){var x=f[a];null!=x&&(c[x]=1)}}return Object.keys(c)}(e,A).sort(),"category ascending"===s?e._initialCategories=d:"category descending"===s&&(e._initialCategories=d.reverse()))}}},66287:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(50606),T=l.ONEDAY,b=l.ONEWEEK;z.dtick=function(d,s){var t="log"===s,o="date"===s,r="category"===s,n=o?T:1;if(!d)return n;if(k(d))return(d=Number(d))<=0?n:r?Math.max(1,Math.round(d)):o?Math.max(.1,d):d;if("string"!=typeof d||!o&&!t)return n;var a=d.charAt(0),i=d.substr(1);return(i=k(i)?Number(i):0)<=0||!(o&&"M"===a&&i===Math.round(i)||t&&"L"===a||t&&"D"===a&&(1===i||2===i))?n:d},z.tick0=function(d,s,t,o){return"date"===s?A.cleanDate(d,A.dateTick0(t,o%b==0?1:0)):"D1"!==o&&"D2"!==o?k(d)?Number(d):0:void 0}},85555:function(Q,z,e){"use strict";var k=e(30587).counter;Q.exports={idRegex:{x:k("x","( domain)?"),y:k("y","( domain)?")},attrRegex:k("[xy]axis"),xAxisMatch:k("xaxis"),yAxisMatch:k("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(Q,z,e){"use strict";var k=e(71828),A=e(71739),l=e(41675).id2name,T=e(13838),b=e(42449),d=e(21994),s=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function o(f,x,v){var g=v.axIds,y=v.layoutOut,p=v.hasImage,m=y._axisConstraintGroups,w=y._axisMatchGroups,u=x._id,S=u.charAt(0),_=((y._splomAxes||{})[S]||{})[u]||{},E=x._id,L="x"===E.charAt(0);function C(X,K){return k.coerce(f,x,T,X,K)}x._matchGroup=null,x._constraintGroup=null,C("constrain",p?"domain":"range"),k.coerce(f,x,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,I,j=x.type,R=[];for(P=0;P<g.length;P++)(I=g[P])!==E&&y[l(I)].type===j&&R.push(I);var H=n(m,E);if(H){var F=[];for(P=0;P<R.length;P++)H[I=R[P]]||F.push(I);R=F}var U,B,N=R.length;N&&(f.matches||_.matches)&&(U=k.coerce(f,x,{matches:{valType:"enumerated",values:R,dflt:-1!==R.indexOf(_.matches)?_.matches:void 0}},"matches"));var J=p&&!L?x.anchor:void 0;if(N&&!U&&(f.scaleanchor||J)&&(B=k.coerce(f,x,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",J)),U){x._matchGroup=a(w,E,U,1);var Z=y[l(U)],V=r(y,x)/r(y,Z);L!==("x"===U.charAt(0))&&(V=(L?"x":"y")+V),a(m,E,U,V)}else f.matches&&-1!==g.indexOf(f.matches)&&k.warn("ignored "+x._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(B){var W=C("scaleratio");W||(W=x.scaleratio=1),a(m,E,B,W)}else f.scaleanchor&&-1!==g.indexOf(f.scaleanchor)&&k.warn("ignored "+x._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(f,x){var v=x.domain;return v||(v=f[l(x.overlaying)].domain),v[1]-v[0]}function n(f,x){for(var v=0;v<f.length;v++)if(f[v][x])return f[v];return null}function a(f,x,v,g){var y,p,m,w,u,S=n(f,x);null===S?((S={})[x]=1,u=f.length,f.push(S)):u=f.indexOf(S);var _=Object.keys(S);for(y=0;y<f.length;y++)if(m=f[y],y!==u&&m[v]){var E=m[v];for(p=0;p<_.length;p++)m[w=_[p]]=i(E,i(g,S[w]));return void f.splice(u,1)}if(1!==g)for(p=0;p<_.length;p++){var L=_[p];S[L]=i(g,S[L])}S[v]=1}function i(f,x){var v,g,y="",p="";"string"==typeof f&&(v=(y=f.match(/^[xy]*/)[0]).length,f=+f.substr(v)),"string"==typeof x&&(g=(p=x.match(/^[xy]*/)[0]).length,x=+x.substr(g));var m=f*x;return v||g?v&&g&&y.charAt(0)!==p.charAt(0)?v===g?m:(v>g?y.substr(g):p.substr(v))+m:y+p+f*x:m}function c(f,x){for(var v=x._size,g=v.h/v.w,y={},p=Object.keys(f),m=0;m<p.length;m++){var w=p[m],u=f[w];if("string"==typeof u){var S=u.match(/^[xy]*/)[0],_=S.length;u=+u.substr(_);for(var E="y"===S.charAt(0)?g:1/g,L=0;L<_;L++)u*=E}y[w]=u}return y}function h(f,x){var v=f._inputDomain,y=v[0]+(v[1]-v[0])*t[f.constraintoward];f.domain=f._input.domain=[y+(v[0]-y)/x,y+(v[1]-y)/x],f.setScale()}z.handleDefaults=function(f,x,v){var g,y,p,m,w,u,S,_,E=v.axIds,L=v.axHasImage,C=x._axisConstraintGroups=[],P=x._axisMatchGroups=[];for(g=0;g<E.length;g++)o(w=f[m=l(E[g])],u=x[m],{axIds:E,layoutOut:x,hasImage:L[m]});function I(Z,V){for(g=0;g<Z.length;g++)for(p in y=Z[g])x[l(p)][V]=y}for(I(P,"_matchGroup"),g=0;g<C.length;g++)for(p in y=C[g])if((u=x[l(p)]).fixedrange){for(var j in y){var R=l(j);!1===(f[R]||{}).fixedrange&&k.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),x[R].fixedrange=!0}break}for(g=0;g<C.length;){for(p in y=C[g]){(u=x[l(p)])._matchGroup&&Object.keys(u._matchGroup).length===Object.keys(y).length&&(C.splice(g,1),g--);break}g++}I(C,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,U=!1;function B(){_=u[S],"rangebreaks"===S&&(U=u._hasDayOfWeekBreaks)}for(g=0;g<P.length;g++){y=P[g];for(var N=0;N<H.length;N++){var J;for(p in S=H[N],_=null,y)if(w=f[m=l(p)],S in(u=x[m])){if(!u.matches&&(J=u,S in w)){B();break}null===_&&S in w&&B()}if("range"===S&&_&&(F=!0),"autorange"===S&&null===_&&F&&(_=!1),null===_&&S in J&&(_=J[S]),null!==_)for(p in y)(u=x[l(p)])[S]="range"===S?_.slice():_,"rangebreaks"===S&&(u._hasDayOfWeekBreaks=U,d(u,x))}}},z.enforce=function(f){var x,v,g,y,p,m,w,u,S=f._fullLayout,_=S._axisConstraintGroups||[];for(x=0;x<_.length;x++){g=c(_[x],S);var E=Object.keys(g),L=1/0,C=0,P=1/0,I={},j={},R=!1;for(v=0;v<E.length;v++)j[y=E[v]]=p=S[l(y)],p._inputDomain?p.domain=p._inputDomain.slice():p._inputDomain=p.domain.slice(),p._inputRange||(p._inputRange=p.range.slice()),p.setScale(),I[y]=m=Math.abs(p._m)/g[y],L=Math.min(L,m),"domain"!==p.constrain&&p._constraintShrinkable||(P=Math.min(P,m)),delete p._constraintShrinkable,C=Math.max(C,m),"domain"===p.constrain&&(R=!0);if(!(L>s*C)||R)for(v=0;v<E.length;v++)if(m=I[y=E[v]],w=(p=j[y]).constrain,m!==P||"domain"===w)if(u=m/P,"range"===w)b(p,u);else{var H=p._inputDomain,F=(p.domain[1]-p.domain[0])/(H[1]-H[0]),U=(p.r2l(p.range[1])-p.r2l(p.range[0]))/(p.r2l(p._inputRange[1])-p.r2l(p._inputRange[0]));if((u/=F)*U<1){p.domain=p._input.domain=H.slice(),b(p,u);continue}if(U<1&&(p.range=p._input.range=p._inputRange.slice(),u*=U),p.autorange){var B=p.r2l(p.range[0]),N=p.r2l(p.range[1]),J=(B+N)/2,Z=J,V=J,W=Math.abs(N-J),X=J-W*u*1.0001,K=J+W*u*1.0001,ne=A.makePadFn(S,p,0),re=A.makePadFn(S,p,1);h(p,u);var ae,le,pe=Math.abs(p._m),xe=A.concatExtremes(f,p),ye=xe.min,se=xe.max;for(le=0;le<ye.length;le++)(ae=ye[le].val-ne(ye[le])/pe)>X&&ae<Z&&(Z=ae);for(le=0;le<se.length;le++)(ae=se[le].val+re(se[le])/pe)<K&&ae>V&&(V=ae);u/=(V-Z)/(2*W),Z=p.l2r(Z),V=p.l2r(V),p.range=p._input.range=B<N?[Z,V]:[V,Z]}h(p,u)}}},z.getAxisGroup=function(f,x){for(var v=f._axisMatchGroups,g=0;g<v.length;g++)if(v[g][x])return"g"+g;return x},z.clean=function(f,x){if(x._inputDomain){for(var v=!1,g=x._id,y=f._fullLayout._axisConstraintGroups,p=0;p<y.length;p++)if(y[p][g]){v=!0;break}v&&"domain"===x.constrain||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},29323:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=A.numberFormat,T=e(84267),b=e(38520),d=e(73972),s=A.strTranslate,t=e(63893),o=e(7901),r=e(91424),n=e(30211),a=e(89298),i=e(6964),c=e(28569),h=e(64505),f=h.selectingOrDrawing,x=h.freeMode,v=e(18783).FROM_TL,g=e(33306),y=e(61549).redrawReglTraces,p=e(74875),m=e(41675).getFromId,w=e(47322).prepSelect,u=e(47322).clearOutline,S=e(47322).selectOnClick,_=e(42449),E=e(85555),L=E.MINDRAG,C=E.MINZOOM,P=!0;function I(ae,le,pe,xe){var ye=A.ensureSingle(ae.draglayer,le,pe,function(se){se.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return ye.call(i,xe),ye.node()}function j(ae,le,pe,xe,ye,se,fe){var Ee=I(ae,"rect",le,pe);return k.select(Ee).call(r.setRect,xe,ye,se,fe),Ee}function R(ae,le){for(var pe=0;pe<ae.length;pe++)if(!ae[pe].fixedrange)return le;return""}function H(ae,le,pe,xe,ye){for(var se=0;se<ae.length;se++){var fe=ae[se];if(!fe.fixedrange)if(fe.rangebreaks){var Ee="y"===fe._id.charAt(0),we=Ee?1-pe:pe;xe[fe._name+".range[0]"]=fe.l2r(fe.p2l((Ee?1-le:le)*fe._length)),xe[fe._name+".range[1]"]=fe.l2r(fe.p2l(we*fe._length))}else{var ke=fe._rl[0],Te=fe._rl[1]-ke;xe[fe._name+".range[0]"]=fe.l2r(ke+Te*le),xe[fe._name+".range[1]"]=fe.l2r(ke+Te*pe)}}if(ye&&ye.length){var $=(le+(1-pe))/2;H(ye,$,1-$,xe,[])}}function F(ae,le){for(var pe=0;pe<ae.length;pe++){var xe=ae[pe];if(!xe.fixedrange)if(xe.rangebreaks){var ye=xe._length,se=(xe.p2l(0+le)-xe.p2l(0)+(xe.p2l(ye+le)-xe.p2l(ye)))/2;xe.range=[xe.l2r(xe._rl[0]-se),xe.l2r(xe._rl[1]-se)]}else xe.range=[xe.l2r(xe._rl[0]-le/xe._m),xe.l2r(xe._rl[1]-le/xe._m)]}}function U(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function B(ae,le,pe,xe,ye){return ae.append("path").attr("class","zoombox").style({fill:le>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(pe,xe)).attr("d",ye+"Z")}function N(ae,le,pe){return ae.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(le,pe)).attr("d","M0,0Z")}function J(ae,le,pe,xe,ye,se){ae.attr("d",xe+"M"+pe.l+","+pe.t+"v"+pe.h+"h"+pe.w+"v-"+pe.h+"h-"+pe.w+"Z"),Z(ae,le,ye,se)}function Z(ae,le,pe,xe){pe||(ae.transition().style("fill",xe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),le.transition().style("opacity",1).duration(200))}function V(ae){k.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function W(ae){P&&ae.data&&ae._context.showTips&&(A.notifier(A._(ae,"Double-click to zoom back out"),"long"),P=!1)}function X(ae){var le=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,C)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+le)+"h3v"+-le+"h"+le+"v-3h-"+(le+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+le)+"h-3v"+-le+"h"+-le+"v-3h"+(le+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-le)+"h-3v"+le+"h"+-le+"v3h"+(le+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-le)+"h3v"+le+"h"+le+"v3h-"+(le+3)+"Z"}function K(ae,le,pe,xe,ye){for(var se,fe,Ee,de,we=!1,ke={},Te={},$=(ye||{}).xaHash,oe=(ye||{}).yaHash,he=0;he<le.length;he++){var me=le[he];for(se in pe)if(me[se]){for(Ee in me)ye&&($[Ee]||oe[Ee])||("x"===Ee.charAt(0)?pe:xe)[Ee]||(ke[Ee]=se);for(fe in xe)ye&&($[fe]||oe[fe])||!me[fe]||(we=!0)}for(fe in xe)if(me[fe])for(de in me)ye&&($[de]||oe[de])||("x"===de.charAt(0)?pe:xe)[de]||(Te[de]=fe)}we&&(A.extendFlat(ke,Te),Te={});var Me={},Ie=[];for(Ee in ke){var Pe=m(ae,Ee);Ie.push(Pe),Me[Pe._id]=Pe}var ze={},ce=[];for(de in Te){var ge=m(ae,de);ce.push(ge),ze[ge._id]=ge}return{xaHash:Me,yaHash:ze,xaxes:Ie,yaxes:ce,xLinks:ke,yLinks:Te,isSubplotConstrained:we}}function ne(ae,le){if(b){var pe=void 0!==ae.onwheel?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(pe,ae._onwheel),ae._onwheel=le,ae.addEventListener(pe,le,{passive:!1})}else void 0!==ae.onwheel?ae.onwheel=le:void 0!==ae.onmousewheel?ae.onmousewheel=le:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",le,{passive:!1}))}function re(ae){var le=[];for(var pe in ae)le.push(ae[pe]);return le}Q.exports={makeDragBox:function(ae,le,pe,xe,ye,se,fe,Ee){var de,we,ke,Te,$,oe,he,me,Me,Ie,Pe,ze,ce,ge,_e,De,He,Ve,nt,tt,at,dt,wt,bt=ae._fullLayout._zoomlayer,_t=fe+Ee==="nsew",Lt=1===(fe+Ee).length;function Ct(){if(Me=(de=le.xaxis)._length,Ie=(we=le.yaxis)._length,he=de._offset,me=we._offset,(ke={})[de._id]=de,(Te={})[we._id]=we,fe&&Ee)for(var on=le.overlays,pn=0;pn<on.length;pn++){var ln=on[pn].xaxis;ke[ln._id]=ln;var dn=on[pn].yaxis;Te[dn._id]=dn}$=re(ke),oe=re(Te),ce=R($,Ee),ge=R(oe,fe),_e=!ge&&!ce,ze=K(ae,ae._fullLayout._axisMatchGroups,ke,Te);var Cn=(Pe=K(ae,ae._fullLayout._axisConstraintGroups,ke,Te,ze)).isSubplotConstrained||ze.isSubplotConstrained;De=Ee||Cn,He=fe||Cn;var kn=ae._fullLayout;Ve=kn._has("scattergl"),nt=kn._has("splom"),tt=kn._has("svg")}pe+=le.yaxis._shift,Ct();var on,Ot=(on=ge+ce)?"nsew"===on?_t?"":"pan"===ae._fullLayout.dragmode?"move":"crosshair":on.toLowerCase()+"-resize":"pointer",Ht=j(le,fe+Ee+"drag",Ot,pe,xe,ye,se);if(_e&&!_t)return Ht.onmousedown=null,Ht.style.pointerEvents="none",Ht;var It,Ge,Ze,Be,Ye,rt,Se,Re,Ke,st,ct={element:Ht,gd:ae,plotinfo:le};function Tt(){ct.plotinfo.selection=!1,u(ae)}function Et(on,pn){var Kn,yr,lr,$n,Gn,ln=ct.gd;if(ln._fullLayout._activeShapeIndex>=0)ln._fullLayout._deactivateShape(ln);else{var dn=ln._fullLayout.clickmode;if(V(ln),2!==on||Lt||function un(){if(!ae._transitioningWithDuration){var on=ae._context.doubleClick,pn=[];ce&&(pn=pn.concat($)),ge&&(pn=pn.concat(oe)),ze.xaxes&&(pn=pn.concat(ze.xaxes)),ze.yaxes&&(pn=pn.concat(ze.yaxes));var ln,dn,Cn,kn={};if("reset+autosize"===on)for(on="autosize",dn=0;dn<pn.length;dn++)if((ln=pn[dn])._rangeInitial&&(ln.range[0]!==ln._rangeInitial[0]||ln.range[1]!==ln._rangeInitial[1])||!ln._rangeInitial&&!ln.autorange){on="reset";break}if("autosize"===on)for(dn=0;dn<pn.length;dn++)(ln=pn[dn]).fixedrange||(kn[ln._name+".autorange"]=!0);else if("reset"===on)for((ce||Pe.isSubplotConstrained)&&(pn=pn.concat(Pe.xaxes)),ge&&!Pe.isSubplotConstrained&&(pn=pn.concat(Pe.yaxes)),Pe.isSubplotConstrained&&(ce?ge||(pn=pn.concat(oe)):pn=pn.concat($)),dn=0;dn<pn.length;dn++)(ln=pn[dn]).fixedrange||(ln._rangeInitial?(kn[ln._name+".range[0]"]=(Cn=ln._rangeInitial)[0],kn[ln._name+".range[1]"]=Cn[1]):kn[ln._name+".autorange"]=!0);ae.emit("plotly_doubleclick",null),d.call("_guiRelayout",ae,kn)}}(),_t)dn.indexOf("select")>-1&&S(pn,ln,$,oe,le.id,ct),dn.indexOf("event")>-1&&n.click(ln,pn,le.id);else if(1===on&&Lt){var Cn=fe?we:de,kn="s"===fe||"w"===Ee?0:1,Rn=Cn._name+".range["+kn+"]",Nn=($n=(Kn=Cn).range[yr=kn],Gn=Math.abs($n-Kn.range[1-yr]),"date"===Kn.type?$n:"log"===Kn.type?(lr=Math.ceil(Math.max(0,-Math.log(Gn)/Math.LN10))+3,l("."+lr+"g")(Math.pow(10,$n))):(lr=Math.floor(Math.log(Math.abs($n))/Math.LN10)-Math.floor(Math.log(Gn)/Math.LN10)+4,l("."+String(lr)+"g")($n))),jn="left",er="middle";if(Cn.fixedrange)return;fe?(er="n"===fe?"top":"bottom","right"===Cn.side&&(jn="right")):"e"===Ee&&(jn="right"),ln._context.showAxisRangeEntryBoxes&&k.select(Ht).call(t.makeEditable,{gd:ln,immediate:!0,background:ln._fullLayout.paper_bgcolor,text:String(Nn),fill:Cn.tickfont?Cn.tickfont.color:"#444",horizontalAlign:jn,verticalAlign:er}).on("edit",function(Kn){var yr=Cn.d2r(Kn);void 0!==yr&&d.call("_guiRelayout",ln,Rn,yr)})}}}function At(on,pn){if(ae._transitioningWithDuration)return!1;var er,Kn,ln=Math.max(0,Math.min(Me,dt*on+It)),dn=Math.max(0,Math.min(Ie,wt*pn+Ge)),Cn=Math.abs(ln-It),kn=Math.abs(dn-Ge);function Rn(){Se="",Ze.r=Ze.l,Ze.t=Ze.b,Ke.attr("d","M0,0Z")}if(Ze.l=Math.min(It,ln),Ze.r=Math.max(It,ln),Ze.t=Math.min(Ge,dn),Ze.b=Math.max(Ge,dn),Pe.isSubplotConstrained)Cn>C||kn>C?(Se="xy",Cn/Me>kn/Ie?(kn=Cn*Ie/Me,Ge>dn?Ze.t=Ge-kn:Ze.b=Ge+kn):(Cn=kn*Me/Ie,It>ln?Ze.l=It-Cn:Ze.r=It+Cn),Ke.attr("d",X(Ze))):Rn();else if(ze.isSubplotConstrained)if(Cn>C||kn>C){Se="xy";var Nn=Math.min(Ze.l/Me,(Ie-Ze.b)/Ie),jn=Math.max(Ze.r/Me,(Ie-Ze.t)/Ie);Ze.l=Nn*Me,Ze.r=jn*Me,Ze.b=(1-Nn)*Ie,Ze.t=(1-jn)*Ie,Ke.attr("d",X(Ze))}else Rn();else!ge||kn<Math.min(Math.max(.6*Cn,L),C)?Cn<L||!ce?Rn():(Ze.t=0,Ze.b=Ie,Se="x",Ke.attr("d","M"+((er=Ze).l-.5)+","+((Kn=Ge)-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(er.r+.5)+","+(Kn-C-.5)+"h3v"+(2*C+1)+"h-3Z")):!ce||Cn<Math.min(.6*kn,C)?(Ze.l=0,Ze.r=Me,Se="y",Ke.attr("d",function(er,Kn){return"M"+(Kn-C-.5)+","+(er.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Kn-C-.5)+","+(er.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ze,It))):(Se="xy",Ke.attr("d",X(Ze)));Ze.w=Ze.r-Ze.l,Ze.h=Ze.b-Ze.t,Se&&(st=!0),ae._dragged=st,J(Re,Ke,Ze,Ye,rt,Be),ht(),ae.emit("plotly_relayouting",at),rt=!0}function ht(){at={},"xy"!==Se&&"x"!==Se||(H($,Ze.l/Me,Ze.r/Me,at,Pe.xaxes),jt("x",at)),"xy"!==Se&&"y"!==Se||(H(oe,(Ie-Ze.b)/Ie,(Ie-Ze.t)/Ie,at,Pe.yaxes),jt("y",at))}function pt(){ht(),V(ae),hn(),W(ae)}ct.prepFn=function(on,pn,ln){var dn=ct.dragmode,Cn=ae._fullLayout.dragmode;Cn!==dn&&(ct.dragmode=Cn),Ct(),dt=ae._fullLayout._invScaleX,wt=ae._fullLayout._invScaleY,_e||(_t?on.shiftKey?"pan"===Cn?Cn="zoom":f(Cn)||(Cn="pan"):on.ctrlKey&&(Cn="pan"):Cn="pan"),ct.minDrag=x(Cn)?1:void 0,f(Cn)?(ct.xaxes=$,ct.yaxes=oe,w(on,pn,ln,ct,Cn)):(ct.clickFn=Et,f(dn)&&Tt(),_e||("zoom"===Cn?(ct.moveFn=At,ct.doneFn=pt,ct.minDrag=1,function(kn,Rn,Nn){var jn=Ht.getBoundingClientRect();It=Rn-jn.left,Ge=Nn-jn.top,ae._fullLayout._calcInverseTransform(ae);var er=A.apply3DTransform(ae._fullLayout._invTransform)(It,Ge);Ze={l:It=er[0],r:It,w:0,t:Ge=er[1],b:Ge,h:0},Be=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:T(ae._fullLayout.plot_bgcolor).getLuminance(),rt=!1,Se="xy",st=!1,Re=B(bt,Be,he,me,Ye="M0,0H"+Me+"V"+Ie+"H0V0"),Ke=N(bt,he,me)}(0,pn,ln)):"pan"===Cn&&(ct.moveFn=Nt,ct.doneFn=hn))),ae._fullLayout._redrag=function(){var kn=ae._dragdata;kn&&kn.element===Ht&&(f(ae._fullLayout.dragmode)||(Ct(),Qt([0,0,Me,Ie]),ct.moveFn(kn.dx,kn.dy)))}},c.init(ct);var gt=[0,0,Me,Ie],Pt=null,zt=E.REDRAWDELAY,Ut=le.mainplot?ae._fullLayout._plots[le.mainplot]:le;function Nt(on,pn){if(on*=dt,pn*=wt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,"ew"===ce||"ns"===ge){var ln=ce?-on:0,dn=ge?-pn:0;if(ze.isSubplotConstrained){if(ce&&ge){var Cn=(on/Me-pn/Ie)/2;ln=-(on=Cn*Me),dn=-(pn=-Cn*Ie)}ge?ln=-dn*Me/Ie:dn=-ln*Ie/Me}return ce&&(F($,on),jt("x")),ge&&(F(oe,pn),jt("y")),Qt([ln,dn,Me,Ie]),Gt(),void ae.emit("plotly_relayouting",at)}var kn,Rn,Nn="w"===ce==("n"===ge)?1:-1;if(ce&&ge&&(Pe.isSubplotConstrained||ze.isSubplotConstrained)){var jn=(on/Me+Nn*pn/Ie)/2;on=jn*Me,pn=Nn*jn*Ie}if("w"===ce?on=lr($,0,on):"e"===ce?on=lr($,1,-on):ce||(on=0),"n"===ge?pn=lr(oe,1,pn):"s"===ge?pn=lr(oe,0,-pn):ge||(pn=0),kn="w"===ce?on:0,Rn="n"===ge?pn:0,Pe.isSubplotConstrained&&!ze.isSubplotConstrained||ze.isSubplotConstrained&&ce&&ge&&Nn>0){var er;if(ze.isSubplotConstrained||!ce&&1===ge.length){for(er=0;er<$.length;er++)$[er].range=$[er]._r.slice(),_($[er],1-pn/Ie);kn=(on=pn*Me/Ie)/2}if(ze.isSubplotConstrained||!ge&&1===ce.length){for(er=0;er<oe.length;er++)oe[er].range=oe[er]._r.slice(),_(oe[er],1-on/Me);Rn=(pn=on*Ie/Me)/2}}ze.isSubplotConstrained&&ge||jt("x"),ze.isSubplotConstrained&&ce||jt("y");var Kn=Me-on,yr=Ie-pn;!ze.isSubplotConstrained||ce&&ge||(ce?(Rn=kn?0:on*Ie/Me,yr=Kn*Ie/Me):(kn=Rn?0:pn*Me/Ie,Kn=yr*Me/Ie)),Qt([kn,Rn,Kn,yr]),Gt(),ae.emit("plotly_relayouting",at)}function lr($n,Gn,ir){for(var Jt,rn,Sn=1-Gn,Tn=0;Tn<$n.length;Tn++){var Ln=$n[Tn];if(!Ln.fixedrange){Jt=Ln,rn=Ln._rl[Sn]+(Ln._rl[Gn]-Ln._rl[Sn])/U(ir/Ln._length);var Bn=Ln.l2r(rn);!1!==Bn&&void 0!==Bn&&(Ln.range[Gn]=Bn)}}return Jt._length*(Jt._rl[Gn]-rn)/(Jt._rl[Gn]-Jt._rl[Sn])}}function jt(on,pn){for(var ln=ze.isSubplotConstrained?{x:oe,y:$}[on]:ze[on+"axes"],dn=ze.isSubplotConstrained?{x:$,y:oe}[on]:[],Cn=0;Cn<ln.length;Cn++){var kn=ln[Cn],Rn=kn._id,Nn=ze.xLinks[Rn]||ze.yLinks[Rn],jn=dn[0]||ke[Nn]||Te[Nn];jn&&(pn?(pn[kn._name+".range[0]"]=pn[jn._name+".range[0]"],pn[kn._name+".range[1]"]=pn[jn._name+".range[1]"]):kn.range=jn.range.slice())}}function Gt(){var on,pn=[];function ln(Rn){for(on=0;on<Rn.length;on++)Rn[on].fixedrange||pn.push(Rn[on]._id)}function dn(Rn,Nn){for(on=0;on<Rn.length;on++){var jn=Rn[on],er=jn[Nn];jn.fixedrange||"sync"!==er.tickmode||pn.push(er._id)}}for(De&&(ln($),ln(Pe.xaxes),ln(ze.xaxes),dn(le.overlays,"xaxis")),He&&(ln(oe),ln(Pe.yaxes),ln(ze.yaxes),dn(le.overlays,"yaxis")),at={},on=0;on<pn.length;on++){var kn=m(ae,pn[on]);a.drawOne(ae,kn,{skipTitle:!0}),at[kn._name+".range[0]"]=kn.range[0],at[kn._name+".range[1]"]=kn.range[1]}a.redrawComponents(ae,pn)}function hn(){Qt([0,0,Me,Ie]),A.syncOrAsync([p.previousPromises,function(){ae._fullLayout._replotting=!1,d.call("_guiRelayout",ae,at)}],ae)}function Qt(on){var pn,ln,dn,Cn,kn=ae._fullLayout,Rn=kn._plots,Nn=kn._subplots.cartesian;if(nt&&d.subplotsRegistry.splom.drag(ae),Ve)for(pn=0;pn<Nn.length;pn++)if(dn=(ln=Rn[Nn[pn]]).xaxis,Cn=ln.yaxis,ln._scene){var jn=A.simpleMap(dn.range,dn.r2l),er=A.simpleMap(Cn.range,Cn.r2l);ln._scene.update({range:[jn[0],er[0],jn[1],er[1]]})}if((nt||Ve)&&(g(ae),y(ae)),tt){var Kn=on[2]/de._length,yr=on[3]/we._length;for(pn=0;pn<Nn.length;pn++){dn=(ln=Rn[Nn[pn]]).xaxis,Cn=ln.yaxis;var lr,$n,Gn,ir,rn=(He||ze.isSubplotConstrained)&&!Cn.fixedrange&&Te[Cn._id];if((De||ze.isSubplotConstrained)&&!dn.fixedrange&&ke[dn._id]?(lr=Kn,Gn=Ee||ze.isSubplotConstrained?on[0]:yn(dn,lr)):ze.xaHash[dn._id]?(lr=Kn,Gn=on[0]*dn._length/de._length):ze.yaHash[dn._id]?(lr=yr,Gn="ns"===ge?-on[1]*dn._length/we._length:yn(dn,lr,{n:"top",s:"bottom"}[ge])):Gn=Fn(dn,lr=_n(dn,Kn,yr)),rn?($n=yr,ir=fe||ze.isSubplotConstrained?on[1]:yn(Cn,$n)):ze.yaHash[Cn._id]?($n=yr,ir=on[1]*Cn._length/we._length):ze.xaHash[Cn._id]?($n=Kn,ir="ew"===ce?-on[0]*Cn._length/de._length:yn(Cn,$n,{e:"right",w:"left"}[ce])):ir=Fn(Cn,$n=_n(Cn,Kn,yr)),lr||$n){lr||(lr=1),$n||($n=1);var Sn=dn._offset-Gn/lr,Tn=Cn._offset-ir/$n;ln.clipRect.call(r.setTranslate,Gn,ir).call(r.setScale,lr,$n),ln.plot.call(r.setTranslate,Sn,Tn).call(r.setScale,1/lr,1/$n),lr===ln.xScaleFactor&&$n===ln.yScaleFactor||(r.setPointGroupScale(ln.zoomScalePts,lr,$n),r.setTextPointsScale(ln.zoomScaleTxt,lr,$n)),r.hideOutsideRangePoints(ln.clipOnAxisFalseTraces,ln),ln.xScaleFactor=lr,ln.yScaleFactor=$n}}}}function _n(on,pn,ln){return on.fixedrange?0:De&&Pe.xaHash[on._id]?pn:He&&(Pe.isSubplotConstrained?Pe.xaHash:Pe.yaHash)[on._id]?ln:0}function Fn(on,pn){return pn?(on.range=on._r.slice(),_(on,pn),yn(on,pn)):0}function yn(on,pn,ln){return on._length*(1-pn)*v[ln||on.constraintoward||"middle"]}return fe.length*Ee.length!=1&&ne(Ht,function(on){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(Tt(),ae._transitioningWithDuration)return on.preventDefault(),void on.stopPropagation();Ct(),clearTimeout(Pt);var pn=-on.deltaY;if(isFinite(pn)||(pn=on.wheelDelta/10),isFinite(pn)){var ln,dn=Math.exp(-Math.min(Math.max(pn,-20),20)/200),Cn=Ut.draglayer.select(".nsewdrag").node().getBoundingClientRect(),kn=(on.clientX-Cn.left)/Cn.width,Rn=(Cn.bottom-on.clientY)/Cn.height;if(De){for(Ee||(kn=.5),ln=0;ln<$.length;ln++)Nn($[ln],kn,dn);jt("x"),gt[2]*=dn,gt[0]+=gt[2]*kn*(1/dn-1)}if(He){for(fe||(Rn=.5),ln=0;ln<oe.length;ln++)Nn(oe[ln],Rn,dn);jt("y"),gt[3]*=dn,gt[1]+=gt[3]*(1-Rn)*(1/dn-1)}Qt(gt),Gt(),ae.emit("plotly_relayouting",at),Pt=setTimeout(function(){ae._fullLayout&&(gt=[0,0,Me,Ie],hn())},zt),on.preventDefault()}else A.log("Did not find wheel motion attributes: ",on)}function Nn(jn,er,Kn){if(!jn.fixedrange){var yr=A.simpleMap(jn.range,jn.r2l),lr=yr[0]+(yr[1]-yr[0])*er;jn.range=yr.map(function($n){return jn.l2r(lr+($n-lr)*Kn)})}}}),Ht},makeDragger:I,makeRectDragger:j,makeZoombox:B,makeCorners:N,updateZoombox:J,xyCorners:X,transitionZoombox:Z,removeZoombox:V,showDoubleClickNotifier:W,attachWheelEventHandler:ne}},4305:function(Q,z,e){"use strict";var k=e(39898),A=e(30211),l=e(28569),T=e(6964),b=e(29323).makeDragBox,d=e(85555).DRAGGERSIZE;z.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)k.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),i=n.split("y");return a[0]===i[0]?Number(a[1]||1)-Number(i[1]||1):Number(a[0]||1)-Number(i[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,i=n.yaxis;if(!n.mainplot){var c=b(s,n,a._offset,i._offset,a._length,i._length,"ns","ew");c.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&A.hover(s,x,r)},A.hover(s,x,r),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=r},c.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,n,a._offset-d,i._offset-d,d,d,"n","w"),b(s,n,a._offset+a._length,i._offset-d,d,d,"n","e"),b(s,n,a._offset-d,i._offset+i._length,d,d,"s","w"),b(s,n,a._offset+a._length,i._offset+i._length,d,d,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;"top"===a.side&&(h-=d),b(s,n,a._offset+.1*a._length,h,.8*a._length,d,"","ew"),b(s,n,a._offset,h,.1*a._length,d,"","w"),b(s,n,a._offset+.9*a._length,h,.1*a._length,d,"","e")}if(r===i._mainSubplot){var f=i._mainLinePosition;"right"!==i.side&&(f-=d),b(s,n,f,i._offset+.1*i._length,d,.8*i._length,"ns",""),b(s,n,f,i._offset+.9*i._length,d,.1*i._length,"s",""),b(s,n,f,i._offset,d,.1*i._length,"n","")}}});var o=t._hoverlayer.node();o.onmousemove=function(r){r.target=s._fullLayout._lasthover,A.hover(s,r,t._hoversubplot)},o.onclick=function(r){r.target=s._fullLayout._lasthover,A.click(s,r)},o.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},z.updateFx(s)}},z.updateFx=function(s){var t=s._fullLayout;T(t._draggers,"pan"===t.dragmode?"move":"crosshair")}},76325:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(41675);Q.exports=function(T){return function(b,d){var s=b[T];if(Array.isArray(s))for(var t=k.subplotsRegistry.cartesian,o=t.idRegex,r=d._subplots,n=r.xaxis,a=r.yaxis,i=r.cartesian,c=d._has("cartesian")||d._has("gl2d"),h=0;h<s.length;h++){var f=s[h];if(A.isPlainObject(f)){var x=l.cleanId(f.xref,"x",!1),v=l.cleanId(f.yref,"y",!1),g=o.x.test(x),y=o.y.test(v);if(g||y){c||A.pushUnique(d._basePlotModules,t);var p=!1;g&&-1===n.indexOf(x)&&(n.push(x),p=!0),y&&-1===a.indexOf(v)&&(a.push(v),p=!0),p&&g&&y&&i.push(x+v)}}}}}},93612:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(71828),T=e(74875),b=e(91424),d=e(27659).a0,s=e(41675),t=e(85555),o=e(77922),r=l.ensureSingle;function n(f,x,v){return l.ensureSingle(f,x,v,function(g){g.datum(v)})}function a(f,x,v,g,y){for(var p,m,w,u=t.traceLayerClasses,S=f._fullLayout,_=S._modules,E=[],L=[],C=0;C<_.length;C++){var P=(p=_[C]).name,I=A.modules[P].categories;if(I.svg){var j=p.layerName||P+"layer",R=p.plot;w=(m=d(v,R))[0],v=m[1],w.length&&E.push({i:u.indexOf(j),className:j,plotMethod:R,cdModule:w}),I.zoomScale&&L.push("."+j)}}E.sort(function(U,B){return U.i-B.i});var H=x.plot.selectAll("g.mlayer").data(E,function(U){return U.className});if(H.enter().append("g").attr("class",function(U){return U.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),H.exit().remove(),H.order(),H.each(function(U){var B=k.select(this),N=U.className;U.plotMethod(f,x,U.cdModule,B,g,y),-1===t.clipOnAxisFalseQuery.indexOf("."+N)&&b.setClipUrl(B,x.layerClipId,f)}),S._has("scattergl")&&(p=A.getModule("scattergl"),w=d(v,p)[0],p.plot(f,x,w)),!f._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var F=x.plot.selectAll(L.join(",")).selectAll(".trace");x.zoomScalePts=F.selectAll("path.point"),x.zoomScaleTxt=F.selectAll(".textpoint")}}function i(f,x){var v=x.plotgroup,g=x.id,y=t.layerValue2layerClass[x.xaxis.layer],p=t.layerValue2layerClass[x.yaxis.layer],m=f._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var w=x.mainplotinfo,u=w.plotgroup,S=g+"-x",_=g+"-y";x.minorGridlayer=w.minorGridlayer,x.gridlayer=w.gridlayer,x.zerolinelayer=w.zerolinelayer,r(w.overlinesBelow,"path",S),r(w.overlinesBelow,"path",_),r(w.overaxesBelow,"g",S),r(w.overaxesBelow,"g",_),x.plot=r(w.overplot,"g",g),r(w.overlinesAbove,"path",S),r(w.overlinesAbove,"path",_),r(w.overaxesAbove,"g",S),r(w.overaxesAbove,"g",_),x.xlines=u.select(".overlines-"+y).select("."+S),x.ylines=u.select(".overlines-"+p).select("."+_),x.xaxislayer=u.select(".overaxes-"+y).select("."+S),x.yaxislayer=u.select(".overaxes-"+p).select("."+_)}else if(m)x.xlines=r(v,"path","xlines-above"),x.ylines=r(v,"path","ylines-above"),x.xaxislayer=r(v,"g","xaxislayer-above"),x.yaxislayer=r(v,"g","yaxislayer-above");else{var E=r(v,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(v,"g","minor-gridlayer"),x.gridlayer=r(v,"g","gridlayer"),x.zerolinelayer=r(v,"g","zerolinelayer"),r(v,"path","xlines-below"),r(v,"path","ylines-below"),x.overlinesBelow=r(v,"g","overlines-below"),r(v,"g","xaxislayer-below"),r(v,"g","yaxislayer-below"),x.overaxesBelow=r(v,"g","overaxes-below"),x.plot=r(v,"g","plot"),x.overplot=r(v,"g","overplot"),x.xlines=r(v,"path","xlines-above"),x.ylines=r(v,"path","ylines-above"),x.overlinesAbove=r(v,"g","overlines-above"),r(v,"g","xaxislayer-above"),r(v,"g","yaxislayer-above"),x.overaxesAbove=r(v,"g","overaxes-above"),x.xlines=v.select(".xlines-"+y),x.ylines=v.select(".ylines-"+p),x.xaxislayer=v.select(".xaxislayer-"+y),x.yaxislayer=v.select(".yaxislayer-"+p)}m||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function c(f,x){if(f){var v={};for(var g in f.each(function(w){var u=w[0];k.select(this).remove(),h(u,x),v[u]=!0}),x._plots)for(var y=x._plots[g].overlays||[],p=0;p<y.length;p++){var m=y[p];v[m.id]&&m.plot.selectAll(".trace").remove()}}}function h(f,x){x._draggers.selectAll("g."+f).remove(),x._defs.select("#clip"+x._uid+f+"plot").remove()}z.name="cartesian",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=t.idRegex,z.attrRegex=t.attrRegex,z.attributes=e(89502),z.layoutAttributes=e(13838),z.supplyLayoutDefaults=e(86763),z.transitionAxes=e(66847),z.finalizeSubplots=function(f,x){var v,g,y,p=x._subplots,m=p.xaxis,w=p.yaxis,u=p.cartesian,S=u.concat(p.gl2d||[]),_={},E={};for(v=0;v<S.length;v++){var L=S[v].split("y");_[L[0]]=1,E["y"+L[1]]=1}for(v=0;v<m.length;v++)_[g=m[v]]||(y=(f[s.id2name(g)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),u.push(g+y),S.push(g+y),E[y]||(E[y]=1,l.pushUnique(w,y)));for(v=0;v<w.length;v++)E[y=w[v]]||(g=(f[s.id2name(y)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),u.push(g+y),S.push(g+y),_[g]||(_[g]=1,l.pushUnique(m,g)));if(!S.length){for(var C in g="",y="",f)t.attrRegex.test(C)&&("x"===C.charAt(0)?(!g||+C.substr(5)<+g.substr(5))&&(g=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));g=g?s.name2id(g):"x",y=y?s.name2id(y):"y",m.push(g),w.push(y),u.push(g+y)}},z.plot=function(f,x,v,g){var y,p=f._fullLayout,m=p._subplots.cartesian,w=f.calcdata;if(!Array.isArray(x))for(x=[],y=0;y<w.length;y++)x.push(y);for(y=0;y<m.length;y++){for(var u,S=m[y],_=p._plots[S],E=[],L=0;L<w.length;L++){var C=w[L],P=C[0].trace;P.xaxis+P.yaxis===S&&((-1!==x.indexOf(P.index)||P.carpet)&&(u&&u[0].trace.xaxis+u[0].trace.yaxis===S&&-1!==["tonextx","tonexty","tonext"].indexOf(P.fill)&&-1===E.indexOf(u)&&E.push(u),E.push(C)),u=C)}a(f,_,E,v,g)}},z.clean=function(f,x,v,g){var y,p,m,w=g._plots||{},u=x._plots||{},S=g._subplots||{};if(g._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(m in w)(y=w[m]).plotgroup&&y.plotgroup.remove();var _=g._has&&g._has("gl"),E=x._has&&x._has("gl");if(_&&!E)for(m in w)(y=w[m])._scene&&y._scene.destroy();if(S.xaxis&&S.yaxis){var L=s.listIds({_fullLayout:g});for(p=0;p<L.length;p++){var C=L[p];x[s.id2name(C)]||g._infolayer.selectAll(".g-"+C+"title").remove()}}var P=g._has&&g._has("cartesian"),I=x._has&&x._has("cartesian");if(P&&!I)c(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(S.cartesian)for(p=0;p<S.cartesian.length;p++){var j=S.cartesian[p];u[j]||(g._cartesianlayer.selectAll("."+j+",."+j+"-x,."+j+"-y").remove(),h(j,g))}},z.drawFramework=function(f){var x=f._fullLayout,v=function(y){var p,m,w,u,S,_,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,P=[],I=[];for(p=0;p<C;p++){var H=(S=(u=E._plots[w=L[p]]).xaxis)._mainAxis._id+(_=u.yaxis)._mainAxis._id,F=E._plots[H];u.overlays=[],H!==w&&F?(u.mainplot=H,u.mainplotinfo=F,I.push(w)):(u.mainplot=void 0,u.mainplotinfo=void 0,P.push(w))}for(p=0;p<I.length;p++)(u=E._plots[w=I[p]]).mainplotinfo.overlays.push(u);var U=P.concat(I),B=new Array(C);for(p=0;p<C;p++){var N=[w=U[p],(S=(u=E._plots[w]).xaxis).layer,(_=u.yaxis).layer,S.overlaying||"",_.overlaying||""];for(m=0;m<u.overlays.length;m++)N.push(u.overlays[m].id);B[p]=N}return B}(f),g=x._cartesianlayer.selectAll(".subplot").data(v,String);g.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),g.order(),g.exit().call(c,x),g.each(function(y){var p=y[0],m=x._plots[p];m.plotgroup=k.select(this),i(f,m),m.draglayer=r(x._draggers,"g",p)})},z.rangePlot=function(f,x,v){i(f,x),a(f,x,v),T.style(f)},z.toSVG=function(f){var x=f._fullLayout._glimages,v=k.select(f).selectAll(".svg-container");v.filter(function(g,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,y=g.toDataURL("image/png");x.append("svg:image").attr({xmlns:o.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},z.updateFx=e(4305).updateFx},13838:function(Q,z,e){"use strict";var k=e(41940),A=e(22399),l=e(79952).P,T=e(1426).extendFlat,b=e(44467).templatedArray,d=e(12663).descriptionWithDates,s=e(50606).ONEDAY,t=e(85555),o=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function i(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function v(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=5),_}function g(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=1),_}var y={valType:"color",dflt:A.defaultLine,editType:"ticks"},p={valType:"color",dflt:A.lightLine,editType:"ticks"};function m(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=1),_}var w=T({},l,{editType:"ticks"}),u={valType:"boolean",editType:"ticks"};Q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:A.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:k({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:i(),tick0:c,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:v(),tickwidth:g(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:k({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:d("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:d("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:A.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:u,gridcolor:p,gridwidth:m(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:A.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:A.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:i("minor"),tick0:c,dtick:h,tickvals:f,ticks:x,ticklen:v("minor"),tickwidth:g("minor"),tickcolor:y,gridcolor:p,gridwidth:m("minor"),griddash:w,showgrid:u,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:k({editType:"ticks"})}}},86763:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(23469).isUnifiedHover,T=e(98212),b=e(44467),d=e(10820),s=e(13838),t=e(951),o=e(71453),r=e(99082),n=e(52830),a=e(41675),i=a.id2name,c=a.name2id,h=e(85555).AX_ID_PATTERN,f=e(73972),x=f.traceIs,v=f.getComponentMethod;function g(y,p,m){Array.isArray(y[p])?y[p].push(m):y[p]=[m]}Q.exports=function(y,p,m){var w,u,S=p.autotypenumbers,_={},E={},L={},C={},P={},I={},j={},R={},H={},F={};for(w=0;w<m.length;w++){var U=m[w];if(x(U,"cartesian")||x(U,"gl2d")){var B,N;if(U.xaxis)B=i(U.xaxis),g(_,B,U);else if(U.xaxes)for(u=0;u<U.xaxes.length;u++)g(_,i(U.xaxes[u]),U);if(U.yaxis)N=i(U.yaxis),g(_,N,U);else if(U.yaxes)for(u=0;u<U.yaxes.length;u++)g(_,i(U.yaxes[u]),U);"funnel"===U.type?"h"===U.orientation?(B&&(E[B]=!0),N&&(j[N]=!0)):N&&(L[N]=!0):"image"===U.type?(N&&(R[N]=!0),B&&(R[B]=!0)):(N&&(P[N]=!0,I[N]=!0),x(U,"carpet")&&("carpet"!==U.type||U._cheater)||B&&(C[B]=!0)),"carpet"===U.type&&U._cheater&&B&&(E[B]=!0),x(U,"2dMap")&&(H[B]=!0,H[N]=!0),x(U,"oriented")&&(F["h"===U.orientation?N:B]=!0)}}var J=p._subplots,Z=J.xaxis,V=J.yaxis,W=k.simpleMap(Z,i),X=k.simpleMap(V,i),K=W.concat(X),ne=A.background;Z.length&&V.length&&(ne=k.coerce(y,p,d,"plot_bgcolor"));var re,ae,le,pe,xe,ye=A.combine(ne,p.paper_bgcolor);function se(){xe._traceIndices=(_[re]||[]).map(function(Ct){return Ct._expandedIndex}),xe._annIndices=[],xe._shapeIndices=[],xe._selectionIndices=[],xe._imgIndices=[],xe._subplotsWith=[],xe._counterAxes=[],xe._name=xe._attr=re,xe._id=ae}function fe(Lt,Ct){return k.coerce(pe,xe,s,Lt,Ct)}function Ee(Lt,Ct){return k.coerce2(pe,xe,s,Lt,Ct)}function de(Lt){return"x"===Lt?V:Z}function we(Lt,Ct){for(var Ot="x"===Lt?W:X,Ht=[],It=0;It<Ot.length;It++){var Ge=Ot[It];Ge===Ct||(y[Ge]||{}).overlaying||Ht.push(c(Ge))}return Ht}var ke={x:de("x"),y:de("y")},Te=ke.x.concat(ke.y),$={},oe=[];function he(){var Lt=pe.matches;h.test(Lt)&&-1===Te.indexOf(Lt)&&($[Lt]=pe.type,oe=Object.keys($))}var me=T(y,p),Me=l(me);for(w=0;w<K.length;w++){ae=c(re=K[w]),le=re.charAt(0),k.isPlainObject(y[re])||(y[re]={}),pe=y[re],xe=b.newContainer(p,re,le+"axis"),se();var ze={hasMinor:!0,letter:le,font:p.font,outerTicks:H[re],showGrid:!F[re],data:_[re]||[],bgColor:ye,calendar:p.calendar,automargin:!0,visibleDflt:"x"===le&&!C[re]&&E[re]||"y"===le&&!P[re]&&L[re],reverseDflt:"y"===le&&(!I[re]&&j[re]||R[re]),autotypenumbersDflt:S,splomStash:((p._splomAxes||{})[le]||{})[ae]};fe("uirevision",p.uirevision),t(pe,xe,fe,ze),o(pe,xe,fe,ze,p);var ce=Me&&le===me.charAt(0),ge=Ee("spikecolor",Me?xe.color:void 0),_e=Ee("spikethickness",Me?1.5:void 0),De=Ee("spikedash",Me?"dot":void 0),He=Ee("spikemode",Me?"across":void 0),Ve=Ee("spikesnap");fe("showspikes",!!(ce||ge||_e||De||He||Ve))||(delete xe.spikecolor,delete xe.spikethickness,delete xe.spikedash,delete xe.spikemode,delete xe.spikesnap);var nt=i(pe.overlaying),tt=[0,1];if(void 0!==p[nt]){var at=i(p[nt].anchor);void 0!==p[at]&&(tt=p[at].domain)}n(pe,xe,fe,{letter:le,counterAxes:ke[le],overlayableAxes:we(le,re),grid:p.grid,overlayingDomain:tt}),fe("title.standoff"),he(),xe._input=pe}for(w=0;w<oe.length;){ae=oe[w++],le=(re=i(ae)).charAt(0),k.isPlainObject(y[re])||(y[re]={}),pe=y[re],xe=b.newContainer(p,re,le+"axis"),se();var dt={letter:le,font:p.font,outerTicks:H[re],showGrid:!F[re],data:[],bgColor:ye,calendar:p.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((p._splomAxes||{})[le]||{})[ae]};fe("uirevision",p.uirevision),xe.type=$[ae]||"linear",o(pe,xe,fe,dt,p),n(pe,xe,fe,{letter:le,counterAxes:ke[le],overlayableAxes:we(le,re),grid:p.grid}),fe("fixedrange"),he(),xe._input=pe}var wt=v("rangeslider","handleDefaults"),bt=v("rangeselector","handleDefaults");for(w=0;w<W.length;w++)pe=y[re=W[w]],xe=p[re],wt(y,p,re),"date"===xe.type&&bt(pe,xe,p,X,xe.calendar),fe("fixedrange");for(w=0;w<X.length;w++){pe=y[re=X[w]];var _t=p[i((xe=p[re]).anchor)];fe("fixedrange",v("rangeslider","isVisible")(_t))}r.handleDefaults(y,p,{axIds:Te.concat(oe).sort(a.idSort),axHasImage:R})}},92128:function(Q,z,e){"use strict";var k=e(84267).mix,A=e(22399),l=e(71828);Q.exports=function(T,b,d,s){var t=(s=s||{}).dfltColor;function o(y,p){return l.coerce2(T,b,s.attributes,y,p)}var r=o("linecolor",t),n=o("linewidth");d("showline",s.showLine||!!r||!!n)||(delete b.linecolor,delete b.linewidth);var a=o("gridcolor",k(t,s.bgColor,s.blend||A.lightFraction).toRgbString()),i=o("gridwidth"),c=o("griddash");if(d("showgrid",s.showGrid||!!a||!!i||!!c)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var h=o("minor.gridcolor",k(b.gridcolor,s.bgColor,67).toRgbString()),f=o("minor.gridwidth",b.gridwidth||1),x=o("minor.griddash",b.griddash||"solid");d("minor.showgrid",!!h||!!f||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var v=o("zerolinecolor",t),g=o("zerolinewidth");d("zeroline",s.showGrid||!!v||!!g)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},52830:function(Q,z,e){"use strict";var k=e(92770),A=e(71828);Q.exports=function(l,T,b,d){var s,t,o,r,n,a,i=d.counterAxes||[],c=d.overlayableAxes||[],h=d.letter,f=d.grid,x=d.overlayingDomain;f&&(s=f._anchors[T._id],(t=f._domains[h][f._axisMap[T._id]])&&(o=f[h+"side"].split(" ")[0],r=f.domain[h]["right"===o||"top"===o?1:0])),t=t||[0,1],s=s||(k(l.position)?"free":i[0]||"free"),o=o||("x"===h?"bottom":"left"),r=r||0,n=0,a=!1;var v=A.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:s}},"anchor"),g=A.coerce(l,T,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:o}},"side");"free"===v&&("y"===h&&(b("autoshift")&&(r="left"===g?x[0]:x[1],a=!T.automargin||T.automargin,n="left"===g?-3:3),b("shift",n)),b("position",r)),b("automargin",a);var y=!1;if(c.length&&(y=A.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!y){var p=b("domain",t);p[0]>p[1]-.000244140625&&(T.domain=t),A.noneOrAll(l.domain,T.domain,t),"sync"===T.tickmode&&(T.tickmode="auto")}return b("layer"),T}},89426:function(Q,z,e){"use strict";var k=e(59652);Q.exports=function(A,l,T,b,d){d||(d={});var s=d.tickSuffixDflt,t=k(A);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},42449:function(Q,z,e){"use strict";var k=e(18783).FROM_BL;Q.exports=function(A,l,T){void 0===T&&(T=k[A.constraintoward||"center"]);var b=[A.r2l(A.range[0]),A.r2l(A.range[1])],d=b[0]+(b[1]-b[0])*T;A.range=A._input.range=[A.l2r(d+(b[0]-d)*l),A.l2r(d+(b[1]-d)*l)],A.setScale()}},21994:function(Q,z,e){"use strict";var k=e(39898),A=e(84096).g0,l=e(71828),T=l.numberFormat,b=e(92770),d=l.cleanNumber,s=l.ms2DateTime,t=l.dateTime2ms,o=l.ensureNumber,r=l.isArrayOrTypedArray,n=e(50606),a=n.FP_SAFE,i=n.BADNUM,c=n.LOG_CLIP,h=n.ONEWEEK,f=n.ONEDAY,x=n.ONEHOUR,v=n.ONEMIN,g=n.ONESEC,y=e(41675),p=e(85555),m=p.HOUR_PATTERN,w=p.WEEKDAY_PATTERN;function u(_){return Math.pow(10,_)}function S(_){return null!=_}Q.exports=function(_,E){E=E||{};var L=_._id||"x",C=L.charAt(0);function P(K,ne){if(K>0)return Math.log(K)/Math.LN10;if(K<=0&&ne&&_.range&&2===_.range.length){var re=_.range[0],ae=_.range[1];return.5*(re+ae-2*c*Math.abs(re-ae))}return i}function I(K,ne,re,ae){if((ae||{}).msUTC&&b(K))return+K;var le=t(K,re||_.calendar);if(le===i){if(!b(K))return i;K=+K;var pe=Math.floor(10*l.mod(K+.05,1)),xe=Math.round(K-pe/10);le=t(new Date(xe))+pe/10}return le}function j(K,ne,re){return s(K,ne,re||_.calendar)}function R(K){return _._categories[Math.round(K)]}function H(K){if(S(K)){if(void 0===_._categoriesMap&&(_._categoriesMap={}),void 0!==_._categoriesMap[K])return _._categoriesMap[K];_._categories.push("number"==typeof K?String(K):K);var ne=_._categories.length-1;return _._categoriesMap[K]=ne,ne}return i}function F(K){if(_._categoriesMap)return _._categoriesMap[K]}function U(K){var ne=F(K);return void 0!==ne?ne:b(K)?+K:void 0}function B(K){return b(K)?+K:F(K)}function N(K,ne,re){return k.round(re+ne*K,2)}function J(K,ne,re){return(K-re)/ne}var Z=function(K){return b(K)?N(K,_._m,_._b):i},V=function(K){return J(K,_._m,_._b)};if(_.rangebreaks){var W="y"===C;Z=function(K){if(!b(K))return i;var ne=_._rangebreaks.length;if(!ne)return N(K,_._m,_._b);var re=W;_.range[0]>_.range[1]&&(re=!re);for(var ae=re?-1:1,le=ae*K,pe=0,xe=0;xe<ne;xe++){var ye=ae*_._rangebreaks[xe].min,se=ae*_._rangebreaks[xe].max;if(le<ye)break;if(!(le>se)){pe=le<(ye+se)/2?xe:xe+1;break}pe=xe+1}var fe=_._B[pe]||0;return isFinite(fe)?N(K,_._m2,fe):0},V=function(K){var ne=_._rangebreaks.length;if(!ne)return J(K,_._m,_._b);for(var re=0,ae=0;ae<ne&&!(K<_._rangebreaks[ae].pmin);ae++)K>_._rangebreaks[ae].pmax&&(re=ae+1);return J(K,_._m2,_._B[re])}}_.c2l="log"===_.type?P:o,_.l2c="log"===_.type?u:o,_.l2p=Z,_.p2l=V,_.c2p="log"===_.type?function(K,ne){return Z(P(K,ne))}:Z,_.p2c="log"===_.type?function(K){return u(V(K))}:V,-1!==["linear","-"].indexOf(_.type)?(_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=d,_.c2d=_.c2r=_.l2d=_.l2r=o,_.d2p=_.r2p=function(K){return _.l2p(d(K))},_.p2d=_.p2r=V,_.cleanPos=o):"log"===_.type?(_.d2r=_.d2l=function(K,ne){return P(d(K),ne)},_.r2d=_.r2c=function(K){return u(d(K))},_.d2c=_.r2l=d,_.c2d=_.l2r=o,_.c2r=P,_.l2d=u,_.d2p=function(K,ne){return _.l2p(_.d2r(K,ne))},_.p2d=function(K){return u(V(K))},_.r2p=function(K){return _.l2p(d(K))},_.p2r=V,_.cleanPos=o):"date"===_.type?(_.d2r=_.r2d=l.identity,_.d2c=_.r2c=_.d2l=_.r2l=I,_.c2d=_.c2r=_.l2d=_.l2r=j,_.d2p=_.r2p=function(K,ne,re){return _.l2p(I(K,0,re))},_.p2d=_.p2r=function(K,ne,re){return j(V(K),ne,re)},_.cleanPos=function(K){return l.cleanDate(K,i,_.calendar)}):"category"===_.type?(_.d2c=_.d2l=H,_.r2d=_.c2d=_.l2d=R,_.d2r=_.d2l_noadd=U,_.r2c=function(K){var ne=B(K);return void 0!==ne?ne:_.fraction2r(.5)},_.l2r=_.c2r=o,_.r2l=B,_.d2p=function(K){return _.l2p(_.r2c(K))},_.p2d=function(K){return R(V(K))},_.r2p=_.d2p,_.p2r=V,_.cleanPos=function(K){return"string"==typeof K&&""!==K?K:o(K)}):"multicategory"===_.type&&(_.r2d=_.c2d=_.l2d=R,_.d2r=_.d2l_noadd=U,_.r2c=function(K){var ne=U(K);return void 0!==ne?ne:_.fraction2r(.5)},_.r2c_just_indices=F,_.l2r=_.c2r=o,_.r2l=U,_.d2p=function(K){return _.l2p(_.r2c(K))},_.p2d=function(K){return R(V(K))},_.r2p=_.d2p,_.p2r=V,_.cleanPos=function(K){return Array.isArray(K)||"string"==typeof K&&""!==K?K:o(K)},_.setupMultiCategory=function(K){var ne,re,ae=_._traceIndices,le=_._matchGroup;if(le&&0===_._categories.length)for(var pe in le)if(pe!==L){var xe=E[y.id2name(pe)];ae=ae.concat(xe._traceIndices)}var ye=[[0,{}],[0,{}]],se=[];for(ne=0;ne<ae.length;ne++){var fe=K[ae[ne]];if(C in fe){var Ee=fe[C],de=fe._length||l.minRowLength(Ee);if(r(Ee[0])&&r(Ee[1]))for(re=0;re<de;re++){var we=Ee[0][re],ke=Ee[1][re];S(we)&&S(ke)&&(se.push([we,ke]),we in ye[0][1]||(ye[0][1][we]=ye[0][0]++),ke in ye[1][1]||(ye[1][1][ke]=ye[1][0]++))}}}for(se.sort(function(Te,$){var oe=ye[0][1],he=oe[Te[0]]-oe[$[0]];if(he)return he;var me=ye[1][1];return me[Te[1]]-me[$[1]]}),ne=0;ne<se.length;ne++)H(se[ne])}),_.fraction2r=function(K){var ne=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return _.l2r(ne+K*(re-ne))},_.r2fraction=function(K){var ne=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return(_.r2l(K)-ne)/(re-ne)},_.cleanRange=function(K,ne){ne||(ne={}),K||(K="range");var re,ae,le=l.nestedProperty(_,K).get();if(ae=(ae="date"===_.type?l.dfltRange(_.calendar):"y"===C?p.DFLTRANGEY:"realaxis"===_._name?[0,1]:ne.dfltRange||p.DFLTRANGEX).slice(),"tozero"!==_.rangemode&&"nonnegative"!==_.rangemode||(ae[0]=0),le&&2===le.length)for("date"!==_.type||_.autorange||(le[0]=l.cleanDate(le[0],i,_.calendar),le[1]=l.cleanDate(le[1],i,_.calendar)),re=0;re<2;re++)if("date"===_.type){if(!l.isDateTime(le[re],_.calendar)){_[K]=ae;break}if(_.r2l(le[0])===_.r2l(le[1])){var pe=l.constrain(_.r2l(le[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);le[0]=_.l2r(pe-1e3),le[1]=_.l2r(pe+1e3);break}}else{if(!b(le[re])){if(!b(le[1-re])){_[K]=ae;break}le[re]=le[1-re]*(re?10:.1)}if(le[re]<-a?le[re]=-a:le[re]>a&&(le[re]=a),le[0]===le[1]){var xe=Math.max(1,Math.abs(1e-6*le[0]));le[0]-=xe,le[1]+=xe}}else l.nestedProperty(_,K).set(ae)},_.setScale=function(K){var ne=E._size;if(_.overlaying){var re=y.getFromId({_fullLayout:E},_.overlaying);_.domain=re.domain}var ae=K&&_._r?"_r":"range",le=_.calendar;_.cleanRange(ae);var pe,xe,ye=_.r2l(_[ae][0],le),se=_.r2l(_[ae][1],le),fe="y"===C;if(fe?(_._offset=ne.t+(1-_.domain[1])*ne.h,_._length=ne.h*(_.domain[1]-_.domain[0]),_._m=_._length/(ye-se),_._b=-_._m*se):(_._offset=ne.l+_.domain[0]*ne.w,_._length=ne.w*(_.domain[1]-_.domain[0]),_._m=_._length/(se-ye),_._b=-_._m*ye),_._rangebreaks=[],_._lBreaks=0,_._m2=0,_._B=[],_.rangebreaks&&(_._rangebreaks=_.locateBreaks(Math.min(ye,se),Math.max(ye,se)),_._rangebreaks.length)){for(pe=0;pe<_._rangebreaks.length;pe++)xe=_._rangebreaks[pe],_._lBreaks+=Math.abs(xe.max-xe.min);var Ee=fe;ye>se&&(Ee=!Ee),Ee&&_._rangebreaks.reverse();var de=Ee?-1:1;for(_._m2=de*_._length/(Math.abs(se-ye)-_._lBreaks),_._B.push(-_._m2*(fe?se:ye)),pe=0;pe<_._rangebreaks.length;pe++)_._B.push(_._B[_._B.length-1]-de*_._m2*((xe=_._rangebreaks[pe]).max-xe.min));for(pe=0;pe<_._rangebreaks.length;pe++)(xe=_._rangebreaks[pe]).pmin=Z(xe.min),xe.pmax=Z(xe.max)}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},_.maskBreaks=function(K){var ne,re,ae,le,pe,xe=_.rangebreaks||[];xe._cachedPatterns||(xe._cachedPatterns=xe.map(function(we){return we.enabled&&we.bounds?l.simpleMap(we.bounds,we.pattern?d:_.d2c):null})),xe._cachedValues||(xe._cachedValues=xe.map(function(we){return we.enabled&&we.values?l.simpleMap(we.values,_.d2c).sort(l.sorterAsc):null}));for(var ye=0;ye<xe.length;ye++){var se=xe[ye];if(se.enabled)if(se.bounds){switch(re=(ne=xe._cachedPatterns[ye])[0],ae=ne[1],se.pattern){case w:le=(pe=new Date(K)).getUTCDay(),re>ae&&(ae+=7,le<re&&(le+=7));break;case m:le=(pe=new Date(K)).getUTCHours()+(pe.getUTCMinutes()/60+pe.getUTCSeconds()/3600+pe.getUTCMilliseconds()/36e5),re>ae&&(ae+=24,le<re&&(le+=24));break;case"":le=K}if(le>=re&&le<ae)return i}else for(var Ee=xe._cachedValues[ye],de=0;de<Ee.length;de++)if(ae=(re=Ee[de])+se.dvalue,K>=re&&K<ae)return i}return K},_.locateBreaks=function(K,ne){var re,ae,le,pe,xe=[];if(!_.rangebreaks)return xe;var ye=_.rangebreaks.slice().sort(function(me,Me){return me.pattern===w&&Me.pattern===m?-1:Me.pattern===w&&me.pattern===m?1:0}),se=function(me,Me){if((me=l.constrain(me,K,ne))!==(Me=l.constrain(Me,K,ne))){for(var Ie=!0,Pe=0;Pe<xe.length;Pe++){var ze=xe[Pe];me<ze.max&&Me>=ze.min&&(me<ze.min&&(ze.min=me),Me>ze.max&&(ze.max=Me),Ie=!1)}Ie&&xe.push({min:me,max:Me})}};for(re=0;re<ye.length;re++){var fe=ye[re];if(fe.enabled)if(fe.bounds){var Ee=K,de=ne;fe.pattern&&(Ee=Math.floor(Ee)),le=(ae=l.simpleMap(fe.bounds,fe.pattern?d:_.r2l))[0],pe=ae[1];var we,ke,Te=new Date(Ee);switch(fe.pattern){case w:ke=h,we=(pe-le+(pe<le?7:0))*f,Ee+=le*f-(Te.getUTCDay()*f+Te.getUTCHours()*x+Te.getUTCMinutes()*v+Te.getUTCSeconds()*g+Te.getUTCMilliseconds());break;case m:ke=f,we=(pe-le+(pe<le?24:0))*x,Ee+=le*x-(Te.getUTCHours()*x+Te.getUTCMinutes()*v+Te.getUTCSeconds()*g+Te.getUTCMilliseconds());break;default:Ee=Math.min(ae[0],ae[1]),we=ke=(de=Math.max(ae[0],ae[1]))-Ee}for(var $=Ee;$<de;$+=ke)se($,$+we)}else for(var oe=l.simpleMap(fe.values,_.d2c),he=0;he<oe.length;he++)se(le=oe[he],pe=le+fe.dvalue)}return xe.sort(function(me,Me){return me.min-Me.min}),xe},_.makeCalcdata=function(K,ne,re){var ae,le,pe,xe,ye=_.type,se="date"===ye&&K[ne+"calendar"];if(ne in K){if(ae=K[ne],xe=K._length||l.minRowLength(ae),l.isTypedArray(ae)&&("linear"===ye||"log"===ye)){if(xe===ae.length)return ae;if(ae.subarray)return ae.subarray(0,xe)}if("multicategory"===ye)return function(de,we){for(var ke=new Array(we),Te=0;Te<we;Te++)ke[Te]=F([(de[0]||[])[Te],(de[1]||[])[Te]]);return ke}(ae,xe);for(le=new Array(xe),pe=0;pe<xe;pe++)le[pe]=_.d2c(ae[pe],0,se,re)}else{var fe=ne+"0"in K?_.d2c(K[ne+"0"],0,se):0,Ee=K["d"+ne]?Number(K["d"+ne]):1;for(ae=K[{x:"y",y:"x"}[ne]],xe=K._length||ae.length,le=new Array(xe),pe=0;pe<xe;pe++)le[pe]=fe+pe*Ee}if(_.rangebreaks)for(pe=0;pe<xe;pe++)le[pe]=_.maskBreaks(le[pe]);return le},_.isValidRange=function(K){return Array.isArray(K)&&2===K.length&&b(_.r2l(K[0]))&&b(_.r2l(K[1]))},_.isPtWithinRange=function(K,ne){var re=_.c2l(K[C],null,ne),ae=_.r2l(_.range[0]),le=_.r2l(_.range[1]);return ae<le?ae<=re&&re<=le:le<=re&&re<=ae},_._emptyCategories=function(){_._categories=[],_._categoriesMap={}},_.clearCalc=function(){var K=_._matchGroup;if(K){var ne=null,re=null;for(var ae in K){var le=E[y.id2name(ae)];if(le._categories){ne=le._categories,re=le._categoriesMap;break}}ne&&re?(_._categories=ne,_._categoriesMap=re):_._emptyCategories()}else _._emptyCategories();if(_._initialCategories)for(var pe=0;pe<_._initialCategories.length;pe++)H(_._initialCategories[pe])},_.sortByInitialCategories=function(){var K=[];if(_._emptyCategories(),_._initialCategories)for(var ne=0;ne<_._initialCategories.length;ne++)H(_._initialCategories[ne]);K=K.concat(_._traceIndices);var re=_._matchGroup;for(var ae in re)if(L!==ae){var le=E[y.id2name(ae)];le._categories=_._categories,le._categoriesMap=_._categoriesMap,K=K.concat(le._traceIndices)}return K};var X=E._d3locale;"date"===_.type&&(_._dateFormat=X?X.timeFormat:A,_._extraFormat=E._extraFormat),_._separators=E.separators,_._numFormat=X?X.numberFormat:T,delete _._minDtick,delete _._forceTick0}},59652:function(Q){"use strict";Q.exports=function(z){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(k){return void 0!==z[k]});if(e.every(function(k){return z[k]===z[e[0]]})||1===e.length)return z[e[0]]}},96115:function(Q,z,e){"use strict";var k=e(71828),A=e(7901).contrast,l=e(13838),T=e(59652),b=e(85501);function d(s,t){function o(r,n){return k.coerce(s,t,l.tickformatstops,r,n)}o("enabled")&&(o("dtickrange"),o("value"))}Q.exports=function(s,t,o,r,n){n||(n={});var a=T(s);if(o("showticklabels")){var i=n.font||{},c=t.color,h=-1!==(t.ticklabelposition||"").indexOf("inside")?A(n.bgColor):c&&c!==l.color.dflt?c:i.color;if(k.coerceFont(o,"tickfont",{family:i.family,size:i.size,color:h}),n.noTicklabelstep||"multicategory"===r||"log"===r||o("ticklabelstep"),n.noAng||o("tickangle"),"category"!==r){var f=o("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:d}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||f||"date"===r||(o("showexponent",a),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},38701:function(Q,z,e){"use strict";var k=e(71828),A=e(13838);Q.exports=function(l,T,b,d){var s=d.isMinor,t=s?l.minor||{}:l,o=s?T.minor:T,r=s?A.minor:A,n=s?"minor.":"",a=k.coerce2(t,o,r,"ticklen",s?.6*(T.ticklen||5):void 0),i=k.coerce2(t,o,r,"tickwidth",s?T.tickwidth||1:void 0),c=k.coerce2(t,o,r,"tickcolor",(s?T.tickcolor:void 0)||o.color);b(n+"ticks",!s&&d.outerTicks||a||i||c?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26218:function(Q,z,e){"use strict";var k=e(66287),A=e(71828).isArrayOrTypedArray;Q.exports=function(l,T,b,d,s){s||(s={});var t=s.isMinor,o=t?l.minor||{}:l,r=t?T.minor:T,n=t?"minor.":"";function a(v){var g=o[v];return void 0!==g?g:(r._template||{})[v]}var i=a("tick0"),c=a("dtick"),h=a("tickvals"),f=b(n+"tickmode",A(h)?"array":c?"linear":"auto");if("auto"===f||"sync"===f)b(n+"nticks");else if("linear"===f){var x=r.dtick=k.dtick(c,d);r.tick0=k.tick0(i,d,T.calendar,x)}else"multicategory"!==d&&(void 0===b(n+"tickvals")?r.tickmode="auto":t||b("ticktext"))}},66847:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(71828),T=e(91424),b=e(89298);Q.exports=function(d,s,t,o){var r=d._fullLayout;if(0!==s.length){var n,a,i,c;o&&(n=o());var h=k.ease(t.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var v={},g=0;g<s.length;g++){var y=s[g],m=y.plotinfo.yaxis;y.xr0&&(v[y.plotinfo.xaxis._name+".range"]=y.xr0.slice()),y.yr0&&(v[m._name+".range"]=y.yr0.slice())}return A.call("relayout",d,v).then(function(){for(var w=0;w<s.length;w++)f(s[w].plotinfo)})}()}),a=Date.now(),c=window.requestAnimationFrame(function v(){i=Date.now();for(var g=Math.min(1,(i-a)/t.duration),y=h(g),p=0;p<s.length;p++)x(s[p],y);i-a>t.duration?(function(){for(var m={},w=0;w<s.length;w++){var u=s[w],_=u.plotinfo.yaxis;u.xr1&&(m[u.plotinfo.xaxis._name+".range"]=u.xr1.slice()),u.yr1&&(m[_._name+".range"]=u.yr1.slice())}n&&n(),A.call("relayout",d,m).then(function(){for(var E=0;E<s.length;E++)f(s[E].plotinfo)})}(),c=window.cancelAnimationFrame(v)):c=window.requestAnimationFrame(v)}),Promise.resolve()}function f(v){var g=v.xaxis,y=v.yaxis;r._defs.select("#"+v.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),v.plot.call(T.setTranslate,g._offset,y._offset).call(T.setScale,1,1);var p=v.plot.selectAll(".scatterlayer .trace");p.selectAll(".point").call(T.setPointGroupScale,1,1),p.selectAll(".textpoint").call(T.setTextPointsScale,1,1),p.call(T.hideOutsideRangePoints,v)}function x(v,g){var y=v.plotinfo,p=y.xaxis,m=y.yaxis,w=p._length,u=m._length,S=!!v.xr1,_=!!v.yr1,E=[];if(S){var L=l.simpleMap(v.xr0,p.r2l),C=l.simpleMap(v.xr1,p.r2l),P=L[1]-L[0],I=C[1]-C[0];E[0]=(L[0]*(1-g)+g*C[0]-L[0])/(L[1]-L[0])*w,E[2]=w*(1-g+g*I/P),p.range[0]=p.l2r(L[0]*(1-g)+g*C[0]),p.range[1]=p.l2r(L[1]*(1-g)+g*C[1])}else E[0]=0,E[2]=w;if(_){var j=l.simpleMap(v.yr0,m.r2l),R=l.simpleMap(v.yr1,m.r2l),H=j[1]-j[0],F=R[1]-R[0];E[1]=(j[1]*(1-g)+g*R[1]-j[1])/(j[0]-j[1])*u,E[3]=u*(1-g+g*F/H),m.range[0]=p.l2r(j[0]*(1-g)+g*R[0]),m.range[1]=m.l2r(j[1]*(1-g)+g*R[1])}else E[1]=0,E[3]=u;b.drawOne(d,p,{skipTitle:!0}),b.drawOne(d,m,{skipTitle:!0}),b.redrawComponents(d,[p._id,m._id]);var U=S?w/E[2]:1,B=_?u/E[3]:1,W=p._offset-(S?E[0]/E[2]*w:0),X=m._offset-(_?E[1]/E[3]*u:0);y.clipRect.call(T.setTranslate,S?E[0]:0,_?E[1]:0).call(T.setScale,1/U,1/B),y.plot.call(T.setTranslate,W,X).call(T.setScale,U,B),T.setPointGroupScale(y.zoomScalePts,1/U,1/B),T.setTextPointsScale(y.zoomScaleTxt,1/U,1/B)}b.redrawComponents(d)}},951:function(Q,z,e){"use strict";var k=e(73972).traceIs,A=e(4322);function l(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,d){var s=l(b),t=k(b,"box-violin"),o=k(b._fullInput||{},"candlestick");return t&&!o&&d===s&&void 0===b[s]&&void 0===b[s+"0"]}Q.exports=function(b,d,s,t){s("autotypenumbers",t.autotypenumbersDflt),"-"===s("type",(t.splomStash||{}).type)&&(function(o,r){if("-"===o.type){var n,a=o._id,i=a.charAt(0);-1!==a.indexOf("scene")&&(a=i);var c=function(m,w,u){for(var S=0;S<m.length;S++){var _=m[S];if("splom"===_.type&&_._length>0&&(_["_"+u+"axes"]||{})[w]||(_[u+"axis"]||u)===w&&(T(_,u)||(_[u]||[]).length||_[u+"0"]))return _}}(r,a,i);if(c)if("histogram"!==c.type||i!=={v:"y",h:"x"}[c.orientation||"v"]){var h=i+"calendar",f=c[h],x={noMultiCategory:!k(c,"cartesian")||k(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&i==={h:"x",v:"y"}[c.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=o.autotypenumbers,T(c,i)){var v=l(c),g=[];for(n=0;n<r.length;n++){var y=r[n];k(y,"box-violin")&&(y[i+"axis"]||i)===a&&(g.push(void 0!==y[v]?y[v][0]:void 0!==y.name?y.name:"text"),y[h]!==f&&(f=void 0))}o.type=A(g,f,x)}else if("splom"===c.type){var p=c.dimensions[c._axesDim[a]];p.visible&&(o.type=A(p.values,f,x))}else o.type=A(c[i]||[c[i+"0"]],f,x)}else o.type="linear"}}(d,t.data),"-"===d.type?d.type="linear":b.type=d.type)}},31137:function(Q,z,e){"use strict";var k=e(73972),A=e(71828);function l(s,t,o){var r,n,a,i=!1;if("data"===t.type)r=s._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=s._fullLayout}return n=A.nestedProperty(r,t.prop).get(),(a=o[t.type]=o[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(i=!0),a[t.prop]=n,{changed:i,value:n}}function T(s,t){var o=[],r=t[0],n={};if("string"==typeof r)n[r]=t[1];else{if(!A.isPlainObject(r))return o;n=r}return d(n,function(a,i,c){o.push({type:"layout",prop:a,value:c})},"",0),o}function b(s,t){var o,r,n,a,i=[];if(n=t[1],o=t[2],a={},"string"==typeof(r=t[0]))a[r]=n;else{if(!A.isPlainObject(r))return i;a=r,void 0===o&&(o=n)}return void 0===o&&(o=null),d(a,function(c,h,f){var x,v;if(Array.isArray(f)){v=f.slice();var g=Math.min(v.length,s.data.length);o&&(g=Math.min(g,o.length)),x=[];for(var y=0;y<g;y++)x[y]=o?o[y]:y}else v=f,x=o?o.slice():null;if(null===x)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(x)){if(!Array.isArray(v)){var p=v;v=[];for(var m=0;m<x.length;m++)v[m]=p}v.length=Math.min(x.length,v.length)}i.push({type:"data",prop:c,traces:x,value:v})},"",0),i}function d(s,t,o,r){Object.keys(s).forEach(function(n){var a=s[n];if("_"!==n[0]){var i=o+(r>0?".":"")+n;A.isPlainObject(a)?d(a,t,i,r+1):t(i,n,a)}})}z.manageCommandObserver=function(s,t,o,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var i=z.hasSimpleAPICommandBindings(s,o,n.lookupTable);if(t&&t._commandObserver){if(i)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(i){l(s,i,n.cache),n.check=function(){if(a){var f=l(s,i,n.cache);return f.changed&&r&&void 0!==n.lookupTable[f.value]&&(n.disable(),Promise.resolve(r({value:f.value,type:i.type,prop:i.prop,traces:i.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)s._internalOn(c[h],n.check);n.remove=function(){for(var f=0;f<c.length;f++)s._removeInternalListener(c[f],n.check)}}else A.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},z.hasSimpleAPICommandBindings=function(s,t,o){var r,n,a=t.length;for(r=0;r<a;r++){var i,c=t[r],h=c.method,f=c.args;if(Array.isArray(f)||(f=[]),!h)return!1;var x=z.computeAPICommandBindings(s,h,f);if(1!==x.length)return!1;if(n){if((i=x[0]).type!==n.type||i.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(i.traces))return!1;i.traces.sort();for(var v=0;v<n.traces.length;v++)if(n.traces[v]!==i.traces[v])return!1}else if(i.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var g=(i=x[0]).value;if(Array.isArray(g)){if(1!==g.length)return!1;g=g[0]}o&&(o[g]=r)}return n},z.executeAPICommand=function(s,t,o){if("skip"===t)return Promise.resolve();var r=k.apiMethodRegistry[t],n=[s];Array.isArray(o)||(o=[]);for(var a=0;a<o.length;a++)n.push(o[a]);return r.apply(null,n).catch(function(i){return A.warn("API call to Plotly."+t+" rejected.",i),Promise.reject(i)})},z.computeAPICommandBindings=function(s,t,o){var r,a;switch(Array.isArray(o)||(o=[]),t){case"restyle":r=b(s,o);break;case"relayout":r=T(0,o);break;case"update":r=b(s,[o[0],o[2]]).concat(T(0,[o[1]]));break;case"animate":a=o,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},27670:function(Q,z,e){"use strict";var k=e(1426).extendFlat;z.Y=function(A,l){l=l||{};var T={valType:"info_array",editType:(A=A||{}).editType,items:[{valType:"number",min:0,max:1,editType:A.editType},{valType:"number",min:0,max:1,editType:A.editType}],dflt:[0,1]},b={x:k({},T,{}),y:k({},T,{}),editType:A.editType};return A.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:A.editType},b.column={valType:"integer",min:0,dflt:0,editType:A.editType}),b},z.c=function(A,l,T,b){var d=b&&b.x||[0,1],s=b&&b.y||[0,1],t=l.grid;if(t){var o=T("domain.column");void 0!==o&&(o<t.columns?d=t._domains.x[o]:delete A.domain.column);var r=T("domain.row");void 0!==r&&(r<t.rows?s=t._domains.y[r]:delete A.domain.row)}var n=T("domain.x",d),a=T("domain.y",s);n[0]<n[1]||(A.domain.x=d.slice()),a[0]<a[1]||(A.domain.y=s.slice())}},41940:function(Q){"use strict";Q.exports=function(z){var e=z.editType,k=z.colorEditType;void 0===k&&(k=e);var A={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:k},editType:e};return z.autoSize&&(A.size.dflt="auto"),z.autoColor&&(A.color.dflt="auto"),z.arrayOk&&(A.family.arrayOk=!0,A.size.arrayOk=!0,A.color.arrayOk=!0),A}},31391:function(Q){"use strict";Q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(Q,z){"use strict";z.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},z.axesNames=["lonaxis","lataxis"],z.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},z.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},z.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},z.clipPad=.001,z.precision=.1,z.landColor="#F0DC82",z.waterColor="#3399FF",z.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},z.sphereSVG={type:"Sphere"},z.fillLayers={ocean:1,land:1,lakes:1},z.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},z.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],z.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],z.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(Q,z,e){"use strict";var k=e(39898),A=e(27362),l=A.geoPath,T=A.geoDistance,b=e(65704),d=e(73972),s=e(71828),t=s.strTranslate,o=e(7901),r=e(91424),n=e(30211),a=e(74875),i=e(89298),c=e(71739).getAutoRange,h=e(28569),f=e(47322).prepSelect,x=e(47322).clearOutline,v=e(47322).selectOnClick,g=e(74455),y=e(78776),p=e(41327),m=e(90973),w=e(96892).zL;function u(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=u.prototype;function _(E,L){var C=y.clipPad,P=E[0]+C,I=E[1]-C,j=L[0]+C,R=L[1]-C;P>0&&I<0&&(I+=360);var H=(I-P)/4;return{type:"Polygon",coordinates:[[[P,j],[P,R],[P+H,R],[P+2*H,R],[P+3*H,R],[I,R],[I,j],[I-H,j],[I-2*H,j],[I-3*H,j],[P,j]]]}}Q.exports=function(E){return new u(E)},S.plot=function(E,L,C,P){var I=this;if(P)return I.update(E,L,!0);I._geoCalcData=E,I._fullLayout=L;var j=L[this.id],R=[],H=!1;for(var F in y.layerNameToAdjective)if("frame"!==F&&j["show"+F]){H=!0;break}for(var U=!1,B=0;B<E.length;B++){var N=E[0][0].trace;N._geo=I,N.locationmode&&(H=!0);var J=N.marker;if(J){var V=J.angleref;(J.angle||"north"===V||"previous"===V)&&(U=!0)}}if(this._hasMarkerAngles=U,H){var W=m.getTopojsonName(j);null!==I.topojson&&W===I.topojsonName||(I.topojsonName=W,void 0===PlotlyGeoAssets.topojson[I.topojsonName]&&R.push(I.fetchTopojson()))}R=R.concat(p.fetchTraceGeoData(E)),C.push(new Promise(function(X,K){Promise.all(R).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(E,L),X()}).catch(K)}))},S.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){k.json(L,function(I,j){if(I)return P(404===I.status?new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=j,C()})})},S.update=function(E,L,C){var P=L[this.id];this.hasChoropleth=!1;for(var I=0;I<E.length;I++){var j=E[I],R=j[0].trace;"choropleth"===R.type&&(this.hasChoropleth=!0),!0===R.visible&&R._length>0&&R._module.calcGeoJSON(j,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var F=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=F.selectAll("path"),this._render()},S.updateProjection=function(E,L){var C=this.graphDiv,P=L[this.id],I=L._size,j=P.domain,R=P.projection,H=P.lonaxis,F=P.lataxis,U=H._ax,B=F._ax,N=this.projection=function(Te){var $=Te.projection,oe=$.type,he=y.projNames[oe];he="geo"+s.titleCase(he);for(var me=(A[he]||b[he])(),Me=Te._isSatellite?180*Math.acos(1/$.distance)/Math.PI:Te._isClipped?y.lonaxisSpan[oe]/2:null,Ie=["center","rotate","parallels","clipExtent"],Pe=function(ge){return ge?me:[]},ze=0;ze<Ie.length;ze++){var ce=Ie[ze];"function"!=typeof me[ce]&&(me[ce]=Pe)}return me.isLonLatOverEdges=function(ge){if(null===me(ge))return!0;if(Me){var _e=me.rotate();return T(ge,[-_e[0],-_e[1]])>Me*Math.PI/180}return!1},me.getPath=function(){return l().projection(me)},me.getBounds=function(ge){return me.getPath().bounds(ge)},me.precision(y.precision),Te._isSatellite&&me.tilt($.tilt).distance($.distance),Me&&me.clipAngle(Me-y.clipPad),me}(P),J=[[I.l+I.w*j.x[0],I.t+I.h*(1-j.y[1])],[I.l+I.w*j.x[1],I.t+I.h*(1-j.y[0])]],Z=P.center||{},V=R.rotation||{},W=H.range||[],X=F.range||[];if(P.fitbounds){U._length=J[1][0]-J[0][0],B._length=J[1][1]-J[0][1],U.range=c(C,U),B.range=c(C,B);var K=(U.range[0]+U.range[1])/2,ne=(B.range[0]+B.range[1])/2;if(P._isScoped)Z={lon:K,lat:ne};else if(P._isClipped){Z={lon:K,lat:ne},V={lon:K,lat:ne,roll:V.roll};var re=R.type,ae=y.lonaxisSpan[re]/2||180,le=y.lataxisSpan[re]/2||90;W=[K-ae,K+ae],X=[ne-le,ne+le]}else Z={lon:K,lat:ne},V={lon:K,lat:V.lat,roll:V.roll}}N.center([Z.lon-V.lon,Z.lat-V.lat]).rotate([-V.lon,-V.lat,V.roll]).parallels(R.parallels);var pe=_(W,X);N.fitExtent(J,pe);var xe=this.bounds=N.getBounds(pe),ye=this.fitScale=N.scale(),se=N.translate();if(P.fitbounds){var fe=N.getBounds(_(U.range,B.range)),Ee=Math.min((xe[1][0]-xe[0][0])/(fe[1][0]-fe[0][0]),(xe[1][1]-xe[0][1])/(fe[1][1]-fe[0][1]));isFinite(Ee)?N.scale(Ee*ye):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else N.scale(R.scale*ye);var de=this.midPt=[(xe[0][0]+xe[1][0])/2,(xe[0][1]+xe[1][1])/2];if(N.translate([se[0]+(de[0]-se[0]),se[1]+(de[1]-se[1])]).clipExtent(xe),P._isAlbersUsa){var we=N([Z.lon,Z.lat]),ke=N.translate();N.translate([ke[0]-(we[0]-ke[0]),ke[1]-(we[1]-ke[1])])}},S.updateBaseLayers=function(E,L){var C=this,P=C.topojson,I=C.layers,j=C.basePaths;function R(N){return"lonaxis"===N||"lataxis"===N}function H(N){return Boolean(y.lineLayers[N])}function F(N){return Boolean(y.fillLayers[N])}var U=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(N){return H(N)||F(N)?L["show"+N]:!R(N)||L[N].showgrid}),B=C.framework.selectAll(".layer").data(U,String);B.exit().each(function(N){delete I[N],delete j[N],k.select(this).remove()}),B.enter().append("g").attr("class",function(N){return"layer "+N}).each(function(N){var J=I[N]=k.select(this);"bg"===N?C.bgRect=J.append("rect").style("pointer-events","all"):R(N)?j[N]=J.append("path").style("fill","none"):"backplot"===N?J.append("g").classed("choroplethlayer",!0):"frontplot"===N?J.append("g").classed("scatterlayer",!0):H(N)?j[N]=J.append("path").style("fill","none").style("stroke-miterlimit",2):F(N)&&(j[N]=J.append("path").style("stroke","none"))}),B.order(),B.each(function(N){var J=j[N],Z=y.layerNameToAdjective[N];"frame"===N?J.datum(y.sphereSVG):H(N)||F(N)?J.datum(w(P,P.objects[N])):R(N)&&J.datum(function(V,W,X){var K,ne,re,ae=W[V],le=y.scopeDefaults[W.scope];"lonaxis"===V?(K=le.lonaxisRange,ne=le.lataxisRange,re=function(ke,Te){return[ke,Te]}):"lataxis"===V&&(K=le.lataxisRange,ne=le.lonaxisRange,re=function(ke,Te){return[Te,ke]});var pe={type:"linear",range:[K[0],K[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};i.setConvert(pe,X);var xe=i.calcTicks(pe);W.isScoped||"lonaxis"!==V||xe.pop();for(var ye=xe.length,se=new Array(ye),fe=0;fe<ye;fe++)for(var Ee=xe[fe].x,de=se[fe]=[],we=ne[0];we<ne[1]+2.5;we+=2.5)de.push(re(Ee,we));return{type:"MultiLineString",coordinates:se}}(N,L,E)).call(o.stroke,L[N].gridcolor).call(r.dashLine,L[N].griddash,L[N].gridwidth),H(N)?J.call(o.stroke,L[Z+"color"]).call(r.dashLine,"",L[Z+"width"]):F(N)&&J.call(o.fill,L[Z+"color"])})},S.updateDims=function(E,L){var C=this.bounds,P=(L.framewidth||0)/2,I=C[0][0]-P,j=C[0][1]-P,R=C[1][0]-I+P,H=C[1][1]-j+P;r.setRect(this.clipRect,I,j,R,H),this.bgRect.call(r.setRect,I,j,R,H).call(o.fill,L.bgcolor),this.xaxis._offset=I,this.xaxis._length=R,this.yaxis._offset=j,this.yaxis._length=H},S.updateFx=function(E,L){var C=this,P=C.graphDiv,I=C.bgRect,j=E.dragmode,R=E.clickmode;if(!C.isStatic){var H={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(U,B){B.isRect?(U.range={})[C.id]=[F([B.xmin,B.ymin]),F([B.xmax,B.ymax])]:(U.lassoPoints={})[C.id]=B.map(F)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(U){2===U&&x(P)}};"pan"===j?(I.node().onmousedown=null,I.call(g(C,L)),I.on("dblclick.zoom",function(){var U=C.viewInitial,B={};for(var N in U)B[C.id+"."+N]=U[N];d.call("_guiRelayout",P,B),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||I.on("wheel.zoom",null)):"select"!==j&&"lasso"!==j||(I.on(".zoom",null),H.prepFn=function(U,B,N){f(U,B,N,H,j)},h.init(H)),I.on("mousemove",function(){var U=C.projection.invert(s.getPositionFromD3Event());if(!U)return h.unhover(P,k.event);C.xaxis.p2c=function(){return U[0]},C.yaxis.p2c=function(){return U[1]},n.hover(P,k.event,C.id)}),I.on("mouseout",function(){P._dragging||h.unhover(P,k.event)}),I.on("click",function(){"select"!==j&&"lasso"!==j&&(R.indexOf("select")>-1&&v(k.event,P,[C.xaxis],[C.yaxis],C.id,H),R.indexOf("event")>-1&&n.click(P,k.event))})}function F(U){return C.projection.invert([U[0]+C.xaxis._offset,U[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=k.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,L),E.project=function(I){var j=E.projection(I);return j?[j[0]-E.xaxis._offset,j[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(I){return E.project(I)[0]}},E.yaxis={_id:"y",c2p:function(I){return E.project(I)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var C=E.center||{},P=E.projection,I=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},s.extendFlat(this.viewInitial,E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":I.lon})},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,L=this.projection,C=L.getPath();function P(j){var R=L(j.lonlat);return R?t(R[0],R[1]):null}function I(j){return L.isLonLatOverEdges(j.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(j){return C(j.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",I).attr("transform",P)}},44622:function(Q,z,e){"use strict";var k=e(27659).AU,A=e(71828).counterRegex,l=e(69082),T="geo",b=A(T),d={};d.geo={valType:"subplotid",dflt:T,editType:"calc"},Q.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:d,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(s){for(var t=s._fullLayout,o=s.calcdata,r=t._subplots.geo,n=0;n<r.length;n++){var a=r[n],i=k(o,T,a),c=t[a]._subplot;c||(c=l({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=c),c.plot(i,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,o=t._subplots.geo,r=0;r<o.length;r++){var n=t[o[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,o,r){for(var n=r._subplots.geo||[],a=0;a<n.length;a++){var i=n[a],c=r[i]._subplot;!t[i]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},77519:function(Q,z,e){"use strict";var k=e(22399),A=e(27670).Y,l=e(79952).P,T=e(78776),b=e(30962).overrideAll,d=e(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:k.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};(Q.exports=b({domain:A({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:d(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:d(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:k.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:k.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:k.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:k.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:k.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(Q,z,e){"use strict";var k=e(71828),A=e(49119),l=e(27659).NG,T=e(78776),b=e(77519),d=T.axesNames;function s(t,o,r,n){var a=l(n.fullData,"geo",n.id).map(function(V){return V._expandedIndex}),i=r("resolution"),c=r("scope"),h=T.scopeDefaults[c],f=r("projection.type",h.projType),x=o._isAlbersUsa="albers usa"===f;x&&(c=o.scope="usa");var v=o._isScoped="world"!==c,g=o._isSatellite="satellite"===f,y=o._isConic=-1!==f.indexOf("conic")||"albers"===f,p=o._isClipped=!!T.lonaxisSpan[f];if(!1===t.visible){var m=k.extendDeep({},o._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),o._template=m}for(var w=r("visible"),u=0;u<d.length;u++){var S,_=d[u],E=[30,10][u];if(v)S=h[_+"Range"];else{var L=T[_+"Span"],C=(L[f]||L["*"])/2,P=r("projection.rotation."+_.substr(0,3),h.projRotate[u]);S=[P-C,P+C]}var I=r(_+".range",S);r(_+".tick0"),r(_+".dtick",E),r(_+".showgrid",!!w&&void 0)&&(r(_+".gridcolor"),r(_+".gridwidth"),r(_+".griddash")),o[_]._ax={type:"linear",_id:_.slice(0,3),_traceIndices:a,setScale:k.identity,c2l:k.identity,r2l:k.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var j=o.lonaxis.range,R=o.lataxis.range,H=j[0],F=j[1];H>0&&F<0&&(F+=360);var U,B,N,J=(H+F)/2;if(!x){var Z=v?h.projRotate:[J,0,0];U=r("projection.rotation.lon",Z[0]),r("projection.rotation.lat",Z[1]),r("projection.rotation.roll",Z[2]),r("showcoastlines",!v&&w)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!w&&void 0)&&r("oceancolor")}x?(B=-96.6,N=38.7):(B=v?J:U,N=(R[0]+R[1])/2),r("center.lon",B),r("center.lat",N),g&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!w&&void 0)&&r("landcolor"),r("showlakes",!!w&&void 0)&&r("lakecolor"),r("showrivers",!!w&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",v&&"usa"!==c&&w)&&(r("countrycolor"),r("countrywidth")),("usa"===c||"north america"===c&&50===i)&&(r("showsubunits",w),r("subunitcolor"),r("subunitwidth")),v||r("showframe",w)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete o.projection.scale,v?(delete o.center.lon,delete o.center.lat):p?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}Q.exports=function(t,o,r){A(t,o,r,{type:"geo",attributes:b,handleDefaults:s,fullData:r,partition:"y"})}},74455:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(73972),T=Math.PI/180,b=180/Math.PI,d={cursor:"pointer"},s={cursor:"auto"};function t(w,u){return k.behavior.zoom().translate(u.translate()).scale(u.scale())}function o(w,u,S){var _=w.id,E=w.graphDiv,L=E.layout,C=L[_],P=E._fullLayout,I=P[_],j={},R={};function H(F,U){j[_+"."+F]=A.nestedProperty(C,F).get(),l.call("_storeDirectGUIEdit",L,P._preGUI,j);var B=A.nestedProperty(I,F);B.get()!==U&&(B.set(U),A.nestedProperty(C,F).set(U),R[_+"."+F]=U)}S(H),H("projection.scale",u.scale()/w.fitScale),H("fitbounds",!1),E.emit("plotly_relayout",R)}function r(w,u){var S=t(0,u);function _(E){var L=u.invert(w.midPt);E("center.lon",L[0]),E("center.lat",L[1])}return S.on("zoomstart",function(){k.select(this).style(d)}).on("zoom",function(){u.scale(k.event.scale).translate(k.event.translate),w.render(!0);var E=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":E[0],"geo.center.lat":E[1]})}).on("zoomend",function(){k.select(this).style(s),o(w,u,_)}),S}function n(w,u){var S,_,E,L,C,P,I,j,R,H=t(0,u);function F(B){return u.invert(B)}function U(B){var N=u.rotate(),J=u.invert(w.midPt);B("projection.rotation.lon",-N[0]),B("center.lon",J[0]),B("center.lat",J[1])}return H.on("zoomstart",function(){k.select(this).style(d),S=k.mouse(this),_=u.rotate(),E=u.translate(),L=_,C=F(S)}).on("zoom",function(){if(P=k.mouse(this),function(J){var Z=F(J);if(!Z)return!0;var V=u(Z);return Math.abs(V[0]-J[0])>2||Math.abs(V[1]-J[1])>2}(S))return H.scale(u.scale()),void H.translate(u.translate());u.scale(k.event.scale),u.translate([E[0],k.event.translate[1]]),C?F(P)&&(j=F(P),u.rotate(I=[L[0]+(j[0]-C[0]),_[1],_[2]]),L=I):C=F(S=P),R=!0,w.render(!0);var B=u.rotate(),N=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":N[0],"geo.center.lat":N[1],"geo.projection.rotation.lon":-B[0]})}).on("zoomend",function(){k.select(this).style(s),R&&o(w,u,U)}),H}function a(w,u){var S,_={r:u.rotate(),k:u.scale()},E=t(0,u),L=function(F){for(var U=0,B=arguments.length,N=[];++U<B;)N.push(arguments[U]);var J=k.dispatch.apply(null,N);return J.of=function(Z,V){return function(W){var X;try{X=W.sourceEvent=k.event,W.target=F,k.event=W,J[W.type].apply(Z,V)}finally{k.event=X}}},J}(E,"zoomstart","zoom","zoomend"),C=0,P=E.on;function H(F){var U=u.rotate();F("projection.rotation.lon",-U[0]),F("projection.rotation.lat",-U[1])}return E.on("zoomstart",function(){k.select(this).style(d);var F=k.mouse(this),U=u.rotate(),B=U,N=u.translate(),J=function c(w){var u=.5*w[0]*T,S=.5*w[1]*T,_=.5*w[2]*T,E=Math.sin(u),L=Math.cos(u),C=Math.sin(S),P=Math.cos(S),I=Math.sin(_),j=Math.cos(_);return[L*P*j+E*C*I,E*P*j-L*C*I,L*C*j+E*P*I,L*P*I-E*C*j]}(U);S=i(u,F),P.call(E,"zoom",function(){var Z=k.mouse(this);if(u.scale(_.k=k.event.scale),S){if(i(u,Z)){u.rotate(U).translate(N);var V=i(u,Z),W=function f(w,u){if(w&&u){var S=function(C,P){return[C[1]*P[2]-C[2]*P[1],C[2]*P[0]-C[0]*P[2],C[0]*P[1]-C[1]*P[0]]}(w,u),_=Math.sqrt(m(S,S)),E=.5*Math.acos(Math.max(-1,Math.min(1,m(w,u)))),L=Math.sin(E)/_;return _&&[Math.cos(E),S[2]*L,-S[1]*L,S[0]*L]}}(S,V),X=function p(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*b,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*b]}(function h(w,u){var S=w[0],_=w[1],E=w[2],L=w[3],C=u[0],P=u[1],I=u[2],j=u[3];return[S*C-_*P-E*I-L*j,S*P+_*C+E*j-L*I,S*I-_*j+E*C+L*P,S*j+_*I-E*P+L*C]}(J,W)),K=_.r=function x(w,u,S){var _=y(u,2,w[0]);_=y(_,1,w[1]),_=y(_,0,w[2]-S[2]);var E,L,C=u[0],P=u[1],I=u[2],j=_[0],R=_[1],H=_[2],F=Math.atan2(P,C)*b,U=Math.sqrt(C*C+P*P);Math.abs(R)>U?(L=(R>0?90:-90)-F,E=0):(L=Math.asin(R/U)*b-F,E=Math.sqrt(U*U-R*R));var B=180-L-2*F,N=(Math.atan2(H,j)-Math.atan2(I,E))*b,J=(Math.atan2(H,j)-Math.atan2(I,-E))*b;return v(S[0],S[1],L,N)<=v(S[0],S[1],B,J)?[L,N,S[2]]:[B,J,S[2]]}(X,S,B);isFinite(K[0])&&isFinite(K[1])&&isFinite(K[2])||(K=B),u.rotate(K),B=K}}else S=i(u,F=Z);!function j(F){F({type:"zoom"})}(L.of(this,arguments))}),function I(F){C++||F({type:"zoomstart"})}(L.of(this,arguments))}).on("zoomend",function(){k.select(this).style(s),P.call(E,"zoom",null),function R(F){--C||F({type:"zoomend"})}(L.of(this,arguments)),o(w,u,H)}).on("zoom.redraw",function(){w.render(!0);var F=u.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.projection.rotation.lon":-F[0],"geo.projection.rotation.lat":-F[1]})}),k.rebind(E,L,"on")}function i(w,u){var _,E,L,C,S=w.invert(u);return S&&isFinite(S[0])&&isFinite(S[1])&&(E=(_=S)[0]*T,L=_[1]*T,[(C=Math.cos(L))*Math.cos(E),C*Math.sin(E),Math.sin(L)])}function v(w,u,S,_){var E=g(S-w),L=g(_-u);return Math.sqrt(E*E+L*L)}function g(w){return(w%360+540)%360-180}function y(w,u,S){var _=S*T,E=w.slice(),L=0===u?1:0,C=2===u?1:2,P=Math.cos(_),I=Math.sin(_);return E[L]=w[L]*P-w[C]*I,E[C]=w[C]*P+w[L]*I,E}function m(w,u){for(var S=0,_=0,E=w.length;_<E;++_)S+=w[_]*u[_];return S}Q.exports=function(w,u){return(u._isScoped?r:u._isClipped?a:n)(w,w.projection)}},27659:function(Q,z,e){"use strict";var k=e(73972),A=e(85555).SUBPLOT_PATTERN;z.AU=function(l,T,b){var d=k.subplotsRegistry[T];if(!d)return[];for(var s=d.attr,t=[],o=0;o<l.length;o++){var r=l[o];r[0].trace[s]===b&&t.push(r)}return t},z.a0=function(l,T){var b,d=[],s=[];if(!(b="string"==typeof T?k.getModule(T).plot:"function"==typeof T?T:T.plot))return[d,l];for(var t=0;t<l.length;t++){var o=l[t],r=o[0].trace;!0===r.visible&&0!==r._length&&(r._module.plot===b?d.push(o):s.push(o))}return[d,s]},z.NG=function(l,T,b){if(!k.subplotsRegistry[T])return[];var d,s,t,o=k.subplotsRegistry[T].attr,r=[];if("gl2d"===T){var n=b.match(A);s="x"+n[1],t="y"+n[2]}for(var a=0;a<l.length;a++)d=l[a],"gl2d"===T&&k.traceIs(d,"gl2d")?d[o[0]]===s&&d[o[1]]===t&&r.push(d):d[o]===b&&r.push(d);return r}},75071:function(Q,z,e){"use strict";var k=e(16825),A=e(1195),l=e(48956),T=e(85555),b=e(38520);function d(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}Q.exports=function(s){var t=s.mouseContainer,o=s.glplot,r=new d(t,o);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(i,c,h){var f,x,v=s.calcDataBox(),g=o.viewBox,y=r.lastPos[0],p=r.lastPos[1],m=T.MINDRAG*o.pixelRatio,w=T.MINZOOM*o.pixelRatio;function u(P,I,j){var R=Math.min(I,j),H=Math.max(I,j);R!==H?(v[P]=R,v[P+2]=H,r.dataBox=v,s.setRanges(v)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=o.pixelRatio,h=g[3]-g[1]-(h*=o.pixelRatio),s.fullLayout.dragmode){case"zoom":if(i){var S=c/(g[2]-g[0])*(v[2]-v[0])+v[0],_=h/(g[3]-g[1])*(v[3]-v[1])+v[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=_,r.dragStart[0]=c,r.dragStart[1]=h),r.boxEnd[0]=S,r.boxEnd[1]=_,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-c)<w,L=Math.abs(r.dragStart[1]-h)<w;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,I=s.xaxis._id,j=s.yaxis._id,R=0;R<P.length;R++)if(-1!==P[R][I]){if(-1!==P[R][j])return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{f=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var C=(v[3]-v[1])/(v[2]-v[0]);Math.abs(f*C)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(f)*C*(x>=0?1:-1),r.boxEnd[1]<v[1]?(r.boxEnd[1]=v[1],r.boxEnd[0]=r.boxStart[0]+(v[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>v[3]&&(r.boxEnd[1]=v[3],r.boxEnd[0]=r.boxStart[0]+(v[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/C*(f>=0?1:-1),r.boxEnd[0]<v[0]?(r.boxEnd[0]=v[0],r.boxEnd[1]=r.boxStart[1]+(v[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>v[2]&&(r.boxEnd[0]=v[2],r.boxEnd[1]=r.boxStart[1]+(v[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(x=r.boxStart[1]!==r.boxEnd[1],(f=r.boxStart[0]!==r.boxEnd[0])||x?(f&&(u(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),x&&(u(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,i?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=h),Math.abs(r.dragStart[0]-c)<m&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<m&&(h=r.dragStart[1]),x=(p-h)*(v[3]-v[1])/(o.viewBox[3]-o.viewBox[1]),v[0]+=f=(y-c)*(v[2]-v[0])/(o.viewBox[2]-o.viewBox[0]),v[2]+=f,v[1]+=x,v[3]+=x,s.setRanges(v),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=h}return r.mouseListener=k(t,a),t.addEventListener("touchstart",function(i){var c=l(i.changedTouches[0],t);a(0,c[0],c[1]),a(1,c[0],c[1]),i.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(i){i.preventDefault();var c=l(i.changedTouches[0],t);a(1,c[0],c[1]),i.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(i){a(0,r.lastPos[0],r.lastPos[1]),i.preventDefault()},!!b&&{passive:!1}),r.wheelListener=A(t,function(i,c){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),f=o.viewBox,x=r.lastPos[0],v=r.lastPos[1],g=Math.exp(5*c/(f[3]-f[1])),y=x/(f[2]-f[0])*(h[2]-h[0])+h[0],p=v/(f[3]-f[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-y)*g+y,h[2]=(h[2]-y)*g+y,h[1]=(h[1]-p)*g+p,h[3]=(h[3]-p)*g+p,s.setRanges(h),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function(Q,z,e){"use strict";var k=e(89298),A=e(78614);function l(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,b=["xaxis","yaxis"];T.merge=function(d){var s,t,o,r,n,a,i,c,h,f,x;for(this.titleEnable=!1,this.backgroundColor=A(d.plot_bgcolor),f=0;f<2;++f){var v=(s=b[f]).charAt(0);for(o=(t=d[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[f+x]=!1,this.labels[f+x]=o,this.labelColor[f+x]=A(t.title.font.color),this.labelFont[f+x]=t.title.font.family,this.labelSize[f+x]=t.title.font.size,this.labelPad[f+x]=this.getLabelPad(s,t),this.tickEnable[f+x]=!1,this.tickColor[f+x]=A((t.tickfont||{}).color),this.tickAngle[f+x]="auto"===t.tickangle?0:Math.PI*-t.tickangle/180,this.tickPad[f+x]=this.getTickPad(t),this.tickMarkLength[f+x]=0,this.tickMarkWidth[f+x]=t.tickwidth||0,this.tickMarkColor[f+x]=A(t.tickcolor),this.borderLineEnable[f+x]=!1,this.borderLineColor[f+x]=A(t.linecolor),this.borderLineWidth[f+x]=t.linewidth||0;i=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!i,a=this.hasAxisInAltrPos(s,t)&&!i,r=t.mirror||!1,c=i?-1!==String(r).indexOf("all"):!!r,h=i?"allticks"===r:-1!==String(r).indexOf("ticks"),n?this.labelEnable[f]=!0:a&&(this.labelEnable[f+2]=!0),n?this.tickEnable[f]=t.showticklabels:a&&(this.tickEnable[f+2]=t.showticklabels),(n||c)&&(this.borderLineEnable[f]=t.showline),(a||c)&&(this.borderLineEnable[f+2]=t.showline),(n||h)&&(this.tickMarkLength[f]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(t)),this.gridLineEnable[f]=t.showgrid,this.gridLineColor[f]=A(t.gridcolor),this.gridLineWidth[f]=t.gridwidth,this.zeroLineEnable[f]=t.zeroline,this.zeroLineColor[f]=A(t.zerolinecolor),this.zeroLineWidth[f]=t.zerolinewidth}},T.hasSharedAxis=function(d){var s=this.scene;return 0!==k.findSubplotsWithAxis(s.fullLayout._subplots.gl2d,d).indexOf(s.id)},T.hasAxisInDfltPos=function(d,s){var t=s.side;return"xaxis"===d?"bottom"===t:"yaxis"===d?"left"===t:void 0},T.hasAxisInAltrPos=function(d,s){var t=s.side;return"xaxis"===d?"top"===t:"yaxis"===d?"right"===t:void 0},T.getLabelPad=function(d,s){var t=1.5,o=s.title.font.size,r=s.showticklabels;return"xaxis"===d?"top"===s.side?o*(t+(r?1:0))-10:o*(t+(r?.5:0))-10:"yaxis"===d?"right"===s.side?10+o*(t+(r?1:.5)):10+o*(t+(r?.5:0)):void 0},T.getTickPad=function(d){return"outside"===d.ticks?10+d.ticklen:15},T.getTickMarkLength=function(d){if(!d.ticks)return 0;var s=d.ticklen;return"inside"===d.ticks?-s:s},Q.exports=function(d){return new l(d)}},4796:function(Q,z,e){"use strict";var k=e(30962).overrideAll,A=e(92918),l=e(10820),T=e(77922),b=e(85555),d=e(93612),s=e(528),t=e(27659).NG;z.name="gl2d",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=b.idRegex,z.attrRegex=b.attrRegex,z.attributes=e(89502),z.supplyLayoutDefaults=function(o,r,n){r._has("cartesian")||d.supplyLayoutDefaults(o,r,n)},z.layoutAttrOverrides=k(d.layoutAttributes,"plot","from-root"),z.baseLayoutAttrOverrides=k({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),z.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl2d,i=0;i<a.length;i++){var c=a[i],h=r._plots[c],f=t(n,"gl2d",c),x=h._scene2d;void 0===x&&(x=new A({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},r),h._scene2d=x),x.plot(f,o.calcdata,r,o.layout)}},z.clean=function(o,r,n,a){for(var i=a._subplots.gl2d||[],c=0;c<i.length;c++){var h=i[c],f=a._plots[h];f._scene2d&&0===t(o,"gl2d",h).length&&(f._scene2d.destroy(),delete a._plots[h])}d.clean.apply(this,arguments)},z.drawFramework=function(o){o._context.staticPlot||d.drawFramework(o)},z.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var i=r._plots[n[a]]._scene2d,c=i.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),i.destroy()}},z.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},92918:function(Q,z,e){"use strict";var k,A,l=e(73972),T=e(89298),b=e(30211),d=e(9330).gl_plot2d,s=e(9330).gl_spikes2d,t=e(9330).gl_select_box,o=e(40372),r=e(82961),n=e(75071),a=e(58617),i=e(99082),c=i.enforce,h=i.clean,f=e(71739).doAutoRange,x=e(64505),v=x.drawMode,g=x.selectMode,y=["xaxis","yaxis"],p=e(85555).SUBPLOT_PATTERN;function m(u,S){this.container=u.container,this.graphDiv=u.graphDiv,this.pixelRatio=u.plotGlPixelRatio||window.devicePixelRatio,this.id=u.id,this.staticPlot=!!u.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=d(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Q.exports=m;var w=m.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(A||(k=document.createElement("canvas"),A=o({canvas:k,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=k,this.gl=A}else{var u=this.container.querySelector(".gl-canvas-focus"),S=o({canvas:u,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=u,this.gl=S}var _=this.canvas;_.style.width="100%",_.style.height="100%",_.style.position="absolute",_.style.top="0px",_.style.left="0px",_.style["pointer-events"]="none",this.updateSize(_);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},w.toImage=function(u){u||(u="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(k),this.updateSize(this.canvas);var S=this.glplot.gl,_=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var L=new Uint8Array(_*E*4);S.readPixels(0,0,_,E,S.RGBA,S.UNSIGNED_BYTE,L);for(var C=0,P=E-1;C<P;++C,--P)for(var I=0;I<_;++I)for(var j=0;j<4;++j){var R=L[4*(_*C+I)+j];L[4*(_*C+I)+j]=L[4*(_*P+I)+j],L[4*(_*P+I)+j]=R}var H=document.createElement("canvas");H.width=_,H.height=E;var F,U=H.getContext("2d",{willReadFrequently:!0}),B=U.createImageData(_,E);switch(B.data.set(L),U.putImageData(B,0,0),u){case"jpeg":F=H.toDataURL("image/jpeg");break;case"webp":F=H.toDataURL("image/webp");break;default:F=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(k),F},w.updateSize=function(u){u||(u=this.canvas);var S=this.pixelRatio,_=this.fullLayout,L=_.height,C=0|Math.ceil(S*_.width),P=0|Math.ceil(S*L);return u.width===C&&u.height===P||(u.width=C,u.height=P),u},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var u=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var _=0;_<u[S].length;++_)u[S][_].text=u[S][_].text+"";return u},w.updateRefs=function(u){this.fullLayout=u;var S=this.id.match(p),E="yaxis"+S[2];this.xaxis=this.fullLayout["xaxis"+S[1]],this.yaxis=this.fullLayout[E]},w.relayoutCallback=function(){var u=this.graphDiv,S=this.xaxis,_=this.yaxis,E=u.layout,L={},C=L[S._name+".range"]=S.range.slice(),P=L[_._name+".range"]=_.range.slice();L[S._name+".autorange"]=S.autorange,L[_._name+".autorange"]=_.autorange,l.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,L);var I=E[S._name];I.range=C,I.autorange=S.autorange;var j=E[_._name];j.range=P,j.autorange=_.autorange,L.lastInputTime=this.camera.lastInputTime,u.emit("plotly_relayout",L)},w.cameraChanged=function(){var u=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(_,E){for(var L=0;L<2;++L){var C=_[L],P=E[L];if(C.length!==P.length)return!0;for(var I=0;I<C.length;++I)if(C[I].x!==P[I].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=u.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var u=this.graphDiv,S=this.fullLayout.annotations,_=0;_<S.length;_++){var E=S[_];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(u,_)}},w.destroy=function(){if(this.glplot){var u=this.traces;u&&Object.keys(u).map(function(S){u[S].dispose(),delete u[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(u,S,_){var E=this.glplot;this.updateRefs(_),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(u,S),this.updateFx(_.dragmode);var L=_.width,C=_.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(_),P.screenBox=[0,0,L,C];var I={_fullLayout:{_axisConstraintGroups:_._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:_._size}};h(I,this.xaxis),h(I,this.yaxis);var j,R,H=_._size,F=this.xaxis.domain,U=this.yaxis.domain;for(P.viewBox=[H.l+F[0]*H.w,H.b+U[0]*H.h,L-H.r-(1-F[1])*H.w,C-H.t-(1-U[1])*H.h],this.mouseContainer.style.width=H.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=H.h*(U[1]-U[0])+"px",this.mouseContainer.height=H.h*(U[1]-U[0]),this.mouseContainer.style.left=H.l+F[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-U[1])*H.h+"px",R=0;R<2;++R)(j=this[y[R]])._length=P.viewBox[R+2]-P.viewBox[R],f(this.graphDiv,j),j.setScale();c(I),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(_),E.update(P),this.glplot.draw()},w.calcDataBox=function(){var u=this.xaxis,S=this.yaxis,_=u.range,E=S.range,L=u.r2l,C=S.r2l;return[L(_[0]),C(E[0]),L(_[1]),C(E[1])]},w.setRanges=function(u){var S=this.xaxis,_=this.yaxis,E=S.l2r,L=_.l2r;S.range=[E(u[0]),E(u[2])],_.range=[L(u[1]),L(u[3])]},w.updateTraces=function(u,S){var _,E,L,C=Object.keys(this.traces);this.fullData=u;e:for(_=0;_<C.length;_++){var P=C[_],I=this.traces[P];for(E=0;E<u.length;E++)if((L=u[E]).uid===P&&L.type===I.type)continue e;I.dispose(),delete this.traces[P]}for(_=0;_<u.length;_++){var j=S[_],R=this.traces[(L=u[_]).uid];R?R.update(L,j):(R=L._module.plot(this,L,j),this.traces[L.uid]=R)}this.glplot.objects.sort(function(H,F){return H._trace.index-F._trace.index})},w.updateFx=function(u){g(u)||v(u)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===u?"move":"zoom"===u?"crosshair":null},w.emitPointAction=function(u,S){for(var _,E=u.trace.uid,L=u.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(_=this.fullData[C]);var P={x:u.traceCoord[0],y:u.traceCoord[1],curveNumber:_.index,pointNumber:L,data:_._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(P,_,L),this.graphDiv.emit(S,{points:[P]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var u=this.glplot,S=this.camera,_=S.mouseListener,E=1===this.lastButtonState&&0===_.buttons,L=this.fullLayout;this.lastButtonState=_.buttons,this.cameraChanged();var C,P=_.x*u.pixelRatio,I=this.canvas.height-u.pixelRatio*_.y;if(S.boxEnabled&&"zoom"===L.dragmode){this.selectBox.enabled=!0;for(var j=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],R=0;R<2;R++)S.boxStart[R]===S.boxEnd[R]&&(j[R]=u.dataBox[R],j[R+2]=u.dataBox[R+2]);u.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=L._size,B=(C=u.pick(P/u.pixelRatio+H.l+this.xaxis.domain[0]*H.w,I/u.pixelRatio-(H.t+(1-this.yaxis.domain[1])*H.h)))&&C.object._trace.handlePick(C);if(B&&E&&this.emitPointAction(B,"plotly_click"),C&&"skip"!==C.object._trace.hoverinfo&&L.hovermode&&B&&(!this.lastPickResult||this.lastPickResult.traceUid!==B.trace.uid||this.lastPickResult.dataCoord[0]!==B.dataCoord[0]||this.lastPickResult.dataCoord[1]!==B.dataCoord[1])){var N=B;this.lastPickResult={traceUid:B.trace?B.trace.uid:null,dataCoord:B.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),N.screenCoord=[((u.viewBox[2]-u.viewBox[0])*(C.dataCoord[0]-u.dataBox[0])/(u.dataBox[2]-u.dataBox[0])+u.viewBox[0])/u.pixelRatio,(this.canvas.height-(u.viewBox[3]-u.viewBox[1])*(C.dataCoord[1]-u.dataBox[1])/(u.dataBox[3]-u.dataBox[1])-u.viewBox[1])/u.pixelRatio],this.emitPointAction(B,"plotly_hover");var J=this.fullData[N.trace.index]||{},Z=N.pointIndex,V=b.castHoverinfo(J,L,Z);if(V&&"all"!==V){var W=V.split("+");-1===W.indexOf("x")&&(N.traceCoord[0]=void 0),-1===W.indexOf("y")&&(N.traceCoord[1]=void 0),-1===W.indexOf("z")&&(N.traceCoord[2]=void 0),-1===W.indexOf("text")&&(N.textLabel=void 0),-1===W.indexOf("name")&&(N.name=void 0)}b.loneHover({x:N.screenCoord[0],y:N.screenCoord[1],xLabel:this.hoverFormatter("xaxis",N.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",N.traceCoord[1]),zLabel:N.traceCoord[2],text:N.textLabel,name:N.name,color:b.castHoverOption(J,Z,"bgcolor")||N.color,borderColor:b.castHoverOption(J,Z,"bordercolor"),fontFamily:b.castHoverOption(J,Z,"font.family"),fontSize:b.castHoverOption(J,Z,"font.size"),fontColor:b.castHoverOption(J,Z,"font.color"),nameLength:b.castHoverOption(J,Z,"namelength"),textAlign:b.castHoverOption(J,Z,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),u.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},w.hoverFormatter=function(u,S){if(void 0!==S){var _=this[u];return T.tickText(_,_.c2l(S),"hover").text}}},58547:function(Q,z,e){"use strict";var k=e(30962).overrideAll,A=e(528),l=e(33539),T=e(27659).NG,b=e(71828),d=e(77922),s="gl3d",t="scene";z.name=s,z.attr=t,z.idRoot=t,z.idRegex=z.attrRegex=b.counterRegex("scene"),z.attributes=e(59084),z.layoutAttributes=e(65500),z.baseLayoutAttrOverrides=k({hoverlabel:A.hoverlabel},"plot","nested"),z.supplyLayoutDefaults=e(24682),z.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl3d,i=0;i<a.length;i++){var c=a[i],h=T(n,s,c),f=r[c],x=f.camera,v=f._scene;v||(v=new l({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:x},r),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),v.plot(h,r,o.layout)}},z.clean=function(o,r,n,a){for(var i=a._subplots.gl3d||[],c=0;c<i.length;c++){var h=i[c];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},z.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=r._size,i=0;i<n.length;i++){var c=r[n[i]],h=c.domain,f=c._scene,x=f.toImage("png");r._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":x,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),f.destroy()}},z.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var r=o.substr(5);return"1"===r&&(r=""),t+r}},z.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function(Q){"use strict";Q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(Q,z,e){"use strict";var k=e(7901),A=e(13838),l=e(1426).extendFlat,T=e(30962).overrideAll;Q.exports=T({visible:A.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:k.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:A.color,categoryorder:A.categoryorder,categoryarray:A.categoryarray,title:{text:A.title.text,font:A.title.font},type:l({},A.type,{values:["-","linear","log","date","category"]}),autotypenumbers:A.autotypenumbers,autorange:A.autorange,rangemode:A.rangemode,range:l({},A.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,mirror:A.mirror,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,showticklabels:A.showticklabels,tickfont:A.tickfont,tickangle:A.tickangle,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickformat:A.tickformat,tickformatstops:A.tickformatstops,hoverformat:A.hoverformat,showline:A.showline,linecolor:A.linecolor,linewidth:A.linewidth,showgrid:A.showgrid,gridcolor:l({},A.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:A.gridwidth,zeroline:A.zeroline,zerolinecolor:A.zerolinecolor,zerolinewidth:A.zerolinewidth,_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}},"plot","from-root")},3277:function(Q,z,e){"use strict";var k=e(84267).mix,A=e(71828),l=e(44467),T=e(77894),b=e(951),d=e(71453),s=["xaxis","yaxis","zaxis"];Q.exports=function(t,o,r){var n,a;function i(f,x){return A.coerce(n,a,T,f,x)}for(var c=0;c<s.length;c++){var h=s[c];n=t[h]||{},(a=l.newContainer(o,h))._id=h[0]+r.scene,a._name=h,b(n,a,i,r),d(n,a,i,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),i("gridcolor",k(a.color,r.bgColor,72.72727272727273).toRgbString()),i("title.text",h[0]),a.setScale=A.noop,i("showspikes")&&(i("spikesides"),i("spikethickness"),i("spikecolor",a.color)),i("showaxeslabels"),i("showbackground")&&i("backgroundcolor")}}},30422:function(Q,z,e){"use strict";var k=e(78614),A=e(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,d){for(var s=this,t=0;t<3;++t){var o=d[l[t]];o.visible?(s.labels[t]=b._meta?A.templateString(o.title.text,b._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(s.labelColor[t]=k(o.title.font.color)),o.title.font.family&&(s.labelFont[t]=o.title.font.family),o.title.font.size&&(s.labelSize[t]=o.title.font.size)),"showline"in o&&(s.lineEnable[t]=o.showline),"linecolor"in o&&(s.lineColor[t]=k(o.linecolor)),"linewidth"in o&&(s.lineWidth[t]=o.linewidth),"showgrid"in o&&(s.gridEnable[t]=o.showgrid),"gridcolor"in o&&(s.gridColor[t]=k(o.gridcolor)),"gridwidth"in o&&(s.gridWidth[t]=o.gridwidth),"log"===o.type?s.zeroEnable[t]=!1:"zeroline"in o&&(s.zeroEnable[t]=o.zeroline),"zerolinecolor"in o&&(s.zeroLineColor[t]=k(o.zerolinecolor)),"zerolinewidth"in o&&(s.zeroLineWidth[t]=o.zerolinewidth),s.lineTickEnable[t]=!(!("ticks"in o)||!o.ticks),"ticklen"in o&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=o.ticklen),"tickcolor"in o&&(s.lineTickColor[t]=k(o.tickcolor)),"tickwidth"in o&&(s.lineTickWidth[t]=o.tickwidth),"tickangle"in o&&(s.tickAngle[t]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(s.tickEnable[t]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(s.tickColor[t]=k(o.tickfont.color)),o.tickfont.family&&(s.tickFont[t]=o.tickfont.family),o.tickfont.size&&(s.tickSize[t]=o.tickfont.size)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):!0===o.mirror?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in o&&!1!==o.showbackground?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=k(o.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},Q.exports=function(b,d){var s=new T;return s.merge(b,d),s}},24682:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(73972),T=e(49119),b=e(3277),d=e(65500),s=e(27659).NG,t="gl3d";function o(r,n,a,i){for(var c=a("bgcolor"),h=A.combine(c,i.paper_bgcolor),f=["up","center","eye"],x=0;x<f.length;x++)a("camera."+f[x]+".x"),a("camera."+f[x]+".y"),a("camera."+f[x]+".z");a("camera.projection.type");var v=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),g=a("aspectmode",v?"manual":"auto");v||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===g&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(i.fullData,t,i.id);b(r,n,{font:i.font,scene:i.id,data:y,bgColor:h,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,i);var p=i.getDfltFromLayout("dragmode");if(!1!==p&&!p)if(p="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,w=r.camera.up.y,u=r.camera.up.z;0!==u&&(m&&w&&u?u/Math.sqrt(m*m+w*w+u*u)>.999&&(p="turntable"):p="turntable")}else p="turntable";a("dragmode",p),a("hovermode",i.getDfltFromLayout("hovermode"))}Q.exports=function(r,n,a){var i=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:d,handleDefaults:o,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(c){if(!i)return k.validate(r[c],d[c])?r[c]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function(Q,z,e){"use strict";var k=e(77894),A=e(27670).Y,l=e(1426).extendFlat,T=e(71828).counterRegex;function b(d,s,t){return{x:{valType:"number",dflt:d,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}Q.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(b(0,0,1),{}),center:l(b(0,0,0),{}),eye:l(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:A({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:k,yaxis:k,zaxis:k,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(Q,z,e){"use strict";var k=e(78614),A=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var b=0;b<3;++b){var d=T[A[b]];d.visible?(this.enabled[b]=d.showspikes,this.colors[b]=k(d.spikecolor),this.drawSides[b]=d.spikesides,this.lineWidth[b]=d.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},Q.exports=function(T){var b=new l;return b.merge(T),b}},96085:function(Q,z,e){"use strict";Q.exports=function(b){for(var d=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,o=[[],[],[]],r=0;r<3;++r){var n=t[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/b.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))o[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/b.dataScale[r],n.range[1]=s[r].hi/b.dataScale[r],n._m=1/(b.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if("auto"===n.tickmode){n.tickmode="linear";var i=n.nticks||A.constrain(n._length/40,4,9);k.autoTicks(n,Math.abs(n.range[1]-n.range[0])/i)}for(var c=k.calcTicks(n,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*b.dataScale[r],"date"===n.type&&(c[h].text=c[h].text.replace(/\<br\>/g," "));o[r]=c,n.tickmode=a}}for(d.ticks=o,r=0;r<3;++r)for(T[r]=.5*(b.glplot.bounds[0][r]+b.glplot.bounds[1][r]),h=0;h<2;++h)d.bounds[h][r]=b.glplot.bounds[h][r];b.contourLevels=function(f){for(var x=new Array(3),v=0;v<3;++v){for(var g=f[v],y=new Array(g.length),p=0;p<g.length;++p)y[p]=g[p].x;x[v]=y}return x}(o)};var k=e(89298),A=e(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function(Q){"use strict";function z(e,k){var A,l,T=[0,0,0,0];for(A=0;A<4;++A)for(l=0;l<4;++l)T[l]+=e[4*A+l]*k[A];return T}Q.exports=function(e,k){return z(e.projection,z(e.view,z(e.model,[k[0],k[1],k[2],1])))}},33539:function(Q,z,e){"use strict";var k,A,l=e(9330).gl_plot3d,T=l.createCamera,b=l.createScene,d=e(40372),s=e(38520),t=e(73972),o=e(71828),r=o.preserveDrawingBuffer(),n=e(89298),a=e(30211),i=e(78614),c=e(58617),h=e(63538),f=e(30422),x=e(13133),v=e(96085);function g(u,S){var _=document.createElement("div"),E=u.container;this.graphDiv=u.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none",_.appendChild(L),this.svgContainer=L,_.id=u.id,_.style.position="absolute",_.style.top=_.style.left="0px",_.style.width=_.style.height="100%",E.appendChild(_),this.fullLayout=S,this.id=u.id||"scene",this.fullSceneLayout=S[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(S,S[this.id]),this.spikeOptions=x(S[this.id]),this.container=_,this.staticMode=!!u.staticPlot,this.pixelRatio=this.pixelRatio||u.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=g.prototype;y.prepareOptions=function(){var u=this,S={canvas:u.canvas,gl:u.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:u.container,axes:u.axesOptions,spikes:u.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:u.camera,pixelRatio:u.pixelRatio};if(u.staticMode){if(!(A||(k=document.createElement("canvas"),A=d({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");S.gl=A,S.canvas=k}return S};var p=!0;y.tryCreatePlot=function(){var u=this,S=u.prepareOptions(),_=!0;try{u.glplot=b(S)}catch{if(u.staticMode||!p||r)_=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=S.glOptions.preserveDrawingBuffer=!0,u.glplot=b(S)}catch{r=S.glOptions.preserveDrawingBuffer=!1,_=!1}}}return p=!1,_},y.initializeGLCamera=function(){var u=this,S=u.fullSceneLayout.camera;u.camera=T(u.container,{center:[S.center.x,S.center.y,S.center.z],eye:[S.eye.x,S.eye.y,S.eye.z],up:[S.up.x,S.up.y,S.up.z],_ortho:"orthographic"===S.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var u=this;if(u.initializeGLCamera(),!u.tryCreatePlot())return c(u);u.traces={},u.make4thDimension();var S=u.graphDiv,_=S.layout,E=function(){var C={};return u.isCameraChanged(_)&&(C[u.id+".camera"]=u.getCamera()),u.isAspectChanged(_)&&(C[u.id+".aspectratio"]=u.glplot.getAspectratio(),"manual"!==_[u.id].aspectmode&&(u.fullSceneLayout.aspectmode=_[u.id].aspectmode=C[u.id+".aspectmode"]="manual")),C},L=function(C){if(!1!==C.fullSceneLayout.dragmode){var P=E();C.saveLayout(_),C.graphDiv.emit("plotly_relayout",P)}};return u.glplot.canvas&&(u.glplot.canvas.addEventListener("mouseup",function(){L(u)}),u.glplot.canvas.addEventListener("wheel",function(C){if(S._context._scrollZoom.gl3d){if(u.camera._ortho){var P=C.deltaX>C.deltaY?1.1:.9090909090909091,I=u.glplot.getAspectratio();u.glplot.setAspectratio({x:P*I.x,y:P*I.y,z:P*I.z})}L(u)}},!!s&&{passive:!1}),u.glplot.canvas.addEventListener("mousemove",function(){if(!1!==u.fullSceneLayout.dragmode&&0!==u.camera.mouseListener.buttons){var C=E();u.graphDiv.emit("plotly_relayouting",C)}}),u.staticMode||u.glplot.canvas.addEventListener("webglcontextlost",function(C){S&&S.emit&&S.emit("plotly_webglcontextlost",{event:C,layer:u.id})},!1)),u.glplot.oncontextloss=function(){u.recoverContext()},u.glplot.onrender=function(){u.render()},!0},y.render=function(){var u,S=this,_=S.graphDiv,E=S.svgContainer,L=S.container.getBoundingClientRect();_._fullLayout._calcInverseTransform(_);var I=L.width*_._fullLayout._invScaleX,j=L.height*_._fullLayout._invScaleY;E.setAttributeNS(null,"viewBox","0 0 "+I+" "+j),E.setAttributeNS(null,"width",I),E.setAttributeNS(null,"height",j),v(S),S.glplot.axes.update(S.axesOptions);for(var R=Object.keys(S.traces),H=null,F=S.glplot.selection,U=0;U<R.length;++U)"skip"!==(u=S.traces[R[U]]).data.hoverinfo&&u.handlePick(F)&&(H=u),u.setContourLevels&&u.setContourLevels();function B(xe,ye,se){var fe=S.fullSceneLayout[xe+"axis"];return"log"!==fe.type&&(ye=fe.d2l(ye)),n.hoverLabelText(fe,ye,se)}if(null!==H){var J,N=h(S.glplot.cameraParams,F.dataCoordinate),Z=_._fullData[(u=H.data).index],V=F.index,W={xLabel:B("x",F.traceCoordinate[0],u.xhoverformat),yLabel:B("y",F.traceCoordinate[1],u.yhoverformat),zLabel:B("z",F.traceCoordinate[2],u.zhoverformat)},X=a.castHoverinfo(Z,S.fullLayout,V),K=(X||"").split("+"),ne=X&&"all"===X;Z.hovertemplate||ne||(-1===K.indexOf("x")&&(W.xLabel=void 0),-1===K.indexOf("y")&&(W.yLabel=void 0),-1===K.indexOf("z")&&(W.zLabel=void 0),-1===K.indexOf("text")&&(F.textLabel=void 0),-1===K.indexOf("name")&&(H.name=void 0));var re=[];"cone"===u.type||"streamtube"===u.type?(W.uLabel=B("x",F.traceCoordinate[3],u.uhoverformat),(ne||-1!==K.indexOf("u"))&&re.push("u: "+W.uLabel),W.vLabel=B("y",F.traceCoordinate[4],u.vhoverformat),(ne||-1!==K.indexOf("v"))&&re.push("v: "+W.vLabel),W.wLabel=B("z",F.traceCoordinate[5],u.whoverformat),(ne||-1!==K.indexOf("w"))&&re.push("w: "+W.wLabel),W.normLabel=F.traceCoordinate[6].toPrecision(3),(ne||-1!==K.indexOf("norm"))&&re.push("norm: "+W.normLabel),"streamtube"===u.type&&(W.divergenceLabel=F.traceCoordinate[7].toPrecision(3),(ne||-1!==K.indexOf("divergence"))&&re.push("divergence: "+W.divergenceLabel)),F.textLabel&&re.push(F.textLabel),J=re.join("<br>")):"isosurface"===u.type||"volume"===u.type?(W.valueLabel=n.hoverLabelText(S._mockAxis,S._mockAxis.d2l(F.traceCoordinate[3]),u.valuehoverformat),re.push("value: "+W.valueLabel),F.textLabel&&re.push(F.textLabel),J=re.join("<br>")):J=F.textLabel;var ae={x:F.traceCoordinate[0],y:F.traceCoordinate[1],z:F.traceCoordinate[2],data:Z._input,fullData:Z,curveNumber:Z.index,pointNumber:V};a.appendArrayPointValue(ae,Z,V),u._module.eventData&&(ae=Z._module.eventData(ae,F,Z,{},V));var le={points:[ae]};if(S.fullSceneLayout.hovermode){var pe=[];a.loneHover({trace:Z,x:(.5+.5*N[0]/N[3])*I,y:(.5-.5*N[1]/N[3])*j,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:J,name:H.name,color:a.castHoverOption(Z,V,"bgcolor")||H.color,borderColor:a.castHoverOption(Z,V,"bordercolor"),fontFamily:a.castHoverOption(Z,V,"font.family"),fontSize:a.castHoverOption(Z,V,"font.size"),fontColor:a.castHoverOption(Z,V,"font.color"),nameLength:a.castHoverOption(Z,V,"namelength"),textAlign:a.castHoverOption(Z,V,"align"),hovertemplate:o.castOption(Z,V,"hovertemplate"),hovertemplateLabels:o.extendFlat({},ae,W),eventData:[ae]},{container:E,gd:_,inOut_bbox:pe}),ae.bbox=pe[0]}_.emit(F.buttons&&F.distance<5?"plotly_click":"plotly_hover",le),this.oldEventData=le}else a.loneUnhover(E),this.oldEventData&&_.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;S.drawAnnotations(S)},y.recoverContext=function(){var u=this;u.glplot.dispose();var S=function(){u.glplot.gl.isContextLost()?requestAnimationFrame(S):u.initializeGLPlot()?u.plot.apply(u,u.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(S)};var m=["xaxis","yaxis","zaxis"];function w(u,S,_){for(var E=u.fullSceneLayout,L=0;L<3;L++){var C=m[L],P=C.charAt(0),I=E[C],j=S[P],R=S[P+"calendar"],H=S["_"+P+"length"];if(o.isArrayOrTypedArray(j))for(var F,U=0;U<(H||j.length);U++)if(o.isArrayOrTypedArray(j[U]))for(var B=0;B<j[U].length;++B)F=I.d2l(j[U][B],0,R),!isNaN(F)&&isFinite(F)&&(_[0][L]=Math.min(_[0][L],F),_[1][L]=Math.max(_[1][L],F));else F=I.d2l(j[U],0,R),!isNaN(F)&&isFinite(F)&&(_[0][L]=Math.min(_[0][L],F),_[1][L]=Math.max(_[1][L],F));else _[0][L]=Math.min(_[0][L],0),_[1][L]=Math.max(_[1][L],H-1)}}y.plot=function(u,S,_){var E=this;if(E.plotArgs=[u,S,_],!E.glplot.contextLost){var L,C,P,I,j,R,H=S[E.id],F=_[E.id];E.fullLayout=S,E.fullSceneLayout=H,E.axesOptions.merge(S,H),E.spikeOptions.merge(H),E.setViewport(H),E.updateFx(H.dragmode,H.hovermode),E.camera.enableWheel=E.graphDiv._context._scrollZoom.gl3d,E.glplot.setClearColor(i(H.bgcolor)),E.setConvert(j),u?Array.isArray(u)||(u=[u]):u=[];var U=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(P=0;P<u.length;++P)!0===(L=u[P]).visible&&0!==L._length&&w(this,L,U);!function(he,me){for(var Me=he.fullSceneLayout,Ie=Me.annotations||[],Pe=0;Pe<3;Pe++)for(var ze=m[Pe],ce=ze.charAt(0),ge=Me[ze],_e=0;_e<Ie.length;_e++){var De=Ie[_e];if(De.visible){var He=ge.r2l(De[ce]);!isNaN(He)&&isFinite(He)&&(me[0][Pe]=Math.min(me[0][Pe],He),me[1][Pe]=Math.max(me[1][Pe],He))}}}(this,U);var B=[1,1,1];for(I=0;I<3;++I)B[I]=U[1][I]===U[0][I]?1:1/(U[1][I]-U[0][I]);for(E.dataScale=B,E.convertAnnotations(this),P=0;P<u.length;++P)!0===(L=u[P]).visible&&0!==L._length&&((C=E.traces[L.uid])?C.data.type===L.type?C.update(L):(C.dispose(),C=L._module.plot(this,L),E.traces[L.uid]=C):(C=L._module.plot(this,L),E.traces[L.uid]=C),C.name=L.name);var N=Object.keys(E.traces);e:for(P=0;P<N.length;++P){for(I=0;I<u.length;++I)if(u[I].uid===N[P]&&!0===u[I].visible&&0!==u[I]._length)continue e;(C=E.traces[N[P]]).dispose(),delete E.traces[N[P]]}E.glplot.objects.sort(function(he,me){return he._trace.data.index-me._trace.data.index});var J,Z=[[0,0,0],[0,0,0]],V=[],W={};for(P=0;P<3;++P){if((R=(j=H[m[P]]).type)in W?(W[R].acc*=B[P],W[R].count+=1):W[R]={acc:B[P],count:1},j.autorange){Z[0][P]=1/0,Z[1][P]=-1/0;var X=E.glplot.objects,K=E.fullSceneLayout.annotations||[],ne=j._name.charAt(0);for(I=0;I<X.length;I++){var re=X[I],ae=re.bounds,le=re._trace.data._pad||0;Z[0][P]="ErrorBars"===re.constructor.name&&j._lowerLogErrorBound?Math.min(Z[0][P],j._lowerLogErrorBound):Math.min(Z[0][P],ae[0][P]/B[P]-le),Z[1][P]=Math.max(Z[1][P],ae[1][P]/B[P]+le)}for(I=0;I<K.length;I++){var pe=K[I];if(pe.visible){var xe=j.r2l(pe[ne]);Z[0][P]=Math.min(Z[0][P],xe),Z[1][P]=Math.max(Z[1][P],xe)}}if("rangemode"in j&&"tozero"===j.rangemode&&(Z[0][P]=Math.min(Z[0][P],0),Z[1][P]=Math.max(Z[1][P],0)),Z[0][P]>Z[1][P])Z[0][P]=-1,Z[1][P]=1;else{var ye=Z[1][P]-Z[0][P];Z[0][P]-=ye/32,Z[1][P]+=ye/32}if("reversed"===j.autorange){var se=Z[0][P];Z[0][P]=Z[1][P],Z[1][P]=se}}else{var fe=j.range;Z[0][P]=j.r2l(fe[0]),Z[1][P]=j.r2l(fe[1])}Z[0][P]===Z[1][P]&&(Z[0][P]-=1,Z[1][P]+=1),V[P]=Z[1][P]-Z[0][P],E.glplot.setBounds(P,{min:Z[0][P]*B[P],max:Z[1][P]*B[P]})}var Ee=H.aspectmode;if("cube"===Ee)J=[1,1,1];else if("manual"===Ee){var de=H.aspectratio;J=[de.x,de.y,de.z]}else{if("auto"!==Ee&&"data"!==Ee)throw new Error("scene.js aspectRatio was not one of the enumerated types");var we=[1,1,1];for(P=0;P<3;++P){var ke=W[R=(j=H[m[P]]).type];we[P]=Math.pow(ke.acc,1/ke.count)/B[P]}J="data"===Ee||Math.max.apply(null,we)/Math.min.apply(null,we)<=4?we:[1,1,1]}H.aspectratio.x=F.aspectratio.x=J[0],H.aspectratio.y=F.aspectratio.y=J[1],H.aspectratio.z=F.aspectratio.z=J[2],E.glplot.setAspectratio(H.aspectratio),E.viewInitial.aspectratio||(E.viewInitial.aspectratio={x:H.aspectratio.x,y:H.aspectratio.y,z:H.aspectratio.z}),E.viewInitial.aspectmode||(E.viewInitial.aspectmode=H.aspectmode);var Te=H.domain||null,$=S._size||null;if(Te&&$){var oe=E.container.style;oe.position="absolute",oe.left=$.l+Te.x[0]*$.w+"px",oe.top=$.t+(1-Te.y[1])*$.h+"px",oe.width=$.w*(Te.x[1]-Te.x[0])+"px",oe.height=$.h*(Te.y[1]-Te.y[0])+"px"}E.glplot.redraw()}},y.destroy=function(){var u=this;u.glplot&&(u.camera.mouseListener.enabled=!1,u.container.removeEventListener("wheel",u.camera.wheelListener),u.camera=null,u.glplot.dispose(),u.container.parentNode.removeChild(u.container),u.glplot=null)},y.getCamera=function(){var u,S=this;return S.camera.view.recalcMatrix(S.camera.view.lastT()),{up:{x:(u=S.camera).up[0],y:u.up[1],z:u.up[2]},center:{x:u.center[0],y:u.center[1],z:u.center[2]},eye:{x:u.eye[0],y:u.eye[1],z:u.eye[2]},projection:{type:!0===u._ortho?"orthographic":"perspective"}}},y.setViewport=function(u){var S,_=this,E=u.camera;_.camera.lookAt.apply(this,[[(S=E).eye.x,S.eye.y,S.eye.z],[S.center.x,S.center.y,S.center.z],[S.up.x,S.up.y,S.up.z]]),_.glplot.setAspectratio(u.aspectratio),"orthographic"===E.projection.type!==_.camera._ortho&&(_.glplot.redraw(),_.glplot.clearRGBA(),_.glplot.dispose(),_.initializeGLPlot())},y.isCameraChanged=function(u){var j,R,H,F,U,S=this.getCamera(),_=o.nestedProperty(u,this.id+".camera").get(),L=!1;if(void 0===_)L=!0;else{for(var C=0;C<3;C++)for(var P=0;P<3;P++)if(H=P,void 0,void 0,U=["x","y","z"],!(j=_)[(F=["up","center","eye"])[R=C]]||S[F[R]][U[H]]!==j[F[R]][U[H]]){L=!0;break}(!_.projection||S.projection&&S.projection.type!==_.projection.type)&&(L=!0)}return L},y.isAspectChanged=function(u){var S=this.glplot.getAspectratio(),_=o.nestedProperty(u,this.id+".aspectratio").get();return void 0===_||_.x!==S.x||_.y!==S.y||_.z!==S.z},y.saveLayout=function(u){var S,_,E,L,C,P,I=this,j=I.fullLayout,R=I.isCameraChanged(u),H=I.isAspectChanged(u),F=R||H;if(F){var U={};R&&(S=I.getCamera(),E=(_=o.nestedProperty(u,I.id+".camera")).get(),U[I.id+".camera"]=E),H&&(L=I.glplot.getAspectratio(),P=(C=o.nestedProperty(u,I.id+".aspectratio")).get(),U[I.id+".aspectratio"]=P),t.call("_storeDirectGUIEdit",u,j._preGUI,U),R&&(_.set(S),o.nestedProperty(j,I.id+".camera").set(S)),H&&(C.set(L),o.nestedProperty(j,I.id+".aspectratio").set(L),I.glplot.redraw())}return F},y.updateFx=function(u,S){var _=this,E=_.camera;if(E)if("orbit"===u)E.mode="orbit",E.keyBindingMode="rotate";else if("turntable"===u){E.up=[0,0,1],E.mode="turntable",E.keyBindingMode="rotate";var L=_.graphDiv,C=L._fullLayout,P=_.fullSceneLayout.camera,I=P.up.x,j=P.up.y,R=P.up.z;if(R/Math.sqrt(I*I+j*j+R*R)<.999){var H=_.id+".camera.up",F={x:0,y:0,z:1},U={};U[H]=F;var B=L.layout;t.call("_storeDirectGUIEdit",B,C._preGUI,U),P.up=F,o.nestedProperty(B,H).set(F)}}else E.keyBindingMode=u;_.fullSceneLayout.hovermode=S},y.toImage=function(u){var S=this;u||(u="png"),S.staticMode&&S.container.appendChild(k),S.glplot.redraw();var _=S.glplot.gl,E=_.drawingBufferWidth,L=_.drawingBufferHeight;_.bindFramebuffer(_.FRAMEBUFFER,null);var C=new Uint8Array(E*L*4);_.readPixels(0,0,E,L,_.RGBA,_.UNSIGNED_BYTE,C),function(H,F,U){for(var B=0,N=U-1;B<N;++B,--N)for(var J=0;J<F;++J)for(var Z=0;Z<4;++Z){var V=4*(F*B+J)+Z,W=4*(F*N+J)+Z,X=H[V];H[V]=H[W],H[W]=X}}(C,E,L),function(H,F,U){for(var B=0;B<U;++B)for(var N=0;N<F;++N){var J=4*(F*B+N),Z=H[J+3];if(Z>0)for(var V=255/Z,W=0;W<3;++W)H[J+W]=Math.min(V*H[J+W],255)}}(C,E,L);var P=document.createElement("canvas");P.width=E,P.height=L;var I,j=P.getContext("2d",{willReadFrequently:!0}),R=j.createImageData(E,L);switch(R.data.set(C),j.putImageData(R,0,0),u){case"jpeg":I=P.toDataURL("image/jpeg");break;case"webp":I=P.toDataURL("image/webp");break;default:I=P.toDataURL("image/png")}return S.staticMode&&S.container.removeChild(k),I},y.setConvert=function(){for(var u=0;u<3;u++){var S=this.fullSceneLayout[m[u]];n.setConvert(S,this.fullLayout),S.setScale=o.noop}},y.make4thDimension=function(){var u=this,S=u.graphDiv._fullLayout;u._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(u._mockAxis,S)},Q.exports=g},90060:function(Q){"use strict";Q.exports=function(z,e,k,A){A=A||z.length;for(var l=new Array(A),T=0;T<A;T++)l[T]=[z[T],e[T],k[T]];return l}},10820:function(Q,z,e){"use strict";var k=e(41940),A=e(85594),l=e(22399),T=e(29241),b=e(53777),d=e(35025),s=e(1426).extendFlat,t=k({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=l.defaultLine,Q.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:k({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(d({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},A.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:k({editType:"layoutstyle"})}}},77734:function(Q,z,e){"use strict";var k=e(78607),A='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',A].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:A,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},d=k(b);Q.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:d,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",d.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){var T=A.split(" "),b=T[0],d=T[1],s=k.isArrayOrTypedArray(l)?k.mean(l):l,t=.5+s/100,o=1.5+s/100,r=["",""],n=[0,0];switch(b){case"top":r[0]="top",n[1]=-o;break;case"bottom":r[0]="bottom",n[1]=o}switch(d){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function(Q,z,e){"use strict";var k=e(44517),A=e(71828),l=A.strTranslate,T=A.strScale,b=e(27659).AU,d=e(77922),s=e(39898),t=e(91424),o=e(63893),r=e(10481),n="mapbox",a=z.constants=e(77734);function i(c){return"string"==typeof c&&(-1!==a.styleValuesMapbox.indexOf(c)||0===c.indexOf("mapbox://"))}z.name=n,z.attr="subplot",z.idRoot=n,z.idRegex=z.attrRegex=A.counterRegex(n),z.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},z.layoutAttributes=e(23585),z.supplyLayoutDefaults=e(77882),z.plot=function(c){var h=c._fullLayout,f=c.calcdata,x=h._subplots.mapbox;if(k.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var v=function(u,S){var _=u._fullLayout;if(""===u._context.mapboxAccessToken)return"";for(var E=[],L=[],C=!1,P=!1,I=0;I<S.length;I++){var j=_[S[I]],R=j.accesstoken;i(j.style)&&(R?A.pushUnique(E,R):(i(j._input.style)&&(A.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),R&&A.pushUnique(L,R)}if(P){var H=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw A.error(H),new Error(H)}return E.length?(E.length>1&&A.warn(a.multipleTokensErrorMsg),E[0]):(L.length&&A.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,x);k.accessToken=v;for(var g=0;g<x.length;g++){var y=x[g],p=b(f,n,y),m=h[y],w=m._subplot;w||(w=new r(c,y),h[y]._subplot=w),w.viewInitial||(w.viewInitial={center:A.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),w.plot(p,h,c._promises)}},z.clean=function(c,h,f,x){for(var v=x._subplots.mapbox||[],g=0;g<v.length;g++){var y=v[g];!h[y]&&x[y]._subplot&&x[y]._subplot.destroy()}},z.toSVG=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,x=h._size,v=0;v<f.length;v++){var g=h[f[v]],y=g.domain,p=g._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":p,x:x.l+x.w*y.x[0],y:x.t+x.h*(1-y.y[1]),width:x.w*(y.x[1]-y.x[0]),height:x.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(g._subplot.div);if(null!==m.select(".mapboxgl-ctrl-logo").node().offsetParent){var w=h._glimages.append("g");w.attr("transform",l(x.l+x.w*y.x[0]+10,x.t+x.h*(1-y.y[0])-31)),w.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),w.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),w.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),w.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var u=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),_=S.append("text");_.text(u).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":u});var E=t.bBox(_.node()),L=x.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=u.split("|").join("<br>");_.text(C).attr("data-unformatted",C).call(o.convertToTspans,c),E=t.bBox(_.node())}_.attr("transform",l(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var I=[x.l+x.w*y.x[1],x.t+x.h*(1-y.y[0])];S.attr("transform",l(I[0],I[1])+T(P))}},z.updateFx=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,x=0;x<f.length;x++)h[f[x]]._subplot.updateFx(h)}},67911:function(Q,z,e){"use strict";var k=e(71828),A=e(63893).sanitizeHTML,l=e(13056),T=e(77734);function b(o,r){this.subplot=o,this.uid=o.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var d=b.prototype;function s(o){if(!o.visible)return!1;var r=o.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if("string"!=typeof r[n]||0===r[n].length)return!1;return!0}return k.isPlainObject(r)||"string"==typeof r&&r.length>0}function t(o){var r={},n={};switch(o.type){case"circle":k.extendFlat(n,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":k.extendFlat(n,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":k.extendFlat(n,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var a=o.symbol,i=l(a.textposition,a.iconsize);k.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset,"symbol-placement":a.placement}),k.extendFlat(n,{"icon-color":o.color,"text-color":a.textfont.color,"text-opacity":o.opacity});break;case"raster":k.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:r,paint:n}}d.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=s(o)},d.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===o.sourcetype&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},d.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},d.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},d.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},d.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)},d.updateSource=function(o){var a,i,c,h,f,r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,s(o)){var n=(h=(a=o).source,f={type:c=a.sourcetype},"geojson"===c?i="data":"vector"===c?i="string"==typeof h?"url":"tiles":"raster"===c?(i="tiles",f.tileSize=256):"image"===c&&(i="url",f.coordinates=a.coordinates),f[i]=h,a.sourceattribution&&(f.attribution=A(a.sourceattribution)),f);r.addSource(this.idSource,n)}},d.findFollowingMapboxLayerId=function(o){if("traces"===o)for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if("string"==typeof a&&0===a.indexOf(T.traceLayerPrefix)){o=a;break}}return o},d.updateLayer=function(o){var r=this.subplot,n=t(o),a=this.lookupBelow(),i=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(o)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:n.layout,paint:n.paint},i),this.layerType=o.type,this.below=a},d.updateStyle=function(o){if(s(o)){var r=t(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},d.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},d.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},Q.exports=function(o,r,n){var a=new b(o,r);return a.update(n),a}},23585:function(Q,z,e){"use strict";var k=e(71828),A=e(7901).defaultLine,l=e(27670).Y,T=e(41940),b=e(82196).textposition,d=e(30962).overrideAll,s=e(44467).templatedArray,t=e(77734),o=T({});o.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(Q.exports=d({_arrayAttrRegexps:[k.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:A},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:A}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:o,textposition:k.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(Q,z,e){"use strict";var k=e(71828),A=e(49119),l=e(85501),T=e(23585);function b(s,t,o,r){o("accesstoken",r.accessToken),o("style"),o("center.lon"),o("center.lat"),o("zoom"),o("bearing"),o("pitch");var n=o("bounds.west"),a=o("bounds.east"),i=o("bounds.south"),c=o("bounds.north");void 0!==n&&void 0!==a&&void 0!==i&&void 0!==c||delete t.bounds,l(s,t,{name:"layers",handleItemDefaults:d}),t._input=s}function d(s,t){function o(c,h){return k.coerce(s,t,T.layers,c,h)}if(o("visible")){var r,n=o("sourcetype"),a="raster"===n||"image"===n;o("source"),o("sourceattribution"),"vector"===n&&o("sourcelayer"),"image"===n&&o("coordinates"),a&&(r="raster");var i=o("type",r);a&&"raster"!==i&&(i=t.type="raster",k.log("Source types *raster* and *image* must drawn *raster* layer type.")),o("below"),o("color"),o("opacity"),o("minzoom"),o("maxzoom"),"circle"===i&&o("circle.radius"),"line"===i&&(o("line.width"),o("line.dash")),"fill"===i&&o("fill.outlinecolor"),"symbol"===i&&(o("symbol.icon"),o("symbol.iconsize"),o("symbol.text"),k.coerceFont(o,"symbol.textfont"),o("symbol.textposition"),o("symbol.placement"))}}Q.exports=function(s,t,o){A(s,t,o,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function(Q,z,e){"use strict";var k=e(44517),A=e(71828),l=e(41327),T=e(73972),b=e(89298),d=e(28569),s=e(30211),t=e(64505),o=t.drawMode,r=t.selectMode,n=e(47322).prepSelect,a=e(47322).clearOutline,i=e(47322).clearSelectionsCache,c=e(47322).selectOnClick,h=e(77734),f=e(67911);function x(w,u){this.id=u,this.gd=w;var S=w._fullLayout,_=w._context;this.container=S._glcontainer.node(),this.isStatic=_.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=x.prototype;v.plot=function(w,u,S){var _,E=this;E.map&&u[E.id].accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),_=new Promise(E.map?function(C,P){E.updateMap(w,u,C,P)}:function(C,P){E.createMap(w,u,C,P)}),S.push(_)},v.createMap=function(w,u,S,_){var E=this,L=u[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var P=L.bounds,I=P?[[P.west,P.south],[P.east,P.north]]:null,j=E.map=new k.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new k.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",E.rejectOnError(_),E.isStatic||E.initFx(w,u);var R=[];R.push(new Promise(function(H){j.once("load",H)})),R=R.concat(l.fetchTraceGeoData(w)),Promise.all(R).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.updateMap=function(w,u,S,_){var E=this,L=E.map,C=u[this.id];E.rejectOnError(_);var P=[],I=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,L.setStyle(I.style),E.traceHash={},P.push(new Promise(function(j){L.once("styledata",j)}))),P=P.concat(l.fetchTraceGeoData(w)),Promise.all(P).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.fillBelowLookup=function(w,u){var S,_,E=u[this.id].layers,L=this.belowLookup={},C=!1;for(S=0;S<w.length;S++){var P=w[S][0].trace,I=P._module;"string"==typeof P.below?_=P.below:I.getBelow&&(_=I.getBelow(P,this)),""===_&&(C=!0),L["trace-"+P.uid]=_||""}for(S=0;S<E.length;S++){var j=E[S];L["layout-"+S]=_="string"==typeof j.below?j.below:C?"traces":""}var R,H,F={};for(R in L)F[_=L[R]]?F[_].push(R):F[_]=[R];for(_ in F){var U=F[_];if(U.length>1)for(S=0;S<U.length;S++)0===(R=U[S]).indexOf("trace-")?(H=R.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===R.indexOf("layout-")&&(H=R.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(w){var u={};return A.isPlainObject(w)?(u.id=w.id,u.style=w):"string"==typeof w?(u.id=w,u.style=-1!==h.styleValuesMapbox.indexOf(w)?p(w):h.stylesNonMapbox[w]?h.stylesNonMapbox[w]:w):(u.id=h.styleValueDflt,u.style=p(h.styleValueDflt)),u.transition={duration:0,delay:0},u}function p(w){return h.styleUrlPrefix+w+"-"+h.styleUrlSuffix}function m(w){return[w.lon,w.lat]}v.updateData=function(w){var u,S,_,E,L=this.traceHash,C=w.slice().sort(function(H,F){return g[H[0].trace.type]-g[F[0].trace.type]});for(_=0;_<C.length;_++){var P=C[_],I=!1;(u=L[(S=P[0].trace).uid])&&(u.type===S.type?(u.update(P),I=!0):u.dispose()),!I&&S._module&&(L[S.uid]=S._module.plot(this,P))}var j=Object.keys(L);e:for(_=0;_<j.length;_++){var R=j[_];for(E=0;E<w.length;E++)if(R===(S=w[E][0].trace).uid)continue e;(u=L[R]).dispose(),delete L[R]}},v.updateLayout=function(w){var u=this.map,S=w[this.id];this.dragging||this.wheeling||(u.setCenter(m(S.center)),u.setZoom(S.zoom),u.setBearing(S.bearing),u.setPitch(S.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?u.scrollZoom.enable():u.scrollZoom.disable()},v.resolveOnRender=function(w){var u=this.map;u.on("render",function S(){u.loaded()&&(u.off("render",S),setTimeout(w,10))})},v.rejectOnError=function(w){var u=this.map;function S(){w(new Error(h.mapOnErrorMsg))}u.once("error",S),u.once("style.error",S),u.once("source.error",S),u.once("tile.error",S),u.once("layer.error",S)},v.createFramework=function(w){var u=this,S=u.div=document.createElement("div");S.id=u.uid,S.style.position="absolute",u.container.appendChild(S),u.xaxis={_id:"x",c2p:function(_){return u.project(_).x}},u.yaxis={_id:"y",c2p:function(_){return u.project(_).y}},u.updateFramework(w),u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(u.mockAxis,w)},v.initFx=function(w,u){var S=this,_=S.gd,E=S.map;function L(){s.loneUnhover(u._hoverlayer)}function C(){var P=S.getView();_.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var I=_._fullLayout;if(P.originalEvent||S.wheeling){var j=I[S.id];T.call("_storeDirectGUIEdit",_.layout,I._preGUI,S.getViewEdits(j));var R=S.getView();j._input.center=j.center=R.center,j._input.zoom=j.zoom=R.zoom,j._input.bearing=j.bearing=R.bearing,j._input.pitch=j.pitch=R.pitch,_.emit("plotly_relayout",S.getViewEditsWithDerived(R))}P.originalEvent&&"mouseup"===P.originalEvent.type?S.dragging=!1:S.wheeling&&(S.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var I=S.div.getBoundingClientRect(),j=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return I},S.xaxis.p2c=function(){return E.unproject(j).lng},S.yaxis.p2c=function(){return E.unproject(j).lat},_._fullLayout._rehover=function(){_._fullLayout._hoversubplot===S.id&&_._fullLayout[S.id]&&s.hover(_,P,S.id)},s.hover(_,P,S.id),_._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){_._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=_._fullLayout[S.id];T.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,S.getViewEdits(P));var I=S.viewInitial;E.setCenter(m(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var j=S.getView();P._input.center=P.center=j.center,P._input.zoom=P.zoom=j.zoom,P._input.bearing=P.bearing=j.bearing,P._input.pitch=P.pitch=j.pitch,_.emit("plotly_doubleclick",null),_.emit("plotly_relayout",S.getViewEditsWithDerived(j))}),S.clearOutline=function(){i(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(I){var j=_._fullLayout.clickmode;j.indexOf("select")>-1&&c(I.originalEvent,_,[S.xaxis],[S.yaxis],S.id,P),j.indexOf("event")>-1&&s.click(_,I.originalEvent)}}},v.updateFx=function(w){var u=this,S=u.map;if(!u.isStatic){var L=w.dragmode;u.dragOptions=A.extendDeep(u.dragOptions||{},{dragmode:w.dragmode,element:u.div,gd:u.gd,plotinfo:{id:u.id,domain:w[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:function(I,j){j.isRect?(I.range={})[u.id]=[P([j.xmin,j.ymin]),P([j.xmax,j.ymax])]:(I.lassoPoints={})[u.id]=j.map(P)}},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id}),S.off("click",u.onClickInPanHandler),r(L)||o(L)?(S.dragPan.disable(),S.on("zoomstart",u.clearOutline),u.dragOptions.prepFn=function(I,j,R){n(I,j,R,u.dragOptions,L)},d.init(u.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",u.clearOutline),u.div.onmousedown=null,u.div.ontouchstart=null,u.div.removeEventListener("touchstart",u.div._ontouchstart),u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),S.on("click",u.onClickInPanHandler))}function P(I){var j=u.map.unproject(I);return[j.lng,j.lat]}},v.updateFramework=function(w){var u=w[this.id].domain,S=w._size,_=this.div.style;_.width=S.w*(u.x[1]-u.x[0])+"px",_.height=S.h*(u.y[1]-u.y[0])+"px",_.left=S.l+u.x[0]*S.w+"px",_.top=S.t+(1-u.y[1])*S.h+"px",this.xaxis._offset=S.l+u.x[0]*S.w,this.xaxis._length=S.w*(u.x[1]-u.x[0]),this.yaxis._offset=S.t+(1-u.y[1])*S.h,this.yaxis._length=S.h*(u.y[1]-u.y[0])},v.updateLayers=function(w){var u,S=w[this.id].layers,_=this.layerList;if(S.length!==_.length){for(u=0;u<_.length;u++)_[u].dispose();for(_=this.layerList=[],u=0;u<S.length;u++)_.push(f(this,u,S[u]))}else for(u=0;u<S.length;u++)_[u].update(S[u])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(w,u,S){for(var _ in S)this.map[u](w,_,S[_])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(w,u){var S=this.map;if("string"==typeof u){if(""===u)return void S.addLayer(w,u);for(var _=this.getMapLayers(),E=0;E<_.length;E++)if(u===_[E].id)return void S.addLayer(w,u);A.warn(["Trying to add layer with *below* value",u,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(w)},v.project=function(w){return this.map.project(new k.LngLat(w[0],w[1]))},v.getView=function(){var w=this.map,u=w.getCenter(),S={lon:u.lng,lat:u.lat},_=w.getCanvas(),E=parseInt(_.style.width),L=parseInt(_.style.height);return{center:S,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([E,0]).toArray(),w.unproject([E,L]).toArray(),w.unproject([0,L]).toArray()]}}},v.getViewEdits=function(w){for(var u=this.id,S=["center","zoom","bearing","pitch"],_={},E=0;E<S.length;E++){var L=S[E];_[u+"."+L]=w[L]}return _},v.getViewEditsWithDerived=function(w){var u=this.id,S=this.getViewEdits(w);return S[u+"._derived"]=w._derived,S},Q.exports=x},35025:function(Q){"use strict";Q.exports=function(z){var e=z.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function(Q,z,e){"use strict";var k=e(39898),A=e(84096).Dq,l=e(60721).FF,T=e(92770),b=e(73972),d=e(86281),s=e(44467),t=e(71828),o=e(7901),r=e(50606).BADNUM,n=e(41675),a=e(51873).clearOutline,i=e(21479),c=e(85594),h=e(31391),f=e(27659).a0,x=t.relinkPrivateKeys,v=t._,g=Q.exports={};t.extendFlat(g,b),g.attributes=e(9012),g.attributes.type.values=g.allTypes,g.fontAttrs=e(41940),g.layoutAttributes=e(10820),g.fontWeight="normal";var y=g.transformsRegistry,p=e(31137);g.executeAPICommand=p.executeAPICommand,g.computeAPICommandBindings=p.computeAPICommandBindings,g.manageCommandObserver=p.manageCommandObserver,g.hasSimpleAPICommandBindings=p.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=t.getGraphDiv(F),new Promise(function(U){setTimeout(function(){F._fullLayout&&(b.getComponentMethod("annotations","draw")(F),b.getComponentMethod("legend","draw")(F),b.getComponentMethod("colorbar","draw")(F),U(g.previousPromises(F)))},300)})},g.resize=function(F){var U;F=t.getGraphDiv(F);var B=new Promise(function(N,J){F&&!t.isHidden(F)||J(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(U=F._resolveResize),F._resolveResize=N,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||t.isHidden(F))N(F);else{delete F.layout.width,delete F.layout.height;var Z=F.changed;F.autoplay=!0,b.call("relayout",F,{autosize:!0}).then(function(){F.changed=Z,F._resolveResize===N&&(delete F._resolveResize,N(F))})}},100)});return U&&U(B),B},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var U=F._fullLayout,B=t.ensureSingle(U._paper,"text","js-plot-link-container",function(X){X.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var K=k.select(this);K.append("tspan").classed("js-link-to-tool",!0),K.append("tspan").classed("js-link-spacer",!0),K.append("tspan").classed("js-sourcelinks",!0)})}),N=B.node(),J={y:U._paper.attr("height")-9};document.body.contains(N)&&N.getComputedTextLength()>=U.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=U._paper.attr("width")-7),B.attr(J);var Z=B.select(".js-link-to-tool"),V=B.select(".js-link-spacer"),W=B.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(X,K){K.text("");var ne=K.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(X._context.linkText+" "+String.fromCharCode(187));if(X._context.sendData)ne.on("click",function(){g.sendDataToCloud(X)});else{var re=window.location.pathname.split("/"),ae=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ae})}}(F,Z),V.text(Z.text()&&W.text()?" - ":"")}},g.sendDataToCloud=function(F){var U=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(U){F.emit("plotly_beforeexport");var B=k.select(F).append("div").attr("id","hiddenform").style("display","none"),N=B.append("form").attr({action:U+"/external",method:"post",target:"_blank"});return N.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),N.node().submit(),B.remove(),F.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function u(F,U){var B=F._context.locale;B||(B="en-US");var N=!1,J={};function Z(re){for(var ae=!0,le=0;le<U.length;le++){var pe=U[le];J[pe]||(re[pe]?J[pe]=re[pe]:ae=!1)}ae&&(N=!0)}for(var V=0;V<2;V++){for(var W=F._context.locales,X=0;X<2;X++){var K=(W[B]||{}).format;if(K&&(Z(K),N))break;W=b.localeRegistry}var ne=B.split("-")[0];if(N||ne===B)break;B=ne}return N||Z(b.localeRegistry.en.format),J}function S(F,U){var B={_fullLayout:U},N="x"===F._id.charAt(0),J=F._mainAxis._anchorAxis,Z="",V="",W="";if(J&&(W=J._mainAxis._id,Z=N?F._id+W:W+F._id),!Z||!U._plots[Z]){Z="";for(var X=F._counterAxes,K=0;K<X.length;K++){var ne=X[K],re=N?F._id+ne:ne+F._id;V||(V=re);var ae=n.getFromId(B,ne);if(W&&ae.overlaying===W){Z=re;break}}}return Z||V}function _(F){var U=F.transforms;if(Array.isArray(U)&&U.length)for(var B=0;B<U.length;B++){var N=U[B],J=N._module||y[N.type];if(J&&J.makesData)return!0}return!1}function E(F,U,B,N){for(var J=F.transforms,Z=[F],V=0;V<J.length;V++){var W=J[V],X=y[W.type];X&&X.transform&&(Z=X.transform(Z,{transform:W,fullTrace:F,fullData:U,layout:B,fullLayout:N,transformIndex:V}))}return Z}function L(F){return"string"==typeof F&&"px"===F.substr(F.length-2)&&parseFloat(F)}function C(F){var U=F.margin;if(!F._size){var B=F._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)};B.w=Math.round(F.width)-B.l-B.r,B.h=Math.round(F.height)-B.t-B.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={})}g.supplyDefaults=function(F,U){var _e,De,B=U&&U.skipUpdateCalc,N=F._fullLayout||{};if(N._skipDefaults)delete N._skipDefaults;else{var J,Z=F._fullLayout={},V=F.layout||{},W=F._fullData||[],X=F._fullData=[],K=F.data||[],ne=F.calcdata||[],re=F._context||{};F._transitionData||g.createTransitionData(F),Z._dfltTitle={plot:v(F,"Click to enter Plot title"),x:v(F,"Click to enter X axis title"),y:v(F,"Click to enter Y axis title"),colorbar:v(F,"Click to enter Colorscale title"),annotation:v(F,"new text")},Z._traceWord=v(F,"trace");var ae=u(F,m);if(Z._mapboxAccessToken=re.mapboxAccessToken,N._initialAutoSizeIsDone){var le=N.width,pe=N.height;g.supplyLayoutGlobalDefaults(V,Z,ae),V.width||(Z.width=le),V.height||(Z.height=pe),g.sanitizeMargins(Z)}else{g.supplyLayoutGlobalDefaults(V,Z,ae);var xe=!V.width||!V.height,ye=Z.autosize;xe&&(ye||re.autosizable)?g.plotAutoSize(F,V,Z):xe&&g.sanitizeMargins(Z),!ye&&xe&&(V.width=Z.width,V.height=Z.height)}Z._d3locale=((_e=ae).decimal=(De=Z.separators).charAt(0),_e.thousands=De.charAt(1),{numberFormat:function(He){try{He=l(_e).format(t.adjustFormat(He))}catch{return t.warnBadFormat(He),t.noFormat}return He},timeFormat:A(_e).utcFormat}),Z._extraFormat=u(F,w),Z._initialAutoSizeIsDone=!0,Z._dataLength=K.length,Z._modules=[],Z._visibleModules=[],Z._basePlotModules=[];var fe=Z._subplots=function(){var _e,De,He=b.collectableSubplotTypes,Ve={};if(!He){He=[];var nt=b.subplotsRegistry;for(var tt in nt){var at=nt[tt].attr;if(at&&(He.push(tt),Array.isArray(at)))for(De=0;De<at.length;De++)t.pushUnique(He,at[De])}}for(_e=0;_e<He.length;_e++)Ve[He[_e]]=[];return Ve}(),Ee=Z._splomAxes={x:{},y:{}},de=Z._splomSubplots={};Z._splomGridDflt={},Z._scatterStackOpts={},Z._firstScatter={},Z._alignmentOpts={},Z._colorAxes={},Z._requestRangeslider={},Z._traceUids=function(_e,De){var He,Ve,nt=De.length,tt=[];for(He=0;He<_e.length;He++){var at=_e[He]._fullInput;at!==Ve&&tt.push(at),Ve=at}var dt=tt.length,wt=new Array(nt),bt={};function _t(Ot,Ht){wt[Ht]=Ot,bt[Ot]=1}function Lt(Ot,Ht){if(Ot&&"string"==typeof Ot&&!bt[Ot])return _t(Ot,Ht),!0}for(He=0;He<nt;He++){var Ct=De[He].uid;"number"==typeof Ct&&(Ct=String(Ct)),Lt(Ct,He)||He<dt&&Lt(tt[He].uid,He)||_t(t.randstr(bt),He)}return wt}(W,K),Z._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(K,X,V,Z);var we=Object.keys(Ee.x),ke=Object.keys(Ee.y);if(we.length>1&&ke.length>1){for(b.getComponentMethod("grid","sizeDefaults")(V,Z),J=0;J<we.length;J++)t.pushUnique(fe.xaxis,we[J]);for(J=0;J<ke.length;J++)t.pushUnique(fe.yaxis,ke[J]);for(var Te in de)t.pushUnique(fe.cartesian,Te)}if(Z._has=g._hasPlotType.bind(Z),W.length===X.length)for(J=0;J<X.length;J++)x(X[J],W[J]);g.supplyLayoutModuleDefaults(V,Z,X,F._transitionData);var $=Z._visibleModules,oe=[];for(J=0;J<$.length;J++){var he=$[J].crossTraceDefaults;he&&t.pushUnique(oe,he)}for(J=0;J<oe.length;J++)oe[J](X,Z);Z._hasOnlyLargeSploms=1===Z._basePlotModules.length&&"splom"===Z._basePlotModules[0].name&&we.length>15&&ke.length>15&&0===Z.shapes.length&&0===Z.images.length,g.linkSubplots(X,Z,W,N),g.cleanPlot(X,Z,W,N);var me=!(!N._has||!N._has("gl2d")),Me=!(!Z._has||!Z._has("gl2d")),Ie=!(!N._has||!N._has("cartesian"))||me,Pe=!(!Z._has||!Z._has("cartesian"))||Me;Ie&&!Pe?N._bgLayer.remove():Pe&&!Ie&&(Z._shouldCreateBgLayer=!0),N._zoomlayer&&!F._dragging&&a({_fullLayout:N}),function(_e,De){var He,Ve=[];De.meta&&(He=De._meta={meta:De.meta,layout:{meta:De.meta}});for(var nt=0;nt<_e.length;nt++){var tt=_e[nt];tt.meta?Ve[tt.index]=tt._meta={meta:tt.meta}:De.meta&&(tt._meta={meta:De.meta}),De.meta&&(tt._meta.layout={meta:De.meta})}Ve.length&&(He||(He=De._meta={}),He.data=Ve)}(X,Z),x(Z,N),b.getComponentMethod("colorscale","crossTraceDefaults")(X,Z),Z._preGUI||(Z._preGUI={}),Z._tracePreGUI||(Z._tracePreGUI={});var ze,ce=Z._tracePreGUI,ge={};for(ze in ce)ge[ze]="old";for(J=0;J<X.length;J++)ge[ze=X[J]._fullInput.uid]||(ce[ze]={}),ge[ze]="new";for(ze in ge)"old"===ge[ze]&&delete ce[ze];C(Z),b.getComponentMethod("rangeslider","makeData")(Z),B||ne.length!==X.length||g.supplyDefaultsUpdateCalc(ne,X)}},g.supplyDefaultsUpdateCalc=function(F,U){for(var B=0;B<U.length;B++){var N=U[B],J=(F[B]||[])[0];if(J&&J.trace){var Z=J.trace;if(Z._hasCalcTransform){var V,W,X,K=Z._arrayAttrs;for(V=0;V<K.length;V++)X=t.nestedProperty(Z,W=K[V]).get().slice(),t.nestedProperty(N,W).set(X)}J.trace=N}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var U,B=this._basePlotModules||[];for(U=0;U<B.length;U++)if(B[U].name===F)return!0;var N=this._modules||[];for(U=0;U<N.length;U++){var J=N[U].name;if(J===F)return!0;var Z=b.modules[J];if(Z&&Z.categories[F])return!0}return!1},g.cleanPlot=function(F,U,B,N){var J,Z,V=N._basePlotModules||[];for(J=0;J<V.length;J++){var W=V[J];W.clean&&W.clean(F,U,B,N)}var X=N._has&&N._has("gl"),K=U._has&&U._has("gl");X&&!K&&void 0!==N._glcontainer&&(N._glcontainer.selectAll(".gl-canvas").remove(),N._glcontainer.selectAll(".no-webgl").remove(),N._glcanvas=null);var ne=!!N._infolayer;e:for(J=0;J<B.length;J++){var re=B[J].uid;for(Z=0;Z<F.length;Z++)if(re===F[Z].uid)continue e;ne&&N._infolayer.select(".cb"+re).remove()}},g.linkSubplots=function(F,U,B,N){var J,Z,V=N._plots||{},W=U._plots={},X=U._subplots,K={_fullData:F,_fullLayout:U},ne=X.cartesian.concat(X.gl2d||[]);for(J=0;J<ne.length;J++){var re,ae=ne[J],le=V[ae],pe=n.getFromId(K,ae,"x"),xe=n.getFromId(K,ae,"y");for(le?re=W[ae]=le:(re=W[ae]={}).id=ae,pe._counterAxes.push(xe._id),xe._counterAxes.push(pe._id),pe._subplotsWith.push(ae),xe._subplotsWith.push(ae),re.xaxis=pe,re.yaxis=xe,re._hasClipOnAxisFalse=!1,Z=0;Z<F.length;Z++){var ye=F[Z];if(ye.xaxis===re.xaxis._id&&ye.yaxis===re.yaxis._id&&!1===ye.cliponaxis){re._hasClipOnAxisFalse=!0;break}}}var se,fe=n.list(K,null,!0);for(J=0;J<fe.length;J++){var Ee=null;(se=fe[J]).overlaying&&(Ee=n.getFromId(K,se.overlaying))&&Ee.overlaying&&(se.overlaying=!1,Ee=null),se._mainAxis=Ee||se,Ee&&(se.domain=Ee.domain.slice()),se._anchorAxis="free"===se.anchor?null:n.getFromId(K,se.anchor)}for(J=0;J<fe.length;J++)if((se=fe[J])._counterAxes.sort(n.idSort),se._subplotsWith.sort(t.subplotSort),se._mainSubplot=S(se,U),se._counterAxes.length&&(se.spikemode&&-1!==se.spikemode.indexOf("across")||se.automargin&&se.mirror&&"free"!==se.anchor||b.getComponentMethod("rangeslider","isVisible")(se))){var de=1,we=0;for(Z=0;Z<se._counterAxes.length;Z++){var ke=n.getFromId(K,se._counterAxes[Z]);de=Math.min(de,ke.domain[0]),we=Math.max(we,ke.domain[1])}de<we&&(se._counterDomainMin=de,se._counterDomainMax=we)}},g.clearExpandedTraceDefaultColors=function(F){var U,B,N;for(B=[],(U=F._module._colorAttrs)||(F._module._colorAttrs=U=[],d.crawl(F._module.attributes,function(J,Z,V,W){B[W]=Z,B.length=W+1,"color"===J.valType&&void 0===J.dflt&&U.push(B.join("."))})),N=0;N<U.length;N++)t.nestedProperty(F,"_input."+U[N]).get()||t.nestedProperty(F,U[N]).set(null)},g.supplyDataDefaults=function(F,U,B,N){var J,Z,V,W=N._modules,X=N._visibleModules,K=N._basePlotModules,ne=0,re=0;function ae(Te){U.push(Te);var $=Te._module;$&&(t.pushUnique(W,$),!0===Te.visible&&t.pushUnique(X,$),t.pushUnique(K,Te._module.basePlotModule),ne++,!1!==Te._input.visible&&re++)}N._transformModules=[];var le={},pe=[],ye=s.traceTemplater((B.template||{}).data||{});for(J=0;J<F.length;J++){if((Z=ye.newTrace(V=F[J])).uid=N._traceUids[J],g.supplyTraceDefaults(V,Z,re,N,J),Z.index=J,Z._input=V,Z._expandedIndex=ne,Z.transforms&&Z.transforms.length)for(var se=!1!==V.visible&&!1===Z.visible,fe=E(Z,U,B,N),Ee=0;Ee<fe.length;Ee++){var de=fe[Ee],we={_template:Z._template,type:Z.type,uid:Z.uid+Ee};se&&!1===de.visible&&delete de.visible,g.supplyTraceDefaults(de,we,ne,N,J),x(we,de),we.index=J,we._input=V,we._fullInput=Z,we._expandedIndex=ne,we._expandedInput=de,ae(we)}else Z._fullInput=Z,Z._expandedInput=Z,ae(Z);b.traceIs(Z,"carpetAxis")&&(le[Z.carpet]=Z),b.traceIs(Z,"carpetDependent")&&pe.push(J)}for(J=0;J<pe.length;J++)if((Z=U[pe[J]]).visible){var ke=le[Z.carpet];Z._carpet=ke,ke&&ke.visible?(Z.xaxis=ke.xaxis,Z.yaxis=ke.yaxis):Z.visible=!1}},g.supplyAnimationDefaults=function(F){var U;F=F||{};var B={};function N(J,Z){return t.coerce(F||{},B,c,J,Z)}if(N("mode"),N("direction"),N("fromcurrent"),Array.isArray(F.frame))for(B.frame=[],U=0;U<F.frame.length;U++)B.frame[U]=g.supplyAnimationFrameDefaults(F.frame[U]||{});else B.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(B.transition=[],U=0;U<F.transition.length;U++)B.transition[U]=g.supplyAnimationTransitionDefaults(F.transition[U]||{});else B.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return B},g.supplyAnimationFrameDefaults=function(F){var U={};function B(N,J){return t.coerce(F||{},U,c.frame,N,J)}return B("duration"),B("redraw"),U},g.supplyAnimationTransitionDefaults=function(F){var U={};function B(N,J){return t.coerce(F||{},U,c.transition,N,J)}return B("duration"),B("easing"),U},g.supplyFrameDefaults=function(F){var U={};function B(N,J){return t.coerce(F,U,h,N,J)}return B("group"),B("name"),B("traces"),B("baseframe"),B("data"),B("layout"),U},g.supplyTraceDefaults=function(F,U,B,N,J){var Z,V=N.colorway||o.defaults,W=V[B%V.length];function X(fe,Ee){return t.coerce(F,U,g.attributes,fe,Ee)}var K=X("visible");X("type"),X("name",N._traceWord+" "+J),X("uirevision",N.uirevision);var ne=g.getModule(U);if(U._module=ne,ne){var re=ne.basePlotModule,ae=re.attr,le=re.attributes;if(ae&&le){var pe=N._subplots,xe="";if(K||"gl2d"!==re.name){if(Array.isArray(ae))for(Z=0;Z<ae.length;Z++){var ye=ae[Z],se=t.coerce(F,U,le,ye);pe[ye]&&t.pushUnique(pe[ye],se),xe+=se}else xe=t.coerce(F,U,le,ae);pe[re.name]&&t.pushUnique(pe[re.name],xe)}}}return K&&(X("customdata"),X("ids"),X("meta"),b.traceIs(U,"showLegend")?(t.coerce(F,U,ne.attributes.showlegend?ne.attributes:g.attributes,"showlegend"),X("legendwidth"),X("legendgroup"),X("legendgrouptitle.text"),X("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ne&&ne.supplyDefaults(F,U,W,N),b.traceIs(U,"noOpacity")||X("opacity"),b.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),b.traceIs(U,"noHover")||(U.hovertemplate||t.coerceHoverinfo(F,U,N),"parcats"!==U.type&&b.getComponentMethod("fx","supplyDefaults")(F,U,W,N)),ne&&ne.selectPoints&&X("selectedpoints"),g.supplyTransformDefaults(F,U,N)),U},g.hasMakesDataTransform=_,g.supplyTransformDefaults=function(F,U,B){if(U._length||_(F)){var N=B._globalTransforms||[],J=B._transformModules||[];if(Array.isArray(F.transforms)||0!==N.length)for(var V=N.concat(F.transforms||[]),W=U.transforms=[],X=0;X<V.length;X++){var K,ne=V[X],re=ne.type,ae=y[re],le=!(ne._module&&ne._module===ae),pe=ae&&"function"==typeof ae.transform;ae||t.warn("Unrecognized transform type "+re+"."),ae&&ae.supplyDefaults&&(le||pe)?((K=ae.supplyDefaults(ne,U,B,F)).type=re,K._module=ae,t.pushUnique(J,ae)):K=t.extendFlat({},ne),W.push(K)}}},g.supplyLayoutGlobalDefaults=function(F,U,B){function N(X,K){return t.coerce(F,U,g.layoutAttributes,X,K)}var J=F.template;t.isPlainObject(J)&&(U.template=J,U._template=J.layout,U._dataTemplate=J.data),N("autotypenumbers");var Z=t.coerceFont(N,"font");t.coerceFont(N,"title.font",t.extendFlat({},Z,{size:Math.round(1.4*Z.size)})),N("title.text",U._dfltTitle.plot),N("title.xref"),N("title.yref"),N("title.x"),N("title.y"),N("title.xanchor"),N("title.yanchor"),N("title.pad.t"),N("title.pad.r"),N("title.pad.b"),N("title.pad.l"),N("uniformtext.mode")&&N("uniformtext.minsize"),N("autosize",!(F.width&&F.height)),N("width"),N("height"),N("minreducedwidth"),N("minreducedheight"),N("margin.l"),N("margin.r"),N("margin.t"),N("margin.b"),N("margin.pad"),N("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(U),b.getComponentMethod("grid","sizeDefaults")(F,U),N("paper_bgcolor"),N("separators",B.decimal+B.thousands),N("hidesources"),N("colorway"),N("datarevision");var W=N("uirevision");N("editrevision",W),N("selectionrevision",W),b.getComponentMethod("modebar","supplyLayoutDefaults")(F,U),b.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,U,N),b.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,U,N),N("meta"),t.isPlainObject(F.transition)&&(N("transition.duration"),N("transition.easing"),N("transition.ordering")),b.getComponentMethod("calendars","handleDefaults")(F,U,"calendar"),b.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,U,N),t.coerce(F,U,i,"scattermode")},g.plotAutoSize=function(F,U,B){var N,J,Z=F._context||{},V=Z.frameMargins,W=t.isPlotDiv(F);if(W&&F.emit("plotly_autosize"),Z.fillFrame)N=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var X=W?window.getComputedStyle(F):{};if(N=L(X.width)||L(X.maxWidth)||B.width,J=L(X.height)||L(X.maxHeight)||B.height,T(V)&&V>0){var K=1-2*V;N=Math.round(K*N),J=Math.round(K*J)}}var ne=g.layoutAttributes.width.min,re=g.layoutAttributes.height.min;N<ne&&(N=ne),J<re&&(J=re);var ae=!U.width&&Math.abs(B.width-N)>1,le=!U.height&&Math.abs(B.height-J)>1;(le||ae)&&(ae&&(B.width=N),le&&(B.height=J)),F._initialAutoSize||(F._initialAutoSize={width:N,height:J}),g.sanitizeMargins(B)},g.supplyLayoutModuleDefaults=function(F,U,B,N){var J,Z,V,W=b.componentsRegistry,X=U._basePlotModules,K=b.subplotsRegistry.cartesian;for(J in W)(V=W[J]).includeBasePlot&&V.includeBasePlot(F,U);for(var ne in X.length||X.push(K),U._has("cartesian")&&(b.getComponentMethod("grid","contentDefaults")(F,U),K.finalizeSubplots(F,U)),U._subplots)U._subplots[ne].sort(t.subplotSort);for(Z=0;Z<X.length;Z++)(V=X[Z]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,U,B);var re=U._modules;for(Z=0;Z<re.length;Z++)(V=re[Z]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,U,B);var ae=U._transformModules;for(Z=0;Z<ae.length;Z++)(V=ae[Z]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,U,B,N);for(J in W)(V=W[J]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,U,B)},g.purge=function(F){var U=F._fullLayout||{};void 0!==U._glcontainer&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null),U._modeBar&&U._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var U,B=F._fullLayout._visibleModules,N=[];for(U=0;U<B.length;U++){var J=B[U];J.style&&t.pushUnique(N,J.style)}for(U=0;U<N.length;U++)N[U](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var U,B=F.width,N=F.height,J=F.margin,V=N-(J.t+J.b);B-(J.l+J.r)<0&&(U=(B-1)/(J.l+J.r),J.l=Math.floor(U*J.l),J.r=Math.floor(U*J.r)),V<0&&(U=(N-1)/(J.t+J.b),J.t=Math.floor(U*J.t),J.b=Math.floor(U*J.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,U){F._fullLayout._pushmarginIds[U]=1},g.autoMargin=function(F,U,B){var N=F._fullLayout,J=N.width,Z=N.height,V=N.margin,X=N.minreducedheight,K=t.constrain(J-V.l-V.r,2,N.minreducedwidth),ne=t.constrain(Z-V.t-V.b,2,X),re=Math.max(0,J-K),ae=Math.max(0,Z-ne),le=N._pushmargin,pe=N._pushmarginIds;if(!1!==V.autoexpand){if(B){var xe=B.pad;if(void 0===xe&&(xe=Math.min(12,V.l,V.r,V.t,V.b)),re){var ye=(B.l+B.r)/re;ye>1&&(B.l/=ye,B.r/=ye)}if(ae){var se=(B.t+B.b)/ae;se>1&&(B.t/=se,B.b/=se)}le[U]={l:{val:void 0!==B.xl?B.xl:B.x,size:B.l+xe},r:{val:void 0!==B.xr?B.xr:B.x,size:B.r+xe},b:{val:void 0!==B.yb?B.yb:B.y,size:B.b+xe},t:{val:void 0!==B.yt?B.yt:B.y,size:B.t+xe}},pe[U]=1}else delete le[U],delete pe[U];if(!N._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var U=F._fullLayout,B=U.width,N=U.height;U._size||(U._size={}),C(U);var J=U._size,Z=U.margin,V=t.extendFlat({},J),W=Z.l,X=Z.r,K=Z.t,ne=Z.b,re=U._pushmargin,ae=U._pushmarginIds,le=U.minreducedwidth,pe=U.minreducedheight;if(!1!==U.margin.autoexpand){for(var xe in re)ae[xe]||delete re[xe];for(var ye in re.base={l:{val:0,size:W},r:{val:1,size:X},t:{val:1,size:K},b:{val:0,size:ne}},re){var se=re[ye].l||{},fe=re[ye].b||{},Ee=se.val,de=se.size,we=fe.val,ke=fe.size;for(var Te in re){if(T(de)&&re[Te].r){var $=re[Te].r.val,oe=re[Te].r.size;if($>Ee){var he=(de*$+(oe-B)*Ee)/($-Ee),me=(oe*(1-Ee)+(de-B)*(1-$))/($-Ee);he+me>W+X&&(W=he,X=me)}}if(T(ke)&&re[Te].t){var Me=re[Te].t.val,Ie=re[Te].t.size;if(Me>we){var Pe=(ke*Me+(Ie-N)*we)/(Me-we),ze=(Ie*(1-we)+(ke-N)*(1-Me))/(Me-we);Pe+ze>ne+K&&(ne=Pe,K=ze)}}}}}var at,ce=t.constrain(B-Z.l-Z.r,2,le),ge=t.constrain(N-Z.t-Z.b,2,pe),_e=Math.max(0,B-ce),De=Math.max(0,N-ge);if(_e){var He=(W+X)/_e;He>1&&(W/=He,X/=He)}if(De){var Ve=(ne+K)/De;Ve>1&&(ne/=Ve,K/=Ve)}if(J.l=Math.round(W),J.r=Math.round(X),J.t=Math.round(K),J.b=Math.round(ne),J.p=Math.round(Z.pad),J.w=Math.round(B)-J.l-J.r,J.h=Math.round(N)-J.t-J.b,!U._replotting&&(g.didMarginChange(V,J)||function(tt){if("_redrawFromAutoMarginCount"in tt._fullLayout)return!1;var at=n.list(tt,"",!0);for(var dt in at)if(at[dt].autoshift||at[dt].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;var nt=3*(1+Object.keys(ae).length);if(U._redrawFromAutoMarginCount<nt)return b.call("_doPlot",F);U._size=V,t.warn("Too many auto-margin redraws.")}at=n.list(F,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(dt){for(var wt=0;wt<at.length;wt++){var bt=at[wt][dt];bt&&bt()}})};var P=["l","r","t","b","p","w","h"];function I(F,U,B){var N=!1,Z=t.syncOrAsync([g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(V){var W=Promise.resolve();if(!V)return W;for(;V.length;)W=W.then(V.shift());return W}(F._transitionData._interruptCallbacks)},B.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(V){F._transitioning=!0,U.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){N=!0}),B.redraw&&F._transitionData._interruptCallbacks.push(function(){return b.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var W=0,X=0;function K(){return W++,function(){var ne;X++,N||X!==W||(ne=V,F._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(B.redraw)return b.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ne)))}}B.runFn(K),setTimeout(K())})}],F);return Z&&Z.then||(Z=Promise.resolve()),Z.then(function(){return F})}g.didMarginChange=function(F,U){for(var B=0;B<P.length;B++){var N=P[B],J=F[N],Z=U[N];if(!T(J)||Math.abs(Z-J)>1)return!0}return!1},g.graphJson=function(F,U,B,N,J,Z){(J&&U&&!F._fullData||J&&!U&&!F._fullLayout)&&g.supplyDefaults(F);var W=J?F._fullLayout:F.layout,X=(F._transitionData||{})._frames;function K(ae,le){if("function"==typeof ae)return le?"_function_":null;if(t.isPlainObject(ae)){var pe,xe={};return Object.keys(ae).sort().forEach(function(ye){if(-1===["_","["].indexOf(ye.charAt(0)))if("function"!=typeof ae[ye]){if("keepdata"===B){if("src"===ye.substr(ye.length-3))return}else if("keepstream"===B){if("string"==typeof(pe=ae[ye+"src"])&&pe.indexOf(":")>0&&!t.isPlainObject(ae.stream))return}else if("keepall"!==B&&"string"==typeof(pe=ae[ye+"src"])&&pe.indexOf(":")>0)return;xe[ye]=K(ae[ye],le)}else le&&(xe[ye]="_function")}),xe}return Array.isArray(ae)?ae.map(function(ye){return K(ye,le)}):t.isTypedArray(ae)?t.simpleMap(ae,t.identity):t.isJSDate(ae)?t.ms2DateTimeLocal(+ae):ae}var ne={data:((J?F._fullData:F.data)||[]).map(function(ae){var le=K(ae);return U&&delete le.fit,le})};if(!U&&(ne.layout=K(W),J)){var re=W._size;ne.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return X&&(ne.frames=K(X)),Z&&(ne.config=K(F._context,!0)),"object"===N?ne:JSON.stringify(ne)},g.modifyFrames=function(F,U){var B,N,J,Z=F._transitionData._frames,V=F._transitionData._frameHash;for(B=0;B<U.length;B++)switch((N=U[B]).type){case"replace":var W=(Z[N.index]||{}).name,X=(J=N.value).name;Z[N.index]=V[X]=J,X!==W&&(delete V[W],V[X]=J);break;case"insert":V[(J=N.value).name]=J,Z.splice(N.index,0,J);break;case"delete":delete V[(J=Z[N.index]).name],Z.splice(N.index,1)}return Promise.resolve()},g.computeFrame=function(F,U){var B,N,J,Z,V=F._transitionData._frameHash;if(!U)throw new Error("computeFrame must be given a string frame name");var W=V[U.toString()];if(!W)return!1;for(var X=[W],K=[W.name];W.baseframe&&(W=V[W.baseframe.toString()])&&-1===K.indexOf(W.name);)X.push(W),K.push(W.name);for(var ne={};W=X.pop();)if(W.layout&&(ne.layout=g.extendLayout(ne.layout,W.layout)),W.data){if(ne.data||(ne.data=[]),!(N=W.traces))for(N=[],B=0;B<W.data.length;B++)N[B]=B;for(ne.traces||(ne.traces=[]),B=0;B<W.data.length;B++)null!=(J=N[B])&&(-1===(Z=ne.traces.indexOf(J))&&(ne.traces[Z=ne.data.length]=J),ne.data[Z]=g.extendTrace(ne.data[Z],W.data[B]))}return ne},g.recomputeFrameHash=function(F){for(var U=F._transitionData._frameHash={},B=F._transitionData._frames,N=0;N<B.length;N++){var J=B[N];J&&J.name&&(U[J.name]=J)}},g.extendObjectWithContainers=function(F,U,B){var N,J,Z,V,W,X,K,ne=t.extendDeepNoArrays({},U||{}),re=t.expandObjectPaths(ne),ae={};if(B&&B.length)for(Z=0;Z<B.length;Z++)void 0===(J=(N=t.nestedProperty(re,B[Z])).get())?t.nestedProperty(ae,B[Z]).set(null):(N.set(null),t.nestedProperty(ae,B[Z]).set(J));if(F=t.extendDeepNoArrays(F||{},re),B&&B.length)for(Z=0;Z<B.length;Z++)if(X=t.nestedProperty(ae,B[Z]).get()){for(K=(W=t.nestedProperty(F,B[Z])).get(),Array.isArray(K)||W.set(K=[]),V=0;V<X.length;V++){var le=X[V];K[V]=null===le?null:g.extendObjectWithContainers(K[V],le)}W.set(K)}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=b.layoutArrayContainers,g.extendTrace=function(F,U){return g.extendObjectWithContainers(F,U,g.dataArrayContainers)},g.extendLayout=function(F,U){return g.extendObjectWithContainers(F,U,g.layoutArrayContainers)},g.transition=function(F,U,B,N,J,Z){var V={redraw:J.redraw},W={},X=[];return V.prepareFn=function(){for(var K=Array.isArray(U)?U.length:0,ne=N.slice(0,K),re=0;re<ne.length;re++){var ae=ne[re],le=F._fullData[ae]._module;if(le){if(le.animatable){var pe=le.basePlotModule.name;W[pe]||(W[pe]=[]),W[pe].push(ae)}F.data[ne[re]]=g.extendTrace(F.data[ne[re]],U[re])}}var xe=t.expandObjectPaths(t.extendDeepNoArrays({},B)),ye=/^[xy]axis[0-9]*$/;for(var se in xe)ye.test(se)&&delete xe[se].range;g.extendLayout(F.layout,xe),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var fe=t.expandObjectPaths(B);if(fe){var Ee=F._fullLayout._plots;for(var de in Ee){var we=Ee[de],ke=we.xaxis,Te=we.yaxis,$=ke.range.slice(),oe=Te.range.slice(),he=null,me=null,Me=null,Ie=null;Array.isArray(fe[ke._name+".range"])?he=fe[ke._name+".range"].slice():Array.isArray((fe[ke._name]||{}).range)&&(he=fe[ke._name].range.slice()),Array.isArray(fe[Te._name+".range"])?me=fe[Te._name+".range"].slice():Array.isArray((fe[Te._name]||{}).range)&&(me=fe[Te._name].range.slice()),$&&he&&(ke.r2l($[0])!==ke.r2l(he[0])||ke.r2l($[1])!==ke.r2l(he[1]))&&(Me={xr0:$,xr1:he}),oe&&me&&(Te.r2l(oe[0])!==Te.r2l(me[0])||Te.r2l(oe[1])!==Te.r2l(me[1]))&&(Ie={yr0:oe,yr1:me}),(Me||Ie)&&X.push(t.extendFlat({plotinfo:we},Me,Ie))}}return Promise.resolve()},V.runFn=function(K){var ne,re,ae=F._fullLayout._basePlotModules,le=X.length;if(B)for(re=0;re<ae.length;re++)ae[re].transitionAxes&&ae[re].transitionAxes(F,X,Z,K);for(var pe in le?((ne=t.extendFlat({},Z)).duration=0,delete W.cartesian):ne=Z,W){var xe=W[pe];F._fullData[xe[0]]._module.basePlotModule.plot(F,xe,ne,K)}},I(F,Z,V)},g.transitionFromReact=function(F,U,B,N){var J=F._fullLayout,Z=J.transition,V={},W=[];return V.prepareFn=function(){var X=J._plots;for(var K in V.redraw=!1,"some"===U.anim&&(V.redraw=!0),"some"===B.anim&&(V.redraw=!0),X){var ne=X[K],re=ne.xaxis,ae=ne.yaxis,le=N[re._name].range.slice(),pe=N[ae._name].range.slice(),xe=re.range.slice(),ye=ae.range.slice();re.setScale(),ae.setScale();var se=null,fe=null;re.r2l(le[0])===re.r2l(xe[0])&&re.r2l(le[1])===re.r2l(xe[1])||(se={xr0:le,xr1:xe}),ae.r2l(pe[0])===ae.r2l(ye[0])&&ae.r2l(pe[1])===ae.r2l(ye[1])||(fe={yr0:pe,yr1:ye}),(se||fe)&&W.push(t.extendFlat({plotinfo:ne},se,fe))}return Promise.resolve()},V.runFn=function(X){for(var K,ne,re,ae=F._fullData,le=F._fullLayout._basePlotModules,pe=[],xe=0;xe<ae.length;xe++)pe.push(xe);function ye(){if(F._fullLayout)for(var fe=0;fe<le.length;fe++)le[fe].transitionAxes&&le[fe].transitionAxes(F,W,K,X)}function se(){if(F._fullLayout)for(var fe=0;fe<le.length;fe++)le[fe].plot(F,re,ne,X)}W.length&&U.anim?"traces first"===Z.ordering?(K=t.extendFlat({},Z,{duration:0}),re=pe,ne=Z,setTimeout(ye,Z.duration),se()):(K=Z,re=null,ne=t.extendFlat({},Z,{duration:0}),setTimeout(se,K.duration),ye()):W.length?(K=Z,ye()):U.anim&&(re=pe,ne=Z,se())},I(F,Z,V)},g.doCalcdata=function(F,U){var B,N,J,Z,V=n.list(F),W=F._fullData,X=F._fullLayout,K=new Array(W.length),ne=(F.calcdata||[]).slice();for(F.calcdata=K,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},J=0;J<W.length;J++)Array.isArray(U)&&-1===U.indexOf(J)&&(K[J]=ne[J]);for(J=0;J<W.length;J++)(B=W[J])._arrayAttrs=d.findArrayAttributes(B),B._extremes={};var re=X._subplots.polar||[];for(J=0;J<re.length;J++)V.push(X[re[J]].radialaxis,X[re[J]].angularaxis);for(var ae in X._colorAxes){var le=X[ae];!1!==le.cauto&&(delete le.cmin,delete le.cmax)}var pe=!1;function xe(fe){if(N=(B=W[fe])._module,!0===B.visible&&B.transforms){if(N&&N.calc){var Ee=N.calc(F,B);Ee[0]&&Ee[0].t&&Ee[0].t._scene&&delete Ee[0].t._scene.dirty}for(Z=0;Z<B.transforms.length;Z++){var de=B.transforms[Z];(N=y[de.type])&&N.calcTransform&&(B._hasCalcTransform=!0,pe=!0,N.calcTransform(F,B,de))}}}function ye(fe,Ee){if(!!(N=(B=W[fe])._module).isContainer===Ee){var de=[];if(!0===B.visible&&0!==B._length){delete B._indexToPoints;var we=B.transforms||[];for(Z=we.length-1;Z>=0;Z--)if(we[Z].enabled){B._indexToPoints=we[Z]._indexToPoints;break}N&&N.calc&&(de=N.calc(F,B))}Array.isArray(de)&&de[0]||(de=[{x:r,y:r}]),de[0].t||(de[0].t={}),de[0].trace=B,K[fe]=de}}for(R(V,W,X),J=0;J<W.length;J++)ye(J,!0);for(J=0;J<W.length;J++)xe(J);for(pe&&R(V,W,X),J=0;J<W.length;J++)ye(J,!0);for(J=0;J<W.length;J++)ye(J,!1);H(F);var se=function(fe,Ee){var de,we,ke,Te,$,oe=[];function he(Ge,Ze,Be){var Ye=Ze._id.charAt(0);if("histogram2dcontour"===Ge){var rt=Ze._counterAxes[0],Se=n.getFromId(Ee,rt),Re="x"===Ye||"x"===rt&&"category"===Se.type,Ke="y"===Ye||"y"===rt&&"category"===Se.type;return function(st,ct){return 0===st||0===ct||Re&&st===Be[ct].length-1||Ke&&ct===Be.length-1?-1:("y"===Ye?ct:st)-1}}return function(st,ct){return"y"===Ye?ct:st}}var me={min:function(Ge){return t.aggNums(Math.min,null,Ge)},max:function(Ge){return t.aggNums(Math.max,null,Ge)},sum:function(Ge){return t.aggNums(function(Ze,Be){return Ze+Be},null,Ge)},total:function(Ge){return t.aggNums(function(Ze,Be){return Ze+Be},null,Ge)},mean:function(Ge){return t.mean(Ge)},median:function(Ge){return t.median(Ge)}};for(de=0;de<fe.length;de++){var Me=fe[de];if("category"===Me.type){var Ie=Me.categoryorder.match(j);if(Ie){var Pe=Ie[1],ze=Ie[2],ce=Me._id.charAt(0),ge="x"===ce,_e=[];for(we=0;we<Me._categories.length;we++)_e.push([Me._categories[we],[]]);for(we=0;we<Me._traceIndices.length;we++){var De=Me._traceIndices[we],He=Ee._fullData[De];if(!0===He.visible){var Ve=He.type;b.traceIs(He,"histogram")&&(delete He._xautoBinFinished,delete He._yautoBinFinished);var nt="splom"===Ve,tt="scattergl"===Ve,at=Ee.calcdata[De];for(ke=0;ke<at.length;ke++){var dt,wt,bt=at[ke];if(nt){var _t=He._axesDim[Me._id];if(!ge){var Lt=He._diag[_t][0];Lt&&(Me=Ee._fullLayout[n.id2name(Lt)])}var Ct=bt.trace.dimensions[_t].values;for(Te=0;Te<Ct.length;Te++)for(dt=Me._categoriesMap[Ct[Te]],$=0;$<bt.trace.dimensions.length;$++)$!==_t&&_e[dt][1].push(bt.trace.dimensions[$].values[Te])}else if(tt){for(Te=0;Te<bt.t.x.length;Te++)ge?(dt=bt.t.x[Te],wt=bt.t.y[Te]):(dt=bt.t.y[Te],wt=bt.t.x[Te]),_e[dt][1].push(wt);bt.t&&bt.t._scene&&delete bt.t._scene.dirty}else if(bt.hasOwnProperty("z")){var Ht=he(He.type,Me,wt=bt.z);for(Te=0;Te<wt.length;Te++)for($=0;$<wt[Te].length;$++)(dt=Ht($,Te))+1&&_e[dt][1].push(wt[Te][$])}else for(void 0===(dt=bt.p)&&(dt=bt[ce]),void 0===(wt=bt.s)&&(wt=bt.v),void 0===wt&&(wt=ge?bt.y:bt.x),Array.isArray(wt)||(wt=void 0===wt?[]:[wt]),Te=0;Te<wt.length;Te++)_e[dt][1].push(wt[Te])}}}Me._categoriesValue=_e;var It=[];for(we=0;we<_e.length;we++)It.push([_e[we][0],me[Pe](_e[we][1])]);It.sort(function(Ge,Ze){return Ge[1]-Ze[1]}),Me._categoriesAggregatedValue=It,Me._initialCategories=It.map(function(Ge){return Ge[0]}),"descending"===ze&&Me._initialCategories.reverse(),oe=oe.concat(Me.sortByInitialCategories())}}}return oe}(V,F);if(se.length){for(X._numBoxes=0,X._numViolins=0,J=0;J<se.length;J++)ye(se[J],!0);for(J=0;J<se.length;J++)ye(se[J],!1);H(F)}b.getComponentMethod("fx","calc")(F),b.getComponentMethod("errorbars","calc")(F)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function R(F,U,B){var N={};function J(X){X.clearCalc(),"multicategory"===X.type&&X.setupMultiCategory(U),N[X._id]=1}t.simpleMap(F,J);for(var Z=B._axisMatchGroups||[],V=0;V<Z.length;V++)for(var W in Z[V])N[W]||J(B[n.id2name(W)])}function H(F){var U,B,N,J=F._fullLayout,Z=J._visibleModules,V={};for(B=0;B<Z.length;B++){var W=Z[B],X=W.crossTraceCalc;if(X){var K=W.basePlotModule.name;V[K]?t.pushUnique(V[K],X):V[K]=[X]}}for(N in V){var ne=V[N],re=J._subplots[N];if(Array.isArray(re))for(U=0;U<re.length;U++){var ae=re[U],le="cartesian"===N?J._plots[ae]:J[ae];for(B=0;B<ne.length;B++)ne[B](F,le,ae)}else for(B=0;B<ne.length;B++)ne[B](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var U=F._fullLayout,B=(F.layout||{}).selections,N=U._previousSelections;U._previousSelections=B;var J=U._reselect||JSON.stringify(B)!==JSON.stringify(N);b.getComponentMethod("selections","reselect")(F,J)},g.generalUpdatePerTraceModule=function(F,U,B,N){var J,Z=U.traceHash,V={};for(J=0;J<B.length;J++){var W=B[J],X=W[0].trace;X.visible&&(V[X.type]=V[X.type]||[],V[X.type].push(W))}for(var K in Z)if(!V[K]){var ne=Z[K][0];ne[0].trace.visible=!1,V[K]=[ne]}for(var re in V){var ae=V[re];ae[0][0].trace._module.plot(F,U,t.filterVisible(ae),N)}U.traceHash=V},g.plotBasePlot=function(F,U,B,N,J){var Z=b.getModule(F),V=f(U.calcdata,Z)[0];Z.plot(U,V,N,J)},g.cleanBasePlot=function(F,U,B,N,J){var Z=J._has&&J._has(F),V=B._has&&B._has(F);Z&&!V&&J["_"+F+"layer"].selectAll("g.trace").remove()}},9813:function(Q){"use strict";Q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(Q,z,e){"use strict";var k=e(71828),A=e(61082).tester,l=k.findIndexOfMin,T=k.isAngleInsideSector,b=k.angleDelta,d=k.angleDist;function s(n,a,i,c){var h,f,x=c[0],v=c[1],g=o(Math.sin(a)-Math.sin(n)),y=o(Math.cos(a)-Math.cos(n)),p=Math.tan(i),m=o(1/p),w=g/y,u=v-w*x;return m?g&&y?f=p*(h=u/(p-w)):y?(h=v*m,f=v):(h=x,f=x*p):g&&y?(h=0,f=u):y?(h=0,f=v):h=f=NaN,[h,f]}function t(n,a,i,c){return k.isFullCircle([a,i])?function(h,f){var x,v=f.length,g=new Array(v+1);for(x=0;x<v;x++){var y=f[x];g[x]=[h*Math.cos(y),h*Math.sin(y)]}return g[x]=g[0].slice(),g}(n,c):function(h,f,x,v){var g,y,p=v.length,m=[];function w(j){return[h*Math.cos(j),h*Math.sin(j)]}function u(j,R,H){return s(j,R,H,w(j))}function S(j){return k.mod(j,p)}function _(j){return T(j,[f,x])}var E=l(v,function(j){return _(j)?d(j,f):1/0}),L=u(v[E],v[S(E-1)],f);for(m.push(L),g=E,y=0;y<p;g++,y++){var C=v[S(g)];if(!_(C))break;m.push(w(C))}var P=l(v,function(j){return _(j)?d(j,x):1/0}),I=u(v[P],v[S(P+1)],x);return m.push(I),m.push([0,0]),m.push(m[0].slice()),m}(n,a,i,c)}function o(n){return Math.abs(n)>1e-10?n:0}function r(n,a,i){a=a||0,i=i||0;for(var c=n.length,h=new Array(c),f=0;f<c;f++){var x=n[f];h[f]=[a+x[0],i-x[1]]}return h}Q.exports={isPtInsidePolygon:function(n,a,i,c,h){if(!T(a,c))return!1;var f,x;i[0]<i[1]?(f=i[0],x=i[1]):(f=i[1],x=i[0]);var v=A(t(f,c[0],c[1],h)),g=A(t(x,c[0],c[1],h)),y=[n*Math.cos(a),n*Math.sin(a)];return g.contains(y)&&!v.contains(y)},findPolygonOffset:function(n,a,i,c){for(var h=1/0,f=1/0,x=t(n,a,i,c),v=0;v<x.length;v++){var g=x[v];h=Math.min(h,g[0]),f=Math.min(f,-g[1])}return[h,f]},findEnclosingVertexAngles:function(n,a){var i=l(a,function(h){var f=b(h,n);return f>0?f:1/0}),c=k.mod(i+1,a.length);return[a[i],a[c]]},findIntersectionXY:s,findXYatLength:function(n,a,i,c){var h=-a*i,f=a*a+1,x=2*(a*h-i),g=Math.sqrt(x*x-4*f*(h*h+i*i-n*n)),y=(-x+g)/(2*f),p=(-x-g)/(2*f);return[[y,a*y+h+c],[p,a*p+h+c]]},clampTiny:o,pathPolygon:function(n,a,i,c,h,f){return"M"+r(t(n,a,i,c),h,f).join("L")},pathPolygonAnnulus:function(n,a,i,c,h,f,x){var v,g;n<a?(v=n,g=a):(v=a,g=n);var y=r(t(v,i,c,h),f,x);return"M"+r(t(g,i,c,h),f,x).reverse().join("L")+"M"+y.join("L")}}},23580:function(Q,z,e){"use strict";var k=e(27659).AU,A=e(71828).counterRegex,l=e(77997),T=e(9813),b=T.attr,d=T.name,s=A(d),t={};t[b]={valType:"subplotid",dflt:d,editType:"calc"},Q.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var c=a[i],h=k(n,d,c),f=r[c]._subplot;f||(f=l(o,c),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],c=a._has&&a._has("gl"),h=r._has&&r._has("gl"),f=c&&!h,x=0;x<i.length;x++){var v=i[x],g=a[v]._subplot;if(!r[v]&&g)for(var y in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[y].remove();f&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(93612).toSVG}},73812:function(Q,z,e){"use strict";var k=e(22399),A=e(13838),l=e(27670).Y,T=e(71828).extendFlat,b=e(30962).overrideAll,d=b({color:A.color,showline:T({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:T({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash},"plot","from-root"),s=b({tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickfont:A.tickfont,tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,layer:A.layer},"plot","from-root"),t={visible:T({},A.visible,{dflt:!0}),type:T({},A.type,{values:["-","linear","log","date","category"]}),autotypenumbers:A.autotypenumbers,autorange:T({},A.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},A.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:A.categoryorder,categoryarray:A.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},A.title.text,{editType:"plot",dflt:""}),font:T({},A.title.font,{editType:"plot"}),editType:"plot"},hoverformat:A.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}};T(t,d,s);var o={visible:T({},A.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:A.autotypenumbers,categoryorder:A.categoryorder,categoryarray:A.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:A.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(o,d,s),Q.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:k.background},radialaxis:t,angularaxis:o,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(44467),T=e(49119),b=e(27659).NG,d=e(26218),s=e(38701),t=e(96115),o=e(89426),r=e(15258),n=e(92128),a=e(4322),i=e(73812),c=e(12101),h=e(9813),f=h.axisNames;function x(g,y,p,m){var w=p("bgcolor");m.bgColor=A.combine(w,m.paper_bgcolor);var u=p("sector");p("hole");var S,_=b(m.fullData,h.name,m.id),E=m.layoutOut;function L(X,K){return p(S+"."+X,K)}for(var C=0;C<f.length;C++){k.isPlainObject(g[S=f[C]])||(g[S]={});var P=g[S],I=l.newContainer(y,S);I._id=I._name=S,I._attr=m.id+"."+S,I._traceIndices=_.map(function(X){return X._expandedIndex});var j=h.axisName2dataArray[S],R=v(P,I,L,_,j,m);r(P,I,L,{axData:_,dataAttr:j});var H=L("visible");switch(c(I,y,E),L("uirevision",y.uirevision),I._m=1,S){case"radialaxis":var F=L("autorange",!I.isValidRange(P.range));P.autorange=F,!F||"linear"!==R&&"-"!==R||L("rangemode"),"reversed"===F&&(I._m=-1),L("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===R){k.log("Polar plots do not support date angular axes yet.");for(var U=0;U<_.length;U++)_[U].visible=!1;R=P.type=I.type="linear"}L("linear"===R?"thetaunit":"period");var B=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[B])}if(o(P,I,L,I.type,{tickSuffixDflt:"degrees"===I.thetaunit?"\xb0":void 0}),H){var N,J,Z,V,W=m.font||{};J=(N=L("color"))===P.color?N:W.color,Z=W.size,V=W.family,d(P,I,L,I.type),t(P,I,L,I.type,{font:{color:J,size:Z,family:V}}),s(P,I,L,{outerTicks:!0}),n(P,I,L,{dfltColor:N,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[S]}),L("layer"),"radialaxis"===S&&(L("side"),L("angle",u[0]),L("title.text"),k.coerceFont(L,"title.font",{color:J,size:k.bigFont(Z),family:V}))}"category"!==R&&L("hoverformat"),I._input=P}"category"===y.angularaxis.type&&p("gridshape")}function v(g,y,p,m,w,u){var S=p("autotypenumbers",u.autotypenumbersDflt);if("-"===p("type")){for(var _,E=0;E<m.length;E++)if(m[E].visible){_=m[E];break}_&&_[w]&&(y.type=a(_[w],"gregorian",{noMultiCategory:!0,autotypenumbers:S})),"-"===y.type?y.type="linear":g.type=y.type}return y.type}Q.exports=function(g,y,p){T(g,y,p,{type:h.name,attributes:i,handleDefaults:x,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:p,layoutOut:y})}},77997:function(Q,z,e){"use strict";var k=e(39898),A=e(84267),l=e(73972),T=e(71828),b=T.strRotate,d=T.strTranslate,s=e(7901),t=e(91424),o=e(74875),r=e(89298),n=e(21994),a=e(12101),i=e(71739).doAutoRange,c=e(29323),h=e(28569),f=e(30211),x=e(92998),v=e(47322).prepSelect,g=e(47322).selectOnClick,y=e(47322).clearOutline,p=e(6964),m=e(33306),w=e(61549).redrawReglTraces,u=e(18783).MID_SHIFT,S=e(9813),_=e(10869),E=e(23893),L=E.smith,C=E.reactanceArc,P=E.resistanceArc,I=E.smithTransform,j=T._,R=T.mod,H=T.deg2rad,F=T.rad2deg;function U(V,W,X){this.isSmith=X||!1,this.id=W,this.gd=V,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var K=V._fullLayout;this.clipIds.forTraces="clip"+K._uid+W+"-for-traces",this.clipPaths.forTraces=K._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=K["_"+(X?"smith":"polar")+"layer"].append("g").attr("class",W),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},X||(this.radialTickLayout=null,this.angularTickLayout=null)}var B=U.prototype;function N(V){var W=V.ticks+String(V.ticklen)+String(V.showticklabels);return"side"in V&&(W+=V.side),W}function J(V,W){return W[T.findIndexOfMin(W,function(X){return T.angleDist(V,X)})]}function Z(V,W,X){return W?(V.attr("display",null),V.attr(X)):V&&V.attr("display","none"),V}Q.exports=function(V,W,X){return new U(V,W,X)},B.plot=function(V,W){for(var X=this,K=W[X.id],ne=!1,re=0;re<V.length;re++)if(!1===V[re][0].trace.cliponaxis){ne=!0;break}X._hasClipOnAxisFalse=ne,X.updateLayers(W,K),X.updateLayout(W,K),o.generalUpdatePerTraceModule(X.gd,X,V,K),X.updateFx(W,K),X.isSmith&&(delete K.realaxis.range,delete K.imaginaryaxis.range)},B.updateLayers=function(V,W){var X=this,K=X.isSmith,ne=X.layers,re=X.getRadial(W),ae=X.getAngular(W),le=S.layerNames,pe=le.indexOf("frontplot"),xe=le.slice(0,pe),ye="below traces"===ae.layer,se="below traces"===re.layer;ye&&xe.push("angular-line"),se&&xe.push("radial-line"),ye&&xe.push("angular-axis"),se&&xe.push("radial-axis"),xe.push("frontplot"),ye||xe.push("angular-line"),se||xe.push("radial-line"),ye||xe.push("angular-axis"),se||xe.push("radial-axis");var fe=(K?"smith":"polar")+"sublayer",Ee=X.framework.selectAll("."+fe).data(xe,String);Ee.enter().append("g").attr("class",function(de){return fe+" "+de}).each(function(de){var we=ne[de]=k.select(this);switch(de){case"frontplot":K||we.append("g").classed("barlayer",!0),we.append("g").classed("scatterlayer",!0);break;case"backplot":we.append("g").classed("maplayer",!0);break;case"plotbg":ne.bg=we.append("path");break;case"radial-grid":case"angular-grid":we.style("fill","none");break;case"radial-line":we.append("line").style("fill","none");break;case"angular-line":we.append("path").style("fill","none")}}),Ee.order()},B.updateLayout=function(V,W){var X=this,K=X.layers,ne=V._size,re=X.getRadial(W),ae=X.getAngular(W),le=W.domain.x,pe=W.domain.y;X.xOffset=ne.l+ne.w*le[0],X.yOffset=ne.t+ne.h*(1-pe[1]);var xe=X.xLength=ne.w*(le[1]-le[0]),ye=X.yLength=ne.h*(pe[1]-pe[0]),se=X.getSector(W);X.sectorInRad=se.map(H);var fe,Ee,de,we,ke,tt,at,dt,wt,bt,_t,Lt,Ct,Ot,Ht,Te=X.sectorBBox=(wt=(tt=se)[1]-(dt=tt[0]),_t=(bt=R(dt,360))+wt,Lt=Math.cos(H(bt)),Ct=Math.sin(H(bt)),Ot=Math.cos(H(_t)),Ht=Math.sin(H(_t)),at=bt<=90&&_t>=90||bt>90&&_t>=450?1:Ct<=0&&Ht<=0?0:Math.max(Ct,Ht),[bt<=180&&_t>=180||bt>180&&_t>=540?-1:Lt>=0&&Ot>=0?0:Math.min(Lt,Ot),bt<=270&&_t>=270||bt>270&&_t>=630?-1:Ct>=0&&Ht>=0?0:Math.min(Ct,Ht),_t>=360?1:Lt<=0&&Ot<=0?0:Math.max(Lt,Ot),at]),$=Te[2]-Te[0],he=ye/xe,me=Math.abs((Te[3]-Te[1])/$);he>me?(fe=xe,ke=(ye-(Ee=xe*me))/ne.h/2,de=[le[0],le[1]],we=[pe[0]+ke,pe[1]-ke]):(Ee=ye,ke=(xe-(fe=ye/me))/ne.w/2,de=[le[0]+ke,le[1]-ke],we=[pe[0],pe[1]]),X.xLength2=fe,X.yLength2=Ee,X.xDomain2=de,X.yDomain2=we;var Me,Ie=X.xOffset2=ne.l+ne.w*de[0],Pe=X.yOffset2=ne.t+ne.h*(1-we[1]),ze=X.radius=fe/$,ce=X.innerRadius=X.getHole(W)*ze,ge=X.cx=Ie-ze*Te[0],_e=X.cy=Pe+ze*Te[3],De=X.cxx=ge-Ie,He=X.cyy=_e-Pe,Ve=re.side;"counterclockwise"===Ve?(Me=Ve,Ve="top"):"clockwise"===Ve&&(Me=Ve,Ve="bottom"),X.radialAxis=X.mockAxis(V,W,re,{_id:"x",side:Ve,_trueSide:Me,domain:[ce/ne.w,ze/ne.w]}),X.angularAxis=X.mockAxis(V,W,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),X.doAutoRange(V,W),X.updateAngularAxis(V,W),X.updateRadialAxis(V,W),X.updateRadialAxisTitle(V,W),X.xaxis=X.mockCartesianAxis(V,W,{_id:"x",domain:de}),X.yaxis=X.mockCartesianAxis(V,W,{_id:"y",domain:we});var nt=X.pathSubplot();X.clipPaths.forTraces.select("path").attr("d",nt).attr("transform",d(De,He)),K.frontplot.attr("transform",d(Ie,Pe)).call(t.setClipUrl,X._hasClipOnAxisFalse?null:X.clipIds.forTraces,X.gd),K.bg.attr("d",nt).attr("transform",d(ge,_e)).call(s.fill,W.bgcolor)},B.mockAxis=function(V,W,X,K){var ne=T.extendFlat({},X,K);return a(ne,W,V),ne},B.mockCartesianAxis=function(V,W,X){var K=this,ne=K.isSmith,re=X._id,ae=T.extendFlat({type:"linear"},X);n(ae,V);var le={x:[0,2],y:[1,3]};return ae.setRange=function(){var pe=K.sectorBBox,xe=le[re],ye=K.radialAxis._rl,se=(ye[1]-ye[0])/(1-K.getHole(W));ae.range=[pe[xe[0]]*se,pe[xe[1]]*se]},ae.isPtWithinRange="x"!==re||ne?function(){return!0}:function(pe){return K.isPtInside(pe)},ae.setRange(),ae.setScale(),ae},B.doAutoRange=function(V,W){var X=this,K=X.gd,ne=X.radialAxis,re=X.getRadial(W);i(K,ne);var ae=ne.range;re.range=ae.slice(),re._input.range=ae.slice(),ne._rl=[ne.r2l(ae[0],null,"gregorian"),ne.r2l(ae[1],null,"gregorian")]},B.updateRadialAxis=function(V,W){var X=this,K=X.gd,ne=X.layers,re=X.radius,ae=X.innerRadius,le=X.cx,pe=X.cy,xe=X.getRadial(W),ye=R(X.getSector(W)[0],360),se=X.radialAxis,fe=ae<re,Ee=X.isSmith;Ee||(X.fillViewInitialKey("radialaxis.angle",xe.angle),X.fillViewInitialKey("radialaxis.range",se.range.slice()),se.setGeometry()),"auto"===se.tickangle&&ye>90&&ye<=270&&(se.tickangle=180);var de=Ee?function(Pe){var ze=I(X,L([Pe.x,0]));return d(ze[0]-le,ze[1]-pe)}:function(Pe){return d(se.l2p(Pe.x)+ae,0)},we=Ee?function(Pe){return P(X,Pe.x,-1/0,1/0)}:function(Pe){return X.pathArc(se.r2p(Pe.x)+ae)},ke=N(xe);if(X.radialTickLayout!==ke&&(ne["radial-axis"].selectAll(".xtick").remove(),X.radialTickLayout=ke),fe){se.setScale();var Te=0,$=Ee?(se.tickvals||[]).filter(function(Pe){return Pe>=0}).map(function(Pe){return r.tickText(se,Pe,!0,!1)}):r.calcTicks(se),oe=Ee?$:r.clipEnds(se,$),he=r.getTickSigns(se)[2];Ee&&(("top"===se.ticks&&"bottom"===se.side||"bottom"===se.ticks&&"top"===se.side)&&(he=-he),"top"===se.ticks&&"top"===se.side&&(Te=-se.ticklen),"bottom"===se.ticks&&"bottom"===se.side&&(Te=se.ticklen)),r.drawTicks(K,se,{vals:$,layer:ne["radial-axis"],path:r.makeTickPath(se,0,he),transFn:de,crisp:!1}),r.drawGrid(K,se,{vals:oe,layer:ne["radial-grid"],path:we,transFn:T.noop,crisp:!1}),r.drawLabels(K,se,{vals:$,layer:ne["radial-axis"],transFn:de,labelFns:r.makeLabelFns(se,Te)})}var me=X.radialAxisAngle=X.vangles?F(J(H(xe.angle),X.vangles)):xe.angle,Me=d(le,pe),Ie=Me+b(-me);Z(ne["radial-axis"],fe&&(xe.showticklabels||xe.ticks),{transform:Ie}),Z(ne["radial-grid"],fe&&xe.showgrid,{transform:Ee?"":Me}),Z(ne["radial-line"].select("line"),fe&&xe.showline,{x1:Ee?-re:ae,y1:0,x2:re,y2:0,transform:Ie}).attr("stroke-width",xe.linewidth).call(s.stroke,xe.linecolor)},B.updateRadialAxisTitle=function(V,W,X){if(!this.isSmith){var K=this,ne=K.gd,re=K.radius,ae=K.cx,le=K.cy,pe=K.getRadial(W),xe=K.id+"title",ye=0;if(pe.title){var se=t.bBox(K.layers["radial-axis"].node()).height,fe=pe.title.font.size,Ee=pe.side;ye="top"===Ee?fe:"counterclockwise"===Ee?-(se+.4*fe):se+.8*fe}var de=void 0!==X?X:K.radialAxisAngle,we=H(de),ke=Math.cos(we),Te=Math.sin(we),$=ae+re/2*ke+ye*Te,oe=le-re/2*Te+ye*ke;K.layers["radial-axis-title"]=x.draw(ne,xe,{propContainer:pe,propName:K.id+".radialaxis.title",placeholder:j(ne,"Click to enter radial axis title"),attributes:{x:$,y:oe,"text-anchor":"middle"},transform:{rotate:-de}})}},B.updateAngularAxis=function(V,W){var X=this,K=X.gd,ne=X.layers,re=X.radius,ae=X.innerRadius,le=X.cx,pe=X.cy,xe=X.getAngular(W),ye=X.angularAxis,se=X.isSmith;se||(X.fillViewInitialKey("angularaxis.rotation",xe.rotation),ye.setGeometry(),ye.setScale());var fe=se?function(Pe){var ze=I(X,L([0,Pe.x]));return Math.atan2(ze[0]-le,ze[1]-pe)-Math.PI/2}:function(Pe){return ye.t2g(Pe.x)};"linear"===ye.type&&"radians"===ye.thetaunit&&(ye.tick0=F(ye.tick0),ye.dtick=F(ye.dtick));var Ee=function(Pe){return d(le+re*Math.cos(Pe),pe-re*Math.sin(Pe))},de=se?function(Pe){var ze=I(X,L([0,Pe.x]));return d(ze[0],ze[1])}:function(Pe){return Ee(fe(Pe))},we=se?function(Pe){var ze=I(X,L([0,Pe.x])),ce=Math.atan2(ze[0]-le,ze[1]-pe)-Math.PI/2;return d(ze[0],ze[1])+b(-F(ce))}:function(Pe){var ze=fe(Pe);return Ee(ze)+b(-F(ze))},ke=se?function(Pe){return C(X,Pe.x,0,1/0)}:function(Pe){var ze=fe(Pe),ce=Math.cos(ze),ge=Math.sin(ze);return"M"+[le+ae*ce,pe-ae*ge]+"L"+[le+re*ce,pe-re*ge]},Te=r.makeLabelFns(ye,0).labelStandoff,$={xFn:function(Pe){var ze=fe(Pe);return Math.cos(ze)*Te},yFn:function(Pe){var ze=fe(Pe),ce=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(Te+Pe.fontSize*ce)+Math.abs(Math.cos(ze))*(Pe.fontSize*u)},anchorFn:function(Pe){var ze=fe(Pe),ce=Math.cos(ze);return Math.abs(ce)<.1?"middle":ce>0?"start":"end"},heightFn:function(Pe,ze,ce){var ge=fe(Pe);return-.5*(1+Math.sin(ge))*ce}},oe=N(xe);X.angularTickLayout!==oe&&(ne["angular-axis"].selectAll("."+ye._id+"tick").remove(),X.angularTickLayout=oe);var he,me=se?[1/0].concat(ye.tickvals||[]).map(function(Pe){return r.tickText(ye,Pe,!0,!1)}):r.calcTicks(ye);if(se&&(me[0].text="\u221e",me[0].fontSize*=1.75),"linear"===W.gridshape?(he=me.map(fe),T.angleDelta(he[0],he[1])<0&&(he=he.slice().reverse())):he=null,X.vangles=he,"category"===ye.type&&(me=me.filter(function(Pe){return T.isAngleInsideSector(fe(Pe),X.sectorInRad)})),ye.visible){var Me="inside"===ye.ticks?-1:1;r.drawTicks(K,ye,{vals:me,layer:ne["angular-axis"],path:"M"+Me*((ye.linewidth||1)/2)+",0h"+Me*ye.ticklen,transFn:we,crisp:!1}),r.drawGrid(K,ye,{vals:me,layer:ne["angular-grid"],path:ke,transFn:T.noop,crisp:!1}),r.drawLabels(K,ye,{vals:me,layer:ne["angular-axis"],repositionOnUpdate:!0,transFn:de,labelFns:$})}Z(ne["angular-line"].select("path"),xe.showline,{d:X.pathSubplot(),transform:d(le,pe)}).attr("stroke-width",xe.linewidth).call(s.stroke,xe.linecolor)},B.updateFx=function(V,W){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(V),this.updateRadialDrag(V,W,0),this.updateRadialDrag(V,W,1)),this.updateHoverAndMainDrag(V))},B.updateHoverAndMainDrag=function(V){var W,X,K=this,ne=K.isSmith,re=K.gd,le=V._zoomlayer,pe=S.MINZOOM,xe=S.OFFEDGE,ye=K.radius,se=K.innerRadius,fe=K.cx,Ee=K.cy,de=K.cxx,we=K.cyy,ke=K.sectorInRad,Te=K.vangles,$=K.radialAxis,oe=_.clampTiny,he=_.findXYatLength,me=_.findEnclosingVertexAngles,Me=S.cornerHalfWidth,Ie=S.cornerLen/2,Pe=c.makeDragger(K.layers,"path","maindrag",!1===V.dragmode?"none":"crosshair");k.select(Pe).attr("d",K.pathSubplot()).attr("transform",d(fe,Ee)),Pe.onmousemove=function(Se){f.hover(re,Se,K.id),re._fullLayout._lasthover=Pe,re._fullLayout._hoversubplot=K.id},Pe.onmouseout=function(Se){re._dragging||h.unhover(re,Se)};var ze,ce,ge,_e,De,He,Ve,nt,tt,at={element:Pe,gd:re,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]};function dt(Se,Re){return Math.sqrt(Se*Se+Re*Re)}function wt(Se,Re){return dt(Se-de,Re-we)}function bt(Se,Re){return Math.atan2(we-Re,Se-de)}function _t(Se,Re){return[Se*Math.cos(Re),Se*Math.sin(-Re)]}function Lt(Se,Re){if(0===Se)return K.pathSector(2*Me);var Ke=Ie/Se,st=Re-Ke,ct=Re+Ke,Tt=Math.max(0,Math.min(Se,ye)),Et=Tt-Me,At=Tt+Me;return"M"+_t(Et,st)+"A"+[Et,Et]+" 0,0,0 "+_t(Et,ct)+"L"+_t(At,ct)+"A"+[At,At]+" 0,0,1 "+_t(At,st)+"Z"}function Ct(Se,Re,Ke){if(0===Se)return K.pathSector(2*Me);var st,ct,Tt=_t(Se,Re),Et=_t(Se,Ke),At=oe((Tt[0]+Et[0])/2),ht=oe((Tt[1]+Et[1])/2);if(At&&ht){var pt=ht/At,gt=-1/pt,Pt=he(Me,pt,At,ht);st=he(Ie,gt,Pt[0][0],Pt[0][1]),ct=he(Ie,gt,Pt[1][0],Pt[1][1])}else{var zt,Ut;ht?(zt=Ie,Ut=Me):(zt=Me,Ut=Ie),st=[[At-zt,ht-Ut],[At+zt,ht-Ut]],ct=[[At-zt,ht+Ut],[At+zt,ht+Ut]]}return"M"+st.join("L")+"L"+ct.reverse().join("L")+"Z"}function Ot(Se,Re){return Re=Math.max(Math.min(Re,ye),se),Se<xe?Se=0:ye-Se<xe?Se=ye:Re<xe?Re=0:ye-Re<xe&&(Re=ye),Math.abs(Re-Se)>pe?(Se<Re?(ge=Se,_e=Re):(ge=Re,_e=Se),!0):(ge=null,_e=null,!1)}function Ht(Se,Re){Re=Re||"M0,0Z",nt.attr("d",Se=Se||De),tt.attr("d",Re),c.transitionZoombox(nt,tt,He,Ve),He=!0;var Ke={};Ye(Ke),re.emit("plotly_relayouting",Ke)}function It(Se,Re){var Ke,st,ct=ze+(Se*=W),Tt=ce+(Re*=X),Et=wt(ze,ce),At=Math.min(wt(ct,Tt),ye),ht=bt(ze,ce);Ot(Et,At)&&(Ke=De+K.pathSector(_e),ge&&(Ke+=K.pathSector(ge)),st=Lt(ge,ht)+Lt(_e,ht)),Ht(Ke,st)}function Ge(Se,Re,Ke,st){var ct=_.findIntersectionXY(Ke,st,Ke,[Se-de,we-Re]);return dt(ct[0],ct[1])}function Ze(Se,Re){var Ke,st,ct=ze+Se,Tt=ce+Re,Et=bt(ze,ce),At=bt(ct,Tt),ht=me(Et,Te),pt=me(At,Te);Ot(Ge(ze,ce,ht[0],ht[1]),Math.min(Ge(ct,Tt,pt[0],pt[1]),ye))&&(Ke=De+K.pathSector(_e),ge&&(Ke+=K.pathSector(ge)),st=[Ct(ge,ht[0],ht[1]),Ct(_e,ht[0],ht[1])].join(" ")),Ht(Ke,st)}function Be(){if(c.removeZoombox(re),null!==ge&&null!==_e){var Se={};Ye(Se),c.showDoubleClickNotifier(re),l.call("_guiRelayout",re,Se)}}function Ye(Se){var Re=$._rl,Ke=(Re[1]-Re[0])/(1-se/ye)/ye;Se[K.id+".radialaxis.range"]=[Re[0]+(ge-se)*Ke,Re[0]+(_e-se)*Ke]}function rt(Se,Re){var Ke=re._fullLayout.clickmode;if(c.removeZoombox(re),2===Se){var st={};for(var ct in K.viewInitial)st[K.id+"."+ct]=K.viewInitial[ct];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,st)}Ke.indexOf("select")>-1&&1===Se&&g(Re,re,[K.xaxis],[K.yaxis],K.id,at),Ke.indexOf("event")>-1&&f.click(re,Re,K.id)}at.prepFn=function(Se,Re,Ke){var st=re._fullLayout.dragmode,ct=Pe.getBoundingClientRect();re._fullLayout._calcInverseTransform(re),W=re._fullLayout._invScaleX,X=re._fullLayout._invScaleY;var Et=T.apply3DTransform(re._fullLayout._invTransform)(Re-ct.left,Ke-ct.top);if(ze=Et[0],ce=Et[1],Te){var At=_.findPolygonOffset(ye,ke[0],ke[1],Te);ze+=de+At[0],ce+=we+At[1]}switch(st){case"zoom":at.clickFn=rt,ne||(at.moveFn=Te?Ze:It,at.doneFn=Be,ge=null,_e=null,De=K.pathSubplot(),He=!1,Ve=A(re._fullLayout[K.id].bgcolor).getLuminance(),(nt=c.makeZoombox(le,Ve,fe,Ee,De)).attr("fill-rule","evenodd"),tt=c.makeCorners(le,fe,Ee),y(re));break;case"select":case"lasso":v(Se,Re,Ke,at,st)}},h.init(at)},B.updateRadialDrag=function(V,W,X){var K=this,ne=K.gd,re=K.layers,ae=K.radius,le=K.innerRadius,pe=K.cx,xe=K.cy,ye=K.radialAxis,se=S.radialDragBoxSize,fe=se/2;if(ye.visible){var Ee,de,we,ke=H(K.radialAxisAngle),Te=ye._rl,$=Te[0],oe=Te[1],he=Te[X],me=.75*(Te[1]-Te[0])/(1-K.getHole(W))/ae;X?(Ee=pe+(ae+fe)*Math.cos(ke),de=xe-(ae+fe)*Math.sin(ke),we="radialdrag"):(Ee=pe+(le-fe)*Math.cos(ke),de=xe-(le-fe)*Math.sin(ke),we="radialdrag-inner");var Me,Ie,Pe,ze=c.makeRectDragger(re,we,"crosshair",-fe,-fe,se,se),ce={element:ze,gd:ne};!1===V.dragmode&&(ce.dragmode=!1),Z(k.select(ze),ye.visible&&le<ae,{transform:d(Ee,de)}),ce.prepFn=function(){Me=null,Ie=null,Pe=null,ce.moveFn=ge,ce.doneFn=_e,y(ne)},ce.clampFn=function(Ve,nt){return Math.sqrt(Ve*Ve+nt*nt)<S.MINDRAG&&(Ve=0,nt=0),[Ve,nt]},h.init(ce)}function ge(Ve,nt){if(Me)Me(Ve,nt);else{var tt=[Ve,-nt],at=[Math.cos(ke),Math.sin(ke)],dt=Math.abs(T.dot(tt,at)/Math.sqrt(T.dot(tt,tt)));isNaN(dt)||(Me=dt<.5?De:He)}var bt,wt={};bt=wt,null!==Ie?bt[K.id+".radialaxis.angle"]=Ie:null!==Pe&&(bt[K.id+".radialaxis.range["+X+"]"]=Pe),ne.emit("plotly_relayouting",wt)}function _e(){null!==Ie?l.call("_guiRelayout",ne,K.id+".radialaxis.angle",Ie):null!==Pe&&l.call("_guiRelayout",ne,K.id+".radialaxis.range["+X+"]",Pe)}function De(Ve,nt){if(0!==X){Ie=Math.atan2(xe-(de+nt),Ee+Ve-pe),K.vangles&&(Ie=J(Ie,K.vangles)),Ie=F(Ie);var dt=d(pe,xe)+b(-Ie);re["radial-axis"].attr("transform",dt),re["radial-line"].select("line").attr("transform",dt);var wt=K.gd._fullLayout;K.updateRadialAxisTitle(wt,wt[K.id],Ie)}}function He(Ve,nt){var tt=T.dot([Ve,-nt],[Math.cos(ke),Math.sin(ke)]);if(Pe=he-me*tt,me>0==(X?Pe>$:Pe<oe)){var at=ne._fullLayout,dt=at[K.id];ye.range[X]=Pe,ye._rl[X]=Pe,K.updateRadialAxis(at,dt),K.xaxis.setRange(),K.xaxis.setScale(),K.yaxis.setRange(),K.yaxis.setScale();var wt=!1;for(var bt in K.traceHash){var _t=K.traceHash[bt],Lt=T.filterVisible(_t);_t[0][0].trace._module.plot(ne,K,Lt,dt),l.traceIs(bt,"gl")&&Lt.length&&(wt=!0)}wt&&(m(ne),w(ne))}else Pe=null}},B.updateAngularDrag=function(V){var W=this,X=W.gd,K=W.layers,ne=W.radius,re=W.angularAxis,ae=W.cx,le=W.cy,pe=W.cxx,xe=W.cyy,ye=S.angularDragBoxSize,se=c.makeDragger(K,"path","angulardrag",!1===V.dragmode?"none":"move"),fe={element:se,gd:X};function Ee(ce,ge){return Math.atan2(xe+ye-ge,ce-pe-ye)}!1===V.dragmode?fe.dragmode=!1:k.select(se).attr("d",W.pathAnnulus(ne,ne+ye)).attr("transform",d(ae,le)).call(p,"move");var de,we,ke,Te,$,oe,he=K.frontplot.select(".scatterlayer").selectAll(".trace"),me=he.selectAll(".point"),Me=he.selectAll(".textpoint");function Ie(ce,ge){var _e=W.gd._fullLayout,De=_e[W.id],He=Ee(de+ce*V._invScaleX,we+ge*V._invScaleY),Ve=F(He-oe);if(Te=ke+Ve,K.frontplot.attr("transform",d(W.xOffset2,W.yOffset2)+b([-Ve,pe,xe])),W.vangles){$=W.radialAxisAngle+Ve;var nt=d(ae,le)+b(-Ve),tt=d(ae,le)+b(-$);K.bg.attr("transform",nt),K["radial-grid"].attr("transform",nt),K["radial-axis"].attr("transform",tt),K["radial-line"].select("line").attr("transform",tt),W.updateRadialAxisTitle(_e,De,$)}else W.clipPaths.forTraces.select("path").attr("transform",d(pe,xe)+b(Ve));me.each(function(){var Lt=k.select(this),Ct=t.getTranslate(Lt);Lt.attr("transform",d(Ct.x,Ct.y)+b([Ve]))}),Me.each(function(){var Lt=k.select(this),Ct=Lt.select("text"),Ot=t.getTranslate(Lt);Lt.attr("transform",b([Ve,Ct.attr("x"),Ct.attr("y")])+d(Ot.x,Ot.y))}),re.rotation=T.modHalf(Te,360),W.updateAngularAxis(_e,De),W._hasClipOnAxisFalse&&!T.isFullCircle(W.sectorInRad)&&he.call(t.hideOutsideRangePoints,W);var at=!1;for(var dt in W.traceHash)if(l.traceIs(dt,"gl")){var wt=W.traceHash[dt],bt=T.filterVisible(wt);wt[0][0].trace._module.plot(X,W,bt,De),bt.length&&(at=!0)}at&&(m(X),w(X));var _t={};Pe(_t),X.emit("plotly_relayouting",_t)}function Pe(ce){ce[W.id+".angularaxis.rotation"]=Te,W.vangles&&(ce[W.id+".radialaxis.angle"]=$)}function ze(){Me.select("text").attr("transform",null);var ce={};Pe(ce),l.call("_guiRelayout",X,ce)}fe.prepFn=function(ce,ge,_e){ke=V[W.id].angularaxis.rotation;var He=se.getBoundingClientRect();de=ge-He.left,we=_e-He.top,X._fullLayout._calcInverseTransform(X);var Ve=T.apply3DTransform(V._invTransform)(de,we);oe=Ee(de=Ve[0],we=Ve[1]),fe.moveFn=Ie,fe.doneFn=ze,y(X)},W.vangles&&!T.isFullCircle(W.sectorInRad)&&(fe.prepFn=T.noop,p(k.select(se),null)),h.init(fe)},B.isPtInside=function(V){if(this.isSmith)return!0;var W=this.sectorInRad,X=this.vangles,K=this.angularAxis.c2g(V.theta),ne=this.radialAxis,re=ne.c2l(V.r);return(X?_.isPtInsidePolygon:T.isPtInsideSector)(re,K,ne._rl,W,X)},B.pathArc=function(V){var W=this.sectorInRad,X=this.vangles;return(X?_.pathPolygon:T.pathArc)(V,W[0],W[1],X)},B.pathSector=function(V){var W=this.sectorInRad,X=this.vangles;return(X?_.pathPolygon:T.pathSector)(V,W[0],W[1],X)},B.pathAnnulus=function(V,W){var X=this.sectorInRad,K=this.vangles;return(K?_.pathPolygonAnnulus:T.pathAnnulus)(V,W,X[0],X[1],K)},B.pathSubplot=function(){var V=this.innerRadius,W=this.radius;return V?this.pathAnnulus(V,W):this.pathSector(W)},B.fillViewInitialKey=function(V,W){V in this.viewInitial||(this.viewInitial[V]=W)}},12101:function(Q,z,e){"use strict";var k=e(71828),A=e(21994),l=k.deg2rad,T=k.rad2deg;Q.exports=function(b,d,s){switch(A(b,s),b._id){case"x":case"radialaxis":r=d._subplot,(t=b).setGeometry=function(){var n=t._rl[0],a=t._rl[1],i=r.innerRadius,c=(r.radius-i)/(a-n),h=i/c,f=n>a?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var v=t.c2l(x)-n;return(f(v)?v:0)+h},t.g2c=function(x){return t.l2c(x+n-h)},t.g2p=function(x){return x*c},t.c2p=function(x){return t.g2p(t.c2g(x))}};break;case"angularaxis":!function(t,o){var r=t.type;if("linear"===r){var n=t.d2c,a=t.c2d;t.d2c=function(i,c){return h=n(i),"degrees"===c?l(h):h;var h},t.c2d=function(i,c){return a((h=i,"degrees"===c?T(h):h));var h}}t.makeCalcdata=function(i,c){var h,f,x=i[c],v=i._length,g=function(u){return t.d2c(u,i.thetaunit)};if(x){if(k.isTypedArray(x)&&"linear"===r){if(v===x.length)return x;if(x.subarray)return x.subarray(0,v)}for(h=new Array(v),f=0;f<v;f++)h[f]=g(x[f])}else{var y=c+"0",p="d"+c,m=y in i?g(i[y]):0,w=i[p]?g(i[p]):(t.period||2*Math.PI)/v;for(h=new Array(v),f=0;f<v;f++)h[f]=m+f*w}return h},t.setGeometry=function(){var i,c,h,f,x=o.sector,v=x.map(l),g={clockwise:-1,counterclockwise:1}[t.direction],y=l(t.rotation),p=function(S){return g*S+y},m=function(S){return(S-y)/g};switch(r){case"linear":c=i=k.identity,f=l,h=T,t.range=k.isFullCircle(v)?[x[0],x[0]+360]:v.map(m).map(T);break;case"category":var w=t._categories.length,u=t.period?Math.max(t.period,w):w;0===u&&(u=1),c=f=function(S){return 2*S*Math.PI/u},i=h=function(S){return S*u/Math.PI/2},t.range=[0,u]}t.c2g=function(S){return p(c(S))},t.g2c=function(S){return i(m(S))},t.t2g=function(S){return p(f(S))},t.g2t=function(S){return h(m(S))}}}(b,d)}var t,r}},39779:function(Q){"use strict";Q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(Q){"use strict";function z(l){return l<0?-1:l>0?1:0}function e(l){var T=l[0],b=l[1];if(!isFinite(T)||!isFinite(b))return[1,0];var d=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/d,2*b/d]}function k(l,T){return[T[0]*l.radius+l.cx,-T[1]*l.radius+l.cy]}function A(l,T){return T*l.radius}Q.exports={smith:e,reactanceArc:function(l,T,b,d){var s=k(l,e([b,T])),t=s[0],o=s[1],r=k(l,e([d,T])),n=r[0],a=r[1];if(0===T)return["M"+t+","+o,"L"+n+","+a].join(" ");var i=A(l,1/Math.abs(T));return["M"+t+","+o,"A"+i+","+i+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(l,T,b,d){var s=A(l,1/(T+1)),t=k(l,e([T,b])),o=t[0],r=t[1],n=k(l,e([T,d])),a=n[0],i=n[1];if(z(b)!==z(d)){var c=k(l,e([T,0]));return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(d<0?0:1)+a+","+i].join(" ")}return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(d<b?0:1)+" "+a+","+i].join(" ")},smithTransform:k}},7504:function(Q,z,e){"use strict";var k=e(27659).AU,A=e(71828).counterRegex,l=e(77997),T=e(39779),b=T.attr,d=T.name,s=A(d),t={};t[b]={valType:"subplotid",dflt:d,editType:"calc"},Q.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var c=a[i],h=k(n,d,c),f=r[c]._subplot;f||(f=l(o,c,!0),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],c=0;c<i.length;c++){var h=i[c],f=a[h]._subplot;if(!r[h]&&f)for(var x in f.framework.remove(),f.clipPaths)f.clipPaths[x].remove()}},toSVG:e(93612).toSVG}},33419:function(Q,z,e){"use strict";var k=e(22399),A=e(13838),l=e(27670).Y,T=e(71828).extendFlat,b=e(30962).overrideAll,d=b({color:A.color,showline:T({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:T({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash},"plot","from-root"),s=b({ticklen:A.ticklen,tickwidth:T({},A.tickwidth,{dflt:2}),tickcolor:A.tickcolor,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,tickfont:A.tickfont,tickformat:A.tickformat,hoverformat:A.hoverformat,layer:A.layer},"plot","from-root"),t=T({visible:T({},A.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},A.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},d,s),o=T({visible:T({},A.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:A.ticks,editType:"calc"},d,s);Q.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:k.background},realaxis:t,imaginaryaxis:o,editType:"calc"}},9558:function(Q,z,e){"use strict";var k,A,l,T=e(71828),b=e(7901),d=e(44467),s=e(49119),t=e(27659).NG,o=e(89426),r=e(96115),n=e(92128),a=e(21994),i=e(33419),c=e(39779),h=c.axisNames,f=(k=function(v){return v.slice().reverse().map(function(g){return-g}).concat([0]).concat(v)},A=String,l={},function(v){var g=A?A(v):v;if(g in l)return l[g];var y=k(v);return l[g]=y,y});function x(v,g,y,p){var m=y("bgcolor");p.bgColor=b.combine(m,p.paper_bgcolor);var w,u=t(p.fullData,c.name,p.id),S=p.layoutOut;function _(B,N){return y(w+"."+B,N)}for(var E=0;E<h.length;E++){T.isPlainObject(v[w=h[E]])||(v[w]={});var L=v[w],C=d.newContainer(g,w);C._id=C._name=w,C._attr=p.id+"."+w,C._traceIndices=u.map(function(B){return B._expandedIndex});var P=_("visible");if(C.type="linear",a(C,S),o(L,C,_,C.type),P){var I,j,R,H,F="realaxis"===w;F&&_("side"),F?_("tickvals"):_("tickvals",f(g.realaxis.tickvals||i.realaxis.tickvals.dflt));var U=p.font||{};P&&(j=(I=_("color"))===L.color?I:U.color,R=U.size,H=U.family),r(L,C,_,C.type,{noTicklabelstep:!0,noAng:!F,noExp:!0,font:{color:j,size:R,family:H}}),T.coerce2(v,g,i,w+".ticklen"),T.coerce2(v,g,i,w+".tickwidth"),T.coerce2(v,g,i,w+".tickcolor",g.color),_("ticks")||(delete g[w].ticklen,delete g[w].tickwidth,delete g[w].tickcolor),n(L,C,_,{dfltColor:I,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[w]}),_("layer")}_("hoverformat"),delete C.type,C._input=L}}Q.exports=function(v,g,y){s(v,g,y,{noUirevision:!0,type:c.name,attributes:i,handleDefaults:x,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:y,layoutOut:g})}},49119:function(Q,z,e){"use strict";var k=e(71828),A=e(44467),l=e(27670).c;Q.exports=function(T,b,d,s){var t,o,n=s.attributes,a=s.handleDefaults,i=s.partition||"x",c=b._subplots[s.type],h=c.length,f=h&&c[0].replace(/\d+$/,"");function x(p,m){return k.coerce(t,o,n,p,m)}for(var v=0;v<h;v++){var g=c[v];t=T[g]?T[g]:T[g]={},o=A.newContainer(b,g,f),s.noUirevision||x("uirevision",b.uirevision);var y={};y[i]=[v/h,(v+1)/h],l(o,b,x,y),s.id=g,a(t,o,x,s)}}},5386:function(Q,z,e){"use strict";function A(l){var T=l.description?" "+l.description:"",b=l.keys||[];if(b.length>0){for(var d=[],s=0;s<b.length;s++)d[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=1===b.length?"variable "+d[0]:"variables "+d.slice(0,-1).join(", ")+" and "+d.slice(-1)+"."}return T}e(31562),z.f=function(l,T){l=l||{},A(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"none"};return!1!==l.arrayOk&&(b.arrayOk=!0),b},z.s=function(l,T){l=l||{},A(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"calc"};return!1!==l.arrayOk&&(b.arrayOk=!0),b}},61639:function(Q,z,e){"use strict";var k=e(64380),A=e(27659).AU,l=e(71828).counterRegex,T="ternary";z.name=T;var b=z.attr="subplot";z.idRoot=T,z.idRegex=z.attrRegex=l(T),(z.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},z.layoutAttributes=e(81367),z.supplyLayoutDefaults=e(25369),z.plot=function(d){for(var s=d._fullLayout,t=d.calcdata,o=s._subplots.ternary,r=0;r<o.length;r++){var n=o[r],a=A(t,T,n),i=s[n]._subplot;i||(i=new k({id:n,graphDiv:d,container:s._ternarylayer.node()},s),s[n]._subplot=i),i.plot(a,s,d._promises)}},z.clean=function(d,s,t,o){for(var r=o._subplots.ternary||[],n=0;n<r.length;n++){var a=r[n],i=o[a]._subplot;!s[a]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},81367:function(Q,z,e){"use strict";var k=e(22399),A=e(27670).Y,l=e(13838),T=e(30962).overrideAll,b=e(1426).extendFlat,d={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:b({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:b({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:b({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=Q.exports=T({domain:A({name:"ternary"}),bgcolor:{valType:"color",dflt:k.background},sum:{valType:"number",dflt:1,min:0},aaxis:d,baxis:d,caxis:d},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function(Q,z,e){"use strict";var k=e(7901),A=e(44467),l=e(71828),T=e(49119),b=e(96115),d=e(89426),s=e(38701),t=e(26218),o=e(92128),r=e(81367),n=["aaxis","baxis","caxis"];function a(c,h,f,x){var v,g,y,p=f("bgcolor"),m=f("sum");x.bgColor=k.combine(p,x.paper_bgcolor);for(var w=0;w<n.length;w++)g=c[v=n[w]]||{},(y=A.newContainer(h,v))._name=v,i(g,y,x,h);var u=h.aaxis,S=h.baxis,_=h.caxis;u.min+S.min+_.min>=m&&(u.min=0,S.min=0,_.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function i(c,h,f,x){var v=r[h._name];function g(S,_){return l.coerce(c,h,v,S,_)}g("uirevision",x.uirevision),h.type="linear";var y=g("color"),p=y!==v.color.dflt?y:f.font.color,m=h._name.charAt(0).toUpperCase(),w="Component "+m,u=g("title.text",w);h._hovertitle=u===w?u:m,l.coerceFont(g,"title.font",{family:f.font.family,size:l.bigFont(f.font.size),color:p}),g("min"),t(c,h,g,"linear"),d(c,h,g,"linear"),b(c,h,g,"linear"),s(c,h,g,{outerTicks:!0}),g("showticklabels")&&(l.coerceFont(g,"tickfont",{family:f.font.family,size:f.font.size,color:p}),g("tickangle"),g("tickformat")),o(c,h,g,{dfltColor:y,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),g("hoverformat"),g("layer")}Q.exports=function(c,h,f){T(c,h,f,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},64380:function(Q,z,e){"use strict";var k=e(39898),A=e(84267),l=e(73972),T=e(71828),b=T.strTranslate,d=T._,s=e(7901),t=e(91424),o=e(21994),r=e(1426).extendFlat,n=e(74875),a=e(89298),i=e(28569),c=e(30211),h=e(64505),f=h.freeMode,x=h.rectMode,v=e(92998),g=e(47322).prepSelect,y=e(47322).selectOnClick,p=e(47322).clearOutline,m=e(47322).clearSelectionsCache,w=e(85555);function u(R,H){this.id=R.id,this.graphDiv=R.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Q.exports=u;var S=u.prototype;S.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},S.plot=function(R,H){var F=this,U=H[F.id],B=H._size;F._hasClipOnAxisFalse=!1;for(var N=0;N<R.length;N++)if(!1===R[N][0].trace.cliponaxis){F._hasClipOnAxisFalse=!0;break}F.updateLayers(U),F.adjustLayout(U,B),n.generalUpdatePerTraceModule(F.graphDiv,F,R,U),F.layers.plotbg.select("path").call(s.fill,U.bgcolor)},S.makeFramework=function(R){var H=this,F=H.graphDiv,U=R[H.id],B=H.clipId="clip"+H.layoutId+H.id,N=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=T.ensureSingleById(R._clips,"clipPath",B,function(J){J.append("path").attr("d","M0,0Z")}),H.clipDefRelative=T.ensureSingleById(R._clips,"clipPath",N,function(J){J.append("path").attr("d","M0,0Z")}),H.plotContainer=T.ensureSingle(H.container,"g",H.id),H.updateLayers(U),t.setClipUrl(H.layers.backplot,B,F),t.setClipUrl(H.layers.grids,B,F)},S.updateLayers=function(R){var H=this.layers,F=["draglayer","plotbg","backplot","grids"];"below traces"===R.aaxis.layer&&F.push("aaxis","aline"),"below traces"===R.baxis.layer&&F.push("baxis","bline"),"below traces"===R.caxis.layer&&F.push("caxis","cline"),F.push("frontplot"),"above traces"===R.aaxis.layer&&F.push("aaxis","aline"),"above traces"===R.baxis.layer&&F.push("baxis","bline"),"above traces"===R.caxis.layer&&F.push("caxis","cline");var U=this.plotContainer.selectAll("g.toplevel").data(F,String),B=["agrid","bgrid","cgrid"];U.enter().append("g").attr("class",function(N){return"toplevel "+N}).each(function(N){var J=k.select(this);H[N]=J,"frontplot"===N?J.append("g").classed("scatterlayer",!0):"backplot"===N?J.append("g").classed("maplayer",!0):"plotbg"===N?J.append("path").attr("d","M0,0Z"):"aline"===N||"bline"===N||"cline"===N?J.append("path"):"grids"===N&&B.forEach(function(Z){H[Z]=J.append("g").classed("grid "+Z,!0)})}),U.order()};var _=Math.sqrt(4/3);S.adjustLayout=function(R,H){var F,U,B,N,J,Z,V=this,W=R.domain,X=(W.x[0]+W.x[1])/2,K=(W.y[0]+W.y[1])/2,ne=W.x[1]-W.x[0],re=W.y[1]-W.y[0],ae=ne*H.w,le=re*H.h,pe=R.sum,xe=R.aaxis.min,ye=R.baxis.min,se=R.caxis.min;ae>_*le?B=(N=le)*_:N=(B=ae)/_,J=ne*B/ae,Z=re*N/le,U=H.t+H.h*(1-K)-N/2,V.x0=F=H.l+H.w*X-B/2,V.y0=U,V.w=B,V.h=N,V.sum=pe,V.xaxis={type:"linear",range:[xe+2*se-pe,pe-xe-2*ye],domain:[X-J/2,X+J/2],_id:"x"},o(V.xaxis,V.graphDiv._fullLayout),V.xaxis.setScale(),V.xaxis.isPtWithinRange=function(Me){return Me.a>=V.aaxis.range[0]&&Me.a<=V.aaxis.range[1]&&Me.b>=V.baxis.range[1]&&Me.b<=V.baxis.range[0]&&Me.c>=V.caxis.range[1]&&Me.c<=V.caxis.range[0]},V.yaxis={type:"linear",range:[xe,pe-ye-se],domain:[K-Z/2,K+Z/2],_id:"y"},o(V.yaxis,V.graphDiv._fullLayout),V.yaxis.setScale(),V.yaxis.isPtWithinRange=function(){return!0};var fe=V.yaxis.domain[0],Ee=V.aaxis=r({},R.aaxis,{range:[xe,pe-ye-se],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[fe,fe+Z*_],anchor:"free",position:0,_id:"y",_length:B});o(Ee,V.graphDiv._fullLayout),Ee.setScale();var de=V.baxis=r({},R.baxis,{range:[pe-xe-se,ye],side:"bottom",domain:V.xaxis.domain,anchor:"free",position:0,_id:"x",_length:B});o(de,V.graphDiv._fullLayout),de.setScale();var we=V.caxis=r({},R.caxis,{range:[pe-xe-ye,se],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[fe,fe+Z*_],anchor:"free",position:0,_id:"y",_length:B});o(we,V.graphDiv._fullLayout),we.setScale();var ke="M"+F+","+(U+N)+"h"+B+"l-"+B/2+",-"+N+"Z";V.clipDef.select("path").attr("d",ke),V.layers.plotbg.select("path").attr("d",ke);var Te="M0,"+N+"h"+B+"l-"+B/2+",-"+N+"Z";V.clipDefRelative.select("path").attr("d",Te);var $=b(F,U);V.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",$),V.clipDefRelative.select("path").attr("transform",null);var oe=b(F-de._offset,U+N);V.layers.baxis.attr("transform",oe),V.layers.bgrid.attr("transform",oe);var he=b(F+B/2,U)+"rotate(30)"+b(0,-Ee._offset);V.layers.aaxis.attr("transform",he),V.layers.agrid.attr("transform",he);var me=b(F+B/2,U)+"rotate(-30)"+b(0,-we._offset);V.layers.caxis.attr("transform",me),V.layers.cgrid.attr("transform",me),V.drawAxes(!0),V.layers.aline.select("path").attr("d",Ee.showline?"M"+F+","+(U+N)+"l"+B/2+",-"+N:"M0,0").call(s.stroke,Ee.linecolor||"#000").style("stroke-width",(Ee.linewidth||0)+"px"),V.layers.bline.select("path").attr("d",de.showline?"M"+F+","+(U+N)+"h"+B:"M0,0").call(s.stroke,de.linecolor||"#000").style("stroke-width",(de.linewidth||0)+"px"),V.layers.cline.select("path").attr("d",we.showline?"M"+(F+B/2)+","+U+"l"+B/2+","+N:"M0,0").call(s.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),V.graphDiv._context.staticPlot||V.initInteractions(),t.setClipUrl(V.layers.frontplot,V._hasClipOnAxisFalse?null:V.clipId,V.graphDiv)},S.drawAxes=function(R){var H=this,F=H.graphDiv,U=H.id.substr(7)+"title",B=H.layers,N=H.aaxis,J=H.baxis,Z=H.caxis;if(H.drawAx(N),H.drawAx(J),H.drawAx(Z),R){var V=Math.max(N.showticklabels?N.tickfont.size/2:0,(Z.showticklabels?.75*Z.tickfont.size:0)+("outside"===Z.ticks?.87*Z.ticklen:0)),W=(J.showticklabels?J.tickfont.size:0)+("outside"===J.ticks?J.ticklen:0)+3;B["a-title"]=v.draw(F,"a"+U,{propContainer:N,propName:H.id+".aaxis.title",placeholder:d(F,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-N.title.font.size/3-V,"text-anchor":"middle"}}),B["b-title"]=v.draw(F,"b"+U,{propContainer:J,propName:H.id+".baxis.title",placeholder:d(F,"Click to enter Component B title"),attributes:{x:H.x0-W,y:H.y0+H.h+.83*J.title.font.size+W,"text-anchor":"middle"}}),B["c-title"]=v.draw(F,"c"+U,{propContainer:Z,propName:H.id+".caxis.title",placeholder:d(F,"Click to enter Component C title"),attributes:{x:H.x0+H.w+W,y:H.y0+H.h+.83*Z.title.font.size+W,"text-anchor":"middle"}})}},S.drawAx=function(R){var H,F=this,U=F.graphDiv,B=R._name,N=B.charAt(0),J=R._id,Z=F.layers[B],V=N+"tickLayout",W=(H=R).ticks+String(H.ticklen)+String(H.showticklabels);F[V]!==W&&(Z.selectAll("."+J+"tick").remove(),F[V]=W),R.setScale();var X=a.calcTicks(R),K=a.clipEnds(R,X),ne=a.makeTransTickFn(R),re=a.getTickSigns(R)[2],ae=T.deg2rad(30),le=re*(R.linewidth||1)/2,pe=re*R.ticklen,xe=F.w,ye=F.h,se="b"===N?"M0,"+le+"l"+Math.sin(ae)*pe+","+Math.cos(ae)*pe:"M"+le+",0l"+Math.cos(ae)*pe+","+-Math.sin(ae)*pe,fe={a:"M0,0l"+ye+",-"+xe/2,b:"M0,0l-"+xe/2+",-"+ye,c:"M0,0l-"+ye+","+xe/2}[N];a.drawTicks(U,R,{vals:"inside"===R.ticks?K:X,layer:Z,path:se,transFn:ne,crisp:!1}),a.drawGrid(U,R,{vals:K,layer:F.layers[N+"grid"],path:fe,transFn:ne,crisp:!1}),a.drawLabels(U,R,{vals:X,layer:Z,transFn:ne,labelFns:a.makeLabelFns(R,0,30)})};var E=w.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",I=!0;function j(R){k.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),p(this.dragOptions.gd)},S.initInteractions=function(){var R,H,F,U,B,N,J,Z,V,W,X,K,ne=this,re=ne.layers.plotbg.select("path").node(),ae=ne.graphDiv,le=ae._fullLayout._zoomlayer;function pe(Te){var $={};return $[ne.id+".aaxis.min"]=Te.a,$[ne.id+".baxis.min"]=Te.b,$[ne.id+".caxis.min"]=Te.c,$}function xe(Te,$){var oe=ae._fullLayout.clickmode;j(ae),2===Te&&(ae.emit("plotly_doubleclick",null),l.call("_guiRelayout",ae,pe({a:0,b:0,c:0}))),oe.indexOf("select")>-1&&1===Te&&y($,ae,[ne.xaxis],[ne.yaxis],ne.id,ne.dragOptions),oe.indexOf("event")>-1&&c.click(ae,$,ne.id)}function ye(Te,$){return 1-$/ne.h}function se(Te,$){return 1-(Te+(ne.h-$)/Math.sqrt(3))/ne.w}function fe(Te,$){return(Te-(ne.h-$)/Math.sqrt(3))/ne.w}function Ee(Te,$){var oe=F+Te*R,he=U+$*H,me=Math.max(0,Math.min(1,ye(0,U),ye(0,he))),Me=Math.max(0,Math.min(1,se(F,U),se(oe,he))),Ie=Math.max(0,Math.min(1,fe(F,U),fe(oe,he))),Pe=(me/2+Ie)*ne.w,ze=(1-me/2-Me)*ne.w,ce=(Pe+ze)/2,ge=ze-Pe,_e=(1-me)*ne.h,De=_e-ge/_;ge<w.MINZOOM?(J=B,X.attr("d",V),K.attr("d","M0,0Z")):(J={a:B.a+me*N,b:B.b+Me*N,c:B.c+Ie*N},X.attr("d",V+"M"+Pe+","+_e+"H"+ze+"L"+ce+","+De+"L"+Pe+","+_e+"Z"),K.attr("d","M"+F+","+U+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Pe+","+_e+L+"M"+ze+","+_e+C+"M"+ce+","+De+P)),W||(X.transition().style("fill",Z>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),K.transition().style("opacity",1).duration(200),W=!0),ae.emit("plotly_relayouting",pe(J))}function de(){j(ae),J!==B&&(l.call("_guiRelayout",ae,pe(J)),I&&ae.data&&ae._context.showTips&&(T.notifier(d(ae,"Double-click to zoom back out"),"long"),I=!1))}function we(Te,$){var oe=Te/ne.xaxis._m,he=$/ne.yaxis._m,me=[(J={a:B.a-he,b:B.b+(oe+he)/2,c:B.c-(oe-he)/2}).a,J.b,J.c].sort(T.sorterAsc),Me=me.indexOf(J.a),Ie=me.indexOf(J.b),Pe=me.indexOf(J.c);me[0]<0&&(me[1]+me[0]/2<0?(me[2]+=me[0]+me[1],me[0]=me[1]=0):(me[2]+=me[0]/2,me[1]+=me[0]/2,me[0]=0),$=(B.a-(J={a:me[Me],b:me[Ie],c:me[Pe]}).a)*ne.yaxis._m,Te=(B.c-J.c-B.b+J.b)*ne.xaxis._m);var ze=b(ne.x0+Te,ne.y0+$);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var ce=b(-Te,-$);ne.clipDefRelative.select("path").attr("transform",ce),ne.aaxis.range=[J.a,ne.sum-J.b-J.c],ne.baxis.range=[ne.sum-J.a-J.c,J.b],ne.caxis.range=[ne.sum-J.a-J.b,J.c],ne.drawAxes(!1),ne._hasClipOnAxisFalse&&ne.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ne),ae.emit("plotly_relayouting",pe(J))}function ke(){l.call("_guiRelayout",ae,pe(J))}this.dragOptions={element:re,gd:ae,plotinfo:{id:ne.id,domain:ae._fullLayout[ne.id].domain,xaxis:ne.xaxis,yaxis:ne.yaxis},subplot:ne.id,prepFn:function(Te,$,oe){ne.dragOptions.xaxes=[ne.xaxis],ne.dragOptions.yaxes=[ne.yaxis],R=ae._fullLayout._invScaleX,H=ae._fullLayout._invScaleY;var he=ne.dragOptions.dragmode=ae._fullLayout.dragmode;ne.dragOptions.minDrag=f(he)?1:void 0,"zoom"===he?(ne.dragOptions.moveFn=Ee,ne.dragOptions.clickFn=xe,ne.dragOptions.doneFn=de,function(me,Me,Ie){var Pe=re.getBoundingClientRect();F=Me-Pe.left,U=Ie-Pe.top,ae._fullLayout._calcInverseTransform(ae);var ce=T.apply3DTransform(ae._fullLayout._invTransform)(F,U);F=ce[0],U=ce[1],J=B={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},N=ne.aaxis.range[1]-B.a,Z=A(ne.graphDiv._fullLayout[ne.id].bgcolor).getLuminance(),V="M0,"+ne.h+"L"+ne.w/2+", 0L"+ne.w+","+ne.h+"Z",W=!1,X=le.append("path").attr("class","zoombox").attr("transform",b(ne.x0,ne.y0)).style({fill:Z>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",V),K=le.append("path").attr("class","zoombox-corners").attr("transform",b(ne.x0,ne.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ne.clearOutline(ae)}(0,$,oe)):"pan"===he?(ne.dragOptions.moveFn=we,ne.dragOptions.clickFn=xe,ne.dragOptions.doneFn=ke,J=B={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},ne.clearOutline(ae)):(x(he)||f(he))&&g(Te,$,oe,ne.dragOptions,he)}},re.onmousemove=function(Te){c.hover(ae,Te,ne.id),ae._fullLayout._lasthover=re,ae._fullLayout._hoversubplot=ne.id},re.onmouseout=function(Te){ae._dragging||i.unhover(ae,Te)},i.init(this.dragOptions)}},73972:function(Q,z,e){"use strict";var k=e(47769),A=e(64213),l=e(75138),T=e(41965),b=e(24401).addStyleRule,d=e(1426),s=e(9012),t=e(10820),o=d.extendFlat,r=d.extendDeepAll;function n(y){var p=y.name,m=y.categories,w=y.meta;if(z.modules[p])k.log("Type "+p+" already registered");else{z.subplotsRegistry[y.basePlotModule.name]||function(I){var j=I.name;if(z.subplotsRegistry[j])k.log("Plot type "+j+" already registered.");else for(var R in h(I),z.subplotsRegistry[j]=I,z.componentsRegistry)v(R,I.name)}(y.basePlotModule);for(var u={},S=0;S<m.length;S++)u[m[S]]=!0,z.allCategories[m[S]]=!0;for(var _ in z.modules[p]={_module:y,categories:u},w&&Object.keys(w).length&&(z.modules[p].meta=w),z.allTypes.push(p),z.componentsRegistry)f(_,p);y.layoutAttributes&&o(z.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if("mapbox"===L){var C=E.constants.styleRules;for(var P in C)b(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}"geo"!==L&&"mapbox"!==L||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function a(y){if("string"!=typeof y.name)throw new Error("Component module *name* must be a string.");var p=y.name;for(var m in z.componentsRegistry[p]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(z.layoutArrayContainers,p),h(y)),z.modules)f(p,m);for(var w in z.subplotsRegistry)v(p,w);for(var u in z.transformsRegistry)x(p,u);y.schema&&y.schema.layout&&r(t,y.schema.layout)}function i(y){if("string"!=typeof y.name)throw new Error("Transform module *name* must be a string.");var p="Transform module "+y.name,m="function"==typeof y.transform,w="function"==typeof y.calcTransform;if(!m&&!w)throw new Error(p+" is missing a *transform* or *calcTransform* method.");for(var u in m&&w&&k.log([p+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||k.log(p+" registered without an *attributes* object."),"function"!=typeof y.supplyDefaults&&k.log(p+" registered without a *supplyDefaults* method."),z.transformsRegistry[y.name]=y,z.componentsRegistry)x(u,y.name)}function c(y){var p=y.name,m=p.split("-")[0],w=y.dictionary,u=y.format,S=w&&Object.keys(w).length,_=u&&Object.keys(u).length,E=z.localeRegistry,L=E[p];if(L||(E[p]=L={}),m!==p){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===L.dictionary&&(C.dictionary=w),_&&C.format===L.format&&(C.format=u)}S&&(L.dictionary=w),_&&(L.format=u)}function h(y){if(y.layoutAttributes){var p=y.layoutAttributes._arrayAttrRegexps;if(p)for(var m=0;m<p.length;m++)l(z.layoutArrayRegexes,p[m])}}function f(y,p){var m=z.componentsRegistry[y].schema;if(m&&m.traces){var w=m.traces[p];w&&r(z.modules[p]._module.attributes,w)}}function x(y,p){var m=z.componentsRegistry[y].schema;if(m&&m.transforms){var w=m.transforms[p];w&&r(z.transformsRegistry[p].attributes,w)}}function v(y,p){var m=z.componentsRegistry[y].schema;if(m&&m.subplots){var w=z.subplotsRegistry[p],u=w.layoutAttributes,S="subplot"===w.attr?w.name:w.attr;Array.isArray(S)&&(S=S[0]);var _=m.subplots[S];u&&_&&r(u,_)}}function g(y){return"object"==typeof y&&(y=y.type),y}z.modules={},z.allCategories={},z.allTypes=[],z.subplotsRegistry={},z.transformsRegistry={},z.componentsRegistry={},z.layoutArrayContainers=[],z.layoutArrayRegexes=[],z.traceLayoutAttributes={},z.localeRegistry={},z.apiMethodRegistry={},z.collectableSubplotTypes=null,z.register=function(y){if(z.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var p=0;p<y.length;p++){var m=y[p];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":i(m);break;case"component":a(m);break;case"locale":c(m);break;case"apiMethod":z.apiMethodRegistry[m.name]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},z.getModule=function(y){var p=z.modules[g(y)];return!!p&&p._module},z.traceIs=function(y,p){if("various"===(y=g(y)))return!1;var m=z.modules[y];return m||(y&&k.log("Unrecognized trace type "+y+"."),m=z.modules[s.type.dflt]),!!m.categories[p]},z.getTransformIndices=function(y,p){for(var m=[],w=y.transforms||[],u=0;u<w.length;u++)w[u].type===p&&m.push(u);return m},z.hasTransform=function(y,p){for(var m=y.transforms||[],w=0;w<m.length;w++)if(m[w].type===p)return!0;return!1},z.getComponentMethod=function(y,p){var m=z.componentsRegistry[y];return m&&m[p]||A},z.call=function(){var y=arguments[0],p=[].slice.call(arguments,1);return z.apiMethodRegistry[y].apply(null,p)}},61914:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=A.extendFlat,T=A.extendDeep;function b(d){var s;switch(d){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}Q.exports=function(d,s){var t,n=d.layout,a=T([],d.data),i=T({},n,b(s.tileClass)),c=d._context||{};if(s.width&&(i.width=s.width),s.height&&(i.height=s.height),"thumbnail"===s.tileClass||"themes__thumb"===s.tileClass){i.annotations=[];var h=Object.keys(i);for(t=0;t<h.length;t++)["xaxis","yaxis","zaxis"].indexOf(h[t].slice(0,5))>-1&&(i[h[t]].title={text:""});for(t=0;t<a.length;t++){var f=a[t];f.showscale=!1,f.marker&&(f.marker.showscale=!1),k.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)i.annotations.push(s.annotations[t]);var x=Object.keys(i).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var v={};for("thumbnail"===s.tileClass&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var g=i[x[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),l(g.xaxis,v),l(g.yaxis,v),l(g.zaxis,v),g._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var p={gd:y,td:y,layout:i,data:a,config:{staticPlot:void 0===s.staticPlot||s.staticPlot,plotGlPixelRatio:void 0===s.plotGlPixelRatio?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==s.setBackground&&(p.config.setBackground=s.setBackground||"opaque"),p.gd.defaultLayout=b(s.tileClass),p}},7239:function(Q,z,e){"use strict";var k=e(71828),A=e(403),l=e(22435),T=e(25095);Q.exports=function(b,d){var s;return k.isPlainObject(b)||(s=k.getGraphDiv(b)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(t,o){s&&s._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),k.isIE()&&"svg"!==d.format&&o(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=A(b,d),n=d.filename||b.fn||"newplot";n+="."+d.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),l(a,n,d.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),o(a)})})}},22435:function(Q,z,e){"use strict";var k=e(71828),A=e(25095);Q.exports=function(l,T,b){var d=document.createElement("a"),s="download"in d;return new Promise(function(t,o){var r,n;return k.isIE()?(r=A.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T)):s?(r=A.createBlob(l,b),n=A.createObjectURL(r),d.href=n,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),A.revokeObjectURL(n),r=null,t(T)):k.isSafari()?(A.octetStream(("svg"===b?",":";base64,")+encodeURIComponent(l)),t(T)):void o(new Error("download error"))})}},25095:function(Q,z,e){"use strict";var k=e(73972);z.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},z.getRedrawFunc=function(l){return function(){k.getComponentMethod("colorbar","draw")(l)}},z.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},z.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var A=window.URL||window.webkitURL;z.createObjectURL=function(l){return A.createObjectURL(l)},z.revokeObjectURL=function(l){return A.revokeObjectURL(l)},z.createBlob=function(l,T){if("svg"===T)return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if("full-json"===T)return new window.Blob([l],{type:"application/json;charset=utf-8"});var b=function(d){for(var s=d.length,t=new ArrayBuffer(s),o=new Uint8Array(t),r=0;r<s;r++)o[r]=d.charCodeAt(r);return t}(window.atob(l));return new window.Blob([b],{type:"image/"+T})},z.octetStream=function(l){document.location.href="data:application/octet-stream"+l},z.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,z.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(Q,z,e){"use strict";var k=e(25095),A={getDelay:k.getDelay,getRedrawFunc:k.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};Q.exports=A},70942:function(Q,z,e){"use strict";var k=e(71828),A=e(15398).EventEmitter,l=e(25095);Q.exports=function(T){var b=T.emitter||new A,d=new Promise(function(s,t){var o=window.Image,r=T.svg,n=T.format||"png";if(k.isIE()&&"svg"!==n){var a=new Error(l.MSG_IE_BAD_FORMAT);return t(a),T.promise?d:b.emit("error",a)}var i,c,h=T.canvas,f=T.scale||1,g=f*(T.width||300),y=f*(T.height||150),p=h.getContext("2d",{willReadFrequently:!0}),m=new o;"svg"===n||k.isSafari()?c=l.encodeSVG(r):(i=l.createBlob(r,"svg"),c=l.createObjectURL(i)),h.width=g,h.height=y,m.onload=function(){var w;switch(i=null,l.revokeObjectURL(c),"svg"!==n&&p.drawImage(m,0,0,g,y),n){case"jpeg":w=h.toDataURL("image/jpeg");break;case"png":w=h.toDataURL("image/png");break;case"webp":w=h.toDataURL("image/webp");break;case"svg":w=c;break;default:var u="Image format is not jpeg, png, svg or webp.";if(t(new Error(u)),!T.promise)return b.emit("error",u)}s(w),T.promise||b.emit("success",w)},m.onerror=function(w){if(i=null,l.revokeObjectURL(c),t(w),!T.promise)return b.emit("error",w)},m.src=c});return T.promise?d:b}},56395:function(Q,z,e){"use strict";var k=e(15398).EventEmitter,A=e(73972),l=e(71828),T=e(25095),b=e(61914),d=e(5900),s=e(70942);Q.exports=function(t,o){var r=new k,n=b(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=T.getRedrawFunc(a);return A.call("_doPlot",a,n.data,n.layout,n.config).then(i).then(function(){var c=T.getDelay(a._fullLayout);setTimeout(function(){var h=d(a),f=document.createElement("canvas");f.id=l.randstr(),(r=s({format:o.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:f,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},c)}).catch(function(c){r.emit("error",c)}),r}},5900:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(7901),b=e(77922),d=/"/g,s="TOBESTRIPPED",t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");Q.exports=function(o,r,n){var a,i=o._fullLayout,c=i._paper,h=i._toppaper,f=i.width,x=i.height;c.insert("rect",":first-child").call(l.setRect,0,0,f,x).call(T.fill,i.paper_bgcolor);var v=i._basePlotModules||[];for(a=0;a<v.length;a++){var g=v[a];g.toSVG&&g.toSVG(o)}if(h){var y=h.node().childNodes,p=Array.prototype.slice.call(y);for(a=0;a<p.length;a++){var m=p[a];m.childNodes.length&&c.node().appendChild(m)}}i._draggers&&i._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var u=k.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){u.style({visibility:null,display:null});var S=this.style.fontFamily;S&&-1!==S.indexOf('"')&&u.style("font-family",S.replace(d,s))}else u.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var u=k.select(this),S=this.style.fill;S&&-1!==S.indexOf("url(")&&u.style("fill",S.replace(d,s));var _=this.style.stroke;_&&-1!==_.indexOf("url(")&&u.style("stroke",_.replace(d,s))}),"pdf"!==r&&"eps"!==r||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(b.xmlns,"xmlns",b.svg),c.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),"svg"===r&&n&&(c.attr("width",n*f),c.attr("height",n*x),c.attr("viewBox","0 0 "+f+" "+x));var u,S,_,w=(new window.XMLSerializer).serializeToString(c.node());return w=(w=(u=w,S=k.select("body").append("div").style({display:"none"}).html(""),_=u.replace(/(&[^;]*;)/gi,function(E){return"&lt;"===E?"&#60;":"&rt;"===E?"&#62;":-1!==E.indexOf("<")||-1!==E.indexOf(">")?"":S.html(E).text()}),S.remove(),w=_).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),A.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},75341:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){for(var T=0;T<A.length;T++)A[T].i=T;k.mergeArray(l.text,A,"tx"),k.mergeArray(l.hovertext,A,"htx");var b=l.marker;if(b){k.mergeArray(b.opacity,A,"mo",!0),k.mergeArray(b.color,A,"mc");var d=b.line;d&&(k.mergeArray(d.color,A,"mlc"),k.mergeArrayCastPositive(d.width,A,"mlw"))}}},1486:function(Q,z,e){"use strict";var k=e(82196),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(5386).s,b=e(50693),d=e(41940),s=e(97313),t=e(79952).u,o=e(1426).extendFlat,r=d({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=o({},k.marker.line.width,{dflt:0}),a=o({width:n,editType:"calc"},b("marker.line")),i=o({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});Q.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:k.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:k.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},r,{}),insidetextfont:o({},r,{}),outsidetextfont:o({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},k.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:i,offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:{opacity:k.selected.marker.opacity,color:k.selected.marker.color,editType:"style"},textfont:k.selected.textfont,editType:"style"},unselected:{marker:{opacity:k.unselected.marker.opacity,color:k.unselected.marker.color,editType:"style"},textfont:k.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(Q,z,e){"use strict";var k=e(89298),A=e(42973),l=e(52075).hasColorscale,T=e(78803),b=e(75341),d=e(66279);Q.exports=function(s,t){var o,r,n,a,i,c,h=k.getFromId(s,t.xaxis||"x"),f=k.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(o=h.makeCalcdata(t,"x",x),n=f.makeCalcdata(t,"y"),a=A(t,f,"y",n),i=!!t.yperiodalignment,c="y"):(o=f.makeCalcdata(t,"y",x),n=h.makeCalcdata(t,"x"),a=A(t,h,"x",n),i=!!t.xperiodalignment,c="x"),r=a.vals;for(var v=Math.min(r.length,o.length),g=new Array(v),y=0;y<v;y++)g[y]={p:r[y],s:o[y]},i&&(g[y].orig_p=n[y],g[y][c+"End"]=a.ends[y],g[y][c+"Start"]=a.starts[y]),t.ids&&(g[y].id=String(t.ids[y]));return l(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),l(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(g,t),d(g,t),g}},97313:function(Q){"use strict";Q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(Q,z,e){"use strict";var k=e(92770),A=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(73972),b=e(89298),d=e(99082).getAxisGroup,s=e(61546);function t(v,g,y,p,m){if(p.length){var w,u,S,_;switch(function(E,L){var C,P;for(C=0;C<L.length;C++){var I,j=L[C],R=j[0].trace,H="funnel"===R.type?R._base:R.base,F="h"===R.orientation?R.xcalendar:R.ycalendar,U="category"===E.type||"multicategory"===E.type?function(){return null}:E.d2c;if(A(H)){for(P=0;P<Math.min(H.length,j.length);P++)I=U(H[P],0,F),k(I)?(j[P].b=+I,j[P].hasB=1):j[P].b=0;for(;P<j.length;P++)j[P].b=0}else{I=U(H,0,F);var B=k(I);for(I=B?I:0,P=0;P<j.length;P++)j[P].b=I,B&&(j[P].hasB=1)}}}(y,p),m.mode){case"overlay":o(g,y,p,m);break;case"group":for(w=[],u=[],S=0;S<p.length;S++)void 0===(_=p[S])[0].trace.offset?u.push(_):w.push(_);u.length&&(E=v,C=y,j=new s(u,{posAxis:L=g,sepNegVal:!1,overlapNoMerge:!(I=m).norm}),function(R,H,F,U){for(var B=R._fullLayout,Z=F.minDiff,V=F.traces,W=V.length,X=F.positions.length!==F.distinctPositions.length,K=Z*(1-U.gap),ne=d(B,H._id)+V[0][0].trace.orientation,re=B._alignmentOpts[ne]||{},ae=0;ae<W;ae++){var le,pe,xe=V[ae],ye=xe[0].trace,fe=Object.keys((re[ye.alignmentgroup]||{}).offsetGroups||{}).length,Ee=(le=fe?K/fe:X?K/W:K)*(1-(U.groupgap||0));pe=fe?((2*ye._offsetIndex+1-fe)*le-Ee)/2:X?((2*ae+1-W)*le-Ee)/2:-Ee/2;var de=xe[0].t;de.barwidth=Ee,de.poffset=pe,de.bargroupwidth=K,de.bardelta=Z}F.binWidth=V[0][0].t.barwidth/100,n(F),a(H,F),i(H,F,X)}(E,L,j,I),function(R,H){for(var F=R.traces,U=0;U<F.length;U++){var B=F[U];if(void 0===B[0].trace.base)for(var N=new s([B],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),J=0;J<B.length;J++){var Z=B[J];if(Z.p!==l){var V=N.put(Z.p,Z.b+Z.s);V&&(Z.b=V)}}}}(j,L),I.norm?(h(j),f(C,j,I)):c(C,j)),w.length&&o(g,y,w,m);break;case"stack":case"relative":for(w=[],u=[],S=0;S<p.length;S++)void 0===(_=p[S])[0].trace.base?u.push(_):w.push(_);u.length&&function(E,L,C,P,I){var j=new s(P,{posAxis:L,sepNegVal:"relative"===I.mode,overlapNoMerge:!(I.norm||"stack"===I.mode||"relative"===I.mode)});r(L,j,I),function(B,N,J){var Z,V,W,X,K,ne,re=x(B),ae=N.traces;for(X=0;X<ae.length;X++)if("funnel"===(V=(Z=ae[X])[0].trace).type)for(K=0;K<Z.length;K++)(ne=Z[K]).s!==l&&N.put(ne.p,-.5*ne.s);for(X=0;X<ae.length;X++){W="funnel"===(V=(Z=ae[X])[0].trace).type;var le=[];for(K=0;K<Z.length;K++)if((ne=Z[K]).s!==l){var pe,xe=N.put(ne.p,pe=W?ne.s:ne.s+ne.b),ye=xe+pe;ne.b=xe,ne[re]=ye,J.norm||(le.push(ye),ne.hasB&&le.push(xe))}J.norm||(V._extremes[B._id]=b.findExtremes(B,le,{tozero:!0,padded:!0}))}}(C,j,I);for(var R=0;R<P.length;R++)for(var H=P[R],F=0;F<H.length;F++){var U=H[F];U.s!==l&&U.b+U.s===j.get(U.p,U.s)&&(U._outmost=!0)}I.norm&&f(C,j,I)}(0,g,y,u,m),w.length&&o(g,y,w,m)}!function(E,L){var C,P,I,j=x(L),R={},H=1/0,F=-1/0;for(C=0;C<E.length;C++)for(I=E[C],P=0;P<I.length;P++){var U=I[P].p;k(U)&&(H=Math.min(H,U),F=Math.max(F,U))}var B=1e4/(F-H),N=R.round=function(ne){return String(Math.round(B*(ne-H)))};for(C=0;C<E.length;C++){(I=E[C])[0].t.extents=R;var J=I[0].t.poffset,Z=Array.isArray(J);for(P=0;P<I.length;P++){var V=I[P],W=V[j]-V.w/2;if(k(W)){var X=V[j]+V.w/2,K=N(V.p);R[K]=R[K]?[Math.min(W,R[K][0]),Math.max(X,R[K][1])]:[W,X]}V.p0=V.p+(Z?J[P]:J),V.p1=V.p0+V.w,V.s0=V.b,V.s1=V.s0+V.s}}}(p,g)}var E,L,C,I,j}function o(v,g,y,p){for(var m=0;m<y.length;m++){var u=new s([y[m]],{posAxis:v,sepNegVal:!1,overlapNoMerge:!p.norm});r(v,u,p),p.norm?(h(u),f(g,u,p)):c(g,u)}}function r(v,g,y){for(var p=g.minDiff,m=g.traces,w=p*(1-y.gap),u=w*(1-(y.groupgap||0)),S=-u/2,_=0;_<m.length;_++){var E=m[_][0].t;E.barwidth=u,E.poffset=S,E.bargroupwidth=w,E.bardelta=p}g.binWidth=m[0][0].t.barwidth/100,n(g),a(v,g),i(v,g)}function n(v){var g,y,p=v.traces;for(g=0;g<p.length;g++){var m,w=p[g],u=w[0],S=u.trace,_=u.t,E=S._offset||S.offset,L=_.poffset;if(A(E)){for(m=Array.prototype.slice.call(E,0,w.length),y=0;y<m.length;y++)k(m[y])||(m[y]=L);for(y=m.length;y<w.length;y++)m.push(L);_.poffset=m}else void 0!==E&&(_.poffset=E);var C=S._width||S.width,P=_.barwidth;if(A(C)){var I=Array.prototype.slice.call(C,0,w.length);for(y=0;y<I.length;y++)k(I[y])||(I[y]=P);for(y=I.length;y<w.length;y++)I.push(P);if(_.barwidth=I,void 0===E){for(m=[],y=0;y<w.length;y++)m.push(L+(P-I[y])/2);_.poffset=m}}else void 0!==C&&(_.barwidth=C,void 0===E&&(_.poffset=L+(P-C)/2))}}function a(v,g){for(var y=g.traces,p=x(v),m=0;m<y.length;m++)for(var w=y[m],u=w[0].t,S=u.poffset,_=Array.isArray(S),E=u.barwidth,L=Array.isArray(E),C=0;C<w.length;C++){var P=w[C],I=P.w=L?E[C]:E;void 0===P.p&&(P.p=P[p],P["orig_"+p]=P[p]),P[p]=P.p+((_?S[C]:S)+I/2)}}function i(v,g,y){var p=g.traces,m=g.minDiff/2;b.minDtick(v,g.minDiff,g.distinctPositions[0],y);for(var w=0;w<p.length;w++){var u,S,_,E,L=p[w],C=L[0],P=C.trace,I=[];for(E=0;E<L.length;E++)S=(u=L[E]).p-m,I.push(S,_=u.p+m);if(P.width||P.offset){var j=C.t,R=j.poffset,H=j.barwidth,F=Array.isArray(R),U=Array.isArray(H);for(E=0;E<L.length;E++)_=(S=(u=L[E]).p+(F?R[E]:R))+(U?H[E]:H),I.push(S,_)}P._extremes[v._id]=b.findExtremes(v,I,{padded:!1})}}function c(v,g){for(var y=g.traces,p=x(v),m=0;m<y.length;m++){for(var w=y[m],u=w[0].trace,S="scatter"===u.type,_="v"===u.orientation,E=[],L=!1,C=0;C<w.length;C++){var P=w[C],I=S?0:P.b,j=S?_?P.y:P.x:I+P.s;P[p]=j,E.push(j),P.hasB&&E.push(I),P.hasB&&P.b||(L=!0)}u._extremes[v._id]=b.findExtremes(v,E,{tozero:L,padded:!0})}}function h(v){for(var g=v.traces,y=0;y<g.length;y++)for(var p=g[y],m=0;m<p.length;m++){var w=p[m];w.s!==l&&v.put(w.p,w.b+w.s)}}function f(v,g,y){var p=g.traces,m=x(v),w="fraction"===y.norm?1:100,u=w/1e9,S=v.l2c(v.c2l(0)),_="stack"===y.mode?w:S;function E(J){return k(v.c2l(J))&&(J<S-u||J>_+u||!k(S))}for(var L=0;L<p.length;L++){for(var C=p[L],P=C[0].trace,I=[],j=!1,R=!1,H=0;H<C.length;H++){var F=C[H];if(F.s!==l){var U=Math.abs(w/g.get(F.p,F.s));F.b*=U,F.s*=U;var B=F.b,N=B+F.s;F[m]=N,I.push(N),R=R||E(N),F.hasB&&(I.push(B),R=R||E(B)),F.hasB&&F.b||(j=!0)}}P._extremes[v._id]=b.findExtremes(v,I,{tozero:j,padded:R})}}function x(v){return v._id.charAt(0)}Q.exports={crossTraceCalc:function(v,g){for(var y=g.xaxis,p=g.yaxis,m=v._fullLayout,w=v._fullData,u=v.calcdata,S=[],_=[],E=0;E<w.length;E++){var L=w[E];if(!0===L.visible&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===p._id&&("h"===L.orientation?S.push(u[E]):_.push(u[E]),L._computePh))for(var C=v.calcdata[E],P=0;P<C.length;P++)"function"==typeof C[P].ph0&&(C[P].ph0=C[P].ph0()),"function"==typeof C[P].ph1&&(C[P].ph1=C[P].ph1())}var I={xCat:"category"===y.type||"multicategory"===y.type,yCat:"category"===p.type||"multicategory"===p.type,mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(v,y,p,_,I),t(v,p,y,S,I)},setGroupPositions:t}},90769:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(73972),T=e(67513),b=e(73927),d=e(98340),s=e(26125),t=e(1486),o=k.coerceFont;function r(n,a,i,c,h,f){var x=!1!==(f=f||{}).moduleHasSelected,v=!1!==f.moduleHasUnselected,g=!1!==f.moduleHasConstrain,y=!1!==f.moduleHasCliponaxis,p=!1!==f.moduleHasTextangle,m=!1!==f.moduleHasInsideanchor,w=!!f.hasPathbar,u=Array.isArray(h)||"auto"===h,S=u||"inside"===h,_=u||"outside"===h;if(S||_){var E=o(c,"textfont",i.font),L=k.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,o(c,"insidetextfont",L),w){var P=k.extendFlat({},E);C&&delete P.color,o(c,"pathbar.textfont",P)}_&&o(c,"outsidetextfont",E),x&&c("selected.textfont.color"),v&&c("unselected.textfont.color"),g&&c("constraintext"),y&&c("cliponaxis"),p&&c("textangle"),c("texttemplate")}S&&m&&c("insidetextanchor")}Q.exports={supplyDefaults:function(n,a,i,c){function h(g,y){return k.coerce(n,a,t,g,y)}if(T(n,a,c,h)){b(n,a,c,h),h("xhoverformat"),h("yhoverformat"),h("orientation",a.x&&!a.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var f=h("textposition");r(n,0,c,h,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(n,a,h,i,c);var x=(a.marker.line||{}).color,v=l.getComponentMethod("errorbars","supplyDefaults");v(n,a,x||A.defaultLine,{axis:"y"}),v(n,a,x||A.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1},crossTraceDefaults:function(n,a){var c;function h(x){return k.coerce(c._input,c,t,x)}if("group"===a.barmode)for(var f=0;f<n.length;f++)"bar"===(c=n[f]).type&&s(c._input,c,a,h)},handleText:r}},58065:function(Q){"use strict";Q.exports=function(z,e,k){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),"h"===k.orientation?(z.label=z.y,z.value=z.x):(z.label=z.x,z.value=z.y),z}},69383:function(Q,z,e){"use strict";var k=e(92770),A=e(84267),l=e(71828).isArrayOrTypedArray;z.coerceString=function(T,b,d){if("string"==typeof b){if(b||!T.noBlank)return b}else if(("number"==typeof b||!0===b)&&!T.strict)return String(b);return void 0!==d?d:T.dflt},z.coerceNumber=function(T,b,d){if(k(b)){b=+b;var s=T.min,t=T.max;if(!(void 0!==s&&b<s||void 0!==t&&b>t))return b}return void 0!==d?d:T.dflt},z.coerceColor=function(T,b,d){return A(b).isValid()?b:void 0!==d?d:T.dflt},z.coerceEnumerated=function(T,b,d){return T.coerceNumber&&(b=+b),-1!==T.values.indexOf(b)?b:void 0!==d?d:T.dflt},z.getValue=function(T,b){var d;return Array.isArray(T)?b<T.length&&(d=T[b]):d=T,d},z.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function(Q,z,e){"use strict";var k=e(30211),A=e(73972),l=e(7901),T=e(71828).fillText,b=e(69383).getLineWidth,d=e(89298).hoverLabelText,s=e(50606).BADNUM;function t(r,n,a,i,c){var h,f,x,v,g,y,p,m=r.cd,w=m[0].trace,u=m[0].t,S="closest"===i,_="waterfall"===w.type,E=r.maxHoverDistance,L=r.maxSpikeDistance;"h"===w.orientation?(h=a,f=n,x="y",v="x",g=Z,y=N):(h=n,f=a,x="x",v="y",y=Z,g=N);var C=w[x+"period"],P=S||C;function I(le){return R(le,-1)}function j(le){return R(le,1)}function R(le,pe){return le[x]+pe*le.w/2}function H(le){return le[x+"End"]-le[x+"Start"]}var F=S?I:C?function(le){return le.p-H(le)/2}:function(le){return Math.min(I(le),le.p-u.bardelta/2)},U=S?j:C?function(le){return le.p+H(le)/2}:function(le){return Math.max(j(le),le.p+u.bardelta/2)};function B(le,pe,xe){return c.finiteRange&&(xe=0),k.inbox(le-h,pe-h,xe+Math.min(1,Math.abs(pe-le)/p)-1)}function N(le){return B(F(le),U(le),E)}function J(le){var pe=le[v];if(_){var xe=Math.abs(le.rawS)||0;f>0?pe+=xe:f<0&&(pe-=xe)}return pe}function Z(le){var pe=f,xe=le.b,ye=J(le);return k.inbox(xe-pe,ye-pe,E+(ye-pe)/(ye-xe)-1)}var V=r[x+"a"],W=r[v+"a"];p=Math.abs(V.r2c(V.range[1])-V.r2c(V.range[0]));var le,pe,xe,ye,X=k.getDistanceFunction(i,g,y,function(le){return(g(le)+y(le))/2});if(k.getClosest(m,X,r),!1!==r.index&&m[r.index].p!==s){P||(F=function(le){return Math.min(I(le),le.p-u.bargroupwidth/2)},U=function(le){return Math.max(j(le),le.p+u.bargroupwidth/2)});var K=m[r.index],ne=w.base?K.b+K.s:K.s;r[v+"0"]=r[v+"1"]=W.c2p(K[v],!0),r[v+"LabelVal"]=ne;var re=u.extents[u.extents.round(K.p)];return r[x+"0"]=V.c2p(S?F(K):re[0],!0),r[x+"1"]=V.c2p(S?U(K):re[1],!0),r[x+"LabelVal"]=void 0!==K.orig_p?K.orig_p:K.p,r.labelLabel=d(V,r[x+"LabelVal"],w[x+"hoverformat"]),r.valueLabel=d(W,r[v+"LabelVal"],w[v+"hoverformat"]),r.baseLabel=d(W,K.b,w[v+"hoverformat"]),r.spikeDistance=(pe=f,xe=(le=K).b,ye=J(le),(k.inbox(xe-pe,ye-pe,L+(ye-pe)/(ye-xe)-1)+function(le){return B(I(le),j(le),L)}(K))/2),r[x+"Spike"]=V.c2p(K.p,!0),T(K,w,r),r.hovertemplate=w.hovertemplate,r}}function o(r,n){var a=n.mcc||r.marker.color,i=n.mlcc||r.marker.line.color,c=b(r,n);return l.opacity(a)?a:l.opacity(i)&&c?i:void 0}Q.exports={hoverPoints:function(r,n,a,i,c){var h=t(r,n,a,i,c);if(h){var f=h.cd,x=f[0].trace,v=f[h.index];return h.color=o(x,v),A.getComponentMethod("errorbars","hoverInfo")(v,x,h),[h]}},hoverOnBars:t,getTraceColor:o}},60822:function(Q,z,e){"use strict";Q.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(Q){"use strict";Q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(Q,z,e){"use strict";var k=e(73972),A=e(89298),l=e(71828),T=e(43641);Q.exports=function(b,d,s){function t(x,v){return l.coerce(b,d,T,x,v)}for(var o=!1,r=!1,n=!1,a={},i=t("barmode"),c=0;c<s.length;c++){var h=s[c];if(k.traceIs(h,"bar")&&h.visible){if(o=!0,"group"===i){var f=h.xaxis+h.yaxis;a[f]&&(n=!0),a[f]=!0}h.visible&&"histogram"===h.type&&"category"!==A.getFromId({_fullLayout:d},h["v"===h.orientation?"xaxis":"yaxis"]).type&&(r=!0)}}o?("overlay"!==i&&t("barnorm"),t("bargap",r&&!n?0:.2),t("bargroupgap")):delete d.barmode}},17295:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(71828),T=e(63893),b=e(7901),d=e(91424),s=e(73972),t=e(89298).tickText,o=e(72597),r=o.recordMinTextSize,n=o.clearMinTextSize,a=e(16688),i=e(69383),c=e(97313),h=e(1486),f=h.text,x=h.textposition,v=e(23469).appendArrayPointValue,g=c.TEXTPAD;function y(L){return L.id}function m(L,C){return L<C?1:-1}function w(L,C,P,I){var j;return!C.uniformtext.mode&&u(P)?(I&&(j=I()),L.transition().duration(P.duration).ease(P.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):L}function u(L){return L&&L.duration>0}function S(L){return"auto"===L?0:L}function _(L,C){var P=Math.PI/180*C,I=Math.abs(Math.sin(P)),j=Math.abs(Math.cos(P));return{x:L.width*j+L.height*I,y:L.width*I+L.height*j}}function E(L,C,P,I,j,R){var H=!!R.isHorizontal,F=!!R.constrained,U=R.angle||0,B=R.anchor||"end",N="end"===B,J="start"===B,Z=((R.leftToRight||0)+1)/2,V=1-Z,W=j.width,X=j.height,K=Math.abs(C-L),ne=Math.abs(I-P),re=K>2*g&&ne>2*g?g:0;K-=2*re,ne-=2*re;var ae=S(U);"auto"!==U||W<=K&&X<=ne||!(W>K||X>ne)||(W>ne||X>K)&&W<X==K<ne||(ae+=90);var le=_(j,ae),pe=1;F&&(pe=Math.min(1,K/le.x,ne/le.y));var xe=j.left*V+j.right*Z,ye=(j.top+j.bottom)/2,se=(L+g)*V+(C-g)*Z,fe=(P+I)/2,Ee=0,de=0;if(J||N){var we=(H?le.x:le.y)/2,ke=H?m(L,C):m(P,I);H?J?(se=L+ke*re,Ee=-ke*we):(se=C-ke*re,Ee=ke*we):J?(fe=P+ke*re,de=-ke*we):(fe=I-ke*re,de=ke*we)}return{textX:xe,textY:ye,targetX:se,targetY:fe,anchorX:Ee,anchorY:de,scale:pe,rotate:ae}}Q.exports={plot:function(L,C,P,I,j,R){var H=C.xaxis,F=C.yaxis,U=L._fullLayout,B=L._context.staticPlot;j||(j={mode:U.barmode,norm:U.barmode,gap:U.bargap,groupgap:U.bargroupgap},n("bar",U));var N=l.makeTraceGroups(I,P,"trace bars").each(function(J){var Z=k.select(this),V=J[0].trace,K="bar"===V.type||"funnel"===V.type,ne=0;"waterfall"===V.type&&V.connector.visible&&"between"===V.connector.mode&&(ne=V.connector.line.width/2);var re="h"===V.orientation,ae=u(j),le=l.ensureSingle(Z,"g","points"),pe=function p(L){if(L.ids)return y}(V),xe=le.selectAll("g.point").data(l.identity,pe);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(se,fe){var Ee,de,ge,_e,De,He,Ve,nt,tt,at,we=k.select(this),ke=(_e=H,De=F,nt=[],at=(He=re)?De:_e,(Ve=[])[0]=(tt=He?_e:De).c2p((ge=se).s0,!0),nt[0]=at.c2p(ge.p0,!0),Ve[1]=tt.c2p(ge.s1,!0),nt[1]=at.c2p(ge.p1,!0),He?[Ve,nt]:[nt,Ve]),Te=ke[0][0],$=ke[0][1],oe=ke[1][0],he=ke[1][1],me=0==(re?$-Te:he-oe);if(me&&K&&i.getLineWidth(V,se)&&(me=!1),me||(me=!(A(Te)&&A($)&&A(oe)&&A(he))),se.isBlank=me,me&&(re?$=Te:he=oe),ne&&!me&&(re?(Te-=m(Te,$)*ne,$+=m(Te,$)*ne):(oe-=m(oe,he)*ne,he+=m(oe,he)*ne)),"waterfall"===V.type){if(!me){var Me=V[se.dir].marker;Ee=Me.line.width,de=Me.color}}else Ee=i.getLineWidth(V,se),de=se.mc||V.marker.color;function Ie(ge){var _e=k.round(Ee/2%1,2);return 0===j.gap&&0===j.groupgap?k.round(Math.round(ge)-_e,2):ge}if(!L._context.staticPlot){var Pe=b.opacity(de)<1||Ee>.01?Ie:function(ge,_e,De){return De&&ge===_e?ge:Math.abs(ge-_e)>=2?Ie(ge):ge>_e?Math.ceil(ge):Math.floor(ge)};Te=Pe(Te,$,re),$=Pe($,Te,re),oe=Pe(oe,he,!re),he=Pe(he,oe,!re)}var ze=w(l.ensureSingle(we,"path"),U,j,R);if(ze.style("vector-effect",B?"none":"non-scaling-stroke").attr("d",isNaN(($-Te)*(he-oe))||me&&L._context.staticPlot?"M0,0Z":"M"+Te+","+oe+"V"+he+"H"+$+"V"+oe+"Z").call(d.setClipUrl,C.layerClipId,L),!U.uniformtext.mode&&ae){var ce=d.makePointStyleFns(V);d.singlePointStyle(se,ze,V,ce,L)}(function(ge,_e,De,He,Ve,nt,tt,at,dt,wt,bt){var _t,Lt=_e.xaxis,Ct=_e.yaxis,Ot=ge._fullLayout;function Ht(Gt,un,hn){return l.ensureSingle(Gt,"text").text(un).attr({class:"bartext bartext-"+_t,"text-anchor":"middle","data-notex":1}).call(d.font,hn).call(T.convertToTspans,ge)}var un,hn,Qt,_n,Fn,yn,It=He[0].trace,Ge="h"===It.orientation,Ze=(hn=Ve,Qt=Lt,_n=Ct,Fn=(yn=(un=He)[0].trace).texttemplate?function(on,pn,ln,dn,Cn){var kn=pn[0].trace,Rn=l.castOption(kn,ln,"texttemplate");if(!Rn)return"";var Nn,jn,er,Kn,yr="histogram"===kn.type,lr="waterfall"===kn.type,$n="funnel"===kn.type,Gn="h"===kn.orientation;function ir(Hn){return t(Kn,Kn.c2l(Hn),!0).text}Gn?(Nn="y",jn=Cn,er="x",Kn=dn):(Nn="x",jn=dn,er="y",Kn=Cn);var rn=pn[ln],Sn={};Sn.label=rn.p,Sn.labelLabel=Sn[Nn+"Label"]=t(jn,jn.c2l(rn.p),!0).text;var Tn=l.castOption(kn,rn.i,"text");(0===Tn||Tn)&&(Sn.text=Tn),Sn.value=rn.s,Sn.valueLabel=Sn[er+"Label"]=ir(rn.s);var Ln={};v(Ln,kn,rn.i),(yr||void 0===Ln.x)&&(Ln.x=Gn?Sn.value:Sn.label),(yr||void 0===Ln.y)&&(Ln.y=Gn?Sn.label:Sn.value),(yr||void 0===Ln.xLabel)&&(Ln.xLabel=Gn?Sn.valueLabel:Sn.labelLabel),(yr||void 0===Ln.yLabel)&&(Ln.yLabel=Gn?Sn.labelLabel:Sn.valueLabel),lr&&(Sn.delta=+rn.rawS||rn.s,Sn.deltaLabel=ir(Sn.delta),Sn.final=rn.v,Sn.finalLabel=ir(Sn.final),Sn.initial=Sn.final-Sn.delta,Sn.initialLabel=ir(Sn.initial)),$n&&(Sn.value=rn.s,Sn.valueLabel=ir(Sn.value),Sn.percentInitial=rn.begR,Sn.percentInitialLabel=l.formatPercent(rn.begR),Sn.percentPrevious=rn.difR,Sn.percentPreviousLabel=l.formatPercent(rn.difR),Sn.percentTotal=rn.sumR,Sn.percenTotalLabel=l.formatPercent(rn.sumR));var Bn=l.castOption(kn,rn.i,"customdata");return Bn&&(Sn.customdata=Bn),l.texttemplateString(Rn,Sn,on._d3locale,Ln,Sn,kn._meta||{})}(Ot,un,hn,Qt,_n):yn.textinfo?function(on,pn,ln,dn){var Cn=on[0].trace,kn="h"===Cn.orientation,Rn="waterfall"===Cn.type,Nn="funnel"===Cn.type;function jn(Bn){return t(kn?ln:dn,+Bn,!0).text}var er,lr=on[pn],$n=Cn.textinfo.split("+"),Gn=[],ir=function(Bn){return-1!==$n.indexOf(Bn)};if(ir("label")&&Gn.push(t(kn?dn:ln,on[pn].p,!0).text),ir("text")&&(0===(er=l.castOption(Cn,lr.i,"text"))||er)&&Gn.push(er),Rn){var Jt=+lr.rawS||lr.s,rn=lr.v,Sn=rn-Jt;ir("initial")&&Gn.push(jn(Sn)),ir("delta")&&Gn.push(jn(Jt)),ir("final")&&Gn.push(jn(rn))}if(Nn){ir("value")&&Gn.push(jn(lr.s));var Tn=0;ir("percent initial")&&Tn++,ir("percent previous")&&Tn++,ir("percent total")&&Tn++;var Ln=Tn>1;ir("percent initial")&&(er=l.formatPercent(lr.begR),Ln&&(er+=" of initial"),Gn.push(er)),ir("percent previous")&&(er=l.formatPercent(lr.difR),Ln&&(er+=" of previous"),Gn.push(er)),ir("percent total")&&(er=l.formatPercent(lr.sumR),Ln&&(er+=" of total"),Gn.push(er))}return Gn.join("<br>")}(un,hn,Qt,_n):i.getValue(yn.text,hn),i.coerceString(f,Fn));_t=function(Gt,un){var hn=i.getValue(Gt.textposition,un);return i.coerceEnumerated(x,hn)}(It,Ve);var Ye=He[Ve],rt=!("stack"===wt.mode||"relative"===wt.mode)||Ye._outmost;if(Ze&&"none"!==_t&&(!Ye.isBlank&&nt!==tt&&at!==dt||"auto"!==_t&&"inside"!==_t)){var Se=Ot.font,Re=a.getBarColor(He[Ve],It),Ke=a.getInsideTextFont(It,Ve,Se,Re),st=a.getOutsideTextFont(It,Ve,Se),ct=De.datum();Ge?"log"===Lt.type&&ct.s0<=0&&(nt=Lt.range[0]<Lt.range[1]?0:Lt._length):"log"===Ct.type&&ct.s0<=0&&(at=Ct.range[0]<Ct.range[1]?Ct._length:0);var Tt,Et,At,ht,pt,gt=Math.abs(tt-nt)-2*g,Pt=Math.abs(dt-at)-2*g;if("outside"===_t&&(rt||Ye.hasB||(_t="inside")),"auto"===_t&&(rt?(_t="inside",Tt=Ht(De,Ze,pt=l.ensureUniformFontSize(ge,Ke)),At=(Et=d.bBox(Tt.node())).width,ht=Et.height,At>0&&ht>0&&(At<=gt&&ht<=Pt||At<=Pt&&ht<=gt||(Ge?gt>=At*(Pt/ht):Pt>=ht*(gt/At)))?_t="inside":(_t="outside",Tt.remove(),Tt=null)):_t="inside"),!Tt){var zt=(Tt=Ht(De,Ze,pt=l.ensureUniformFontSize(ge,"outside"===_t?st:Ke))).attr("transform");if(Tt.attr("transform",""),At=(Et=d.bBox(Tt.node())).width,ht=Et.height,Tt.attr("transform",zt),At<=0||ht<=0)return void Tt.remove()}var Ut,Nt=It.textangle;Ut="outside"===_t?function(Gt,un,hn,Qt,_n,Fn){var yn,on=!!Fn.isHorizontal,pn=!!Fn.constrained,ln=Fn.angle||0,dn=_n.width,Cn=_n.height,kn=Math.abs(un-Gt),Rn=Math.abs(Qt-hn);yn=on?Rn>2*g?g:0:kn>2*g?g:0;var Nn=1;pn&&(Nn=on?Math.min(1,Rn/Cn):Math.min(1,kn/dn));var jn=S(ln),er=_(_n,jn),Kn=(on?er.x:er.y)/2,yr=(_n.left+_n.right)/2,lr=(_n.top+_n.bottom)/2,$n=(Gt+un)/2,Gn=(hn+Qt)/2,ir=0,Jt=0,rn=on?m(un,Gt):m(hn,Qt);return on?($n=un-rn*yn,ir=rn*Kn):(Gn=Qt+rn*yn,Jt=-rn*Kn),{textX:yr,textY:lr,targetX:$n,targetY:Gn,anchorX:ir,anchorY:Jt,scale:Nn,rotate:jn}}(nt,tt,at,dt,Et,{isHorizontal:Ge,constrained:"both"===It.constraintext||"outside"===It.constraintext,angle:Nt}):E(nt,tt,at,dt,Et,{isHorizontal:Ge,constrained:"both"===It.constraintext||"inside"===It.constraintext,angle:Nt,anchor:It.insidetextanchor}),Ut.fontSize=pt.size,r("histogram"===It.type?"bar":It.type,Ut,Ot),Ye.transform=Ut;var jt=w(Tt,Ot,wt,bt);l.setTransormAndDisplay(jt,Ut)}else De.select("text").remove()})(L,C,we,J,fe,Te,$,oe,he,j,R),C.layerClipId&&d.hideOutsideRangePoint(se,we.select("text"),H,F,V.xcalendar,V.ycalendar)}),d.setClipUrl(Z,!1===V.cliponaxis?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,N,C,j)},toMoveInsideBar:E}},81974:function(Q){"use strict";function z(e,k,A,l,T){var b=k.c2p(l?e.s0:e.p0,!0),d=k.c2p(l?e.s1:e.p1,!0),s=A.c2p(l?e.p0:e.s0,!0),t=A.c2p(l?e.p1:e.s1,!0);return T?[(b+d)/2,(s+t)/2]:l?[d,(s+t)/2]:[(b+d)/2,t]}Q.exports=function(e,k){var A,l=e.cd,T=e.xaxis,b=e.yaxis,d=l[0].trace,s="funnel"===d.type,t="h"===d.orientation,o=[];if(!1===k)for(A=0;A<l.length;A++)l[A].selected=0;else for(A=0;A<l.length;A++){var r=l[A],n="ct"in r?r.ct:z(r,T,b,t,s);k.contains(n,!1,A,e)?(o.push({pointNumber:A,x:T.c2d(r.x),y:b.c2d(r.y)}),r.selected=1):r.selected=0}return o}},61546:function(Q,z,e){"use strict";Q.exports=A;var k=e(71828).distinctVals;function A(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,d=T.posAxis._id.charAt(0),s=[],t=0;t<l.length;t++){for(var o=l[t],r=0;r<o.length;r++){var n=o[r],a=n.p;void 0===a&&(a=n[d]),void 0!==a&&s.push(a)}o[0]&&o[0].width1&&(b=Math.min(o[0].width1,b))}this.positions=s;var i=k(s);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&b!==1/0?b:Math.min(i.minDiff,b);var c=(T.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}A.prototype.put=function(l,T){var b=this.getLabel(l,T),d=this.bins[b]||0;return this.bins[b]=d+T,d},A.prototype.get=function(l,T){var b=this.getLabel(l,T);return this.bins[b]||0},A.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(91424),T=e(71828),b=e(73972),d=e(72597).resizeText,s=e(1486),t=s.textfont,o=s.insidetextfont,r=s.outsidetextfont,n=e(69383);function a(y,p,m){l.pointStyle(y.selectAll("path"),p,m),i(y,p,m)}function i(y,p,m){y.selectAll("text").each(function(w){var u=k.select(this),S=T.ensureUniformFontSize(m,c(u,w,p,m));l.font(u,S)})}function c(y,p,m,w){var u=w._fullLayout.font,S=m.textfont;if(y.classed("bartext-inside")){var _=g(p,m);S=f(m,p.i,u,_)}else y.classed("bartext-outside")&&(S=x(m,p.i,u));return S}function h(y,p,m){return v(t,y.textfont,p,m)}function f(y,p,m,w){var u=h(y,p,m);return(void 0===y._input.textfont||void 0===y._input.textfont.color||Array.isArray(y.textfont.color)&&void 0===y.textfont.color[p])&&(u={color:A.contrast(w),family:u.family,size:u.size}),v(o,y.insidetextfont,p,u)}function x(y,p,m){var w=h(y,p,m);return v(r,y.outsidetextfont,p,w)}function v(y,p,m,w){var u=n.getValue((p=p||{}).family,m),S=n.getValue(p.size,m),_=n.getValue(p.color,m);return{family:n.coerceString(y.family,u,w.family),size:n.coerceNumber(y.size,S,w.size),color:n.coerceColor(y.color,_,w.color)}}function g(y,p){return"waterfall"===p.type?p[y.dir].marker.color:y.mcc||y.mc||p.marker.color}Q.exports={style:function(y){var p=k.select(y).selectAll("g.barlayer").selectAll("g.trace");d(y,p,"bar");var m=p.size(),w=y._fullLayout;p.style("opacity",function(u){return u[0].trace.opacity}).each(function(u){("stack"===w.barmode&&m>1||0===w.bargap&&0===w.bargroupgap&&!u[0].trace.marker.line.width)&&k.select(this).attr("shape-rendering","crispEdges")}),p.selectAll("g.points").each(function(u){a(k.select(this),u[0].trace,y)}),b.getComponentMethod("errorbars","style")(p)},styleTextPoints:i,styleOnSelect:function(y,p,m){var u,S,_,E,L,C,w=p[0].trace;w.selectedpoints?(S=w,_=y,l.selectedPointStyle((u=m).selectAll("path"),S),E=u.selectAll("text"),L=S,C=_,E.each(function(P){var I,j=k.select(this);if(P.selected){I=T.ensureUniformFontSize(C,c(j,P,L,C));var R=L.selected.textfont&&L.selected.textfont.color;R&&(I.color=R),l.font(j,I)}else l.selectedTextStyle(j,L)})):(a(m,w,y),b.getComponentMethod("errorbars","style")(m))},getInsideTextFont:f,getOutsideTextFont:x,getBarColor:g,resizeText:d}},98340:function(Q,z,e){"use strict";var k=e(7901),A=e(52075).hasColorscale,l=e(1586),T=e(71828).coercePattern;Q.exports=function(b,d,s,t,o){var r=s("marker.color",t),n=A(b,"marker");n&&l(b,d,o,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",k.defaultLine),A(b,"marker.line")&&l(b,d,o,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(Q,z,e){"use strict";var k=e(39898),A=e(71828);function l(T){return"_"+T+"Text_minsize"}Q.exports={recordMinTextSize:function(T,b,d){if(d.uniformtext.mode){var s=l(T),t=d.uniformtext.minsize,o=b.scale*b.fontSize;b.hide=o<t,d[s]=d[s]||1/0,b.hide||(d[s]=Math.min(d[s],Math.max(o,t)))}},clearMinTextSize:function(T,b){b[l(T)]=void 0},resizeText:function(T,b,d){var s=T._fullLayout,t=s["_"+d+"Text_minsize"];if(t){var o,r="hide"===s.uniformtext.mode;switch(d){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}b.selectAll(o).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var i=k.select(this).select("text");A.setTransormAndDisplay(i,a)}})}}}},55023:function(Q,z,e){"use strict";var k=e(5386).f,A=e(1426).extendFlat,l=e(81245),T=e(1486);Q.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:A({},T.base,{}),offset:A({},T.offset,{}),width:A({},T.width,{}),text:A({},T.text,{}),hovertext:A({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:k(),selected:T.selected,unselected:T.unselected}},74692:function(Q,z,e){"use strict";var k=e(52075).hasColorscale,A=e(78803),l=e(75341),T=e(11661).setGroupPositions,b=e(66279),d=e(73972).traceIs,s=e(71828).extendFlat;Q.exports={calc:function(t,o){for(var r=t._fullLayout,n=o.subplot,i=r[n].angularaxis,c=r[n].radialaxis.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,x=new Array(f),v=c,g=h,y=0;y<f;y++)x[y]={p:g[y],s:v[y]};function p(m){var w=o[m];void 0!==w&&(o["_"+m]=Array.isArray(w)?i.makeCalcdata(o,m):i.d2c(w,o.thetaunit))}return"linear"===i.type&&(p("width"),p("offset")),k(o,"marker")&&A(t,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),k(o,"marker.line")&&A(t,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(x,o),b(x,o),x},crossTraceCalc:function(t,o,r){for(var n=t.calcdata,a=[],i=0;i<n.length;i++){var c=n[i],h=c[0].trace;!0===h.visible&&d(h,"bar")&&h.subplot===r&&a.push(c)}var f=s({},o.radialaxis,{_id:"x"});T(t,o.angularaxis,f,a,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}}},6135:function(Q,z,e){"use strict";var k=e(71828),A=e(22184).handleRThetaDefaults,l=e(98340),T=e(55023);Q.exports=function(b,d,s,t){function o(r,n){return k.coerce(b,d,T,r,n)}A(b,d,t,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),l(b,d,o,s,t),k.coerceSelectionMarkerOpacity(d,o)):d.visible=!1}},27379:function(Q,z,e){"use strict";var k=e(30211),A=e(71828),l=e(95423).getTraceColor,T=A.fillText,b=e(59150).makeHoverPointText,d=e(10869).isPtInsidePolygon;Q.exports=function(s,t,o){var r=s.cd,n=r[0].trace,a=s.subplot,i=a.radialAxis,h=a.vangles,f=h?d:A.isPtInsideSector,x=s.maxHoverDistance,v=a.angularAxis._period||2*Math.PI,g=Math.abs(i.g2p(Math.sqrt(t*t+o*o))),y=Math.atan2(o,t);if(i.range[0]>i.range[1]&&(y+=Math.PI),k.getClosest(r,function(w){return f(g,y,[w.rp0,w.rp1],[w.thetag0,w.thetag1],h)?x+Math.min(1,Math.abs(w.thetag1-w.thetag0)/v)-1+(w.rp1-g)/(w.rp1-w.rp0)-1:1/0},s),!1!==s.index){var p=r[s.index];s.x0=s.x1=p.ct[0],s.y0=s.y1=p.ct[1];var m=A.extendFlat({},p,{r:p.s,theta:p.p});return T(p,n,s),b(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=l(n,p),s.xLabelVal=s.yLabelVal=void 0,p.s<0&&(s.idealAlign="left"),[s]}}},23381:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function(Q){"use strict";Q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(Q,z,e){"use strict";var k=e(71828),A=e(40151);Q.exports=function(l,T,b){var d,s={};function t(n,a){return k.coerce(l[d]||{},T[d],A,n,a)}for(var o=0;o<b.length;o++){var r=b[o];"barpolar"===r.type&&!0===r.visible&&(s[d=r.subplot]||(t("barmode"),t("bargap"),s[d]=1))}}},60173:function(Q,z,e){"use strict";var k=e(39898),A=e(92770),l=e(71828),T=e(91424),b=e(10869);Q.exports=function(d,s,t){var f,x,v,o=d._context.staticPlot,r=s.xaxis,n=s.yaxis,a=s.radialAxis,i=s.angularAxis,c=(x=(f=s).cxx,v=f.cyy,f.vangles?function(g,y,p,m){var w,u;l.angleDelta(p,m)>0?(w=p,u=m):(w=m,u=p);var S=[b.findEnclosingVertexAngles(w,f.vangles)[0],(w+u)/2,b.findEnclosingVertexAngles(u,f.vangles)[1]];return b.pathPolygonAnnulus(g,y,w,u,S,x,v)}:function(g,y,p,m){return l.pathAnnulus(g,y,p,m,x,v)}),h=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(h,t,"trace bars").each(function(){var f=k.select(this),x=l.ensureSingle(f,"g","points").selectAll("g.point").data(l.identity);x.enter().append("g").style("vector-effect",o?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(v){var g,y=k.select(this),p=v.rp0=a.c2p(v.s0),m=v.rp1=a.c2p(v.s1),w=v.thetag0=i.c2g(v.p0),u=v.thetag1=i.c2g(v.p1);if(A(p)&&A(m)&&A(w)&&A(u)&&p!==m&&w!==u){var S=a.c2g(v.s1),_=(w+u)/2;v.ct=[r.c2p(S*Math.cos(_)),n.c2p(S*Math.sin(_))],g=c(p,m,w,u)}else g="M0,0Z";l.ensureSingle(y,"path").attr("d",g)}),T.setClipUrl(f,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,d)})}},53522:function(Q,z,e){"use strict";var k=e(82196),A=e(1486),l=e(22399),T=e(12663).axisHoverFormat,b=e(5386).f,d=e(1426).extendFlat,s=k.marker,t=s.line;Q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},s.angle,{arrayOk:!1,editType:"calc"}),size:d({},s.size,{arrayOk:!1,editType:"calc"}),color:d({},s.color,{arrayOk:!1,editType:"style"}),line:{color:d({},t.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:d({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:k.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:d({},k.text,{}),hovertext:d({},k.hovertext,{}),hovertemplate:b({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(Q,z,e){"use strict";var k=e(92770),A=e(89298),l=e(42973),T=e(71828),b=e(50606).BADNUM,d=T._;Q.exports=function(f,x){var v,g,y,p,m,w,u,S=f._fullLayout,_=A.getFromId(f,x.xaxis||"x"),E=A.getFromId(f,x.yaxis||"y"),L=[],C="violin"===x.type?"_numViolins":"_numBoxes";"h"===x.orientation?(y=_,p="x",m=E,w="y",u=!!x.yperiodalignment):(y=E,p="y",m=_,w="x",u=!!x.xperiodalignment);var P,I,j,R,H,F,U=function(_e,De,He,Ve){var nt,tt=De+"0"in _e;if(De in _e||tt&&"d"+De in _e){var at=He.makeCalcdata(_e,De);return[l(_e,He,De,at).vals,at]}nt=tt?_e[De+"0"]:"name"in _e&&("category"===He.type||k(_e.name)&&-1!==["linear","log"].indexOf(He.type)||T.isDateTime(_e.name)&&"date"===He.type)?_e.name:Ve;for(var dt="multicategory"===He.type?He.r2c_just_indices(nt):He.d2c(nt,0,_e[De+"calendar"]),wt=_e._length,bt=new Array(wt),_t=0;_t<wt;_t++)bt[_t]=dt;return[bt]}(x,w,m,S[C]),B=U[0],N=U[1],J=T.distinctVals(B,m),Z=J.vals,V=J.minDiff/2,W="all"===(x.boxpoints||x.points)?T.identity:function(_e){return _e.v<P.lf||_e.v>P.uf};if(x._hasPreCompStats){var X=x[p],K=function(_e){return y.d2c((x[_e]||[])[v])},ne=1/0,re=-1/0;for(v=0;v<x._length;v++){var ae=B[v];if(k(ae)){if((P={}).pos=P[w]=ae,u&&N&&(P.orig_p=N[v]),P.q1=K("q1"),P.med=K("median"),P.q3=K("q3"),I=[],X&&T.isArrayOrTypedArray(X[v]))for(g=0;g<X[v].length;g++)(F=y.d2c(X[v][g]))!==b&&(t(H={v:F,i:[v,g]},x,[v,g]),I.push(H));if(P.pts=I.sort(o),R=(j=P[p]=I.map(r)).length,P.med!==b&&P.q1!==b&&P.q3!==b&&P.med>=P.q1&&P.q3>=P.med){var le=K("lowerfence");P.lf=le!==b&&le<=P.q1?le:n(P,j,R);var pe=K("upperfence");P.uf=pe!==b&&pe>=P.q3?pe:a(P,j,R);var xe=K("mean");P.mean=xe!==b?xe:R?T.mean(j,R):(P.q1+P.q3)/2;var ye=K("sd");P.sd=xe!==b&&ye>=0?ye:R?T.stdev(j,R,P.mean):P.q3-P.q1,P.lo=i(P),P.uo=c(P);var se=K("notchspan");se=se!==b&&se>0?se:h(P,R),P.ln=P.med-se,P.un=P.med+se;var fe=P.lf,Ee=P.uf;x.boxpoints&&j.length&&(fe=Math.min(fe,j[0]),Ee=Math.max(Ee,j[R-1])),x.notched&&(fe=Math.min(fe,P.ln),Ee=Math.max(Ee,P.un)),P.min=fe,P.max=Ee}else{var de;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join("\n")),P.med=de=P.med!==b?P.med:P.q1!==b?P.q3!==b?(P.q1+P.q3)/2:P.q1:P.q3!==b?P.q3:0,P.q1=P.q3=de,P.lf=P.uf=de,P.mean=P.sd=de,P.ln=P.un=de,P.min=P.max=de}ne=Math.min(ne,P.min),re=Math.max(re,P.max),P.pts2=I.filter(W),L.push(P)}}x._extremes[y._id]=A.findExtremes(y,[ne,re],{padded:!0})}else{var we=y.makeCalcdata(x,p),ke=function(_e,De){for(var He=_e.length,Ve=new Array(He+1),nt=0;nt<He;nt++)Ve[nt]=_e[nt]-De;return Ve[He]=_e[He-1]+De,Ve}(Z,V),Te=Z.length,$=function(_e){for(var De=new Array(_e),He=0;He<_e;He++)De[He]=[];return De}(Te);for(v=0;v<x._length;v++)if(k(F=we[v])){var oe=T.findBin(B[v],ke);oe>=0&&oe<Te&&(t(H={v:F,i:v},x,v),$[oe].push(H))}var he=1/0,me=-1/0,Me=x.quartilemethod,Ie="exclusive"===Me,Pe="inclusive"===Me;for(v=0;v<Te;v++)if($[v].length>0){var ze,ce;(P={}).pos=P[w]=Z[v],I=P.pts=$[v].sort(o),R=(j=P[p]=I.map(r)).length,P.min=j[0],P.max=j[R-1],P.mean=T.mean(j,R),P.sd=T.stdev(j,R,P.mean),P.med=T.interp(j,.5),R%2&&(Ie||Pe)?(Ie?(ze=j.slice(0,R/2),ce=j.slice(R/2+1)):Pe&&(ze=j.slice(0,R/2+1),ce=j.slice(R/2)),P.q1=T.interp(ze,.5),P.q3=T.interp(ce,.5)):(P.q1=T.interp(j,.25),P.q3=T.interp(j,.75)),P.lf=n(P,j,R),P.uf=a(P,j,R),P.lo=i(P),P.uo=c(P);var ge=h(P,R);P.ln=P.med-ge,P.un=P.med+ge,he=Math.min(he,P.ln),me=Math.max(me,P.un),P.pts2=I.filter(W),L.push(P)}x._extremes[y._id]=A.findExtremes(y,x.notched?we.concat([he,me]):we,{padded:!0})}return function(_e,De){if(T.isArrayOrTypedArray(De.selectedpoints))for(var He=0;He<_e.length;He++){for(var Ve=_e[He].pts||[],nt={},tt=0;tt<Ve.length;tt++)nt[Ve[tt].i]=tt;T.tagSelected(Ve,De,nt)}}(L,x),L.length>0?(L[0].t={num:S[C],dPos:V,posLetter:w,valLetter:p,labels:{med:d(f,"median:"),min:d(f,"min:"),q1:d(f,"q1:"),q3:d(f,"q3:"),max:d(f,"max:"),mean:d(f,"sd"===x.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:d(f,"lower fence:"),uf:d(f,"upper fence:")}},S[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(f,x,v){for(var g in s)T.isArrayOrTypedArray(x[g])&&(Array.isArray(v)?T.isArrayOrTypedArray(x[g][v[0]])&&(f[s[g]]=x[g][v[0]][v[1]]):f[s[g]]=x[g][v])}function o(f,x){return f.v-x.v}function r(f){return f.v}function n(f,x,v){return 0===v?f.q1:Math.min(f.q1,x[Math.min(T.findBin(2.5*f.q1-1.5*f.q3,x,!0)+1,v-1)])}function a(f,x,v){return 0===v?f.q3:Math.max(f.q3,x[Math.max(T.findBin(2.5*f.q3-1.5*f.q1,x),0)])}function i(f){return 4*f.q1-3*f.q3}function c(f){return 4*f.q3-3*f.q1}function h(f,x){return 0===x?0:1.57*(f.q3-f.q1)/Math.sqrt(x)}},37188:function(Q,z,e){"use strict";var k=e(89298),A=e(71828),l=e(99082).getAxisGroup,T=["v","h"];function b(d,s,t,o){var r,n,a,i=s.calcdata,c=s._fullLayout,h=o._id,f=h.charAt(0),x=[],v=0;for(r=0;r<t.length;r++)for(a=i[t[r]],n=0;n<a.length;n++)x.push(o.c2l(a[n].pos,!0)),v+=(a[n].pts2||[]).length;if(x.length){var g=A.distinctVals(x);"category"!==o.type&&"multicategory"!==o.type||(g.minDiff=1);var y=g.minDiff/2;k.minDtick(o,g.minDiff,g.vals[0],!0);var p=c["violin"===d?"_numViolins":"_numBoxes"],m="group"===c[d+"mode"]&&p>1,w=1-c[d+"gap"],u=1-c[d+"groupgap"];for(r=0;r<t.length;r++){var S,_,E,L,C,P,I=(a=i[t[r]])[0].trace,j=a[0].t,R=I.width,H=I.side;if(R)S=_=L=R/2,E=0;else if(S=y,m){var F=l(c,o._id)+I.orientation,B=Object.keys(((c._alignmentOpts[F]||{})[I.alignmentgroup]||{}).offsetGroups||{}).length,N=B||p;_=S*w*u/N,E=2*S*(((B?I._offsetIndex:j.num)+.5)/N-.5)*w,L=S*w/N}else _=S*w*u,E=0,L=S;j.dPos=S,j.bPos=E,j.bdPos=_,j.wHover=L;var J,Z,V,W,X,K,ne=E+_,re=Boolean(R);if("positive"===H?(C=S*(R?1:.5),J=ne,P=J=E):"negative"===H?(C=J=E,P=S*(R?1:.5),Z=ne):(C=P=S,J=Z=ne),(I.boxpoints||I.points)&&v>0){var ae=I.pointpos,le=I.jitter,pe=I.marker.size/2,xe=0;ae+le>=0&&((xe=ne*(ae+le))>C?(re=!0,X=pe,V=xe):xe>J&&(X=pe,V=C)),xe<=C&&(V=C);var ye=0;ae-le<=0&&((ye=-ne*(ae-le))>P?(re=!0,K=pe,W=ye):ye>Z&&(K=pe,W=P)),ye<=P&&(W=P)}else V=C,W=P;var se=new Array(a.length);for(n=0;n<a.length;n++)se[n]=a[n].pos;I._extremes[h]=k.findExtremes(o,se,{padded:re,vpadminus:W,vpadplus:V,vpadLinearized:!0,ppadminus:{x:K,y:X}[f],ppadplus:{x:X,y:K}[f]})}}}Q.exports={crossTraceCalc:function(d,s){for(var t=d.calcdata,o=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],i="h"===a?r:o,c=[],h=0;h<t.length;h++){var f=t[h],v=f[0].trace;!0!==v.visible||"box"!==v.type&&"candlestick"!==v.type||f[0].t.empty||(v.orientation||"v")!==a||v.xaxis!==o._id||v.yaxis!==r._id||c.push(h)}b("box",d,c,i)}},setPositionOffset:b}},36411:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=e(7901),T=e(73927),b=e(26125),d=e(4322),s=e(53522);function t(r,n,a,i){function c(H){var F=0;return H&&H.length&&(F+=1,k.isArrayOrTypedArray(H[0])&&H[0].length&&(F+=1)),F}function h(H){return k.validate(r[H],s[H])}var f,x=a("y"),v=a("x");if("box"===n.type){var g=a("q1"),y=a("median"),p=a("q3");n._hasPreCompStats=g&&g.length&&y&&y.length&&p&&p.length,f=Math.min(k.minRowLength(g),k.minRowLength(y),k.minRowLength(p))}var m,w,u=c(x),S=c(v),_=u&&k.minRowLength(x),E=S&&k.minRowLength(v),L=i.calendar,C={autotypenumbers:i.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(u)){case"00":var P=h("x0")||h("dx");m=!h("y0")&&!h("dy")||P?"v":"h",w=f;break;case"10":m="v",w=Math.min(f,E);break;case"20":m="h",w=Math.min(f,v.length);break;case"01":m="h",w=Math.min(f,_);break;case"02":m="v",w=Math.min(f,x.length);break;case"12":m="v",w=Math.min(f,E,x.length);break;case"21":m="h",w=Math.min(f,v.length,_);break;case"11":w=0;break;case"22":var I,j=!1;for(I=0;I<v.length;I++)if("category"===d(v[I],L,C)){j=!0;break}if(j)m="v",w=Math.min(f,E,x.length);else{for(I=0;I<x.length;I++)if("category"===d(x[I],L,C)){j=!0;break}j?(m="h",w=Math.min(f,v.length,_)):(m="v",w=Math.min(f,E,x.length))}}else u>0?(m="v",w=S>0?Math.min(E,_):Math.min(_)):S>0?(m="h",w=Math.min(E)):w=0;if(w){n._length=w;var R=a("orientation",m);n._hasPreCompStats?"v"===R&&0===S?(a("x0",0),a("dx",1)):"h"===R&&0===u&&(a("y0",0),a("dy",1)):"v"===R&&0===S?a("x0"):"h"===R&&0===u&&a("y0"),A.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i)}else n.visible=!1}function o(r,n,a,i){var c=i.prefix,h=k.coerce2(r,n,s,"marker.outliercolor"),f=a("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(h||f)&&(x="suspectedoutliers");var v=a(c+"points",x);v?(a("jitter","all"===v?.3:0),a("pointpos","all"===v?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),"suspectedoutliers"===v&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var g=a("hoveron");"all"!==g&&-1===g.indexOf("points")||a("hovertemplate"),k.coerceSelectionMarkerOpacity(n,a)}Q.exports={supplyDefaults:function(r,n,a,i){function c(p,m){return k.coerce(r,n,s,p,m)}if(t(r,n,c,i),!1!==n.visible){T(r,n,i,c),c("xhoverformat"),c("yhoverformat");var h=n._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||a),c("line.width"),c("fillcolor",l.addOpacity(n.line.color,.5));var f=!1;if(h){var x=c("mean"),v=c("sd");x&&x.length&&(f=!0,v&&v.length&&(f="sd"))}c("boxmean",f),c("whiskerwidth"),c("width"),c("quartilemethod");var g=!1;if(h){var y=c("notchspan");y&&y.length&&(g=!0)}else k.validate(r.notchwidth,s.notchwidth)&&(g=!0);c("notched",g)&&c("notchwidth"),o(r,n,c,{prefix:"box"})}},crossTraceDefaults:function(r,n){var i;function c(x){return k.coerce(i._input,i,s,x)}for(var h=0;h<r.length;h++){var f=(i=r[h]).type;"box"!==f&&"violin"!==f||"group"===n[f+"mode"]&&b(i._input,i,n,c)}},handleSampleDefaults:t,handlePointsDefaults:o}},74907:function(Q){"use strict";Q.exports=function(z,e){return e.hoverOnBox&&(z.hoverOnBox=e.hoverOnBox),"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},41868:function(Q,z,e){"use strict";var k=e(89298),A=e(71828),l=e(30211),T=e(7901),b=A.fillText;function d(t,o,r,n){var a,i,c,h,f,x,v,g,y,p,m,w,u,S,_=t.cd,E=t.xa,L=t.ya,C=_[0].trace,P=_[0].t,I="violin"===C.type,j=P.bdPos,R=P.wHover,H=function(de){return c.c2l(de.pos)+P.bPos-c.c2l(x)};I&&"both"!==C.side?("positive"===C.side&&(y=function(de){var we=H(de);return l.inbox(we,we+R,p)},w=j,u=0),"negative"===C.side&&(y=function(de){var we=H(de);return l.inbox(we-R,we,p)},w=0,u=j)):(y=function(de){var we=H(de);return l.inbox(we-R,we+R,p)},w=u=j),S=I?function(de){return l.inbox(de.span[0]-f,de.span[1]-f,p)}:function(de){return l.inbox(de.min-f,de.max-f,p)},"h"===C.orientation?(f=o,x=r,v=S,g=y,a="y",c=L,i="x",h=E):(f=r,x=o,v=y,g=S,a="x",c=E,i="y",h=L);var F=Math.min(1,j/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function U(de){return(v(de)+g(de))/2}p=t.maxHoverDistance-F,m=t.maxSpikeDistance-F;var B=l.getDistanceFunction(n,v,g,U);if(l.getClosest(_,B,t),!1===t.index)return[];var N=_[t.index],J=C.line.color,Z=(C.marker||{}).color;t.color=T.opacity(J)&&C.line.width?J:T.opacity(Z)&&C.boxpoints?Z:C.fillcolor,t[a+"0"]=c.c2p(N.pos+P.bPos-u,!0),t[a+"1"]=c.c2p(N.pos+P.bPos+w,!0),t[a+"LabelVal"]=void 0!==N.orig_p?N.orig_p:N.pos;var V=a+"Spike";t.spikeDistance=U(N)*m/p,t[V]=c.c2p(N.pos,!0);var W=C.boxmean||(C.meanline||{}).visible,X=C.boxpoints||C.points,K=X&&W?["max","uf","q3","med","mean","q1","lf","min"]:X&&!W?["max","uf","q3","med","q1","lf","min"]:!X&&W?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];C.orientation===(h.range[1]<h.range[0]?"v":"h")&&K.reverse();for(var re=t.spikeDistance,ae=t[V],le=[],pe=0;pe<K.length;pe++){var xe=K[pe];if(xe in N){var ye=N[xe],se=h.c2p(ye,!0),fe=A.extendFlat({},t);fe.attr=xe,fe[i+"0"]=fe[i+"1"]=se,fe[i+"LabelVal"]=ye,fe[i+"Label"]=(P.labels?P.labels[xe]+" ":"")+k.hoverLabelText(h,ye,C[i+"hoverformat"]),fe.hoverOnBox=!0,"mean"===xe&&"sd"in N&&"sd"===C.boxmean&&(fe[i+"err"]=N.sd),fe.hovertemplate=!1,le.push(fe)}}t.name="",t.spikeDistance=void 0,t[V]=void 0;for(var Ee=0;Ee<le.length;Ee++)"med"!==le[Ee].attr?(le[Ee].name="",le[Ee].spikeDistance=void 0,le[Ee][V]=void 0):(le[Ee].spikeDistance=re,le[Ee][V]=ae);return le}function s(t,o,r){for(var n,a,i,c=t.cd,h=t.xa,f=t.ya,x=c[0].trace,v=h.c2p(o),g=f.c2p(r),y=l.quadrature(function(I){var j=Math.max(3,I.mrc||0);return Math.max(Math.abs(h.c2p(I.x)-v)-j,1-3/j)},function(I){var j=Math.max(3,I.mrc||0);return Math.max(Math.abs(f.c2p(I.y)-g)-j,1-3/j)}),p=!1,m=0;m<c.length;m++){a=c[m];for(var w=0;w<(a.pts||[]).length;w++){var u=y(i=a.pts[w]);u<=t.distance&&(t.distance=u,p=[m,w])}}if(!p)return!1;i=(a=c[p[0]]).pts[p[1]];var S=h.c2p(i.x,!0),_=f.c2p(i.y,!0),E=i.mrc||1;n=A.extendFlat({},t,{index:i.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:_-E,y1:_+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var L,C=a.orig_p,P=void 0!==C?C:a.pos;return"h"===x.orientation?(L=f,n.xLabelVal=i.x,n.yLabelVal=P):(L=h,n.xLabelVal=P,n.yLabelVal=i.y),n[L._id.charAt(0)+"Spike"]=L.c2p(a.pos,!0),b(i,x,n),n}Q.exports={hoverPoints:function(t,o,r,n){var a,i=t.cd[0].trace.hoveron,c=[];return-1!==i.indexOf("boxes")&&(c=c.concat(d(t,o,r,n))),-1!==i.indexOf("points")&&(a=s(t,o,r)),"closest"===n?a?[a]:c:(a&&c.push(a),c)},hoverOnBoxes:d,hoverOnPoints:s}},83832:function(Q,z,e){"use strict";Q.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(Q){"use strict";Q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(40094);function T(b,d,s,t,o){for(var r=o+"Layout",n=!1,a=0;a<s.length;a++)if(k.traceIs(s[a],r)){n=!0;break}n&&(t(o+"mode"),t(o+"gap"),t(o+"groupgap"))}Q.exports={supplyLayoutDefaults:function(b,d,s){T(0,0,s,function(t,o){return A.coerce(b,d,l,t,o)},"box")},_supply:T}},86047:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424);function T(s,t,o,r,n){var a,i,c="h"===o.orientation,h=t.val,f=t.pos,x=!!f.rangebreaks,v=r.bPos,g=r.wdPos||0,y=r.bPosPxOffset||0,p=o.whiskerwidth||0,m=o.notched||!1,w=m?1-2*o.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],i=r.bdPos[1]):(a=r.bdPos,i=r.bdPos);var u=s.selectAll("path.box").data("violin"!==o.type||o.box.visible?A.identity:[]);u.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),u.exit().remove(),u.each(function(S){if(S.empty)return"M0,0Z";var _=f.c2l(S.pos+v,!0),E=f.l2p(_-a)+y,L=f.l2p(_+i)+y,C=x?(E+L)/2:f.l2p(_)+y,P=o.whiskerwidth,I=x?E*P+(1-P)*C:f.l2p(_-g)+y,j=x?L*P+(1-P)*C:f.l2p(_+g)+y,R=f.l2p(_-a*w)+y,H=f.l2p(_+i*w)+y,F=h.c2p(S.q1,!0),U=h.c2p(S.q3,!0),B=A.constrain(h.c2p(S.med,!0),Math.min(F,U)+1,Math.max(F,U)-1),N=void 0===S.lf||!1===o.boxpoints,J=h.c2p(N?S.min:S.lf,!0),Z=h.c2p(N?S.max:S.uf,!0),V=h.c2p(S.ln,!0),W=h.c2p(S.un,!0);c?k.select(this).attr("d","M"+B+","+R+"V"+H+"M"+F+","+E+"V"+L+(m?"H"+V+"L"+B+","+H+"L"+W+","+L:"")+"H"+U+"V"+E+(m?"H"+W+"L"+B+","+R+"L"+V+","+E:"")+"ZM"+F+","+C+"H"+J+"M"+U+","+C+"H"+Z+(0===p?"":"M"+J+","+I+"V"+j+"M"+Z+","+I+"V"+j)):k.select(this).attr("d","M"+R+","+B+"H"+H+"M"+E+","+F+"H"+L+(m?"V"+V+"L"+H+","+B+"L"+L+","+W:"")+"V"+U+"H"+E+(m?"V"+W+"L"+R+","+B+"L"+E+","+V:"")+"ZM"+C+","+F+"V"+J+"M"+C+","+U+"V"+Z+(0===p?"":"M"+I+","+J+"H"+j+"M"+I+","+Z+"H"+j))})}function b(s,t,o,r){var n=t.x,a=t.y,i=r.bdPos,c=r.bPos,h=o.boxpoints||o.points;A.seedPseudoRandom();var f=s.selectAll("g.points").data(h?function(v){return v.forEach(function(g){g.t=r,g.trace=o}),v}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var x=f.selectAll("path").data(function(v){var g,y,p=v.pts2,m=Math.max((v.max-v.min)/10,v.q3-v.q1),w=1e-9*m,u=.01*m,S=[],_=0;if(o.jitter){if(0===m)for(_=1,S=new Array(p.length),g=0;g<p.length;g++)S[g]=1;else for(g=0;g<p.length;g++){var E=Math.max(0,g-5),L=p[E].v,C=Math.min(p.length-1,g+5),P=p[C].v;"all"!==h&&(p[g].v<v.lf?P=Math.min(P,v.lf):L=Math.max(L,v.uf));var I=Math.sqrt(u*(C-E)/(P-L+w))||0;I=A.constrain(Math.abs(I),0,1),S.push(I),_=Math.max(I,_)}y=2*o.jitter/(_||1)}for(g=0;g<p.length;g++){var j=p[g],R=j.v,H=o.jitter?y*S[g]*(A.pseudoRandom()-.5):0,F=v.pos+c+i*(o.pointpos+H);"h"===o.orientation?(j.y=F,j.x=R):(j.x=F,j.y=R),"suspectedoutliers"===h&&R<v.uo&&R>v.lo&&(j.so=!0)}return p});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(l.translatePoints,n,a)}function d(s,t,o,r){var n,a,i=t.val,c=t.pos,h=!!c.rangebreaks,f=r.bPos,x=r.bPosPxOffset||0,v=o.boxmean||(o.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var g=s.selectAll("path.mean").data("box"===o.type&&o.boxmean||"violin"===o.type&&o.box.visible&&o.meanline.visible?A.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(y){var p=c.c2l(y.pos+f,!0),m=c.l2p(p-n)+x,w=c.l2p(p+a)+x,u=h?(m+w)/2:c.l2p(p)+x,S=i.c2p(y.mean,!0),_=i.c2p(y.mean-y.sd,!0),E=i.c2p(y.mean+y.sd,!0);"h"===o.orientation?k.select(this).attr("d","M"+S+","+m+"V"+w+("sd"===v?"m0,0L"+_+","+u+"L"+S+","+m+"L"+E+","+u+"Z":"")):k.select(this).attr("d","M"+m+","+S+"H"+w+("sd"===v?"m0,0L"+u+","+_+"L"+m+","+S+"L"+u+","+E+"Z":""))})}Q.exports={plot:function(s,t,o,r){var n=s._context.staticPlot,a=t.xaxis,i=t.yaxis;A.makeTraceGroups(r,o,"trace boxes").each(function(c){var h,f,x=k.select(this),v=c[0],g=v.t,y=v.trace;g.wdPos=g.bdPos*y.whiskerwidth,!0!==y.visible||g.empty?x.remove():("h"===y.orientation?(h=i,f=a):(h=a,f=i),T(x,{pos:h,val:f},y,g,n),b(x,{x:a,y:i},y,g),d(x,{pos:h,val:f},y,g))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:d}},24626:function(Q){"use strict";Q.exports=function(z,e){var k,A,l=z.cd,T=z.xaxis,b=z.yaxis,d=[];if(!1===e)for(k=0;k<l.length;k++)for(A=0;A<(l[k].pts||[]).length;A++)l[k].pts[A].selected=0;else for(k=0;k<l.length;k++)for(A=0;A<(l[k].pts||[]).length;A++){var s=l[k].pts[A],t=T.c2p(s.x),o=b.c2p(s.y);e.contains([t,o],null,s.i,z)?(d.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return d}},58063:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(91424);Q.exports={style:function(T,b,d){var s=d||k.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=k.select(this),r=t[0].trace,n=r.line.width;function a(h,f,x,v){h.style("stroke-width",f+"px").call(A.stroke,x).call(A.fill,v)}var i=o.selectAll("path.box");if("candlestick"===r.type)i.each(function(h){if(!h.empty){var f=k.select(this),x=r[h.dir];a(f,x.line.width,x.line.color,x.fillcolor),f.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(i,n,r.line.color,r.fillcolor),o.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(A.stroke,r.line.color);var c=o.selectAll("path.point");l.pointStyle(c,r,T)}})},styleOnSelect:function(T,b,d){var s=b[0].trace,t=d.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(t,s):l.pointStyle(t,s,T)}}},75343:function(Q,z,e){"use strict";var k=e(71828).extendFlat,A=e(12663).axisHoverFormat,l=e(2522),T=e(53522);function b(d){return{line:{color:k({},T.line.color,{dflt:d}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}Q.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:k({},T.line.width,{}),editType:"style"},increasing:b(l.increasing.line.color.dflt),decreasing:b(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:k({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(42973),T=e(3485).calcCommon;function b(d,s,t,o){return{min:t,q1:Math.min(d,o),med:o,q3:Math.max(d,o),max:s}}Q.exports=function(d,s){var t=d._fullLayout,o=A.getFromId(d,s.xaxis),r=A.getFromId(d,s.yaxis),n=o.makeCalcdata(s,"x"),a=l(s,o,"x",n).vals,i=T(d,s,n,a,r,b);return i.length?(k.extendFlat(i[0].t,{num:t._numBoxes,dPos:k.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,i):[{t:{empty:!0}}]}},1026:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(14555),T=e(73927),b=e(75343);function d(s,t,o,r){var n=o(r+".line.color");o(r+".line.width",t.line.width),o(r+".fillcolor",A.addOpacity(n,.5))}Q.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,b,a,i)}l(s,t,n,r)?(T(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),d(0,t,n,"increasing"),d(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function(Q,z,e){"use strict";var k=e(11500),A=e(44467);Q.exports=function(l,T,b,d,s){var t,o,r,n;d("a")||(d("da"),d("a0")),d("b")||(d("db"),d("b0")),t=l,o=T,r=b,n=s,["aaxis","baxis"].forEach(function(a){var i=a.charAt(0),c=t[a]||{},h=A.newContainer(o,a);k(c,h,{noTicklabelstep:!0,tickfont:"x",id:i+"axis",letter:i,font:o.font,name:a,data:t[i],calendar:o.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r}),h._categories=h._categories||[],t[a]||"-"===c.type||(t[a]={type:c.type})})}},402:function(Q,z,e){"use strict";var k=e(71828).isArrayOrTypedArray;function A(l,T){if(!k(l)||T>=10)return null;for(var b=1/0,d=-1/0,s=l.length,t=0;t<s;t++){var o=l[t];if(k(o)){var r=A(o,T+1);r&&(b=Math.min(r[0],b),d=Math.max(r[1],d))}else b=Math.min(o,b),d=Math.max(o,d)}return[b,d]}Q.exports=function(l){return A(l,0)}},99798:function(Q,z,e){"use strict";var k=e(41940),A=e(1928),l=e(22399),T=k({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,Q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:A,baxis:A,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function(Q,z,e){"use strict";var k=e(71828).isArrayOrTypedArray;Q.exports=function(A,l,T,b){var d,s,t,o,r,n,a,i,c,h,f,x,v,g=k(T)?"a":"b",y=("a"===g?A.aaxis:A.baxis).smoothing,p="a"===g?A.a2i:A.b2j,m="a"===g?T:b,w="a"===g?b:T,u="a"===g?l.a.length:l.b.length,S="a"===g?l.b.length:l.a.length,_=Math.floor("a"===g?A.b2j(w):A.a2i(w)),E="a"===g?function(J){return A.evalxy([],J,_)}:function(J){return A.evalxy([],_,J)};y&&(t=Math.max(0,Math.min(S-2,_)),o=_-t,s="a"===g?function(J,Z){return A.dxydi([],J,t,Z,o)}:function(J,Z){return A.dxydj([],t,J,o,Z)});var L=p(m[0]),C=p(m[1]),P=L<C?1:-1,I=1e-8*(C-L),j=P>0?Math.floor:Math.ceil,R=P>0?Math.ceil:Math.floor,H=P>0?Math.min:Math.max,F=P>0?Math.max:Math.min,U=j(L+I),B=R(C-I),N=[[a=E(L)]];for(d=U;d*P<B*P;d+=P)r=[],f=F(L,d),v=(x=H(C,d+P))-f,n=Math.max(0,Math.min(u-2,Math.floor(.5*(f+x)))),i=E(x),y&&(c=s(n,f-n),h=s(n,x-n),r.push([a[0]+c[0]/3*v,a[1]+c[1]/3*v]),r.push([i[0]-h[0]/3*v,i[1]-h[1]/3*v])),r.push(i),N.push(r),a=i;return N}},1928:function(Q,z,e){"use strict";var k=e(41940),A=e(22399),l=e(13838),T=e(12663).descriptionWithDates,b=e(30962).overrideAll,d=e(79952).P,s=e(1426).extendFlat;Q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:k({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:k({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:A.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},d,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},d,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:A.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:k({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(Q,z,e){"use strict";var k=e(99798),A=e(7901).addOpacity,l=e(73972),T=e(71828),b=e(26218),d=e(96115),s=e(89426),t=e(15258),o=e(21994),r=e(4322);Q.exports=function(n,a,i){var c=i.letter,h=i.font||{},f=k[c+"axis"];function x(P,I){return T.coerce(n,a,f,P,I)}function v(P,I){return T.coerce2(n,a,f,P,I)}i.name&&(a._name=i.name,a._id=i.name),x("autotypenumbers",i.autotypenumbersDflt);var g=x("type");"-"===g&&(i.data&&function(P,I){if("-"===P.type){var j=P._id.charAt(0);P.type=r(I,P[j+"calendar"],{autotypenumbers:P.autotypenumbers})}}(a,i.data),"-"===a.type?a.type="linear":g=n.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",c+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),"array"===a.tickmode&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=c,"date"===g&&l.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",i.calendar),o(a,i.fullLayout),a.c2p=T.identity;var y=x("color",i.dfltColor),p=y===n.color?y:h.color;x("title.text")&&(T.coerceFont(x,"title.font",{family:h.family,size:T.bigFont(h.size),color:p}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(n.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),b(n,a,x,g),s(n,a,x,g,i),d(n,a,x,g,i),t(n,a,x,{data:i.data,dataAttr:c});var m=v("gridcolor",A(y,.3)),w=v("gridwidth"),u=v("griddash"),S=x("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var _=v("startlinecolor",y),E=v("startlinewidth",w);x("startline",a.showgrid||!!_||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var L=v("endlinecolor",y),C=v("endlinewidth",w);return x("endline",a.showgrid||!!L||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",w),x("minorgriddash",u),x("minorgridcolor",A(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),"none"===a.showticklabels&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},25281:function(Q,z,e){"use strict";var k=e(89298),A=e(71828).isArray1D,l=e(53824),T=e(402),b=e(20347),d=e(83311),s=e(44807),t=e(4742),o=e(72505),r=e(68296),n=e(11435);Q.exports=function(a,i){var c=k.getFromId(a,i.xaxis),h=k.getFromId(a,i.yaxis),f=i.aaxis,x=i.baxis,v=i.x,g=i.y,y=[];v&&A(v)&&y.push("x"),g&&A(g)&&y.push("y"),y.length&&r(i,f,x,"a","b",y);var p=i._a=i._a||i.a,m=i._b=i._b||i.b;v=i._x||i.x,g=i._y||i.y;var w={};i._cheater&&(v=l("index"===f.cheatertype?p.length:p,"index"===x.cheatertype?m.length:m,i.cheaterslope)),i._x=v=t(v),i._y=g=t(g),o(v,p,m),o(g,p,m),n(i),i.setScale();var _=T(v),E=T(g),L=.5*(_[1]-_[0]),C=.5*(_[1]+_[0]),P=.5*(E[1]-E[0]),I=.5*(E[1]+E[0]),j=1.3;return E=[I-P*j,I+P*j],i._extremes[c._id]=k.findExtremes(c,_=[C-L*j,C+L*j],{padded:!0}),i._extremes[h._id]=k.findExtremes(h,E,{padded:!0}),b(i,"a","b"),b(i,"b","a"),d(i,f),d(i,x),w.clipsegments=s(i._xctrl,i._yctrl,f,x),w.x=v,w.y=g,w.a=p,w.b=m,[w]}},44807:function(Q){"use strict";Q.exports=function(z,e,k,A){var l,T,b,d=[],s=!!k.smoothing,t=!!A.smoothing,o=z[0].length-1,r=z.length-1;for(l=0,T=[],b=[];l<=o;l++)T[l]=z[0][l],b[l]=e[0][l];for(d.push({x:T,y:b,bicubic:s}),l=0,T=[],b=[];l<=r;l++)T[l]=z[l][o],b[l]=e[l][o];for(d.push({x:T,y:b,bicubic:t}),l=o,T=[],b=[];l>=0;l--)T[o-l]=z[r][l],b[o-l]=e[r][l];for(d.push({x:T,y:b,bicubic:s}),l=r,T=[],b=[];l>=0;l--)T[r-l]=z[l][0],b[r-l]=e[l][0];return d.push({x:T,y:b,bicubic:t}),d}},20347:function(Q,z,e){"use strict";var k=e(89298),A=e(1426).extendFlat;Q.exports=function(l,T,b){var d,s,t,o,r,n,a,i,c,h,f,x,v,g,y=l["_"+T],p=l[T+"axis"],m=p._gridlines=[],w=p._minorgridlines=[],u=p._boundarylines=[],S=l["_"+b],_=l[b+"axis"];"array"===p.tickmode&&(p.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,P=E.length,I=l._a.length,j=l._b.length;k.prepTicks(p),"array"===p.tickmode&&delete p.tickvals;var R=p.smoothing?3:1;function H(U){var B,N,J,Z,V,W,X,K,ne,re,ae,le,pe=[],xe=[],ye={};if("b"===T)for(N=l.b2j(U),J=Math.floor(Math.max(0,Math.min(j-2,N))),Z=N-J,ye.length=j,ye.crossLength=I,ye.xy=function(se){return l.evalxy([],se,N)},ye.dxy=function(se,fe){return l.dxydi([],se,J,fe,Z)},B=0;B<I;B++)W=Math.min(I-2,B),X=B-W,K=l.evalxy([],B,N),_.smoothing&&B>0&&(ne=l.dxydi([],B-1,J,0,Z),pe.push(V[0]+ne[0]/3),xe.push(V[1]+ne[1]/3),re=l.dxydi([],B-1,J,1,Z),pe.push(K[0]-re[0]/3),xe.push(K[1]-re[1]/3)),pe.push(K[0]),xe.push(K[1]),V=K;else for(B=l.a2i(U),W=Math.floor(Math.max(0,Math.min(I-2,B))),X=B-W,ye.length=I,ye.crossLength=j,ye.xy=function(se){return l.evalxy([],B,se)},ye.dxy=function(se,fe){return l.dxydj([],W,se,X,fe)},N=0;N<j;N++)J=Math.min(j-2,N),Z=N-J,K=l.evalxy([],B,N),_.smoothing&&N>0&&(ae=l.dxydj([],W,N-1,X,0),pe.push(V[0]+ae[0]/3),xe.push(V[1]+ae[1]/3),le=l.dxydj([],W,N-1,X,1),pe.push(K[0]-le[0]/3),xe.push(K[1]-le[1]/3)),pe.push(K[0]),xe.push(K[1]),V=K;return ye.axisLetter=T,ye.axis=p,ye.crossAxis=_,ye.value=U,ye.constvar=b,ye.index=i,ye.x=pe,ye.y=xe,ye.smoothing=_.smoothing,ye}function F(U){var B,N,J,Z,V,W=[],X=[],K={};if(K.length=y.length,K.crossLength=S.length,"b"===T)for(J=Math.max(0,Math.min(j-2,U)),V=Math.min(1,Math.max(0,U-J)),K.xy=function(ne){return l.evalxy([],ne,U)},K.dxy=function(ne,re){return l.dxydi([],ne,J,re,V)},B=0;B<C;B++)W[B]=E[U*R][B],X[B]=L[U*R][B];else for(N=Math.max(0,Math.min(I-2,U)),Z=Math.min(1,Math.max(0,U-N)),K.xy=function(ne){return l.evalxy([],U,ne)},K.dxy=function(ne,re){return l.dxydj([],N,ne,Z,re)},B=0;B<P;B++)W[B]=E[B][U*R],X[B]=L[B][U*R];return K.axisLetter=T,K.axis=p,K.crossAxis=_,K.value=y[U],K.constvar=b,K.index=U,K.x=W,K.y=X,K.smoothing=_.smoothing,K}if("array"===p.tickmode){for(o=5e-15,n=(r=[Math.floor((y.length-1-p.arraytick0)/p.arraydtick*(1+o)),Math.ceil(-p.arraytick0/p.arraydtick/(1+o))].sort(function(U,B){return U-B}))[0]-1,a=r[1]+1,i=n;i<a;i++)(s=p.arraytick0+p.arraydtick*i)<0||s>y.length-1||m.push(A(F(s),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n;i<a;i++)if(t=p.arraytick0+p.arraydtick*i,f=Math.min(t+p.arraydtick,y.length-1),!(t<0||t>y.length-1||f<0||f>y.length-1))for(x=y[t],v=y[f],d=0;d<p.minorgridcount;d++)(g=f-t)<=0||(h=x+(v-x)*(d+1)/(p.minorgridcount+1)*(p.arraydtick/g))<y[0]||h>y[y.length-1]||w.push(A(H(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&u.push(A(F(0),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&u.push(A(F(y.length-1),{color:p.endlinecolor,width:p.endlinewidth}))}else{for(o=5e-15,n=(r=[Math.floor((y[y.length-1]-p.tick0)/p.dtick*(1+o)),Math.ceil((y[0]-p.tick0)/p.dtick/(1+o))].sort(function(U,B){return U-B}))[0],a=r[1],i=n;i<=a;i++)m.push(A(H(c=p.tick0+p.dtick*i),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n-1;i<a+1;i++)for(c=p.tick0+p.dtick*i,d=0;d<p.minorgridcount;d++)(h=c+p.dtick*(d+1)/(p.minorgridcount+1))<y[0]||h>y[y.length-1]||w.push(A(H(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&u.push(A(H(y[0]),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&u.push(A(H(y[y.length-1]),{color:p.endlinecolor,width:p.endlinewidth}))}}},83311:function(Q,z,e){"use strict";var k=e(89298),A=e(1426).extendFlat;Q.exports=function(l,T){var b,d,s,t=T._labels=[],o=T._gridlines;for(b=0;b<o.length;b++)s=o[b],-1!==["start","both"].indexOf(T.showticklabels)&&(d=k.tickText(T,s.value),A(d,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:0===b,isLast:b===o.length-1}),t.push(d)),-1!==["end","both"].indexOf(T.showticklabels)&&(d=k.tickText(T,s.value),A(d,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:0===b,isLast:b===o.length-1}),t.push(d))}},42048:function(Q){"use strict";Q.exports=function(z,e,k,A){var l=z[0]-e[0],T=z[1]-e[1],b=k[0]-e[0],d=k[1]-e[1],s=Math.pow(l*l+T*T,.25),t=Math.pow(b*b+d*d,.25),o=(t*t*l-s*s*b)*A,r=(t*t*T-s*s*d)*A,n=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(n&&o/n),e[1]+(n&&r/n)],[e[0]-(a&&o/a),e[1]-(a&&r/a)]]}},53824:function(Q,z,e){"use strict";var k=e(71828).isArrayOrTypedArray;Q.exports=function(A,l,T){var b,d,s,t,o,r,n=[],a=k(A)?A.length:A,i=k(l)?l.length:l,c=k(A)?A:null,h=k(l)?l:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(i-1));var f=1/0,x=-1/0;for(d=0;d<i;d++)for(n[d]=[],o=h?(h[d]-h[0])*t:d/(i-1),b=0;b<a;b++)r=(c?(c[b]-c[0])*s:b/(a-1))-o*T,f=Math.min(r,f),x=Math.max(r,x),n[d][b]=r;var v=1/(x-f),g=-f*v;for(d=0;d<i;d++)for(b=0;b<a;b++)n[d][b]=v*n[d][b]+g;return n}},45664:function(Q,z,e){"use strict";var k=e(42048),A=e(71828).ensureArray;function l(T,b,d){return[(2*(-.5*d[0]+1.5*b[0])+T[0])/3,(2*(-.5*d[1]+1.5*b[1])+T[1])/3]}Q.exports=function(T,b,d,s,t,o){var r,n,a,i,c,h,f,x,v,g,y=d[0].length,p=d.length,m=t?3*y-2:y,w=o?3*p-2:p;for(T=A(T,w),b=A(b,w),a=0;a<w;a++)T[a]=A(T[a],m),b[a]=A(b[a],m);for(n=0,i=0;n<p;n++,i+=o?3:1)for(c=T[i],h=b[i],f=d[n],x=s[n],r=0,a=0;r<y;r++,a+=t?3:1)c[a]=f[r],h[a]=x[r];if(t)for(n=0,i=0;n<p;n++,i+=o?3:1){for(r=1,a=3;r<y-1;r++,a+=3)v=k([d[n][r-1],s[n][r-1]],[d[n][r],s[n][r]],[d[n][r+1],s[n][r+1]],t),T[i][a-1]=v[0][0],b[i][a-1]=v[0][1],T[i][a+1]=v[1][0],b[i][a+1]=v[1][1];g=l([T[i][0],b[i][0]],[T[i][2],b[i][2]],[T[i][3],b[i][3]]),T[i][1]=g[0],b[i][1]=g[1],g=l([T[i][m-1],b[i][m-1]],[T[i][m-3],b[i][m-3]],[T[i][m-4],b[i][m-4]]),T[i][m-2]=g[0],b[i][m-2]=g[1]}if(o)for(a=0;a<m;a++){for(i=3;i<w-3;i+=3)v=k([T[i-3][a],b[i-3][a]],[T[i][a],b[i][a]],[T[i+3][a],b[i+3][a]],o),T[i-1][a]=v[0][0],b[i-1][a]=v[0][1],T[i+1][a]=v[1][0],b[i+1][a]=v[1][1];g=l([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=g[0],b[1][a]=g[1],g=l([T[w-1][a],b[w-1][a]],[T[w-3][a],b[w-3][a]],[T[w-4][a],b[w-4][a]]),T[w-2][a]=g[0],b[w-2][a]=g[1]}if(t&&o)for(i=1;i<w;i+=(i+1)%3==0?2:1){for(a=3;a<m-3;a+=3)v=k([T[i][a-3],b[i][a-3]],[T[i][a],b[i][a]],[T[i][a+3],b[i][a+3]],t),T[i][a-1]=.5*(T[i][a-1]+v[0][0]),b[i][a-1]=.5*(b[i][a-1]+v[0][1]),T[i][a+1]=.5*(T[i][a+1]+v[1][0]),b[i][a+1]=.5*(b[i][a+1]+v[1][1]);g=l([T[i][0],b[i][0]],[T[i][2],b[i][2]],[T[i][3],b[i][3]]),T[i][1]=.5*(T[i][1]+g[0]),b[i][1]=.5*(b[i][1]+g[1]),g=l([T[i][m-1],b[i][m-1]],[T[i][m-3],b[i][m-3]],[T[i][m-4],b[i][m-4]]),T[i][m-2]=.5*(T[i][m-2]+g[0]),b[i][m-2]=.5*(b[i][m-2]+g[1])}return[T,b]}},35509:function(Q){"use strict";Q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(Q){"use strict";Q.exports=function(z,e,k){return e&&k?function(A,l,T,b,d){var s,n,a;A||(A=[]),l*=3,T*=3;var i=b*b,c=1-b,h=c*c,f=c*b*2,x=-3*h,v=3*(h-f),g=3*(f-i),y=3*i,p=d*d,m=p*d,w=1-d,u=w*w,S=u*w;for(a=0;a<z.length;a++)s=x*(n=z[a])[T][l]+v*n[T][l+1]+g*n[T][l+2]+y*n[T][l+3],A[a]=S*s+3*(u*d*(x*n[T+1][l]+v*n[T+1][l+1]+g*n[T+1][l+2]+y*n[T+1][l+3])+w*p*(x*n[T+2][l]+v*n[T+2][l+1]+g*n[T+2][l+2]+y*n[T+2][l+3]))+m*(x*n[T+3][l]+v*n[T+3][l+1]+g*n[T+3][l+2]+y*n[T+3][l+3]);return A}:e?function(A,l,T,b,d){var s,o,r;A||(A=[]),l*=3;var n=b*b,a=1-b,i=a*a,c=a*b*2,h=-3*i,f=3*(i-c),x=3*(c-n),v=3*n,g=1-d;for(o=0;o<z.length;o++)s=h*(r=z[o])[T][l]+f*r[T][l+1]+x*r[T][l+2]+v*r[T][l+3],A[o]=g*s+d*(h*r[T+1][l]+f*r[T+1][l+1]+x*r[T+1][l+2]+v*r[T+1][l+3]);return A}:k?function(A,l,T,b,d){var s,n,a;A||(A=[]),T*=3;var i=d*d,c=i*d,h=1-d,f=h*h,x=f*h;for(n=0;n<z.length;n++)s=(a=z[n])[T][l+1]-a[T][l],A[n]=x*s+3*(f*d*(a[T+1][l+1]-a[T+1][l])+h*i*(a[T+2][l+1]-a[T+2][l]))+c*(a[T+3][l+1]-a[T+3][l]);return A}:function(A,l,T,b,d){var s,o,r;A||(A=[]);var n=1-d;for(o=0;o<z.length;o++)s=(r=z[o])[T][l+1]-r[T][l],A[o]=n*s+d*(r[T+1][l+1]-r[T+1][l]);return A}}},73057:function(Q){"use strict";Q.exports=function(z,e,k){return e&&k?function(A,l,T,b,d){var s,n,a;A||(A=[]),l*=3,T*=3;var i=b*b,c=i*b,h=1-b,f=h*h,x=f*h,v=d*d,g=1-d,y=g*g,p=g*d*2,m=-3*y,w=3*(y-p),u=3*(p-v),S=3*v;for(a=0;a<z.length;a++)s=m*(n=z[a])[T][l]+w*n[T+1][l]+u*n[T+2][l]+S*n[T+3][l],A[a]=x*s+3*(f*b*(m*n[T][l+1]+w*n[T+1][l+1]+u*n[T+2][l+1]+S*n[T+3][l+1])+h*i*(m*n[T][l+2]+w*n[T+1][l+2]+u*n[T+2][l+2]+S*n[T+3][l+2]))+c*(m*n[T][l+3]+w*n[T+1][l+3]+u*n[T+2][l+3]+S*n[T+3][l+3]);return A}:e?function(A,l,T,b,d){var s,n,a;A||(A=[]),l*=3;var i=d*d,c=i*d,h=1-d,f=h*h,x=f*h;for(n=0;n<z.length;n++)s=(a=z[n])[T+1][l]-a[T][l],A[n]=x*s+3*(f*d*(a[T+1][l+1]-a[T][l+1])+h*i*(a[T+1][l+2]-a[T][l+2]))+c*(a[T+1][l+3]-a[T][l+3]);return A}:k?function(A,l,T,b,d){var s,o,r;A||(A=[]),T*=3;var n=1-b,a=d*d,i=1-d,c=i*i,h=i*d*2,f=-3*c,x=3*(c-h),v=3*(h-a),g=3*a;for(o=0;o<z.length;o++)s=f*(r=z[o])[T][l]+x*r[T+1][l]+v*r[T+2][l]+g*r[T+3][l],A[o]=n*s+b*(f*r[T][l+1]+x*r[T+1][l+1]+v*r[T+2][l+1]+g*r[T+3][l+1]);return A}:function(A,l,T,b,d){var s,o,r;A||(A=[]);var n=1-b;for(o=0;o<z.length;o++)s=(r=z[o])[T+1][l]-r[T][l],A[o]=n*s+b*(r[T+1][l+1]-r[T][l+1]);return A}}},20349:function(Q){"use strict";Q.exports=function(z,e,k,A,l){var T=e-2,b=k-2;return A&&l?function(d,s,t){var o,i,c;d||(d=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3,f*=3;var g=x*x,y=g*x,p=1-x,m=p*p,w=m*p,u=v*v,S=u*v,_=1-v,E=_*_,L=E*_;for(c=0;c<z.length;c++)o=w*(i=z[c])[f][h]+3*(m*x*i[f][h+1]+p*g*i[f][h+2])+y*i[f][h+3],d[c]=L*o+3*(E*v*(w*i[f+1][h]+3*(m*x*i[f+1][h+1]+p*g*i[f+1][h+2])+y*i[f+1][h+3])+_*u*(w*i[f+2][h]+3*(m*x*i[f+2][h+1]+p*g*i[f+2][h+2])+y*i[f+2][h+3]))+S*(w*i[f+3][h]+3*(m*x*i[f+3][h+1]+p*g*i[f+3][h+2])+y*i[f+3][h+3]);return d}:A?function(d,s,t){d||(d=[]);var o,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3;var g=x*x,y=g*x,p=1-x,m=p*p,w=m*p,u=1-v;for(i=0;i<z.length;i++)o=u*(c=z[i])[f][h]+v*c[f+1][h],d[i]=w*o+3*(m*x*(u*c[f][h+1]+v*c[f+1][h+1])+p*g*(u*c[f][h+2]+v*c[f+1][h+1]))+y*(u*c[f][h+3]+v*c[f+1][h+1]);return d}:l?function(d,s,t){d||(d=[]);var o,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));f*=3;var g=v*v,y=g*v,p=1-v,m=p*p,w=m*p,u=1-x;for(i=0;i<z.length;i++)o=u*(c=z[i])[f][h]+x*c[f][h+1],d[i]=w*o+3*(m*v*(u*c[f+1][h]+x*c[f+1][h+1])+p*g*(u*c[f+2][h]+x*c[f+2][h+1]))+y*(u*c[f+3][h]+x*c[f+3][h+1]);return d}:function(d,s,t){d||(d=[]);var o,n,a,i=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),h=Math.max(0,Math.min(1,s-i)),f=Math.max(0,Math.min(1,t-c)),x=1-f,v=1-h;for(n=0;n<z.length;n++)o=v*(a=z[n])[c][i]+h*a[c][i+1],d[n]=x*o+f*(v*a[c+1][i]+h*a[c+1][i+1]);return d}}},92087:function(Q,z,e){"use strict";var k=e(71828),A=e(19237),l=e(13145),T=e(99798),b=e(22399);Q.exports=function(d,s,t,o){function r(a,i){return k.coerce(d,s,T,a,i)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",b.defaultLine);k.coerceFont(r,"font"),r("carpet"),l(d,s,o,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),A(d,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function(Q,z,e){"use strict";Q.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(Q){"use strict";Q.exports=function(z,e){for(var k,A=z._fullData.length,l=0;l<A;l++){var T=z._fullData[l];if(T.index!==e.index&&"carpet"===T.type&&(k||(k=T),T.carpet===e.carpet))return T}return k}},67961:function(Q){"use strict";Q.exports=function(z,e,k){if(0===z.length)return"";var A,l=[],T=k?3:1;for(A=0;A<z.length;A+=T)l.push(z[A]+","+e[A]),k&&A<z.length-T&&(l.push("C"),l.push([z[A+1]+","+e[A+1],z[A+2]+","+e[A+2]+" "].join(" ")));return l.join(k?"":"L")}},27669:function(Q,z,e){"use strict";var k=e(71828).isArrayOrTypedArray;Q.exports=function(A,l,T){var b;for(k(A)?A.length>l.length&&(A=A.slice(0,l.length)):A=[],b=0;b<l.length;b++)A[b]=T(l[b]);return A}},11651:function(Q){"use strict";Q.exports=function(z,e,k,A,l,T){var b=l[0]*z.dpdx(e),d=l[1]*z.dpdy(k),s=1,t=1;if(T){var o=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]);t=Math.max(0,(l[0]*T[0]+l[1]*T[1])/o/r)}var a=180*Math.atan2(d,b)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:z.c2p(A,e,k),offsetMultplier:t}}},89740:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(27669),T=e(67961),b=e(11651),d=e(63893),s=e(71828),t=s.strRotate,o=s.strTranslate,r=e(18783);function n(f,x,v,g,y,p,m){var w="const-"+y+"-lines",u=v.selectAll("."+w).data(p);u.enter().append("path").classed(w,!0).style("vector-effect",m?"none":"non-scaling-stroke"),u.each(function(S){var _=S,L=_.y,C=l([],_.x,f.c2p),P=l([],L,x.c2p),I="M"+T(C,P,_.smoothing);k.select(this).attr("d",I).style("stroke-width",_.width).style("stroke",_.color).style("stroke-dasharray",A.dashStyle(_.dash,_.width)).style("fill","none")}),u.exit().remove()}function a(f,x,v,g,y,p,m,w){var u=p.selectAll("text."+w).data(m);u.enter().append("text").classed(w,!0);var S=0,_={};return u.each(function(E,L){var C;if("auto"===E.axis.tickangle)C=b(g,x,v,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=b(g,x,v,E.xy,[Math.cos(P),Math.sin(P)])}L||(_={angle:C.angle,flip:C.flip});var I=(E.endAnchor?-1:1)*C.flip,j=k.select(this).attr({"text-anchor":I>0?"start":"end","data-notex":1}).call(A.font,E.font).text(E.text).call(d.convertToTspans,f),R=A.bBox(this);j.attr("transform",o(C.p[0],C.p[1])+t(C.angle)+o(E.axis.labelpadding*I,.3*R.height)),S=Math.max(S,R.width+E.axis.labelpadding)}),u.exit().remove(),_.maxExtent=S,_}Q.exports=function(f,x,v,g){var y=f._context.staticPlot,p=x.xaxis,m=x.yaxis,w=f._fullLayout._clips;s.makeTraceGroups(g,v,"trace").each(function(u){var S=k.select(this),_=u[0],E=_.trace,L=E.aaxis,C=E.baxis,P=s.ensureSingle(S,"g","minorlayer"),I=s.ensureSingle(S,"g","majorlayer"),j=s.ensureSingle(S,"g","boundarylayer"),R=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(p,m,I,0,"a",L._gridlines,!0),n(p,m,I,0,"b",C._gridlines,!0),n(p,m,P,0,"a",L._minorgridlines,!0),n(p,m,P,0,"b",C._minorgridlines,!0),n(p,m,j,0,"a-boundary",L._boundarylines,y),n(p,m,j,0,"b-boundary",C._boundarylines,y);var U,B,N,Z,V,W,X,K,ne,re,ae,le,pe,xe,ye,H=a(f,p,m,E,0,R,L._labels,"a-label"),F=a(f,p,m,E,0,R,C._labels,"b-label");U=f,B=R,N=E,Z=p,V=m,W=H,X=F,le=s.aggNums(Math.min,null,N.a),pe=s.aggNums(Math.max,null,N.a),xe=s.aggNums(Math.min,null,N.b),ye=s.aggNums(Math.max,null,N.b),re=N.ab2xy(K=.5*(le+pe),ne=xe,!0),ae=N.dxyda_rough(K,ne),void 0===W.angle&&s.extendFlat(W,b(N,Z,V,re,N.dxydb_rough(K,ne))),h(U,B,N,0,re,ae,N.aaxis,Z,V,W,"a-title"),re=N.ab2xy(K=le,ne=.5*(xe+ye),!0),ae=N.dxydb_rough(K,ne),void 0===X.angle&&s.extendFlat(X,b(N,Z,V,re,N.dxyda_rough(K,ne))),h(U,B,N,0,re,ae,N.baxis,Z,V,X,"b-title"),function(U,B,N,J,Z){var V,W,X,K,ne=N.select("#"+U._clipPathId);ne.size()||(ne=N.append("clipPath").classed("carpetclip",!0));var re=s.ensureSingle(ne,"path","carpetboundary"),ae=B.clipsegments,le=[];for(K=0;K<ae.length;K++)W=l([],(V=ae[K]).x,J.c2p),X=l([],V.y,Z.c2p),le.push(T(W,X,V.bicubic));var pe="M"+le.join("L")+"Z";ne.attr("id",U._clipPathId),re.attr("d",pe)}(E,_,w,p,m)})};var i=r.LINE_SPACING,c=(1-r.MID_SHIFT)/i+1;function h(f,x,v,g,y,p,m,w,u,S,_){var E=[];m.title.text&&E.push(m.title.text);var L=x.selectAll("text."+_).data(E),C=S.maxExtent;L.enter().append("text").classed(_,!0),L.each(function(){var P=b(v,w,u,y,p);-1===["start","both"].indexOf(m.showticklabels)&&(C=0);var I=m.title.font.size;C+=I+m.title.offset;var j=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,R=j>90&&j<270,H=k.select(this);H.text(m.title.text).call(d.convertToTspans,f),R&&(C=(-d.lineCount(H)+c)*i*I-C),H.attr("transform",o(P.p[0],P.p[1])+t(P.angle)+o(0,C)).attr("text-anchor","middle").call(A.font,m.title.font)}),L.exit().remove()}},11435:function(Q,z,e){"use strict";var k=e(35509),A=e(65888).findBin,l=e(45664),T=e(20349),b=e(54495),d=e(73057);Q.exports=function(s){var t=s._a,o=s._b,r=t.length,n=o.length,a=s.aaxis,i=s.baxis,c=t[0],h=t[r-1],f=o[0],x=o[n-1],v=t[t.length-1]-t[0],g=o[o.length-1]-o[0],y=v*k.RELATIVE_CULL_TOLERANCE,p=g*k.RELATIVE_CULL_TOLERANCE;c-=y,h+=y,f-=p,x+=p,s.isVisible=function(m,w){return m>c&&m<h&&w>f&&w<x},s.isOccluded=function(m,w){return m<c||m>h||w<f||w>x},s.setScale=function(){var u=l(s._xctrl,s._yctrl,s._x,s._y,a.smoothing,i.smoothing);s._xctrl=u[0],s._yctrl=u[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,i.smoothing),s.dxydi=b([s._xctrl,s._yctrl],a.smoothing,i.smoothing),s.dxydj=d([s._xctrl,s._yctrl],a.smoothing,i.smoothing)},s.i2a=function(m){var w=Math.max(0,Math.floor(m[0]),r-2),u=m[0]-w;return(1-u)*t[w]+u*t[w+1]},s.j2b=function(m){var w=Math.max(0,Math.floor(m[1]),r-2),u=m[1]-w;return(1-u)*o[w]+u*o[w+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var w=Math.max(0,Math.min(A(m,t),r-2)),u=t[w];return Math.max(0,Math.min(r-1,w+(m-u)/(t[w+1]-u)))},s.b2j=function(m){var w=Math.max(0,Math.min(A(m,o),n-2)),u=o[w];return Math.max(0,Math.min(n-1,w+(m-u)/(o[w+1]-u)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,w){return s.evalxy([],m,w)},s.ab2xy=function(m,w,u){if(!u&&(m<t[0]||m>t[r-1]|w<o[0]||w>o[n-1]))return[!1,!1];var S=s.a2i(m),_=s.b2j(w),E=s.evalxy([],S,_);if(u){var L,C,P,I,j=0,R=0,H=[];m<t[0]?(L=0,C=0,j=(m-t[0])/(t[1]-t[0])):m>t[r-1]?(L=r-2,C=1,j=(m-t[r-1])/(t[r-1]-t[r-2])):C=S-(L=Math.max(0,Math.min(r-2,Math.floor(S)))),w<o[0]?(P=0,I=0,R=(w-o[0])/(o[1]-o[0])):w>o[n-1]?(P=n-2,I=1,R=(w-o[n-1])/(o[n-1]-o[n-2])):I=_-(P=Math.max(0,Math.min(n-2,Math.floor(_)))),j&&(s.dxydi(H,L,P,C,I),E[0]+=H[0]*j,E[1]+=H[1]*j),R&&(s.dxydj(H,L,P,C,I),E[0]+=H[0]*R,E[1]+=H[1]*R)}return E},s.c2p=function(m,w,u){return[w.c2p(m[0]),u.c2p(m[1])]},s.p2x=function(m,w,u){return[w.p2c(m[0]),u.p2c(m[1])]},s.dadi=function(m){var w=Math.max(0,Math.min(t.length-2,m));return t[w+1]-t[w]},s.dbdj=function(m){var w=Math.max(0,Math.min(o.length-2,m));return o[w+1]-o[w]},s.dxyda=function(m,w,u,S){var _=s.dxydi(null,m,w,u,S),E=s.dadi(m,u);return[_[0]/E,_[1]/E]},s.dxydb=function(m,w,u,S){var _=s.dxydj(null,m,w,u,S),E=s.dbdj(w,S);return[_[0]/E,_[1]/E]},s.dxyda_rough=function(m,w,u){var S=v*(u||.1),_=s.ab2xy(m+S,w,!0),E=s.ab2xy(m-S,w,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dxydb_rough=function(m,w,u){var S=g*(u||.1),_=s.ab2xy(m,w+S,!0),E=s.ab2xy(m,w-S,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l,T){var b,d,s,i,c,h,f,x,v,g,y,p,m,U,B,N,J,Z,t=[],o=[],r=A[0].length,n=A.length,u=0;for(b=0;b<r;b++)for(d=0;d<n;d++)void 0===A[d][b]&&(t.push(b),o.push(d),A[d][b]=(B=d,N=void 0,J=void 0,Z=void 0,J=0,Z=0,(U=b)>0&&void 0!==(N=A[B][U-1])&&(Z++,J+=N),U<r-1&&void 0!==(N=A[B][U+1])&&(Z++,J+=N),B>0&&void 0!==(N=A[B-1][U])&&(Z++,J+=N),B<n-1&&void 0!==(N=A[B+1][U])&&(Z++,J+=N),J/Math.max(1,Z))),u=Math.max(u,Math.abs(A[d][b]));if(!t.length)return A;var S=0,_=0,E=t.length;do{for(S=0,s=0;s<E;s++){d=o[s];var C,P,I,j,R,H=0,F=0;0===(b=t[s])?(P=l[j=Math.min(r-1,2)],F+=(C=A[d][1])+(C-A[d][j])*(l[0]-(I=l[1]))/(I-P),H++):b===r-1&&(P=l[j=Math.max(0,r-3)],F+=(C=A[d][r-2])+(C-A[d][j])*(l[r-1]-(I=l[r-2]))/(I-P),H++),(0===b||b===r-1)&&d>0&&d<n-1&&(F+=((c=T[d]-T[d-1])*A[d+1][b]+(i=T[d+1]-T[d])*A[d-1][b])/(c+i),H++),0===d?(P=T[R=Math.min(n-1,2)],F+=(C=A[1][b])+(C-A[R][b])*(T[0]-(I=T[1]))/(I-P),H++):d===n-1&&(P=T[R=Math.max(0,n-3)],F+=(C=A[n-2][b])+(C-A[R][b])*(T[n-1]-(I=T[n-2]))/(I-P),H++),(0===d||d===n-1)&&b>0&&b<r-1&&(F+=((c=l[b]-l[b-1])*A[d][b+1]+(i=l[b+1]-l[b])*A[d][b-1])/(c+i),H++),H?F/=H:(y=(x=T[d+1]-T[d])*(v=T[d]-T[d-1])*(x+v),F=((g=(h=l[b+1]-l[b])*(f=l[b]-l[b-1])*(h+f))*(v*A[d+1][b]+x*A[d-1][b])+y*(f*A[d][b+1]+h*A[d][b-1]))/(y*(f+h)+g*(v+x))),S+=(m=(p=F-A[d][b])/u)*m,A[d][b]+=p*(1+(H?0:.85))}S=Math.sqrt(S)}while(_++<100&&S>1e-5);return k.log("Smoother converged to",S,"after",_,"iterations"),A}},19237:function(Q,z,e){"use strict";var k=e(71828).isArray1D;Q.exports=function(A,l,T){var b=T("x"),d=b&&b.length,s=T("y"),t=s&&s.length;if(!d&&!t)return!1;if(l._cheater=!b,d&&!k(b)||t&&!k(s))l._length=null;else{var o=d?b.length:1/0;t&&(o=Math.min(o,s.length)),l.a&&l.a.length&&(o=Math.min(o,l.a.length)),l.b&&l.b.length&&(o=Math.min(o,l.b.length)),l._length=o}return!0}},69568:function(Q,z,e){"use strict";var k=e(5386).f,A=e(19316),l=e(50693),T=e(9012),b=e(22399).defaultLine,d=e(1426).extendFlat,s=A.marker.line;Q.exports=d({locations:{valType:"data_array",editType:"calc"},locationmode:A.locationmode,z:{valType:"data_array",editType:"calc"},geojson:d({},A.geojson,{}),featureidkey:A.featureidkey,text:d({},A.text,{}),hovertext:d({},A.hovertext,{}),marker:{line:{color:d({},s.color,{dflt:b}),width:d({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:A.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:A.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:d({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:k(),showlegend:d({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(Q,z,e){"use strict";var k=e(92770),A=e(50606).BADNUM,l=e(78803),T=e(75225),b=e(66279);function d(s){return s&&"string"==typeof s}Q.exports=function(s,t){var o,r=t._length,n=new Array(r);o=t.geojson?function(f){return d(f)||k(f)}:d;for(var a=0;a<r;a++){var i=n[a]={},c=t.locations[a],h=t.z[a];o(c)&&k(h)?(i.loc=c,i.z=h):(i.loc=null,i.z=A),i.index=a}return T(n,t),l(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(n,t),n}},61869:function(Q,z,e){"use strict";var k=e(71828),A=e(1586),l=e(69568);Q.exports=function(T,b,d,s){function t(i,c){return k.coerce(T,b,l,i,c)}var o=t("locations"),r=t("z");if(o&&o.length&&k.isArrayOrTypedArray(r)&&r.length){b._length=Math.min(o.length,r.length);var n,a=t("geojson");("string"==typeof a&&""!==a||k.isPlainObject(a))&&(n="geojson-id"),"geojson-id"===t("locationmode",n)&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),A(T,b,s,t,{prefix:"",cLetter:"z"}),k.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},92069:function(Q){"use strict";Q.exports=function(z,e,k,A,l){z.location=e.location,z.z=e.z;var T=A[l];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z.ct=T.ct,z}},42300:function(Q,z,e){"use strict";var k=e(89298),A=e(69568),l=e(71828).fillText;Q.exports=function(T,b,d){var s,t,o,r,n=T.cd,a=n[0].trace,i=T.subplot,c=[b,d],h=[b+360,d];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(o=0;o<s._polygons.length;o++)s._polygons[o].contains(c)&&(r=!r),s._polygons[o].contains(h)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=k.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(f,x,v){if(!x.hovertemplate){var g=v.hi||x.hoverinfo,y=String(v.loc),p="all"===g?A.hoverinfo.flags:g.split("+"),m=-1!==p.indexOf("name"),w=-1!==p.indexOf("location"),u=-1!==p.indexOf("z"),S=-1!==p.indexOf("text"),_=[];!m&&w?f.nameOverride=y:(m&&(f.nameOverride=x.name),w&&_.push(y)),u&&_.push(f.zLabel),S&&l(v,x,_),f.extraText=_.join("<br>")}}(T,a,s),[T]}},51319:function(Q,z,e){"use strict";Q.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(41327),T=e(90973).getTopojsonFeatures,b=e(71739).findExtremes,d=e(99636).style;Q.exports={calcGeoJSON:function(s,t){for(var o=s[0].trace,r=t[o.geo],n=r._subplot,a=o.locationmode,i=o._length,c="geojson-id"===a?l.extractTraceFeature(s):T(o,n.topojson),h=[],f=[],x=0;x<i;x++){var v=s[x],g="geojson-id"===a?v.fOut:l.locationToFeature(a,v.loc,c);if(g){v.geojson=g,v.ct=g.properties.ct,v._polygons=l.feature2polygons(g);var y=l.computeBbox(g);h.push(y[0],y[2]),f.push(y[1],y[3])}else v.geojson=null}if("geojson"===r.fitbounds&&"geojson-id"===a){var p=l.computeBbox(l.getTraceGeojson(o));h=[p[0],p[2]],f=[p[1],p[3]]}var m={padded:!0};o._extremes.lon=b(r.lonaxis._ax,h,m),o._extremes.lat=b(r.lataxis._ax,f,m)},plot:function(s,t,o){var r=t.layers.backplot.select(".choroplethlayer");A.makeTraceGroups(r,o,"trace choropleth").each(function(n){var a=k.select(this).selectAll("path.choroplethlocation").data(A.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),d(s,n)})}}},81253:function(Q){"use strict";Q.exports=function(z,e){var k,A,l,T,b,d=z.cd,s=z.xaxis,t=z.yaxis,o=[];if(!1===e)for(k=0;k<d.length;k++)d[k].selected=0;else for(k=0;k<d.length;k++)(l=(A=d[k]).ct)&&(T=s.c2p(l),b=t.c2p(l),e.contains([T,b],null,k,z)?(o.push({pointNumber:k,lon:l[0],lat:l[1]}),A.selected=1):A.selected=0);return o}},99636:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(91424),T=e(21081);function b(d,s){var t=s[0].trace,o=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);o.each(function(i){k.select(this).attr("fill",a(i.z)).call(A.stroke,i.mlc||n.color).call(l.dashLine,"",i.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(o,t)}Q.exports={style:function(d,s){s&&b(0,s)},styleOnSelect:function(d,s){var o=s[0].trace;o.selectedpoints?l.selectedPointStyle(s[0].node3.selectAll(".choroplethlocation"),o):b(0,s)}}},64496:function(Q,z,e){"use strict";var k=e(69568),A=e(50693),l=e(5386).f,T=e(9012),b=e(1426).extendFlat;Q.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},k.featureidkey,{}),below:{valType:"string",editType:"plot"},text:k.text,hovertext:k.hovertext,marker:{line:{color:b({},k.marker.line.color,{editType:"plot"}),width:b({},k.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},k.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},k.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},k.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:k.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(21081),T=e(91424),b=e(18214).makeBlank,d=e(41327);function s(t){var o,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),i=0;i<t.length;i++){var c=t[i];c.fOut&&(c.fOut.properties.mo2=a.selectedOpacityFn(c))}o={type:"identity",property:"mo2"}}else o=A.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return A.extendFlat(n.fill.paint,{"fill-opacity":o}),A.extendFlat(n.line.paint,{"line-opacity":o}),n}Q.exports={convert:function(t){var o=t[0].trace,r=!0===o.visible&&0!==o._length,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},i=o._opts={fill:n,line:a,geojson:b()};if(!r)return i;var c=d.extractTraceFeature(t);if(!c)return i;var h,f,x,v=l.makeColorScaleFuncFromTrace(o),g=o.marker,y=g.line||{};A.isArrayOrTypedArray(g.opacity)&&(h=function(_){var E=_.mo;return k(E)?+A.constrain(E,0,1):0}),A.isArrayOrTypedArray(y.color)&&(f=function(_){return _.mlc}),A.isArrayOrTypedArray(y.width)&&(x=function(_){return _.mlw});for(var p=0;p<t.length;p++){var m=t[p],w=m.fOut;if(w){var u=w.properties;u.fc=v(m.z),h&&(u.mo=h(m)),f&&(u.mlc=f(m)),x&&(u.mlw=x(m)),m.ct=u.ct,m._polygons=d.feature2polygons(w)}}var S=h?{type:"identity",property:"mo"}:g.opacity;return A.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),A.extendFlat(a.paint,{"line-color":f?{type:"identity",property:"mlc"}:y.color,"line-width":x?{type:"identity",property:"mlw"}:y.width,"line-opacity":S}),n.layout.visibility="visible",a.layout.visibility="visible",i.geojson={type:"FeatureCollection",features:c},s(t),i},convertOnSelect:s}},22654:function(Q,z,e){"use strict";var k=e(71828),A=e(1586),l=e(64496);Q.exports=function(T,b,d,s){function t(a,i){return k.coerce(T,b,l,a,i)}var o=t("locations"),r=t("z"),n=t("geojson");k.isArrayOrTypedArray(o)&&o.length&&k.isArrayOrTypedArray(r)&&r.length&&("string"==typeof n&&""!==n||k.isPlainObject(n))?(t("featureidkey"),b._length=Math.min(o.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),A(T,b,s,t,{prefix:"",cLetter:"z"}),k.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},57516:function(Q,z,e){"use strict";Q.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(k,A){A&&A[0].trace._glTrace.updateOnSelect(A)},getBelow:function(k,A){for(var l=A.getMapLayers(),T=l.length-2;T>=0;T--){var b=l[T].id;if("string"==typeof b&&0===b.indexOf("water"))for(var d=T+1;d<l.length;d++)if("string"==typeof(b=l[d].id)&&-1===b.indexOf("plotly-"))return b}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(Q,z,e){"use strict";var k=e(82004).convert,A=e(82004).convertOnSelect,l=e(77734).traceLayerPrefix;function T(d,s){this.type="choroplethmapbox",this.subplot=d,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(d){this._update(k(d)),d[0].trace._glTrace=this},b.updateOnSelect=function(d){this._update(A(d))},b._update=function(d){var s=this.subplot,t=this.layerList,o=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(d.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(d,o),this.below=o);for(var r=0;r<t.length;r++){var n=t[r],i=n[1],c=d[n[0]];s.setOptions(i,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&s.setOptions(i,"setPaintProperty",c.paint)}},b._addLayers=function(d,s){for(var t=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var a=o[n],i=a[0],c=d[i];t.addLayer({type:i,id:a[1],source:r,layout:c.layout,paint:c.paint},s)}},b._removeLayers=function(){for(var d=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)d.removeLayer(s[t][1])},b.dispose=function(){var d=this.subplot.map;this._removeLayers(),d.removeSource(this.sourceId)},Q.exports=function(d,s){var t=s[0].trace,o=new T(d,t.uid),r=o.sourceId,n=k(s),a=o.below=d.belowLookup["trace-"+t.uid];return d.map.addSource(r,{type:"geojson",data:n.geojson}),o._addLayers(n,a),s[0].trace._glTrace=o,o}},12674:function(Q,z,e){"use strict";var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),b=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:A("u",1),vhoverformat:A("v",1),whoverformat:A("w",1),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,k("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,Q.exports=s},31371:function(Q,z,e){"use strict";var k=e(78803);Q.exports=function(A,l){for(var T=l.u,b=l.v,d=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,b.length,d.length),t=-1/0,o=1/0,r=0;r<s;r++){var n=T[r],a=b[r],i=d[r],c=Math.sqrt(n*n+a*a+i*i);t=Math.max(t,c),o=Math.min(o,c)}l._len=s,l._normMax=t,k(A,l,{vals:[o,t],containerStr:"",cLetter:"c"})}},5453:function(Q,z,e){"use strict";var k=e(9330).gl_cone3d,A=e(9330).gl_cone3d.createConeMesh,l=e(71828).simpleMap,T=e(81697).parseColorScale,b=e(21081).extractOpts,d=e(90060);function s(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var t=s.prototype;t.handlePick=function(i){if(i.object===this.mesh){var c=i.index=i.data.index,v=this.data.u[c],g=this.data.v[c],y=this.data.w[c];i.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c],v,g,y,Math.sqrt(v*v+g*g+y*y)];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&void 0!==p[c]?i.textLabel=p[c]:p&&(i.textLabel=p),!0}};var o={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,x={};function v(m,w){var u=h[w],S=f[o[w]];return l(m,function(_){return u.d2l(_)*S})}x.vectors=d(v(c.u,"xaxis"),v(c.v,"yaxis"),v(c.w,"zaxis"),c._len),x.positions=d(v(c.x,"xaxis"),v(c.y,"yaxis"),v(c.z,"zaxis"),c._len);var g=b(c);x.colormap=T(c),x.vertexIntensityBounds=[g.min/c._normMax,g.max/c._normMax],x.coneOffset=r[c.anchor],x.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var y=k(x),p=c.lightposition;return y.lightPosition=[p.x,p.y,p.z],y.ambient=c.lighting.ambient,y.diffuse=c.lighting.diffuse,y.specular=c.lighting.specular,y.roughness=c.lighting.roughness,y.fresnel=c.lighting.fresnel,y.opacity=c.opacity,c._pad=n[c.anchor]*y.vectorScale*y.coneScale*c._normMax,y}t.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),x=A(h,f),v=new s(i,c.uid);return v.mesh=x,v.data=c,x._trace=v,i.glplot.add(x),v}},91750:function(Q,z,e){"use strict";var k=e(71828),A=e(1586),l=e(12674);Q.exports=function(T,b,d,s){function t(h,f){return k.coerce(T,b,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),c=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),A(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},98128:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(k,A){return k.norm=A.traceCoordinate[6],k},meta:{}}},70600:function(Q,z,e){"use strict";var k=e(21606),A=e(82196),l=e(12663),T=l.axisHoverFormat,b=l.descriptionOnlyNumbers,d=e(50693),s=e(79952).P,t=e(41940),o=e(1426).extendFlat,r=e(74808),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,i=A.line;Q.exports=o({z:k.z,x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,text:k.text,hovertext:k.hovertext,transpose:k.transpose,xtype:k.xtype,ytype:k.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:k.hovertemplate,texttemplate:o({},k.texttemplate,{}),textfont:o({},k.textfont,{}),hoverongaps:k.hoverongaps,connectgaps:o({},k.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},i.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:o({},i.smoothing,{}),editType:"plot"}},d("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(Q,z,e){"use strict";var k=e(21081),A=e(90757),l=e(18670),T=e(53572);Q.exports=function(b,d){var s=A(b,d),t=s[0].z;l(d,t);var o,r=d.contours,n=k.extractOpts(d);if("heatmap"===r.coloring&&n.auto&&!1===d.autocontour){var a=r.start,i=T(r),c=r.size||1,h=Math.floor((i-a)/c)+1;isFinite(c)||(c=1,h=1);var f=a-c/2;o=[f,f+h*c]}else o=t;return k.calc(b,d,{vals:o,cLetter:"z"}),s}},20083:function(Q){"use strict";Q.exports=function(z,e){var k,A=z[0],l=A.z;switch(e.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(k=0;k<z.length;k++){var b=z[k];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var d=A.x.length,s=A.y.length,t=-1/0,o=1/0;for(k=0;k<s;k++)o=Math.min(o,l[k][0]),o=Math.min(o,l[k][d-1]),t=Math.max(t,l[k][0]),t=Math.max(t,l[k][d-1]);for(k=1;k<d-1;k++)o=Math.min(o,l[0][k]),o=Math.min(o,l[s-1][k]),t=Math.max(t,l[0][k]),t=Math.max(t,l[s-1][k]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(A.prefixBoundary=!0);break;case"<":(a<o||A.starts.length&&a===o)&&(A.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<o||r>t||A.starts.length&&n===o)&&(A.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<o&&n>t&&(A.prefixBoundary=!0)}}}},90654:function(Q,z,e){"use strict";var k=e(21081),A=e(86068),l=e(53572);Q.exports={min:"zmin",max:"zmax",calc:function(T,b,d){var s=b.contours,t=b.line,o=s.size||1,r=s.coloring,n=A(b,{isColorbar:!0});if("heatmap"===r){var a=k.extractOpts(b);d._fillgradient=a.reversescale?k.flipScale(a.colorscale):a.colorscale,d._zrange=[a.min,a.max]}else"fill"===r&&(d._fillcolor=n);d._line={color:"lines"===r?n:t.color,width:!1!==s.showlines?t.width:0,dash:t.dash},d._levels={start:s.start,end:l(s),size:o}}}},36914:function(Q){"use strict";Q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(Q,z,e){"use strict";var k=e(92770),A=e(14523),l=e(7901),T=l.addOpacity,b=l.opacity,d=e(74808),s=d.CONSTRAINT_REDUCTION,t=d.COMPARISON_OPS2;Q.exports=function(o,r,n,a,i,c){var h,f,x,y,p,m,v=r.contours,g=n("contours.operation");v._operation=s[g],y=n,-1===t.indexOf((p=v).operation)?(y("contours.value",[0,1]),Array.isArray(p.value)?p.value.length>2?p.value=p.value.slice(2):0===p.length?p.value=[0,1]:p.length<2?(m=parseFloat(p.value[0]),p.value=[m,m+1]):p.value=[parseFloat(p.value[0]),parseFloat(p.value[1])]:k(p.value)&&(m=parseFloat(p.value),p.value=[m,m+1])):(y("contours.value",0),k(p.value)||(p.value=Array.isArray(p.value)?parseFloat(p.value[0]):0)),"="===g?h=v.showlines=!0:(h=n("contours.showlines"),x=n("fillcolor",T((o.line||{}).color||i,.5))),h&&(f=n("line.color",x&&b(x)?T(r.fillcolor,1):i),n("line.width",2),n("line.dash")),n("line.smoothing"),A(n,a,f,c)}},64237:function(Q,z,e){"use strict";var k=e(74808),A=e(92770);function l(d,s){var t,o=Array.isArray(s);function r(n){return A(n)?+n:null}return-1!==k.COMPARISON_OPS2.indexOf(d)?t=r(o?s[0]:s):-1!==k.INTERVAL_OPS.indexOf(d)?t=o?[r(s[0]),r(s[1])]:[r(s),r(s)]:-1!==k.SET_OPS.indexOf(d)&&(t=o?s.map(r):[r(s)]),t}function T(d){return function(s){s=l(d,s);var t=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return{start:t,end:o,size:o-t}}}function b(d){return function(s){return{start:s=l(d,s),end:1/0,size:1/0}}}Q.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},67217:function(Q){"use strict";Q.exports=function(z,e,k,A){var l=A("contours.start"),T=A("contours.end"),b=!1===l||!1===T,d=k("contours.size");!(b?e.autocontour=!0:k("autocontour",!1))&&d||k("ncontours")}},84857:function(Q,z,e){"use strict";var k=e(71828);function A(l){return k.extendFlat({},l,{edgepaths:k.extendDeep([],l.edgepaths),paths:k.extendDeep([],l.paths),starts:k.extendDeep([],l.starts)})}Q.exports=function(l,T){var b,d,s,t=function(n){return n.reverse()},o=function(n){return n};switch(T){case"=":case"<":return l;case">":for(1!==l.length&&k.warn("Contour data invalid for the specified inequality operation."),d=l[0],b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=t(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=t(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=t(d.starts[b]);return l;case"][":var r=t;t=o,o=r;case"[]":for(2!==l.length&&k.warn("Contour data invalid for the specified inequality range operation."),d=A(l[0]),s=A(l[1]),b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=t(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=t(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=t(d.starts[b]);for(;s.edgepaths.length;)d.edgepaths.push(o(s.edgepaths.shift()));for(;s.paths.length;)d.paths.push(o(s.paths.shift()));for(;s.starts.length;)d.starts.push(o(s.starts.shift()));return[d]}}},13031:function(Q,z,e){"use strict";var k=e(71828),A=e(67684),l=e(73927),T=e(83179),b=e(67217),d=e(8724),s=e(58623),t=e(70600);Q.exports=function(o,r,n,a){function i(h,f){return k.coerce(o,r,t,h,f)}if(A(o,r,i,a)){l(o,r,a,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hoverongaps"),i("hovertemplate");var c="constraint"===i("contours.type");i("connectgaps",k.isArray1D(r.z)),c?T(o,r,i,a,n):(b(o,r,i,function(h){return k.coerce2(o,r,t,h)}),d(o,r,i,a)),r.contours&&"heatmap"===r.contours.coloring&&s(i,a)}else r.visible=!1}},87558:function(Q,z,e){"use strict";var k=e(71828),A=e(64237),l=e(53572);Q.exports=function(T,b,d){for(var s="constraint"===T.type?A[T._operation](T.value):T,t=s.size,o=[],r=l(s),n=d.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:d.a,y:d.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:d.x,y:d.y},i=s.start;i<r;i+=t)if(o.push(k.extendFlat({level:i,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},a)),o.length>1e3){k.warn("Too many contours, clipping at 1000",T);break}return o}},53572:function(Q){"use strict";Q.exports=function(z){return z.end+z.size/1e6}},81696:function(Q,z,e){"use strict";var k=e(71828),A=e(36914);function l(d,s,t,o){return Math.abs(d[0]-s[0])<t&&Math.abs(d[1]-s[1])<o}function T(d,s,t,o,r){var n,ne,ae,le,pe,a=s.join(","),i=d.crossings[a],c=(ae=s,le=0,pe=0,(ne=i)>20&&t?208===ne||1114===ne?le=0===ae[0]?1:-1:pe=0===ae[1]?1:-1:-1!==A.BOTTOMSTART.indexOf(ne)?pe=1:-1!==A.LEFTSTART.indexOf(ne)?le=1:-1!==A.TOPSTART.indexOf(ne)?pe=-1:le=-1,[le,pe]),h=[b(d,s,[-c[0],-c[1]])],f=d.z.length,x=d.z[0].length,v=s.slice(),g=c.slice();for(n=0;n<1e4;n++){if(i>20?d.crossings[a]=A.SADDLEREMAINDER[i=A.CHOOSESADDLE[i][(c[0]||c[1])<0?0:1]]:delete d.crossings[a],!(c=A.NEWDELTA[i])){k.log("Found bad marching index:",i,s,d.level);break}if(h.push(b(d,s,c)),s[0]+=c[0],s[1]+=c[1],a=s.join(","),l(h[h.length-1],h[h.length-2],o,r)&&h.pop(),s[0]===v[0]&&s[1]===v[1]&&c[0]===g[0]&&c[1]===g[1]||t&&(c[0]&&(s[0]<0||s[0]>x-2)||c[1]&&(s[1]<0||s[1]>f-2)))break;i=d.crossings[a]}1e4===n&&k.log("Infinite loop in contour?");var p,m,w,u,S,_,E,L,C,P,I,j,R,H,F,U=l(h[0],h[h.length-1],o,r),B=0,N=.2*d.smoothing,J=[],Z=0;for(n=1;n<h.length;n++)H=(j=h[n])[2]-(R=h[n-1])[2],F=j[3]-R[3],B+=E=Math.sqrt(H*H+F*F),J.push(E);var V=B/J.length*N;function W(ne){return h[ne%h.length]}for(n=h.length-2;n>=Z;n--)if((p=J[n])<V){for(w=0,m=n-1;m>=Z&&p+J[m]<V;m--)p+=J[m];if(U&&n===h.length-2)for(w=0;w<m&&p+J[w]<V;w++)p+=J[w];S=n-m+w+1,_=Math.floor((n+m+w+2)/2),u=U||n!==h.length-2?U||-1!==m?S%2?W(_):[(W(_)[0]+W(_+1)[0])/2,(W(_)[1]+W(_+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,n-m+1,u),n=m+1,w&&(Z=w),U&&(n===h.length-2?h[w]=h[h.length-1]:0===n&&(h[h.length-1]=h[0]))}for(h.splice(0,Z),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(U)h.pop(),d.paths.push(h);else{t||k.log("Unclosed interior contour?",d.level,v.join(","),h.join("L"));var X=!1;for(L=0;L<d.edgepaths.length;L++)if(P=d.edgepaths[L],!X&&l(P[0],h[h.length-1],o,r)){h.pop(),X=!0;var K=!1;for(C=0;C<d.edgepaths.length;C++)if(l((I=d.edgepaths[C])[I.length-1],h[0],o,r)){K=!0,h.shift(),d.edgepaths.splice(L,1),C===L?d.paths.push(h.concat(I)):(C>L&&C--,d.edgepaths[C]=I.concat(h,P));break}K||(d.edgepaths[L]=h.concat(P))}for(L=0;L<d.edgepaths.length&&!X;L++)l((P=d.edgepaths[L])[P.length-1],h[0],o,r)&&(h.shift(),d.edgepaths[L]=P.concat(h),X=!0);X||d.edgepaths.push(h)}}function b(d,s,t){var o=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=d.z[r][o],a=d.xaxis,i=d.yaxis;if(t[1]){var c=(d.level-n)/(d.z[r][o+1]-n),h=(1!==c?(1-c)*a.c2l(d.x[o]):0)+(0!==c?c*a.c2l(d.x[o+1]):0);return[a.c2p(a.l2c(h),!0),i.c2p(d.y[r],!0),o+c,r]}var f=(d.level-n)/(d.z[r+1][o]-n),x=(1!==f?(1-f)*i.c2l(d.y[r]):0)+(0!==f?f*i.c2l(d.y[r+1]):0);return[a.c2p(d.x[o],!0),i.c2p(i.l2c(x),!0),o,r+f]}Q.exports=function(d,s,t){var o,r,n,a;for(s=s||.01,t=t||.01,r=0;r<d.length;r++){for(n=d[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,t);for(o=0;Object.keys(n.crossings).length&&o<1e4;)o++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);1e4===o&&k.log("Infinite loop in contour?")}}},52421:function(Q,z,e){"use strict";var k=e(7901),A=e(46248);Q.exports=function(l,T,b,d,s){s||(s={}),s.isContour=!0;var t=A(l,T,b,d,s);return t&&t.forEach(function(o){var r=o.trace;"constraint"===r.contours.type&&(r.fillcolor&&k.opacity(r.fillcolor)?o.color=k.addOpacity(r.fillcolor,1):r.contours.showlines&&k.opacity(r.line.color)&&(o.color=k.addOpacity(r.line.color,1)))}),t}},99442:function(Q,z,e){"use strict";Q.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l,T,b){if(b||(b={}),A("contours.showlabels")){var d=l.font;k.coerceFont(A,"contours.labelfont",{family:d.family,size:d.size,color:T}),A("contours.labelformat")}!1!==b.hasHover&&A("zhoverformat")}},86068:function(Q,z,e){"use strict";var k=e(39898),A=e(21081),l=e(53572);Q.exports=function(T){var b=T.contours,d=b.start,s=l(b),t=b.size||1,o=Math.floor((s-d)/t)+1,r="lines"===b.coloring?0:1,n=A.extractOpts(T);isFinite(t)||(t=1,o=1);var a,i,c=n.reversescale?A.flipScale(n.colorscale):n.colorscale,h=c.length,f=new Array(h),x=new Array(h);if("heatmap"===b.coloring){var v=n.min,g=n.max;for(i=0;i<h;i++)f[i]=(a=c[i])[0]*(g-v)+v,x[i]=a[1];var y=k.extent([v,g,b.start,b.start+t*(o-1)]),p=y[v<g?0:1],m=y[v<g?1:0];p!==v&&(f.splice(0,0,p),x.splice(0,0,x[0])),m!==g&&(f.push(m),x.push(x[x.length-1]))}else for(i=0;i<h;i++)f[i]=((a=c[i])[0]*(o+r-1)-r/2)*t+d,x[i]=a[1];return A.makeColorScaleFunc({domain:f,range:x},{noNumericCheck:!0})}},87678:function(Q,z,e){"use strict";var k=e(36914);function A(l,T){var b=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return 5===b||10===b?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?5===b?713:1114:5===b?104:208:15===b?0:b}Q.exports=function(l){var T,b,d,s,t,o,r,n,a,i=l[0].z,c=i.length,h=i[0].length,f=2===c||2===h;for(b=0;b<c-1;b++)for(s=[],0===b&&(s=s.concat(k.BOTTOMSTART)),b===c-2&&(s=s.concat(k.TOPSTART)),T=0;T<h-1;T++)for(d=s.slice(),0===T&&(d=d.concat(k.LEFTSTART)),T===h-2&&(d=d.concat(k.RIGHTSTART)),t=T+","+b,o=[[i[b][T],i[b][T+1]],[i[b+1][T],i[b+1][T+1]]],a=0;a<l.length;a++)(r=A((n=l[a]).level,o))&&(n.crossings[t]=r,-1!==d.indexOf(r)&&(n.starts.push([T,b]),f&&-1!==d.indexOf(r,d.indexOf(r)+1)&&n.starts.push([T,b])))}},29854:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(21081),b=e(63893),d=e(89298),s=e(21994),t=e(50347),o=e(87678),r=e(81696),n=e(87558),a=e(84857),i=e(20083),c=e(36914),h=c.LABELOPTIMIZER;function f(g,y){var p,m,w,u,S,_,L="",C=0,P=g.edgepaths.map(function(U,B){return B}),I=!0;function H(U){return Math.abs(U[0]-y[2][0])<.01}for(;P.length;){for(_=l.smoothopen(g.edgepaths[C],g.smoothing),L+=I?_:_.replace(/^M/,"L"),P.splice(P.indexOf(C),1),p=g.edgepaths[C][g.edgepaths[C].length-1],u=-1,w=0;w<4;w++){if(!p){A.log("Missing end?",C,g);break}for(Math.abs(p[1]-y[0][1])<.01&&!H(p)?m=y[1]:Math.abs(p[0]-y[0][0])<.01?m=y[0]:Math.abs(p[1]-y[2][1])<.01?m=y[3]:H(p)&&(m=y[2]),S=0;S<g.edgepaths.length;S++){var F=g.edgepaths[S][0];Math.abs(p[0]-m[0])<.01?Math.abs(p[0]-F[0])<.01&&(F[1]-p[1])*(m[1]-F[1])>=0&&(m=F,u=S):Math.abs(p[1]-m[1])<.01?Math.abs(p[1]-F[1])<.01&&(F[0]-p[0])*(m[0]-F[0])>=0&&(m=F,u=S):A.log("endpt to newendpt is not vert. or horz.",p,m,F)}if(p=m,u>=0)break;L+="L"+m}if(u===g.edgepaths.length){A.log("unclosed perimeter path");break}(I=-1===P.indexOf(C=u))&&(C=P[0],L+="Z")}for(C=0;C<g.paths.length;C++)L+=l.smoothclosed(g.paths[C],g.smoothing);return L}function x(g,y,p,m){var w=y.width/2,u=y.height/2,S=g.x,_=g.y,E=g.theta,L=Math.cos(E)*w,C=Math.sin(E)*w,P=(S>m.center?m.right-S:S-m.left)/(L+Math.abs(Math.sin(E)*u)),I=(_>m.middle?m.bottom-_:_-m.top)/(Math.abs(C)+Math.cos(E)*u);if(P<1||I<1)return 1/0;var j=h.EDGECOST*(1/(P-1)+1/(I-1));j+=h.ANGLECOST*E*E;for(var R=S-L,H=_-C,F=S+L,U=_+C,B=0;B<p.length;B++){var N=p[B],J=Math.cos(N.theta)*N.width/2,Z=Math.sin(N.theta)*N.width/2,V=2*A.segmentDistance(R,H,F,U,N.x-J,N.y-Z,N.x+J,N.y+Z)/(y.height+N.height),W=N.level===y.level,X=W?h.SAMELEVELDISTANCE:1;if(V<=X)return 1/0;j+=h.NEIGHBORCOST*(W?h.SAMELEVELFACTOR:1)/(V-X)}return j}function v(g){var y,p,m=g.trace._emptypoints,w=[],u=g.z.length,S=g.z[0].length,_=[];for(y=0;y<S;y++)_.push(1);for(y=0;y<u;y++)w.push(_.slice());for(y=0;y<m.length;y++)w[(p=m[y])[0]][p[1]]=0;return g.zmask=w,w}z.plot=function(g,y,p,m){var w=y.xaxis,u=y.yaxis;A.makeTraceGroups(m,p,"contour").each(function(S){var _=k.select(this),E=S[0],C=E.x,P=E.y,I=E.trace.contours,j=n(I,y,E),R=A.ensureSingle(_,"g","heatmapcoloring"),H=[];"heatmap"===I.coloring&&(H=[S]),t(g,y,H,R),o(j),r(j);var W,X,K,F=w.c2p(C[0],!0),U=w.c2p(C[C.length-1],!0),B=u.c2p(P[0],!0),N=u.c2p(P[P.length-1],!0),J=[[F,N],[U,N],[U,B],[F,B]],Z=j;"constraint"===I.type&&(Z=a(j,I._operation)),W=J,X=I,(K=A.ensureSingle(_,"g","contourbg").selectAll("path").data("fill"===X.coloring?[0]:[])).enter().append("path"),K.exit().remove(),K.attr("d","M"+W.join("L")+"Z").style("stroke","none"),function(V,W,X,K){var ne="fill"===K.coloring||"constraint"===K.type&&"="!==K._operation,re="M"+X.join("L")+"Z";ne&&i(W,K);var ae=A.ensureSingle(V,"g","contourfill").selectAll("path").data(ne?W:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(le){var pe=(le.prefixBoundary?re:"")+f(le,X);pe?k.select(this).attr("d",pe).style("stroke","none"):k.select(this).remove()})}(_,Z,J,I),function(V,W,X,K,ne){var re=X._context.staticPlot,ae=A.ensureSingle(V,"g","contourlines"),le=!1!==ne.showlines,pe=ne.showlabels,xe=le&&pe,ye=z.createLines(ae,le||pe,W,re),se=z.createLineClip(ae,xe,X,K.trace.uid),fe=V.selectAll("g.contourlabels").data(pe?[0]:[]);if(fe.exit().remove(),fe.enter().append("g").classed("contourlabels",!0),pe){var Ee=[],de=[];A.clearLocationCache();var we=z.labelFormatter(X,K),ke=l.tester.append("text").attr("data-notex",1).call(l.font,ne.labelfont),Te=W[0].xaxis,$=W[0].yaxis,oe=Te._length,he=$._length,me=Te.range,Me=$.range,Ie=A.aggNums(Math.min,null,K.x),Pe=A.aggNums(Math.max,null,K.x),ze=A.aggNums(Math.min,null,K.y),ce=A.aggNums(Math.max,null,K.y),ge=Math.max(Te.c2p(Ie,!0),0),_e=Math.min(Te.c2p(Pe,!0),oe),De=Math.max($.c2p(ce,!0),0),He=Math.min($.c2p(ze,!0),he),Ve={};me[0]<me[1]?(Ve.left=ge,Ve.right=_e):(Ve.left=_e,Ve.right=ge),Me[0]<Me[1]?(Ve.top=De,Ve.bottom=He):(Ve.top=He,Ve.bottom=De),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,Ee.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var nt=Math.sqrt(oe*oe+he*he),tt=c.LABELDISTANCE*nt/Math.max(1,W.length/c.LABELINCREASE);ye.each(function(at){var dt=z.calcTextOpts(at.level,we,ke,X);k.select(this).selectAll("path").each(function(){var wt=A.getVisibleSegment(this,Ve,dt.height/2);if(wt&&!(wt.len<(dt.width+dt.height)*c.LABELMIN))for(var bt=Math.min(Math.ceil(wt.len/tt),c.LABELMAX),_t=0;_t<bt;_t++){var Lt=z.findBestTextLocation(this,wt,dt,de,Ve);if(!Lt)break;z.addLabelData(Lt,dt,de,Ee)}})}),ke.remove(),z.drawLabels(fe,de,X,se,xe?Ee:null)}pe&&!le&&ye.remove()}(_,j,g,E,I),function(V,W,X,K,ne){var re=K.trace,le="clip"+re.uid,pe=X._fullLayout._clips.selectAll("#"+le).data(re.connectgaps?[]:[0]);if(pe.enter().append("clipPath").classed("contourclip",!0).attr("id",le),pe.exit().remove(),!1===re.connectgaps){var xe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.xaxis,yaxis:W.yaxis,x:K.x,y:K.y,z:v(K),smoothing:0};o([xe]),r([xe]),i([xe],{type:"levels"}),A.ensureSingle(pe,"path","").attr("d",(xe.prefixBoundary?"M"+ne.join("L")+"Z":"")+f(xe,ne))}else le=null;l.setClipUrl(V,le,X)}(_,y,g,E,J)})},z.createLines=function(g,y,p,m){var w=p[0].smoothing,u=g.selectAll("g.contourlevel").data(y?p:[]);if(u.exit().remove(),u.enter().append("g").classed("contourlevel",!0),y){var S=u.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return l.smoothopen(E,w)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var _=u.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});_.exit().remove(),_.enter().append("path").classed("closedline",!0),_.attr("d",function(E){return l.smoothclosed(E,w)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return u},z.createLineClip=function(g,y,p,m){var w=y?"clipline"+m:null,u=p._fullLayout._clips.selectAll("#"+w).data(y?[0]:[]);return u.exit().remove(),u.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),l.setClipUrl(g,w,p),u},z.labelFormatter=function(g,y){var p=g._fullLayout,m=y.trace,w=m.contours,u={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)u.tickformat=w.labelformat,s(u,p);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)u=S.colorbar._axis;else{if("constraint"===w.type){var _=w.value;u.range=Array.isArray(_)?[_[0],_[_.length-1]]:[_,_]}else u.range=[w.start,w.end],u.nticks=(w.end-w.start)/w.size;u.range[0]===u.range[1]&&(u.range[1]+=u.range[0]||1),u.nticks||(u.nticks=1e3),s(u,p),d.prepTicks(u),u._tmin=null,u._tmax=null}}return function(E){return d.tickText(u,E).text}},z.calcTextOpts=function(g,y,p,m){var w=y(g);p.text(w).call(b.convertToTspans,m);var u=p.node(),S=l.bBox(u,!0);return{text:w,width:S.width,height:S.height,fontSize:+u.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},z.findBestTextLocation=function(g,y,p,m,w){var u,S,_,E,L,C=p.width;y.isClosed?(u=y.min+(S=y.len/h.INITIALSEARCHPOINTS)/2,_=y.max):(u=y.min+(S=(y.len-C)/(h.INITIALSEARCHPOINTS+1))+C/2,_=y.max-(S+C)/2);for(var P=1/0,I=0;I<h.ITERATIONS;I++){for(var j=u;j<_;j+=S){var R=A.getTextLocation(g,y.total,j,C),H=x(R,p,m,w);H<P&&(P=H,L=R,E=j)}if(P>2*h.MAXCOST)break;I&&(S/=2),_=(u=E-S/2)+1.5*S}if(P<=h.MAXCOST)return L},z.addLabelData=function(g,y,p,m){var w=y.fontSize,u=y.width+w/3,S=Math.max(0,y.height-w/3),_=g.x,E=g.y,L=g.theta,C=Math.sin(L),P=Math.cos(L),I=function(R,H){return[_+R*P-H*C,E+R*C+H*P]},j=[I(-u/2,-S/2),I(-u/2,S/2),I(u/2,S/2),I(u/2,-S/2)];p.push({text:y.text,x:_,y:E,dy:y.dy,theta:L,level:y.level,width:u,height:S}),m.push(j)},z.drawLabels=function(g,y,p,m,w){var u=g.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(u.exit().remove(),u.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;k.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(b.convertToTspans,p)}),w){for(var S="",_=0;_<w.length;_++)S+="M"+w[_].join("L")+"Z";A.ensureSingle(m,"path","").attr("d",S)}}},18670:function(Q,z,e){"use strict";var k=e(89298),A=e(71828);function l(T,b,d){var s={type:"linear",range:[T,b]};return k.autoTicks(s,(b-T)/(d||15)),s}Q.exports=function(T,b){var d=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||void 0===s)&&(s=A.aggNums(Math.min,null,b)),(T.zauto||void 0===t)&&(t=A.aggNums(Math.max,null,b));var o=l(s,t,T.ncontours);d.size=o.dtick,d.start=k.tickFirst(o),o.range.reverse(),d.end=k.tickFirst(o),d.start===s&&(d.start+=d.size),d.end===t&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),T._input.contours||(T._input.contours={}),A.extendFlat(T._input.contours,{start:d.start,end:d.end,size:d.size}),T._input.autocontour=!0}else if("constraint"!==d.type){var r,n=d.start,a=d.end,i=T._input.contours;n>a&&(d.start=i.start=a,a=d.end=i.end=n,n=d.start),d.size>0||(r=n===a?1:l(n,a,T.ncontours).dtick,i.size=d.size=r)}}},84426:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(70035),T=e(86068);Q.exports=function(b){var d=k.select(b).selectAll("g.contour");d.style("opacity",function(s){return s[0].trace.opacity}),d.each(function(s){var t=k.select(this),o=s[0].trace,r=o.contours,n=o.line,a=r.size||1,i=r.start,c="constraint"===r.type,h=!c&&"lines"===r.coloring,f=!c&&"fill"===r.coloring,x=h||f?T(o):null;t.selectAll("g.contourlevel").each(function(y){k.select(this).selectAll("path").call(A.lineGroupStyle,n.width,h?x(y.level):n.color,n.dash)});var v=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){A.font(k.select(this),{family:v.family,size:v.size,color:v.color||(h?x(y.level):n.color)})}),c)t.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(f){var g;t.selectAll("g.contourfill path").style("fill",function(y){return void 0===g&&(g=y.level),x(y.level+.5*a)}),void 0===g&&(g=i),t.selectAll("g.contourbg path").style("fill",x(g-.5*a))}}),l(b)}},8724:function(Q,z,e){"use strict";var k=e(1586),A=e(14523);Q.exports=function(l,T,b,d,s){var t,o=b("contours.coloring"),r="";"fill"===o&&(t=b("contours.showlines")),!1!==t&&("lines"!==o&&(r=b("line.color","#000")),b("line.width",.5),b("line.dash")),"none"!==o&&(!0!==l.showlegend&&(T.showlegend=!1),T._dfltShowLegend=!1,k(l,T,d,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),A(b,d,r,s)}},88085:function(Q,z,e){"use strict";var k=e(21606),A=e(70600),l=e(50693),T=e(1426).extendFlat,b=A.contours;Q.exports=T({carpet:{valType:"string",editType:"calc"},z:k.z,a:k.x,a0:k.x0,da:k.dx,b:k.y,b0:k.y0,db:k.dy,text:k.text,hovertext:k.hovertext,transpose:k.transpose,atype:k.xtype,btype:k.ytype,fillcolor:A.fillcolor,autocontour:A.autocontour,ncontours:A.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:A.line.color,width:A.line.width,dash:A.line.dash,smoothing:A.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function(Q,z,e){"use strict";var k=e(78803),A=e(71828),l=e(68296),T=e(4742),b=e(824),d=e(43907),s=e(70769),t=e(75005),o=e(22882),r=e(18670);Q.exports=function(n,a){var i=a._carpetTrace=o(n,a);if(i&&i.visible&&"legendonly"!==i.visible){if(!a.a||!a.b){var c=n.data[i.index],h=n.data[a.index];h.a||(h.a=c.a),h.b||(h.b=c.b),t(h,a,a._defaultColor,n._fullLayout)}var f=function(x,v){var g,y,p,m,w,u,S,_=v._carpetTrace,E=_.aaxis,L=_.baxis;E._minDtick=0,L._minDtick=0,A.isArray1D(v.z)&&l(v,E,L,"a","b",["z"]),g=v._a=v._a||v.a,m=v._b=v._b||v.b,g=g?E.makeCalcdata(v,"_a"):[],m=m?L.makeCalcdata(v,"_b"):[],y=v.a0||0,p=v.da||1,w=v.b0||0,u=v.db||1,S=v._z=T(v._z||v.z,v.transpose),v._emptypoints=d(S),b(S,v._emptypoints);var C=A.maxRowLength(S),R={a:s(v,"scaled"===v.xtype?"":g,y,p,C,E),b:s(v,"scaled"===v.ytype?"":m,w,u,S.length,L),z:S};return"levels"===v.contours.type&&"none"!==v.contours.coloring&&k(x,v,{vals:S,containerStr:"",cLetter:"z"}),[R]}(n,a);return r(a,a._z),f}}},75005:function(Q,z,e){"use strict";var k=e(71828),A=e(67684),l=e(88085),T=e(83179),b=e(67217),d=e(8724);Q.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,l,a,i)}if(n("carpet"),s.a&&s.b){if(!A(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),"constraint"===n("contours.type")?T(s,t,n,r,o,{hasHover:!1}):(b(s,t,n,function(a){return k.coerce2(s,t,l,a)}),d(s,t,n,r,{hasHover:!1}))}else t._defaultColor=o,t._length=null}},93740:function(Q,z,e){"use strict";Q.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(Q,z,e){"use strict";var k=e(39898),A=e(27669),l=e(67961),T=e(91424),b=e(71828),d=e(87678),s=e(81696),t=e(29854),o=e(36914),r=e(84857),n=e(87558),a=e(20083),i=e(22882),c=e(4536);function h(v,g,y){var p=v.getPointAtLength(g),m=v.getPointAtLength(y),w=m.x-p.x,u=m.y-p.y,S=Math.sqrt(w*w+u*u);return[w/S,u/S]}function f(v){var g=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/g,v[1]/g]}function x(v,g){var y=Math.abs(v[0]*g[0]+v[1]*g[1]);return Math.sqrt(1-y*y)/y}Q.exports=function(v,g,y,p){var m=g.xaxis,w=g.yaxis;b.makeTraceGroups(p,y,"contour").each(function(u){var S=k.select(this),_=u[0],E=_.trace,L=E._carpetTrace=i(v,E),C=v.calcdata[L.index][0];if(L.visible&&"legendonly"!==L.visible){var P=_.a,I=_.b,j=E.contours,R=n(j,g,_),H="constraint"===j.type,F=j._operation,U=H?"="===F?"lines":"fill":j.coloring,B=[[P[0],I[I.length-1]],[P[P.length-1],I[I.length-1]],[P[P.length-1],I[0]],[P[0],I[0]]];d(R),s(R,1e-8*(P[P.length-1]-P[0]),1e-8*(I[I.length-1]-I[0]));var Z,V,W,X,K=R;"constraint"===j.type&&(K=r(R,F)),function(le,pe){var xe,ye,se,fe,Ee,de,we,ke,Te;for(xe=0;xe<le.length;xe++){for(Ee=(fe=le[xe]).pedgepaths=[],de=fe.ppaths=[],ye=0;ye<fe.edgepaths.length;ye++){for(Te=fe.edgepaths[ye],we=[],se=0;se<Te.length;se++)we[se]=pe(Te[se]);Ee.push(we)}for(ye=0;ye<fe.paths.length;ye++){for(Te=fe.paths[ye],ke=[],se=0;se<Te.length;se++)ke[se]=pe(Te[se]);de.push(ke)}}}(R,ae);var ne=[];for(X=C.clipsegments.length-1;X>=0;X--)V=A([],(Z=C.clipsegments[X]).x,m.c2p),W=A([],Z.y,w.c2p),V.reverse(),W.reverse(),ne.push(l(V,W,Z.bicubic));var re="M"+ne.join("L")+"Z";(function(le,pe,xe,ye,se,fe){var Ee,de,we,ke,Te=b.ensureSingle(le,"g","contourbg").selectAll("path").data("fill"!==fe||se?[]:[0]);Te.enter().append("path"),Te.exit().remove();var $=[];for(ke=0;ke<pe.length;ke++)de=A([],(Ee=pe[ke]).x,xe.c2p),we=A([],Ee.y,ye.c2p),$.push(l(de,we,Ee.bicubic));Te.attr("d","M"+$.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,w,H,U),function(le,pe,xe,ye,se,fe,Ee,de,we,ke,Te){var $="fill"===ke;$&&a(se,le.contours);var oe=b.ensureSingle(pe,"g","contourfill").selectAll("path").data($?se:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(he){var me=(he.prefixBoundary?Te:"")+function(Me,Ie,Pe,ze,ce,ge,_e,De){var He,Ve,nt,tt,at,dt,wt,bt="",_t=Ie.edgepaths.map(function(Se,Re){return Re}),Lt=!0,Ct=1e-4*Math.abs(Pe[0][0]-Pe[2][0]),Ot=1e-4*Math.abs(Pe[0][1]-Pe[2][1]);function Ht(Se){return Math.abs(Se[1]-Pe[0][1])<Ot}function It(Se){return Math.abs(Se[1]-Pe[2][1])<Ot}function Ge(Se){return Math.abs(Se[0]-Pe[0][0])<Ct}function Ze(Se){return Math.abs(Se[0]-Pe[2][0])<Ct}function Be(Se,Re){var Ke,st,ct,Tt,Et="";for(Ht(Se)&&!Ze(Se)||It(Se)&&!Ge(Se)?(Tt=ce.aaxis,ct=c(ce,ge,[Se[0],Re[0]],.5*(Se[1]+Re[1]))):(Tt=ce.baxis,ct=c(ce,ge,.5*(Se[0]+Re[0]),[Se[1],Re[1]])),Ke=1;Ke<ct.length;Ke++)for(Et+=Tt.smoothing?"C":"L",st=0;st<ct[Ke].length;st++){var At=ct[Ke][st];Et+=[_e.c2p(At[0]),De.c2p(At[1])]+" "}return Et}for(He=0,Ve=null;_t.length;){for(Ve&&(bt+=Be(Ve,Ie.edgepaths[He][0])),wt=T.smoothopen(Ie.edgepaths[He].map(ze),Ie.smoothing),bt+=Lt?wt:wt.replace(/^M/,"L"),_t.splice(_t.indexOf(He),1),Ve=Ie.edgepaths[He][Ie.edgepaths[He].length-1],at=-1,tt=0;tt<4;tt++){if(!Ve){b.log("Missing end?",He,Ie);break}for(Ht(Ve)&&!Ze(Ve)?nt=Pe[1]:Ge(Ve)?nt=Pe[0]:It(Ve)?nt=Pe[3]:Ze(Ve)&&(nt=Pe[2]),dt=0;dt<Ie.edgepaths.length;dt++){var rt=Ie.edgepaths[dt][0];Math.abs(Ve[0]-nt[0])<Ct?Math.abs(Ve[0]-rt[0])<Ct&&(rt[1]-Ve[1])*(nt[1]-rt[1])>=0&&(nt=rt,at=dt):Math.abs(Ve[1]-nt[1])<Ot?Math.abs(Ve[1]-rt[1])<Ot&&(rt[0]-Ve[0])*(nt[0]-rt[0])>=0&&(nt=rt,at=dt):b.log("endpt to newendpt is not vert. or horz.",Ve,nt,rt)}if(at>=0)break;bt+=Be(Ve,nt),Ve=nt}if(at===Ie.edgepaths.length){b.log("unclosed perimeter path");break}(Lt=-1===_t.indexOf(He=at))&&(He=_t[0],bt+=Be(Ve,nt)+"Z",Ve=null)}for(He=0;He<Ie.paths.length;He++)bt+=T.smoothclosed(Ie.paths[He].map(ze),Ie.smoothing);return bt}(0,he,fe,Ee,de,we,xe,ye);me?k.select(this).attr("d",me).style("stroke","none"):k.select(this).remove()})}(E,S,m,w,K,B,ae,L,C,U,re),function(le,pe,xe,ye,se,fe,Ee){var de=xe._context.staticPlot,we=b.ensureSingle(le,"g","contourlines"),ke=!1!==se.showlines,Te=se.showlabels,$=ke&&Te,oe=t.createLines(we,ke||Te,pe,de),he=t.createLineClip(we,$,xe,ye.trace.uid),me=le.selectAll("g.contourlabels").data(Te?[0]:[]);if(me.exit().remove(),me.enter().append("g").classed("contourlabels",!0),Te){var Pe=fe.xaxis._length,ze=fe.yaxis._length,ce=[[[0,0],[Pe,0],[Pe,ze],[0,ze]]],ge=[];b.clearLocationCache();var _e=t.labelFormatter(xe,ye),De=T.tester.append("text").attr("data-notex",1).call(T.font,se.labelfont),He={left:0,right:Pe,center:Pe/2,top:0,bottom:ze,middle:ze/2},Ve=Math.sqrt(Pe*Pe+ze*ze),nt=o.LABELDISTANCE*Ve/Math.max(1,pe.length/o.LABELINCREASE);oe.each(function(tt){var at=t.calcTextOpts(tt.level,_e,De,xe);k.select(this).selectAll("path").each(function(dt){var bt=b.getVisibleSegment(this,He,at.height/2);if(bt&&(function(Ot,Ht,It,Ge,Ze,Be){for(var Ye,rt=0;rt<It.pedgepaths.length;rt++)Ht===It.pedgepaths[rt]&&(Ye=It.edgepaths[rt]);if(Ye){var Se=Ze.a[0],Re=Ze.a[Ze.a.length-1],Ke=Ze.b[0],st=Ze.b[Ze.b.length-1],ct=h(Ot,0,1),Tt=h(Ot,Ge.total,Ge.total-1),Et=ht(Ye[0],ct),At=Ge.total-ht(Ye[Ye.length-1],Tt);Ge.min<Et&&(Ge.min=Et),Ge.max>At&&(Ge.max=At),Ge.len=Ge.max-Ge.min}function ht(pt,gt){var Pt,zt=0;return(Math.abs(pt[0]-Se)<.1||Math.abs(pt[0]-Re)<.1)&&(Pt=f(Ze.dxydb_rough(pt[0],pt[1],.1)),zt=Math.max(zt,Be*x(gt,Pt)/2)),(Math.abs(pt[1]-Ke)<.1||Math.abs(pt[1]-st)<.1)&&(Pt=f(Ze.dxyda_rough(pt[0],pt[1],.1)),zt=Math.max(zt,Be*x(gt,Pt)/2)),zt}}(this,dt,tt,bt,Ee,at.height),!(bt.len<(at.width+at.height)*o.LABELMIN)))for(var _t=Math.min(Math.ceil(bt.len/nt),o.LABELMAX),Lt=0;Lt<_t;Lt++){var Ct=t.findBestTextLocation(this,bt,at,ge,He);if(!Ct)break;t.addLabelData(Ct,at,ge,ce)}})}),De.remove(),t.drawLabels(me,ge,xe,he,$?ce:null)}Te&&!ke&&oe.remove()}(S,R,v,_,j,g,L),T.setClipUrl(S,L._clipPathId,v)}function ae(le){var pe=L.ab2xy(le[0],le[1],!0);return[m.c2p(pe[0]),w.c2p(pe[1])]}})}},64096:function(Q,z,e){"use strict";var k=e(50693),A=e(5386).f,l=e(9012),T=e(99181),b=e(1426).extendFlat;Q.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:A(),showlegend:b({},l.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(Q,z,e){"use strict";var k=e(92770),A=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(78803),b=e(71828)._;Q.exports=function(d,s){for(var t=s._length,o=new Array(t),r=s.z,n=A(r)&&r.length,a=0;a<t;a++){var i=o[a]={},c=s.lon[a],h=s.lat[a];if(i.lonlat=k(c)&&k(h)?[+c,+h]:[l,l],n){var f=r[a];i.z=k(f)?f:l}}return T(d,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(o[0].t={labels:{lat:b(d,"lat:")+" ",lon:b(d,"lon:")+" "}}),o}},52414:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(7901),T=e(21081),b=e(50606).BADNUM,d=e(18214).makeBlank;Q.exports=function(s){var t=s[0].trace,o=!0===t.visible&&0!==t._length,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!o)return r;var n,a=[],i=t.z,c=t.radius,h=A.isArrayOrTypedArray(i)&&i.length,f=A.isArrayOrTypedArray(c);for(n=0;n<s.length;n++){var x=s[n],v=x.lonlat;if(v[0]!==b){var g={};if(h){var y=x.z;g.z=y!==b?y:0}f&&(g.r=k(c[n])&&c[n]>0?+c[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:g})}}var p=T.extractOpts(t),m=p.reversescale?T.flipScale(p.colorscale):p.colorscale,w=m[0][1],u=["interpolate",["linear"],["heatmap-density"],0,l.opacity(w)<1?w:l.addOpacity(w,0)];for(n=1;n<m.length;n++)u.push(m[n][0],m[n][1]);return A.extendFlat(r.heatmap.paint,{"heatmap-weight":h?["interpolate",["linear"],["get","z"],p.min,0,p.max,1]:1/(p.max-p.min),"heatmap-color":u,"heatmap-radius":f?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},79429:function(Q,z,e){"use strict";var k=e(71828),A=e(1586),l=e(64096);Q.exports=function(T,b,d,s){function t(a,i){return k.coerce(T,b,l,a,i)}var o=t("lon")||[],r=t("lat")||[],n=Math.min(o.length,r.length);n?(b._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),A(T,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},62474:function(Q){"use strict";Q.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z.z=e.z,z}},84684:function(Q,z,e){"use strict";var k=e(89298),A=e(28178).hoverPoints,l=e(28178).getExtraText;Q.exports=function(T,b,d){var s=A(T,b,d);if(s){var t=s[0],o=t.cd,r=o[0].trace,n=o[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=k.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=l(r,n,o[0].t.labels),[t]}}},93814:function(Q,z,e){"use strict";Q.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(k,A){for(var l=A.getMapLayers(),T=0;T<l.length;T++){var b=l[T],d=b.id;if("symbol"===b.type&&"string"==typeof d&&-1===d.indexOf("plotly-"))return d}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(Q,z,e){"use strict";var k=e(52414),A=e(77734).traceLayerPrefix;function l(b,d){this.type="densitymapbox",this.subplot=b,this.uid=d,this.sourceId="source-"+d,this.layerList=[["heatmap",A+d+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(b){var d=this.subplot,s=this.layerList,t=k(b),o=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(t.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(t,o),this.below=o);for(var r=0;r<s.length;r++){var n=s[r],i=n[1],c=t[n[0]];d.setOptions(i,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&d.setOptions(i,"setPaintProperty",c.paint)}},T._addLayers=function(b,d){for(var s=this.subplot,t=this.layerList,o=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],i=b[a];s.addLayer({type:a,id:n[1],source:o,layout:i.layout,paint:i.paint},d)}},T._removeLayers=function(){for(var b=this.subplot.map,d=this.layerList,s=d.length-1;s>=0;s--)b.removeLayer(d[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},Q.exports=function(b,d){var s=d[0].trace,t=new l(b,s.uid),o=t.sourceId,r=k(d),n=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(o,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},49789:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){for(var T=0;T<A.length;T++)A[T].i=T;k.mergeArray(l.text,A,"tx"),k.mergeArray(l.hovertext,A,"htx");var b=l.marker;if(b){k.mergeArray(b.opacity,A,"mo"),k.mergeArray(b.color,A,"mc");var d=b.line;d&&(k.mergeArray(d.color,A,"mlc"),k.mergeArrayCastPositive(d.width,A,"mlw"))}}},1285:function(Q,z,e){"use strict";var k,A=e(1486),l=e(82196).line,T=e(9012),b=e(12663).axisHoverFormat,d=e(5386).f,s=e(5386).s,t=e(18517),o=e(1426).extendFlat,r=e(7901);Q.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:A.hovertext,hovertemplate:d({},{keys:t.eventDataKeys}),hoverinfo:o({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:A.text,textposition:A.textposition,insidetextanchor:o({},A.insidetextanchor,{dflt:"middle"}),textangle:o({},A.textangle,{dflt:0}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:o({},A.orientation,{}),offset:o({},A.offset,{arrayOk:!1}),width:o({},A.width,{arrayOk:!1}),marker:(k=o({},A.marker),delete k.pattern,k),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},l.color,{dflt:r.defaultLine}),width:o({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},9532:function(Q,z,e){"use strict";var k=e(89298),A=e(42973),l=e(49789),T=e(66279),b=e(50606).BADNUM;function d(s){return s===b?0:s}Q.exports=function(s,t){var o,r,n,a,i,c,h,f,x=k.getFromId(s,t.xaxis||"x"),v=k.getFromId(s,t.yaxis||"y");"h"===t.orientation?(o=x.makeCalcdata(t,"x"),n=v.makeCalcdata(t,"y"),a=A(t,v,"y",n),i=!!t.yperiodalignment,c="y"):(o=v.makeCalcdata(t,"y"),n=x.makeCalcdata(t,"x"),a=A(t,x,"x",n),i=!!t.xperiodalignment,c="x"),r=a.vals;var g,y=Math.min(r.length,o.length),p=new Array(y);for(t._base=[],h=0;h<y;h++){o[h]<0&&(o[h]=b);var m=!1;o[h]!==b&&h+1<y&&o[h+1]!==b&&(m=!0),f=p[h]={p:r[h],s:o[h],cNext:m},t._base[h]=-.5*f.s,i&&(p[h].orig_p=n[h],p[h][c+"End"]=a.ends[h],p[h][c+"Start"]=a.starts[h]),t.ids&&(f.id=String(t.ids[h])),0===h&&(p[0].vTotal=0),p[0].vTotal+=d(f.s),f.begR=d(f.s)/d(p[0].s)}for(h=0;h<y;h++)(f=p[h]).s!==b&&(f.sumR=f.s/p[0].vTotal,f.difR=void 0!==g?f.s/g:1,g=f.s);return l(p,t),T(p,t),p}},18517:function(Q){"use strict";Q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(Q,z,e){"use strict";var k=e(11661).setGroupPositions;Q.exports=function(A,l){var T,b,d=A._fullLayout,s=A._fullData,t=A.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(b=0;b<s.length;b++){var c=s[b];!0===c.visible&&c.xaxis===o._id&&c.yaxis===r._id&&"funnel"===c.type&&(T=t[b],"h"===c.orientation?i.push(T):a.push(T),n.push(T))}var f={mode:d.funnelmode,norm:d.funnelnorm,gap:d.funnelgap,groupgap:d.funnelgroupgap};for(k(A,o,r,a,f),k(A,r,o,i,f),b=0;b<n.length;b++){T=n[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},26199:function(Q,z,e){"use strict";var k=e(71828),A=e(26125),l=e(90769).handleText,T=e(67513),b=e(73927),d=e(1285),s=e(7901);Q.exports={supplyDefaults:function(t,o,r,n){function a(f,x){return k.coerce(t,o,d,f,x)}if(T(t,o,n,a)){b(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",o.y&&!o.x?"v":"h"),a("offset"),a("width");var i=a("text");a("hovertext"),a("hovertemplate");var c=a("textposition");l(t,o,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===o.textposition||o.texttemplate||a("textinfo",Array.isArray(i)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",(x=k.isArrayOrTypedArray(f=h)?"#000":f,s.addOpacity(x,.5*s.opacity(x)))),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else o.visible=!1;var f,x},crossTraceDefaults:function(t,o){var r,n;function a(c){return k.coerce(n._input,n,d,c)}if("group"===o.funnelmode)for(var i=0;i<t.length;i++)r=(n=t[i])._input,A(r,n,o,a)}}},34598:function(Q){"use strict";Q.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(z.percentInitial=e.percentInitial),"percentPrevious"in e&&(z.percentPrevious=e.percentPrevious),"percentTotal"in e&&(z.percentTotal=e.percentTotal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},63341:function(Q,z,e){"use strict";var k=e(7901).opacity,A=e(95423).hoverOnBars,l=e(71828).formatPercent;Q.exports=function(T,b,d,s,t){var y,p,m,w,u,o=A(T,b,d,s,t);if(o){var r=o.cd,n=r[0].trace,i=r[o.index];o[("h"===n.orientation?"x":"y")+"LabelVal"]=i.s,o.percentInitial=i.begR,o.percentInitialLabel=l(i.begR,1),o.percentPrevious=i.difR,o.percentPreviousLabel=l(i.difR,1),o.percentTotal=i.sumR,o.percentTotalLabel=l(i.sumR,1);var c=i.hi||n.hoverinfo,h=[];if(c&&"none"!==c&&"skip"!==c){var f="all"===c,x=c.split("+"),v=function(g){return f||-1!==x.indexOf(g)};v("percent initial")&&h.push(o.percentInitialLabel+" of initial"),v("percent previous")&&h.push(o.percentPreviousLabel+" of previous"),v("percent total")&&h.push(o.percentTotalLabel+" of total")}return o.extraText=h.join("<br>"),o.color=(p=n.marker,w=(y=i).mlc||p.line.color,u=y.mlw||p.line.width,k(m=y.mc||p.color)?m:k(w)&&u?w:void 0),[o]}}},51759:function(Q,z,e){"use strict";Q.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(Q){"use strict";Q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(Q,z,e){"use strict";var k=e(71828),A=e(10440);Q.exports=function(l,T,b){var d=!1;function s(r,n){return k.coerce(l,T,A,r,n)}for(var t=0;t<b.length;t++){var o=b[t];if(o.visible&&"funnel"===o.type){d=!0;break}}d&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(50606).BADNUM,b=e(17295),d=e(72597).clearMinTextSize;function s(t,o,r,n){var a=[],i=[],c=n?o:r,h=n?r:o;return a[0]=c.c2p(t.s0,!0),i[0]=h.c2p(t.p0,!0),a[1]=c.c2p(t.s1,!0),i[1]=h.c2p(t.p1,!0),a[2]=c.c2p(t.nextS0,!0),i[2]=h.c2p(t.nextP0,!0),a[3]=c.c2p(t.nextS1,!0),i[3]=h.c2p(t.nextP1,!0),n?[a,i]:[i,a]}Q.exports=function(t,o,r,n){var i,c,x,v,a=t._fullLayout;d("funnel",a),i=t,x=(c=o).xaxis,v=c.yaxis,A.makeTraceGroups(n,r,"trace bars").each(function(g){var y=k.select(this),p=g[0].trace,m=A.ensureSingle(y,"g","regions");if(p.connector&&p.connector.visible){var w="h"===p.orientation,u=m.selectAll("g.region").data(A.identity);u.enter().append("g").classed("region",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,x,v,w),C=L[0],P=L[1],I="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(I+=w?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),""===I&&(I="M0,0Z"),A.ensureSingle(k.select(this),"path").attr("d",I).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()}),function(i,c,h,f){var x=c.xaxis,v=c.yaxis;A.makeTraceGroups(f,h,"trace bars").each(function(g){var y=k.select(this),p=g[0].trace,m=A.ensureSingle(y,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var w="h"===p.orientation,u=m.selectAll("g.line").data(A.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,x,v,w),C=L[0],P=L[1],I="";void 0!==C[3]&&void 0!==P[3]&&(w?(I+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],I+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(I+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],I+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),""===I&&(I="M0,0Z"),A.ensureSingle(k.select(this),"path").attr("d",I).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()})}(t,o,r,n),b.plot(t,o,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},68266:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(7901),T=e(37822).DESELECTDIM,b=e(16688),d=e(72597).resizeText,s=b.styleTextPoints;Q.exports={style:function(t,o,r){var n=r||k.select(t).selectAll("g.funnellayer").selectAll("g.trace");d(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=k.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c.marker;k.select(this).call(l.fill,h.mc||f.color).call(l.stroke,h.mlc||f.line.color).call(A.dashLine,f.line.dash,h.mlw||f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,t),i.selectAll(".regions").each(function(){k.select(this).selectAll("path").style("stroke-width",0).call(l.fill,c.connector.fillcolor)}),i.selectAll(".lines").each(function(){var h=c.connector.line;A.lineGroupStyle(k.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},86807:function(Q,z,e){"use strict";var k=e(34e3),A=e(9012),l=e(27670).Y,T=e(5386).f,b=e(5386).s,d=e(1426).extendFlat;Q.exports={labels:k.labels,label0:k.label0,dlabel:k.dlabel,values:k.values,marker:{colors:k.marker.colors,line:{color:d({},k.marker.line.color,{dflt:null}),width:d({},k.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:k.text,hovertext:k.hovertext,scalegroup:d({},k.scalegroup,{}),textinfo:d({},k.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:d({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:d({},k.textposition,{values:["inside","none"],dflt:"inside"}),textfont:k.textfont,insidetextfont:k.insidetextfont,title:{text:k.title.text,font:k.title.font,position:d({},k.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(Q,z,e){"use strict";var k=e(74875);z.name="funnelarea",z.plot=function(A,l,T,b){k.plotBasePlot(z.name,A,l,T,b)},z.clean=function(A,l,T,b){k.cleanBasePlot(z.name,A,l,T,b)}},89574:function(Q,z,e){"use strict";var k=e(32354);Q.exports={calc:function(A,l){return k.calc(A,l)},crossTraceCalc:function(A){k.crossTraceCalc(A,{type:"funnelarea"})}}},86282:function(Q,z,e){"use strict";var k=e(71828),A=e(86807),l=e(27670).c,T=e(90769).handleText,b=e(37434).handleLabelsAndValues;Q.exports=function(d,s,t,o){function r(g,y){return k.coerce(d,s,A,g,y)}var n=r("labels"),a=r("values"),i=b(n,a),c=i.len;if(s._hasLabels=i.hasLabels,s._hasValues=i.hasValues,!s._hasLabels&&s._hasValues&&(r("label0"),r("dlabel")),c){s._length=c,r("marker.line.width")&&r("marker.line.color",o.paper_bgcolor),r("marker.colors"),r("scalegroup");var h,f=r("text"),x=r("texttemplate");if(x||(h=r("textinfo",Array.isArray(f)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),x||h&&"none"!==h){var v=r("textposition");T(d,s,o,r,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(s,o,r),r("title.text")&&(r("title.position"),k.coerceFont(r,"title.font",o.font)),r("aspectratio"),r("baseratio")}else s.visible=!1}},10421:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function(Q,z,e){"use strict";var k=e(92774).hiddenlabels;Q.exports={hiddenlabels:k,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(Q,z,e){"use strict";var k=e(71828),A=e(80097);Q.exports=function(l,T){function b(d,s){return k.coerce(l,T,A,d,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},79187:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(71828),T=l.strScale,b=l.strTranslate,d=e(63893),s=e(17295).toMoveInsideBar,t=e(72597),o=t.recordMinTextSize,r=t.clearMinTextSize,n=e(53581),a=e(14575),i=a.attachFxHandlers,c=a.determineInsideTextFont,h=a.layoutAreas,f=a.prerenderTitles,x=a.positionTitleOutside,v=a.formatSliceLabel;function g(y,p){return"l"+(p[0]-y[0])+","+(p[1]-y[1])}Q.exports=function(y,p){var m=y._context.staticPlot,w=y._fullLayout;r("funnelarea",w),f(p,y),h(p,w._size),l.makeTraceGroups(w._funnelarealayer,p,"trace").each(function(u){var S=k.select(this),_=u[0],E=_.trace;(function(L){if(L.length){var C=L[0],P=C.trace,I=P.aspectratio,j=P.baseratio;j>.999&&(j=.999);var R,H,F,U=Math.pow(j,2),B=C.vTotal,N=B,J=B*U/(1-U)/B,Z=[];for(Z.push(we()),H=L.length-1;H>-1;H--)(F=L[H]).hidden||(J+=F.v/N,Z.push(we()));var W=1/0,X=-1/0;for(H=0;H<Z.length;H++)R=Z[H],W=Math.min(W,R[1]),X=Math.max(X,R[1]);for(H=0;H<Z.length;H++)Z[H][1]-=(X+W)/2;var ne=C.r,re=(X-W)/2,ae=ne/Z[Z.length-1][0],le=ne/re*I;for(C.r=le*re,H=0;H<Z.length;H++)Z[H][0]*=ae,Z[H][1]*=le;var pe,xe,ye=[-(R=Z[0])[0],R[1]],se=[R[0],R[1]],fe=0;for(H=L.length-1;H>-1;H--)if(!(F=L[H]).hidden){var Ee=Z[fe+=1][0],de=Z[fe][1];F.TL=[-Ee,de],F.TR=[Ee,de],F.BL=ye,F.BR=se,F.pxmid=[.5*((pe=F.TR)[0]+(xe=F.BR)[0]),.5*(pe[1]+xe[1])],ye=F.TL,se=F.TR}}function we(){var ke,Te={x:ke=Math.sqrt(J),y:-ke};return[Te.x,Te.y]}})(u),S.each(function(){var L=k.select(this).selectAll("g.slice").data(u);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,I){if(P.hidden)k.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var j=_.cx,R=_.cy,H=k.select(this),F=H.selectAll("path.surface").data([P]);F.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),H.call(i,y,u);var U="M"+(j+P.TR[0])+","+(R+P.TR[1])+g(P.TR,P.BR)+g(P.BR,P.BL)+g(P.BL,P.TL)+"Z";F.attr("d",U),v(y,P,_);var B=n.castOption(E.textposition,P.pts),N=H.selectAll("g.slicetext").data(P.text&&"none"!==B?[0]:[]);N.enter().append("g").classed("slicetext",!0),N.exit().remove(),N.each(function(){var J=l.ensureSingle(k.select(this),"text","",function(ae){ae.attr("data-notex",1)}),Z=l.ensureUniformFontSize(y,c(E,P,w.font));J.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(A.font,Z).call(d.convertToTspans,y);var V,W,X,K=A.bBox(J.node()),ne=Math.min(P.BL[1],P.BR[1])+R,re=Math.max(P.TL[1],P.TR[1])+R;W=Math.max(P.TL[0],P.BL[0])+j,X=Math.min(P.TR[0],P.BR[0])+j,(V=s(W,X,ne,re,K,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=Z.size,o(E.type,V,w),u[I].transform=V,l.setTransormAndDisplay(J,V)})}});var C=k.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=l.ensureSingle(k.select(this),"text","",function(R){R.attr("data-notex",1)}),I=E.title.text;E._meta&&(I=l.templateString(I,E._meta)),P.text(I).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(A.font,E.title.font).call(d.convertToTspans,y);var j=x(_,w._size);P.attr("transform",b(j.x,j.y)+T(Math.min(1,j.scale))+b(j.tx,j.ty))})})})}},71858:function(Q,z,e){"use strict";var k=e(39898),A=e(63463),l=e(72597).resizeText;Q.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,b,"funnelarea"),b.each(function(d){var s=d[0].trace,t=k.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){k.select(this).call(A,o,s)})})}},21606:function(Q,z,e){"use strict";var k=e(82196),A=e(9012),l=e(41940),T=e(12663).axisHoverFormat,b=e(5386).f,d=e(5386).s,s=e(50693),t=e(1426).extendFlat;Q.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},k.x,{impliedEdits:{xtype:"array"}}),x0:t({},k.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},k.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},k.y,{impliedEdits:{ytype:"array"}}),y0:t({},k.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},k.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},k.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},k.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},k.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},k.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},k.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},k.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},A.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(89298),T=e(42973),b=e(17562),d=e(78803),s=e(68296),t=e(4742),o=e(824),r=e(43907),n=e(70769),a=e(50606).BADNUM;function i(c){for(var h=[],f=c.length,x=0;x<f;x++){var v=c[x];v!==a&&h.push(v)}return h}Q.exports=function(c,h){var f,x,v,g,y,p,m,w,u,S,_,E=l.getFromId(c,h.xaxis||"x"),L=l.getFromId(c,h.yaxis||"y"),C=k.traceIs(h,"contour"),P=k.traceIs(h,"histogram"),I=k.traceIs(h,"gl2d"),j=C?"best":h.zsmooth;if(E._minDtick=0,L._minDtick=0,P)g=(_=b(c,h)).orig_x,f=_.x,x=_.x0,v=_.dx,w=_.orig_y,y=_.y,p=_.y0,m=_.dy,u=_.z;else{var R=h.z;A.isArray1D(R)?(s(h,E,L,"x","y",["z"]),f=h._x,y=h._y,R=h._z):(g=h.x?E.makeCalcdata(h,"x"):[],w=h.y?L.makeCalcdata(h,"y"):[],f=T(h,E,"x",g).vals,y=T(h,L,"y",w).vals,h._x=f,h._y=y),x=h.x0,v=h.dx,p=h.y0,m=h.dy,u=t(R,h,E,L)}function H(re){j=h._input.zsmooth=h.zsmooth=!1,A.warn('cannot use zsmooth: "fast": '+re)}if((E.rangebreaks||L.rangebreaks)&&(u=function(re,ae,le){for(var pe=[],xe=-1,ye=0;ye<le.length;ye++)if(ae[ye]!==a){pe[++xe]=[];for(var se=0;se<le[ye].length;se++)re[se]!==a&&pe[xe].push(le[ye][se])}return pe}(f,y,u),P||(f=i(f),y=i(y),h._x=f,h._y=y)),P||!C&&!h.connectgaps||(h._emptypoints=r(u),o(u,h._emptypoints)),"fast"===j)if("log"===E.type||"log"===L.type)H("log axis found");else if(!P){if(f.length){var F=(f[f.length-1]-f[0])/(f.length-1),U=Math.abs(F/100);for(S=0;S<f.length-1;S++)if(Math.abs(f[S+1]-f[S]-F)>U){H("x scale is not linear");break}}if(y.length&&"fast"===j){var B=(y[y.length-1]-y[0])/(y.length-1),N=Math.abs(B/100);for(S=0;S<y.length-1;S++)if(Math.abs(y[S+1]-y[S]-B)>N){H("y scale is not linear");break}}}var J=A.maxRowLength(u),Z="scaled"===h.xtype?"":f,V=n(h,Z,x,v,J,E),W="scaled"===h.ytype?"":y,X=n(h,W,p,m,u.length,L);I||(h._extremes[E._id]=l.findExtremes(E,V),h._extremes[L._id]=l.findExtremes(L,X));var K={x:V,y:X,z:u,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&g&&(K.orig_x=g),h.yperiodalignment&&w&&(K.orig_y=w),Z&&Z.length===V.length-1&&(K.xCenter=Z),W&&W.length===X.length-1&&(K.yCenter=W),P&&(K.xRanges=_.xRanges,K.yRanges=_.yRanges,K.pts=_.pts),C||d(c,h,{vals:u,cLetter:"z"}),C&&h.contours&&"heatmap"===h.contours.coloring){var ne={type:"contour"===h.type?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};K.xfill=n(ne,Z,x,v,J,E),K.yfill=n(ne,W,p,m,u.length,L)}return[K]}},4742:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(50606).BADNUM;Q.exports=function(T,b,d,s){var t,o,r,n,a,i;function c(y){if(k(y))return+y}if(b&&b.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(0===t)return!1;r=function(y){return y.length},n=function(y,p,m){return(y[m]||[])[p]}}else t=T.length,r=function(y,p){return y[p].length},n=function(y,p,m){return(y[p]||[])[m]};function f(y){if(b&&"carpet"!==b.type&&"contourcarpet"!==b.type&&y&&"category"===y.type&&b["_"+y._id.charAt(0)].length){var p=y._id.charAt(0),m={},w=b["_"+p+"CategoryMap"]||b[p];for(a=0;a<w.length;a++)m[w[a]]=a;return function(u){var S=m[y._categories[u]];return S+1?S:l}}return A.identity}var x=f(d),v=f(s);s&&"category"===s.type&&(t=s._categories.length);var y,p,m,g=new Array(t);for(a=0;a<t;a++)for(o=d&&"category"===d.type?d._categories.length:r(T,a),g[a]=new Array(o),i=0;i<o;i++)g[a][i]=c((y=T,p=v(a),m=x(i),p===l||m===l?l:n(y,p,m)));return g}},61243:function(Q){"use strict";Q.exports={min:"zmin",max:"zmax"}},68296:function(Q,z,e){"use strict";var k=e(71828),A=e(50606).BADNUM,l=e(42973);Q.exports=function(T,b,d,s,t,o){var r=T._length,n=b.makeCalcdata(T,s),a=d.makeCalcdata(T,t);n=l(T,b,s,n).vals,a=l(T,d,t,a).vals;var i,c,h,f,x=T.text,v=void 0!==x&&k.isArray1D(x),g=T.hovertext,y=void 0!==g&&k.isArray1D(g),p=k.distinctVals(n),m=p.vals,w=k.distinctVals(a),u=w.vals,S=[],_=u.length,E=m.length;for(i=0;i<o.length;i++)S[i]=k.init2dArray(_,E);v&&(h=k.init2dArray(_,E)),y&&(f=k.init2dArray(_,E));var L=k.init2dArray(_,E);for(i=0;i<r;i++)if(n[i]!==A&&a[i]!==A){var C=k.findBin(n[i]+p.minDiff/2,m),P=k.findBin(a[i]+w.minDiff/2,u);for(c=0;c<o.length;c++)S[c][P][C]=T[o[c]][i],L[P][C]=i;v&&(h[P][C]=x[i]),y&&(f[P][C]=g[i])}for(T["_"+s]=m,T["_"+t]=u,c=0;c<o.length;c++)T["_"+o[c]]=S[c];v&&(T._text=h),y&&(T._hovertext=f),b&&"category"===b.type&&(T["_"+s+"CategoryMap"]=m.map(function(j){return b._categories[j]})),d&&"category"===d.type&&(T["_"+t+"CategoryMap"]=u.map(function(j){return d._categories[j]})),T._after2before=L}},76382:function(Q,z,e){"use strict";var k=e(71828),A=e(67684),l=e(58623),T=e(73927),b=e(49901),d=e(1586),s=e(21606);Q.exports=function(t,o,r,n){function a(i,c){return k.coerce(t,o,s,i,c)}A(t,o,a,n)?(T(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(a,n),b(t,o,a,n),a("hoverongaps"),a("connectgaps",k.isArray1D(o.z)&&!1!==o.zsmooth),d(t,o,n,a,{prefix:"",cLetter:"z"})):o.visible=!1}},43907:function(Q,z,e){"use strict";var k=e(71828).maxRowLength;Q.exports=function(A){var l,T,b,d,s,t,o,r,n=[],a={},i=[],c=A[0],h=[],f=[0,0,0],x=k(A);for(T=0;T<A.length;T++)for(l=h,h=c,c=A[T+1]||[],b=0;b<x;b++)void 0===h[b]&&((t=(void 0!==h[b-1]?1:0)+(void 0!==h[b+1]?1:0)+(void 0!==l[b]?1:0)+(void 0!==c[b]?1:0))?(0===T&&t++,0===b&&t++,T===A.length-1&&t++,b===h.length-1&&t++,t<4&&(a[[T,b]]=[T,b,t]),n.push([T,b,t])):i.push([T,b]));for(;i.length;){for(o={},r=!1,s=i.length-1;s>=0;s--)(t=((a[[(T=(d=i[s])[0])-1,b=d[1]]]||f)[2]+(a[[T+1,b]]||f)[2]+(a[[T,b-1]]||f)[2]+(a[[T,b+1]]||f)[2])/20)&&(o[d]=[T,b,t],i.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(d in o)a[d]=o[d],n.push(o[d])}return n.sort(function(v,g){return g[2]-v[2]})}},46248:function(Q,z,e){"use strict";var k=e(30211),A=e(71828),l=e(89298),T=e(21081).extractOpts;Q.exports=function(b,d,s,t,o){o||(o={});var r,n,a,i,c=o.isContour,h=b.cd[0],f=h.trace,x=b.xa,v=b.ya,g=h.x,y=h.y,p=h.z,m=h.xCenter,w=h.yCenter,u=h.zmask,S=f.zhoverformat,_=g,E=y;if(!1!==b.index){try{a=Math.round(b.index[1]),i=Math.round(b.index[0])}catch{return void A.error("Error hovering on heatmap, pointNumber must be [row,col], found:",b.index)}if(a<0||a>=p[0].length||i<0||i>p.length)return}else{if(k.inbox(d-g[0],d-g[g.length-1],0)>0||k.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(c){var L;for(_=[2*g[0]-g[1]],L=1;L<g.length;L++)_.push((g[L]+g[L-1])/2);for(_.push([2*g[g.length-1]-g[g.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}a=Math.max(0,Math.min(_.length-2,A.findBin(d,_))),i=Math.max(0,Math.min(E.length-2,A.findBin(s,E)))}var C,P,I=x.c2p(g[a]),j=x.c2p(g[a+1]),R=v.c2p(y[i]),H=v.c2p(y[i+1]);c?(j=I,r=(C=h.orig_x||g)[a],H=R,n=(P=h.orig_y||y)[i]):(C=h.orig_x||m||g,P=h.orig_y||w||y,r=m?C[a]:(C[a]+C[a+1])/2,n=w?P[i]:(P[i]+P[i+1])/2,x&&"category"===x.type&&(r=g[a]),v&&"category"===v.type&&(n=y[i]),f.zsmooth&&(I=j=x.c2p(r),R=H=v.c2p(n)));var F=p[i][a];if(u&&!u[i][a]&&(F=void 0),void 0!==F||f.hoverongaps){var U;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[i])?U=h.hovertext[i][a]:Array.isArray(h.text)&&Array.isArray(h.text[i])&&(U=h.text[i][a]);var B=T(f),J=l.tickText({type:"linear",range:[B.min,B.max],hoverformat:S,_separators:x._separators,_numFormat:x._numFormat},F,"hover").text;return[A.extendFlat(b,{index:f._after2before?f._after2before[i][a]:[i,a],distance:b.maxHoverDistance,spikeDistance:b.maxSpikeDistance,x0:I,x1:j,y0:R,y1:H,xLabelVal:r,yLabelVal:n,zLabelVal:F,zLabel:J,text:U})]}}},92165:function(Q,z,e){"use strict";Q.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(Q,z,e){"use strict";var k=e(71828),A=[[-1,0],[1,0],[0,-1],[0,1]];function l(b){return.5-.25*Math.min(1,.5*b)}function T(b,d,s){var t,o,r,n,a,i,c,h,f,x,v,g,y,p=0;for(n=0;n<d.length;n++){for(v=b[o=(t=d[n])[0]][r=t[1]],x=0,f=0,a=0;a<4;a++)(c=b[o+(i=A[a])[0]])&&void 0!==(h=c[r+i[1]])&&(0===x?g=y=h:(g=Math.min(g,h),y=Math.max(y,h)),f++,x+=h);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";b[o][r]=x/f,void 0===v?f<4&&(p=1):(b[o][r]=(1+s)*b[o][r]-s*v,y>g&&(p=Math.max(p,Math.abs(b[o][r]-v)/(y-g))))}return p}Q.exports=function(b,d){var s,t=1;for(T(b,d),s=0;s<d.length&&!(d[s][2]<4);s++);for(d=d.slice(s),s=0;s<100&&t>.01;s++)t=T(b,d,l(t));return t>.01&&k.log("interp2d didn't converge quickly",t),b}},58623:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){A("texttemplate");var T=k.extendFlat({},l.font,{color:"auto",size:"auto"});k.coerceFont(A,"textfont",T)}},70769:function(Q,z,e){"use strict";var k=e(73972),A=e(71828).isArrayOrTypedArray;Q.exports=function(l,T,b,d,s,t){var o,r,n,a=[],i=k.traceIs(l,"contour"),c=k.traceIs(l,"histogram"),h=k.traceIs(l,"gl2d");if(A(T)&&T.length>1&&!c&&"category"!==t.type){var f=T.length;if(!(f<=s))return T.slice(0,i?s:s+1);if(i||h)a=T.slice(0,s);else if(1===s)a=[T[0]-.5,T[0]+.5];else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<f;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[f-1]-.5*T[f-2])}if(f<s){var x=a[a.length-1],v=x-a[a.length-2];for(n=f;n<s;n++)a.push(x+=v)}}else{var g=l[t._id.charAt(0)+"calendar"];for(o=c?t.r2c(b,0,g):A(T)&&1===T.length?T[0]:void 0===b?0:("log"===t.type?t.d2c:t.r2c)(b,0,g),r=d||1,n=i||h?0:-.5;n<s;n++)a.push(o+r*n)}return a}},50347:function(Q,z,e){"use strict";var k=e(39898),A=e(84267),l=e(73972),T=e(91424),b=e(89298),d=e(71828),s=e(63893),t=e(8225),o=e(7901),r=e(21081).extractOpts,n=e(21081).makeColorScaleFuncFromTrace,a=e(77922),i=e(18783).LINE_SPACING,c="heatmap-label";function h(y){return y.selectAll("g."+c)}function f(y){h(y).remove()}function x(y,p){var m=p.length-2,w=d.constrain(d.findBin(y,p),0,m),u=p[w],_=d.constrain(w+(y-u)/(p[w+1]-u)-.5,0,m),E=Math.round(_),L=Math.abs(_-E);return _&&_!==m&&L?{bin0:E,frac:L,bin1:Math.round(E+L/(_-E))}:{bin0:E,bin1:E,frac:0}}function v(y,p){var m=p.length-1,w=d.constrain(d.findBin(y,p),0,m),u=p[w],S=(y-u)/(p[w+1]-u)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function g(y,p,m){y[p]=m[0],y[p+1]=m[1],y[p+2]=m[2],y[p+3]=Math.round(255*m[3])}Q.exports=function(y,p,m,w){var u=p.xaxis,S=p.yaxis;d.makeTraceGroups(w,m,"hm").each(function(_){var E,L,C,P,I,j,R,H,F=k.select(this),U=_[0],B=U.trace,N=B.xgap||0,J=B.ygap||0,Z=U.z,V=U.x,W=U.y,X=U.xCenter,K=U.yCenter,ne=l.traceIs(B,"contour"),re=ne?"best":B.zsmooth,ae=Z.length,le=d.maxRowLength(Z),pe=!1,xe=!1;for(j=0;void 0===E&&j<V.length-1;)E=u.c2p(V[j]),j++;for(j=V.length-1;void 0===L&&j>0;)L=u.c2p(V[j]),j--;for(L<E&&(C=L,L=E,E=C,pe=!0),j=0;void 0===P&&j<W.length-1;)P=S.c2p(W[j]),j++;for(j=W.length-1;void 0===I&&j>0;)I=S.c2p(W[j]),j--;if(I<P&&(C=P,P=I,I=C,xe=!0),ne&&(X=V,K=W,V=U.xfill,W=U.yfill),"fast"!==re){var ye="best"===re?0:.5;E=Math.max(-ye*u._length,E),L=Math.min((1+ye)*u._length,L),P=Math.max(-ye*S._length,P),I=Math.min((1+ye)*S._length,I)}var se,fe,Ee=Math.round(L-E),de=Math.round(I-P);if(Ee<=0||de<=0)return F.selectAll("image").data([]).exit().remove(),void f(F);"fast"===re?(se=le,fe=ae):(se=Ee,fe=de);var we=document.createElement("canvas");we.width=se,we.height=fe;var ke,Te,$=we.getContext("2d"),oe=n(B,{noNumericCheck:!0,returnArray:!0});"fast"===re?(ke=pe?function($n){return le-1-$n}:d.identity,Te=xe?function($n){return ae-1-$n}:d.identity):(ke=function($n){return d.constrain(Math.round(u.c2p(V[$n])-E),0,Ee)},Te=function($n){return d.constrain(Math.round(S.c2p(W[$n])-P),0,de)});var he,me,Me,Ie,Pe=Te(0),ze=[Pe,Pe],ce=pe?0:1,ge=xe?0:1,_e=0,De=0,He=0,Ve=0;function nt($n,Gn){if(void 0!==$n){var ir=oe($n);return ir[0]=Math.round(ir[0]),ir[1]=Math.round(ir[1]),ir[2]=Math.round(ir[2]),_e+=Gn,De+=ir[0]*Gn,He+=ir[1]*Gn,Ve+=ir[2]*Gn,ir}return[0,0,0,0]}function tt($n,Gn,ir,Jt){var rn=$n[ir.bin0];if(void 0===rn)return nt(void 0,1);var Tn=$n[ir.bin1],Ln=Gn[ir.bin0],Bn=Gn[ir.bin1];return nt(rn+ir.frac*(Tn-rn||0)+Jt.frac*((Ln-rn||0)+ir.frac*(void 0===Tn?void 0===Bn?0:void 0===Ln?2*(Bn-rn):2*(2*Bn-Ln-rn)/3:void 0===Bn?void 0===Ln?0:2*(2*rn-Tn-Ln)/3:void 0===Ln?2*(2*Bn-Tn-rn)/3:Bn+rn-Tn-Ln)))}if(re){var at,dt=0;try{at=new Uint8Array(Ee*de*4)}catch{at=new Array(Ee*de*4)}if("best"===re){var wt,bt,_t,Lt=X||V,Ct=K||W,Ot=new Array(Lt.length),Ht=new Array(Ct.length),It=new Array(Ee),Ge=X?v:x,Ze=K?v:x;for(j=0;j<Lt.length;j++)Ot[j]=Math.round(u.c2p(Lt[j])-E);for(j=0;j<Ct.length;j++)Ht[j]=Math.round(S.c2p(Ct[j])-P);for(j=0;j<Ee;j++)It[j]=Ge(j,Ot);for(R=0;R<de;R++)for(bt=Z[(wt=Ze(R,Ht)).bin0],_t=Z[wt.bin1],j=0;j<Ee;j++,dt+=4)g(at,dt,Ie=tt(bt,_t,It[j],wt))}else for(R=0;R<ae;R++)for(Me=Z[R],ze=Te(R),j=0;j<Ee;j++)Ie=nt(Me[j],1),g(at,dt=4*(ze*Ee+ke(j)),Ie);var Be=$.createImageData(Ee,de);try{Be.data.set(at)}catch{var Ye=Be.data,rt=Ye.length;for(R=0;R<rt;R++)Ye[R]=at[R]}$.putImageData(Be,0,0)}else{var Se=Math.floor(N/2),Re=Math.floor(J/2);for(R=0;R<ae;R++)if(Me=Z[R],ze.reverse(),ze[ge]=Te(R+1),ze[0]!==ze[1]&&void 0!==ze[0]&&void 0!==ze[1])for(he=[me=ke(0),me],j=0;j<le;j++)he.reverse(),he[ce]=ke(j+1),he[0]!==he[1]&&void 0!==he[0]&&void 0!==he[1]&&(Ie=nt(Me[j],(he[1]-he[0])*(ze[1]-ze[0])),$.fillStyle="rgba("+Ie.join(",")+")",$.fillRect(he[0]+Se,ze[0]+Re,he[1]-he[0]-N,ze[1]-ze[0]-J))}De=Math.round(De/_e),He=Math.round(He/_e),Ve=Math.round(Ve/_e);var Ke=A("rgb("+De+","+He+","+Ve+")");y._hmpixcount=(y._hmpixcount||0)+_e,y._hmlumcount=(y._hmlumcount||0)+_e*Ke.getLuminance();var st=F.selectAll("image").data(_);st.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),st.attr({height:de,width:Ee,x:E,y:P,"xlink:href":we.toDataURL("image/png")}),f(F);var ct=B.texttemplate;if(ct){var Tt=r(B),Et={type:"linear",range:[Tt.min,Tt.max],_separators:u._separators,_numFormat:u._numFormat},At="histogram2dcontour"===B.type,ht="contour"===B.type,pt=ht?ae-1:ae,gt=ht?1:0,Pt=ht?le-1:le,zt=[];for(j=ht?1:0;j<pt;j++){var Ut;if(ht)Ut=U.y[j];else if(At){if(0===j||j===ae-1)continue;Ut=U.y[j]}else if(U.yCenter)Ut=U.yCenter[j];else{if(j+1===ae&&void 0===U.y[j+1])continue;Ut=(U.y[j]+U.y[j+1])/2}var Nt=Math.round(S.c2p(Ut));if(!(0>Nt||Nt>S._length))for(R=gt;R<Pt;R++){var jt;if(ht)jt=U.x[R];else if(At){if(0===R||R===le-1)continue;jt=U.x[R]}else if(U.xCenter)jt=U.xCenter[R];else{if(R+1===le&&void 0===U.x[R+1])continue;jt=(U.x[R]+U.x[R+1])/2}var Gt=Math.round(u.c2p(jt));if(!(0>Gt||Gt>u._length)){var un=t({x:jt,y:Ut},B,y._fullLayout);un.x=jt,un.y=Ut;var hn=U.z[j][R];void 0===hn?(un.z="",un.zLabel=""):(un.z=hn,un.zLabel=b.tickText(Et,hn,"hover").text);var Qt=U.text&&U.text[j]&&U.text[j][R];void 0!==Qt&&!1!==Qt||(Qt=""),un.text=Qt;var _n=d.texttemplateString(ct,un,y._fullLayout._d3locale,un,B._meta||{});if(_n){var Fn=_n.split("<br>"),yn=Fn.length,on=0;for(H=0;H<yn;H++)on=Math.max(on,Fn[H].length);zt.push({l:yn,c:on,t:_n,x:Gt,y:Nt,z:hn})}}}}var pn=B.textfont,ln=pn.family,dn=pn.size,Cn=y._fullLayout.font.size;if(!dn||"auto"===dn){var kn=1/0,Rn=1/0,Nn=0,jn=0;for(H=0;H<zt.length;H++){var er=zt[H];if(Nn=Math.max(Nn,er.l),jn=Math.max(jn,er.c),H<zt.length-1){var Kn=zt[H+1],yr=Math.abs(Kn.x-er.x),lr=Math.abs(Kn.y-er.y);yr&&(kn=Math.min(kn,yr)),lr&&(Rn=Math.min(Rn,lr))}}isFinite(kn)&&isFinite(Rn)?(kn-=N,Rn-=J,kn/=jn,Rn/=Nn,kn/=i/2,Rn/=i,dn=Math.min(Math.floor(kn),Math.floor(Rn),Cn)):dn=Cn}if(dn<=0||!isFinite(dn))return;h(F).data(zt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function($n){var Jt,Gn=k.select(this),ir=pn.color;ir&&"auto"!==ir||(ir=o.contrast("rgba("+oe($n.z).join()+")")),Gn.attr("data-notex",1).call(s.positionText,(Jt=$n,Jt.x),function(Jt){return Jt.y-dn*(Jt.l*i/2-1)}($n)).call(T.font,ln,dn,ir).text($n.t).call(s.convertToTspans,y)})}})}},70035:function(Q,z,e){"use strict";var k=e(39898);Q.exports=function(A){k.select(A).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function(Q){"use strict";Q.exports=function(z,e,k){!1===k("zsmooth")&&(k("xgap"),k("ygap")),k("zhoverformat")}},67684:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(73972);function T(b,d){var s=d(b);return"scaled"===(s?d(b+"type","array"):"scaled")&&(d(b+"0"),d("d"+b)),s}Q.exports=function(b,d,s,t,o,r){var n,a,i=s("z");if(o=o||"x",r=r||"y",void 0===i||!i.length)return 0;if(A.isArray1D(b.z)){n=s(o),a=s(r);var c=A.minRowLength(n),h=A.minRowLength(a);if(0===c||0===h)return 0;d._length=Math.min(c,h,i.length)}else{if(n=T(o,s),a=T(r,s),!function(f){for(var x,v=!0,g=!1,y=!1,p=0;p<f.length;p++){if(!A.isArrayOrTypedArray(x=f[p])){v=!1;break}x.length>0&&(g=!0);for(var m=0;m<x.length;m++)if(k(x[m])){y=!0;break}}return v&&g&&y}(i))return 0;s("transpose"),d._length=null}return"heatmapgl"===b.type||l.getComponentMethod("calendars","handleTraceDefaults")(b,d,[o,r],t),!0}},16063:function(Q,z,e){"use strict";for(var k=e(21606),A=e(50693),l=e(1426).extendFlat,T=e(30962).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],d={},s=0;s<b.length;s++){var t=b[s];d[t]=k[t]}d.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(d,A("",{cLetter:"z",autoColorDflt:!1})),Q.exports=T(d,"calc","nested")},59560:function(Q,z,e){"use strict";var k=e(9330).gl_heatmap2d,A=e(89298),l=e(78614);function T(d,s){this.scene=d,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=k(d.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(d){var s=this.options,t=s.shape,o=d.pointId,r=o%t[0],n=Math.floor(o/t[0]);return{trace:this,dataCoord:d.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[o]],textLabel:this.textLabels[o],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},b.update=function(d,s){var t=s[0];this.index=d.index,this.name=d.name,this.hoverinfo=d.hoverinfo;var o=t.z;this.options.z=[].concat.apply([],o),this.options.shape=[o[0].length,o.length],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=d.zsmooth;var a=function(x){for(var v=x.colorscale,g=x.zmin,y=x.zmax,p=v.length,m=new Array(p),w=new Array(4*p),u=0;u<p;u++){var S=v[u],_=l(S[1]);m[u]=g+S[0]*(y-g);for(var E=0;E<4;E++)w[4*u+E]=_[E]}return{colorLevels:m,colorValues:w}}(d);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],d.text),this.heatmap.update(this.options);var i,c,h=this.scene.xaxis,f=this.scene.yaxis;!1===d.zsmooth&&(i={ppad:t.x[1]-t.x[0]},c={ppad:t.y[1]-t.y[0]}),d._extremes[h._id]=A.findExtremes(h,t.x,i),d._extremes[f._id]=A.findExtremes(f,t.y,c)},b.dispose=function(){this.heatmap.dispose()},Q.exports=function(d,s,t){var o=new T(d,s.uid);return o.update(s,t),o}},19600:function(Q,z,e){"use strict";var k=e(71828),A=e(67684),l=e(1586),T=e(16063);Q.exports=function(b,d,s,t){function o(r,n){return k.coerce(b,d,T,r,n)}A(b,d,o,t)?(o("text"),o("zsmooth"),l(b,d,t,o,{prefix:"",cLetter:"z"})):d.visible=!1}},3325:function(Q,z,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),Q.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(Q,z,e){"use strict";var k=e(1486),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(5386).s,b=e(41940),d=e(17656),s=e(72406),t=e(1426).extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:A("x"),yhoverformat:A("y"),text:t({},k.text,{}),hovertext:t({},k.hovertext,{}),orientation:k.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},k.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:k.insidetextanchor,textangle:k.textangle,cliponaxis:k.cliponaxis,constraintext:k.constraintext,marker:k.marker,offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:k.selected,unselected:k.unselected,_deprecated:{bardir:k._deprecated.bardir}}},42174:function(Q){"use strict";Q.exports=function(z,e){for(var k=z.length,A=0,l=0;l<k;l++)e[l]?(z[l]/=e[l],A+=z[l]):z[l]=null;return A}},17656:function(Q){"use strict";Q.exports=function(z,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(Q,z,e){"use strict";var k=e(92770);Q.exports={count:function(A,l,T){return T[A]++,1},sum:function(A,l,T,b){var d=b[l];return k(d)?(d=Number(d),T[A]+=d,d):0},avg:function(A,l,T,b,d){var s=b[l];return k(s)&&(s=Number(s),T[A]+=s,d[A]++),0},min:function(A,l,T,b){var d=b[l];if(k(d)){if(d=Number(d),!k(T[A]))return T[A]=d,d;if(T[A]>d){var s=d-T[A];return T[A]=d,s}}return 0},max:function(A,l,T,b){var d=b[l];if(k(d)){if(d=Number(d),!k(T[A]))return T[A]=d,d;if(T[A]<d){var s=d-T[A];return T[A]=d,s}}return 0}}},40965:function(Q,z,e){"use strict";var k=e(50606),A=k.ONEAVGYEAR,l=k.ONEAVGMONTH,T=k.ONEDAY,b=k.ONEHOUR,d=k.ONEMIN,s=k.ONESEC,t=e(89298).tickIncrement;function o(i,c,h,f){if(i*c<=0)return 1/0;for(var x=Math.abs(c-i),v="date"===h.type,g=r(x,v),y=0;y<10;y++){var p=r(80*g,v);if(g===p||!n(p,i,c,v,h,f))break;g=p}return g}function r(i,c){return c&&i>s?i>T?i>1.1*A?A:i>1.1*l?l:T:i>b?b:i>d?d:s:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function n(i,c,h,f,x,v){if(f&&i>T){var g=a(c,x,v),y=a(h,x,v),p=i===A?0:1;return g[p]!==y[p]}return Math.floor(h/i)-Math.floor(c/i)>.1}function a(i,c,h){var f=c.c2d(i,A,h).split("-");return""===f[0]&&(f.unshift(),f[0]="-"+f[0]),f}Q.exports=function(i,c,h,f,x){var v,g,y=-1.1*c,p=-.1*c,m=i-p,w=h[0],u=h[1],S=Math.min(o(w+p,w+m,f,x),o(u+p,u+m,f,x)),_=Math.min(o(w+y,w+p,f,x),o(u+y,u+p,f,x));if(S>_&&_<Math.abs(u-w)/4e3?(v=S,g=!1):(v=Math.min(S,_),g=!0),"date"===f.type&&v>T){var E=v===A?1:6,L=v===A?"M12":"M1";return function(C,P){var I=f.c2d(C,A,x),j=I.indexOf("-",E);j>0&&(I=I.substr(0,j));var R=f.d2c(I,0,x);if(R<C){var H=t(R,L,!1,x);(R+H)/2<C+i&&(R=H)}return P&&g?t(R,L,!0,x):R}}return function(C,P){var I=v*Math.round(C/v);return I+v/10<C&&I+.9*v<C+i&&(I+=v),P&&g&&(I-=v),I}}},72138:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(73972),T=e(89298),b=e(75341),d=e(59575),s=e(36362),t=e(42174),o=e(40965);function r(n,a,i,c,h){var f,x,v,g,y,p,m,w=c+"bins",u=n._fullLayout,_=u._histogramBinOpts[a["_"+c+"bingroup"]],E="overlay"===u.barmode,L=function(se){return i.r2c(se,0,g)},C=function(se){return i.c2r(se,0,g)},P="date"===i.type?function(se){return se||0===se?A.cleanDate(se,null,g):null}:function(se){return k(se)?Number(se):null};function I(se,fe,Ee){fe[se+"Found"]?(fe[se]=P(fe[se]),null===fe[se]&&(fe[se]=Ee[se])):(p[se]=fe[se]=Ee[se],A.nestedProperty(x[0],w+"."+se).set(Ee[se]))}if(a["_"+c+"autoBinFinished"])delete a["_"+c+"autoBinFinished"];else{x=_.traces;var j=[],R=!0,H=!1,F=!1;for(f=0;f<x.length;f++)if((v=x[f]).visible){var U=_.dirs[f];y=v["_"+U+"pos0"]=i.makeCalcdata(v,U),j=A.concat(j,y),delete v["_"+c+"autoBinFinished"],!0===a.visible&&(R?R=!1:(delete v._autoBin,v["_"+c+"autoBinFinished"]=1),l.traceIs(v,"2dMap")&&(H=!0),"histogram2dcontour"===v.type&&(F=!0))}var B=T.autoBin(j,i,_.nbins,H,g=x[0][c+"calendar"],_.sizeFound&&_.size),N=x[0]._autoBin={};if(p=N[_.dirs[0]]={},F&&(_.size||(B.start=C(T.tickIncrement(L(B.start),B.size,!0,g))),void 0===_.end&&(B.end=C(T.tickIncrement(L(B.end),B.size,!1,g)))),E&&!l.traceIs(a,"2dMap")&&0===B._dataSpan&&"category"!==i.type&&"multicategory"!==i.type){if(h)return[B,y,!0];B=function(se,fe,Ee,de,we){var ke,Te,$,oe=se._fullLayout,he=function(nt,tt){for(var at=tt.xaxis,dt=tt.yaxis,wt=tt.orientation,bt=[],_t=nt._fullData,Lt=0;Lt<_t.length;Lt++){var Ct=_t[Lt];"histogram"===Ct.type&&!0===Ct.visible&&Ct.orientation===wt&&Ct.xaxis===at&&Ct.yaxis===dt&&bt.push(Ct)}return bt}(se,fe),me=!1,Me=1/0,Ie=[fe];for(ke=0;ke<he.length;ke++)if((Te=he[ke])===fe)me=!0;else if(me){var Pe=r(se,Te,Ee,de,!0),ze=Pe[0],ce=Pe[2];Te["_"+de+"autoBinFinished"]=1,Te["_"+de+"pos0"]=Pe[1],ce?Ie.push(Te):Me=Math.min(Me,ze.size)}else $=oe._histogramBinOpts[Te["_"+de+"bingroup"]],Me=Math.min(Me,$.size||Te[we].size);var ge=new Array(Ie.length);for(ke=0;ke<Ie.length;ke++)for(var _e=Ie[ke]["_"+de+"pos0"],De=0;De<_e.length;De++)if(void 0!==_e[De]){ge[ke]=_e[De];break}for(isFinite(Me)||(Me=A.distinctVals(ge).minDiff),ke=0;ke<Ie.length;ke++){var He=(Te=Ie[ke])[de+"calendar"],Ve={start:Ee.c2r(ge[ke]-Me/2,0,He),end:Ee.c2r(ge[ke]+Me/2,0,He),size:Me};Te._input[we]=Te[we]=Ve,($=oe._histogramBinOpts[Te["_"+de+"bingroup"]])&&A.extendFlat($,Ve)}return fe[we]}(n,a,i,c,w)}(m=v.cumulative||{}).enabled&&"include"!==m.currentbin&&("decreasing"===m.direction?B.start=C(T.tickIncrement(L(B.start),B.size,!0,g)):B.end=C(T.tickIncrement(L(B.end),B.size,!1,g))),_.size=B.size,_.sizeFound||(p.size=B.size,A.nestedProperty(x[0],w+".size").set(B.size)),I("start",_,B),I("end",_,B)}y=a["_"+c+"pos0"],delete a["_"+c+"pos0"];var J=a._input[w]||{},Z=A.extendFlat({},_),V=_.start,W=i.r2l(J.start),X=void 0!==W;if((_.startFound||X)&&W!==i.r2l(V)){var K=X?W:A.aggNums(Math.min,null,y),ne={type:"category"===i.type||"multicategory"===i.type?"linear":i.type,r2l:i.r2l,dtick:_.size,tick0:V,calendar:g,range:[K,T.tickIncrement(K,_.size,!1,g)].map(i.l2r)},re=T.tickFirst(ne);re>i.r2l(K)&&(re=T.tickIncrement(re,_.size,!0,g)),Z.start=i.l2r(re),X||A.nestedProperty(a,w+".start").set(Z.start)}var ae=_.end,le=i.r2l(J.end),pe=void 0!==le;if((_.endFound||pe)&&le!==i.r2l(ae)){var xe=pe?le:A.aggNums(Math.max,null,y);Z.end=i.l2r(xe),pe||A.nestedProperty(a,w+".start").set(Z.end)}var ye="autobin"+c;return!1===a._input[ye]&&(a._input[w]=A.extendFlat({},a[w]||{}),delete a._input[ye],delete a[ye]),[Z,y]}Q.exports={calc:function(n,a){var i,c,h,f,x=[],v=[],g="h"===a.orientation,y=T.getFromId(n,g?a.yaxis:a.xaxis),p=g?"y":"x",m={x:"y",y:"x"}[p],w=a[p+"calendar"],u=a.cumulative,S=r(n,a,y,p),_=S[0],E=S[1],L="string"==typeof _.size,C=[],P=L?C:_,I=[],j=[],R=[],H=0,F=a.histnorm,U=a.histfunc,B=-1!==F.indexOf("density");u.enabled&&B&&(F=F.replace(/ ?density$/,""),B=!1);var N,J="max"===U||"min"===U?null:0,Z=d.count,V=s[F],W=!1,X=function(Te){return y.r2c(Te,0,w)};for(A.isArrayOrTypedArray(a[m])&&"count"!==U&&(N=a[m],W="avg"===U,Z=d[U]),i=X(_.start),h=X(_.end)+(i-T.tickIncrement(i,_.size,!1,w))/1e6;i<h&&x.length<1e6&&(c=T.tickIncrement(i,_.size,!1,w),x.push((i+c)/2),v.push(J),R.push([]),C.push(i),B&&I.push(1/(c-i)),W&&j.push(0),!(c<=i));)i=c;C.push(i),L||"date"!==y.type||(P={start:X(P.start),end:X(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var K=a["_"+p+"bingroup"],ne={leftGap:1/0,rightGap:1/0};K&&(n._fullLayout._roundFnOpts[K]||(n._fullLayout._roundFnOpts[K]=ne),ne=n._fullLayout._roundFnOpts[K]);var re,ae=v.length,le=!0,pe=ne.leftGap,xe=ne.rightGap,ye={};for(i=0;i<E.length;i++){var se=E[i];(f=A.findBin(se,P))>=0&&f<ae&&(H+=Z(f,i,v,N,j),le&&R[f].length&&se!==E[R[f][0]]&&(le=!1),R[f].push(i),ye[i]=f,pe=Math.min(pe,se-C[f]),xe=Math.min(xe,C[f+1]-se))}ne.leftGap=pe,ne.rightGap=xe,le||(re=function(Te,$){return function(){var oe=n._fullLayout._roundFnOpts[K];return o(oe.leftGap,oe.rightGap,C,y,w)(Te,$)}}),W&&(H=t(v,j)),V&&V(v,H,I),u.enabled&&function(Te,$,oe){var he,me,Me;function Ie(ze){Me=Te[ze],Te[ze]/=2}function Pe(ze){Te[ze]=Me+(me=Te[ze])/2,Me+=me}if("half"===oe)if("increasing"===$)for(Ie(0),he=1;he<Te.length;he++)Pe(he);else for(Ie(Te.length-1),he=Te.length-2;he>=0;he--)Pe(he);else if("increasing"===$){for(he=1;he<Te.length;he++)Te[he]+=Te[he-1];"exclude"===oe&&(Te.unshift(0),Te.pop())}else{for(he=Te.length-2;he>=0;he--)Te[he]+=Te[he+1];"exclude"===oe&&(Te.push(0),Te.shift())}}(v,u.direction,u.currentbin);var fe=Math.min(x.length,v.length),Ee=[],de=0,we=fe-1;for(i=0;i<fe;i++)if(v[i]){de=i;break}for(i=fe-1;i>=de;i--)if(v[i]){we=i;break}for(i=de;i<=we;i++)if(k(x[i])&&k(v[i])){var ke={p:x[i],s:v[i],b:0};u.enabled||(ke.pts=R[i],le?ke.ph0=ke.ph1=R[i].length?E[R[i][0]]:x[i]:(a._computePh=!0,ke.ph0=re(C[i]),ke.ph1=re(C[i+1],!0))),Ee.push(ke)}return 1===Ee.length&&(Ee[0].width1=T.tickIncrement(Ee[0].p,_.size,!1,w)-Ee[0].p),b(Ee,a),A.isArrayOrTypedArray(a.selectedpoints)&&A.tagSelected(Ee,a,ye),Ee},calcAllAutoBins:r}},72406:function(Q){"use strict";Q.exports={eventDataKeys:["binNumber"]}},82222:function(Q,z,e){"use strict";var k=e(71828),A=e(41675),l=e(73972).traceIs,T=e(26125),b=k.nestedProperty,d=e(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];Q.exports=function(o,r){var n,a,i,c,h,f,x,v=r._histogramBinOpts={},g=[],y={},p=[];function m(B,N){return k.coerce(n._input,n,n._module.attributes,B,N)}function w(B){return"v"===B.orientation?"x":"y"}function u(B,N,J){var Z=B.uid+"__"+J;N||(N=Z);var V=A.getFromTrace({_fullLayout:r},B,J).type,W=B[J+"calendar"]||"",X=v[N],K=!0;X&&(V===X.axType&&W===X.calendar?(K=!1,X.traces.push(B),X.dirs.push(J)):(N=Z,V!==X.axType&&k.warn(["Attempted to group the bins of trace",B.index,"set on a","type:"+V,"axis","with bins on","type:"+X.axType,"axis."].join(" ")),W!==X.calendar&&k.warn(["Attempted to group the bins of trace",B.index,"set with a",W,"calendar","with bins",X.calendar?"on a "+X.calendar+" calendar":"w/o a set calendar"].join(" ")))),K&&(v[N]={traces:[B],dirs:[J],axType:V,calendar:B[J+"calendar"]||""}),B["_"+J+"bingroup"]=N}for(h=0;h<o.length;h++)l(n=o[h],"histogram")&&(g.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var S=r._alignmentOpts||{};for(h=0;h<g.length;h++){if(i="",!l(n=g[h],"2dMap")){if(c=w(n),"group"===r.barmode&&n.alignmentgroup){var E=d(r,n[c+"axis"])+n.orientation;(S[E]||{})[n.alignmentgroup]&&(i=E)}i||"overlay"===r.barmode||(i=d(r,n.xaxis)+d(r,n.yaxis)+w(n))}i?(y[i]||(y[i]=[]),y[i].push(n)):p.push(n)}for(i in y)if(1!==(a=y[i]).length){var L=!1;for(a.length&&(n=a[0],L=m("bingroup")),i=L||i,h=0;h<a.length;h++){var C=(n=a[h])._input.bingroup;C&&C!==i&&k.warn(["Trace",n.index,"must match","within bingroup",i+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=i,u(n,i,w(n))}}else p.push(a[0]);for(h=0;h<p.length;h++){n=p[h];var P=m("bingroup");if(l(n,"2dMap"))for(x=0;x<2;x++){var I=m((c=t[x])+"bingroup",P?P+"__"+c:null);u(n,I,c)}else u(n,P,w(n))}for(i in v){var j=v[i];for(a=j.traces,f=0;f<s.length;f++){var R,H,F=s[f],U=F.name;if("nbins"!==U||!j.sizeFound){for(h=0;h<a.length;h++){if(void 0!==b((n=a[h])._input,R=F.aStr[c=j.dirs[h]]).get()){j[U]=m(R),j[U+"Found"]=!0;break}(H=(n._autoBin||{})[c]||{})[U]&&b(n,R).set(H[U])}if("start"===U||"end"===U)for(;h<a.length;h++)(n=a[h])["_"+c+"bingroup"]&&m(R,(H=(n._autoBin||{})[c]||{})[U]);"nbins"!==U||j.sizeFound||j.nbinsFound||(n=a[0],j[U]=m(R))}}}}},11385:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(7901),T=e(90769).handleText,b=e(98340),d=e(7745);Q.exports=function(s,t,o,r){function n(p,m){return A.coerce(s,t,d,p,m)}var a=n("x"),i=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var c=n("textposition");T(s,t,r,n,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",i&&!a?"h":"v"),f="v"===h?"x":"y",x="v"===h?"y":"x",v=a&&i?Math.min(A.minRowLength(a)&&A.minRowLength(i)):A.minRowLength(t[f]||[]);if(v){t._length=v,k.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[x]&&n("histfunc"),n("histnorm"),n("autobin"+f),b(s,t,n,o,r),A.coerceSelectionMarkerOpacity(t,n);var g=(t.marker.line||{}).color,y=k.getComponentMethod("errorbars","supplyDefaults");y(s,t,g||l.defaultLine,{axis:"y"}),y(s,t,g||l.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function(Q){"use strict";Q.exports=function(z,e,k,A,l){if(z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(z.z=e.zLabelVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),!(k.cumulative||{}).enabled){var T,b=Array.isArray(l)?A[0].pts[l[0]][l[1]]:A[l].pts;if(z.pointNumbers=b,z.binNumber=z.pointNumber,delete z.pointNumber,delete z.pointIndex,k._indexToPoints){T=[];for(var d=0;d<b.length;d++)T=T.concat(k._indexToPoints[b[d]])}else T=b;z.pointIndices=T}return z}},76440:function(Q,z,e){"use strict";var k=e(95423).hoverPoints,A=e(89298).hoverLabelText;Q.exports=function(l,T,b,d,s){var t=k(l,T,b,d,s);if(t){var o=(l=t[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n="h"===r.orientation?"y":"x";l[n+"Label"]=A(l[n+"a"],[o.ph0,o.ph1],r[n+"hoverformat"])}return t}}},36071:function(Q,z,e){"use strict";Q.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(Q){"use strict";Q.exports={percent:function(z,e){for(var k=z.length,A=100/e,l=0;l<k;l++)z[l]*=A},probability:function(z,e){for(var k=z.length,A=0;A<k;A++)z[A]/=e},density:function(z,e,k,A){var l=z.length;A=A||1;for(var T=0;T<l;T++)z[T]*=k[T]*A},"probability density":function(z,e,k,A){var l=z.length;A&&(e/=A);for(var T=0;T<l;T++)z[T]*=k[T]/e}}},35361:function(Q,z,e){"use strict";var k=e(7745),A=e(17656),l=e(21606),T=e(9012),b=e(12663).axisHoverFormat,d=e(5386).f,s=e(5386).s,t=e(50693),o=e(1426).extendFlat;Q.exports=o({x:k.x,y:k.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:k.histnorm,histfunc:k.histfunc,nbinsx:k.nbinsx,xbins:A("x"),nbinsy:k.nbinsy,ybins:A("y"),autobinx:k.autobinx,autobiny:k.autobiny,bingroup:o({},k.bingroup,{}),xbingroup:o({},k.bingroup,{}),ybingroup:o({},k.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:d({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:o({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(59575),T=e(36362),b=e(42174),d=e(40965),s=e(72138).calcAllAutoBins;function t(n,a,i,c){var h,f=new Array(n);if(c)for(h=0;h<n;h++)f[h]=1/(a[h+1]-a[h]);else{var x=1/i;for(h=0;h<n;h++)f[h]=x}return f}function o(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,i,c,h,f){var x,v=n.length-1,g=new Array(v),y=d(i,c,n,h,f);for(x=0;x<v;x++){var p=(a||[])[x];g[x]=void 0===p?[y(n[x]),y(n[x+1],!0)]:[p,p]}return g}Q.exports=function(n,a){var i,c,h,f,x=A.getFromId(n,a.xaxis),v=A.getFromId(n,a.yaxis),g=a.xcalendar,y=a.ycalendar,p=function(dt){return x.r2c(dt,0,g)},m=function(dt){return v.r2c(dt,0,y)},w=s(n,a,x,"x"),u=w[0],S=w[1],_=s(n,a,v,"y"),E=_[0],L=_[1],C=a._length;S.length>C&&S.splice(C,S.length-C),L.length>C&&L.splice(C,L.length-C);var P=[],I=[],j=[],R="string"==typeof u.size,H="string"==typeof E.size,F=[],U=[],B=R?F:u,N=H?U:E,J=0,Z=[],V=[],W=a.histnorm,X=a.histfunc,K=-1!==W.indexOf("density"),ne="max"===X||"min"===X?null:0,re=l.count,ae=T[W],le=!1,pe=[],xe=[],ye="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ye&&"count"!==X&&(le="avg"===X,re=l[X]);var se=u.size,fe=p(u.start),Ee=p(u.end)+(fe-A.tickIncrement(fe,se,!1,g))/1e6;for(i=fe;i<Ee;i=A.tickIncrement(i,se,!1,g))I.push(ne),F.push(i),le&&j.push(0);F.push(i);var we=I.length,ke=(i-fe)/we,Te=x.c2r(fe+ke/2,0,g),$=E.size,oe=m(E.start),he=m(E.end)+(oe-A.tickIncrement(oe,$,!1,y))/1e6;for(i=oe;i<he;i=A.tickIncrement(i,$,!1,y)){P.push(I.slice()),U.push(i);var me=new Array(we);for(c=0;c<we;c++)me[c]=[];V.push(me),le&&Z.push(j.slice())}U.push(i);var Me=P.length,Ie=(i-oe)/Me,Pe=v.c2r(oe+Ie/2,0,y);K&&(pe=t(I.length,B,ke,R),xe=t(P.length,N,Ie,H)),R||"date"!==x.type||(B=o(p,B)),H||"date"!==v.type||(N=o(m,N));var ze=!0,ce=!0,ge=new Array(we),_e=new Array(Me),De=1/0,He=1/0,Ve=1/0,nt=1/0;for(i=0;i<C;i++){var tt=S[i],at=L[i];h=k.findBin(tt,B),f=k.findBin(at,N),h>=0&&h<we&&f>=0&&f<Me&&(J+=re(h,i,P[f],ye,Z[f]),V[f][h].push(i),ze&&(void 0===ge[h]?ge[h]=tt:ge[h]!==tt&&(ze=!1)),ce&&(void 0===_e[f]?_e[f]=at:_e[f]!==at&&(ce=!1)),De=Math.min(De,tt-F[h]),He=Math.min(He,F[h+1]-tt),Ve=Math.min(Ve,at-U[f]),nt=Math.min(nt,U[f+1]-at))}if(le)for(f=0;f<Me;f++)J+=b(P[f],Z[f]);if(ae)for(f=0;f<Me;f++)ae(P[f],J,pe,xe[f]);return{x:S,xRanges:r(F,ze&&ge,De,He,x,g),x0:Te,dx:ke,y:L,yRanges:r(U,ce&&_e,Ve,nt,v,y),y0:Pe,dy:Ie,z:P,pts:V}}},93888:function(Q,z,e){"use strict";var k=e(71828),A=e(75238),l=e(49901),T=e(1586),b=e(58623),d=e(35361);Q.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,d,a,i)}A(s,t,n,r),!1!==t.visible&&(l(s,t,n,r),T(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),b(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function(Q,z,e){"use strict";var k=e(46248),A=e(89298).hoverLabelText;Q.exports=function(l,T,b,d,s){var t=k(l,T,b,d,s);if(t){var o=(l=t[0]).index,a=l.cd[0],i=a.trace,c=a.xRanges[o[1]],h=a.yRanges[o[0]];return l.xLabel=A(l.xa,[c[0],c[1]],i.xhoverformat),l.yLabel=A(l.ya,[h[0],h[1]],i.yhoverformat),t}}},43905:function(Q,z,e){"use strict";Q.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(Q,z,e){"use strict";var k=e(73972),A=e(71828);Q.exports=function(l,T,b,d){var s=b("x"),t=b("y"),o=A.minRowLength(s),r=A.minRowLength(t);o&&r?(T._length=Math.min(o,r),k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],d),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},99066:function(Q,z,e){"use strict";var k=e(35361),A=e(70600),l=e(50693),T=e(12663).axisHoverFormat,b=e(1426).extendFlat;Q.exports=b({x:k.x,y:k.y,z:k.z,marker:k.marker,histnorm:k.histnorm,histfunc:k.histfunc,nbinsx:k.nbinsx,xbins:k.xbins,nbinsy:k.nbinsy,ybins:k.ybins,autobinx:k.autobinx,autobiny:k.autobiny,bingroup:k.bingroup,xbingroup:k.xbingroup,ybingroup:k.ybingroup,autocontour:A.autocontour,ncontours:A.ncontours,contours:A.contours,line:{color:A.line.color,width:b({},A.line.width,{dflt:.5}),dash:A.line.dash,smoothing:A.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:k.hovertemplate,texttemplate:A.texttemplate,textfont:A.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(Q,z,e){"use strict";var k=e(71828),A=e(75238),l=e(67217),T=e(8724),b=e(58623),d=e(99066);Q.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,d,a,i)}A(s,t,n,r),!1!==t.visible&&(l(s,t,n,function(a){return k.coerce2(s,t,d,a)}),T(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&"heatmap"===t.contours.coloring&&b(n,r))}},35902:function(Q,z,e){"use strict";Q.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(50693),T=e(27670).Y,b=e(34e3),d=e(57564),s=e(45802),t=e(43473),o=e(1426).extendFlat;Q.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:o({colors:d.marker.colors,line:d.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:d.leaf,pathbar:s.pathbar,text:b.text,textinfo:d.textinfo,texttemplate:A({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:k({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:d.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function(Q,z,e){"use strict";var k=e(74875);z.name="icicle",z.plot=function(A,l,T,b){k.plotBasePlot(z.name,A,l,T,b)},z.clean=function(A,l,T,b){k.cleanBasePlot(z.name,A,l,T,b)}},46584:function(Q,z,e){"use strict";var k=e(52147);z.y=function(A,l){return k.calc(A,l)},z.T=function(A){return k._runCrossTraceCalc("icicle",A)}},56524:function(Q,z,e){"use strict";var k=e(71828),A=e(46291),l=e(7901),T=e(27670).c,b=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;Q.exports=function(r,n,a,i){function c(p,m){return k.coerce(r,n,A,p,m)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var x=c("values");c(x&&x.length?"branchvalues":"count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");b(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor),c("marker.colors");var y=n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis;y&&o(r,n,i,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",y?1:.7),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*d),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},90666:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(63893),b=e(21538),d=e(82454).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;Q.exports=function(a,i,c,h,f){var x=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,I=i[0].trace,j=-1!==I.textposition.indexOf("left"),R=-1!==I.textposition.indexOf("right"),H=-1!==I.textposition.indexOf("bottom"),F=b(c,[x,v],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),U=1/0,B=-1/0;F.forEach(function(W){var X=W.depth;X>=I._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(U=Math.min(U,X),B=Math.max(B,X))}),h=h.data(F,t.getPtId),I._maxVisibleLayers=isFinite(B)?B-U+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[x,v],p),h.order();var N=null;if(u&&L){var J=t.getPtId(L);h.each(function(W){null===N&&t.getPtId(W)===J&&(N={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var Z=function(){return N||{x0:0,x1:x,y0:0,y1:v}},V=h;return u&&(V=V.transition().each("end",function(){var W=k.select(this);t.setSliceCursor(W,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(W){W._x0=g(W.x0),W._x1=g(W.x1),W._y0=y(W.y0),W._y1=y(W.y1),W._hoverX=g(W.x1-I.tiling.pad),W._hoverY=y(H?W.y1-I.tiling.pad/2:W.y0+I.tiling.pad/2);var X=k.select(this),K=A.ensureSingle(X,"path","surface",function(le){le.style("pointer-events",C?"none":"all")});u?K.transition().attrTween("d",function(le){var pe=_(le,n,Z(),[x,v],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(xe){return p(pe(xe))}}):K.attr("d",p),X.call(o,c,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),K.call(d,W,I,{hovered:!1}),W._text=W.x0===W.x1||W.y0===W.y1?"":r(W,c,I,i,P)||"";var ne=A.ensureSingle(X,"g","slicetext"),re=A.ensureSingle(ne,"text","",function(le){le.attr("data-notex",1)}),ae=A.ensureUniformFontSize(a,t.determineTextFont(I,W,P.font));re.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":j?"start":"middle").call(l.font,ae).call(T.convertToTspans,a),W.textBB=l.bBox(re.node()),W.transform=m(W,{fontSize:ae.size}),W.transform.fontSize=ae.size,u?re.transition().attrTween("transform",function(le){var pe=E(le,n,Z(),[x,v]);return function(xe){return w(pe(xe))}}):re.attr("transform",w(W))}),N}},69816:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function(Q){"use strict";Q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(Q,z,e){"use strict";var k=e(71828),A=e(92894);Q.exports=function(l,T){function b(d,s){return k.coerce(l,T,A,d,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},21538:function(Q,z,e){"use strict";var k=e(674),A=e(14102);Q.exports=function(l,T,b){var d=b.flipX,s=b.flipY,t="h"===b.orientation,o=b.maxDepth,r=T[0],n=T[1];o&&(r=(l.height+1)*T[0]/Math.min(l.height+1,o),n=(l.height+1)*T[1]/Math.min(l.height+1,o));var a=k.partition().padding(b.pad.inner).size(t?[T[1],r]:[T[0],n])(l);return(t||d||s)&&A(a,T,{swapXY:t,flipX:d,flipY:s}),a}},85596:function(Q,z,e){"use strict";var k=e(80694),A=e(90666);Q.exports=function(l,T,b,d){return k(l,T,b,d,{type:"icicle",drawDescendants:A})}},82454:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(71828),T=e(72597).resizeText;function b(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||A.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(A.fill,o.color).call(A.stroke,a).style("opacity",r?t.leaf.opacity:null)}Q.exports={style:function(d){var s=d._fullLayout._iciclelayer.selectAll(".trace");T(d,s,"icicle"),s.each(function(t){var o=k.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){k.select(this).call(b,n,r)})})},styleOne:b}},17230:function(Q,z,e){"use strict";for(var k=e(9012),A=e(5386).f,l=e(1426).extendFlat,T=e(51877).colormodel,b=["rgb","rgba","rgba256","hsl","hsla"],d=[],s=[],t=0;t<b.length;t++){var o=T[b[t]];d.push("For the `"+b[t]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),s.push("For the `"+b[t]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].")}Q.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:b,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},k.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:A({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(Q,z,e){"use strict";var k=e(71828),A=e(51877),l=e(92770),T=e(89298),b=e(71828).maxRowLength,d=e(67395).A;function s(o,r,n,a){return function(i){return k.constrain((i-o)*r,n,a)}}function t(o,r){return function(n){return k.constrain(n,o,r)}}Q.exports=function(o,r){var n,a;if(r._hasZ)n=r.z.length,a=b(r.z);else if(r._hasSource){var i=d(r.source);n=i.height,a=i.width}var c,h=T.getFromId(o,r.xaxis||"x"),f=T.getFromId(o,r.yaxis||"y"),x=h.d2c(r.x0)-r.dx/2,v=f.d2c(r.y0)-r.dy/2,g=[x,x+a*r.dx],y=[v,v+n*r.dy];if(h&&"log"===h.type)for(c=0;c<a;c++)g.push(x+c*r.dx);if(f&&"log"===f.type)for(c=0;c<n;c++)y.push(v+c*r.dy);return r._extremes[h._id]=T.findExtremes(h,g),r._extremes[f._id]=T.findExtremes(f,y),r._scaler=function(p){var m=A.colormodel[p.colormodel],w=(m.colormodel||p.colormodel).length;p._sArray=[];for(var u=0;u<w;u++)p._sArray.push(m.min[u]!==p.zmin[u]||m.max[u]!==p.zmax[u]?s(p.zmin[u],(m.max[u]-m.min[u])/(p.zmax[u]-p.zmin[u]),m.min[u],m.max[u]):t(m.min[u],m.max[u]));return function(S){for(var _=S.slice(0,w),E=0;E<w;E++){var L=_[E];if(!l(L))return!1;_[E]=p._sArray[E](L)}return _}}(r),[{x0:x,y0:v,z:r.z,w:a,h:n}]}},51877:function(Q){"use strict";Q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(z){return z.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(z){var e=z.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(z){var e=z.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},13245:function(Q,z,e){"use strict";var k=e(71828),A=e(17230),l=e(51877),T=e(25095).IMAGE_URL_PREFIX;Q.exports=function(b,d){function s(r,n){return k.coerce(b,d,A,r,n)}s("source"),d.source&&!d.source.match(T)&&delete d.source,d._hasSource=!!d.source;var t,o=s("z");d._hasZ=!(void 0===o||!o.length||!o[0]||!o[0].length),d._hasZ||d._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),d._hasZ?(s("colormodel","rgb"),s("zmin",(t=l.colormodel[d.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):d._hasSource&&(d.colormodel="rgba256",d.zmin=(t=l.colormodel[d.colormodel]).zminDflt,d.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),d._length=null):d.visible=!1}},30835:function(Q){"use strict";Q.exports=function(z,e){return"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z.color=e.color,z.colormodel=e.trace.colormodel,z.z||(z.z=e.color),z}},67395:function(Q,z,e){"use strict";var k=e(33575),A=e(25095).IMAGE_URL_PREFIX,l=e(12856).Buffer;z.A=function(T){var b=T.replace(A,""),d=new l(b,"base64");return k(d)}},28749:function(Q,z,e){"use strict";var k=e(30211),A=e(71828),l=e(51877);Q.exports=function(T,b,d){var s=T.cd[0],t=s.trace,o=T.xa,r=T.ya;if(!(k.inbox(b-s.x0,b-(s.x0+s.w*t.dx),0)>0||k.inbox(d-s.y0,d-(s.y0+s.h*t.dy),0)>0)){var n,a=Math.floor((b-s.x0)/t.dx),i=Math.floor(Math.abs(d-s.y0)/t.dy);if(t._hasZ?n=s.z[i][a]:t._hasSource&&(n=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(a,i,1,1).data),n){var c,h=s.hi||t.hoverinfo;if(h){var f=h.split("+");-1!==f.indexOf("all")&&(f=["color"]),-1!==f.indexOf("color")&&(c=!0)}var x,v=l.colormodel[t.colormodel],g=v.colormodel||t.colormodel,y=g.length,p=t._scaler(n),m=v.suffix,w=[];(t.hovertemplate||c)&&(w.push("["+[p[0]+m[0],p[1]+m[1],p[2]+m[2]].join(", ")),4===y&&w.push(", "+p[3]+m[3]),w.push("]"),w=w.join(""),T.extraText=g.toUpperCase()+": "+w),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[i])?x=t.hovertext[i][a]:Array.isArray(t.text)&&Array.isArray(t.text[i])&&(x=t.text[i][a]);var u=r.c2p(s.y0+(i+.5)*t.dy),S=s.x0+(a+.5)*t.dx,_=s.y0+(i+.5)*t.dy,E="["+n.slice(0,t.colormodel.length).join(", ")+"]";return[A.extendFlat(T,{index:[i,a],x0:o.c2p(s.x0+a*t.dx),x1:o.c2p(s.x0+(a+1)*t.dx),y0:u,y1:u,color:p,xVal:S,xLabelVal:S,yVal:_,yLabelVal:_,zLabelVal:E,text:x,hovertemplateLabels:{zLabel:E,colorLabel:w,"color[0]Label":p[0]+m[0],"color[1]Label":p[1]+m[1],"color[2]Label":p[2]+m[2],"color[3]Label":p[3]+m[3]}})]}}}},94507:function(Q,z,e){"use strict";Q.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=A.strTranslate,T=e(77922),b=e(51877),d=A.isIOS()||A.isSafari()||A.isIE();Q.exports=function(s,t,o,r){var n=t.xaxis,a=t.yaxis,i=!(d||s._context._exportedPlot);A.makeTraceGroups(r,o,"im").each(function(c){var h=k.select(this),f=c[0],x=f.trace,v=("fast"===x.zsmooth||!1===x.zsmooth&&i)&&!x._hasZ&&x._hasSource&&"linear"===n.type&&"linear"===a.type;x._realImage=v;var g,y,p,m,w,u,S=f.z,_=f.x0,E=f.y0,L=f.w,C=f.h,P=x.dx,I=x.dy;for(u=0;void 0===g&&u<L;)g=n.c2p(_+u*P),u++;for(u=L;void 0===y&&u>0;)y=n.c2p(_+u*P),u--;for(u=0;void 0===m&&u<C;)m=a.c2p(E+u*I),u++;for(u=C;void 0===w&&u>0;)w=a.c2p(E+u*I),u--;y<g&&(p=y,y=g,g=p),w<m&&(p=m,m=w,w=p),v||(g=Math.max(-.5*n._length,g),y=Math.min(1.5*n._length,y),m=Math.max(-.5*a._length,m),w=Math.min(1.5*a._length,w));var j=Math.round(y-g),R=Math.round(w-m);if(j<=0||R<=0)h.selectAll("image").data([]).exit().remove();else{var H=h.selectAll("image").data([c]);H.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),H.exit().remove();var F=!1===x.zsmooth?b.pixelatedStyle:"";if(v){var U=A.simpleMap(n.range,n.r2l),B=A.simpleMap(a.range,a.r2l),N=U[1]<U[0],J=B[1]>B[0];if(N||J){var Z=g+j/2,V=m+R/2;F+="transform:"+l(Z+"px",V+"px")+"scale("+(N?-1:1)+","+(J?-1:1)+")"+l(-Z+"px",-V+"px")+";"}}H.attr("style",F);var W=new Promise(function(K){if(x._hasZ)K();else if(x._hasSource)if(x._canvas&&x._canvas.el.width===L&&x._canvas.el.height===C&&x._canvas.source===x.source)K();else{var ne=document.createElement("canvas");ne.width=L,ne.height=C;var re=ne.getContext("2d",{willReadFrequently:!0});x._image=x._image||new Image;var ae=x._image;ae.onload=function(){re.drawImage(ae,0,0),x._canvas={el:ne,source:x.source},K()},ae.setAttribute("src",x.source)}}).then(function(){var K;if(x._hasZ)K=X(function(ae,le){return S[le][ae]}).toDataURL("image/png");else if(x._hasSource)if(v)K=x.source;else{var re=x._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,C).data;K=X(function(ae,le){var pe=4*(le*L+ae);return[re[pe],re[pe+1],re[pe+2],re[pe+3]]}).toDataURL("image/png")}H.attr({"xlink:href":K,height:R,width:j,x:g,y:m})});s._promises.push(W)}function X(K){var ne=document.createElement("canvas");ne.width=j,ne.height=R;var re,ae=ne.getContext("2d",{willReadFrequently:!0}),le=function(Te){return A.constrain(Math.round(n.c2p(_+Te*P)-g),0,j)},pe=function(Te){return A.constrain(Math.round(a.c2p(E+Te*I)-m),0,R)},xe=b.colormodel[x.colormodel],ye=xe.colormodel||x.colormodel,se=xe.fmt;for(u=0;u<f.w;u++){var fe=le(u),Ee=le(u+1);if(Ee!==fe&&!isNaN(Ee)&&!isNaN(fe))for(var de=0;de<f.h;de++){var we=pe(de),ke=pe(de+1);ke===we||isNaN(ke)||isNaN(we)||!K(u,de)||(re=x._scaler(K(u,de)),ae.fillStyle=re?ye+"("+se(re).join(",")+")":"rgba(0,0,0,0)",ae.fillRect(fe,we,Ee-fe,ke-we))}}return ne}})}},12826:function(Q,z,e){"use strict";var k=e(39898);Q.exports=function(A){k.select(A).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function(Q,z,e){"use strict";var k=e(1426).extendFlat,A=e(1426).extendDeep,l=e(30962).overrideAll,T=e(41940),b=e(22399),d=e(27670).Y,s=e(13838),t=e(44467).templatedArray,o=e(22372),r=e(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},i={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=t("step",A({},a,{range:i}));Q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:d({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:k({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:k({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:o.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:o.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:k({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:A({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:i,visible:k({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:k({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:k({},a.line.color,{}),width:k({},a.line.width,{dflt:1}),editType:"plot"},thickness:k({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(Q,z,e){"use strict";var k=e(74875);z.name="indicator",z.plot=function(A,l,T,b){k.plotBasePlot(z.name,A,l,T,b)},z.clean=function(A,l,T,b){k.cleanBasePlot(z.name,A,l,T,b)}},24667:function(Q){"use strict";Q.exports={calc:function(z,e){var k=[],A=e.value;"number"!=typeof e._lastValue&&(e._lastValue=e.value);var l=e._lastValue,T=l;return e._hasDelta&&"number"==typeof e.delta.reference&&(T=e.delta.reference),k[0]={y:A,lastY:l,delta:A-T,relativeDelta:(A-T)/T},k}}},84577:function(Q){"use strict";Q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(Q,z,e){"use strict";var k=e(71828),A=e(54846),l=e(27670).c,T=e(44467),b=e(85501),d=e(84577),s=e(26218),t=e(38701),o=e(96115),r=e(89426);function n(a,i){function c(h,f){return k.coerce(a,i,A.gauge.steps,h,f)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}Q.exports={supplyDefaults:function(a,i,c,h){function f(L,C){return k.coerce(a,i,A,L,C)}l(i,h,f),f("mode"),i._hasNumber=-1!==i.mode.indexOf("number"),i._hasDelta=-1!==i.mode.indexOf("delta"),i._hasGauge=-1!==i.mode.indexOf("gauge");var x=f("value");i._range=[0,"number"==typeof x?1.5*x:1];var v,g,y,p,m,w,u=new Array(2);function S(L,C){return k.coerce(y,p,A.gauge,L,C)}function _(L,C){return k.coerce(m,w,A.gauge.axis,L,C)}if(i._hasNumber&&(f("number.valueformat"),f("number.font.color",h.font.color),f("number.font.family",h.font.family),f("number.font.size"),void 0===i.number.font.size&&(i.number.font.size=d.defaultNumberFontSize,u[0]=!0),f("number.prefix"),f("number.suffix"),v=i.number.font.size),i._hasDelta&&(f("delta.font.color",h.font.color),f("delta.font.family",h.font.family),f("delta.font.size"),void 0===i.delta.font.size&&(i.delta.font.size=(i._hasNumber?.5:1)*(v||d.defaultNumberFontSize),u[1]=!0),f("delta.reference",i.value),f("delta.relative"),f("delta.valueformat",i.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),g=i.delta.font.size),i._scaleNumbers=(!i._hasNumber||u[0])&&(!i._hasDelta||u[1])||!1,f("title.font.color",h.font.color),f("title.font.family",h.font.family),f("title.font.size",.25*(v||g||d.defaultNumberFontSize)),f("title.text"),i._hasGauge){(y=a.gauge)||(y={}),p=T.newContainer(i,"gauge"),S("shape"),(i._isBullet="bullet"===i.gauge.shape)||f("title.align","center"),(i._isAngular="angular"===i.gauge.shape)||f("align","center"),S("bgcolor",h.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",d.valueThickness*("bullet"===i.gauge.shape?.5:1)),b(y,p,{name:"steps",handleItemDefaults:n}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),m={},y&&(m=y.axis||{}),w=T.newContainer(p,"axis"),_("visible"),i._range=_("range",i._range);var E={outerTicks:!0};s(m,w,_,"linear"),r(m,w,_,"linear",E),o(m,w,_,"linear",E),t(m,w,_,E)}else f("title.align","center"),f("align","center"),i._isAngular=i._isBullet=!1;i._length=null}}},15154:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function(Q,z,e){"use strict";var k=e(39898),A=e(81684).sX,l=e(81684).k4,T=e(71828),b=T.strScale,d=T.strTranslate,s=T.rad2deg,t=e(18783).MID_SHIFT,o=e(91424),r=e(84577),n=e(63893),a=e(89298),i=e(71453),c=e(52830),h=e(13838),f=e(7901),x={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},g=/[yzafpn\xb5mkMGTPEZY]/;function y(_){return _&&_.duration>0}function p(_){_.each(function(E){f.stroke(k.select(this),E.line.color)}).each(function(E){f.fill(k.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(_,E,L){var C=_._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),I={type:"linear",_id:"x"+E._id},j={letter:"x",font:C.font,noHover:!0,noTickson:!0};function R(H,F){return T.coerce(P,I,h,H,F)}return i(P,I,R,j,C),c(P,I,R,j),I}function w(_,E,L){return[Math.min(E/_.width,L/_.height),_,E+"x"+L]}function u(_,E,L,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),I=k.select(P);return I.text(_).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",_).call(n.convertToTspans,C).call(o.font,E),o.bBox(I.node())}function S(_,E,L,C,P,I){var j="_cache"+E;_[j]&&_[j].key===P||(_[j]={key:P,value:L});var R=T.aggNums(I,null,[_[j].value,C],2);return _[j].value=R,R}Q.exports=function(_,E,L,C){var P,I=_._fullLayout;y(L)&&C&&(P=C()),T.makeTraceGroups(I._indicatorlayer,E,"trace").each(function(j){var R,H,F,U,B,N=j[0].trace,J=k.select(this),Z=N._hasGauge,V=N._isAngular,W=N._isBullet,X=N.domain,K={w:I._size.w*(X.x[1]-X.x[0]),h:I._size.h*(X.y[1]-X.y[0]),l:I._size.l+I._size.w*X.x[0],r:I._size.r+I._size.w*(1-X.x[1]),t:I._size.t+I._size.h*(1-X.y[1]),b:I._size.b+I._size.h*X.y[0]},ne=K.l+K.w/2,re=K.t+K.h/2,ae=Math.min(K.w/2,K.h),le=r.innerRadius*ae,pe=N.align||"center";if(H=re,Z){if(V&&(R=ne,H=re+ae/2,F=function(ke){return Te=ke,[($=.9*le)/Math.sqrt(Te.width/2*(Te.width/2)+Te.height*Te.height),Te,$];var Te,$}),W){var xe=r.bulletPadding,ye=1-r.bulletNumberDomainSize+xe;R=K.l+(ye+(1-ye)*v[pe])*K.w,F=function(ke){return w(ke,(r.bulletNumberDomainSize-xe)*K.w,K.h)}}}else R=K.l+v[pe]*K.w,F=function(ke){return w(ke,K.w,K.h)};(function(ke,Te,$,oe){var he,me,Me,Ie=$[0].trace,Pe=oe.numbersX,ze=oe.numbersY,ce=Ie.align||"center",ge=x[ce],_e=oe.transitionOpts,De=oe.onComplete,He=T.ensureSingle(Te,"g","numbers"),Ve=[];Ie._hasNumber&&Ve.push("number"),Ie._hasDelta&&(Ve.push("delta"),"left"===Ie.delta.position&&Ve.reverse());var nt=He.selectAll("text").data(Ve);function tt(Ot,Ht,It,Ge){if(!Ot.match("s")||It>=0==Ge>=0||Ht(It).slice(-1).match(g)||Ht(Ge).slice(-1).match(g))return Ht;var Ze=Ot.slice().replace("s","f").replace(/\d+/,function(Ye){return parseInt(Ye)-1}),Be=m(ke,{tickformat:Ze});return function(Ye){return Math.abs(Ye)<1?a.tickText(Be,Ye).text:Ht(Ye)}}nt.enter().append("text"),nt.attr("text-anchor",function(){return ge}).attr("class",function(Ot){return Ot}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),nt.exit().remove();var at,dt=Ie.mode+Ie.align;if(Ie._hasDelta&&(at=function(){var Ot=m(ke,{tickformat:Ie.delta.valueformat},Ie._range);Ot.setScale(),a.prepTicks(Ot);var Ht=function(Re){return a.tickText(Ot,Re).text},It=Ie.delta.suffix,Ge=Ie.delta.prefix,Ze=function(Re){return Ie.delta.relative?Re.relativeDelta:Re.delta},Be=function(Re,Ke){return 0===Re||"number"!=typeof Re||isNaN(Re)?"-":(Re>0?Ie.delta.increasing.symbol:Ie.delta.decreasing.symbol)+Ge+Ke(Re)+It},Ye=function(Re){return Re.delta>=0?Ie.delta.increasing.color:Ie.delta.decreasing.color};void 0===Ie._deltaLastValue&&(Ie._deltaLastValue=Ze($[0]));var rt=He.select("text.delta");function Se(){rt.text(Be(Ze($[0]),Ht)).call(f.fill,Ye($[0])).call(n.convertToTspans,ke)}return rt.call(o.font,Ie.delta.font).call(f.fill,Ye({delta:Ie._deltaLastValue})),y(_e)?rt.transition().duration(_e.duration).ease(_e.easing).tween("text",function(){var Re=k.select(this),Ke=Ze($[0]),st=Ie._deltaLastValue,ct=tt(Ie.delta.valueformat,Ht,st,Ke),Tt=l(st,Ke);return Ie._deltaLastValue=Ke,function(Et){Re.text(Be(Tt(Et),ct)),Re.call(f.fill,Ye({delta:Tt(Et)}))}}).each("end",function(){Se(),De&&De()}).each("interrupt",function(){Se(),De&&De()}):Se(),me=u(Be(Ze($[0]),Ht),Ie.delta.font,ge,ke),rt}(),dt+=Ie.delta.position+Ie.delta.font.size+Ie.delta.font.family+Ie.delta.valueformat,dt+=Ie.delta.increasing.symbol+Ie.delta.decreasing.symbol,Me=me),Ie._hasNumber&&(function(){var Ot=m(ke,{tickformat:Ie.number.valueformat},Ie._range);Ot.setScale(),a.prepTicks(Ot);var Ht=function(Ye){return a.tickText(Ot,Ye).text},It=Ie.number.suffix,Ge=Ie.number.prefix,Ze=He.select("text.number");function Be(){var Ye="number"==typeof $[0].y?Ge+Ht($[0].y)+It:"-";Ze.text(Ye).call(o.font,Ie.number.font).call(n.convertToTspans,ke)}y(_e)?Ze.transition().duration(_e.duration).ease(_e.easing).each("end",function(){Be(),De&&De()}).each("interrupt",function(){Be(),De&&De()}).attrTween("text",function(){var Ye=k.select(this),rt=l($[0].lastY,$[0].y);Ie._lastValue=$[0].y;var Se=tt(Ie.number.valueformat,Ht,$[0].lastY,$[0].y);return function(Re){Ye.text(Ge+Se(rt(Re))+It)}}):Be(),he=u(Ge+Ht($[0].y)+It,Ie.number.font,ge,ke)}(),dt+=Ie.number.font.size+Ie.number.font.family+Ie.number.valueformat+Ie.number.suffix+Ie.number.prefix,Me=he),Ie._hasDelta&&Ie._hasNumber){var wt,bt,_t=[(he.left+he.right)/2,(he.top+he.bottom)/2],Lt=[(me.left+me.right)/2,(me.top+me.bottom)/2],Ct=.75*Ie.delta.font.size;"left"===Ie.delta.position&&(wt=S(Ie,"deltaPos",0,-1*(he.width*v[Ie.align]+me.width*(1-v[Ie.align])+Ct),dt,Math.min),bt=_t[1]-Lt[1],Me={width:he.width+me.width+Ct,height:Math.max(he.height,me.height),left:me.left+wt,right:he.right,top:Math.min(he.top,me.top+bt),bottom:Math.max(he.bottom,me.bottom+bt)}),"right"===Ie.delta.position&&(wt=S(Ie,"deltaPos",0,he.width*(1-v[Ie.align])+me.width*v[Ie.align]+Ct,dt,Math.max),bt=_t[1]-Lt[1],Me={width:he.width+me.width+Ct,height:Math.max(he.height,me.height),left:he.left,right:me.right+wt,top:Math.min(he.top,me.top+bt),bottom:Math.max(he.bottom,me.bottom+bt)}),"bottom"===Ie.delta.position&&(wt=null,bt=me.height,Me={width:Math.max(he.width,me.width),height:he.height+me.height,left:Math.min(he.left,me.left),right:Math.max(he.right,me.right),top:he.bottom-he.height,bottom:he.bottom+me.height}),"top"===Ie.delta.position&&(wt=null,bt=he.top,Me={width:Math.max(he.width,me.width),height:he.height+me.height,left:Math.min(he.left,me.left),right:Math.max(he.right,me.right),top:he.bottom-he.height-me.height,bottom:he.bottom}),at.attr({dx:wt,dy:bt})}(Ie._hasNumber||Ie._hasDelta)&&He.attr("transform",function(){var Ht,Ot=oe.numbersScaler(Me),It=S(Ie,"numbersScale",1,Ot[0],dt+=Ot[2],Math.min);Ie._scaleNumbers||(It=1),Ie._numbersTop=It*Me.top+(Ht=Ie._isAngular?ze-It*Me.bottom:ze-It*(Me.top+Me.bottom)/2);var Ge=Me[ce];"center"===ce&&(Ge=(Me.left+Me.right)/2);var Ze=Pe-It*Ge;return Ze=S(Ie,"numbersTranslate",0,Ze,dt,Math.max),d(Ze,Ht)+b(It)})})(_,J,j,{numbersX:R,numbersY:H,numbersScaler:F,transitionOpts:L,onComplete:P}),Z&&(U={range:N.gauge.axis.range,color:N.gauge.bgcolor,line:{color:N.gauge.bordercolor,width:0},thickness:1},B={range:N.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:N.gauge.bordercolor,width:N.gauge.borderwidth},thickness:1});var se=J.selectAll("g.angular").data(V?j:[]);se.exit().remove();var fe=J.selectAll("g.angularaxis").data(V?j:[]);fe.exit().remove(),V&&function(ke,Te,$,oe){var he,me,Me,Ie,Pe=$[0].trace,ze=oe.size,ce=oe.radius,ge=oe.innerRadius,_e=oe.gaugeBg,De=oe.gaugeOutline,He=[ze.l+ze.w/2,ze.t+ze.h/2+ce/2],Ve=oe.gauge,nt=oe.layer,tt=oe.transitionOpts,at=oe.onComplete,dt=Math.PI/2;function wt(Et){var At=Pe.gauge.axis.range[0],ht=(Et-At)/(Pe.gauge.axis.range[1]-At)*Math.PI-dt;return ht<-dt?-dt:ht>dt?dt:ht}function bt(Et){return k.svg.arc().innerRadius((ge+ce)/2-Et/2*(ce-ge)).outerRadius((ge+ce)/2+Et/2*(ce-ge)).startAngle(-dt)}function _t(Et){Et.attr("d",function(At){return bt(At.thickness).startAngle(wt(At.range[0])).endAngle(wt(At.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",d(He[0],He[1])),nt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),nt.selectAll("g.xangularaxistick,path,text").remove(),(he=m(ke,Pe.gauge.axis)).type="linear",he.range=Pe.gauge.axis.range,he._id="xangularaxis",he.ticklabeloverflow="allow",he.setScale();var Lt=function(Et){return(he.range[0]-Et.x)/(he.range[1]-he.range[0])*Math.PI+Math.PI},Ct={},Ot=a.makeLabelFns(he,0).labelStandoff;Ct.xFn=function(Et){var At=Lt(Et);return Math.cos(At)*Ot},Ct.yFn=function(Et){var At=Lt(Et),ht=Math.sin(At)>0?.2:1;return-Math.sin(At)*(Ot+Et.fontSize*ht)+Math.abs(Math.cos(At))*(Et.fontSize*t)},Ct.anchorFn=function(Et){var At=Lt(Et),ht=Math.cos(At);return Math.abs(ht)<.1?"middle":ht>0?"start":"end"},Ct.heightFn=function(Et,At,ht){var pt=Lt(Et);return-.5*(1+Math.sin(pt))*ht};var Ht=function(Et){return d(He[0]+ce*Math.cos(Et),He[1]-ce*Math.sin(Et))};Me=function(Et){return Ht(Lt(Et))},me=a.calcTicks(he),Ie=a.getTickSigns(he)[2],he.visible&&(a.drawTicks(ke,he,{vals:me,layer:nt,path:"M"+(Ie="inside"===he.ticks?-1:1)*((he.linewidth||1)/2)+",0h"+Ie*he.ticklen,transFn:function(Et){var At=Lt(Et);return Ht(At)+"rotate("+-s(At)+")"}}),a.drawLabels(ke,he,{vals:me,layer:nt,transFn:Me,labelFns:Ct}));var Ge=[_e].concat(Pe.gauge.steps),Ze=Ve.selectAll("g.bg-arc").data(Ge);Ze.enter().append("g").classed("bg-arc",!0).append("path"),Ze.select("path").call(_t).call(p),Ze.exit().remove();var Be=bt(Pe.gauge.bar.thickness),Ye=Ve.selectAll("g.value-arc").data([Pe.gauge.bar]);Ye.enter().append("g").classed("value-arc",!0).append("path");var rt,Se,Re,Ke=Ye.select("path");y(tt)?(Ke.transition().duration(tt.duration).ease(tt.easing).each("end",function(){at&&at()}).each("interrupt",function(){at&&at()}).attrTween("d",(rt=Be,Se=wt($[0].lastY),Re=wt($[0].y),function(){var Et=A(Se,Re);return function(At){return rt.endAngle(Et(At))()}})),Pe._lastValue=$[0].y):Ke.attr("d","number"==typeof $[0].y?Be.endAngle(wt($[0].y)):"M0,0Z"),Ke.call(p),Ye.exit().remove(),Ge=[];var st=Pe.gauge.threshold.value;(st||0===st)&&Ge.push({range:[st,st],color:Pe.gauge.threshold.color,line:{color:Pe.gauge.threshold.line.color,width:Pe.gauge.threshold.line.width},thickness:Pe.gauge.threshold.thickness});var ct=Ve.selectAll("g.threshold-arc").data(Ge);ct.enter().append("g").classed("threshold-arc",!0).append("path"),ct.select("path").call(_t).call(p),ct.exit().remove();var Tt=Ve.selectAll("g.gauge-outline").data([De]);Tt.enter().append("g").classed("gauge-outline",!0).append("path"),Tt.select("path").call(_t).call(p),Tt.exit().remove()}(_,0,j,{radius:ae,innerRadius:le,gauge:se,layer:fe,size:K,gaugeBg:U,gaugeOutline:B,transitionOpts:L,onComplete:P});var Ee=J.selectAll("g.bullet").data(W?j:[]);Ee.exit().remove();var de=J.selectAll("g.bulletaxis").data(W?j:[]);de.exit().remove(),W&&function(ke,Te,$,oe){var he,me,Me,Ie,Pe,ze=$[0].trace,ce=oe.gauge,ge=oe.layer,_e=oe.gaugeBg,De=oe.gaugeOutline,He=oe.size,Ve=ze.domain,nt=oe.transitionOpts,tt=oe.onComplete;ce.enter().append("g").classed("bullet",!0),ce.attr("transform",d(He.l,He.t)),ge.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ge.selectAll("g.xbulletaxistick,path,text").remove();var at=He.h,dt=ze.gauge.bar.thickness*at,wt=Ve.x[0],bt=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(ze._hasNumber||ze._hasDelta?1-r.bulletNumberDomainSize:1);function _t(Ze){Ze.attr("width",function(Be){return Math.max(0,he.c2p(Be.range[1])-he.c2p(Be.range[0]))}).attr("x",function(Be){return he.c2p(Be.range[0])}).attr("y",function(Be){return.5*(1-Be.thickness)*at}).attr("height",function(Be){return Be.thickness*at})}(he=m(ke,ze.gauge.axis))._id="xbulletaxis",he.domain=[wt,bt],he.setScale(),me=a.calcTicks(he),Me=a.makeTransTickFn(he),Ie=a.getTickSigns(he)[2],Pe=He.t+He.h,he.visible&&(a.drawTicks(ke,he,{vals:"inside"===he.ticks?a.clipEnds(he,me):me,layer:ge,path:a.makeTickPath(he,Pe,Ie),transFn:Me}),a.drawLabels(ke,he,{vals:me,layer:ge,transFn:Me,labelFns:a.makeLabelFns(he,Pe)}));var Lt=[_e].concat(ze.gauge.steps),Ct=ce.selectAll("g.bg-bullet").data(Lt);Ct.enter().append("g").classed("bg-bullet",!0).append("rect"),Ct.select("rect").call(_t).call(p),Ct.exit().remove();var Ot=ce.selectAll("g.value-bullet").data([ze.gauge.bar]);Ot.enter().append("g").classed("value-bullet",!0).append("rect"),Ot.select("rect").attr("height",dt).attr("y",(at-dt)/2).call(p),y(nt)?Ot.select("rect").transition().duration(nt.duration).ease(nt.easing).each("end",function(){tt&&tt()}).each("interrupt",function(){tt&&tt()}).attr("width",Math.max(0,he.c2p(Math.min(ze.gauge.axis.range[1],$[0].y)))):Ot.select("rect").attr("width","number"==typeof $[0].y?Math.max(0,he.c2p(Math.min(ze.gauge.axis.range[1],$[0].y))):0),Ot.exit().remove();var Ht=$.filter(function(){return ze.gauge.threshold.value||0===ze.gauge.threshold.value}),It=ce.selectAll("g.threshold-bullet").data(Ht);It.enter().append("g").classed("threshold-bullet",!0).append("line"),It.select("line").attr("x1",he.c2p(ze.gauge.threshold.value)).attr("x2",he.c2p(ze.gauge.threshold.value)).attr("y1",(1-ze.gauge.threshold.thickness)/2*at).attr("y2",(1-(1-ze.gauge.threshold.thickness)/2)*at).call(f.stroke,ze.gauge.threshold.line.color).style("stroke-width",ze.gauge.threshold.line.width),It.exit().remove();var Ge=ce.selectAll("g.gauge-outline").data([De]);Ge.enter().append("g").classed("gauge-outline",!0).append("rect"),Ge.select("rect").call(_t).call(p),Ge.exit().remove()}(_,0,j,{gauge:Ee,layer:de,size:K,gaugeBg:U,gaugeOutline:B,transitionOpts:L,onComplete:P});var we=J.selectAll("text.title").data(j);we.exit().remove(),we.enter().append("text").classed("title",!0),we.attr("text-anchor",function(){return W?x.right:x[N.title.align]}).text(N.title.text).call(o.font,N.title.font).call(n.convertToTspans,_),we.attr("transform",function(){var ke,Te=K.l+K.w*v[N.title.align],$=r.titlePadding,oe=o.bBox(we.node());return Z?(V&&(ke=N.gauge.axis.visible?o.bBox(fe.node()).top-$-oe.bottom:K.t+K.h/2-ae/2-oe.bottom-$),W&&(ke=H-(oe.top+oe.bottom)/2,Te=K.l-r.bulletPadding*K.w)):ke=N._numbersTop-$-oe.bottom,d(Te,ke)})})}},16249:function(Q,z,e){"use strict";var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),b=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll,t=Q.exports=s(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),valuehoverformat:A("value",1),showlegend:d({},b.showlegend,{dflt:!1})},k("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:d({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function(Q,z,e){"use strict";var k=e(78803),A=e(88489).processGrid,l=e(88489).filter;Q.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=l(b.x,b._len),b._y=l(b.y,b._len),b._z=l(b.z,b._len),b._value=l(b.value,b._len);var d=A(b);b._gridFill=d.fill,b._Xs=d.Xs,b._Ys=d.Ys,b._Zs=d.Zs,b._len=d.len;for(var s=1/0,t=-1/0,o=0;o<b._len;o++){var r=b._value[o];s=Math.min(s,r),t=Math.max(t,r)}b._minValues=s,b._maxValues=t,b._vMin=null==b.isomin?s:b.isomin,b._vMax=void 0===b.isomax||null===b.isomin?t:b.isomax,k(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},22674:function(Q,z,e){"use strict";var k=e(9330).gl_mesh3d,A=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,b=e(90060),d=function(n,a){for(var i=a.length-1;i>0;i--){var c=Math.min(a[i],a[i-1]),h=Math.max(a[i],a[i-1]);if(h>c&&c<n&&n<=h)return{id:i,distRatio:(h-n)/(h-c)}}return{id:0,distRatio:0}};function s(n,a,i){this.scene=n,this.uid=i,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var t=s.prototype;t.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,c=this.data._meshY[a],h=this.data._meshZ[a],f=this.data._Ys.length,x=this.data._Zs.length,v=d(this.data._meshX[a],this.data._Xs).id,g=d(c,this.data._Ys).id,y=d(h,this.data._Zs).id,p=n.index=y+x*g+x*f*v;n.traceCoordinate=[this.data._meshX[p],this.data._meshY[p],this.data._meshZ[p],this.data._value[p]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&void 0!==m[p]?n.textLabel=m[p]:m&&(n.textLabel=m),!0}},t.update=function(n){var a=this.scene,i=a.fullSceneLayout;function c(x,v,g,y){return v.map(function(p){return x.d2l(p,0,y)*g})}this.data=r(n);var h={positions:b(c(i.xaxis,n._meshX,a.dataScale[0],n.xcalendar),c(i.yaxis,n._meshY,a.dataScale[1],n.ycalendar),c(i.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:b(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},f=T(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[f.min,f.max],h.colormap=A(n),this.mesh.update(h)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var a,i,c,h,f,x,v,g=n.surface.show,y=n.spaceframe.show,p=n.surface.fill,m=n.spaceframe.fill,w=!1,u=!1,S=0,_=n._Xs,E=n._Ys,L=n._Zs,C=_.length,P=E.length,I=L.length,j=o.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),R=function(ze,ce,ge){switch(j){case 5:return ge+I*ce+I*P*ze;case 4:return ge+I*ze+I*C*ce;case 3:return ce+P*ge+P*I*ze;case 2:return ce+P*ze+P*C*ge;case 1:return ze+C*ge+C*I*ce;default:return ze+C*ce+C*P*ge}},H=n._minValues,F=n._maxValues,U=n._vMin,B=n._vMax;function N(ze,ce,ge){for(var _e=x.length,De=i;De<_e;De++)if(ze===c[De]&&ce===h[De]&&ge===f[De])return De;return-1}function J(){i=a}function Z(){c=[],h=[],f=[],x=[],a=0,J()}function V(ze,ce,ge,_e){return c.push(ze),h.push(ce),f.push(ge),x.push(_e),++a-1}function W(ze,ce,ge){for(var _e=[],De=0;De<ze.length;De++)_e[De]=ze[De]*(1-ge)+ge*ce[De];return _e}function X(ze){v=ze}function K(ze,ce){return"all"===ze||null===ze||ze.indexOf(ce)>-1}function ne(ze,ce){return null===ze?ce:ze}function re(ze,ce,ge){J();var De,He,Ht,It,Ge,Ze,Be,Ye,rt,Se,Re,Ke,st,ct,Tt,Ve=[ce],nt=[ge];if(v>=1)Ve=[ce],nt=[ge];else if(v>0){var tt=(It=ge,Se=W(Ye=function(Et,At,ht){for(var pt=[],gt=0;gt<Et.length;gt++)pt[gt]=(Et[gt]+At[gt]+ht[gt])/3;return pt}(Ge=(Ht=ce)[0],Ze=Ht[1],Be=Ht[2]),Ge,rt=Math.sqrt(1-v)),{xyzv:[[Ge,Ze,Re=W(Ye,Ze,rt)],[Re,Se,Ge],[Ze,Be,Ke=W(Ye,Be,rt)],[Ke,Re,Ze],[Be,Ge,Se],[Se,Ke,Be]],abc:[[st=It[0],ct=It[1],-1],[-1,-1,st],[ct,Tt=It[2],-1],[-1,-1,ct],[Tt,st,-1],[-1,-1,Tt]]});Ve=tt.xyzv,nt=tt.abc}for(var at=0;at<Ve.length;at++){ce=Ve[at],ge=nt[at];for(var dt=[],wt=0;wt<3;wt++){var bt=ce[wt][0],_t=ce[wt][1],Lt=ce[wt][2],Ct=ce[wt][3],Ot=ge[wt]>-1?ge[wt]:N(bt,_t,Lt);dt[wt]=Ot>-1?Ot:V(bt,_t,Lt,ne(ze,Ct))}De=dt[1],He=dt[2],n._meshI.push(dt[0]),n._meshJ.push(De),n._meshK.push(He),++S}}function ae(ze,ce,ge,_e){var De=ze[3];De<ge&&(De=ge),De>_e&&(De=_e);for(var He=(ze[3]-De)/(ze[3]-ce[3]+1e-9),Ve=[],nt=0;nt<4;nt++)Ve[nt]=(1-He)*ze[nt]+He*ce[nt];return Ve}function le(ze,ce,ge){return ze>=ce&&ze<=ge}function pe(ze){var ce=.001*(B-U);return ze>=U-ce&&ze<=B+ce}function xe(ze){for(var ce=[],ge=0;ge<4;ge++){var _e=ze[ge];ce.push([n._x[_e],n._y[_e],n._z[_e],n._value[_e]])}return ce}function ye(ze,ce,ge,_e,De,He){He||(He=1),ge=[-1,-1,-1];var Ve=!1,nt=[le(ce[0][3],_e,De),le(ce[1][3],_e,De),le(ce[2][3],_e,De)];if(!nt[0]&&!nt[1]&&!nt[2])return!1;var tt=function(dt,wt,bt){return pe(wt[0][3])&&pe(wt[1][3])&&pe(wt[2][3])?(re(dt,wt,bt),!0):He<3&&ye(dt,wt,bt,U,B,++He)};if(nt[0]&&nt[1]&&nt[2])return tt(ze,ce,ge)||Ve;var at=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(dt){if(nt[dt[0]]&&nt[dt[1]]&&!nt[dt[2]]){var wt=ce[dt[0]],bt=ce[dt[1]],_t=ce[dt[2]],Lt=ae(_t,wt,_e,De),Ct=ae(_t,bt,_e,De);Ve=tt(ze,[Ct,Lt,wt],[-1,-1,ge[dt[0]]])||Ve,Ve=tt(ze,[wt,bt,Ct],[ge[dt[0]],ge[dt[1]],-1])||Ve,at=!0}}),at||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(dt){if(nt[dt[0]]&&!nt[dt[1]]&&!nt[dt[2]]){var wt=ce[dt[0]],_t=ce[dt[2]],Lt=ae(ce[dt[1]],wt,_e,De),Ct=ae(_t,wt,_e,De);Ve=tt(ze,[Ct,Lt,wt],[-1,-1,ge[dt[0]]])||Ve,at=!0}}),Ve}function se(ze,ce,ge,_e){var tt,at,dt,wt,De=!1,He=xe(ce),Ve=[le(He[0][3],ge,_e),le(He[1][3],ge,_e),le(He[2][3],ge,_e),le(He[3][3],ge,_e)];if(!(Ve[0]||Ve[1]||Ve[2]||Ve[3]))return De;if(Ve[0]&&Ve[1]&&Ve[2]&&Ve[3])return u&&(tt=ze,at=He,dt=ce,(wt=function(bt,_t,Lt){re(tt,[at[bt],at[_t],at[Lt]],[dt[bt],dt[_t],dt[Lt]])})(0,1,2),wt(3,0,1),wt(2,3,0),De=void wt(1,2,3)||De),De;var nt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(tt){if(Ve[tt[0]]&&Ve[tt[1]]&&Ve[tt[2]]&&!Ve[tt[3]]){var at=He[tt[0]],dt=He[tt[1]],wt=He[tt[2]],bt=He[tt[3]];if(u)De=re(ze,[at,dt,wt],[ce[tt[0]],ce[tt[1]],ce[tt[2]]])||De;else{var _t=ae(bt,at,ge,_e),Lt=ae(bt,dt,ge,_e),Ct=ae(bt,wt,ge,_e);De=re(null,[_t,Lt,Ct],[-1,-1,-1])||De}nt=!0}}),nt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(tt){if(Ve[tt[0]]&&Ve[tt[1]]&&!Ve[tt[2]]&&!Ve[tt[3]]){var at=He[tt[0]],dt=He[tt[1]],wt=He[tt[2]],bt=He[tt[3]],_t=ae(wt,at,ge,_e),Lt=ae(wt,dt,ge,_e),Ct=ae(bt,dt,ge,_e),Ot=ae(bt,at,ge,_e);u?(De=re(ze,[at,Ot,_t],[ce[tt[0]],-1,-1])||De,De=re(ze,[dt,Lt,Ct],[ce[tt[1]],-1,-1])||De):(It=[_t,Lt,Ct,Ot],Ge=[-1,-1,-1,-1],(Ze=function(Be,Ye,rt){re(null,[It[Be],It[Ye],It[rt]],[Ge[Be],Ge[Ye],Ge[rt]])})(0,1,2),De=void Ze(2,3,0)||De),nt=!0}var It,Ge,Ze}),nt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(tt){if(Ve[tt[0]]&&!Ve[tt[1]]&&!Ve[tt[2]]&&!Ve[tt[3]]){var at=He[tt[0]],wt=He[tt[2]],bt=He[tt[3]],_t=ae(He[tt[1]],at,ge,_e),Lt=ae(wt,at,ge,_e),Ct=ae(bt,at,ge,_e);u?(De=re(ze,[at,_t,Lt],[ce[tt[0]],-1,-1])||De,De=re(ze,[at,Lt,Ct],[ce[tt[0]],-1,-1])||De,De=re(ze,[at,Ct,_t],[ce[tt[0]],-1,-1])||De):De=re(null,[_t,Lt,Ct],[-1,-1,-1])||De,nt=!0}})),De}function fe(ze,ce,ge,_e,De,He,Ve,nt,tt,at,dt){var wt=!1;return w&&(K(ze,"A")&&(wt=se(null,[ce,ge,_e,He],at,dt)||wt),K(ze,"B")&&(wt=se(null,[ge,_e,De,tt],at,dt)||wt),K(ze,"C")&&(wt=se(null,[ge,He,Ve,tt],at,dt)||wt),K(ze,"D")&&(wt=se(null,[_e,He,nt,tt],at,dt)||wt),K(ze,"E")&&(wt=se(null,[ge,_e,He,tt],at,dt)||wt)),u&&(wt=se(ze,[ge,_e,He,tt],at,dt)||wt),wt}function Ee(ze,ce,ge,_e,De,He,Ve,nt){return[!0===nt[0]||ye(ze,xe([ce,ge,_e]),[ce,ge,_e],He,Ve),!0===nt[1]||ye(ze,xe([_e,De,ce]),[_e,De,ce],He,Ve)]}function de(ze,ce,ge,_e,De,He,Ve,nt,tt){return nt?Ee(ze,ce,ge,De,_e,He,Ve,tt):Ee(ze,ge,De,_e,ce,He,Ve,tt)}function we(ze,ce,ge,_e,De,He,Ve){var nt,tt,at,dt,wt=!1,bt=function(){wt=ye(ze,[nt,tt,at],[-1,-1,-1],De,He)||wt,wt=ye(ze,[at,dt,nt],[-1,-1,-1],De,He)||wt},_t=Ve[0],Lt=Ve[1],Ct=Ve[2];return _t&&(nt=W(xe([R(ce,ge-0,_e-0)])[0],xe([R(ce-1,ge-0,_e-0)])[0],_t),tt=W(xe([R(ce,ge-0,_e-1)])[0],xe([R(ce-1,ge-0,_e-1)])[0],_t),at=W(xe([R(ce,ge-1,_e-1)])[0],xe([R(ce-1,ge-1,_e-1)])[0],_t),dt=W(xe([R(ce,ge-1,_e-0)])[0],xe([R(ce-1,ge-1,_e-0)])[0],_t),bt()),Lt&&(nt=W(xe([R(ce-0,ge,_e-0)])[0],xe([R(ce-0,ge-1,_e-0)])[0],Lt),tt=W(xe([R(ce-0,ge,_e-1)])[0],xe([R(ce-0,ge-1,_e-1)])[0],Lt),at=W(xe([R(ce-1,ge,_e-1)])[0],xe([R(ce-1,ge-1,_e-1)])[0],Lt),dt=W(xe([R(ce-1,ge,_e-0)])[0],xe([R(ce-1,ge-1,_e-0)])[0],Lt),bt()),Ct&&(nt=W(xe([R(ce-0,ge-0,_e)])[0],xe([R(ce-0,ge-0,_e-1)])[0],Ct),tt=W(xe([R(ce-0,ge-1,_e)])[0],xe([R(ce-0,ge-1,_e-1)])[0],Ct),at=W(xe([R(ce-1,ge-1,_e)])[0],xe([R(ce-1,ge-1,_e-1)])[0],Ct),dt=W(xe([R(ce-1,ge-0,_e)])[0],xe([R(ce-1,ge-0,_e-1)])[0],Ct),bt()),wt}function ke(ze,ce,ge,_e,De,He,Ve,nt,tt,at,dt,wt){var bt=ze;return wt?(w&&"even"===ze&&(bt=null),fe(bt,ce,ge,_e,De,He,Ve,nt,tt,at,dt)):(w&&"odd"===ze&&(bt=null),fe(bt,tt,nt,Ve,He,De,_e,ge,ce,at,dt))}function Te(ze,ce,ge,_e,De){for(var He=[],Ve=0,nt=0;nt<ce.length;nt++)for(var tt=ce[nt],at=1;at<I;at++)for(var dt=1;dt<P;dt++)He.push(de(ze,R(tt,dt-1,at-1),R(tt,dt-1,at),R(tt,dt,at-1),R(tt,dt,at),ge,_e,(tt+dt+at)%2,De&&De[Ve]?De[Ve]:[])),Ve++;return He}function $(ze,ce,ge,_e,De){for(var He=[],Ve=0,nt=0;nt<ce.length;nt++)for(var tt=ce[nt],at=1;at<C;at++)for(var dt=1;dt<I;dt++)He.push(de(ze,R(at-1,tt,dt-1),R(at,tt,dt-1),R(at-1,tt,dt),R(at,tt,dt),ge,_e,(at+tt+dt)%2,De&&De[Ve]?De[Ve]:[])),Ve++;return He}function oe(ze,ce,ge,_e,De){for(var He=[],Ve=0,nt=0;nt<ce.length;nt++)for(var tt=ce[nt],at=1;at<P;at++)for(var dt=1;dt<C;dt++)He.push(de(ze,R(dt-1,at-1,tt),R(dt-1,at,tt),R(dt,at-1,tt),R(dt,at,tt),ge,_e,(dt+at+tt)%2,De&&De[Ve]?De[Ve]:[])),Ve++;return He}function he(ze,ce,ge){for(var _e=1;_e<I;_e++)for(var De=1;De<P;De++)for(var He=1;He<C;He++)ke(ze,R(He-1,De-1,_e-1),R(He-1,De-1,_e),R(He-1,De,_e-1),R(He-1,De,_e),R(He,De-1,_e-1),R(He,De-1,_e),R(He,De,_e-1),R(He,De,_e),ce,ge,(He+De+_e)%2)}function me(ze,ce,ge,_e,De,He){for(var Ve=[],tt=0;tt<ce.length;tt++)for(var at=ce[tt],dt=1;dt<I;dt++)for(var wt=1;wt<P;wt++)Ve.push(we(ze,at,wt,dt,ge,_e,De[tt]));return Ve}function Me(ze,ce,ge,_e,De,He){for(var Ve=[],tt=0;tt<ce.length;tt++)for(var at=ce[tt],dt=1;dt<C;dt++)for(var wt=1;wt<I;wt++)Ve.push(we(ze,dt,at,wt,ge,_e,De[tt]));return Ve}function Ie(ze,ce,ge,_e,De,He){for(var Ve=[],tt=0;tt<ce.length;tt++)for(var at=ce[tt],dt=1;dt<P;dt++)for(var wt=1;wt<C;wt++)Ve.push(we(ze,wt,dt,at,ge,_e,De[tt]));return Ve}function Pe(ze,ce){for(var ge=[],_e=ze;_e<ce;_e++)ge.push(_e);return ge}return function(){Z(),function(){for(var tt=0;tt<C;tt++)for(var at=0;at<P;at++)for(var dt=0;dt<I;dt++){var wt=R(tt,at,dt);V(n._x[wt],n._y[wt],n._z[wt],n._value[wt])}}();var ze=null;if(y&&m&&(X(m),u=!0,he(ze,U,B),u=!1),g&&p){X(p);for(var ce=n.surface.pattern,ge=n.surface.count,_e=0;_e<ge;_e++){var De=1===ge?.5:_e/(ge-1),He=(1-De)*U+De*B,Ve=Math.abs(He-H)>Math.abs(He-F)?[H,He]:[He,F];w=!0,he(ce,Ve[0],Ve[1]),w=!1}}var nt=[[Math.min(U,F),Math.max(U,F)],[Math.min(H,B),Math.max(H,B)]];["x","y","z"].forEach(function(tt){for(var at=[],dt=0;dt<nt.length;dt++){var wt=0,bt=nt[dt][0],_t=nt[dt][1],Lt=n.slices[tt];if(Lt.show&&Lt.fill){X(Lt.fill);var Ct=[],Ot=[],Ht=[];if(Lt.locations.length)for(var It=0;It<Lt.locations.length;It++){var Ge=d(Lt.locations[It],"x"===tt?_:"y"===tt?E:L);0===Ge.distRatio?Ct.push(Ge.id):Ge.id>0&&(Ot.push(Ge.id),Ht.push("x"===tt?[Ge.distRatio,0,0]:"y"===tt?[0,Ge.distRatio,0]:[0,0,Ge.distRatio]))}else Ct=Pe(1,"x"===tt?C-1:"y"===tt?P-1:I-1);Ot.length>0&&(at[wt]="x"===tt?me(ze,Ot,bt,_t,Ht):"y"===tt?Me(ze,Ot,bt,_t,Ht):Ie(ze,Ot,bt,_t,Ht),wt++),Ct.length>0&&(at[wt]="x"===tt?Te(ze,Ct,bt,_t,at[wt]):"y"===tt?$(ze,Ct,bt,_t,at[wt]):oe(ze,Ct,bt,_t,at[wt]),wt++)}var Ze=n.caps[tt];Ze.show&&Ze.fill&&(X(Ze.fill),at[wt]="x"===tt?Te(ze,[0,C-1],bt,_t,at[wt]):"y"===tt?$(ze,[0,P-1],bt,_t,at[wt]):oe(ze,[0,I-1],bt,_t,at[wt]),wt++)}}),0===S&&Z(),n._meshX=c,n._meshY=h,n._meshZ=f,n._meshIntensity=x,n._Xs=_,n._Ys=E,n._Zs=L}(),n}Q.exports={findNearestOnAxis:d,generateIsoMeshes:r,createIsosurfaceTrace:function(n,a){var c=k({gl:n.glplot.gl}),h=new s(n,c,a.uid);return c._trace=h,h.update(a),n.glplot.add(c),h}}},82738:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=e(16249),T=e(1586);function b(d,s,t,o,r){var n=r("isomin"),a=r("isomax");null!=a&&null!=n&&n>a&&(s.isomin=null,s.isomax=null);var i=r("x"),c=r("y"),h=r("z"),f=r("value");i&&i.length&&c&&c.length&&h&&h.length&&f&&f.length?(A.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y","z"],o),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var v="caps."+x;r(v+".show")&&r(v+".fill");var g="slices."+x;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),T(d,s,o,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}Q.exports={supplyDefaults:function(d,s,t,o){b(d,s,0,o,function(r,n){return k.coerce(d,s,l,r,n)})},supplyIsoDefaults:b}},64943:function(Q,z,e){"use strict";Q.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(Q,z,e){"use strict";var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(54532),b=e(9012),d=e(1426).extendFlat;Q.exports=d({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},k("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:d({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:d({},T.lightposition.x,{dflt:1e5}),y:d({},T.lightposition.y,{dflt:1e5}),z:d({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:d({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:d({},b.hoverinfo,{editType:"calc"}),showlegend:d({},b.showlegend,{dflt:!1})})},82932:function(Q,z,e){"use strict";var k=e(78803);Q.exports=function(A,l){l.intensity&&k(A,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function(Q,z,e){"use strict";var k=e(9330).gl_mesh3d,A=e(9330).delaunay_triangulate,l=e(9330).alpha_shape,T=e(9330).convex_hull,b=e(81697).parseColorScale,d=e(78614),s=e(21081).extractOpts,t=e(90060);function o(h,f,x){this.scene=h,this.uid=x,this.mesh=f,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=o.prototype;function n(h){for(var f=[],x=h.length,v=0;v<x;v++)f[v]=d(h[v]);return f}function a(h,f,x,v){for(var g=[],y=f.length,p=0;p<y;p++)g[p]=h.d2l(f[p],0,v)*x;return g}function i(h){for(var f=[],x=h.length,v=0;v<x;v++)f[v]=Math.round(h[v]);return f}function c(h,f){for(var x=h.length,v=0;v<x;v++)if(h[v]<=-.5||h[v]>=f-.5)return!1;return!0}r.handlePick=function(h){if(h.object===this.mesh){var f=h.index=h.data.index;h.traceCoordinate=h.data._cellCenter?h.data.dataCoordinate:[this.data.x[f],this.data.y[f],this.data.z[f]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&void 0!==x[f]?h.textLabel=x[f]:x&&(h.textLabel=x),!0}},r.update=function(h){var f=this.scene,x=f.fullSceneLayout;this.data=h;var v,g=h.x.length,y=t(a(x.xaxis,h.x,f.dataScale[0],h.xcalendar),a(x.yaxis,h.y,f.dataScale[1],h.ycalendar),a(x.zaxis,h.z,f.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!c(h.i,g)||!c(h.j,g)||!c(h.k,g))return;v=t(i(h.i),i(h.j),i(h.k))}else v=0===h.alphahull?T(y):h.alphahull>0?l(h.alphahull,y):function(u,S){for(var _=["x","y","z"].indexOf(u),E=[],L=S.length,C=0;C<L;C++)E[C]=[S[C][(_+1)%3],S[C][(_+2)%3]];return A(E)}(h.delaunayaxis,y);var p={positions:y,cells:v,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:d(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var m=s(h);this.color="#fff";var w=h.intensitymode;p[w+"Intensity"]=h.intensity,p[w+"IntensityBounds"]=[m.min,m.max],p.colormap=b(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],p.vertexColors=n(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],p.cellColors=n(h.facecolor)):(this.color=h.color,p.meshColor=d(h.color));this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(h,f){var v=k({gl:h.glplot.gl}),g=new o(h,v,f.uid);return v._trace=g,g.update(f),h.glplot.add(v),g}},58669:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(1586),T=e(2418);Q.exports=function(b,d,s,t){function o(n,a){return A.coerce(b,d,T,n,a)}function r(n){var a=n.map(function(i){var c=o(i);return c&&A.isArrayOrTypedArray(c)?c:null});return a.every(function(i){return i&&i.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(k.getComponentMethod("calendars","handleTraceDefaults")(b,d,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){o(n)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in b?(o("intensity"),o("intensitymode"),l(b,d,t,o,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in b?o("facecolor"):"vertexcolor"in b?o("vertexcolor"):o("color",s)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},21164:function(Q,z,e){"use strict";Q.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(Q,z,e){"use strict";var k=e(71828).extendFlat,A=e(82196),l=e(12663).axisHoverFormat,T=e(79952).P,b=e(77914),d=e(22372),s=d.INCREASING.COLOR,t=d.DECREASING.COLOR,o=A.line;function r(n){return{line:{color:k({},o.color,{dflt:n}),width:o.width,dash:T,editType:"style"},editType:"style"}}Q.exports={xperiod:A.xperiod,xperiod0:A.xperiod0,xperiodalignment:A.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:k({},o.width,{}),dash:k({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:k({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(Q,z,e){"use strict";var k=e(71828),A=k._,l=e(89298),T=e(42973),b=e(50606).BADNUM;function d(t,o,r,n){return{o:t,h:o,l:r,c:n}}function s(t,o,r,n,a,i){for(var c=a.makeCalcdata(o,"open"),h=a.makeCalcdata(o,"high"),f=a.makeCalcdata(o,"low"),x=a.makeCalcdata(o,"close"),v=Array.isArray(o.text),g=Array.isArray(o.hovertext),y=!0,p=null,m=!!o.xperiodalignment,w=[],u=0;u<n.length;u++){var S=n[u],_=c[u],E=h[u],L=f[u],C=x[u];if(S!==b&&_!==b&&E!==b&&L!==b&&C!==b){C===_?null!==p&&C!==p&&(y=C>p):y=C>_,p=C;var P=i(_,E,L,C);P.pos=S,P.yc=(_+C)/2,P.i=u,P.dir=y?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],m&&(P.orig_p=r[u]),v&&(P.tx=o.text[u]),g&&(P.htx=o.hovertext[u]),w.push(P)}else w.push({pos:S,empty:!0})}return o._extremes[a._id]=l.findExtremes(a,k.concat(f,h),{padded:!0}),w.length&&(w[0].t={labels:{open:A(t,"open:")+" ",high:A(t,"high:")+" ",low:A(t,"low:")+" ",close:A(t,"close:")+" "}}),w}Q.exports={calc:function(t,o){var r=l.getFromId(t,o.xaxis),n=l.getFromId(t,o.yaxis),a=function(x,v,g){var y=g._minDiff;if(!y){var p,m=x._fullData,w=[];for(y=1/0,p=0;p<m.length;p++){var u=m[p];if("ohlc"===u.type&&!0===u.visible&&u.xaxis===v._id){w.push(u);var S=v.makeCalcdata(u,"x");u._origX=S;var _=T(g,v,"x",S).vals;u._xcalc=_;var E=k.distinctVals(_).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),p=0;p<w.length;p++)w[p]._minDiff=y}return y*g.tickwidth}(t,r,o),i=o._minDiff;o._minDiff=null;var c=o._origX;o._origX=null;var h=o._xcalc;o._xcalc=null;var f=s(t,o,c,h,n,d);return o._extremes[r._id]=l.findExtremes(r,h,{vpad:i/2}),f.length?(k.extendFlat(f[0].t,{wHover:i/2,tickLen:a}),f):[{t:{empty:!0}}]},calcCommon:s}},16169:function(Q,z,e){"use strict";var k=e(71828),A=e(14555),l=e(73927),T=e(2522);function b(d,s,t,o){t(o+".line.color"),t(o+".line.width",s.line.width),t(o+".line.dash",s.line.dash)}Q.exports=function(d,s,t,o){function r(n,a){return k.coerce(d,s,T,n,a)}A(d,s,r,o)?(l(d,s,o,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),b(0,s,r,"increasing"),b(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),o._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function(Q,z,e){"use strict";var k=e(89298),A=e(71828),l=e(30211),T=e(7901),b=e(71828).fillText,d=e(22372),s={increasing:d.INCREASING.SYMBOL,decreasing:d.DECREASING.SYMBOL};function t(n,a,i,c){var h,f,x=n.cd,v=n.xa,g=x[0].trace,y=x[0].t,p=g.type,m="ohlc"===p?"l":"min",w="ohlc"===p?"h":"max",u=y.bPos||0,S=y.bdPos||y.tickLen,_=y.wHover,E=Math.min(1,S/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function L(F){var U=F.pos+u-a;return l.inbox(U-_,U+_,h)}function C(F){var U=F[m],B=F[w];return U===B||l.inbox(U-i,B-i,h)}function P(F){return(L(F)+C(F))/2}h=n.maxHoverDistance-E,f=n.maxSpikeDistance-E;var I=l.getDistanceFunction(c,L,C,P);if(l.getClosest(x,I,n),!1===n.index)return null;var j=x[n.index];if(j.empty)return null;var R=g[j.dir],H=R.line.color;return n.color=T.opacity(H)&&R.line.width?H:R.fillcolor,n.x0=v.c2p(j.pos+u-S,!0),n.x1=v.c2p(j.pos+u+S,!0),n.xLabelVal=void 0!==j.orig_p?j.orig_p:j.pos,n.spikeDistance=P(j)*f/h,n.xSpike=v.c2p(j.pos,!0),n}function o(n,a,i,c){var h=n.cd,f=n.ya,x=h[0].trace,v=h[0].t,g=[],y=t(n,a,i,c);if(!y)return[];var p=h[y.index].hi||x.hoverinfo,m=p.split("+");if("all"!==p&&-1===m.indexOf("y"))return[];for(var w=["high","open","close","low"],u={},S=0;S<w.length;S++){var _,E=w[S],L=x[E][y.index],C=f.c2p(L,!0);L in u?(_=u[L]).yLabel+="<br>"+v.labels[E]+k.hoverLabelText(f,L,x.yhoverformat):((_=A.extendFlat({},y)).y0=_.y1=C,_.yLabelVal=L,_.yLabel=v.labels[E]+k.hoverLabelText(f,L,x.yhoverformat),_.name="",g.push(_),u[L]=_)}return g}function r(n,a,i,c){var h=n.cd,f=n.ya,x=h[0].trace,v=h[0].t,g=t(n,a,i,c);if(!g)return[];var y=h[g.index],p=g.index=y.i,m=y.dir;function w(P){return v.labels[P]+k.hoverLabelText(f,x[P][p],x.yhoverformat)}var u=y.hi||x.hoverinfo,S=u.split("+"),_="all"===u,E=_||-1!==S.indexOf("y"),L=_||-1!==S.indexOf("text"),C=E?[w("open"),w("high"),w("low"),w("close")+"  "+s[m]]:[];return L&&b(y,x,C),g.extraText=C.join("<br>"),g.y0=g.y1=f.c2p(y.yc,!0),[g]}Q.exports={hoverPoints:function(n,a,i,c){return n.cd[0].trace.hoverlabel.split?o(n,a,i,c):r(n,a,i,c)},hoverSplit:o,hoverOnPoints:r}},54186:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function(Q,z,e){"use strict";var k=e(73972),A=e(71828);Q.exports=function(l,T,b,d){var s=b("x"),t=b("open"),o=b("high"),r=b("low"),n=b("close");if(b("hoverlabel.split"),k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],d),t&&o&&r&&n){var a=Math.min(t.length,o.length,r.length,n.length);return s&&(a=Math.min(a,A.minRowLength(s))),T._length=a,a}}},72314:function(Q,z,e){"use strict";var k=e(39898),A=e(71828);Q.exports=function(l,T,b,d){var s=T.yaxis,t=T.xaxis,o=!!t.rangebreaks;A.makeTraceGroups(d,b,"trace ohlc").each(function(r){var n=k.select(this),a=r[0],i=a.t;if(!0!==a.trace.visible||i.empty)n.remove();else{var c=i.tickLen,h=n.selectAll("path").data(A.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(f){if(f.empty)return"M0,0Z";var x=t.c2p(f.pos-c,!0),v=t.c2p(f.pos+c,!0),g=o?(x+v)/2:t.c2p(f.pos,!0);return"M"+x+","+s.c2p(f.o,!0)+"H"+g+"M"+g+","+s.c2p(f.h,!0)+"V"+s.c2p(f.l,!0)+"M"+v+","+s.c2p(f.c,!0)+"H"+g})}})}},67324:function(Q){"use strict";Q.exports=function(z,e){var k,A=z.cd,l=z.xaxis,T=z.yaxis,b=[],d=A[0].t.bPos||0;if(!1===e)for(k=0;k<A.length;k++)A[k].selected=0;else for(k=0;k<A.length;k++){var s=A[k];e.contains([l.c2p(s.pos+d),T.c2p(s.yc)],null,s.i,z)?(b.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},53101:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(7901);Q.exports=function(T,b,d){var s=d||k.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=t[0].trace;k.select(this).selectAll("path").each(function(r){if(!r.empty){var n=o[r.dir].line;k.select(this).style("fill","none").call(l.stroke,n.color).call(A.dashLine,n.dash,n.width).style("opacity",o.selectedpoints&&!r.selected?.3:1)}})})}},99506:function(Q,z,e){"use strict";var k=e(1426).extendFlat,A=e(9012),l=e(41940),T=e(50693),b=e(5386).f,d=e(27670).Y,s=k({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Q.exports={domain:d({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:k({},A.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(Q,z,e){"use strict";var k=e(27659).a0,A=e(45784),l="parcats";z.name=l,z.plot=function(T,b,d,s){var t=k(T.calcdata,l);t.length&&A(T,t[0],d,s)},z.clean=function(T,b,d,s){var t=s._has&&s._has("parcats"),o=b._has&&b._has("parcats");t&&!o&&s._paperdiv.selectAll(".parcats").remove()}},28699:function(Q,z,e){"use strict";var k=e(28984).wrap,A=e(52075).hasColorscale,l=e(78803),T=e(75744),b=e(91424),d=e(71828),s=e(92770);function t(n,a,i){n.valueInds.push(a),n.count+=i}function o(n,a,i){return{categoryInds:n,color:a,rawColor:i,valueInds:[],count:0}}function r(n,a,i){n.valueInds.push(a),n.count+=i}Q.exports=function(n,a){var i=d.filterVisible(a.dimensions);if(0===i.length)return[];var c,h,f,x=i.map(function(N){var J;if("trace"===N.categoryorder)J=null;else if("array"===N.categoryorder)J=N.categoryarray;else{J=T(N.values);for(var Z=!0,V=0;V<J.length;V++)if(!s(J[V])){Z=!1;break}J.sort(Z?d.sorterAsc:void 0),"category descending"===N.categoryorder&&(J=J.reverse())}return function(W,X){X=null==X?[]:X.map(function(ye){return ye});var K={},ne={},re=[];X.forEach(function(ye,se){K[ye]=0,ne[ye]=se});for(var ae=0;ae<W.length;ae++){var le,pe=W[ae];void 0===K[pe]?(K[pe]=1,le=X.push(pe)-1,ne[pe]=le):(K[pe]++,le=ne[pe]),re.push(le)}var xe=X.map(function(ye){return K[ye]});return{uniqueValues:X,uniqueCounts:xe,inds:re}}(N.values,J)});c=d.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(N){var J;if(function(V){for(var W=new Array(V.length),X=0;X<V.length;X++){if(V[X]<0||V[X]>=V.length||void 0!==W[V[X]])return!1;W[V[X]]=!0}return!0}(N.map(function(V){return V.displayindex})))for(J=0;J<N.length;J++)N[J]._displayindex=N[J].displayindex;else for(J=0;J<N.length;J++)N[J]._displayindex=J}(i),i.forEach(function(N,J){!function(Z,V){Z._categoryarray=V.uniqueValues,Z._ticktext=null==Z.ticktext?[]:Z.ticktext.slice();for(var W=Z._ticktext.length;W<V.uniqueValues.length;W++)Z._ticktext.push(V.uniqueValues[W])}(N,x[J])});var v,g=a.line;g?(A(a,"line")&&l(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),v=b.tryColorscale(g)):v=d.identity;var y,p,m,w,u,S=i[0].values.length,_={},E=x.map(function(N){return N.inds});for(f=0,y=0;y<S;y++){var L=[];for(p=0;p<E.length;p++)L.push(E[p][y]);f+=h=c[y%c.length];var C=(m=y,w=void 0,u=void 0,d.isArrayOrTypedArray(g.color)?u=w=g.color[m%g.color.length]:w=g.color,{color:v(w),rawColor:u}),P=L+"-"+C.rawColor;void 0===_[P]&&(_[P]=o(L,C.color,C.rawColor)),r(_[P],y,h)}var I,N,J,Z,V,j=i.map(function(N,J){return{dimensionInd:J,containerInd:N._index,displayInd:N._displayindex,dimensionLabel:N.label,count:f,categories:[],dragX:null}});for(y=0;y<S;y++)for(h=c[y%c.length],p=0;p<j.length;p++){var R=j[p].containerInd,H=x[p].inds[y],F=j[p].categories;void 0===F[H]&&(F[H]={dimensionInd:p,categoryInd:I=H,categoryValue:a.dimensions[R]._categoryarray[H],displayInd:I,categoryLabel:a.dimensions[R]._ticktext[H],valueInds:[],count:0,dragY:null}),t(F[H],y,h)}return k((J=_,Z=f,V=(N=j).map(function(W){return W.categories.length}).reduce(function(W,X){return Math.max(W,X)}),{dimensions:N,paths:J,trace:void 0,maxCats:V,count:Z}))}},14647:function(Q,z,e){"use strict";var k=e(71828),A=e(52075).hasColorscale,l=e(1586),T=e(27670).c,b=e(85501),d=e(99506),s=e(94397);function t(o,r){function n(v,g){return k.coerce(o,r,d.dimensions,v,g)}var a=n("values"),i=n("visible");if(a&&a.length||(i=r.visible=!1),i){n("label"),n("displayindex",r._index);var c,h=o.categoryarray,f=Array.isArray(h)&&h.length>0;f&&(c="array");var x=n("categoryorder",c);"array"===x?(n("categoryarray"),n("ticktext")):(delete o.categoryarray,delete o.ticktext),f||"array"!==x||(r.categoryorder="trace")}}Q.exports=function(o,r,n,a){function i(v,g){return k.coerce(o,r,d,v,g)}var c=b(o,r,{name:"dimensions",handleItemDefaults:t}),h=function(v,g,y,p,m){m("line.shape"),m("line.hovertemplate");var w=m("line.color",p.colorway[0]);if(A(v,"line")&&k.isArrayOrTypedArray(w)){if(w.length)return m("line.colorscale"),l(v,g,p,m,{prefix:"line.",cLetter:"c"}),w.length;g.line.color=y}return 1/0}(o,r,n,a,i);T(r,a,i),Array.isArray(c)&&c.length||(r.visible=!1),s(r,c,"values",h),i("hoveron"),i("hovertemplate"),i("arrangement"),i("bundlecolors"),i("sortpaths"),i("counts");var f={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};k.coerceFont(i,"labelfont",f);var x={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};k.coerceFont(i,"tickfont",x)}},94873:function(Q,z,e){"use strict";Q.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function(Q,z,e){"use strict";var k=e(39898),A=e(81684).k4,l=e(72391),T=e(30211),b=e(71828),d=b.strTranslate,s=e(91424),t=e(84267),o=e(63893);function r(Z,V,W,X){var K=V._context.staticPlot,ne=Z.map(F.bind(0,V,W)),re=X.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",K?"none":"all");var ae=re.selectAll("g.trace.parcats").data(ne,n),le=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(ke){return d(ke.x,ke.y)}),le.append("g").attr("class","paths");var pe=ae.select("g.paths").selectAll("path.path").data(function(ke){return ke.paths},n);pe.attr("fill",function(ke){return ke.model.color});var xe=pe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ke){return ke.model.color}).attr("fill-opacity",0);g(xe),pe.attr("d",function(ke){return ke.svgD}),xe.empty()||pe.sort(i),pe.exit().remove(),pe.on("mouseover",c).on("mouseout",h).on("click",v),le.append("g").attr("class","dimensions");var ye=ae.select("g.dimensions").selectAll("g.dimension").data(function(ke){return ke.dimensions},n);ye.enter().append("g").attr("class","dimension"),ye.attr("transform",function(ke){return d(ke.x,0)}),ye.exit().remove();var se=ye.selectAll("g.category").data(function(ke){return ke.categories},n),fe=se.enter().append("g").attr("class","category");se.attr("transform",function(ke){return d(0,ke.y)}),fe.append("rect").attr("class","catrect").attr("pointer-events","none"),se.select("rect.catrect").attr("fill","none").attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),p(fe);var Ee=se.selectAll("rect.bandrect").data(function(ke){return ke.bands},n);Ee.each(function(){b.raiseToTop(this)}),Ee.attr("fill",function(ke){return ke.color});var de=Ee.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ke){return ke.color}).attr("fill-opacity",0);Ee.attr("fill",function(ke){return ke.color}).attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}).attr("y",function(ke){return ke.y}).attr("cursor",function(ke){return"fixed"===ke.parcatsViewModel.arrangement?"default":"perpendicular"===ke.parcatsViewModel.arrangement?"ns-resize":"move"}),m(de),Ee.exit().remove(),fe.append("text").attr("class","catlabel").attr("pointer-events","none");var we=V._fullLayout.paper_bgcolor;se.select("text.catlabel").attr("text-anchor",function(ke){return a(ke)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",o.makeTextShadow(we)).style("fill","rgb(0, 0, 0)").attr("x",function(ke){return a(ke)?ke.width+5:-5}).attr("y",function(ke){return ke.height/2}).text(function(ke){return ke.model.categoryLabel}).each(function(ke){s.font(k.select(this),ke.parcatsViewModel.categorylabelfont),o.convertToTspans(k.select(this),V)}),fe.append("text").attr("class","dimlabel"),se.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ke){return"fixed"===ke.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ke){return ke.width/2}).attr("y",-5).text(function(ke,Te){return 0===Te?ke.parcatsViewModel.model.dimensions[ke.model.dimensionInd].dimensionLabel:null}).each(function(ke){s.font(k.select(this),ke.parcatsViewModel.labelfont)}),se.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),se.exit().remove(),ye.call(k.behavior.drag().origin(function(ke){return{x:ke.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",I)),ae.each(function(ke){ke.traceSelection=k.select(this),ke.pathSelection=k.select(this).selectAll("g.paths").selectAll("path.path"),ke.dimensionSelection=k.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function n(Z){return Z.key}function a(Z){return Z.model.dimensionInd===Z.parcatsViewModel.dimensions[Z.parcatsViewModel.dimensions.length-1].model.dimensionInd}function i(Z,V){return Z.model.rawColor>V.model.rawColor?1:Z.model.rawColor<V.model.rawColor?-1:0}function c(Z){if(!Z.parcatsViewModel.dragDimension&&-1===Z.parcatsViewModel.hoverinfoItems.indexOf("skip")){b.raiseToTop(this),y(k.select(this));var V=f(Z),W=x(Z);if(Z.parcatsViewModel.graphDiv.emit("plotly_hover",{points:V,event:k.event,constraints:W}),-1===Z.parcatsViewModel.hoverinfoItems.indexOf("none")){var X,K,ne,re=k.mouse(this)[0],ae=Z.parcatsViewModel.graphDiv,le=Z.parcatsViewModel.trace,pe=ae._fullLayout,xe=pe._paperdiv.node().getBoundingClientRect(),ye=Z.parcatsViewModel.graphDiv.getBoundingClientRect();for(ne=0;ne<Z.leftXs.length-1;ne++)if(Z.leftXs[ne]+Z.dimWidths[ne]-2<=re&&re<=Z.leftXs[ne+1]+2){var se=Z.parcatsViewModel.dimensions[ne];X=(se.x+se.width+Z.parcatsViewModel.dimensions[ne+1].x)/2,K=(Z.topYs[ne]+Z.topYs[ne+1]+Z.height)/2;break}var Ee=Z.parcatsViewModel.x+X,de=Z.parcatsViewModel.y+K,we=t.mostReadable(Z.model.color,["black","white"]),ke=Z.model.count,Te=ke/Z.parcatsViewModel.model.count,$={countLabel:ke,probabilityLabel:Te.toFixed(3)},oe=[];-1!==Z.parcatsViewModel.hoverinfoItems.indexOf("count")&&oe.push(["Count:",$.countLabel].join(" ")),-1!==Z.parcatsViewModel.hoverinfoItems.indexOf("probability")&&oe.push(["P:",$.probabilityLabel].join(" "));var he=oe.join("<br>"),me=k.mouse(ae)[0];T.loneHover({trace:le,x:Ee-xe.left+ye.left,y:de-xe.top+ye.top,text:he,color:Z.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:we,idealAlign:me<Ee?"right":"left",hovertemplate:(le.line||{}).hovertemplate,hovertemplateLabels:$,eventData:[{data:le._input,fullData:le,count:ke,probability:Te}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:ae})}}}function h(Z){if(!Z.parcatsViewModel.dragDimension&&(g(k.select(this)),T.loneUnhover(Z.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Z.parcatsViewModel.pathSelection.sort(i),-1===Z.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var V=f(Z),W=x(Z);Z.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:V,event:k.event,constraints:W})}}function f(Z){for(var V=[],W=j(Z.parcatsViewModel),X=0;X<Z.model.valueInds.length;X++)V.push({curveNumber:W,pointNumber:Z.model.valueInds[X]});return V}function x(Z){for(var V={},W=Z.parcatsViewModel.model.dimensions,X=0;X<W.length;X++){var K=W[X];V[K.containerInd]=K.categories[Z.model.categoryInds[X]].categoryValue}return void 0!==Z.model.rawColor&&(V.color=Z.model.rawColor),V}function v(Z){if(-1===Z.parcatsViewModel.hoverinfoItems.indexOf("skip")){var V=f(Z),W=x(Z);Z.parcatsViewModel.graphDiv.emit("plotly_click",{points:V,event:k.event,constraints:W})}}function g(Z){Z.attr("fill",function(V){return V.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(Z){Z.attr("fill-opacity",.8).attr("stroke",function(V){return t.mostReadable(V.model.color,["black","white"])}).attr("stroke-width",.3)}function p(Z){Z.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(Z){Z.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(Z){var W=Z.categoryViewModel.model.dimensionInd,X=Z.categoryViewModel.model.categoryInd;return Z.parcatsViewModel.pathSelection.filter(function(K){return K.model.categoryInds[W]===X&&K.model.color===Z.color})}function u(Z,V,W){var X=k.select(Z).datum(),K=X.categoryViewModel.model,ne=X.parcatsViewModel.graphDiv,re=k.select(Z.parentNode).selectAll("rect.bandrect"),ae=[];re.each(function(pe){w(pe).each(function(xe){Array.prototype.push.apply(ae,f(xe))})});var le={};le[K.dimensionInd]=K.categoryValue,ne.emit(V,{points:ae,event:W,constraints:le})}function S(Z,V,W){var X=k.select(Z).datum(),K=X.categoryViewModel.model,ne=X.parcatsViewModel.graphDiv,re=w(X),ae=[];re.each(function(pe){Array.prototype.push.apply(ae,f(pe))});var le={};le[K.dimensionInd]=K.categoryValue,void 0!==X.rawColor&&(le.color=X.rawColor),ne.emit(V,{points:ae,event:W,constraints:le})}function _(Z,V,W){Z._fullLayout._calcInverseTransform(Z);var X,K,ne=Z._fullLayout._invScaleX,re=Z._fullLayout._invScaleY,ae=k.select(W.parentNode).select("rect.catrect"),le=ae.node().getBoundingClientRect(),pe=ae.datum(),xe=pe.parcatsViewModel,se=xe.trace,fe=le.top+le.height/2;xe.dimensions.length>1&&xe.model.dimensions[pe.model.dimensionInd].displayInd===xe.dimensions.length-1?(X=le.left,K="left"):(X=le.left+le.width,K="right");var Ee=pe.model.count,de=pe.model.categoryLabel,we=Ee/pe.parcatsViewModel.model.count,ke={countLabel:Ee,categoryLabel:de,probabilityLabel:we.toFixed(3)},Te=[];-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("count")&&Te.push(["Count:",ke.countLabel].join(" ")),-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Te.push(["P("+ke.categoryLabel+"):",ke.probabilityLabel].join(" "));var $=Te.join("<br>");return{trace:se,x:ne*(X-V.left),y:re*(fe-V.top),text:$,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:K,hovertemplate:se.hovertemplate,hovertemplateLabels:ke,eventData:[{data:se._input,fullData:se,count:Ee,category:de,probability:we}]}}function E(Z){if(!Z.parcatsViewModel.dragDimension&&-1===Z.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(k.mouse(this)[1]<-1)return;var V,W=Z.parcatsViewModel.graphDiv,X=W._fullLayout,K=X._paperdiv.node().getBoundingClientRect(),ne=Z.parcatsViewModel.hoveron,re=this;"color"===ne?(y(pe=w(le=k.select(ae=re).datum())),pe.each(function(){b.raiseToTop(this)}),k.select(ae.parentNode).selectAll("rect.bandrect").filter(function(xe){return xe.color===le.color}).each(function(){b.raiseToTop(this),k.select(this).attr("stroke","black").attr("stroke-width",1.5)}),S(re,"plotly_hover",k.event)):(function(ae){k.select(ae.parentNode).selectAll("rect.bandrect").each(function(le){var pe=w(le);y(pe),pe.each(function(){b.raiseToTop(this)})}),k.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),u(re,"plotly_hover",k.event)),-1===Z.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ne?V=_(W,K,re):"color"===ne?V=function(ae,le,pe){ae._fullLayout._calcInverseTransform(ae);var xe,ye,se=ae._fullLayout._invScaleX,fe=ae._fullLayout._invScaleY,Ee=pe.getBoundingClientRect(),de=k.select(pe).datum(),we=de.categoryViewModel,ke=we.parcatsViewModel,$=ke.trace,oe=Ee.y+Ee.height/2;ke.dimensions.length>1&&ke.model.dimensions[we.model.dimensionInd].displayInd===ke.dimensions.length-1?(xe=Ee.left,ye="left"):(xe=Ee.left+Ee.width,ye="right");var he=we.model.categoryLabel,me=de.parcatsViewModel.model.count,Me=0;de.categoryViewModel.bands.forEach(function(nt){nt.color===de.color&&(Me+=nt.count)});var Ie=we.model.count,Pe=0;ke.pathSelection.each(function(nt){nt.model.color===de.color&&(Pe+=nt.model.count)});var ze=Me/me,ce=Me/Pe,ge=Me/Ie,_e={countLabel:me,categoryLabel:he,probabilityLabel:ze.toFixed(3)},De=[];-1!==we.parcatsViewModel.hoverinfoItems.indexOf("count")&&De.push(["Count:",_e.countLabel].join(" ")),-1!==we.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(De.push("P(color \u2229 "+he+"): "+_e.probabilityLabel),De.push("P("+he+" | color): "+ce.toFixed(3)),De.push("P(color | "+he+"): "+ge.toFixed(3)));var He=De.join("<br>"),Ve=t.mostReadable(de.color,["black","white"]);return{trace:$,x:se*(xe-le.left),y:fe*(oe-le.top),text:He,color:de.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:ye,hovertemplate:$.hovertemplate,hovertemplateLabels:_e,eventData:[{data:$._input,fullData:$,category:he,count:me,probability:ze,categorycount:Ie,colorcount:Pe,bandcolorcount:Me}]}}(W,K,re):"dimension"===ne&&(V=function(ae,le,pe){var xe=[];return k.select(pe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){xe.push(_(ae,le,this))}),xe}(W,K,re)),V&&T.loneHover(V,{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:W}))}var ae,le,pe}function L(Z){var V=Z.parcatsViewModel;V.dragDimension||(g(V.pathSelection),p(V.dimensionSelection.selectAll("g.category")),m(V.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(V.graphDiv._fullLayout._hoverlayer.node()),V.pathSelection.sort(i),-1!==V.hoverinfoItems.indexOf("skip"))||("color"===Z.parcatsViewModel.hoveron?S(this,"plotly_unhover",k.event):u(this,"plotly_unhover",k.event))}function C(Z){"fixed"!==Z.parcatsViewModel.arrangement&&(Z.dragDimensionDisplayInd=Z.model.displayInd,Z.initialDragDimensionDisplayInds=Z.parcatsViewModel.model.dimensions.map(function(V){return V.displayInd}),Z.dragHasMoved=!1,Z.dragCategoryDisplayInd=null,k.select(this).selectAll("g.category").select("rect.catrect").each(function(V){var W=k.mouse(this)[0],X=k.mouse(this)[1];-2<=W&&W<=V.width+2&&-2<=X&&X<=V.height+2&&(Z.dragCategoryDisplayInd=V.model.displayInd,Z.initialDragCategoryDisplayInds=Z.model.categories.map(function(K){return K.displayInd}),V.model.dragY=V.y,b.raiseToTop(this.parentNode),k.select(this.parentNode).selectAll("rect.bandrect").each(function(K){K.y<X&&X<=K.y+K.height&&(Z.potentialClickBand=this)}))}),Z.parcatsViewModel.dragDimension=Z,T.loneUnhover(Z.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(Z){if("fixed"!==Z.parcatsViewModel.arrangement&&(Z.dragHasMoved=!0,null!==Z.dragDimensionDisplayInd)){var V=Z.dragDimensionDisplayInd,W=V-1,X=V+1,K=Z.parcatsViewModel.dimensions[V];if(null!==Z.dragCategoryDisplayInd){var ne=K.categories[Z.dragCategoryDisplayInd];ne.model.dragY+=k.event.dy;var re=ne.model.dragY,ae=ne.model.displayInd,le=K.categories,pe=le[ae-1],xe=le[ae+1];void 0!==pe&&re<pe.y+pe.height/2&&(ne.model.displayInd=pe.model.displayInd,pe.model.displayInd=ae),void 0!==xe&&re+ne.height>xe.y+xe.height/2&&(ne.model.displayInd=xe.model.displayInd,xe.model.displayInd=ae),Z.dragCategoryDisplayInd=ne.model.displayInd}if(null===Z.dragCategoryDisplayInd||"freeform"===Z.parcatsViewModel.arrangement){K.model.dragX=k.event.x;var ye=Z.parcatsViewModel.dimensions[W],se=Z.parcatsViewModel.dimensions[X];void 0!==ye&&K.model.dragX<ye.x+ye.width&&(K.model.displayInd=ye.model.displayInd,ye.model.displayInd=V),void 0!==se&&K.model.dragX+K.width>se.x&&(K.model.displayInd=se.model.displayInd,se.model.displayInd=Z.dragDimensionDisplayInd),Z.dragDimensionDisplayInd=K.model.displayInd}N(Z.parcatsViewModel),B(Z.parcatsViewModel),H(Z.parcatsViewModel),R(Z.parcatsViewModel)}}function I(Z){if("fixed"!==Z.parcatsViewModel.arrangement&&null!==Z.dragDimensionDisplayInd){k.select(this).selectAll("text").attr("font-weight","normal");var V={},W=j(Z.parcatsViewModel),X=Z.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),K=Z.initialDragDimensionDisplayInds.some(function(xe,ye){return xe!==X[ye]});K&&X.forEach(function(xe,ye){V["dimensions["+Z.parcatsViewModel.model.dimensions[ye].containerInd+"].displayindex"]=xe});var ne=!1;if(null!==Z.dragCategoryDisplayInd){var re=Z.model.categories.map(function(xe){return xe.displayInd});if(ne=Z.initialDragCategoryDisplayInds.some(function(xe,ye){return xe!==re[ye]})){var ae=Z.model.categories.slice().sort(function(xe,ye){return xe.displayInd-ye.displayInd}),le=ae.map(function(xe){return xe.categoryValue}),pe=ae.map(function(xe){return xe.categoryLabel});V["dimensions["+Z.model.containerInd+"].categoryarray"]=[le],V["dimensions["+Z.model.containerInd+"].ticktext"]=[pe],V["dimensions["+Z.model.containerInd+"].categoryorder"]="array"}}-1===Z.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!Z.dragHasMoved&&Z.potentialClickBand&&("color"===Z.parcatsViewModel.hoveron?S(Z.potentialClickBand,"plotly_click",k.event.sourceEvent):u(Z.potentialClickBand,"plotly_click",k.event.sourceEvent)),Z.model.dragX=null,null!==Z.dragCategoryDisplayInd&&(Z.parcatsViewModel.dimensions[Z.dragDimensionDisplayInd].categories[Z.dragCategoryDisplayInd].model.dragY=null,Z.dragCategoryDisplayInd=null),Z.dragDimensionDisplayInd=null,Z.parcatsViewModel.dragDimension=null,Z.dragHasMoved=null,Z.potentialClickBand=null,N(Z.parcatsViewModel),B(Z.parcatsViewModel),k.transition().duration(300).ease("cubic-in-out").each(function(){H(Z.parcatsViewModel,!0),R(Z.parcatsViewModel,!0)}).each("end",function(){(K||ne)&&l.restyle(Z.parcatsViewModel.graphDiv,V,[W])})}}function j(Z){for(var V,W=Z.graphDiv._fullData,X=0;X<W.length;X++)if(Z.key===W[X].uid){V=X;break}return V}function R(Z,V){var W;void 0===V&&(V=!1),Z.pathSelection.data(function(X){return X.paths},n),(W=Z.pathSelection,V?W.transition():W).attr("d",function(X){return X.svgD})}function H(Z,V){function W(re){return V?re.transition():re}void 0===V&&(V=!1),Z.dimensionSelection.data(function(re){return re.dimensions},n);var X=Z.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);W(Z.dimensionSelection).attr("transform",function(re){return d(re.x,0)}),W(X).attr("transform",function(re){return d(0,re.y)}),X.select(".dimlabel").text(function(re,ae){return 0===ae?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),X.select(".catlabel").attr("text-anchor",function(re){return a(re)?"start":"end"}).attr("x",function(re){return a(re)?re.width+5:-5}).each(function(re){var ae,le;a(re)?(ae=re.width+5,le="start"):(ae=-5,le="end"),k.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",le)});var K=X.selectAll("rect.bandrect").data(function(re){return re.bands},n),ne=K.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);K.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),m(ne),K.each(function(){b.raiseToTop(this)}),K.exit().remove()}function F(Z,V,W){var X,K=W[0],ne=V.margin||{l:80,r:80,t:100,b:80},re=K.trace,ae=re.domain,le=V.width,pe=V.height,xe=Math.floor(le*(ae.x[1]-ae.x[0])),ye=Math.floor(pe*(ae.y[1]-ae.y[0])),se=ae.x[0]*le+ne.l,fe=V.height-ae.y[1]*V.height+ne.t,Ee=re.line.shape;X="all"===re.hoverinfo?["count","probability"]:(re.hoverinfo||"").split("+");var de={trace:re,key:re.uid,model:K,x:se,y:fe,width:xe,height:ye,hoveron:re.hoveron,hoverinfoItems:X,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Ee,dragDimension:null,margin:ne,paths:[],dimensions:[],graphDiv:Z,traceSelection:null,pathSelection:null,dimensionSelection:null};return K.dimensions&&(N(de),B(de)),de}function U(Z,V,W,X,K){var ne,re,ae=[],le=[];for(re=0;re<W.length-1;re++)ne=A(W[re]+Z[re],Z[re+1]),ae.push(ne(K)),le.push(ne(1-K));var pe="M "+Z[0]+","+V[0];for(pe+="l"+W[0]+",0 ",re=1;re<W.length;re++)pe+="C"+ae[re-1]+","+V[re-1]+" "+le[re-1]+","+V[re]+" "+Z[re]+","+V[re],pe+="l"+W[re]+",0 ";for(pe+="l0,"+X+" ",pe+="l -"+W[W.length-1]+",0 ",re=W.length-2;re>=0;re--)pe+="C"+le[re]+","+(V[re+1]+X)+" "+ae[re]+","+(V[re]+X)+" "+(Z[re]+W[re])+","+(V[re]+X),pe+="l-"+W[re]+",0 ";return pe+"Z"}function B(Z){var V=Z.dimensions,W=Z.model,X=V.map(function(_e){return _e.categories.map(function(De){return De.y})}),K=Z.model.dimensions.map(function(_e){return _e.categories.map(function(De){return De.displayInd})}),ne=Z.model.dimensions.map(function(_e){return _e.displayInd}),re=Z.dimensions.map(function(_e){return _e.model.dimensionInd}),ae=V.map(function(_e){return _e.x}),le=V.map(function(_e){return _e.width}),pe=[];for(var xe in W.paths)W.paths.hasOwnProperty(xe)&&pe.push(W.paths[xe]);function ye(_e){var De=_e.categoryInds.map(function(He,Ve){return K[Ve][He]});return re.map(function(He){return De[He]})}pe.sort(function(_e,De){var He=ye(_e),Ve=ye(De);return"backward"===Z.sortpaths&&(He.reverse(),Ve.reverse()),He.push(_e.valueInds[0]),Ve.push(De.valueInds[0]),Z.bundlecolors&&(He.unshift(_e.rawColor),Ve.unshift(De.rawColor)),He<Ve?-1:He>Ve?1:0});for(var se=new Array(pe.length),fe=V[0].model.count,Ee=V[0].categories.map(function(_e){return _e.height}).reduce(function(_e,De){return _e+De}),de=0;de<pe.length;de++){var we,ke=pe[de];we=fe>0?Ee*(ke.count/fe):0;for(var Te,$=new Array(X.length),oe=0;oe<ke.categoryInds.length;oe++){var me=K[oe][ke.categoryInds[oe]],Me=ne[oe];$[Me]=X[Me][me],X[Me][me]+=we;var Ie=Z.dimensions[Me].categories[me],Pe=Ie.bands.length,ze=Ie.bands[Pe-1];if(void 0===ze||ke.rawColor!==ze.rawColor){var ce=void 0===ze?0:ze.y+ze.height;Ie.bands.push({key:ce,color:ke.color,rawColor:ke.rawColor,height:we,width:Ie.width,count:ke.count,y:ce,categoryViewModel:Ie,parcatsViewModel:Z})}else{var ge=Ie.bands[Pe-1];ge.height+=we,ge.count+=ke.count}}Te=U(ae,$,le,we,"hspline"===Z.pathShape?.5:0),se[de]={key:ke.valueInds[0],model:ke,height:we,leftXs:ae,topYs:$,dimWidths:le,svgD:Te,parcatsViewModel:Z}}Z.paths=se}function N(Z){var V=Z.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});V.sort(function(re,ae){return re.displayInd-ae.displayInd});var W=[];for(var X in V)W.push(J(Z,Z.model.dimensions[V[X].dimensionInd]));Z.dimensions=W}function J(Z,V){var W,X=Z.model.dimensions.length;W=40+(X>1?(Z.width-80-16)/(X-1):0)*V.displayInd;var ne,re,ae,pe,xe=[],ye=Z.model.maxCats,se=V.categories.length,fe=V.count,Ee=Z.height-8*(ye-1),de=8*(ye-se)/2,we=V.categories.map(function(ke){return{displayInd:ke.displayInd,categoryInd:ke.categoryInd}});for(we.sort(function(ke,Te){return ke.displayInd-Te.displayInd}),pe=0;pe<se;pe++)ae={key:(re=V.categories[we[pe].categoryInd]).valueInds[0],model:re,width:16,height:ne=fe>0?re.count/fe*Ee:0,y:null!==re.dragY?re.dragY:de,bands:[],parcatsViewModel:Z},de=de+ne+8,xe.push(ae);return{key:V.dimensionInd,x:null!==V.dragX?V.dragX:W,y:0,width:16,model:V,categories:xe,parcatsViewModel:Z,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}Q.exports=function(Z,V,W,X){r(W,Z,X,V)}},45784:function(Q,z,e){"use strict";var k=e(45460);Q.exports=function(A,l,T,b){var d=A._fullLayout,t=d._size;k(A,d._paper,l,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},73362:function(Q,z,e){"use strict";var k=e(50693),A=e(13838),l=e(41940),T=e(27670).Y,b=e(1426).extendFlat,d=e(44467).templatedArray;Q.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:d("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},A.tickvals,{editType:"plot"}),ticktext:b({},A.ticktext,{editType:"plot"}),tickformat:b({},A.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},k("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(Q,z,e){"use strict";var k=e(25706),A=e(39898),l=e(28984).keyFun,T=e(28984).repeat,b=e(71828).sorterAsc,d=e(71828).strTranslate,s=k.bar.snapRatio;function t(_,E){return _*(1-s)+E*s}var o=k.bar.snapClose;function r(_,E){return _*(1-o)+E*o}function n(_,E,L,C){if(function(J,Z){for(var V=0;V<Z.length;V++)if(J>=Z[V][0]&&J<=Z[V][1])return!0;return!1}(L,C))return L;var P=_?-1:1,I=0,j=E.length-1;if(P<0){var R=I;I=j,j=R}for(var H=E[I],F=H,U=I;P*U<P*j;U+=P){var B=U+P,N=E[B];if(P*L<P*r(H,N))return t(H,F);if(P*L<P*N||B===j)return t(N,H);F=H,H=N}}function a(_){_.attr("x",-k.bar.captureWidth/2).attr("width",k.bar.captureWidth)}function i(_){_.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(_){if(!_.brush.filterSpecified)return"0,"+_.height;for(var E,L,C,P=h(_.brush.filter.getConsolidated(),_.height),I=[0],j=P.length?P[0][0]:null,R=0;R<P.length;R++)L=(E=P[R])[1]-E[0],I.push(j),I.push(L),(C=R+1)<P.length&&(j=P[C][0]-E[1]);return I.push(_.height),I}function h(_,E){return _.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(b)})}function f(){A.select(document.body).style("cursor",null)}function x(_){_.attr("stroke-dasharray",c)}function v(_,E){var L=A.select(_).selectAll(".highlight, .highlight-shadow");x(E?L.transition().duration(k.bar.snapDuration).each("end",E):L)}function g(_,E){var L,C=_.brush,P=NaN,I={};if(C.filterSpecified){var j=_.height,R=C.filter.getConsolidated(),H=h(R,j),F=NaN,U=NaN,B=NaN;for(L=0;L<=H.length;L++){var N=H[L];if(N&&N[0]<=E&&E<=N[1]){F=L;break}if(U=L?L-1:NaN,N&&N[0]>E){B=L;break}}if(P=F,isNaN(P)&&(P=isNaN(U)||isNaN(B)?isNaN(U)?B:U:E-H[U][1]<H[B][0]-E?U:B),!isNaN(P)){var J=H[P],Z=function(K,ne){var re=k.bar.handleHeight;if(!(ne>K[1]+re||ne<K[0]-re))return ne>=.9*K[1]+.1*K[0]?"n":ne<=.9*K[0]+.1*K[1]?"s":"ns"}(J,E);Z&&(I.interval=R[P],I.intervalPix=J,I.region=Z)}}if(_.ordinal&&!I.region){var V=_.unitTickvals,W=_.unitToPaddedPx.invert(E);for(L=0;L<V.length;L++){var X=[.25*V[Math.max(L-1,0)]+.75*V[L],.25*V[Math.min(L+1,V.length-1)]+.75*V[L]];if(W>=X[0]&&W<=X[1]){I.clickableOrdinalRange=X;break}}}return I}function y(_,E){A.event.sourceEvent.stopPropagation();var L=E.height-A.mouse(_)[1]-2*k.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.newExtent=C.grabbingBar?[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):[C.startExtent,E.unitToPaddedPx.invert(L)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),v(_.parentNode)}function p(_,E){var L=g(E,E.height-A.mouse(_)[1]-2*k.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),A.select(document.body).style("cursor",C)}function m(_){_.on("mousemove",function(E){A.event.preventDefault(),E.parent.inBrushDrag||p(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||f()}).call(A.behavior.drag().on("dragstart",function(E){!function(L,C){A.event.sourceEvent.stopPropagation();var P=C.height-A.mouse(L)[1]-2*k.verticalPadding,I=C.unitToPaddedPx.invert(P),j=C.brush,R=g(C,P),H=R.interval,F=j.svgBrush;if(F.wasDragged=!1,F.grabbingBar="ns"===R.region,F.grabbingBar){var U=H.map(C.unitToPaddedPx);F.grabPoint=P-U[0]-k.verticalPadding,F.barLength=U[1]-U[0]}F.clickableOrdinalRange=R.clickableOrdinalRange,F.stayingIntervals=C.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],H&&(F.stayingIntervals=F.stayingIntervals.filter(function(B){return B[0]!==H[0]&&B[1]!==H[1]})),F.startExtent=R.region?H["s"===R.region?1:0]:I,C.parent.inBrushDrag=!0,F.brushStartCallback()}(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){!function(L,C){var P=C.brush,I=P.filter,j=P.svgBrush;j._dragging||(p(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),j._dragging=!1,A.event.sourceEvent.stopPropagation();var R=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,C.parent.inBrushDrag=!1,f(),!j.wasDragged)return j.wasDragged=void 0,j.clickableOrdinalRange?P.filterSpecified&&C.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],P.filterSpecified=!0):R?(j.extent=j.stayingIntervals,0===j.extent.length&&u(P)):u(P),j.brushCallback(C),v(L.parentNode),void j.brushEndCallback(P.filterSpecified?I.getConsolidated():[]);var H=function(){I.set(I.getConsolidated())};if(C.ordinal){var F=C.unitTickvals;F[F.length-1]<F[0]&&F.reverse(),j.newExtent=[n(0,F,j.newExtent[0],j.stayingIntervals),n(1,F,j.newExtent[1],j.stayingIntervals)];var U=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(U?[j.newExtent]:[]),j.extent.length||u(P),j.brushCallback(C),U?v(L.parentNode,H):(H(),v(L.parentNode))}else H();j.brushEndCallback(P.filterSpecified?I.getConsolidated():[])}(this,E)}))}function w(_,E){return _[0]-E[0]}function u(_){_.filterSpecified=!1,_.svgBrush.extent=[[-1/0,1/0]]}function S(_){for(var E,L=_.slice(),C=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return 1===C.length&&C[0][0]>C[0][1]&&(C=[]),C}Q.exports={makeBrush:function(_,E,L,C,P,I){var j,H,F,U,R=(U=[],{set:function(B){1===(U=B.map(function(N){return N.slice().sort(b)}).sort(w)).length&&U[0][0]===-1/0&&U[0][1]===1/0&&(U=[[0,-1]]),H=S(U),F=U.reduce(function(N,J){return[Math.min(N[0],J[0]),Math.max(N[1],J[1])]},[1/0,-1/0])},get:function(){return U.slice()},getConsolidated:function(){return H},getBounds:function(){return F}});return R.set(L),{filter:R,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(j=P,function(H){var F=H.brush,B=F.svgBrush.extent.map(function(J){return J.slice()}).slice();F.filter.set(B),j()}),brushEndCallback:I}}},ensureAxisBrush:function(_,E,L){var C=_.selectAll("."+k.cn.axisBrush).data(T,l);C.enter().append("g").classed(k.cn.axisBrush,!0),function(P,I,j){var R=j._context.staticPlot,H=P.selectAll(".background").data(T);H.enter().append("rect").classed("background",!0).call(a).call(i).style("pointer-events",R?"none":"auto").attr("transform",d(0,k.verticalPadding)),H.call(m).attr("height",function(B){return B.height-k.verticalPadding});var F=P.selectAll(".highlight-shadow").data(T);F.enter().append("line").classed("highlight-shadow",!0).attr("x",-k.bar.width/2).attr("stroke-width",k.bar.width+k.bar.strokeWidth).attr("stroke",I).attr("opacity",k.bar.strokeOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(B){return B.height}).call(x);var U=P.selectAll(".highlight").data(T);U.enter().append("line").classed("highlight",!0).attr("x",-k.bar.width/2).attr("stroke-width",k.bar.width-k.bar.strokeWidth).attr("stroke",k.bar.fillColor).attr("opacity",k.bar.fillOpacity).attr("stroke-linecap","butt"),U.attr("y1",function(B){return B.height}).call(x)}(C,E,L)},cleanRanges:function(_,E){if(Array.isArray(_[0])?(_=_.map(function(C){return C.sort(b)}),_=E.multiselect?S(_.sort(w)):[_[0]]):_=[_.sort(b)],E.tickvals){var L=E.tickvals.slice().sort(b);if(!(_=_.map(function(C){var P=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return _.length>1?_:_[0]}}},71791:function(Q,z,e){"use strict";Q.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(Q,z,e){"use strict";var k=e(39898),A=e(27659).a0,l=e(21341),T=e(77922);z.name="parcoords",z.plot=function(b){var d=A(b.calcdata,"parcoords")[0];d.length&&l(b,d)},z.clean=function(b,d,s,t){var o=t._has&&t._has("parcoords"),r=d._has&&d._has("parcoords");o&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},z.toSVG=function(b){var d=b._fullLayout._glimages,s=k.select(b).selectAll(".svg-container");s.filter(function(t,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,o=t.toDataURL("image/png");d.append("svg:image").attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){k.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(Q,z,e){"use strict";var k=e(71828).isArrayOrTypedArray,A=e(21081),l=e(28984).wrap;Q.exports=function(T,b){var d,s;return A.hasColorscale(b,"line")&&k(b.line.color)?(d=b.line.color,s=A.extractOpts(b.line).colorscale,A.calc(T,b,{vals:d,containerStr:"line",cLetter:"c"})):(d=function(t){for(var o=new Array(t),r=0;r<t;r++)o[r]=.5;return o}(b._length),s=[[0,b.line.color],[1,b.line.color]]),l({lineColor:d,cscale:s})}},25706:function(Q){"use strict";Q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(Q,z,e){"use strict";var k=e(71828),A=e(52075).hasColorscale,l=e(1586),T=e(27670).c,b=e(85501),d=e(89298),s=e(73362),t=e(57920),o=e(25706).maxDimensionCount,r=e(94397);function n(a,i,c,h){function f(p,m){return k.coerce(a,i,s.dimensions,p,m)}var x=f("values"),v=f("visible");if(x&&x.length||(v=i.visible=!1),v){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var g=f("range");i._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},d.setConvert(i._ax,h.layout),f("multiselect");var y=f("constraintrange");y&&(i.constraintrange=t.cleanRanges(y,i))}}Q.exports=function(a,i,c,h){function f(p,m){return k.coerce(a,i,s,p,m)}var x=a.dimensions;Array.isArray(x)&&x.length>o&&(k.log("parcoords traces support up to "+o+" dimensions at the moment"),x.splice(o));var v=b(a,i,{name:"dimensions",layout:h,handleItemDefaults:n}),g=function(p,m,w,u,S){var _=S("line.color",w);if(A(p,"line")&&k.isArrayOrTypedArray(_)){if(_.length)return S("line.colorscale"),l(p,m,u,S,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=w}return 1/0}(a,i,c,h,f);T(i,h,f),Array.isArray(v)&&v.length||(i.visible=!1),r(i,v,"values",g);var y={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};k.coerceFont(f,"labelfont",y),k.coerceFont(f,"tickfont",y),k.coerceFont(f,"rangefont",y),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},1602:function(Q,z,e){"use strict";var k=e(71828).isTypedArray;z.convertTypedArray=function(A){return k(A)?Array.prototype.slice.call(A):A},z.isOrdinal=function(A){return!!A.tickvals},z.isVisible=function(A){return A.visible||!("visible"in A)}},67618:function(Q,z,e){"use strict";var k=e(71791);k.plot=e(21341),Q.exports=k},83398:function(Q,z,e){"use strict";var k=e(56068),A=k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),l=k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),T=e(25706).maxDimensionCount,b=e(71828),d=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(v,g,y,p,m){var w=v._gl;w.enable(w.SCISSOR_TEST),w.scissor(g,y,p,m),v.clear({color:[0,0,0,0],depth:1})}function r(v,g,y,p,m,w){var u=w.key;y.drawCompleted||(v.read({x:0,y:0,width:1,height:1,data:d}),y.drawCompleted=!0),function S(_){var E=Math.min(p,m-_*p);0===_&&(window.cancelAnimationFrame(y.currentRafs[u]),delete y.currentRafs[u],o(v,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),y.clearOnly||(w.count=2*E,w.offset=2*_*p,g(w),_*p+E<m&&(y.currentRafs[u]=window.requestAnimationFrame(function(){S(_+1)})),y.drawCompleted=!1)}(0)}function n(v,g){for(var y=new Array(256),p=0;p<256;p++)y[p]=v(p/255).concat(g);return y}function a(v,g){return(v>>>8*g)%256/255}function i(v,g,y){for(var p=new Array(8*g),m=0,w=0;w<g;w++)for(var u=0;u<2;u++)for(var S=0;S<4;S++){var _=4*v+S,E=y[64*w+_];63===_&&0===u&&(E*=-1),p[m++]=E}return p}function c(v){var g="0"+v;return g.substr(g.length-2)}function h(v){return v<T?"p"+c(v+1)+"_"+c(v+4):"colors"}function f(v,g,y,p,m,w,u,S,_,E,L,C,P,I){for(var j=[[],[]],R=0;R<64;R++)j[0][R]=R===m?1:0,j[1][R]=R===w?1:0;var H=v.lines.canvasOverdrag*I,F=v.domain,U=v.canvasWidth*I,B=v.canvasHeight*I,N=v.pad.l*I,J=v.pad.b*I,Z=v.layoutHeight*I,V=v.layoutWidth*I,W=v.deselectedLines.color,X=v.deselectedLines.opacity;return b.extendFlat({key:L,resolution:[U,B],viewBoxPos:[(u*=I)+H,S*=I],viewBoxSize:[_*=I,E*=I],i0:m,i1:w,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:C,contextColor:[W[0]/255,W[1]/255,W[2]/255,"auto"!==X?W[3]*X:Math.max(.00392156862745098,Math.pow(1/v.lines.color.length,.3333333333333333))],scissorX:(p===g?0:u+H)+(N-H)+V*F.x[0],scissorWidth:(p===y?U-u+H:_+.5)+(p===g?u+H:0),scissorY:S+J+Z*F.y[0],scissorHeight:E,viewportX:N-H+V*F.x[0],viewportY:J+Z*F.y[0],viewportWidth:U,viewportHeight:B},P)}function x(v){var g=2047,y=Math.max(0,Math.floor(v[0]*g),0),p=Math.min(g,Math.ceil(v[1]*g),g);return[Math.min(y,p),Math.max(y,p)]}Q.exports=function(v,g){var y,m,w,u,S=g.context,_=g.pick,E=g.regl,L=E._gl,C=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),P=Math.max(C[0],Math.min(C[1],g.viewModel.plotGlPixelRatio)),I={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function(B){for(var N={},J=0;J<=T;J+=4)N[h(J)]=B.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return N}(E),R=E.texture(t),H=[];U(g);var F=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:A,frag:l,primitive:"lines",lineWidth:P,attributes:j,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:R,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function U(B){y=B.model,m=B.viewModel.dimensions.slice(),w=m[0]?m[0].values.length:0;var N=y.lines,J=_?N.color.map(function(V,W){return W/N.color.length}):N.color,Z=function(V,W,X){for(var ne=new Array(V*(T+4)),re=0,ae=0;ae<V;ae++){for(var le=0;le<T;le++)ne[re++]=le<W.length?W[le].paddedUnitValues[ae]:.5;ne[re++]=a(ae,2),ne[re++]=a(ae,1),ne[re++]=a(ae,0),ne[re++]=Math.max(1e-6,Math.min(.999999,X[ae]))}return ne}(w,m,J);(function(V,W,X){for(var K=0;K<=T;K+=4)V[h(K)](i(K/4,W,X))})(j,w,Z),S||_||(R=E.texture(b.extendFlat({data:n(y.unitToColor,255)},t)))}return{render:function(B,N,J){var Z,V,W,X=B.length,K=1/0,ne=-1/0;for(Z=0;Z<X;Z++)B[Z].dim0.canvasX<K&&(K=B[Z].dim0.canvasX,V=Z),B[Z].dim1.canvasX>ne&&(ne=B[Z].dim1.canvasX,W=Z);0===X&&o(E,0,0,y.canvasWidth,y.canvasHeight);var re=function(we){var ke,Te,$,oe=[[],[]];for($=0;$<64;$++){var he=!we&&$<m.length?m[$].brush.filter.getBounds():[-1/0,1/0];oe[0][$]=he[0],oe[1][$]=he[1]}var me=new Array(16384);for(ke=0;ke<16384;ke++)me[ke]=255;if(!we)for(ke=0;ke<m.length;ke++){var Me=ke%8,Ie=(ke-Me)/8,Pe=Math.pow(2,Me),ze=m[ke].brush.filter.get();if(!(ze.length<2)){var ce=x(ze[0])[1];for(Te=1;Te<ze.length;Te++){var ge=x(ze[Te]);for($=ce+1;$<ge[0];$++)me[8*$+Ie]&=~Pe;ce=Math.max(ce,ge[1])}}}var _e={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:me};return u?u(_e):u=E.texture(_e),{maskTexture:u,maskHeight:2048,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}(S);for(Z=0;Z<X;Z++){var ae=B[Z],le=ae.dim0.crossfilterDimensionIndex,pe=ae.dim1.crossfilterDimensionIndex,xe=ae.canvasX,ye=ae.canvasY,se=xe+ae.panelSizeX,fe=ae.plotGlPixelRatio;if(N||!H[le]||H[le][0]!==xe||H[le][1]!==se){H[le]=[xe,se];var Ee=f(y,V,W,Z,le,pe,xe,ye,ae.panelSizeX,ae.panelSizeY,ae.dim0.crossfilterDimensionIndex,S?0:_?2:1,re,fe);I.clearOnly=J,r(E,F,I,N?y.lines.blockLineCount:w,w,Ee)}}},readPixel:function(B,N){return E.read({x:B,y:N,width:1,height:1,data:s}),s},readPixels:function(B,N,J,Z){var V=new Uint8Array(4*J*Z);return E.read({x:B,y:N,width:J,height:Z,data:V}),V},destroy:function(){for(var B in v.style["pointer-events"]="none",R.destroy(),u&&u.destroy(),j)j[B].destroy()},update:U}}},94397:function(Q){"use strict";Q.exports=function(z,e,k,A){var l,T;for(A||(A=1/0),l=0;l<e.length;l++)(T=e[l]).visible&&(A=Math.min(A,T[k].length));for(A===1/0&&(A=0),z._length=A,l=0;l<e.length;l++)(T=e[l]).visible&&(T._length=A);return A}},17171:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=A.numberFormat,T=e(36652),b=e(89298),d=A.strRotate,s=A.strTranslate,t=e(63893),o=e(91424),r=e(21081),n=e(28984),a=n.keyFun,i=n.repeat,c=n.unwrap,h=e(1602),f=e(25706),x=e(57920),v=e(83398);function g(H,F,U){return A.aggNums(H,null,F,U)}function y(H,F){return m(g(Math.min,H,F),g(Math.max,H,F))}function p(H){var F=H.range;return F?m(F[0],F[1]):y(H.values,H._length)}function m(H,F){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(F)&&isFinite(F)||(F=0),H===F&&(0===H?(H-=1,F+=1):(H*=.9,F*=1.1)),[H,F]}function w(H,F,U,B,N){var J,Z,V=p(U);return B?k.scale.ordinal().domain(B.map((J=l(U.tickformat),Z=N,Z?function(W,X){return Z[X]??J(W)}:J))).range(B.map(function(W){return H-F+(W-V[0])/(V[1]-V[0])*(2*F-H)})):k.scale.linear().domain(V).range([H-F,F])}function u(H){if(H.tickvals){var F=p(H);return k.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(U){return(U-F[0])/(F[1]-F[0])}))}}function S(H){var F=H.map(function(N){return N[0]}),U=H.map(function(N){var J=T(N[1]);return k.rgb("rgb("+J[0]+","+J[1]+","+J[2]+")")}),B="rgb".split("").map(function(N){return k.scale.linear().clamp(!0).domain(F).range(U.map((J=N,function(Z){return Z[J]})));var J});return function(N){return B.map(function(J){return J(N)})}}function _(H){return H.dimensions.some(function(F){return F.brush.filterSpecified})}function E(H,F,U){var B=c(F),N=B.trace,J=h.convertTypedArray(B.lineColor),Z=N.line,V={color:T(N.unselected.line.color),opacity:N.unselected.line.opacity},W=r.extractOpts(Z),X=W.reversescale?r.flipScale(B.cscale):B.cscale,K=N.domain,ne=N.dimensions,re=H.width,ae=N.labelangle,le=N.labelside,pe=N.labelfont,xe=N.tickfont,ye=N.rangefont,se=A.extendDeepNoArrays({},Z,{color:J.map(k.scale.linear().domain(p({values:J,range:[W.min,W.max],_length:N._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),fe=Math.floor(re*(K.x[1]-K.x[0])),Ee=Math.floor(H.height*(K.y[1]-K.y[0])),de=H.margin||{l:80,r:80,t:100,b:80},we=fe,ke=Ee;return{key:U,colCount:ne.filter(h.isVisible).length,dimensions:ne,tickDistance:f.tickDistance,unitToColor:S(X),lines:se,deselectedLines:V,labelAngle:ae,labelSide:le,labelFont:pe,tickFont:xe,rangeFont:ye,layoutWidth:re,layoutHeight:H.height,domain:K,translateX:K.x[0]*re,translateY:H.height-K.y[1]*H.height,pad:de,canvasWidth:we*f.canvasPixelRatio+2*se.canvasOverdrag,canvasHeight:ke*f.canvasPixelRatio,width:we,height:ke,canvasPixelRatio:f.canvasPixelRatio}}function L(H,F,U){var re,ae,B=U.width,N=U.height,J=U.dimensions,Z=U.canvasPixelRatio,V=function(re){return B*re/Math.max(1,U.colCount-1)},W=f.verticalPadding/N,X=(re=N,ae=f.verticalPadding,k.scale.linear().range([ae,re-ae])),K={key:U.key,xScale:V,model:U,inBrushDrag:!1},ne={};return K.dimensions=J.filter(h.isVisible).map(function(re,ae){var me,Me,le=(me=re,Me=W,k.scale.linear().domain(p(me)).range([Me,1-Me])),pe=ne[re.label];ne[re.label]=(pe||0)+1;var xe=re.label+(pe?"__"+pe:""),ye=re.constraintrange,se=ye&&ye.length;se&&!Array.isArray(ye[0])&&(ye=[ye]);var fe=se?ye.map(function(me){return me.map(le)}):[[-1/0,1/0]],Ee=re.values;Ee.length>re._length&&(Ee=Ee.slice(0,re._length));var de,we=re.tickvals;function ke(me,Me){return{val:me,text:de[Me]}}function Te(me,Me){return me.val-Me.val}if(Array.isArray(we)&&we.length){de=re.ticktext,Array.isArray(de)&&de.length?de.length>we.length?de=de.slice(0,we.length):we.length>de.length&&(we=we.slice(0,de.length)):de=we.map(l(re.tickformat));for(var $=1;$<we.length;$++)if(we[$]<we[$-1]){for(var oe=we.map(ke).sort(Te),he=0;he<we.length;he++)we[he]=oe[he].val,de[he]=oe[he].text;break}}else we=void 0;return Ee=h.convertTypedArray(Ee),{key:xe,label:re.label,tickFormat:re.tickformat,tickvals:we,ticktext:de,ordinal:h.isOrdinal(re),multiselect:re.multiselect,xIndex:ae,crossfilterDimensionIndex:ae,visibleIndex:re._index,height:N,values:Ee,paddedUnitValues:Ee.map(le),unitTickvals:we&&we.map(le),xScale:V,x:V(ae),canvasX:V(ae)*Z,unitToPaddedPx:X,domainScale:w(N,f.verticalPadding,re,we,de),ordinalScale:u(re),parent:K,model:U,brush:x.makeBrush(H,se,fe,function(){H.linePickActive(!1)},function(){var me=K;me.focusLayer&&me.focusLayer.render(me.panels,!0);var Me=_(me);!H.contextShown()&&Me?(me.contextLayer&&me.contextLayer.render(me.panels,!0),H.contextShown(!0)):H.contextShown()&&!Me&&(me.contextLayer&&me.contextLayer.render(me.panels,!0,!0),H.contextShown(!1))},function(me){if(K.focusLayer.render(K.panels,!0),K.pickLayer&&K.pickLayer.render(K.panels,!0),H.linePickActive(!0),F&&F.filterChanged){var Me=le.invert,Ie=me.map(function(Pe){return Pe.map(Me).sort(A.sorterAsc)}).sort(function(Pe,ze){return Pe[0]-ze[0]});F.filterChanged(K.key,re._index,Ie)}})}}),K}function C(H){H.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(H,F){var B=H*Math.PI/180;return{dir:"top"===F?1:-1,dx:Math.sin(B),dy:Math.cos(B),degrees:H}}function I(H,F,U){for(var B=F.panels||(F.panels=[]),N=H.data(),J=0;J<N.length-1;J++){var Z=B[J]||(B[J]={}),V=N[J],W=N[J+1];Z.dim0=V,Z.dim1=W,Z.canvasX=V.canvasX,Z.panelSizeX=W.canvasX-V.canvasX,Z.panelSizeY=F.model.canvasHeight,Z.y=0,Z.canvasY=0,Z.plotGlPixelRatio=U}}function j(H,F){return b.tickText(H._ax,F,!1).text}function R(H,F){if(H.ordinal)return"";var U=H.domainScale.domain();return j(H.model.dimensions[H.visibleIndex],U[F?U.length-1:0])}Q.exports=function(H,F,U,B){var N=H._context.staticPlot,J=H._fullLayout,Z=J._toppaper,V=J._glcontainer,W=H._context.plotGlPixelRatio,X=H._fullLayout.paper_bgcolor;!function(me){for(var Me=0;Me<me.length;Me++)for(var Ie=0;Ie<me[Me].length;Ie++)for(var Pe=me[Me][Ie].trace,ze=Pe.dimensions,ce=0;ce<ze.length;ce++){var ge=ze[ce].values,_e=ze[ce]._ax;_e&&(_e.range=_e.range?m(_e.range[0],_e.range[1]):y(ge,Pe._length),_e.dtick||(_e.dtick=.01*(Math.abs(_e.range[1]-_e.range[0])||1)),_e.tickformat=ze[ce].tickformat,b.calcTicks(_e),_e.cleanRange())}}(F);var K,ne,re=(K=!0,ne=!1,{linePickActive:function(me){return arguments.length?K=!!me:K},contextShown:function(me){return arguments.length?ne=!!me:ne}}),ae=F.filter(function(me){return c(me).trace.visible}).map(E.bind(0,U)).map(L.bind(0,re,B));V.each(function(me,Me){return A.extendFlat(me,ae[Me])});var le=V.selectAll(".gl-canvas").each(function(me){me.viewModel=ae[0],me.viewModel.plotGlPixelRatio=W,me.viewModel.paperColor=X,me.model=me.viewModel?me.viewModel.model:null}),pe=null;le.filter(function(me){return me.pick}).style("pointer-events",N?"none":"auto").on("mousemove",function(me){if(re.linePickActive()&&me.lineLayer&&B&&B.hover){var Me=k.event,Ie=this.width,Pe=this.height,ze=k.mouse(this),ce=ze[0],ge=ze[1];if(ce<0||ge<0||ce>=Ie||ge>=Pe)return;var _e=me.lineLayer.readPixel(ce,Pe-1-ge),De=0!==_e[3],He=De?_e[2]+256*(_e[1]+256*_e[0]):null,Ve={x:ce,y:ge,clientX:Me.clientX,clientY:Me.clientY,dataIndex:me.model.key,curveNumber:He};He!==pe&&(De?B.hover(Ve):B.unhover&&B.unhover(Ve),pe=He)}}),le.style("opacity",function(me){return me.pick?0:1}),Z.style("background","rgba(255, 255, 255, 0)");var xe=Z.selectAll("."+f.cn.parcoords).data(ae,a);xe.exit().remove(),xe.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),xe.attr("transform",function(me){return s(me.model.translateX,me.model.translateY)});var ye=xe.selectAll("."+f.cn.parcoordsControlView).data(i,a);ye.enter().append("g").classed(f.cn.parcoordsControlView,!0),ye.attr("transform",function(me){return s(me.model.pad.l,me.model.pad.t)});var se=ye.selectAll("."+f.cn.yAxis).data(function(me){return me.dimensions},a);se.enter().append("g").classed(f.cn.yAxis,!0),ye.each(function(me){I(se,me,W)}),le.each(function(me){me.viewModel&&(!me.lineLayer||B?me.lineLayer=v(this,me):me.lineLayer.update(me),(me.key||0===me.key)&&(me.viewModel[me.key]=me.lineLayer),me.lineLayer.render(me.viewModel.panels,!me.context||B))}),se.attr("transform",function(me){return s(me.xScale(me.xIndex),0)}),se.call(k.behavior.drag().origin(function(me){return me}).on("drag",function(me){var Me=me.parent;re.linePickActive(!1),me.x=Math.max(-f.overdrag,Math.min(me.model.width+f.overdrag,k.event.x)),me.canvasX=me.x*me.model.canvasPixelRatio,se.sort(function(Ie,Pe){return Ie.x-Pe.x}).each(function(Ie,Pe){Ie.xIndex=Pe,Ie.x=me===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),I(se,Me,W),se.filter(function(Ie){return 0!==Math.abs(me.xIndex-Ie.xIndex)}).attr("transform",function(Ie){return s(Ie.xScale(Ie.xIndex),0)}),k.select(this).attr("transform",s(me.x,0)),se.each(function(Ie,Pe,ze){ze===me.parent.key&&(Me.dimensions[Pe]=Ie)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!_(Me)),Me.focusLayer.render&&Me.focusLayer.render(Me.panels)}).on("dragend",function(me){var Me=me.parent;me.x=me.xScale(me.xIndex),me.canvasX=me.x*me.model.canvasPixelRatio,I(se,Me,W),k.select(this).attr("transform",function(Ie){return s(Ie.x,0)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!_(Me)),Me.focusLayer&&Me.focusLayer.render(Me.panels),Me.pickLayer&&Me.pickLayer.render(Me.panels,!0),re.linePickActive(!0),B&&B.axesMoved&&B.axesMoved(Me.key,Me.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),se.exit().remove();var fe=se.selectAll("."+f.cn.axisOverlays).data(i,a);fe.enter().append("g").classed(f.cn.axisOverlays,!0),fe.selectAll("."+f.cn.axis).remove();var Ee=fe.selectAll("."+f.cn.axis).data(i,a);Ee.enter().append("g").classed(f.cn.axis,!0),Ee.each(function(me){var Me=me.model.height/me.model.tickDistance,Ie=me.domainScale,Pe=Ie.domain();k.select(this).call(k.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Me,me.tickFormat).tickValues(me.ordinal?Pe:null).tickFormat(function(ze){return h.isOrdinal(me)?ze:j(me.model.dimensions[me.visibleIndex],ze)}).scale(Ie)),o.font(Ee.selectAll("text"),me.model.tickFont)}),Ee.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ee.selectAll("text").style("text-shadow",t.makeTextShadow(X)).style("cursor","default");var de=fe.selectAll("."+f.cn.axisHeading).data(i,a);de.enter().append("g").classed(f.cn.axisHeading,!0);var we=de.selectAll("."+f.cn.axisTitle).data(i,a);we.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",N?"none":"auto"),we.text(function(me){return me.label}).each(function(me){var Me=k.select(this);o.font(Me,me.model.labelFont),t.convertToTspans(Me,H)}).attr("transform",function(me){var Me=P(me.model.labelAngle,me.model.labelSide),Ie=f.axisTitleOffset;return(Me.dir>0?"":s(0,2*Ie+me.model.height))+d(Me.degrees)+s(-Ie*Me.dx,-Ie*Me.dy)}).attr("text-anchor",function(me){var Me=P(me.model.labelAngle,me.model.labelSide);return 2*Math.abs(Me.dx)>Math.abs(Me.dy)?Me.dir*Me.dx<0?"start":"end":"middle"});var ke=fe.selectAll("."+f.cn.axisExtent).data(i,a);ke.enter().append("g").classed(f.cn.axisExtent,!0);var Te=ke.selectAll("."+f.cn.axisExtentTop).data(i,a);Te.enter().append("g").classed(f.cn.axisExtentTop,!0),Te.attr("transform",s(0,-f.axisExtentOffset));var $=Te.selectAll("."+f.cn.axisExtentTopText).data(i,a);$.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(C),$.text(function(me){return R(me,!0)}).each(function(me){o.font(k.select(this),me.model.rangeFont)});var oe=ke.selectAll("."+f.cn.axisExtentBottom).data(i,a);oe.enter().append("g").classed(f.cn.axisExtentBottom,!0),oe.attr("transform",function(me){return s(0,me.model.height+f.axisExtentOffset)});var he=oe.selectAll("."+f.cn.axisExtentBottomText).data(i,a);he.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),he.text(function(me){return R(me,!1)}).each(function(me){o.font(k.select(this),me.model.rangeFont)}),x.ensureAxisBrush(fe,X,H)}},21341:function(Q,z,e){"use strict";var k=e(17171),A=e(79749),l=e(1602).isVisible,T={};function b(d,s,t){var o=s.indexOf(t),r=d.indexOf(o);return-1===r&&(r+=s.length),r}(Q.exports=function(d,s){var t=d._fullLayout;if(A(d,[],T)){var o={},r={},n={},a={},i=t._size;s.forEach(function(c,h){var f=c[0].trace;n[h]=f.index;var x=a[h]=f._fullInput.index;o[h]=d.data[x].dimensions,r[h]=d.data[x].dimensions.slice()}),k(d,s,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(c,h,f){var x=r[c][h],v=f.map(function(u){return u.slice()}),g="dimensions["+h+"].constraintrange",y=t._tracePreGUI[d._fullData[n[c]]._fullInput.uid];void 0===y[g]&&(y[g]=x.constraintrange||null);var m=d._fullData[n[c]].dimensions[h];v.length?(1===v.length&&(v=v[0]),x.constraintrange=v,m.constraintrange=v.slice(),v=[v]):(delete x.constraintrange,delete m.constraintrange,v=null);var w={};w[g]=v,d.emit("plotly_restyle",[w,[a[c]]])},hover:function(c){d.emit("plotly_hover",c)},unhover:function(c){d.emit("plotly_unhover",c)},axesMoved:function(c,h){var x,v,f=(x=h,v=r[c].filter(l),function(g,y){return b(x,v,g)-b(x,v,y)});o[c].sort(f),r[c].filter(function(x){return!l(x)}).sort(function(x){return r[c].indexOf(x)}).forEach(function(x){o[c].splice(o[c].indexOf(x),1),o[c].splice(r[c].indexOf(x),0,x)}),d.emit("plotly_restyle",[{dimensions:[o[c]]},[a[c]]])}})}}).reglPrecompiled=T},34e3:function(Q,z,e){"use strict";var k=e(9012),A=e(27670).Y,l=e(41940),T=e(22399),b=e(5386).f,d=e(5386).s,s=e(1426).extendFlat,t=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});Q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:d({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},t,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},t,{}),outsidetextfont:s({},t,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},t,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:A({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},t,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(Q,z,e){"use strict";var k=e(74875);z.name="pie",z.plot=function(A,l,T,b){k.plotBasePlot(z.name,A,l,T,b)},z.clean=function(A,l,T,b){k.cleanBasePlot(z.name,A,l,T,b)}},32354:function(Q,z,e){"use strict";var k=e(92770),A=e(84267),l=e(7901),T={};function b(s){return function(t,o){return!!t&&!!(t=A(t)).isValid()&&(t=l.addOpacity(t,t.getAlpha()),s[o]||(s[o]=t),t)}}function d(s,t){var o,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),o=0;o<s.length;o++)n.push(A(s[o]).lighten(20).toHexString());for(o=0;o<s.length;o++)n.push(A(s[o]).darken(20).toHexString());t[r]=n}return n}Q.exports={calc:function(s,t){var o,r,n=[],a=s._fullLayout,i=a.hiddenlabels||[],c=t.labels,h=t.marker.colors||[],f=t.values,x=t._length,v=t._hasValues&&x;if(t.dlabel)for(c=new Array(x),o=0;o<x;o++)c[o]=String(t.label0+o*t.dlabel);var g={},y=b(a["_"+t.type+"colormap"]),p=0,m=!1;for(o=0;o<x;o++){var w,u,S;if(v){if(!k(w=f[o]))continue;w=+w}else w=1;void 0!==(u=c[o])&&""!==u||(u=o);var _=g[u=String(u)];void 0===_?(g[u]=n.length,(S=-1!==i.indexOf(u))||(p+=w),n.push({v:w,label:u,color:y(h[o],u),i:o,pts:[o],hidden:S})):(m=!0,(r=n[_]).v+=w,r.pts.push(o),r.hidden||(p+=w),!1===r.color&&h[o]&&(r.color=y(h[o],u)))}return n=n.filter(function(E){return E.v>=0}),("funnelarea"===t.type?m:t.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(s,t){var o=(t||{}).type;o||(o="pie");var r=s._fullLayout,n=s.calcdata,a=r[o+"colorway"],i=r["_"+o+"colormap"];r["extend"+o+"colors"]&&(a=d(a,T));for(var c=0,h=0;h<n.length;h++){var f=n[h];if(f[0].trace.type===o)for(var x=0;x<f.length;x++){var v=f[x];!1===v.color&&(i[v.label]?v.color=i[v.label]:(i[v.label]=v.color=a[c%a.length],c++))}}},makePullColorFn:b,generateExtendedColors:d}},37434:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(34e3),T=e(27670).c,b=e(90769).handleText;function d(s,t){var o=Array.isArray(s),r=A.isArrayOrTypedArray(t),n=Math.min(o?s.length:1/0,r?t.length:1/0);if(isFinite(n)||(n=0),n&&r){for(var a,i=0;i<n;i++){var c=t[i];if(k(c)&&c>0){a=!0;break}}a||(n=0)}return{hasLabels:o,hasValues:r,len:n}}Q.exports={handleLabelsAndValues:d,supplyDefaults:function(s,t,o,r){function n(y,p){return A.coerce(s,t,l,y,p)}var a=d(n("labels"),n("values")),i=a.len;if(t._hasLabels=a.hasLabels,t._hasValues=a.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),i){t._length=i,n("marker.line.width")&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var c,h=n("text"),f=n("texttemplate");if(f||(c=n("textinfo",Array.isArray(h)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&"none"!==c){var x=n("textposition");b(s,t,r,n,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(x)||"auto"===x||"outside"===x)&&n("automargin"),("inside"===x||"auto"===x||Array.isArray(x))&&n("insidetextorientation")}T(t,r,n);var v=n("hole");if(n("title.text")){var g=n("title.position",v?"middle center":"top center");v||"middle center"!==g||(t.title.position="top center"),A.coerceFont(n,"title.font",r.font)}n("sort"),n("direction"),n("rotation"),n("pull")}else t.visible=!1}}},20007:function(Q,z,e){"use strict";var k=e(23469).appendArrayMultiPointValues;Q.exports=function(A,l){var T={curveNumber:l.index,pointNumbers:A.pts,data:l._input,fullData:l,label:A.label,color:A.color,value:A.v,percent:A.percent,text:A.text,bbox:A.bbox,v:A.v};return 1===A.pts.length&&(T.pointNumber=T.i=A.pts[0]),k(T,l,A.pts),"funnelarea"===l.type&&(delete T.v,delete T.i),T}},53581:function(Q,z,e){"use strict";var k=e(71828);function A(l){return-1!==l.indexOf("e")?l.replace(/[.]?0+e/,"e"):-1!==l.indexOf(".")?l.replace(/[.]?0+$/,""):l}z.formatPiePercent=function(l,T){var b=A((100*l).toPrecision(3));return k.numSeparate(b,T)+"%"},z.formatPieValue=function(l,T){var b=A(l.toPrecision(10));return k.numSeparate(b,T)},z.getFirstFilled=function(l,T){if(Array.isArray(l))for(var b=0;b<T.length;b++){var d=l[T[b]];if(d||0===d||""===d)return d}},z.castOption=function(l,T){return Array.isArray(l)?z.getFirstFilled(l,T):l||void 0},z.getRotationAngle=function(l){return("auto"===l?0:l)*Math.PI/180}},58810:function(Q,z,e){"use strict";Q.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(Q){"use strict";Q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(Q,z,e){"use strict";var k=e(71828),A=e(92774);Q.exports=function(l,T){function b(d,s){return k.coerce(l,T,A,d,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},14575:function(Q,z,e){"use strict";var k=e(39898),A=e(74875),l=e(30211),T=e(7901),b=e(91424),d=e(71828),s=d.strScale,t=d.strTranslate,o=e(63893),r=e(72597),n=r.recordMinTextSize,a=r.clearMinTextSize,i=e(97313).TEXTPAD,c=e(53581),h=e(20007),f=e(71828).isValidTextValue;function x(F,U,B){var N=B[0],J=N.cx,Z=N.cy,V=N.trace,W="funnelarea"===V.type;"_hasHoverLabel"in V||(V._hasHoverLabel=!1),"_hasHoverEvent"in V||(V._hasHoverEvent=!1),F.on("mouseover",function(X){var K=U._fullLayout,ne=U._fullData[V.index];if(!U._dragging&&!1!==K.hovermode){var re=ne.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[c.castOption(re,X.pts)],_module:V._module},K,0)),"all"===re&&(re="label+text+value+percent+name"),ne.hovertemplate||"none"!==re&&"skip"!==re&&re){var ae=X.rInscribed||0,le=J+X.pxmid[0]*(1-ae),pe=Z+X.pxmid[1]*(1-ae),xe=K.separators,ye=[];if(re&&-1!==re.indexOf("label")&&ye.push(X.label),X.text=c.castOption(ne.hovertext||ne.text,X.pts),re&&-1!==re.indexOf("text")){var se=X.text;d.isValidTextValue(se)&&ye.push(se)}X.value=X.v,X.valueLabel=c.formatPieValue(X.v,xe),re&&-1!==re.indexOf("value")&&ye.push(X.valueLabel),X.percent=X.v/N.vTotal,X.percentLabel=c.formatPiePercent(X.percent,xe),re&&-1!==re.indexOf("percent")&&ye.push(X.percentLabel);var fe=ne.hoverlabel,Ee=fe.font,de=[];l.loneHover({trace:V,x0:le-ae*N.r,x1:le+ae*N.r,y:pe,_x0:W?J+X.TL[0]:le-ae*N.r,_x1:W?J+X.TR[0]:le+ae*N.r,_y0:W?Z+X.TL[1]:pe-ae*N.r,_y1:W?Z+X.BL[1]:pe+ae*N.r,text:ye.join("<br>"),name:ne.hovertemplate||-1!==re.indexOf("name")?ne.name:void 0,idealAlign:X.pxmid[0]<0?"left":"right",color:c.castOption(fe.bgcolor,X.pts)||X.color,borderColor:c.castOption(fe.bordercolor,X.pts),fontFamily:c.castOption(Ee.family,X.pts),fontSize:c.castOption(Ee.size,X.pts),fontColor:c.castOption(Ee.color,X.pts),nameLength:c.castOption(fe.namelength,X.pts),textAlign:c.castOption(fe.align,X.pts),hovertemplate:c.castOption(ne.hovertemplate,X.pts),hovertemplateLabels:X,eventData:[h(X,ne)]},{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:U,inOut_bbox:de}),X.bbox=de[0],V._hasHoverLabel=!0}V._hasHoverEvent=!0,U.emit("plotly_hover",{points:[h(X,ne)],event:k.event})}}),F.on("mouseout",function(X){var K=U._fullLayout,ne=U._fullData[V.index],re=k.select(this).datum();V._hasHoverEvent&&(X.originalEvent=k.event,U.emit("plotly_unhover",{points:[h(re,ne)],event:k.event}),V._hasHoverEvent=!1),V._hasHoverLabel&&(l.loneUnhover(K._hoverlayer.node()),V._hasHoverLabel=!1)}),F.on("click",function(X){U._dragging||!1===U._fullLayout.hovermode||(U._hoverdata=[h(X,U._fullData[V.index])],l.click(U,k.event))})}function v(F,U,B){var N=c.castOption(F.insidetextfont.color,U.pts);!N&&F._input.textfont&&(N=c.castOption(F._input.textfont.color,U.pts));var J=c.castOption(F.insidetextfont.family,U.pts)||c.castOption(F.textfont.family,U.pts)||B.family,Z=c.castOption(F.insidetextfont.size,U.pts)||c.castOption(F.textfont.size,U.pts)||B.size;return{color:N||T.contrast(U.color),family:J,size:Z}}function g(F,U){for(var B,N,J=0;J<F.length;J++)if((N=(B=F[J][0]).trace).title.text){var Z=N.title.text;N._meta&&(Z=d.templateString(Z,N._meta));var V=b.tester.append("text").attr("data-notex",1).text(Z).call(b.font,N.title.font).call(o.convertToTspans,U),W=b.bBox(V.node(),!0);B.titleBox={width:W.width,height:W.height},V.remove()}}function y(F,U,B){var N=B.r||U.rpx1,J=U.rInscribed;if(U.startangle===U.stopangle)return{rCenter:1-J,scale:0,rotate:0,textPosAngle:0};var Z,V=U.ring,W=1===V&&Math.abs(U.startangle-U.stopangle)===2*Math.PI,X=U.halfangle,K=U.midangle,ne=B.trace.insidetextorientation,re="horizontal"===ne,ae="tangential"===ne,le="radial"===ne,pe="auto"===ne,xe=[];if(!pe){var ye,se=function(Te,$){if(ze=(Me=U).stopangle,(Pe=Me.startangle)>(Ie=Te)&&Ie>ze||Pe<Ie&&Ie<ze){var oe=Math.abs(Te-U.startangle),he=Math.abs(Te-U.stopangle),me=oe<he?oe:he;(Z="tan"===$?m(F,N,V,me,0):p(F,N,V,me,Math.PI/2)).textPosAngle=Te,xe.push(Z)}var Me,Ie,Pe,ze};if(re||ae){for(ye=4;ye>=-4;ye-=2)se(Math.PI*ye,"tan");for(ye=4;ye>=-4;ye-=2)se(Math.PI*(ye+1),"tan")}if(re||le){for(ye=4;ye>=-4;ye-=2)se(Math.PI*(ye+1.5),"rad");for(ye=4;ye>=-4;ye-=2)se(Math.PI*(ye+.5),"rad")}}if(W||pe||re){var fe=Math.sqrt(F.width*F.width+F.height*F.height);if((Z={scale:J*N*2/fe,rCenter:1-J,rotate:0}).textPosAngle=(U.startangle+U.stopangle)/2,Z.scale>=1)return Z;xe.push(Z)}(pe||le)&&((Z=p(F,N,V,X,K)).textPosAngle=(U.startangle+U.stopangle)/2,xe.push(Z)),(pe||ae)&&((Z=m(F,N,V,X,K)).textPosAngle=(U.startangle+U.stopangle)/2,xe.push(Z));for(var Ee=0,de=0,we=0;we<xe.length;we++){var ke=xe[we].scale;if(de<ke&&(de=ke,Ee=we),!pe&&de>=1)break}return xe[Ee]}function p(F,U,B,N,J){U=Math.max(0,U-2*i);var Z=F.width/F.height,V=S(Z,N,U,B);return{scale:2*V/F.height,rCenter:w(Z,V/U),rotate:u(J)}}function m(F,U,B,N,J){U=Math.max(0,U-2*i);var Z=F.height/F.width,V=S(Z,N,U,B);return{scale:2*V/F.width,rCenter:w(Z,V/U),rotate:u(J+Math.PI/2)}}function w(F,U){return Math.cos(U)-F*U}function u(F){return(180/Math.PI*F+720)%180-90}function S(F,U,B,N){var J=F+1/(2*Math.tan(U));return B*Math.min(1/(Math.sqrt(J*J+.5)+J),N/(Math.sqrt(F*F+N/2)+F))}function _(F,U){return F.v!==U.vTotal||U.trace.hole?Math.min(1/(1+1/Math.sin(F.halfangle)),F.ring/2):1}function E(F,U){var B=U.pxmid[0],N=U.pxmid[1],J=F.width/2,Z=F.height/2;return B<0&&(J*=-1),N<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:J+Math.abs(Z)*(J>0?1:-1)/2,y:Z/(1+B*B/(N*N)),outside:!0}}function L(F,U){var B,N,J,Z=F.trace,V={x:F.cx,y:F.cy},W={tx:0,ty:0};W.ty+=Z.title.font.size,J=P(Z),-1!==Z.title.position.indexOf("top")?(V.y-=(1+J)*F.r,W.ty-=F.titleBox.height):-1!==Z.title.position.indexOf("bottom")&&(V.y+=(1+J)*F.r);var X,K=F.r/(void 0===(X=F.trace.aspectratio)?1:X),ne=U.w*(Z.domain.x[1]-Z.domain.x[0])/2;return-1!==Z.title.position.indexOf("left")?(ne+=K,V.x-=(1+J)*K,W.tx+=F.titleBox.width/2):-1!==Z.title.position.indexOf("center")?ne*=2:-1!==Z.title.position.indexOf("right")&&(ne+=K,V.x+=(1+J)*K,W.tx-=F.titleBox.width/2),B=ne/F.titleBox.width,N=C(F,U)/F.titleBox.height,{x:V.x,y:V.y,scale:Math.min(B,N),tx:W.tx,ty:W.ty}}function C(F,U){var B=F.trace;return Math.min(F.titleBox.height,U.h*(B.domain.y[1]-B.domain.y[0])/2)}function P(F){var U,B=F.pull;if(!B)return 0;if(Array.isArray(B))for(B=0,U=0;U<F.pull.length;U++)F.pull[U]>B&&(B=F.pull[U]);return B}function I(F,U){for(var B=[],N=0;N<F.length;N++){var J=F[N][0],Z=J.trace,V=Z.domain,W=U.w*(V.x[1]-V.x[0]),X=U.h*(V.y[1]-V.y[0]);Z.title.text&&"middle center"!==Z.title.position&&(X-=C(J,U));var ne=X/2;"funnelarea"!==Z.type||Z.scalegroup||(ne/=Z.aspectratio),J.r=Math.min(W/2,ne)/(1+P(Z)),J.cx=U.l+U.w*(Z.domain.x[1]+Z.domain.x[0])/2,J.cy=U.t+U.h*(1-Z.domain.y[0])-X/2,Z.title.text&&-1!==Z.title.position.indexOf("bottom")&&(J.cy-=C(J,U)),Z.scalegroup&&-1===B.indexOf(Z.scalegroup)&&B.push(Z.scalegroup)}!function(re,ae){for(var le,pe,xe,ye=0;ye<ae.length;ye++){var se=1/0,fe=ae[ye];for(pe=0;pe<re.length;pe++)if((xe=(le=re[pe][0]).trace).scalegroup===fe){var Ee;if("pie"===xe.type)Ee=le.r*le.r;else if("funnelarea"===xe.type){var de,we;xe.aspectratio>1?we=(de=le.r)/xe.aspectratio:de=(we=le.r)*xe.aspectratio,Ee=(de*=(1+xe.baseratio)/2)*we}se=Math.min(se,Ee/le.vTotal)}for(pe=0;pe<re.length;pe++)if((xe=(le=re[pe][0]).trace).scalegroup===fe){var ke=se*le.vTotal;"funnelarea"===xe.type&&(ke/=(1+xe.baseratio)/2,ke/=xe.aspectratio),le.r=Math.sqrt(ke)}}}(F,B)}function j(F,U){return[F*Math.sin(U),-F*Math.cos(U)]}function R(F,U,B){var Ee,N=F._fullLayout,J=B.trace,Z=J.texttemplate,V=J.textinfo;if(!Z&&V&&"none"!==V){var W,X=V.split("+"),K=function(Ee){return-1!==X.indexOf(Ee)},ne=K("label"),re=K("text"),ae=K("value"),le=K("percent"),pe=N.separators;if(W=ne?[U.label]:[],re){var xe=c.getFirstFilled(J.text,U.pts);f(xe)&&W.push(xe)}ae&&W.push(c.formatPieValue(U.v,pe)),le&&W.push(c.formatPiePercent(U.v/B.vTotal,pe)),U.text=W.join("<br>")}if(Z){var ye=d.castOption(J,U.i,"texttemplate");if(ye){var se={label:(Ee=U).label,value:Ee.v,valueLabel:c.formatPieValue(Ee.v,N.separators),percent:Ee.v/B.vTotal,percentLabel:c.formatPiePercent(Ee.v/B.vTotal,N.separators),color:Ee.color,text:Ee.text,customdata:d.castOption(J,Ee.i,"customdata")},fe=c.getFirstFilled(J.text,U.pts);(f(fe)||""===fe)&&(se.text=fe),U.text=d.texttemplateString(ye,se,F._fullLayout._d3locale,se,J._meta||{})}else U.text=""}}function H(F,U){var B=F.rotate*Math.PI/180,N=Math.cos(B),J=Math.sin(B),Z=(U.left+U.right)/2,V=(U.top+U.bottom)/2;F.textX=Z*N-V*J,F.textY=Z*J+V*N,F.noCenter=!0}Q.exports={plot:function(F,U){var B=F._context.staticPlot,N=F._fullLayout,J=N._size;a("pie",N),g(U,F),I(U,J);var Z=d.makeTraceGroups(N._pielayer,U,"trace").each(function(V){var W=k.select(this),X=V[0],K=X.trace;(function(ne){var re,ae,le,pe=ne[0],xe=pe.r,ye=pe.trace,se=c.getRotationAngle(ye.rotation),fe=2*Math.PI/pe.vTotal,Ee="px0",de="px1";if("counterclockwise"===ye.direction){for(re=0;re<ne.length&&ne[re].hidden;re++);if(re===ne.length)return;se+=fe*ne[re].v,fe*=-1,Ee="px1",de="px0"}for(le=j(xe,se),re=0;re<ne.length;re++)(ae=ne[re]).hidden||(ae[Ee]=le,ae.startangle=se,ae.pxmid=j(xe,se+=fe*ae.v/2),ae.midangle=se,le=j(xe,se+=fe*ae.v/2),ae.stopangle=se,ae[de]=le,ae.largeArc=ae.v>pe.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/pe.vTotal,.5),ae.ring=1-ye.hole,ae.rInscribed=_(ae,pe))})(V),W.attr("stroke-linejoin","round"),W.each(function(){var ne=k.select(this).selectAll("g.slice").data(V);ne.enter().append("g").classed("slice",!0),ne.exit().remove();var re=[[[],[]],[[],[]]],ae=!1;ne.each(function(de,we){if(de.hidden)k.select(this).selectAll("path,g").remove();else{de.pointNumber=de.i,de.curveNumber=K.index,re[de.pxmid[1]<0?0:1][de.pxmid[0]<0?0:1].push(de);var ke=X.cx,Te=X.cy,$=k.select(this),oe=$.selectAll("path.surface").data([de]);if(oe.enter().append("path").classed("surface",!0).style({"pointer-events":B?"none":"all"}),$.call(x,F,V),K.pull){var he=+c.castOption(K.pull,de.pts)||0;he>0&&(ke+=he*de.pxmid[0],Te+=he*de.pxmid[1])}de.cxFinal=ke,de.cyFinal=Te;var me=K.hole;if(de.v===X.vTotal){var Me="M"+(ke+de.px0[0])+","+(Te+de.px0[1])+ge(de.px0,de.pxmid,!0,1)+ge(de.pxmid,de.px0,!0,1)+"Z";oe.attr("d",me?"M"+(ke+me*de.px0[0])+","+(Te+me*de.px0[1])+ge(de.px0,de.pxmid,!1,me)+ge(de.pxmid,de.px0,!1,me)+"Z"+Me:Me)}else{var Ie=ge(de.px0,de.px1,!0,1);if(me){var Pe=1-me;oe.attr("d","M"+(ke+me*de.px1[0])+","+(Te+me*de.px1[1])+ge(de.px1,de.px0,!1,me)+"l"+Pe*de.px0[0]+","+Pe*de.px0[1]+Ie+"Z")}else oe.attr("d","M"+ke+","+Te+"l"+de.px0[0]+","+de.px0[1]+Ie+"Z")}R(F,de,X);var ze=c.castOption(K.textposition,de.pts),ce=$.selectAll("g.slicetext").data(de.text&&"none"!==ze?[0]:[]);ce.enter().append("g").classed("slicetext",!0),ce.exit().remove(),ce.each(function(){var wt,bt,_t,_e=d.ensureSingle(k.select(this),"text","",function(wt){wt.attr("data-notex",1)}),De=d.ensureUniformFontSize(F,"outside"===ze?(_t=N.font,{color:c.castOption((wt=K).outsidetextfont.color,(bt=de).pts)||c.castOption(wt.textfont.color,bt.pts)||_t.color,family:c.castOption(wt.outsidetextfont.family,bt.pts)||c.castOption(wt.textfont.family,bt.pts)||_t.family,size:c.castOption(wt.outsidetextfont.size,bt.pts)||c.castOption(wt.textfont.size,bt.pts)||_t.size}):v(K,de,N.font));_e.text(de.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,De).call(o.convertToTspans,F);var He,Ve=b.bBox(_e.node());if("outside"===ze)He=E(Ve,de);else if(He=y(Ve,de,X),"auto"===ze&&He.scale<1){var nt=d.ensureUniformFontSize(F,K.outsidetextfont);_e.call(b.font,nt),He=E(Ve=b.bBox(_e.node()),de)}var tt=He.textPosAngle,at=void 0===tt?de.pxmid:j(X.r,tt);if(He.targetX=ke+at[0]*He.rCenter+(He.x||0),He.targetY=Te+at[1]*He.rCenter+(He.y||0),H(He,Ve),He.outside){var dt=He.targetY;de.yLabelMin=dt-Ve.height/2,de.yLabelMid=dt,de.yLabelMax=dt+Ve.height/2,de.labelExtraX=0,de.labelExtraY=0,ae=!0}He.fontSize=De.size,n(K.type,He,N),V[we].transform=He,d.setTransormAndDisplay(_e,He)})}function ge(_e,De,He,Ve){return"a"+Ve*X.r+","+Ve*X.r+" 0 "+de.largeArc+(He?" 1 ":" 0 ")+Ve*(De[0]-_e[0])+","+Ve*(De[1]-_e[1])}});var we,le=k.select(this).selectAll("g.titletext").data(K.title.text?[0]:[]);if(le.enter().append("g").classed("titletext",!0),le.exit().remove(),le.each(function(){var de,Te,$,we=d.ensureSingle(k.select(this),"text","",function(Te){Te.attr("data-notex",1)}),ke=K.title.text;K._meta&&(ke=d.templateString(ke,K._meta)),we.text(ke).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,K.title.font).call(o.convertToTspans,F),de="middle center"===K.title.position?(Te=X,$=Math.sqrt(Te.titleBox.width*Te.titleBox.width+Te.titleBox.height*Te.titleBox.height),{x:Te.cx,y:Te.cy,scale:Te.trace.hole*Te.r*2/$,tx:0,ty:-Te.titleBox.height/2+Te.trace.title.font.size}):L(X,J),we.attr("transform",t(de.x,de.y)+s(Math.min(1,de.scale))+t(de.tx,de.ty))}),ae&&function(de,we){var ke,Te,$,oe,he,me,Me,Ie,Pe,ze,ce,ge,_e;function De(tt,at){return tt.pxmid[1]-at.pxmid[1]}function He(tt,at){return at.pxmid[1]-tt.pxmid[1]}function Ve(tt,at){at||(at={});var dt,wt,bt,_t,Lt=at.labelExtraY+(Te?at.yLabelMax:at.yLabelMin),Ct=Te?tt.yLabelMin:tt.yLabelMax,Ot=Te?tt.yLabelMax:tt.yLabelMin,Ht=tt.cyFinal+he(tt.px0[1],tt.px1[1]),It=Lt-Ct;if(It*Me>0&&(tt.labelExtraY=It),Array.isArray(we.pull))for(wt=0;wt<ze.length;wt++)(bt=ze[wt])===tt||(c.castOption(we.pull,tt.pts)||0)>=(c.castOption(we.pull,bt.pts)||0)||((tt.pxmid[1]-bt.pxmid[1])*Me>0?(It=bt.cyFinal+he(bt.px0[1],bt.px1[1])-Ct-tt.labelExtraY)*Me>0&&(tt.labelExtraY+=It):(Ot+tt.labelExtraY-Ht)*Me>0&&(dt=3*me*Math.abs(wt-ze.indexOf(tt)),(_t=bt.cxFinal+oe(bt.px0[0],bt.px1[0])+dt-(tt.cxFinal+tt.pxmid[0])-tt.labelExtraX)*me>0&&(tt.labelExtraX+=_t)))}for(Te=0;Te<2;Te++)for($=Te?De:He,he=Te?Math.max:Math.min,Me=Te?1:-1,ke=0;ke<2;ke++){for(oe=ke?Math.max:Math.min,me=ke?1:-1,(Ie=de[Te][ke]).sort($),ze=(Pe=de[1-Te][ke]).concat(Ie),ge=[],ce=0;ce<Ie.length;ce++)void 0!==Ie[ce].yLabelMid&&ge.push(Ie[ce]);for(_e=!1,ce=0;Te&&ce<Pe.length;ce++)if(void 0!==Pe[ce].yLabelMid){_e=Pe[ce];break}for(ce=0;ce<ge.length;ce++){var nt=ce&&ge[ce-1];_e&&!ce&&(nt=_e),Ve(ge[ce],nt)}}}(re,K),we=K,ne.each(function(ke){var Te=k.select(this);if(ke.labelExtraX||ke.labelExtraY){var $=Te.select("g.slicetext text");ke.transform.targetX+=ke.labelExtraX,ke.transform.targetY+=ke.labelExtraY,d.setTransormAndDisplay($,ke.transform);var oe=ke.cxFinal+ke.pxmid[0],he="M"+oe+","+(ke.cyFinal+ke.pxmid[1]),me=(ke.yLabelMax-ke.yLabelMin)*(ke.pxmid[0]<0?-1:1)/4;if(ke.labelExtraX){var Me=ke.labelExtraX*ke.pxmid[1]/ke.pxmid[0],Ie=ke.yLabelMid+ke.labelExtraY-(ke.cyFinal+ke.pxmid[1]);Math.abs(Me)>Math.abs(Ie)?he+="l"+Ie*ke.pxmid[0]/ke.pxmid[1]+","+Ie+"H"+(oe+ke.labelExtraX+me):he+="l"+ke.labelExtraX+","+Me+"v"+(Ie-Me)+"h"+me}else he+="V"+(ke.yLabelMid+ke.labelExtraY)+"h"+me;d.ensureSingle(Te,"path","textline").call(T.stroke,we.outsidetextfont.color).attr({"stroke-width":Math.min(2,we.outsidetextfont.size/8),d:he,fill:"none"})}else Te.select("path.textline").remove()}),ae&&K.automargin){var pe=b.bBox(W.node()),xe=K.domain,fe=(J.w*(xe.x[1]-xe.x[0])*.5-X.r)/J.w,Ee=(J.h*(xe.y[1]-xe.y[0])*.5-X.r)/J.h;A.autoMargin(F,"pie."+K.uid+".automargin",{xl:xe.x[0]-fe,xr:xe.x[1]+fe,yb:xe.y[0]-Ee,yt:xe.y[1]+Ee,l:Math.max(X.cx-X.r-pe.left,0),r:Math.max(pe.right-(X.cx+X.r),0),b:Math.max(pe.bottom-(X.cy+X.r),0),t:Math.max(X.cy-X.r-pe.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var V=k.select(this);V.attr("dy")&&V.attr("dy",V.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:y,determineInsideTextFont:v,positionTitleOutside:L,prerenderTitles:g,layoutAreas:I,attachFxHandlers:x,computeTransform:H}},68357:function(Q,z,e){"use strict";var k=e(39898),A=e(63463),l=e(72597).resizeText;Q.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");l(T,b,"pie"),b.each(function(d){var s=d[0].trace,t=k.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){k.select(this).call(A,o,s)})})}},63463:function(Q,z,e){"use strict";var k=e(7901),A=e(53581).castOption;Q.exports=function(l,T,b){var d=b.marker.line,s=A(d.color,T.pts)||k.defaultLine,t=A(d.width,T.pts)||0;l.style("stroke-width",t).call(k.fill,T.color).call(k.stroke,s)}},10959:function(Q,z,e){"use strict";var k=e(82196);Q.exports={x:k.x,y:k.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:k.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(Q,z,e){"use strict";var k=e(9330).gl_pointcloud2d,A=e(78614),l=e(71739).findExtremes,T=e(34603);function b(s,t){this.scene=s,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=k(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=b.prototype;d.handlePick=function(s){var t=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},d.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},d.updateFast=function(s){var t,o,r,n,a,i,c=this.xData=this.pickXData=s.x,h=this.yData=this.pickYData=s.y,f=this.pickXYData=s.xy,v=s.indices,g=this.bounds;if(f){if(r=f,t=f.length>>>1,s.xbounds&&s.ybounds)g[0]=s.xbounds[0],g[2]=s.xbounds[1],g[1]=s.ybounds[0],g[3]=s.ybounds[1];else for(i=0;i<t;i++)a=r[2*i+1],(n=r[2*i])<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);if(v)o=v;else for(o=new Int32Array(t),i=0;i<t;i++)o[i]=i}else for(t=c.length,r=new Float32Array(2*t),o=new Int32Array(t),i=0;i<t;i++)n=c[i],a=h[i],o[i]=i,r[2*i]=n,r[2*i+1]=a,n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);this.idToIndex=o,this.pointcloudOptions.idToIndex=o,this.pointcloudOptions.positions=r;var y=A(s.marker.color),p=A(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var w=s.marker.blend;null===w&&(w=c.length<100||h.length<100),this.pointcloudOptions.blend=w,p[3]*=m,this.pointcloudOptions.borderColor=p;var u=s.marker.sizemin,S=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=u,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,E=this.scene.yaxis,L=S/2||.5;s._extremes[_._id]=l(_,[g[0],g[2]],{ppad:L}),s._extremes[E._id]=l(E,[g[1],g[3]],{ppad:L})},d.dispose=function(){this.pointcloud.dispose()},Q.exports=function(s,t){var o=new b(s,t.uid);return o.update(t),o}},33876:function(Q,z,e){"use strict";var k=e(71828),A=e(10959);Q.exports=function(l,T,b){function d(s,t){return k.coerce(l,T,A,s,t)}d("x"),d("y"),d("xbounds"),d("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),d("text"),d("marker.color",b),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",b),d("marker.border.arearatio"),T._length=null}},20593:function(Q,z,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),Q.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(Q,z,e){"use strict";var k=e(41940),A=e(9012),l=e(22399),T=e(77914),b=e(27670).Y,d=e(5386).f,s=e(50693),t=e(44467).templatedArray,o=e(12663).descriptionOnlyNumbers,r=e(1426).extendFlat,n=e(30962).overrideAll;(Q.exports=n({hoverinfo:r({},A.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:o("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:k({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(Q,z,e){"use strict";var k=e(30962).overrideAll,A=e(27659).a0,l=e(60436),T=e(528),b=e(6964),d=e(28569),s=e(47322).prepSelect,t=e(71828),o=e(73972),r="sankey";function n(a,i){var c=a._fullData[i],h=a._fullLayout,f=h.dragmode,v=c._bgRect;if(v&&"pan"!==f&&"zoom"!==f){b(v,"pan"===h.dragmode?"move":"crosshair");var g={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width},y={_id:"y",c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height},p={gd:a,element:v.node(),plotinfo:{id:i,xaxis:g,yaxis:y,fillRangeItems:t.noop},subplot:i,xaxes:[g],yaxes:[y],doneFnCompleted:function(m){var w,u=a._fullData[i],S=u.node.groups.slice(),_=[];function E(I){for(var j=u._sankey.graph.nodes,R=0;R<j.length;R++)if(j[R].pointNumber===I)return j[R]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)_.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-u.node._count]=!1}else _.push(C.pointNumber)}w=S.filter(Boolean).concat([_]),o.call("_guiRestyle",a,{"node.groups":[w]},i)},prepFn:function(m,w,u){s(m,w,u,p,f)}};d.init(p)}}z.name=r,z.baseLayoutAttrOverrides=k({hoverlabel:T.hoverlabel},"plot","nested"),z.plot=function(a){var i=A(a.calcdata,r)[0];l(a,i),z.updateFx(a)},z.clean=function(a,i,c,h){var f=h._has&&h._has(r),x=i._has&&i._has(r);f&&!x&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},z.updateFx=function(a){for(var i=0;i<a._fullData.length;i++)n(a,i)}},92930:function(Q,z,e){"use strict";var k=e(68664),A=e(71828),l=e(28984).wrap,T=A.isArrayOrTypedArray,b=A.isIndex,d=e(21081);Q.exports=function(s,t){var o=function(r){var n,a=r.node,i=r.link,c=[],h=T(i.color),f=T(i.customdata),x={},v={},g=i.colorscales.length;for(n=0;n<g;n++){var y=i.colorscales[n],p=d.extractScale(y,{cLetter:"c"}),m=d.makeColorScaleFunc(p);v[y.label]=m}var w=0;for(n=0;n<i.value.length;n++)i.source[n]>w&&(w=i.source[n]),i.target[n]>w&&(w=i.target[n]);var u,S=w+1;r.node._count=S;var _=r.node.groups,E={};for(n=0;n<_.length;n++){var L=_[n];for(u=0;u<L.length;u++){var C=L[u],P=S+n;E.hasOwnProperty(C)?A.warn("Node "+C+" is already part of a group."):E[C]=P}}var I={source:[],target:[]};for(n=0;n<i.value.length;n++){var j=i.value[n],R=i.source[n],H=i.target[n];if(j>0&&b(R,S)&&b(H,S)&&(!E.hasOwnProperty(R)||!E.hasOwnProperty(H)||E[R]!==E[H])){E.hasOwnProperty(H)&&(H=E[H]),E.hasOwnProperty(R)&&(R=E[R]),x[R=+R]=x[H=+H]=!0;var F="";i.label&&i.label[n]&&(F=i.label[n]);var U=null;F&&v.hasOwnProperty(F)&&(U=v[F]),c.push({pointNumber:n,label:F,color:h?i.color[n]:i.color,customdata:f?i.customdata[n]:i.customdata,concentrationscale:U,source:R,target:H,value:+j}),I.source.push(R),I.target.push(H)}}var B=S+_.length,N=T(a.color),J=T(a.customdata),Z=[];for(n=0;n<B;n++)x[n]&&Z.push({group:n>S-1,childrenNodes:[],pointNumber:n,label:a.label[n],color:N?a.color[n]:a.color,customdata:J?a.customdata[n]:a.customdata});var W=!1;return function(X,K,ne){for(var re=A.init2dArray(X,0),ae=0;ae<Math.min(K.length,ne.length);ae++)if(A.isIndex(K[ae],X)&&A.isIndex(ne[ae],X)){if(K[ae]===ne[ae])return!0;re[K[ae]].push(ne[ae])}return k(re).components.some(function(le){return le.length>1})}(B,I.source,I.target)&&(W=!0),{circular:W,links:c,nodes:Z,groups:_,groupLookup:E}}(t);return l({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},85247:function(Q){"use strict";Q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(Q,z,e){"use strict";var k=e(71828),A=e(39953),l=e(7901),T=e(84267),b=e(27670).c,d=e(38048),s=e(44467),t=e(85501);function o(r,n){function a(i,c){return k.coerce(r,n,A.link.colorscales,i,c)}a("label"),a("cmin"),a("cmax"),a("colorscale")}Q.exports=function(r,n,a,i){function c(S,_){return k.coerce(r,n,A,S,_)}var h=k.extendDeep(i.hoverlabel,r.hoverlabel),f=r.node,x=s.newContainer(n,"node");function v(S,_){return k.coerce(f,x,A.node,S,_)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),d(f,x,v,h),v("hovertemplate");var g=i.colorway;v("color",x.label.map(function(S,_){return l.addOpacity(g[_%g.length],.8)})),v("customdata");var y=r.link||{},p=s.newContainer(n,"link");function m(S,_){return k.coerce(y,p,A.link,S,_)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),d(y,p,m,h),m("hovertemplate");var w,u=T(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",k.repeat(u,p.value.length)),m("customdata"),t(y,p,{name:"colorscales",handleItemDefaults:o}),b(n,i,c),c("orientation"),c("valueformat"),c("valuesuffix"),x.x.length&&x.y.length&&(w="freeform"),c("arrangement",w),k.coerceFont(c,"textfont",k.extendFlat({},i.font)),n._length=null}},29396:function(Q,z,e){"use strict";Q.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=A.numberFormat,T=e(3393),b=e(30211),d=e(7901),s=e(85247).cn,t=A._;function o(y){return""!==y}function r(y,p){return y.filter(function(m){return m.key===p.traceId})}function n(y,p){k.select(y).select("path").style("fill-opacity",p),k.select(y).select("rect").style("fill-opacity",p)}function a(y){k.select(y).select("text.name").style("fill","black")}function i(y){return function(p){return-1!==y.node.sourceLinks.indexOf(p.link)||-1!==y.node.targetLinks.indexOf(p.link)}}function c(y){return function(p){return-1!==p.node.sourceLinks.indexOf(y.link)||-1!==p.node.targetLinks.indexOf(y.link)}}function h(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(x.bind(0,p,m,!1))}function f(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(v.bind(0,p,m,!1))}function x(y,p,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){if(!S.link.concentrationscale)return.4}),u&&r(p,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return.4}),m&&r(p,y).selectAll("."+s.sankeyNode).filter(c(y)).call(h)}function v(y,p,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){return S.tinyColorAlpha}),u&&r(p,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){return S.tinyColorAlpha}),m&&r(p,y).selectAll(s.sankeyNode).filter(c(y)).call(f)}function g(y,p){var w=A.nestedProperty(y.hoverlabel||{},p).get();return!Array.isArray(w)&&w}Q.exports=function(y,p){for(var m=y._fullLayout,w=m._paper,u=m._size,S=0;S<y._fullData.length;S++)if(y._fullData[S].visible&&y._fullData[S].type===s.sankey&&!y._fullData[S]._viewInitial){var _=y._fullData[S].node;y._fullData[S]._viewInitial={node:{groups:_.groups.slice(),x:_.x.slice(),y:_.y.slice()}}}var E=t(y,"source:")+" ",L=t(y,"target:")+" ",C=t(y,"concentration:")+" ",P=t(y,"incoming flow count:")+" ",I=t(y,"outgoing flow count:")+" ";T(y,w,p,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(j,R,H){!1!==y._fullLayout.hovermode&&(k.select(j).call(x.bind(0,R,H,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,y.emit("plotly_hover",{event:k.event,points:[R.link]})))},follow:function(j,R){if(!1!==y._fullLayout.hovermode){var H=R.link.trace.link;if("none"!==H.hoverinfo&&"skip"!==H.hoverinfo){for(var F=[],U=0,B=0;B<R.flow.links.length;B++){var N=R.flow.links[B];if("closest"!==y._fullLayout.hovermode||R.link.pointNumber===N.pointNumber){R.link.pointNumber===N.pointNumber&&(U=B),N.fullData=N.trace,H=R.link.trace.link;var J=V(N),Z={valueLabel:l(R.valueFormat)(N.value)+R.valueSuffix};F.push({x:J[0],y:J[1],name:Z.valueLabel,text:[N.label||"",E+N.source.label,L+N.target.label,N.concentrationscale?C+l("%0.2f")(N.flow.labelConcentration):""].filter(o).join("<br>"),color:g(H,"bgcolor")||d.addOpacity(N.color,1),borderColor:g(H,"bordercolor"),fontFamily:g(H,"font.family"),fontSize:g(H,"font.size"),fontColor:g(H,"font.color"),nameLength:g(H,"namelength"),textAlign:g(H,"align"),idealAlign:k.event.x<J[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:Z,eventData:[N]})}}b.loneHover(F,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:U}).each(function(){R.link.concentrationscale||n(this,.65),a(this)})}}function V(W){var X,K;W.circular?(X=(W.circularPathData.leftInnerExtent+W.circularPathData.rightInnerExtent)/2,K=W.circularPathData.verticalFullExtent):(X=(W.source.x1+W.target.x0)/2,K=(W.y0+W.y1)/2);var ne=[X,K];return"v"===W.trace.orientation&&ne.reverse(),ne[0]+=R.parent.translateX,ne[1]+=R.parent.translateY,ne}},unhover:function(j,R,H){!1!==y._fullLayout.hovermode&&(k.select(j).call(v.bind(0,R,H,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,y.emit("plotly_unhover",{event:k.event,points:[R.link]})),b.loneUnhover(m._hoverlayer.node()))},select:function(j,R){var H=R.link;H.originalEvent=k.event,y._hoverdata=[H],b.click(y,{target:!0})}},nodeEvents:{hover:function(j,R,H){!1!==y._fullLayout.hovermode&&(k.select(j).call(h,R,H),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,y.emit("plotly_hover",{event:k.event,points:[R.node]})))},follow:function(j,R){if(!1!==y._fullLayout.hovermode){var H=R.node.trace.node;if("none"!==H.hoverinfo&&"skip"!==H.hoverinfo){var F=k.select(j).select("."+s.nodeRect),U=y._fullLayout._paperdiv.node().getBoundingClientRect(),B=F.node().getBoundingClientRect(),N=B.left-2-U.left,J=B.right+2-U.left,Z=B.top+B.height/4-U.top,V={valueLabel:l(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,y._fullLayout._calcInverseTransform(y);var W=y._fullLayout._invScaleX,K=b.loneHover({x0:W*N,x1:W*J,y:y._fullLayout._invScaleY*Z,name:l(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,P+R.node.targetLinks.length,I+R.node.sourceLinks.length].filter(o).join("<br>"),color:g(H,"bgcolor")||R.tinyColorHue,borderColor:g(H,"bordercolor"),fontFamily:g(H,"font.family"),fontSize:g(H,"font.size"),fontColor:g(H,"font.color"),nameLength:g(H,"namelength"),textAlign:g(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:V,eventData:[R.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(K,.85),a(K)}}},unhover:function(j,R,H){!1!==y._fullLayout.hovermode&&(k.select(j).call(f,R,H),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,y.emit("plotly_unhover",{event:k.event,points:[R.node]})),b.loneUnhover(m._hoverlayer.node()))},select:function(j,R,H){var F=R.node;F.originalEvent=k.event,y._hoverdata=[F],k.select(j).call(f,R,H),b.click(y,{target:!0})}}})}},3393:function(Q,z,e){"use strict";var k=e(49887),A=e(81684).k4,l=e(39898),T=e(30838),b=e(86781),d=e(85247),s=e(84267),t=e(7901),o=e(91424),r=e(71828),n=r.strTranslate,a=r.strRotate,i=e(28984),c=i.keyFun,h=i.repeat,f=i.unwrap,x=e(63893),v=e(73972),g=e(18783),y=g.CAP_SHIFT,p=g.LINE_SPACING;function m(B,N,J){var Z,V=f(N),W=V.trace,X=W.domain,K="h"===W.orientation,ne=W.node.pad,re=W.node.thickness,ae=B.width*(X.x[1]-X.x[0]),le=B.height*(X.y[1]-X.y[0]),pe=V._nodes,xe=V._links,ye=V.circular;(Z=ye?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(d.sankeyIterations).size(K?[ae,le]:[le,ae]).nodeWidth(re).nodePadding(ne).nodeId(function(me){return me.pointNumber}).nodes(pe).links(xe);var se,fe,Ee,de=Z();for(var we in Z.nodePadding()<ne&&r.warn("node.pad was reduced to ",Z.nodePadding()," to fit within the figure."),V._groupLookup){var ke,Te=parseInt(V._groupLookup[we]);for(se=0;se<de.nodes.length;se++)if(de.nodes[se].pointNumber===Te){ke=de.nodes[se];break}if(ke){var $={pointNumber:parseInt(we),x0:ke.x0,x1:ke.x1,y0:ke.y0,y1:ke.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};de.nodes.unshift($),ke.childrenNodes.unshift($)}}if(function(){for(se=0;se<de.nodes.length;se++){var me,Me,Ie=de.nodes[se],Pe={};for(fe=0;fe<Ie.targetLinks.length;fe++)me=(Me=Ie.targetLinks[fe]).source.pointNumber+":"+Me.target.pointNumber,Pe.hasOwnProperty(me)||(Pe[me]=[]),Pe[me].push(Me);var ze=Object.keys(Pe);for(fe=0;fe<ze.length;fe++){var ce=Pe[me=ze[fe]],ge=0,_e={};for(Ee=0;Ee<ce.length;Ee++)_e[(Me=ce[Ee]).label]||(_e[Me.label]=0),_e[Me.label]+=Me.value,ge+=Me.value;for(Ee=0;Ee<ce.length;Ee++)(Me=ce[Ee]).flow={value:ge,labelConcentration:_e[Me.label]/ge,concentration:Me.value/ge,links:ce},Me.concentrationscale&&(Me.color=s(Me.concentrationscale(Me.flow.labelConcentration)))}var De=0;for(fe=0;fe<Ie.sourceLinks.length;fe++)De+=Ie.sourceLinks[fe].value;for(fe=0;fe<Ie.sourceLinks.length;fe++)(Me=Ie.sourceLinks[fe]).concentrationOut=Me.value/De;var He=0;for(fe=0;fe<Ie.targetLinks.length;fe++)He+=Ie.targetLinks[fe].value;for(fe=0;fe<Ie.targetLinks.length;fe++)(Me=Ie.targetLinks[fe]).concenrationIn=Me.value/He}}(),W.node.x.length&&W.node.y.length){for(se=0;se<Math.min(W.node.x.length,W.node.y.length,de.nodes.length);se++)if(W.node.x[se]&&W.node.y[se]){var oe=[W.node.x[se]*ae,W.node.y[se]*le];de.nodes[se].x0=oe[0]-re/2,de.nodes[se].x1=oe[0]+re/2;var he=de.nodes[se].y1-de.nodes[se].y0;de.nodes[se].y0=oe[1]-he/2,de.nodes[se].y1=oe[1]+he/2}"snap"===W.arrangement&&function(me){var Me,Ie,Pe=me.map(function(De,He){return{x0:De.x0,index:He}}).sort(function(De,He){return De.x0-He.x0}),ze=[],ce=-1,ge=-1/0;for(se=0;se<Pe.length;se++){var _e=me[Pe[se].index];_e.x0>ge+re&&(ce+=1,Me=_e.x0),ge=_e.x0,ze[ce]||(ze[ce]=[]),ze[ce].push(_e),_e.x0+=Ie=Me-_e.x0,_e.x1+=Ie}return ze}(pe=de.nodes).forEach(function(me){var Me,Ie,Pe,ze=0,ce=me.length;for(me.sort(function(ge,_e){return ge.y0-_e.y0}),Pe=0;Pe<ce;++Pe)(Me=me[Pe]).y0>=ze||(Ie=ze-Me.y0)>1e-6&&(Me.y0+=Ie,Me.y1+=Ie),ze=Me.y1+ne}),Z.update(de)}return{circular:ye,key:J,trace:W,guid:r.randstr(),horizontal:K,width:ae,height:le,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,linkArrowLength:W.link.arrowlen,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:X.x[0]*B.width+B.margin.l,translateY:B.height-X.y[1]*B.height+B.margin.t,dragParallel:K?le:ae,dragPerpendicular:K?ae:le,arrangement:W.arrangement,sankey:Z,graph:de,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(B,N,J){var Z=s(N.color),V=N.source.label+"|"+N.target.label+"__"+J;return N.trace=B.trace,N.curveNumber=B.trace.index,{circular:B.circular,key:V,traceId:B.key,pointNumber:N.pointNumber,link:N,tinyColorHue:t.tinyRGB(Z),tinyColorAlpha:Z.getAlpha(),linkPath:u,linkLineColor:B.linkLineColor,linkLineWidth:B.linkLineWidth,linkArrowLength:B.linkArrowLength,valueFormat:B.valueFormat,valueSuffix:B.valueSuffix,sankey:B.sankey,parent:B,interactionState:B.interactionState,flow:N.flow}}function u(){return function(B){var fe,Ee,de,we,N=B.linkArrowLength;if(B.link.circular)return Ee=N,de=(fe=B.link).width/2,we=fe.circularPathData,"top"===fe.circularLinkType?"M "+(we.targetX-Ee)+" "+(we.targetY+de)+" L"+(we.rightInnerExtent-Ee)+" "+(we.targetY+de)+"A"+(we.rightLargeArcRadius+de)+" "+(we.rightSmallArcRadius+de)+" 0 0 1 "+(we.rightFullExtent-de-Ee)+" "+(we.targetY-we.rightSmallArcRadius)+"L"+(we.rightFullExtent-de-Ee)+" "+we.verticalRightInnerExtent+"A"+(we.rightLargeArcRadius+de)+" "+(we.rightLargeArcRadius+de)+" 0 0 1 "+(we.rightInnerExtent-Ee)+" "+(we.verticalFullExtent-de)+"L"+we.leftInnerExtent+" "+(we.verticalFullExtent-de)+"A"+(we.leftLargeArcRadius+de)+" "+(we.leftLargeArcRadius+de)+" 0 0 1 "+(we.leftFullExtent+de)+" "+we.verticalLeftInnerExtent+"L"+(we.leftFullExtent+de)+" "+(we.sourceY-we.leftSmallArcRadius)+"A"+(we.leftLargeArcRadius+de)+" "+(we.leftSmallArcRadius+de)+" 0 0 1 "+we.leftInnerExtent+" "+(we.sourceY+de)+"L"+we.sourceX+" "+(we.sourceY+de)+"L"+we.sourceX+" "+(we.sourceY-de)+"L"+we.leftInnerExtent+" "+(we.sourceY-de)+"A"+(we.leftLargeArcRadius-de)+" "+(we.leftSmallArcRadius-de)+" 0 0 0 "+(we.leftFullExtent-de)+" "+(we.sourceY-we.leftSmallArcRadius)+"L"+(we.leftFullExtent-de)+" "+we.verticalLeftInnerExtent+"A"+(we.leftLargeArcRadius-de)+" "+(we.leftLargeArcRadius-de)+" 0 0 0 "+we.leftInnerExtent+" "+(we.verticalFullExtent+de)+"L"+(we.rightInnerExtent-Ee)+" "+(we.verticalFullExtent+de)+"A"+(we.rightLargeArcRadius-de)+" "+(we.rightLargeArcRadius-de)+" 0 0 0 "+(we.rightFullExtent+de-Ee)+" "+we.verticalRightInnerExtent+"L"+(we.rightFullExtent+de-Ee)+" "+(we.targetY-we.rightSmallArcRadius)+"A"+(we.rightLargeArcRadius-de)+" "+(we.rightSmallArcRadius-de)+" 0 0 0 "+(we.rightInnerExtent-Ee)+" "+(we.targetY-de)+"L"+(we.targetX-Ee)+" "+(we.targetY-de)+(Ee>0?"L"+we.targetX+" "+we.targetY:"")+"Z":"M "+(we.targetX-Ee)+" "+(we.targetY-de)+" L"+(we.rightInnerExtent-Ee)+" "+(we.targetY-de)+"A"+(we.rightLargeArcRadius+de)+" "+(we.rightSmallArcRadius+de)+" 0 0 0 "+(we.rightFullExtent-de-Ee)+" "+(we.targetY+we.rightSmallArcRadius)+"L"+(we.rightFullExtent-de-Ee)+" "+we.verticalRightInnerExtent+"A"+(we.rightLargeArcRadius+de)+" "+(we.rightLargeArcRadius+de)+" 0 0 0 "+(we.rightInnerExtent-Ee)+" "+(we.verticalFullExtent+de)+"L"+we.leftInnerExtent+" "+(we.verticalFullExtent+de)+"A"+(we.leftLargeArcRadius+de)+" "+(we.leftLargeArcRadius+de)+" 0 0 0 "+(we.leftFullExtent+de)+" "+we.verticalLeftInnerExtent+"L"+(we.leftFullExtent+de)+" "+(we.sourceY+we.leftSmallArcRadius)+"A"+(we.leftLargeArcRadius+de)+" "+(we.leftSmallArcRadius+de)+" 0 0 0 "+we.leftInnerExtent+" "+(we.sourceY-de)+"L"+we.sourceX+" "+(we.sourceY-de)+"L"+we.sourceX+" "+(we.sourceY+de)+"L"+we.leftInnerExtent+" "+(we.sourceY+de)+"A"+(we.leftLargeArcRadius-de)+" "+(we.leftSmallArcRadius-de)+" 0 0 1 "+(we.leftFullExtent-de)+" "+(we.sourceY+we.leftSmallArcRadius)+"L"+(we.leftFullExtent-de)+" "+we.verticalLeftInnerExtent+"A"+(we.leftLargeArcRadius-de)+" "+(we.leftLargeArcRadius-de)+" 0 0 1 "+we.leftInnerExtent+" "+(we.verticalFullExtent-de)+"L"+(we.rightInnerExtent-Ee)+" "+(we.verticalFullExtent-de)+"A"+(we.rightLargeArcRadius-de)+" "+(we.rightLargeArcRadius-de)+" 0 0 1 "+(we.rightFullExtent+de-Ee)+" "+we.verticalRightInnerExtent+"L"+(we.rightFullExtent+de-Ee)+" "+(we.targetY+we.rightSmallArcRadius)+"A"+(we.rightLargeArcRadius-de)+" "+(we.rightSmallArcRadius-de)+" 0 0 1 "+(we.rightInnerExtent-Ee)+" "+(we.targetY+de)+"L"+(we.targetX-Ee)+" "+(we.targetY+de)+(Ee>0?"L"+we.targetX+" "+we.targetY:"")+"Z";var J=Math.abs((B.link.target.x0-B.link.source.x1)/2);N>J&&(N=J);var Z=B.link.source.x1,V=B.link.target.x0-N,W=A(Z,V),X=W(.5),K=W(.5),ne=B.link.y0-B.link.width/2,re=B.link.y0+B.link.width/2,ae=B.link.y1-B.link.width/2,le=B.link.y1+B.link.width/2,se=N>0?"L"+(V+N)+","+(ae+B.link.width/2):"";return"M"+Z+","+ne+"C"+X+","+ne+" "+K+","+ae+" "+V+","+ae+(se+="L"+V+","+le)+"C"+K+","+le+" "+X+","+re+" "+Z+","+re+"Z"}}function S(B,N){var J=s(N.color),Z=d.nodePadAcross,V=B.nodePad/2;N.dx=N.x1-N.x0,N.dy=N.y1-N.y0;var W=N.dx,X=Math.max(.5,N.dy),K="node_"+N.pointNumber;return N.group&&(K=r.randstr()),N.trace=B.trace,N.curveNumber=B.trace.index,{index:N.pointNumber,key:K,partOfGroup:N.partOfGroup||!1,group:N.group,traceId:B.key,trace:B.trace,node:N,nodePad:B.nodePad,nodeLineColor:B.nodeLineColor,nodeLineWidth:B.nodeLineWidth,textFont:B.textFont,size:B.horizontal?B.height:B.width,visibleWidth:Math.ceil(W),visibleHeight:X,zoneX:-Z,zoneY:-V,zoneWidth:W+2*Z,zoneHeight:X+2*V,labelY:B.horizontal?N.dy/2+1:N.dx/2+1,left:1===N.originalLayer,sizeAcross:B.width,forceLayouts:B.forceLayouts,horizontal:B.horizontal,darkBackground:J.getBrightness()<=128,tinyColorHue:t.tinyRGB(J),tinyColorAlpha:J.getAlpha(),valueFormat:B.valueFormat,valueSuffix:B.valueSuffix,sankey:B.sankey,graph:B.graph,arrangement:B.arrangement,uniqueNodeLabelPathId:[B.guid,B.key,K].join("_"),interactionState:B.interactionState,figure:B}}function _(B){B.attr("transform",function(N){return n(N.node.x0.toFixed(3),N.node.y0.toFixed(3))})}function E(B){B.call(_)}function L(B,N){B.call(E),N.attr("d",u())}function C(B){B.attr("width",function(N){return N.node.x1-N.node.x0}).attr("height",function(N){return N.visibleHeight})}function P(B){return B.link.width>1||B.linkLineWidth>0}function I(B){return n(B.translateX,B.translateY)+(B.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function j(B,N,J){B.on(".basic",null).on("mouseover.basic",function(Z){Z.interactionState.dragInProgress||Z.partOfGroup||(J.hover(this,Z,N),Z.interactionState.hovered=[this,Z])}).on("mousemove.basic",function(Z){Z.interactionState.dragInProgress||Z.partOfGroup||(J.follow(this,Z),Z.interactionState.hovered=[this,Z])}).on("mouseout.basic",function(Z){Z.interactionState.dragInProgress||Z.partOfGroup||(J.unhover(this,Z,N),Z.interactionState.hovered=!1)}).on("click.basic",function(Z){Z.interactionState.hovered&&(J.unhover(this,Z,N),Z.interactionState.hovered=!1),Z.interactionState.dragInProgress||Z.partOfGroup||J.select(this,Z,N)})}function R(B,N,J,Z){var V=l.behavior.drag().origin(function(W){return{x:W.node.x0+W.visibleWidth/2,y:W.node.y0+W.visibleHeight/2}}).on("dragstart",function(W){if("fixed"!==W.arrangement&&(r.ensureSingle(Z._fullLayout._infolayer,"g","dragcover",function(K){Z._fullLayout._dragCover=K}),r.raiseToTop(this),W.interactionState.dragInProgress=W.node,F(W.node),W.interactionState.hovered&&(J.nodeEvents.unhover.apply(0,W.interactionState.hovered),W.interactionState.hovered=!1),"snap"===W.arrangement)){var X=W.traceId+"|"+W.key;W.forceLayouts[X]?W.forceLayouts[X].alpha(1):function(K,ne,re,ae){!function(pe){for(var xe=0;xe<pe.length;xe++)pe[xe].y=(pe[xe].y0+pe[xe].y1)/2,pe[xe].x=(pe[xe].x0+pe[xe].x1)/2}(re.graph.nodes);var xe,ye,se,le=re.graph.nodes.filter(function(pe){return pe.originalX===re.node.originalX}).filter(function(pe){return!pe.partOfGroup});re.forceLayouts[ne]=k.forceSimulation(le).alphaDecay(0).force("collide",k.forceCollide().radius(function(pe){return pe.dy/2+re.nodePad/2}).strength(1).iterations(d.forceIterations)).force("constrain",(xe=ne,ye=le,se=re,function(){for(var fe=0,Ee=0;Ee<ye.length;Ee++){var de=ye[Ee];de===se.interactionState.dragInProgress?(de.x=de.lastDraggedX,de.y=de.lastDraggedY):(de.vx=(de.originalX-de.x)/d.forceTicksPerFrame,de.y=Math.min(se.size-de.dy/2,Math.max(de.dy/2,de.y))),fe=Math.max(fe,Math.abs(de.vx),Math.abs(de.vy))}!se.interactionState.dragInProgress&&fe<.1&&se.forceLayouts[xe].alpha()>0&&se.forceLayouts[xe].alpha(0)})).stop()}(0,X,W),K=B,ne=N,re=W,ae=X,le=Z,window.requestAnimationFrame(function pe(){var xe;for(xe=0;xe<d.forceTicksPerFrame;xe++)re.forceLayouts[ae].tick();if(function(se){for(var fe=0;fe<se.length;fe++)se[fe].y0=se[fe].y-se[fe].dy/2,se[fe].y1=se[fe].y0+se[fe].dy,se[fe].x0=se[fe].x-se[fe].dx/2,se[fe].x1=se[fe].x0+se[fe].dx}(re.graph.nodes),re.sankey.update(re.graph),L(K.filter(U(re)),ne),re.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(pe);else{var ye=re.node.originalX;re.node.x0=ye-re.visibleWidth/2,re.node.x1=ye+re.visibleWidth/2,H(re,le)}})}var K,ne,re,ae,le}).on("drag",function(W){if("fixed"!==W.arrangement){var X=l.event.x,K=l.event.y;"snap"===W.arrangement?(W.node.x0=X-W.visibleWidth/2,W.node.x1=X+W.visibleWidth/2,W.node.y0=K-W.visibleHeight/2,W.node.y1=K+W.visibleHeight/2):("freeform"===W.arrangement&&(W.node.x0=X-W.visibleWidth/2,W.node.x1=X+W.visibleWidth/2),K=Math.max(0,Math.min(W.size-W.visibleHeight/2,K)),W.node.y0=K-W.visibleHeight/2,W.node.y1=K+W.visibleHeight/2),F(W.node),"snap"!==W.arrangement&&(W.sankey.update(W.graph),L(B.filter(U(W)),N))}}).on("dragend",function(W){if("fixed"!==W.arrangement){W.interactionState.dragInProgress=!1;for(var X=0;X<W.node.childrenNodes.length;X++)W.node.childrenNodes[X].x=W.node.x,W.node.childrenNodes[X].y=W.node.y;"snap"!==W.arrangement&&H(W,Z)}});B.on(".drag",null).call(V)}function H(B,N){for(var J=[],Z=[],V=0;V<B.graph.nodes.length;V++){var X=(B.graph.nodes[V].y0+B.graph.nodes[V].y1)/2;J.push((B.graph.nodes[V].x0+B.graph.nodes[V].x1)/2/B.figure.width),Z.push(X/B.figure.height)}v.call("_guiRestyle",N,{"node.x":[J],"node.y":[Z]},B.trace.index).then(function(){N._fullLayout._dragCover&&N._fullLayout._dragCover.remove()})}function F(B){B.lastDraggedX=B.x0+B.dx/2,B.lastDraggedY=B.y0+B.dy/2}function U(B){return function(N){return N.node.originalX===B.node.originalX}}Q.exports=function(B,N,J,Z,V){var W=B._context.staticPlot,X=!1;r.ensureSingle(B._fullLayout._infolayer,"g","first-render",function(){X=!0});var K=B._fullLayout._dragCover,ne=J.filter(function(fe){return f(fe).trace.visible}).map(m.bind(null,Z)),re=N.selectAll("."+d.cn.sankey).data(ne,c);re.exit().remove(),re.enter().append("g").classed(d.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",W?"none":"auto").attr("transform",I),re.each(function(fe,Ee){B._fullData[Ee]._sankey=fe;var de="bgsankey-"+fe.trace.uid+"-"+Ee;r.ensureSingle(B._fullLayout._draggers,"rect",de),B._fullData[Ee]._bgRect=l.select("."+de),B._fullData[Ee]._bgRect.style("pointer-events",W?"none":"all").attr("width",fe.width).attr("height",fe.height).attr("x",fe.translateX).attr("y",fe.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(d.ease).duration(d.duration).attr("transform",I);var ae=re.selectAll("."+d.cn.sankeyLinks).data(h,c);ae.enter().append("g").classed(d.cn.sankeyLinks,!0).style("fill","none");var le=ae.selectAll("."+d.cn.sankeyLink).data(function(fe){return fe.graph.links.filter(function(Ee){return Ee.value}).map(w.bind(null,fe))},c);le.enter().append("path").classed(d.cn.sankeyLink,!0).call(j,re,V.linkEvents),le.style("stroke",function(fe){return P(fe)?t.tinyRGB(s(fe.linkLineColor)):fe.tinyColorHue}).style("stroke-opacity",function(fe){return P(fe)?t.opacity(fe.linkLineColor):fe.tinyColorAlpha}).style("fill",function(fe){return fe.tinyColorHue}).style("fill-opacity",function(fe){return fe.tinyColorAlpha}).style("stroke-width",function(fe){return P(fe)?fe.linkLineWidth:1}).attr("d",u()),le.style("opacity",function(){return B._context.staticPlot||X||K?1:0}).transition().ease(d.ease).duration(d.duration).style("opacity",1),le.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var pe=re.selectAll("."+d.cn.sankeyNodeSet).data(h,c);pe.enter().append("g").classed(d.cn.sankeyNodeSet,!0),pe.style("cursor",function(fe){switch(fe.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var xe=pe.selectAll("."+d.cn.sankeyNode).data(function(fe){var Ee=fe.graph.nodes;return function(de){var we,ke=[];for(we=0;we<de.length;we++)de[we].originalX=(de[we].x0+de[we].x1)/2,de[we].originalY=(de[we].y0+de[we].y1)/2,-1===ke.indexOf(de[we].originalX)&&ke.push(de[we].originalX);for(ke.sort(function(Te,$){return Te-$}),we=0;we<de.length;we++)de[we].originalLayerIndex=ke.indexOf(de[we].originalX),de[we].originalLayer=de[we].originalLayerIndex/(ke.length-1)}(Ee),Ee.map(S.bind(null,fe))},c);xe.enter().append("g").classed(d.cn.sankeyNode,!0).call(_).style("opacity",function(fe){return!B._context.staticPlot&&!X||fe.partOfGroup?0:1}),xe.call(j,re,V.nodeEvents).call(R,le,V,B),xe.transition().ease(d.ease).duration(d.duration).call(_).style("opacity",function(fe){return fe.partOfGroup?0:1}),xe.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var ye=xe.selectAll("."+d.cn.nodeRect).data(h);ye.enter().append("rect").classed(d.cn.nodeRect,!0).call(C),ye.style("stroke-width",function(fe){return fe.nodeLineWidth}).style("stroke",function(fe){return t.tinyRGB(s(fe.nodeLineColor))}).style("stroke-opacity",function(fe){return t.opacity(fe.nodeLineColor)}).style("fill",function(fe){return fe.tinyColorHue}).style("fill-opacity",function(fe){return fe.tinyColorAlpha}),ye.transition().ease(d.ease).duration(d.duration).call(C);var se=xe.selectAll("."+d.cn.nodeLabel).data(h);se.enter().append("text").classed(d.cn.nodeLabel,!0).style("cursor","default"),se.attr("data-notex",1).text(function(fe){return fe.node.label}).each(function(fe){var Ee=l.select(this);o.font(Ee,fe.textFont),x.convertToTspans(Ee,B)}).style("text-shadow",x.makeTextShadow(B._fullLayout.paper_bgcolor)).attr("text-anchor",function(fe){return fe.horizontal&&fe.left?"end":"start"}).attr("transform",function(fe){var Ee=l.select(this),de=x.lineCount(Ee),ke=fe.nodeLineWidth/2+3,Te=((fe.horizontal?fe.visibleHeight:fe.visibleWidth)-fe.textFont.size*((de-1)*p-y))/2;fe.horizontal&&(fe.left?ke=-ke:ke+=fe.visibleWidth);var $=fe.horizontal?"":"scale(-1,1)"+a(90);return n(fe.horizontal?ke:Te,fe.horizontal?Te:ke)+$}),se.transition().ease(d.ease).duration(d.duration)}},84564:function(Q){"use strict";Q.exports=function(z,e){for(var k=[],A=z.cd[0].trace,l=A._sankey.graph.nodes,T=0;T<l.length;T++){var b=l[T];if(!b.partOfGroup){var d=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];"v"===A.orientation&&d.reverse(),e&&e.contains(d,!1,T,z)&&k.push({pointNumber:b.pointNumber})}}return k}},75225:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){for(var T=0;T<A.length;T++)A[T].i=T;k.mergeArray(l.text,A,"tx"),k.mergeArray(l.texttemplate,A,"txt"),k.mergeArray(l.hovertext,A,"htx"),k.mergeArray(l.customdata,A,"data"),k.mergeArray(l.textposition,A,"tp"),l.textfont&&(k.mergeArrayCastPositive(l.textfont.size,A,"ts"),k.mergeArray(l.textfont.color,A,"tc"),k.mergeArray(l.textfont.family,A,"tf"));var b=l.marker;if(b){k.mergeArrayCastPositive(b.size,A,"ms"),k.mergeArrayCastPositive(b.opacity,A,"mo"),k.mergeArray(b.symbol,A,"mx"),k.mergeArray(b.angle,A,"ma"),k.mergeArray(b.standoff,A,"mf"),k.mergeArray(b.color,A,"mc");var d=b.line;b.line&&(k.mergeArray(d.color,A,"mlc"),k.mergeArrayCastPositive(d.width,A,"mlw"));var s=b.gradient;s&&"none"!==s.type&&(k.mergeArray(s.type,A,"mgt"),k.mergeArray(s.color,A,"mgc"))}}},82196:function(Q,z,e){"use strict";var k=e(12663).axisHoverFormat,A=e(5386).s,l=e(5386).f,T=e(50693),b=e(41940),d=e(79952).P,s=e(79952).u,t=e(91424),o=e(47581),r=e(1426).extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:k("x"),yhoverformat:k("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:A({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},d,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(89298),T=e(42973),b=e(50606).BADNUM,d=e(34098),s=e(36922),t=e(75225),o=e(66279);function r(h,f,x,v,g,y,p){var m=f._length,w=h._fullLayout,u=x._id,S=v._id,_=w._firstScatter[i(f)]===f.uid,E=(c(f,w,x,v)||{}).orientation,L=f.fill;x._minDtick=0,v._minDtick=0;var C={padded:!0},P={padded:!0};p&&(C.ppad=P.ppad=p);var I=m<2||g[0]!==g[m-1]||y[0]!==y[m-1];I&&("tozerox"===L||"tonextx"===L&&(_||"h"===E))?C.tozero=!0:(f.error_y||{}).visible||"tonexty"!==L&&"tozeroy"!==L&&(d.hasMarkers(f)||d.hasText(f))||(C.padded=!1,C.ppad=0),I&&("tozeroy"===L||"tonexty"===L&&(_||"v"===E))?P.tozero=!0:"tonextx"!==L&&"tozerox"!==L||(P.padded=!1),u&&(f._extremes[u]=l.findExtremes(x,g,C)),S&&(f._extremes[S]=l.findExtremes(v,y,P))}function n(h,f){if(d.hasMarkers(h)){var x,v=h.marker,g=1.6*(h.marker.sizeref||1);if(x="area"===h.marker.sizemode?function(u){return Math.max(Math.sqrt((u||0)/g),3)}:function(u){return Math.max((u||0)/g,3)},A.isArrayOrTypedArray(v.size)){var y={type:"linear"};l.setConvert(y);for(var p=y.makeCalcdata(h.marker,"size"),m=new Array(f),w=0;w<f;w++)m[w]=x(p[w]);return m}return x(v.size)}}function a(h,f){var x=i(f),v=h._firstScatter;v[x]||(v[x]=f.uid)}function i(h){var f=h.stackgroup;return h.xaxis+h.yaxis+h.type+(f?"-"+f:"")}function c(h,f,x,v){var g=h.stackgroup;if(g){var y=f._scatterStackOpts[x._id+v._id][g],p="v"===y.orientation?v:x;return"linear"===p.type||"log"===p.type?y:void 0}}Q.exports={calc:function(h,f){var x,v,g,y,p,m,w=h._fullLayout,u=f._xA=l.getFromId(h,f.xaxis||"x","x"),S=f._yA=l.getFromId(h,f.yaxis||"y","y"),_=u.makeCalcdata(f,"x"),E=S.makeCalcdata(f,"y"),L=T(f,u,"x",_),C=T(f,S,"y",E),P=L.vals,I=C.vals,j=f._length,R=new Array(j),H=f.ids,F=c(f,w,u,S),U=!1;a(w,f);var B,N="x",J="y";F?(A.pushUnique(F.traceIndices,f._expandedIndex),(x="v"===F.orientation)?(J="s",B="x"):(N="s",B="y"),p="interpolate"===F.stackgaps):r(h,f,u,S,P,I,n(f,j));var Z=!!f.xperiodalignment,V=!!f.yperiodalignment;for(v=0;v<j;v++){var W=R[v]={},X=k(P[v]),K=k(I[v]);X&&K?(W[N]=P[v],W[J]=I[v],Z&&(W.orig_x=_[v],W.xEnd=L.ends[v],W.xStart=L.starts[v]),V&&(W.orig_y=E[v],W.yEnd=C.ends[v],W.yStart=C.starts[v])):F&&(x?X:K)?(W[B]=x?P[v]:I[v],W.gap=!0,p?(W.s=b,U=!0):W.s=0):W[N]=W[J]=b,H&&(W.id=String(H[v]))}if(t(R,f),s(h,f),o(R,f),F){for(v=0;v<R.length;)R[v][B]===b?R.splice(v,1):v++;if(A.sort(R,function(le,pe){return le[B]-pe[B]||le.i-pe.i}),U){for(v=0;v<R.length-1&&R[v].gap;)v++;for((m=R[v].s)||(m=R[v].s=0),g=0;g<v;g++)R[g].s=m;for(y=R.length-1;y>v&&R[y].gap;)y--;for(m=R[y].s,g=R.length-1;g>y;g--)R[g].s=m;for(;v<y;)if(R[++v].gap){for(g=v+1;R[g].gap;)g++;for(var ne=R[v-1][B],re=R[v-1].s,ae=(R[g].s-re)/(R[g][B]-ne);v<g;)R[v].s=re+(R[v][B]-ne)*ae,v++}}}return R},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:c}},66279:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){k.isArrayOrTypedArray(l.selectedpoints)&&k.tagSelected(A,l)}},36922:function(Q,z,e){"use strict";var k=e(52075).hasColorscale,A=e(78803),l=e(34098);Q.exports=function(T,b){l.hasLines(b)&&k(b,"line")&&A(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(b)&&(k(b,"marker")&&A(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),k(b,"marker.line")&&A(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(Q){"use strict";Q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(Q,z,e){"use strict";var k=e(47761),A=e(11661).setGroupPositions;function l(T,b,d,s,t,o,r){t[s]=!0;var i,c,f,x,v,n={i:null,gap:!0,s:0};if(n[r]=d,T.splice(b,0,n),b&&d===T[b-1][r]){var a=T[b-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else o&&(n.s=(f=r,x=(i=T)[(c=b)-1],(v=i[c+1])?x?x.s+(v.s-x.s)*(d-x[f])/(v[f]-x[f]):v.s:x.s));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}Q.exports=function(T,b){"group"===T._fullLayout.scattermode&&function(B,N){for(var J=N.xaxis,Z=N.yaxis,V=B._fullLayout,W=B._fullData,X=B.calcdata,K=[],ne=[],re=0;re<W.length;re++){var ae=W[re];!0===ae.visible&&"scatter"===ae.type&&ae.xaxis===J._id&&ae.yaxis===Z._id&&("h"===ae.orientation?K.push(X[re]):"v"===ae.orientation&&ne.push(X[re]))}var le={mode:V.scattermode,gap:V.scattergap};A(B,J,Z,ne,le),A(B,Z,J,K,le)}(T,b);var d=b.xaxis,s=b.yaxis,o=T._fullLayout._scatterStackOpts[d._id+s._id];if(o){var r,n,a,i,c,h,f,x,v,g,y,p,m,w,u,S=T.calcdata;for(var _ in o){var E=(g=o[_]).traceIndices;if(E.length){for(y="interpolate"===g.stackgaps,p=g.groupnorm,"v"===g.orientation?(m="x",w="y"):(m="y",w="x"),u=new Array(E.length),r=0;r<u.length;r++)u[r]=!1;h=S[E[0]];var L=new Array(h.length);for(r=0;r<h.length;r++)L[r]=h[r][m];for(r=1;r<E.length;r++){for(c=S[E[r]],n=a=0;n<c.length;n++){for(f=c[n][m];f>L[a]&&a<L.length;a++)l(c,n,L[a],r,u,y,m),n++;if(f!==L[a]){for(i=0;i<r;i++)l(S[E[i]],a,f,i,u,y,m);L.splice(a,0,f)}a++}for(;a<L.length;a++)l(c,n,L[a],r,u,y,m),n++}var C=L.length;for(n=0;n<h.length;n++){for(x=h[n][w]=h[n].s,r=1;r<E.length;r++)(c=S[E[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=C,c[n][w]=x+=c[n].s;if(p)for(v=("fraction"===p?x:x/100)||1,r=0;r<E.length;r++){var P=S[E[r]][n];P[w]/=v,P.sNorm=P.s/v}}for(r=0;r<E.length;r++){var I=(c=S[E[r]])[0].trace,j=k.calcMarkerSize(I,I._rawLength),R=Array.isArray(j);if(j&&u[r]||R){var H=j;for(j=new Array(C),n=0;n<C;n++)j[n]=c[n].gap?0:R?H[c[n].i]:H}var F=new Array(C),U=new Array(C);for(n=0;n<C;n++)F[n]=c[n].x,U[n]=c[n].y;k.calcAxisExpansion(T,I,d,s,F,U,j),c[0].t.orientation=g.orientation}}}}}},34936:function(Q,z,e){"use strict";var k=e(71828),A=e(26125),l=e(82196);Q.exports=function(T,b){var s,t;function o(c){return k.coerce(s._input,s,l,c)}if("group"===b.scattermode)for(t=0;t<T.length;t++)"scatter"===(s=T[t]).type&&A(s._input,s,b,o);for(t=0;t<T.length;t++){var r=T[t];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var a=t-1;a>=0;a--){var i=T[a];if("scatter"===i.type&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}}},17438:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=e(82196),T=e(47581),b=e(34098),d=e(67513),s=e(73927),t=e(565),o=e(49508),r=e(11058),n=e(94039),a=e(82410),i=e(28908),c=e(71828).coercePattern;Q.exports=function(h,f,x,v){function g(E,L){return k.coerce(h,f,l,E,L)}var y=d(h,f,v,g);if(y||(f.visible=!1),f.visible){s(h,f,v,g),g("xhoverformat"),g("yhoverformat");var p=t(h,f,v,g);"group"===v.scattermode&&void 0===f.orientation&&g("orientation","v");var m=!p&&y<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",m),b.hasLines(f)&&(r(h,f,x,v,g,{backoff:!0}),n(h,f,g),g("connectgaps"),g("line.simplify")),b.hasMarkers(f)&&o(h,f,x,v,g,{gradient:!0}),b.hasText(f)&&(g("texttemplate"),a(h,f,v,g));var w=[];(b.hasMarkers(f)||b.hasText(f))&&(g("cliponaxis"),g("marker.maxdisplayed"),w.push("points")),g("fill",p?p.fillDflt:"none"),"none"!==f.fill&&(i(h,f,x,g),b.hasLines(f)||n(h,f,g),c(g,"fillpattern",f.fillcolor,!1));var u=(f.line||{}).color,S=(f.marker||{}).color;"tonext"!==f.fill&&"toself"!==f.fill||w.push("fills"),g("hoveron",w.join("+")||"points"),"fills"!==f.hoveron&&g("hovertemplate");var _=A.getComponentMethod("errorbars","supplyDefaults");_(h,f,u||S||x,{axis:"y"}),_(h,f,u||S||x,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(f,g)}}},28908:function(Q,z,e){"use strict";var k=e(7901),A=e(71828).isArrayOrTypedArray;Q.exports=function(l,T,b,d){var s=!1;if(T.marker){var t=T.marker.color,o=(T.marker.line||{}).color;t&&!A(t)?s=t:o&&!A(o)&&(s=o)}d("fillcolor",k.addOpacity((T.line||{}).color||s||b,.5))}},8225:function(Q,z,e){"use strict";var k=e(89298);Q.exports=function(A,l,T){var b={},d={_fullLayout:T},s=k.getFromTrace(d,l,"x"),t=k.getFromTrace(d,l,"y"),o=A.orig_x;void 0===o&&(o=A.x);var r=A.orig_y;return void 0===r&&(r=A.y),b.xLabel=k.tickText(s,s.c2l(o),!0).text,b.yLabel=k.tickText(t,t.c2l(r),!0).text,b}},34603:function(Q,z,e){"use strict";var k=e(7901),A=e(34098);Q.exports=function(l,T){var b,d;if("lines"===l.mode)return(b=l.line.color)&&k.opacity(b)?b:l.fillcolor;if("none"===l.mode)return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,t=T.mlcc||((l.marker||{}).line||{}).color;return(d=s&&k.opacity(s)?s:t&&k.opacity(t)&&(T.mlw||((l.marker||{}).line||{}).width)?t:"")?k.opacity(d)<.3?k.addOpacity(d,.3):d:(b=(l.line||{}).color)&&k.opacity(b)&&A.hasLines(l)&&l.line.width?b:l.fillcolor}},26125:function(Q,z,e){"use strict";var k=e(99082).getAxisGroup;Q.exports=function(A,l,T,b){var d=l.orientation,t=k(T,l[{v:"x",h:"y"}[d]+"axis"])+d,o=T._alignmentOpts||{},r=b("alignmentgroup"),n=o[t];n||(n=o[t]={});var a=n[r];a?a.traces.push(l):a=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var i=b("offsetgroup"),c=a.offsetGroups,h=c[i];i&&(h||(h=c[i]={offsetIndex:Object.keys(c).length}),l._offsetIndex=h.offsetIndex)}},33720:function(Q,z,e){"use strict";var k=e(71828),A=e(30211),l=e(73972),T=e(34603),b=e(7901),d=k.fillText;Q.exports=function(s,t,o,r){var n=s.cd,a=n[0].trace,i=s.xa,c=s.ya,h=i.c2p(t),f=c.c2p(o),x=[h,f],v=a.hoveron||"",g=-1!==a.mode.indexOf("markers")?3:.5,y=!!a.xperiodalignment,p=!!a.yperiodalignment;if(-1!==v.indexOf("points")){var m=function(xe){var ye=Math.max(g,xe.mrc||0),se=i.c2p(xe.x)-h,fe=c.c2p(xe.y)-f;return Math.max(Math.sqrt(se*se+fe*fe)-ye,1-g/ye)},w=A.getDistanceFunction(r,function(xe){if(y){var ye=i.c2p(xe.xStart),se=i.c2p(xe.xEnd);return h>=Math.min(ye,se)&&h<=Math.max(ye,se)?0:1/0}var fe=Math.max(3,xe.mrc||0),Ee=1-1/fe,de=Math.abs(i.c2p(xe.x)-h);return de<fe?Ee*de/fe:de-fe+Ee},function(xe){if(p){var ye=c.c2p(xe.yStart),se=c.c2p(xe.yEnd);return f>=Math.min(ye,se)&&f<=Math.max(ye,se)?0:1/0}var fe=Math.max(3,xe.mrc||0),Ee=1-1/fe,de=Math.abs(c.c2p(xe.y)-f);return de<fe?Ee*de/fe:de-fe+Ee},m);if(A.getClosest(n,w,s),!1!==s.index){var u=n[s.index],S=i.c2p(u.x,!0),_=c.c2p(u.y,!0),E=u.mrc||1;s.index=u.i;var L=n[0].t.orientation,C=L&&(u.sNorm||u.s),P="h"===L?C:void 0!==u.orig_x?u.orig_x:u.x,I="v"===L?C:void 0!==u.orig_y?u.orig_y:u.y;return k.extendFlat(s,{color:T(a,u),x0:S-E,x1:S+E,xLabelVal:P,y0:_-E,y1:_+E,yLabelVal:I,spikeDistance:m(u),hovertemplate:a.hovertemplate}),d(u,a,s),l.getComponentMethod("errorbars","hoverInfo")(u,a,s),[s]}}if(-1!==v.indexOf("fills")&&a._polygons){var j,R,H,F,U,B,J,Z,V=a._polygons,W=[],X=!1,K=1/0,ne=-1/0,re=1/0,ae=-1/0;for(j=0;j<V.length;j++)(H=V[j]).contains(x)&&(X=!X,W.push(H),re=Math.min(re,H.ymin),ae=Math.max(ae,H.ymax));if(X){var le=((re=Math.max(re,0))+(ae=Math.min(ae,c._length)))/2;for(j=0;j<W.length;j++)for(F=W[j].pts,R=1;R<F.length;R++)(J=F[R-1][1])>le!=(Z=F[R][1])>=le&&(B=F[R-1][0],Z-J&&(U=B+(F[R][0]-B)*(le-J)/(Z-J),K=Math.min(K,U),ne=Math.max(ne,U)));K=Math.max(K,0),ne=Math.min(ne,i._length);var pe=b.defaultLine;return b.opacity(a.fillcolor)?pe=a.fillcolor:b.opacity((a.line||{}).color)&&(pe=a.line.color),k.extendFlat(s,{distance:s.maxHoverDistance,x0:K,x1:ne,y0:le,y1:le,color:pe,hovertemplate:!1}),delete s.index,s.text=a.text&&!Array.isArray(a.text)?String(a.text):a.name,[s]}}}},67368:function(Q,z,e){"use strict";var k=e(34098);Q.exports={hasLines:k.hasLines,hasMarkers:k.hasMarkers,hasText:k.hasText,isBubble:k.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(Q){"use strict";Q.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(Q,z,e){"use strict";var k=e(71828),A=e(21479);Q.exports=function(l,T){"group"===T.scattermode&&k.coerce(l,T,A,"scattergap","group"===T.barmode?T.bargap:.2)}},11058:function(Q,z,e){"use strict";var k=e(71828).isArrayOrTypedArray,A=e(52075).hasColorscale,l=e(1586);Q.exports=function(T,b,d,s,t,o){o||(o={});var r=(T.marker||{}).color;t("line.color",d),A(T,"line")?l(T,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!k(r)&&r||d),t("line.width"),o.noDash||t("line.dash"),o.backoff&&t("line.backoff")}},34621:function(Q,z,e){"use strict";var k=e(91424),A=e(50606),l=A.BADNUM,T=A.LOG_CLIP,b=T+.5,d=T-.5,s=e(71828),t=s.segmentsIntersect,o=s.constrain,r=e(47581);Q.exports=function(n,a){var i,c,h,f,x,v,g,y,p,m,w,u,S,_,E,L,C,P,I=a.trace||{},j=a.xaxis,R=a.yaxis,H="log"===j.type,F="log"===R.type,U=j._length,B=R._length,N=a.backoff,J=I.marker,Z=a.connectGaps,V=a.baseTolerance,W=a.shape,X="linear"===W,K=I.fill&&"none"!==I.fill,ne=[],re=r.minTolerance,ae=n.length,le=new Array(ae),pe=0;function xe(It){var Ge=n[It];if(!Ge)return!1;var Ze=a.linearized?j.l2p(Ge.x):j.c2p(Ge.x),Be=a.linearized?R.l2p(Ge.y):R.c2p(Ge.y);if(Ze===l){if(H&&(Ze=j.c2p(Ge.x,!0)),Ze===l)return!1;F&&Be===l&&(Ze*=Math.abs(j._m*B*(j._m>0?b:d)/(R._m*U*(R._m>0?b:d)))),Ze*=1e3}if(Be===l){if(F&&(Be=R.c2p(Ge.y,!0)),Be===l)return!1;Be*=1e3}return[Ze,Be]}function ye(It,Ge,Ze,Be){var Ye=Ze-It,rt=Be-Ge,Se=.5-It,Re=.5-Ge,Ke=Ye*Ye+rt*rt,st=Ye*Se+rt*Re;if(st>0&&st<Ke){var ct=Se*rt-Re*Ye;if(ct*ct<Ke)return!0}}function se(It,Ge){var Ze=It[0]/U,Be=It[1]/B,Ye=Math.max(0,-Ze,Ze-1,-Be,Be-1);return Ye&&void 0!==C&&ye(Ze,Be,C,P)&&(Ye=0),Ye&&Ge&&ye(Ze,Be,Ge[0]/U,Ge[1]/B)&&(Ye=0),(1+r.toleranceGrowth*Ye)*V}function fe(It,Ge){var Ze=It[0]-Ge[0],Be=It[1]-Ge[1];return Math.sqrt(Ze*Ze+Be*Be)}var Ee,de,we,ke,Te,$,oe,he=r.maxScreensAway,me=-U*he,Me=U*(1+he),Ie=-B*he,Pe=B*(1+he),ze=[[me,Ie,Me,Ie],[Me,Ie,Me,Pe],[Me,Pe,me,Pe],[me,Pe,me,Ie]];function ce(It){if(It[0]<me||It[0]>Me||It[1]<Ie||It[1]>Pe)return[o(It[0],me,Me),o(It[1],Ie,Pe)]}function ge(It,Ge){return It[0]===Ge[0]&&(It[0]===me||It[0]===Me)||It[1]===Ge[1]&&(It[1]===Ie||It[1]===Pe)||void 0}function _e(It,Ge,Ze){return function(Be,Ye){var rt=ce(Be),Se=ce(Ye),Re=[];if(rt&&Se&&ge(rt,Se))return Re;rt&&Re.push(rt),Se&&Re.push(Se);var Ke=2*s.constrain((Be[It]+Ye[It])/2,Ge,Ze)-((rt||Be)[It]+(Se||Ye)[It]);return Ke&&((rt&&Se?Ke>0==rt[It]>Se[It]?rt:Se:rt||Se)[It]+=Ke),Re}}function De(It){var Ge=It[0],Ze=It[1],Be=Ge===le[pe-1][0],Ye=Ze===le[pe-1][1];if(!Be||!Ye)if(pe>1){var rt=Ge===le[pe-2][0],Se=Ze===le[pe-2][1];Be&&(Ge===me||Ge===Me)&&rt?Se?pe--:le[pe-1]=It:Ye&&(Ze===Ie||Ze===Pe)&&Se?rt?pe--:le[pe-1]=It:le[pe++]=It}else le[pe++]=It}function He(It){le[pe-1][0]!==It[0]&&le[pe-1][1]!==It[1]&&De([we,ke]),De(It),Te=null,we=ke=0}"linear"===W||"spline"===W?oe=function(It,Ge){for(var Ze=[],Be=0,Ye=0;Ye<4;Ye++){var rt=ze[Ye],Se=t(It[0],It[1],Ge[0],Ge[1],rt[0],rt[1],rt[2],rt[3]);Se&&(!Be||Math.abs(Se.x-Ze[0][0])>1||Math.abs(Se.y-Ze[0][1])>1)&&(Se=[Se.x,Se.y],Be&&fe(Se,It)<fe(Ze[0],It)?Ze.unshift(Se):Ze.push(Se),Be++)}return Ze}:"hv"===W||"vh"===W?oe=function(It,Ge){var Ze=[],Be=ce(It),Ye=ce(Ge);return Be&&Ye&&ge(Be,Ye)||(Be&&Ze.push(Be),Ye&&Ze.push(Ye)),Ze}:"hvh"===W?oe=_e(0,me,Me):"vhv"===W&&(oe=_e(1,Ie,Pe));var Ve=s.isArrayOrTypedArray(J);function nt(It){if(It&&N&&(It.i=i,It.d=n,It.trace=I,It.marker=Ve?J[It.i]:J,It.backoff=N),C=It[0]/U,P=It[1]/B,de=It[1]<Ie?Ie:It[1]>Pe?Pe:0,(Ee=It[0]<me?me:It[0]>Me?Me:0)||de){if(pe)if(Te){var Ge=oe(Te,It);Ge.length>1&&(He(Ge[0]),le[pe++]=Ge[1])}else $=oe(le[pe-1],It)[0],le[pe++]=$;else le[pe++]=[Ee||It[0],de||It[1]];var Ze=le[pe-1];Ee&&de&&(Ze[0]!==Ee||Ze[1]!==de)?(Te&&(we!==Ee&&ke!==de?De(we&&ke?(rt=(Ye=It)[0]-(Be=Te)[0],Se=(Ye[1]-Be[1])/rt,(Be[1]*Ye[0]-Ye[1]*Be[0])/rt>0?[Se>0?me:Me,Pe]:[Se>0?Me:me,Ie]):[we||Ee,ke||de]):we&&ke&&De([we,ke])),De([Ee,de])):we-Ee&&ke-de&&De([Ee||we,de||ke]),Te=It,we=Ee,ke=de}else Te&&He(oe(Te,It)[0]),le[pe++]=It;var Be,Ye,rt,Se}for(i=0;i<ae;i++)if(c=xe(i)){for(pe=0,Te=null,nt(c),i++;i<ae;i++){if(!(f=xe(i))){if(Z)continue;break}if(X&&a.simplify){var tt=xe(i+1);if(m=fe(f,c),K&&(0===pe||pe===ae-1)||!(m<se(f,tt)*re)){for(y=[(f[0]-c[0])/m,(f[1]-c[1])/m],x=c,w=m,u=_=E=0,g=!1,h=f,i++;i<n.length;i++){if(v=tt,tt=xe(i+1),!v){if(Z)continue;break}if(L=(p=[v[0]-c[0],v[1]-c[1]])[0]*y[1]-p[1]*y[0],_=Math.min(_,L),(E=Math.max(E,L))-_>se(v,tt))break;h=v,(S=p[0]*y[0]+p[1]*y[1])>w?(w=S,f=v,g=!1):S<u&&(u=S,x=v,g=!0)}if(g?(nt(f),h!==x&&nt(x)):(x!==c&&nt(x),h!==f&&nt(f)),nt(h),i>=n.length||!v)break;nt(v),c=v}}else nt(f)}Te&&De([we||Te[0],ke||Te[1]]),ne.push(le.slice(0,pe))}var at=W.slice(W.length-1);if(N&&"h"!==at&&"v"!==at){for(var dt=!1,wt=-1,bt=[],_t=0;_t<ne.length;_t++)for(var Lt=0;Lt<ne[_t].length-1;Lt++){var Ct=ne[_t][Lt],Ot=ne[_t][Lt+1],Ht=k.applyBackoff(Ot,Ct);Ht[0]===Ot[0]&&Ht[1]===Ot[1]||(dt=!0),bt[wt+1]||(bt[++wt]=[Ct,[Ht[0],Ht[1]]])}return dt?bt:ne}return ne}},94039:function(Q){"use strict";Q.exports=function(z,e,k){"spline"===k("line.shape")&&k("line.smoothing")}},68687:function(Q){"use strict";var z={tonextx:1,tonexty:1,tonext:1};Q.exports=function(e,k,A){var l,T,b,d,s,t={},o=!1,r=-1,n=0,a=-1;for(T=0;T<A.length;T++)(b=(l=A[T][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=n,n++):l.fill in z&&a>=0?s=a:(s=a=n,n++),s<r&&(o=!0),l._groupIndex=r=s;var i=A.slice();o&&i.sort(function(h,f){var x=h[0].trace,v=f[0].trace;return x._groupIndex-v._groupIndex||x.index-v.index});var c={};for(T=0;T<i.length;T++)b=(l=i[T][0].trace).stackgroup||"",!0===l.visible?(l._nexttrace=null,l.fill in z&&(l._prevtrace=(d=c[b])||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&("tozero"===l.fill.substr(0,6)||"toself"===l.fill||"to"===l.fill.substr(0,2)&&!l._prevtrace),c[b]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return i}},39984:function(Q,z,e){"use strict";var k=e(92770);Q.exports=function(A,l){l||(l=2);var T=A.marker,b=T.sizeref||1,d=T.sizemin||0,s="area"===T.sizemode?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var o=s(t/l);return k(o)&&o>0?Math.max(o,d):0}}},4898:function(Q){"use strict";Q.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(Q,z,e){"use strict";var k=e(7901),A=e(52075).hasColorscale,l=e(1586),T=e(34098);Q.exports=function(b,d,s,t,o,r){var n=T.isBubble(b),a=(b.line||{}).color;r=r||{},a&&(s=a),o("marker.symbol"),o("marker.opacity",n?.7:1),o("marker.size"),r.noAngle||(o("marker.angle"),r.noAngleRef||o("marker.angleref"),r.noStandOff||o("marker.standoff")),o("marker.color",s),A(b,"marker")&&l(b,d,t,o,{prefix:"marker.",cLetter:"c"}),r.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),r.noLine||(o("marker.line.color",a&&!Array.isArray(a)&&d.marker.color!==a?a:n?k.background:k.defaultLine),A(b,"marker.line")&&l(b,d,t,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",n?1:0)),n&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),r.gradient&&"none"!==o("marker.gradient.type")&&o("marker.gradient.color")}},73927:function(Q,z,e){"use strict";var k=e(71828).dateTick0,A=e(50606).ONEWEEK;function l(T,b){return k(b,T%A==0?1:0)}Q.exports=function(T,b,d,s,t){if(t||(t={x:!0,y:!0}),t.x){var o=s("xperiod");o&&(s("xperiod0",l(o,b.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",l(r,b.ycalendar)),s("yperiodalignment"))}}},32663:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(71828),T=l.ensureSingle,b=l.identity,d=e(91424),s=e(34098),t=e(34621),o=e(68687),r=e(61082).tester;function n(a,i,c,h,f,x,v){var g,y=a._context.staticPlot;!function(oe,he,me,Me,Ie){var Pe=me.xaxis,ze=me.yaxis,ce=k.extent(l.simpleMap(Pe.range,Pe.r2c)),ge=k.extent(l.simpleMap(ze.range,ze.r2c)),_e=Me[0].trace;if(s.hasMarkers(_e)){var De=_e.marker.maxdisplayed;if(0!==De){var He=Me.filter(function(at){return at.x>=ce[0]&&at.x<=ce[1]&&at.y>=ge[0]&&at.y<=ge[1]}),Ve=Math.ceil(He.length/De),nt=0;Ie.forEach(function(at,dt){var wt=at[0].trace;s.hasMarkers(wt)&&wt.marker.maxdisplayed>0&&dt<he&&nt++});var tt=Math.round(nt*Ve/3+Math.floor(nt/3)*Ve/7.1);Me.forEach(function(at){delete at.vis}),He.forEach(function(at,dt){0===Math.round((dt+tt)%Ve)&&(at.vis=!0)})}}}(0,i,c,h,f);var p=!!v&&v.duration>0;function m(oe){return p?oe.transition():oe}var w=c.xaxis,u=c.yaxis,S=h[0].trace,_=S.line,E=k.select(x),L=T(E,"g","errorbars"),C=T(E,"g","lines"),P=T(E,"g","points"),I=T(E,"g","text");if(A.getComponentMethod("errorbars","plot")(a,L,c,v),!0===S.visible){var j,R;m(E).style("opacity",S.opacity);var H=S.fill.charAt(S.fill.length-1);"x"!==H&&"y"!==H&&(H=""),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=E;var F,U,B="",N=[],J=S._prevtrace;J&&(B=J._prevRevpath||"",R=J._nextFill,N=J._polygons);var Z,V,W,X,K,ne,re,ae="",le="",pe=[],xe=l.noop;if(j=S._ownFill,s.hasLines(S)||"none"!==S.fill){for(R&&R.datum(h),-1!==["hv","vh","hvh","vhv"].indexOf(_.shape)?(Z=d.steps(_.shape),V=d.steps(_.shape.split("").reverse().join(""))):Z=V="spline"===_.shape?function(oe){var he=oe[oe.length-1];return oe.length>1&&oe[0][0]===he[0]&&oe[0][1]===he[1]?d.smoothclosed(oe.slice(1),_.smoothing):d.smoothopen(oe,_.smoothing)}:function(oe){return"M"+oe.join("L")},W=function(oe){return V(oe.reverse())},pe=t(h,{xaxis:w,yaxis:u,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(_.width||1,3)/4,shape:_.shape,backoff:_.backoff,simplify:_.simplify,fill:S.fill}),re=S._polygons=new Array(pe.length),g=0;g<pe.length;g++)S._polygons[g]=r(pe[g]);pe.length&&(X=pe[0][0],ne=(K=pe[pe.length-1])[K.length-1]),xe=function(oe){return function(he){if(F=Z(he),U=W(he),ae?H?(ae+="L"+F.substr(1),le=U+"L"+le.substr(1)):(ae+="Z"+F,le=U+"Z"+le):(ae=F,le=U),s.hasLines(S)){var me=k.select(this);if(me.datum(h),oe)m(me.style("opacity",0).attr("d",F).call(d.lineGroupStyle)).style("opacity",1);else{var Me=m(me);Me.attr("d",F),d.singleLineStyle(h,Me)}}}}}var ye=C.selectAll(".js-line").data(pe);m(ye.exit()).style("opacity",0).remove(),ye.each(xe(!1)),ye.enter().append("path").classed("js-line",!0).style("vector-effect",y?"none":"non-scaling-stroke").call(d.lineGroupStyle).each(xe(!0)),d.setClipUrl(ye,c.layerClipId,a),pe.length?(j?(j.datum(h),X&&ne&&(H?("y"===H?X[1]=ne[1]=u.c2p(0,!0):"x"===H&&(X[0]=ne[0]=w.c2p(0,!0)),m(j).attr("d","M"+ne+"L"+X+"L"+ae.substr(1)).call(d.singleFillStyle,a)):m(j).attr("d",ae+"Z").call(d.singleFillStyle,a))):R&&("tonext"===S.fill.substr(0,6)&&ae&&B?("tonext"===S.fill?m(R).attr("d",ae+"Z"+B+"Z").call(d.singleFillStyle,a):m(R).attr("d",ae+"L"+B.substr(1)+"Z").call(d.singleFillStyle,a),S._polygons=S._polygons.concat(N)):(fe(R),S._polygons=null)),S._prevRevpath=le,S._prevPolygons=re):(j?fe(j):R&&fe(R),S._polygons=S._prevRevpath=S._prevPolygons=null),P.datum(h),I.datum(h),function(oe,he,me){var Me,Ie=me[0].trace,Pe=s.hasMarkers(Ie),ze=s.hasText(Ie),ce=function Te(oe){if(oe.ids)return ke}(Ie),ge=$,_e=$;if(Pe||ze){var De=b,He=Ie.stackgroup,Ve=He&&"infer zero"===a._fullLayout._scatterStackOpts[w._id+u._id][He].stackgaps;Ie.marker.maxdisplayed||Ie._needsCull?De=Ve?de:Ee:He&&!Ve&&(De=we),Pe&&(ge=De),ze&&(_e=De)}var nt,tt=(Me=oe.selectAll("path.point").data(ge,ce)).enter().append("path").classed("point",!0);p&&tt.call(d.pointStyle,Ie,a).call(d.translatePoints,w,u).style("opacity",0).transition().style("opacity",1),Me.order(),Pe&&(nt=d.makePointStyleFns(Ie)),Me.each(function(at){var dt=k.select(this),wt=m(dt);d.translatePoint(at,wt,w,u)?(d.singlePointStyle(at,wt,Ie,nt,a),c.layerClipId&&d.hideOutsideRangePoint(at,wt,w,u,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&dt.classed("plotly-customdata",null!=at.data)):wt.remove()}),p?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),(Me=he.selectAll("g").data(_e,ce)).enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(at){var dt=k.select(this),wt=m(dt.select("text"));d.translatePoint(at,wt,w,u)?c.layerClipId&&d.hideOutsideRangePoint(at,dt,w,u,Ie.xcalendar,Ie.ycalendar):dt.remove()}),Me.selectAll("text").call(d.textPointStyle,Ie,a).each(function(at){var dt=w.c2p(at.x),wt=u.c2p(at.y);k.select(this).selectAll("tspan.line").each(function(){m(k.select(this)).attr({x:dt,y:wt})})}),Me.exit().remove()}(P,I,h);var se=!1===S.cliponaxis?null:c.layerClipId;d.setClipUrl(P,se,a),d.setClipUrl(I,se,a)}function fe(oe){m(oe).attr("d","M0,0Z")}function Ee(oe){return oe.filter(function(he){return!he.gap&&he.vis})}function de(oe){return oe.filter(function(he){return he.vis})}function we(oe){return oe.filter(function(he){return!he.gap})}function ke(oe){return oe.id}function $(){return!1}}Q.exports=function(a,i,c,h,f,x){var v,g,w,S,y=!f,p=!!f&&f.duration>0,m=o(a,i,c);(v=h.selectAll("g.trace").data(m,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),v.order(),w=a,S=i,v.each(function(_){var E=T(k.select(this),"g","fills");d.setClipUrl(E,S.layerClipId,w);var L=_[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,b);P.enter().append("g"),P.exit().each(function(I){L[I]=null}).remove(),P.order().each(function(I){L[I]=T(k.select(this),"path","js-fill")})}),p?(x&&(g=x()),k.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){h.selectAll("g.trace").each(function(w,u){n(a,u,i,w,m,this,f)})})):v.each(function(w,u){n(a,u,i,w,m,this,f)}),y&&v.exit().remove(),h.selectAll("path:not([d])").remove()}},98002:function(Q,z,e){"use strict";var k=e(34098);Q.exports=function(A,l){var T,b,d,s,t=A.cd,o=A.xaxis,r=A.yaxis,n=[],a=t[0].trace;if(!k.hasMarkers(a)&&!k.hasText(a))return[];if(!1===l)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)d=o.c2p((b=t[T]).x),s=r.c2p(b.y),null!==b.i&&l.contains([d,s],!1,T,A)?(n.push({pointNumber:b.i,x:o.c2d(b.x),y:r.c2d(b.y)}),b.selected=1):b.selected=0;return n}},565:function(Q){"use strict";var z=["orientation","groupnorm","stackgaps"];Q.exports=function(e,k,A,l){var T=A._scatterStackOpts,b=l("stackgroup");if(b){var d=k.xaxis+k.yaxis,s=T[d];s||(s=T[d]={});var t=s[b],o=!1;t?t.traces.push(k):(t=s[b]={traceIndices:[],traces:[k]},o=!0);for(var r={orientation:k.x&&!k.y?"h":"v"},n=0;n<z.length;n++){var a=z[n],i=a+"Found";if(!t[i]){var c=void 0!==e[a],h="orientation"===a;if((c||o)&&(t[a]=l(a,r[a]),h&&(t.fillDflt="h"===t[a]?"tonextx":"tonexty"),c&&(t[i]=!0,!o&&(delete t.traces[0][a],h))))for(var f=0;f<t.traces.length-1;f++){var x=t.traces[f];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},16296:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(73972);function T(d,s,t){A.pointStyle(d.selectAll("path.point"),s,t)}function b(d,s,t){A.textPointStyle(d.selectAll("text"),s,t)}Q.exports={style:function(d){var s=k.select(d).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(k.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.text").each(function(t){b(k.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.trace path.js-line").call(A.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(A.fillGroupStyle,d),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(d,s,t){var o=s[0].trace;o.selectedpoints?(A.selectedPointStyle(t.selectAll("path.point"),o),A.selectedTextStyle(t.selectAll("text"),o)):(T(t,o,d),b(t,o,d))}}},34098:function(Q,z,e){"use strict";var k=e(71828);Q.exports={hasLines:function(A){return A.visible&&A.mode&&-1!==A.mode.indexOf("lines")},hasMarkers:function(A){return A.visible&&(A.mode&&-1!==A.mode.indexOf("markers")||"splom"===A.type)},hasText:function(A){return A.visible&&A.mode&&-1!==A.mode.indexOf("text")},isBubble:function(A){return k.isPlainObject(A.marker)&&k.isArrayOrTypedArray(A.marker.size)}}},82410:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l,T,b,d){d=d||{},b("textposition"),k.coerceFont(b,"textfont",T.font),d.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},67513:function(Q,z,e){"use strict";var k=e(71828),A=e(73972);Q.exports=function(l,T,b,d){var s,t=d("x"),o=d("y");if(A.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],b),t){var r=k.minRowLength(t);o?s=Math.min(r,k.minRowLength(o)):(s=r,d("y0"),d("dy"))}else{if(!o)return 0;s=k.minRowLength(o),d("x0"),d("dx")}return T._length=s,s}},44542:function(Q,z,e){"use strict";var k=e(82196),A=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,b=e(5386).s,d=e(9012),s=e(29659),t=e(87381),o=e(1426).extendFlat,r=e(30962).overrideAll,n=e(78607),i=k.marker,c=i.line,h=o({width:k.line.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},A("line")),f=Q.exports=r({x:k.x,y:k.y,z:{valType:"data_array"},text:o({},k.text,{}),texttemplate:b({},{}),hovertext:o({},k.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:o({},k.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:k.connectgaps,line:h,marker:o({symbol:{valType:"enumerated",values:n(t),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},c.width,{arrayOk:!1})},A("marker.line"))},A("marker")),textposition:o({},k.textposition,{dflt:"top center"}),textfont:{color:k.textfont.color,size:k.textfont.size,family:o({},k.textfont.family,{arrayOk:!1})},opacity:d.opacity,hoverinfo:o({},d.hoverinfo)},"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes"},36563:function(Q,z,e){"use strict";var k=e(75225),A=e(36922);Q.exports=function(l,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return k(b,T),A(l,T),b}},67336:function(Q,z,e){"use strict";var k=e(73972);function A(l,T,b,d){if(!T||!T.visible)return null;for(var s=k.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(l.length),o=0;o<l.length;o++){var r=s(+l[o],o);if("log"===d.type){var n=d.c2l(l[o]),a=l[o]-r[0],i=l[o]+r[1];if(t[o]=[(d.c2l(a,!0)-n)*b,(d.c2l(i,!0)-n)*b],a>0){var c=d.c2l(a);d._lowerLogErrorBound||(d._lowerLogErrorBound=c),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,c)}}else t[o]=[-r[0]*b,r[1]*b]}return t}Q.exports=function(l,T,b){var d=[A(l.x,l.error_x,T[0],b.xaxis),A(l.y,l.error_y,T[1],b.yaxis),A(l.z,l.error_z,T[2],b.zaxis)],s=function(i){for(var c=0;c<i.length;c++)if(i[c])return i[c].length;return 0}(d);if(0===s)return null;for(var t=new Array(s),o=0;o<s;o++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(d[n])for(var a=0;a<2;a++)r[a][n]=d[n][o][a];t[o]=r}return t}},58925:function(Q,z,e){"use strict";var k=e(9330).gl_line3d,A=e(9330).gl_scatter3d,l=e(9330).gl_error3d,T=e(9330).gl_mesh3d,b=e(9330).delaunay_triangulate,d=e(71828),s=e(78614),t=e(81697).formatColor,o=e(39984),r=e(29659),n=e(87381),a=e(89298),i=e(23469).appendArrayPointValue,c=e(67336);function h(u,S){this.scene=u,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=h.prototype;function x(u){return null==u?0:u.indexOf("left")>-1?-1:u.indexOf("right")>-1?1:0}function v(u){return null==u?0:u.indexOf("top")>-1?-1:u.indexOf("bottom")>-1?1:0}function g(u,S){return S(4*u)}function y(u){return n[u]}function p(u,S,_,E,L){var C=null;if(d.isArrayOrTypedArray(u)){C=[];for(var P=0;P<S;P++)C[P]=void 0===u[P]?E:_(u[P],L)}else C=_(u,d.identity);return C}function m(u){if(d.isArrayOrTypedArray(u)){var S=u[0];return d.isArrayOrTypedArray(S)&&(u=S),"rgb("+u.slice(0,3).map(function(_){return Math.round(255*_)})+")"}return null}function w(u){return d.isArrayOrTypedArray(u)?4===u.length&&"number"==typeof u[0]?m(u):u.map(m):null}f.handlePick=function(u){if(u.object&&(u.object===this.linePlot||u.object===this.delaunayMesh||u.object===this.textMarkers||u.object===this.scatterPlot)){var S=u.index=u.data.index;return u.object.highlight&&u.object.highlight(null),this.scatterPlot&&(u.object=this.scatterPlot,this.scatterPlot.highlight(u.data)),u.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||0===this.textLabels[S])&&(u.textLabel=this.textLabels[S]):u.textLabel=this.textLabels),u.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},f.update=function(u){var S,_,E,L,C=this.scene.glplot.gl,P=r.solid;this.data=u;var I=function(H,F){var U,B,N,J,Z,V,W=[],X=H.fullSceneLayout,K=H.dataScale,ne=X.xaxis,re=X.yaxis,ae=X.zaxis,le=F.marker,pe=F.line,xe=F.x||[],ye=F.y||[],se=F.z||[],fe=xe.length,Ee=F.xcalendar,de=F.ycalendar,we=F.zcalendar;for(Z=0;Z<fe;Z++)U=ne.d2l(xe[Z],0,Ee)*K[0],B=re.d2l(ye[Z],0,de)*K[1],N=ae.d2l(se[Z],0,we)*K[2],W[Z]=[U,B,N];if(Array.isArray(F.text))V=F.text;else if(void 0!==F.text)for(V=new Array(fe),Z=0;Z<fe;Z++)V[Z]=F.text;function ke(He,Ve){var nt=X[He];return a.tickText(nt,nt.d2l(Ve),!0).text}var Te=F.texttemplate;if(Te){var $=H.fullLayout._d3locale,oe=Array.isArray(Te),he=oe?Math.min(Te.length,fe):fe,me=oe?function(He){return Te[He]}:function(){return Te};for(V=new Array(he),Z=0;Z<he;Z++){var Me={x:xe[Z],y:ye[Z],z:se[Z]},Ie={xLabel:ke("xaxis",xe[Z]),yLabel:ke("yaxis",ye[Z]),zLabel:ke("zaxis",se[Z])},Pe={};i(Pe,F,Z);var ze=F._meta||{};V[Z]=d.texttemplateString(me(Z),Ie,$,Pe,Me,ze)}}if(J={position:W,mode:F.mode,text:V},"line"in F&&(J.lineColor=t(pe,1,fe),J.lineWidth=pe.width,J.lineDashes=pe.dash),"marker"in F){var ce=o(F);J.scatterColor=t(le,1,fe),J.scatterSize=p(le.size,fe,g,20,ce),J.scatterMarker=p(le.symbol,fe,y,"\u25cf"),J.scatterLineWidth=le.line.width,J.scatterLineColor=t(le.line,1,fe),J.scatterAngle=0}"textposition"in F&&(J.textOffset=function(He){var Ve=[0,0];if(Array.isArray(He))for(var nt=0;nt<He.length;nt++)Ve[nt]=[0,0],He[nt]&&(Ve[nt][0]=x(He[nt]),Ve[nt][1]=v(He[nt]));else Ve[0]=x(He),Ve[1]=v(He);return Ve}(F.textposition),J.textColor=t(F.textfont,1,fe),J.textSize=p(F.textfont.size,fe,d.identity,12),J.textFont=F.textfont.family,J.textAngle=0);var ge=["x","y","z"];for(J.project=[!1,!1,!1],J.projectScale=[1,1,1],J.projectOpacity=[1,1,1],Z=0;Z<3;++Z){var _e=F.projection[ge[Z]];(J.project[Z]=_e.show)&&(J.projectOpacity[Z]=_e.opacity,J.projectScale[Z]=_e.scale)}J.errorBounds=c(F,K,X);var De=function(He){for(var Ve=[0,0,0],nt=[[0,0,0],[0,0,0],[0,0,0]],tt=[1,1,1],at=0;at<3;at++){var dt=He[at];dt&&!1!==dt.copy_zstyle&&!1!==He[2].visible&&(dt=He[2]),dt&&dt.visible&&(Ve[at]=dt.width/2,nt[at]=s(dt.color),tt[at]=dt.thickness)}return{capSize:Ve,color:nt,lineWidth:tt}}([F.error_x,F.error_y,F.error_z]);return J.errorColor=De.color,J.errorLineWidth=De.lineWidth,J.errorCapSize=De.capSize,J.delaunayAxis=F.surfaceaxis,J.delaunayColor=s(F.surfacecolor),J}(this.scene,u);"mode"in I&&(this.mode=I.mode),"lineDashes"in I&&I.lineDashes in r&&(P=r[I.lineDashes]),this.color=w(I.scatterColor)||w(I.lineColor),this.dataPoints=I.position,S={gl:this.scene.glplot.gl,position:I.position,color:I.lineColor,lineWidth:I.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:u.opacity,connectGaps:u.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(S):(this.linePlot=k(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=u.opacity;if(u.marker&&u.marker.opacity&&(j*=u.marker.opacity),_={gl:this.scene.glplot.gl,position:I.position,color:I.scatterColor,size:I.scatterSize,glyph:I.scatterMarker,opacity:j,orthographic:!0,lineWidth:I.scatterLineWidth,lineColor:I.scatterLineColor,project:I.project,projectScale:I.projectScale,projectOpacity:I.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(_):(this.scatterPlot=A(_),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:I.position,glyph:I.text,color:I.textColor,size:I.textSize,angle:I.textAngle,alignment:I.textOffset,font:I.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:u.opacity},this.textLabels=u.hovertext||u.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=A(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:I.position,color:I.errorColor,error:I.errorBounds,lineWidth:I.errorLineWidth,capSize:I.errorCapSize,opacity:u.opacity},this.errorBars?I.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):I.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),I.delaunayAxis>=0){var R=function(H,F,U){var B,N=(U+1)%3,J=(U+2)%3,Z=[],V=[];for(B=0;B<H.length;++B){var W=H[B];!isNaN(W[N])&&isFinite(W[N])&&!isNaN(W[J])&&isFinite(W[J])&&(Z.push([W[N],W[J]]),V.push(B))}var X=b(Z);for(B=0;B<X.length;++B)for(var K=X[B],ne=0;ne<K.length;++ne)K[ne]=V[K[ne]];return{positions:H,cells:X,meshColor:F}}(I.position,I.delaunayColor,I.delaunayAxis);R.opacity=u.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=C,this.delaunayMesh=T(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},Q.exports=function(u,S){var _=new h(u,S.uid);return _.update(S),_}},21428:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(34098),T=e(49508),b=e(11058),d=e(82410),s=e(44542);Q.exports=function(t,o,r,n){function a(y,p){return A.coerce(t,o,s,y,p)}var y,p,m,w,u,S,_,E;if(y=t,p=o,w=n,u=0,S=(m=a)("x"),_=m("y"),E=m("z"),k.getComponentMethod("calendars","handleTraceDefaults")(y,p,["x","y","z"],w),S&&_&&E&&(u=Math.min(S.length,_.length,E.length),p._length=p._xlength=p._ylength=p._zlength=u),u){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),l.hasLines(o)&&(a("connectgaps"),b(t,o,r,n,a)),l.hasMarkers(o)&&T(t,o,r,n,a,{noSelect:!0,noAngle:!0}),l.hasText(o)&&(a("texttemplate"),d(t,o,n,a,{noSelect:!0}));var c=(o.line||{}).color,h=(o.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||h);for(var f=["x","y","z"],x=0;x<3;++x){var v="projection."+f[x];a(v+".show")&&(a(v+".opacity"),a(v+".scale"))}var g=k.getComponentMethod("errorbars","supplyDefaults");g(t,o,c||h||r,{axis:"z"}),g(t,o,c||h||r,{axis:"y",inherit:"z"}),g(t,o,c||h||r,{axis:"x",inherit:"z"})}else o.visible=!1}},13551:function(Q,z,e){"use strict";Q.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(Q,z,e){"use strict";var k=e(82196),A=e(9012),l=e(5386).f,T=e(5386).s,b=e(50693),d=e(1426).extendFlat,s=k.marker,t=k.line,o=s.line;Q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},k.mode,{dflt:"markers"}),text:d({},k.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},k.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:d({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:d({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,marker:d({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:d({width:o.width,editType:"calc"},b("marker.line")),gradient:s.gradient,editType:"calc"},b("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:d({},A.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:l()}},34618:function(Q,z,e){"use strict";var k=e(92770),A=e(36922),l=e(75225),T=e(66279),b=e(47761).calcMarkerSize,d=e(22882);Q.exports=function(s,t){var o=t._carpetTrace=d(s,t);if(o&&o.visible&&"legendonly"!==o.visible){var r;t.xaxis=o.xaxis,t.yaxis=o.yaxis;var n,a,i=t._length,c=new Array(i),h=!1;for(r=0;r<i;r++)if(a=t.b[r],k(n=t.a[r])&&k(a)){var f=o.ab2xy(+n,+a,!0),x=o.isVisible(+n,+a);x||(h=!0),c[r]={x:f[0],y:f[1],a:n,b:a,vis:x}}else c[r]={x:!1,y:!1};return t._needsCull=h,c[0].carpet=o,c[0].trace=t,b(t,i),A(s,t),l(c,t),T(c,t),c}}},98965:function(Q,z,e){"use strict";var k=e(71828),A=e(47581),l=e(34098),T=e(49508),b=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(97001);Q.exports=function(r,n,a,i){function c(g,y){return k.coerce(r,n,o,g,y)}c("carpet"),n.xaxis="x",n.yaxis="y";var h=c("a"),f=c("b"),x=Math.min(h.length,f.length);if(x){n._length=x,c("text"),c("texttemplate"),c("hovertext"),c("mode",x<A.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,a,i,c,{backoff:!0}),d(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&s(r,n,i,c);var v=[];(l.hasMarkers(n)||l.hasText(n))&&(c("marker.maxdisplayed"),v.push("points")),c("fill"),"none"!==n.fill&&(t(r,n,a,c),l.hasLines(n)||d(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||v.push("fills"),"fills"!==c("hoveron",v.join("+")||"points")&&c("hovertemplate"),k.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},16165:function(Q){"use strict";Q.exports=function(z,e,k,A,l){var T=A[l];return z.a=T.a,z.b=T.b,z.y=T.y,z}},48953:function(Q){"use strict";Q.exports=function(z,e){var k={},A=e._carpet,l=A.ab2ij([z.a,z.b]),T=Math.floor(l[0]),b=l[0]-T,d=Math.floor(l[1]),t=A.evalxy([],T,d,b,l[1]-d);return k.yLabel=t[1].toFixed(3),k}},22931:function(Q,z,e){"use strict";var k=e(33720),A=e(71828).fillText;Q.exports=function(l,T,b,d){var s=k(l,T,b,d);if(s&&!1!==s[0].index){var t=s[0];if(void 0===t.index){var r=l.xa._length,n=r*(1-t.y0/l.ya._length)/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),s}var i=t.cd[t.index];t.a=i.a,t.b=i.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var c=t.trace,h=c._carpet,f=c._module.formatLabels(i,c);t.yLabel=f.yLabel,delete t.text;var x=[];if(!c.hovertemplate){var v=(i.hi||c.hoverinfo).split("+");-1!==v.indexOf("all")&&(v=["a","b","text"]),-1!==v.indexOf("a")&&g(h.aaxis,i.a),-1!==v.indexOf("b")&&g(h.baxis,i.b),x.push("y: "+t.yLabel),-1!==v.indexOf("text")&&A(i,c,x),t.extraText=x.join("<br>")}return s}function g(y,p){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,x.push(m+": "+p.toFixed(3)+y.labelsuffix)}}},46858:function(Q,z,e){"use strict";Q.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(Q,z,e){"use strict";var k=e(32663),A=e(89298),l=e(91424);Q.exports=function(T,b,d,s){var t,o,r,n=d[0][0].carpet,a=A.getFromId(T,n.xaxis||"x"),i=A.getFromId(T,n.yaxis||"y"),c={xaxis:a,yaxis:i,plot:b.plot};for(t=0;t<d.length;t++)(o=d[t][0].trace)._xA=a,o._yA=i;for(k(T,c,d,s),t=0;t<d.length;t++)r=s.selectAll("g.trace"+(o=d[t][0].trace).uid+" .js-line"),l.setClipUrl(r,d[t][0].carpet._clipPathId,T)}},19316:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(82196),T=e(9012),b=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=e(30962).overrideAll,o=l.marker,r=l.line,n=o.line;Q.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:A({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:d},connectgaps:l.connectgaps,marker:s({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:s({},o.angleref,{values:["previous","up","north"]}),standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,colorbar:o.colorbar,line:s({width:n.width},b("marker.line")),gradient:o.gradient},b("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:k()},"calc","nested")},84622:function(Q,z,e){"use strict";var k=e(92770),A=e(50606).BADNUM,l=e(36922),T=e(75225),b=e(66279),d=e(71828)._;function s(t){return t&&"string"==typeof t}Q.exports=function(t,o){var r,n=Array.isArray(o.locations),a=n?o.locations.length:o._length,i=new Array(a);r=o.geojson?function(g){return s(g)||k(g)}:s;for(var c=0;c<a;c++){var h=i[c]={};if(n){var f=o.locations[c];h.loc=r(f)?f:null}else{var x=o.lon[c],v=o.lat[c];h.lonlat=k(x)&&k(v)?[+x,+v]:[A,A]}}return T(i,o),l(t,o),b(i,o),a&&(i[0].t={labels:{lat:d(t,"lat:")+" ",lon:d(t,"lon:")+" "}}),i}},10659:function(Q,z,e){"use strict";var k=e(71828),A=e(34098),l=e(49508),T=e(11058),b=e(82410),d=e(28908),s=e(19316);Q.exports=function(t,o,r,n){function a(g,y){return k.coerce(t,o,s,g,y)}var i,c=a("locations");if(c&&c.length){var h,f=a("geojson");("string"==typeof f&&""!==f||k.isPlainObject(f))&&(h="geojson-id"),"geojson-id"===a("locationmode",h)&&a("featureidkey"),i=c.length}else{var x=a("lon")||[],v=a("lat")||[];i=Math.min(x.length,v.length)}i?(o._length=i,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),A.hasLines(o)&&(T(t,o,r,n,a),a("connectgaps")),A.hasMarkers(o)&&l(t,o,r,n,a,{gradient:!0}),A.hasText(o)&&(a("texttemplate"),b(t,o,n,a)),a("fill"),"none"!==o.fill&&d(t,o,r,a),k.coerceSelectionMarkerOpacity(o,a)):o.visible=!1}},84084:function(Q){"use strict";Q.exports=function(z,e,k,A,l){z.lon=e.lon,z.lat=e.lat,z.location=e.loc?e.loc:null;var T=A[l];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z}},82719:function(Q,z,e){"use strict";var k=e(89298);Q.exports=function(A,l,T){var b={},d=T[l.geo]._subplot.mockAxis,s=A.lonlat;return b.lonLabel=k.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=k.tickText(d,d.c2l(s[1]),!0).text,b}},14977:function(Q,z,e){"use strict";var k=e(30211),A=e(50606).BADNUM,l=e(34603),T=e(71828).fillText,b=e(19316);Q.exports=function(d,s,t){var o=d.cd,r=o[0].trace,n=d.xa,a=d.ya,i=d.subplot,c=i.projection.isLonLatOverEdges,h=i.project;if(k.getClosest(o,function(m){var w=m.lonlat;if(w[0]===A||c(w))return 1/0;var u=h(w),S=h([s,t]),_=Math.abs(u[0]-S[0]),E=Math.abs(u[1]-S[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(_*_+E*E)-L,1-3/L)},d),!1!==d.index){var f=o[d.index],x=f.lonlat,v=[n.c2p(x),a.c2p(x)],g=f.mrc||1;d.x0=v[0]-g,d.x1=v[0]+g,d.y0=v[1]-g,d.y1=v[1]+g,d.loc=f.loc,d.lon=x[0],d.lat=x[1];var y={};y[r.geo]={_subplot:i};var p=r._module.formatLabels(f,r,y);return d.lonLabel=p.lonLabel,d.latLabel=p.latLabel,d.color=l(r,f),d.extraText=function(m,w,u,S){if(!m.hovertemplate){var _=w.hi||m.hoverinfo,E="all"===_?b.hoverinfo.flags:_.split("+"),L=-1!==E.indexOf("location")&&Array.isArray(m.locations),C=-1!==E.indexOf("lon"),P=-1!==E.indexOf("lat"),I=-1!==E.indexOf("text"),j=[];return L?j.push(w.loc):C&&P?j.push("("+R(u.latLabel)+", "+R(u.lonLabel)+")"):C?j.push(S.lon+R(u.lonLabel)):P&&j.push(S.lat+R(u.latLabel)),I&&T(w,m,j),j.join("<br>")}function R(H){return H+"\xb0"}}(r,f,d,o[0].t.labels),d.hovertemplate=r.hovertemplate,[d]}}},17988:function(Q,z,e){"use strict";Q.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(90973).getTopojsonFeatures,T=e(18214),b=e(41327),d=e(71739).findExtremes,s=e(50606).BADNUM,t=e(47761).calcMarkerSize,o=e(34098),r=e(33095);Q.exports={calcGeoJSON:function(n,a){var i,c,h=n[0].trace,f=a[h.geo],x=f._subplot,v=h._length;if(Array.isArray(h.locations)){var g=h.locationmode,y="geojson-id"===g?b.extractTraceFeature(n):l(h,x.topojson);for(i=0;i<v;i++){c=n[i];var p="geojson-id"===g?c.fOut:b.locationToFeature(g,c.loc,y);c.lonlat=p?p.properties.ct:[s,s]}}var m,w,u={padded:!0};if("geojson"===f.fitbounds&&"geojson-id"===h.locationmode){var S=b.computeBbox(b.getTraceGeojson(h));m=[S[0],S[2]],w=[S[1],S[3]]}else{for(m=new Array(v),w=new Array(v),i=0;i<v;i++)m[i]=(c=n[i]).lonlat[0],w[i]=c.lonlat[1];u.ppad=t(h,v)}h._extremes.lon=d(f.lonaxis._ax,m,u),h._extremes.lat=d(f.lataxis._ax,w,u)},plot:function(n,a,i){var c=a.layers.frontplot.select(".scatterlayer"),h=A.makeTraceGroups(c,i,"trace scattergeo");function f(x,v){x.lonlat[0]===s&&k.select(v).remove()}h.selectAll("*").remove(),h.each(function(x){var v=k.select(this),g=x[0].trace;if(o.hasLines(g)||"none"!==g.fill){var y=T.calcTraceToLineCoords(x),p="none"!==g.fill?T.makePolygon(y):T.makeLine(y);v.selectAll("path.js-line").data([{geojson:p,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}o.hasMarkers(g)&&v.selectAll("path.point").data(A.identity).enter().append("path").classed("point",!0).each(function(m){f(m,this)}),o.hasText(g)&&v.selectAll("g").data(A.identity).enter().append("g").append("text").each(function(m){f(m,this)}),r(n,x)})}}},20548:function(Q,z,e){"use strict";var k=e(34098),A=e(50606).BADNUM;Q.exports=function(l,T){var b,d,s,t,o,r=l.cd,n=l.xaxis,a=l.yaxis,i=[],c=r[0].trace;if(!k.hasMarkers(c)&&!k.hasText(c))return[];if(!1===T)for(o=0;o<r.length;o++)r[o].selected=0;else for(o=0;o<r.length;o++)(d=(b=r[o]).lonlat)[0]!==A&&(s=n.c2p(d),t=a.c2p(d),T.contains([s,t],null,o,l)?(i.push({pointNumber:o,lon:d[0],lat:d[1]}),b.selected=1):b.selected=0);return i}},33095:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(7901),T=e(16296),b=T.stylePoints,d=T.styleText;Q.exports=function(s,t){var o,r,n,a;t&&(o=s,n=(r=t)[0].trace,(a=r[0].node3).style("opacity",r[0].trace.opacity),b(a,n,o),d(a,n,o),a.selectAll("path.js-line").style("fill","none").each(function(i){var c=k.select(this),h=i.trace,f=h.line||{};c.call(l.stroke,f.color).call(A.dashLine,f.dash||"",f.width||0),"none"!==h.fill&&c.call(l.fill,h.fillcolor)}))}},42341:function(Q,z,e){"use strict";var k=e(9012),A=e(82196),l=e(12663).axisHoverFormat,T=e(50693),b=e(78607),d=e(1426).extendFlat,s=e(30962).overrideAll,t=e(78232).DASHES,o=A.line,r=A.marker,n=r.line,a=Q.exports=s({x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:A.text,hovertext:A.hovertext,textposition:A.textposition,textfont:A.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:o.color,width:o.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:b(t),dflt:"solid"}},marker:d({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:d({},T("marker.line"),{width:n.width})}),connectgaps:A.connectgaps,fill:d({},A.fill,{dflt:"none"}),fillcolor:A.fillcolor,selected:{marker:A.selected.marker,textfont:A.selected.textfont},unselected:{marker:A.unselected.marker,textfont:A.unselected.textfont},opacity:k.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=A.hovertemplate,a.texttemplate=A.texttemplate},72156:function(Q,z,e){"use strict";var k=e(20794);Q.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:k.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function(Q,z,e){"use strict";var k=e(88294),A=e(71828),l=e(41675),T=e(71739).findExtremes,b=e(42973),d=e(47761),s=d.calcMarkerSize,t=d.calcAxisExpansion,o=d.setFirstScatter,r=e(36922),n=e(19635),a=e(38967),i=e(50606).BADNUM,c=e(78232).TOO_MANY_POINTS;function h(f,x,v){var g=f._extremes[x._id],y=T(x,v._bnds,{padded:!0});g.min=g.min.concat(y.min),g.max=g.max.concat(y.max)}Q.exports=function(f,x){var v,g=f._fullLayout,y=x._xA=l.getFromId(f,x.xaxis,"x"),p=x._yA=l.getFromId(f,x.yaxis,"y"),m=g._plots[x.xaxis+x.yaxis],w=x._length,u=w>=c,S=2*w,_={},E=y.makeCalcdata(x,"x"),L=p.makeCalcdata(x,"y"),C=b(x,y,"x",E),P=b(x,p,"y",L),I=C.vals,j=P.vals;x._x=I,x._y=j,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=L,x._yStarts=P.starts,x._yEnds=P.ends);var R=new Array(S),H=new Array(w);for(v=0;v<w;v++)R[2*v]=I[v]===i?NaN:I[v],R[2*v+1]=j[v]===i?NaN:j[v],H[v]=v;if("log"===y.type)for(v=0;v<S;v+=2)R[v]=y.c2l(R[v]);if("log"===p.type)for(v=1;v<S;v+=2)R[v]=p.c2l(R[v]);u&&"log"!==y.type&&"log"!==p.type?_.tree=k(R):_.ids=H,r(f,x);var F,U=function(N,J,Z,V,W,X){var K=n.style(N,Z);if(K.marker&&(K.marker.positions=V),K.line&&V.length>1&&A.extendFlat(K.line,n.linePositions(N,Z,V)),K.errorX||K.errorY){var ne=n.errorBarPositions(N,Z,V,W,X);K.errorX&&A.extendFlat(K.errorX,ne.x),K.errorY&&A.extendFlat(K.errorY,ne.y)}return K.text&&(A.extendFlat(K.text,{positions:V},n.textPosition(N,Z,K.text,K.marker)),A.extendFlat(K.textSel,{positions:V},n.textPosition(N,Z,K.text,K.markerSel)),A.extendFlat(K.textUnsel,{positions:V},n.textPosition(N,Z,K.text,K.markerUnsel))),K}(f,0,x,R,I,j),B=a(f,m);return o(g,x),u?U.marker&&(F=U.marker.sizeAvg||Math.max(U.marker.size,3)):F=s(x,w),t(f,x,y,p,I,j,F),U.errorX&&h(x,y,U.errorX),U.errorY&&h(x,p,U.errorY),U.fill&&!B.fill2d&&(B.fill2d=!0),U.marker&&!B.scatter2d&&(B.scatter2d=!0),U.line&&!B.line2d&&(B.line2d=!0),!U.errorX&&!U.errorY||B.error2d||(B.error2d=!0),U.text&&!B.glText&&(B.glText=!0),U.marker&&(U.marker.snap=w),B.lineOptions.push(U.line),B.errorXOptions.push(U.errorX),B.errorYOptions.push(U.errorY),B.fillOptions.push(U.fill),B.markerOptions.push(U.marker),B.markerSelectedOptions.push(U.markerSel),B.markerUnselectedOptions.push(U.markerUnsel),B.textOptions.push(U.text),B.textSelectedOptions.push(U.textSel),B.textUnselectedOptions.push(U.textUnsel),B.selectBatch.push([]),B.unselectBatch.push([]),_._scene=B,_.index=B.count,_.x=I,_.y=j,_.positions=R,B.count++,[{x:!1,y:!1,t:_,trace:x}]}},78232:function(Q){"use strict";Q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(Q,z,e){"use strict";var k=e(92770),A=e(82019),l=e(25075),T=e(73972),b=e(71828),d=e(91424),s=e(41675),t=e(81697).formatColor,o=e(34098),r=e(39984),n=e(68645),a=e(78232),i=e(37822).DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=e(23469).appendArrayPointValue;function f(E,L){var C,P=E._fullLayout,I=L._length,j=L.textfont,R=L.textposition,H=Array.isArray(R)?R:[R],F=j.color,U=j.size,B=j.family,N={},J=E._context.plotGlPixelRatio,Z=L.texttemplate;if(Z){N.text=[];var V=P._d3locale,W=Array.isArray(Z),X=W?Math.min(Z.length,I):I,K=W?function(ye){return Z[ye]}:function(){return Z};for(C=0;C<X;C++){var ne={i:C},re=L._module.formatLabels(ne,L,P),ae={};h(ae,L,C);var le=L._meta||{};N.text.push(b.texttemplateString(K(C),re,V,ae,ne,le))}}else N.text=Array.isArray(L.text)&&L.text.length<I?L.text.slice():L.text;if(Array.isArray(N.text))for(C=N.text.length;C<I;C++)N.text[C]="";for(N.opacity=L.opacity,N.font={},N.align=[],N.baseline=[],C=0;C<H.length;C++){var pe=H[C].split(/\s+/);switch(pe[1]){case"left":N.align.push("right");break;case"right":N.align.push("left");break;default:N.align.push(pe[1])}switch(pe[0]){case"top":N.baseline.push("bottom");break;case"bottom":N.baseline.push("top");break;default:N.baseline.push(pe[0])}}if(Array.isArray(F))for(N.color=new Array(I),C=0;C<I;C++)N.color[C]=F[C];else N.color=F;if(b.isArrayOrTypedArray(U)||Array.isArray(B))for(N.font=new Array(I),C=0;C<I;C++){var xe=N.font[C]={};xe.size=(b.isTypedArray(U)?U[C]:Array.isArray(U)?k(U[C])?U[C]:0:U)*J,xe.family=Array.isArray(B)?B[C]:B}else N.font={size:U*J,family:B};return N}function x(E,L){var C,P,I=L._length,j=L.marker,R={},H=b.isArrayOrTypedArray(j.symbol),F=b.isArrayOrTypedArray(j.angle),U=b.isArrayOrTypedArray(j.color),B=b.isArrayOrTypedArray(j.line.color),N=b.isArrayOrTypedArray(j.opacity),J=b.isArrayOrTypedArray(j.size),Z=b.isArrayOrTypedArray(j.line.width);if(H||(P=n.isOpenSymbol(j.symbol)),H||U||B||N||F){R.symbols=new Array(I),R.angles=new Array(I),R.colors=new Array(I),R.borderColors=new Array(I);var V=j.symbol,W=j.angle,X=t(j,j.opacity,I),K=t(j.line,j.opacity,I);if(!Array.isArray(K[0])){var ne=K;for(K=Array(I),C=0;C<I;C++)K[C]=ne}if(!Array.isArray(X[0])){var re=X;for(X=Array(I),C=0;C<I;C++)X[C]=re}if(!Array.isArray(V)){var ae=V;for(V=Array(I),C=0;C<I;C++)V[C]=ae}if(!Array.isArray(W)){var le=W;for(W=Array(I),C=0;C<I;C++)W[C]=le}for(R.symbols=V,R.angles=W,R.colors=X,R.borderColors=K,C=0;C<I;C++)H&&(P=n.isOpenSymbol(j.symbol[C])),P&&(K[C]=X[C].slice(),X[C]=X[C].slice(),X[C][3]=0);for(R.opacity=L.opacity,R.markers=new Array(I),C=0;C<I;C++)R.markers[C]=_({mx:R.symbols[C],ma:R.angles[C]},L)}else P?(R.color=l(j.color,"uint8"),R.color[3]=0,R.borderColor=l(j.color,"uint8")):(R.color=l(j.color,"uint8"),R.borderColor=l(j.line.color,"uint8")),R.opacity=L.opacity*j.opacity,R.marker=_({mx:j.symbol,ma:j.angle},L);var pe,xe=r(L,1);if(J||Z){var ye,se=R.sizes=new Array(I),fe=R.borderSizes=new Array(I),Ee=0;if(J){for(C=0;C<I;C++)se[C]=xe(j.size[C]),Ee+=se[C];ye=Ee/I}else for(pe=xe(j.size),C=0;C<I;C++)se[C]=pe;if(Z)for(C=0;C<I;C++)fe[C]=j.line.width[C];else for(pe=j.line.width,C=0;C<I;C++)fe[C]=pe;R.sizeAvg=ye}else R.size=xe(j&&j.size||10),R.borderSizes=xe(j.line.width);return R}function v(E,L,C){var I={};return C&&(C.marker&&C.marker.symbol?I=x(0,b.extendFlat({},L.marker,C.marker)):C.marker&&(C.marker.size&&(I.size=C.marker.size),C.marker.color&&(I.colors=C.marker.color),void 0!==C.marker.opacity&&(I.opacity=C.marker.opacity))),I}function g(E,L,C){var P={};if(!C)return P;if(C.textfont){var I={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:b.extendFlat({},L.textfont)};C.textfont&&b.extendFlat(I.textfont,C.textfont),P=f(E,I)}return P}function y(E,L,C){var P={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(P=E.error_y),P}var p=a.SYMBOL_SDF_SIZE,m=a.SYMBOL_SIZE,w=a.SYMBOL_STROKE,u={},S=d.symbolFuncs[0](.05*m);function _(E,L){var C,P,I=E.mx;if("circle"===I)return null;var j=d.symbolNumber(I),R=d.symbolFuncs[j%100],H=!!d.symbolNoDot[j%100],F=!!d.symbolNoFill[j%100],U=n.isDotSymbol(I);if(E.ma&&(I+="_"+E.ma),u[I])return u[I];var B=d.getMarkerAngle(E,L);return C=U&&!H?R(1.1*m,B)+S:R(m,B),P=A(C,{w:p,h:p,viewBox:[-m,-m,m,m],stroke:F?w:-w}),u[I]=P,P||null}Q.exports={style:function(E,L){var C,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=E._context.plotGlPixelRatio;if(!0!==L.visible)return P;if(o.hasText(L)&&(P.text=f(E,L),P.textSel=g(E,L,L.selected),P.textUnsel=g(E,L,L.unselected)),o.hasMarkers(L)&&(P.marker=x(0,L),P.markerSel=v(0,L,L.selected),P.markerUnsel=v(0,L,L.unselected),!L.unselected&&b.isArrayOrTypedArray(L.marker.opacity))){var j=L.marker.opacity;for(P.markerUnsel.opacity=new Array(j.length),C=0;C<j.length;C++)P.markerUnsel.opacity[C]=i*j[C]}if(o.hasLines(L)){P.line={overlay:!0,thickness:L.line.width*I,color:L.line.color,opacity:L.opacity};var R=(a.DASHES[L.line.dash]||[1]).slice();for(C=0;C<R.length;++C)R[C]*=L.line.width*I;P.line.dashes=R}return L.error_x&&L.error_x.visible&&(P.errorX=y(L,L.error_x,I)),L.error_y&&L.error_y.visible&&(P.errorY=y(L,L.error_y,I)),L.fill&&"none"!==L.fill&&(P.fill={closed:!0,fill:L.fillcolor,thickness:0}),P},markerStyle:x,markerSelection:v,linePositions:function(E,L,C){var P,I,j=C.length,R=j/2;if(o.hasLines(L)&&R)if("hv"===L.line.shape){for(P=[],I=0;I<R-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?P.push(NaN,NaN):P.push(C[2*I+2],C[2*I+1]));P.push(C[j-2],C[j-1])}else if("hvh"===L.line.shape){for(P=[],I=0;I<R-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+1]),P.push(NaN,NaN);else{var H=(C[2*I]+C[2*I+2])/2;P.push(C[2*I],C[2*I+1],H,C[2*I+1],H,C[2*I+3])}P.push(C[j-2],C[j-1])}else if("vhv"===L.line.shape){for(P=[],I=0;I<R-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+1]),P.push(NaN,NaN);else{var F=(C[2*I+1]+C[2*I+3])/2;P.push(C[2*I],C[2*I+1],C[2*I],F,C[2*I+2],F)}P.push(C[j-2],C[j-1])}else if("vh"===L.line.shape){for(P=[],I=0;I<R-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+3]));P.push(C[j-2],C[j-1])}else P=C;var U=!1;for(I=0;I<P.length;I++)if(isNaN(P[I])){U=!0;break}var B=U||P.length>a.TOO_MANY_POINTS||o.hasMarkers(L)?"rect":"round";if(U&&L.connectgaps){var N=P[0],J=P[1];for(I=0;I<P.length;I+=2)isNaN(P[I])||isNaN(P[I+1])?(P[I]=N,P[I+1]=J):(N=P[I],J=P[I+1])}return{join:B,positions:P}},errorBarPositions:function(E,L,C,P,I){var j=T.getComponentMethod("errorbars","makeComputeError"),R=s.getFromId(E,L.xaxis,"x"),H=s.getFromId(E,L.yaxis,"y"),F=C.length/2,U={};function B(N,J){var Z=J._id.charAt(0),V=L["error_"+Z];if(V&&V.visible&&("linear"===J.type||"log"===J.type)){for(var W=j(V),X={x:0,y:1}[Z],K={x:[0,1,2,3],y:[2,3,0,1]}[Z],ne=new Float64Array(4*F),re=1/0,ae=-1/0,le=0,pe=0;le<F;le++,pe+=4){var xe=N[le];if(k(xe)){var ye=C[2*le+X],se=W(xe,le),fe=se[0],Ee=se[1];if(k(fe)&&k(Ee)){var we=xe+Ee;ne[pe+K[0]]=ye-J.c2l(xe-fe),ne[pe+K[1]]=J.c2l(we)-ye,ne[pe+K[2]]=0,ne[pe+K[3]]=0,re=Math.min(re,xe-fe),ae=Math.max(ae,xe+Ee)}}}U[Z]={positions:C,errors:ne,_bnds:[re,ae]}}}return B(P,R),B(I,H),U},textPosition:function(E,L,C,P){var I,j=L._length,R={};if(o.hasMarkers(L)){var H=C.font,F=C.align,U=C.baseline;for(R.offset=new Array(j),I=0;I<j;I++){var B=P.sizes?P.sizes[I]:P.size,N=Array.isArray(H)?H[I].size:H.size,J=Array.isArray(F)?F.length>1?F[I]:F[0]:F,Z=Array.isArray(U)?U.length>1?U[I]:U[0]:U,W=c[Z],X=B?B/.8+1:0;R.offset[I]=[c[J]*X/N,(-W*X-.5*W)/N]}}return R}}},47148:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=e(68645),T=e(42341),b=e(47581),d=e(34098),s=e(67513),t=e(73927),o=e(49508),r=e(11058),n=e(28908),a=e(82410);Q.exports=function(i,c,h,f){function x(S,_){return k.coerce(i,c,T,S,_)}var v=!!i.marker&&l.isOpenSymbol(i.marker.symbol),g=d.isBubble(i),y=s(i,c,f,x);if(y){t(i,c,f,x),x("xhoverformat"),x("yhoverformat");var p=y<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",p),d.hasLines(c)&&(x("connectgaps"),r(i,c,h,f,x),x("line.shape")),d.hasMarkers(c)&&(o(i,c,h,f,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",v||g?1:0)),d.hasText(c)&&(x("texttemplate"),a(i,c,f,x));var m=(c.line||{}).color,w=(c.marker||{}).color;x("fill"),"none"!==c.fill&&n(i,c,h,x);var u=A.getComponentMethod("errorbars","supplyDefaults");u(i,c,m||w||h,{axis:"y"}),u(i,c,m||w||h,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(c,x)}else c.visible=!1}},5345:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(37822).DESELECTDIM;Q.exports={styleTextSelection:function(T){var b,d,s=T[0],t=s.trace,o=s.t,r=o._scene,n=o.index,a=r.selectBatch[n],i=r.unselectBatch[n],c=r.textOptions[n],h=r.textSelectedOptions[n]||{},f=r.textUnselectedOptions[n]||{},x=k.extendFlat({},c);if(a.length||i.length){var v=h.color,g=f.color,y=c.color,p=Array.isArray(y);for(x.color=new Array(t._length),b=0;b<a.length;b++)x.color[d=a[b]]=v||(p?y[d]:y);for(b=0;b<i.length;b++){d=i[b];var m=p?y[d]:y;x.color[d]=g||(v?m:A.addOpacity(m,l))}}r.glText[n].update(x)}}},68101:function(Q,z,e){"use strict";var k=e(8225);Q.exports=function(A,l,T){var b=A.i;return"x"in A||(A.x=l._x[b]),"y"in A||(A.y=l._y[b]),k(A,l,T)}},68645:function(Q,z,e){"use strict";var k=e(78232);z.isOpenSymbol=function(A){return"string"==typeof A?k.OPEN_RE.test(A):A%200>100},z.isDotSymbol=function(A){return"string"==typeof A?k.DOT_RE.test(A):A>200}},20794:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(34603);function T(b,d,s,t){var o=b.xa,r=b.ya,n=b.distance,a=b.dxy,i=b.index,c={pointNumber:i,x:d[i],y:s[i]};c.tx=Array.isArray(t.text)?t.text[i]:t.text,c.htx=Array.isArray(t.hovertext)?t.hovertext[i]:t.hovertext,c.data=Array.isArray(t.customdata)?t.customdata[i]:t.customdata,c.tp=Array.isArray(t.textposition)?t.textposition[i]:t.textposition;var h=t.textfont;h&&(c.ts=A.isArrayOrTypedArray(h.size)?h.size[i]:h.size,c.tc=Array.isArray(h.color)?h.color[i]:h.color,c.tf=Array.isArray(h.family)?h.family[i]:h.family);var f=t.marker;f&&(c.ms=A.isArrayOrTypedArray(f.size)?f.size[i]:f.size,c.mo=A.isArrayOrTypedArray(f.opacity)?f.opacity[i]:f.opacity,c.mx=A.isArrayOrTypedArray(f.symbol)?f.symbol[i]:f.symbol,c.ma=A.isArrayOrTypedArray(f.angle)?f.angle[i]:f.angle,c.mc=A.isArrayOrTypedArray(f.color)?f.color[i]:f.color);var x=f&&f.line;x&&(c.mlc=Array.isArray(x.color)?x.color[i]:x.color,c.mlw=A.isArrayOrTypedArray(x.width)?x.width[i]:x.width);var v=f&&f.gradient;v&&"none"!==v.type&&(c.mgt=Array.isArray(v.type)?v.type[i]:v.type,c.mgc=Array.isArray(v.color)?v.color[i]:v.color);var g=o.c2p(c.x,!0),y=r.c2p(c.y,!0),p=c.mrc||1,m=t.hoverlabel;m&&(c.hbg=Array.isArray(m.bgcolor)?m.bgcolor[i]:m.bgcolor,c.hbc=Array.isArray(m.bordercolor)?m.bordercolor[i]:m.bordercolor,c.hts=A.isArrayOrTypedArray(m.font.size)?m.font.size[i]:m.font.size,c.htc=Array.isArray(m.font.color)?m.font.color[i]:m.font.color,c.htf=Array.isArray(m.font.family)?m.font.family[i]:m.font.family,c.hnl=A.isArrayOrTypedArray(m.namelength)?m.namelength[i]:m.namelength);var w=t.hoverinfo;w&&(c.hi=Array.isArray(w)?w[i]:w);var u=t.hovertemplate;u&&(c.ht=Array.isArray(u)?u[i]:u);var S={};S[b.index]=c;var _=t._origX,E=t._origY,L=A.extendFlat({},b,{color:l(t,c),x0:g-p,x1:g+p,xLabelVal:_?_[i]:c.x,y0:y-p,y1:y+p,yLabelVal:E?E[i]:c.y,cd:S,distance:n,spikeDistance:a,hovertemplate:c.ht});return c.htx?L.text=c.htx:c.tx?L.text=c.tx:t.text&&(L.text=t.text),A.fillText(c,t,L),k.getComponentMethod("errorbars","hoverInfo")(c,t,L),L}Q.exports={hoverPoints:function(b,d,s,t){var o,r,n,a,i,c,h,f,x,v,g=b.cd,y=g[0].t,p=g[0].trace,m=b.xa,w=b.ya,u=y.x,S=y.y,_=m.c2p(d),E=w.c2p(s),L=b.distance;if(y.tree){var C=m.p2c(_-L),P=m.p2c(_+L),I=w.p2c(E-L),j=w.p2c(E+L);o="x"===t?y.tree.range(Math.min(C,P),Math.min(w._rl[0],w._rl[1]),Math.max(C,P),Math.max(w._rl[0],w._rl[1])):y.tree.range(Math.min(C,P),Math.min(I,j),Math.max(C,P),Math.max(I,j))}else o=y.ids;var R=L;if("x"===t){var H=!!p.xperiodalignment,F=!!p.yperiodalignment;for(c=0;c<o.length;c++){if(a=u[r=o[c]],h=Math.abs(m.c2p(a)-_),H){var U=m.c2p(p._xStarts[r]),B=m.c2p(p._xEnds[r]);h=_>=Math.min(U,B)&&_<=Math.max(U,B)?0:1/0}if(h<R){if(R=h,f=w.c2p(i=S[r])-E,F){var N=w.c2p(p._yStarts[r]),J=w.c2p(p._yEnds[r]);f=E>=Math.min(N,J)&&E<=Math.max(N,J)?0:1/0}v=Math.sqrt(h*h+f*f),n=o[c]}}}else for(c=o.length-1;c>-1;c--)a=u[r=o[c]],i=S[r],h=m.c2p(a)-_,f=w.c2p(i)-E,(x=Math.sqrt(h*h+f*f))<R&&(R=v=x,n=r);return b.index=n,b.distance=R,b.dxy=v,void 0===n?[b]:[T(b,u,S,p)]},calcHover:T}},68868:function(Q,z,e){"use strict";var k=e(72156);k.plot=e(26787),Q.exports=k},26787:function(Q,z,e){"use strict";var k=e(11870),A=e(46075),l=e(3593),T=e(42505),b=e(71828),d=e(64505).selectMode,s=e(79749),t=e(34098),o=e(68687),r=e(5345).styleTextSelection,n={};function a(i,c,h,f){var x=i._size,u=x.w*f,S=x.h*f;return[x.l*f+c.domain[0]*u,x.b*f+h.domain[0]*S,i.width*f-x.r*f-(1-c.domain[1])*u,i.height*f-x.t*f-(1-h.domain[1])*S]}(Q.exports=function(i,c,h){if(h.length){var f,x,v=i._fullLayout,g=c._scene,y=c.xaxis,p=c.yaxis;if(g)if(s(i,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=g.count,w=v._glcanvas.data()[0].regl;if(o(i,c,h),g.dirty){if(!0===g.error2d&&(g.error2d=l(w)),!0===g.line2d&&(g.line2d=A(w)),!0===g.scatter2d&&(g.scatter2d=k(w)),!0===g.fill2d&&(g.fill2d=A(w)),!0===g.glText)for(g.glText=new Array(m),f=0;f<m;f++)g.glText[f]=new T(w);if(g.glText){if(m>g.glText.length){var u=m-g.glText.length;for(f=0;f<u;f++)g.glText.push(new T(w))}else m<g.glText.length&&g.glText.splice(m,g.glText.length-m).forEach(function(ne){ne.destroy()});for(f=0;f<m;f++)g.glText[f].update(g.textOptions[f])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ne){if(ne&&ne.positions){for(var re=ne.positions,ae=0;ae<re.length&&(isNaN(re[ae])||isNaN(re[ae+1]));)ae+=2;for(var le=re.length-2;le>ae&&(isNaN(re[le])||isNaN(re[le+1]));)le-=2;ne.positions=re.slice(ae,le+2)}return ne}),g.line2d.update(g.lineOptions)),g.error2d){var _=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(_)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=b.repeat(null,m),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ne,re){var ae=h[re];if(ne&&ae&&ae[0]&&ae[0].trace){var le,pe,xe=ae[0],ye=xe.trace,se=xe.t,fe=g.lineOptions[re],Ee=[];ye._ownfill&&Ee.push(re),ye._nexttrace&&Ee.push(re+1),Ee.length&&(g.fillOrder[re]=Ee);var de,we,ke=[],Te=fe&&fe.positions||se.positions;if("tozeroy"===ye.fill){for(de=0;de<Te.length&&isNaN(Te[de+1]);)de+=2;for(we=Te.length-2;we>de&&isNaN(Te[we+1]);)we-=2;0!==Te[de+1]&&(ke=[Te[de],0]),ke=ke.concat(Te.slice(de,we+2)),0!==Te[we+1]&&(ke=ke.concat([Te[we],0]))}else if("tozerox"===ye.fill){for(de=0;de<Te.length&&isNaN(Te[de]);)de+=2;for(we=Te.length-2;we>de&&isNaN(Te[we]);)we-=2;0!==Te[de]&&(ke=[0,Te[de+1]]),ke=ke.concat(Te.slice(de,we+2)),0!==Te[we]&&(ke=ke.concat([0,Te[we+1]]))}else if("toself"===ye.fill||"tonext"===ye.fill){for(ke=[],le=0,ne.splitNull=!0,pe=0;pe<Te.length;pe+=2)(isNaN(Te[pe])||isNaN(Te[pe+1]))&&((ke=ke.concat(Te.slice(le,pe))).push(Te[le],Te[le+1]),ke.push(null,null),le=pe+2);ke=ke.concat(Te.slice(le)),le&&ke.push(Te[le],Te[le+1])}else{var $=ye._nexttrace;if($){var oe=g.lineOptions[re+1];if(oe){var he=oe.positions;if("tonexty"===ye.fill){for(ke=Te.slice(),re=Math.floor(he.length/2);re--;){var me=he[2*re],Me=he[2*re+1];isNaN(me)||isNaN(Me)||ke.push(me,Me)}ne.fill=$.fillcolor}}}}if(ye._prevtrace&&"tonext"===ye._prevtrace.fill){var Ie=g.lineOptions[re-1].positions,Pe=ke.length/2,ze=[le=Pe];for(pe=0;pe<Ie.length;pe+=2)(isNaN(Ie[pe])||isNaN(Ie[pe+1]))&&(ze.push(pe/2+Pe+1),le=pe+2);ke=ke.concat(Ie),ne.hole=ze}return ne.fillmode=ye.fill,ne.opacity=ye.opacity,ne.positions=ke,ne}}),g.fill2d.update(g.fillOptions))}var L=d(v.dragmode),C=v.clickmode.indexOf("select")>-1;for(f=0;f<m;f++){var P=h[f][0],I=P.trace,j=P.t,R=j.index,H=I._length,F=j.x,U=j.y;if(I.selectedpoints||L||C){if(L||(L=!0),I.selectedpoints){var B=g.selectBatch[R]=b.selIndices2selPoints(I),N={};for(x=0;x<B.length;x++)N[B[x]]=1;var J=[];for(x=0;x<H;x++)N[x]||J.push(x);g.unselectBatch[R]=J}var Z=j.xpx=new Array(H),V=j.ypx=new Array(H);for(x=0;x<H;x++)Z[x]=y.c2p(F[x]),V[x]=p.c2p(U[x])}else j.xpx=j.ypx=null}if(L){if(g.select2d||(g.select2d=k(v._glcanvas.data()[1].regl)),g.scatter2d){var W=new Array(m);for(f=0;f<m;f++)W[f]=g.selectBatch[f].length||g.unselectBatch[f].length?g.markerUnselectedOptions[f]:{};g.scatter2d.update(W)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&h.forEach(function(ne){t.hasText(((ne||[])[0]||{}).trace||{})&&r(ne)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var X={viewport:a(v,y,p,i._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(p._rl||p.range)[0],(y._rl||y.range)[1],(p._rl||p.range)[1]]},K=b.repeat(X,g.count);g.fill2d&&g.fill2d.update(K),g.line2d&&g.line2d.update(K),g.error2d&&g.error2d.update(K.concat(K)),g.scatter2d&&g.scatter2d.update(K),g.select2d&&g.select2d.update(K),g.glText&&g.glText.forEach(function(ne){ne.update(X)})}else g.init()}}).reglPrecompiled=n},38967:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){var T=l._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){k.extendFlat(T,d,b)},T.init(),T.update=function(s){var t=k.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var o=0;o<T.count;o++)T.glText[o].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,o=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,i=T.select2d,c=T.selectBatch,h=T.unselectBatch,f=0;f<s;f++){if(t&&T.fillOrder[f]&&t.draw(T.fillOrder[f]),r&&T.lineOptions[f]&&r.draw(f),o&&(T.errorXOptions[f]&&o.draw(f),T.errorYOptions[f]&&o.draw(f+s)),n&&T.markerOptions[f])if(h[f].length){var x=k.repeat([],T.count);x[f]=h[f],n.draw(x)}else c[f].length||n.draw(f);a[f]&&T.textOptions[f]&&a[f].render()}i&&i.draw(c),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||k.extendFlat(T,b),T}},58147:function(Q,z,e){"use strict";var k=e(34098),A=e(5345).styleTextSelection;Q.exports=function(l,T){var b=l.cd,d=l.xaxis,s=l.yaxis,t=[],o=b[0].trace,r=b[0].t,n=o._length,a=r.x,i=r.y,c=r._scene,h=r.index;if(!c)return t;var f=k.hasText(o),x=k.hasMarkers(o);if(!0!==o.visible||!x&&!f)return t;var g=[],y=[];if(!1!==T&&!T.degenerate)for(var p=0;p<n;p++)T.contains([r.xpx[p],r.ypx[p]],!1,p,l)?(g.push(p),t.push({pointNumber:p,x:d.c2d(a[p]),y:s.c2d(i[p])})):y.push(p);if(x){var m=c.scatter2d;if(g.length||y.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var w=new Array(c.count);w[h]=c.markerUnselectedOptions[h],m.update.apply(m,w)}}else{var u=new Array(c.count);u[h]=c.markerOptions[h],m.update.apply(m,u)}}return c.selectBatch[h]=g,c.unselectBatch[h]=y,f&&A(b),t}},99181:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(19316),T=e(82196),b=e(23585),d=e(9012),s=e(50693),t=e(1426).extendFlat,o=e(30962).overrideAll,r=e(23585),n=l.line,a=l.marker;Q.exports=o({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},a.opacity,{dflt:1})},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:A({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:b.layers.symbol.textfont,textposition:b.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:t({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:k()},"calc","nested")},15790:function(Q,z,e){"use strict";var k=e(92770),A=e(71828),l=e(50606).BADNUM,T=e(18214),b=e(21081),d=e(91424),s=e(39984),t=e(34098),o=e(13056),r=e(23469).appendArrayPointValue,n=e(63893).NEWLINES,a=e(63893).BR_TAG_ALL;function i(v){return{type:v,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function c(v,g){return A.isArrayOrTypedArray(v)?g?function(y){return k(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:h}function h(){return""}function f(v){return v[0]===l}function x(v,g){var y;if(A.isArrayOrTypedArray(v)&&A.isArrayOrTypedArray(g)){y=["step",["get","point_count"],v[0]];for(var p=1;p<v.length;p++)y.push(g[p-1],v[p])}else y=v;return y}Q.exports=function(v,g){var y,p=g[0].trace,m=!0===p.visible&&0!==p._length,w="none"!==p.fill,u=t.hasLines(p),S=t.hasMarkers(p),_=t.hasText(p),E=S&&"circle"===p.marker.symbol,L=S&&"circle"!==p.marker.symbol,C=p.cluster&&p.cluster.enabled,P=i("fill"),I=i("line"),j=i("circle"),R=i("symbol"),H={fill:P,line:I,circle:j,symbol:R};if(!m)return H;if((w||u)&&(y=T.calcTraceToLineCoords(g)),w&&(P.geojson=T.makePolygon(y),P.layout.visibility="visible",A.extendFlat(P.paint,{"fill-color":p.fillcolor})),u&&(I.geojson=T.makeLine(y),I.layout.visibility="visible",A.extendFlat(I.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),E){var F=function(N){var J,Z,V,W,X=N[0].trace,K=X.marker,ne=X.selectedpoints,re=A.isArrayOrTypedArray(K.color),ae=A.isArrayOrTypedArray(K.size),le=A.isArrayOrTypedArray(K.opacity);function pe(ke){return X.opacity*ke}re&&(Z=b.hasColorscale(X,"marker")?b.makeColorScaleFuncFromTrace(K):A.identity),ae&&(V=s(X)),le&&(W=function(ke){return pe(k(ke)?+A.constrain(ke,0,1):0)});var xe,ye,se=[];for(J=0;J<N.length;J++){var fe=N[J],Ee=fe.lonlat;if(!f(Ee)){var de={};Z&&(de.mcc=fe.mcc=Z(fe.mc)),V&&(de.mrc=fe.mrc=V(fe.ms)),W&&(de.mo=W(fe.mo)),ne&&(de.selected=fe.selected||0),se.push({type:"Feature",id:J+1,geometry:{type:"Point",coordinates:Ee},properties:de})}}if(ne)for(xe=d.makeSelectedPointStyleFns(X),J=0;J<se.length;J++){var we=se[J].properties;xe.selectedOpacityFn&&(we.mo=pe(xe.selectedOpacityFn(we))),xe.selectedColorFn&&(we.mcc=xe.selectedColorFn(we)),xe.selectedSizeFn&&(we.mrc=xe.selectedSizeFn(we))}return{geojson:{type:"FeatureCollection",features:se},mcc:re||xe&&xe.selectedColorFn?{type:"identity",property:"mcc"}:K.color,mrc:ae||xe&&xe.selectedSizeFn?{type:"identity",property:"mrc"}:(ye=K.size,ye/2),mo:le||xe&&xe.selectedOpacityFn?{type:"identity",property:"mo"}:pe(K.opacity)}}(g);j.geojson=F.geojson,j.layout.visibility="visible",C&&(j.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(p.cluster.color,p.cluster.step),"circle-radius":x(p.cluster.size,p.cluster.step),"circle-opacity":x(p.cluster.opacity,p.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),A.extendFlat(j.paint,{"circle-color":F.mcc,"circle-radius":F.mrc,"circle-opacity":F.mo})}if(E&&C&&(j.filter=["!",["has","point_count"]]),(L||_)&&(R.geojson=function(N,J){for(var Z=J._fullLayout,V=N[0].trace,W=V.marker||{},X=W.symbol,K=W.angle,ne="circle"!==X?c(X):h,re="auto"!==K?c(K,!0):h,ae=t.hasText(V)?c(V.text):h,le=[],pe=0;pe<N.length;pe++){var xe=N[pe];if(!f(xe.lonlat)){var ye,se=V.texttemplate;if(se){var fe=Array.isArray(se)?se[pe]||"":se,Ee=V._module.formatLabels(xe,V,Z),de={};r(de,V,xe.i),ye=A.texttemplateString(fe,Ee,Z._d3locale,de,xe,V._meta||{})}else ye=ae(pe);ye&&(ye=ye.replace(n,"").replace(a,"\n")),le.push({type:"Feature",geometry:{type:"Point",coordinates:xe.lonlat},properties:{symbol:ne(pe),angle:re(pe),text:ye}})}}return{type:"FeatureCollection",features:le}}(g,v),A.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(A.extendFlat(R.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&"auto"!==p.marker.angle&&A.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=p.marker.allowoverlap,A.extendFlat(R.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),_)){var B=o(p.textposition,(p.marker||{}).size);A.extendFlat(R.layout,{"text-size":p.textfont.size,"text-anchor":B.anchor,"text-offset":B.offset}),A.extendFlat(R.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return H}},76645:function(Q,z,e){"use strict";var k=e(71828),A=e(34098),l=e(49508),T=e(11058),b=e(82410),d=e(28908),s=e(99181);Q.exports=function(t,o,r,n){function a(p,m){return k.coerce(t,o,s,p,m)}function i(p,m){return k.coerce2(t,o,s,p,m)}var m,w,u,S,_;if(m=o,u=(w=a)("lon")||[],S=w("lat")||[],_=Math.min(u.length,S.length),m._length=_,_){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),A.hasLines(o)&&(T(t,o,r,n,a,{noDash:!0}),a("connectgaps")),A.hasMarkers(o)){l(t,o,r,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var h=o.marker;"circle"!==h.symbol&&(k.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),k.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}var f=i("cluster.maxzoom"),x=i("cluster.step"),v=i("cluster.color",o.marker&&o.marker.color||r),g=i("cluster.size"),y=i("cluster.opacity");a("cluster.enabled",!1!==f||!1!==x||!1!==v||!1!==g||!1!==y),A.hasText(o)&&b(t,o,n,a,{noSelect:!0}),a("fill"),"none"!==o.fill&&d(t,o,r,a),k.coerceSelectionMarkerOpacity(o,a)}else o.visible=!1}},53353:function(Q){"use strict";Q.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z}},15636:function(Q,z,e){"use strict";var k=e(89298);Q.exports=function(A,l,T){var b={},d=T[l.subplot]._subplot.mockAxis,s=A.lonlat;return b.lonLabel=k.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=k.tickText(d,d.c2l(s[1]),!0).text,b}},28178:function(Q,z,e){"use strict";var k=e(30211),A=e(71828),l=e(34603),T=A.fillText,b=e(50606).BADNUM,d=e(77734).traceLayerPrefix;function s(t,o,r){if(!t.hovertemplate){var n=(o.hi||t.hoverinfo).split("+"),a=-1!==n.indexOf("all"),i=-1!==n.indexOf("lon"),c=-1!==n.indexOf("lat"),h=o.lonlat,f=[];return a||i&&c?f.push("("+x(h[1])+", "+x(h[0])+")"):i?f.push(r.lon+x(h[0])):c&&f.push(r.lat+x(h[1])),(a||-1!==n.indexOf("text"))&&T(o,t,f),f.join("<br>")}function x(v){return v+"\xb0"}}Q.exports={hoverPoints:function(t,o,r){var n=t.cd,a=n[0].trace,i=t.xa,c=t.ya,h=t.subplot,f=[],v=a.cluster&&a.cluster.enabled;if(v){var g=h.map.queryRenderedFeatures(null,{layers:[d+a.uid+"-circle"]});f=g.map(function(P){return P.id})}var y=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),p=o-y;if(k.getClosest(n,function(P){var I=P.lonlat;if(I[0]===b||v&&-1===f.indexOf(P.i+1))return 1/0;var j=A.modHalf(I[0],360),R=I[1],H=h.project([j,R]),F=H.x-i.c2p([p,R]),U=H.y-c.c2p([j,r]),B=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(F*F+U*U)-B,1-3/B)},t),!1!==t.index){var m=n[t.index],w=m.lonlat,u=[A.modHalf(w[0],360)+y,w[1]],S=i.c2p(u),_=c.c2p(u),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=_-E,t.y1=_+E;var L={};L[a.subplot]={_subplot:h};var C=a._module.formatLabels(m,a,L);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=l(a,m),t.extraText=s(a,m,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},20467:function(Q,z,e){"use strict";Q.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(k,A){A&&A[0].trace._glTrace.update(A)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(Q,z,e){"use strict";var k=e(71828),A=e(15790),l=e(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,o,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=o,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:l+t+"-fill",line:l+t+"-line",circle:l+t+"-circle",symbol:l+t+"-symbol",cluster:l+t+"-cluster",clusterCount:l+t+"-cluster-count"},this.below=null}var d=b.prototype;d.addSource=function(s,t,o){var r={type:"geojson",data:t.geojson};o&&o.enabled&&k.extendFlat(r,{cluster:!0,clusterMaxZoom:o.maxzoom}),this.subplot.map.addSource(this.sourceIds[s],r)},d.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},d.addLayer=function(s,t,o){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter),this.subplot.addLayer(r,o)},d.update=function(s){var t=s[0].trace,o=this.subplot,r=o.map,n=A(o.gd,s),a=o.belowLookup["trace-"+this.uid],i=!(!t.cluster||!t.cluster.enabled),c=!!this.clusterEnabled,h=this;function f(p){c?function(m){for(var w=T.cluster,u=w.length-1;u>=0;u--)r.removeLayer(h.layerIds[w[u]]);m||r.removeSource(h.sourceIds.circle)}(p):function(m){for(var w=T.nonCluster,u=w.length-1;u>=0;u--){var S=w[u];r.removeLayer(h.layerIds[S]),m||r.removeSource(h.sourceIds[S])}}(p)}function x(p){i?function(m){m||h.addSource("circle",n.circle,t.cluster);for(var w=T.cluster,u=0;u<w.length;u++){var S=w[u];h.addLayer(S,n[S],a)}}(p):function(m){for(var w=T.nonCluster,u=0;u<w.length;u++){var S=w[u],_=n[S];m||h.addSource(S,_),h.addLayer(S,_,a)}}(p)}var g=this.isHidden,y=!0!==t.visible;y?g||f():g?y||x():c!==i?(f(),x()):(this.below!==a&&(f(!0),x(!0)),function v(){for(var p=i?T.cluster:T.nonCluster,m=0;m<p.length;m++){var w=p[m],u=n[w];u&&(o.setOptions(h.layerIds[w],"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&("cluster"!==w&&h.setSourceData(w,u),o.setOptions(h.layerIds[w],"setPaintProperty",u.paint)))}}()),this.clusterEnabled=i,this.isHidden=y,this.below=a,s[0].trace._glTrace=this},d.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,o=t.length-1;o>=0;o--){var r=t[o];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},Q.exports=function(s,t){var o,r,n,a=t[0].trace,i=a.cluster&&a.cluster.enabled,h=new b(s,a.uid,i,!0!==a.visible),f=A(s.gd,t),x=h.below=s.belowLookup["trace-"+a.uid];if(i)for(h.addSource("circle",f.circle,a.cluster),o=0;o<T.cluster.length;o++)n=f[r=T.cluster[o]],h.addLayer(r,n,x);else for(o=0;o<T.nonCluster.length;o++)n=f[r=T.nonCluster[o]],h.addSource(r,n,a.cluster),h.addLayer(r,n,x);return t[0].trace._glTrace=h,h}},86387:function(Q,z,e){"use strict";var k=e(71828),A=e(34098),l=e(50606).BADNUM;Q.exports=function(T,b){var d,s=T.cd,t=T.xaxis,o=T.yaxis,r=[];if(!A.hasMarkers(s[0].trace))return[];if(!1===b)for(d=0;d<s.length;d++)s[d].selected=0;else for(d=0;d<s.length;d++){var a=s[d],i=a.lonlat;if(i[0]!==l){var c=[k.modHalf(i[0],360),i[1]],h=[t.c2p(c),o.c2p(c)];b.contains(h,null,d,T)?(r.push({pointNumber:d,lon:i[0],lat:i[1]}),a.selected=1):a.selected=0}}return r}},81245:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(1426).extendFlat,T=e(82196),b=e(9012),d=T.line;Q.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:A({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:k(),selected:T.selected,unselected:T.unselected}},26442:function(Q,z,e){"use strict";var k=e(92770),A=e(50606).BADNUM,l=e(89298),T=e(36922),b=e(75225),d=e(66279),s=e(47761).calcMarkerSize;Q.exports=function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,c=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,x=new Array(f),v=0;v<f;v++){var g=c[v],y=h[v],p=x[v]={};k(g)&&k(y)?(p.r=g,p.theta=y):p.r=A}var m=s(o,f);return o._extremes.x=l.findExtremes(a,c,{ppad:m}),T(t,o),b(x,o),d(x,o),x}},22184:function(Q,z,e){"use strict";var k=e(71828),A=e(34098),l=e(49508),T=e(11058),b=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(81245);function r(n,a,i,c){var h,f=c("r"),x=c("theta");if(f)x?h=Math.min(f.length,x.length):(h=f.length,c("theta0"),c("dtheta"));else{if(!x)return 0;h=a.theta.length,c("r0"),c("dr")}return a._length=h,h}Q.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,i,c){function h(v,g){return k.coerce(n,a,o,v,g)}var f=r(0,a,0,h);if(f){h("thetaunit"),h("mode",f<t?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==a.hoveron&&h("hovertemplate"),A.hasLines(a)&&(T(n,a,i,c,h,{backoff:!0}),b(n,a,h),h("connectgaps")),A.hasMarkers(a)&&l(n,a,i,c,h,{gradient:!0}),A.hasText(a)&&(h("texttemplate"),d(n,a,c,h));var x=[];(A.hasMarkers(a)||A.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),x.push("points")),h("fill"),"none"!==a.fill&&(s(n,a,i,h),A.hasLines(a)||b(n,a,h)),"tonext"!==a.fill&&"toself"!==a.fill||x.push("fills"),h("hoveron",x.join("+")||"points"),k.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},98608:function(Q,z,e){"use strict";var k=e(71828),A=e(89298);Q.exports=function(l,T,b){var d,s,t={},o=b[T.subplot]._subplot;o?(d=o.radialAxis,s=o.angularAxis):(d=(o=b[T.subplot]).radialaxis,s=o.angularaxis);var r=d.c2l(l.r);t.rLabel=A.tickText(d,r,!0).text;var n="degrees"===s.thetaunit?k.rad2deg(l.theta):l.theta;return t.thetaLabel=A.tickText(s,n,!0).text,t}},59150:function(Q,z,e){"use strict";var k=e(33720);function A(l,T,b,d){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="\u03b8";var o={};o[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,o);d.rLabel=r.rLabel,d.thetaLabel=r.thetaLabel;var a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=(l.hi||T.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&i(s,d.rLabel),-1!==c.indexOf("theta")&&i(t,d.thetaLabel),-1!==c.indexOf("text")&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}Q.exports={hoverPoints:function(l,T,b,d){var s=k(l,T,b,d);if(s&&!1!==s[0].index){var t=s[0];if(void 0===t.index)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,A(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:A}},91271:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function(Q,z,e){"use strict";var k=e(32663),A=e(50606).BADNUM;Q.exports=function(l,T,b){for(var d=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,o={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<b.length;a++)for(var i=b[a],c=0;c<i.length;c++){0===c&&(i[0].trace._xA=s,i[0].trace._yA=t);var h=i[c],f=h.r;if(f===A)h.x=h.y=A;else{var x=r.c2g(f),v=n.c2g(h.theta);h.x=x*Math.cos(v),h.y=x*Math.sin(v)}}k(l,o,b,d)}},53286:function(Q,z,e){"use strict";var k=e(81245),A=e(42341),l=e(5386).s;Q.exports={mode:k.mode,r:k.r,theta:k.theta,r0:k.r0,dr:k.dr,theta0:k.theta0,dtheta:k.dtheta,thetaunit:k.thetaunit,text:k.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:k.hovertext,hovertemplate:k.hovertemplate,line:A.line,connectgaps:A.connectgaps,marker:A.marker,fill:A.fill,fillcolor:A.fillcolor,textposition:A.textposition,textfont:A.textfont,hoverinfo:k.hoverinfo,selected:k.selected,unselected:k.unselected}},65746:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function(Q,z,e){"use strict";var k=e(36922),A=e(47761).calcMarkerSize,l=e(19635),T=e(89298),b=e(78232).TOO_MANY_POINTS;Q.exports=function(d,s){var t=d._fullLayout,o=s.subplot,r=t[o].radialaxis,n=t[o].angularaxis,a=s._r=r.makeCalcdata(s,"r"),i=s._theta=n.makeCalcdata(s,"theta"),c=s._length,h={};c<a.length&&(a=a.slice(0,c)),c<i.length&&(i=i.slice(0,c)),h.r=a,h.theta=i,k(d,s);var f,x=h.opts=l.style(d,s);return c<b?f=A(s,c):x.marker&&(f=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:f}),[{x:!1,y:!1,t:h,trace:s}]}},75485:function(Q,z,e){"use strict";var k=e(71828),A=e(34098),l=e(22184).handleRThetaDefaults,T=e(49508),b=e(11058),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(53286);Q.exports=function(r,n,a,i){function c(f,x){return k.coerce(r,n,o,f,x)}var h=l(r,n,i,c);h?(c("thetaunit"),c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),A.hasLines(n)&&(b(r,n,a,i,c),c("connectgaps")),A.hasMarkers(n)&&T(r,n,a,i,c,{noAngleRef:!0,noStandOff:!0}),A.hasText(n)&&(c("texttemplate"),d(r,n,i,c)),c("fill"),"none"!==n.fill&&s(r,n,a,c),k.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},46255:function(Q,z,e){"use strict";var k=e(98608);Q.exports=function(A,l,T){var b=A.i;return"r"in A||(A.r=l._r[b]),"theta"in A||(A.theta=l._theta[b]),k(A,l,T)}},29347:function(Q,z,e){"use strict";var k=e(20794),A=e(59150).makeHoverPointText;Q.exports={hoverPoints:function(l,T,b,d){var s=l.cd[0].t,t=s.r,o=s.theta,r=k.hoverPoints(l,T,b,d);if(r&&!1!==r[0].index){var n=r[0];if(void 0===n.index)return r;var a=l.subplot,i=n.cd[n.index],c=n.trace;if(i.r=t[n.index],i.theta=o[n.index],a.isPtInside(i))return n.xLabelVal=void 0,n.yLabelVal=void 0,A(i,c,a,n),r}}}},21461:function(Q,z,e){"use strict";var k=e(65746);k.plot=e(49741),Q.exports=k},49741:function(Q,z,e){"use strict";var k=e(88294),A=e(92770),l=e(26787),T=e(38967),b=e(19635),d=e(71828),s=e(78232).TOO_MANY_POINTS;Q.exports=function(t,o,r){if(r.length){var n=o.radialAxis,a=o.angularAxis,i=T(t,o);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,f=c[0],x=f.trace,v=f.t,g=x._length,y=v.r,p=v.theta,m=v.opts,w=y.slice(),u=p.slice();for(h=0;h<y.length;h++)o.isPtInside({r:y[h],theta:p[h]})||(w[h]=NaN,u[h]=NaN);var S=new Array(2*g),_=Array(g),E=Array(g);for(h=0;h<g;h++){var L,C,P=w[h];if(A(P)){var I=n.c2g(P),j=a.c2g(u[h],x.thetaunit);L=I*Math.cos(j),C=I*Math.sin(j)}else L=C=NaN;_[h]=S[2*h]=L,E[h]=S[2*h+1]=C}v.tree=k(S),m.marker&&g>=s&&(m.marker.cluster=v.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&d.extendFlat(m.line,b.linePositions(t,x,S)),m.text&&(d.extendFlat(m.text,{positions:S},b.textPosition(t,x,m.text,m.marker)),d.extendFlat(m.textSel,{positions:S},b.textPosition(t,x,m.text,m.markerSel)),d.extendFlat(m.textUnsel,{positions:S},b.textPosition(t,x,m.text,m.markerUnsel))),m.fill&&!i.fill2d&&(i.fill2d=!0),m.marker&&!i.scatter2d&&(i.scatter2d=!0),m.line&&!i.line2d&&(i.line2d=!0),m.text&&!i.glText&&(i.glText=!0),i.lineOptions.push(m.line),i.fillOptions.push(m.fill),i.markerOptions.push(m.marker),i.markerSelectedOptions.push(m.markerSel),i.markerUnselectedOptions.push(m.markerUnsel),i.textOptions.push(m.text),i.textSelectedOptions.push(m.textSel),i.textUnselectedOptions.push(m.textUnsel),i.selectBatch.push([]),i.unselectBatch.push([]),v.x=_,v.y=E,v.rawx=_,v.rawy=E,v.r=y,v.theta=p,v.positions=S,v._scene=i,v.index=i.count,i.count++}}),l(t,o,r)}},Q.exports.reglPrecompiled={}},48300:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(1426).extendFlat,T=e(82196),b=e(9012),d=T.line;Q.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:A({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:k(),selected:T.selected,unselected:T.unselected}},30621:function(Q,z,e){"use strict";var k=e(92770),A=e(50606).BADNUM,l=e(36922),T=e(75225),b=e(66279),d=e(47761).calcMarkerSize;Q.exports=function(s,t){for(var o=s._fullLayout,r=t.subplot,a=o[r].imaginaryaxis,i=o[r].realaxis.makeCalcdata(t,"real"),c=a.makeCalcdata(t,"imag"),h=t._length,f=new Array(h),x=0;x<h;x++){var v=i[x],g=c[x],y=f[x]={};k(v)&&k(g)?(y.real=v,y.imag=g):y.real=A}return d(t,h),l(s,t),T(f,t),b(f,t),f}},65269:function(Q,z,e){"use strict";var k=e(71828),A=e(34098),l=e(49508),T=e(11058),b=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(48300);Q.exports=function(r,n,a,i){function c(x,v){return k.coerce(r,n,o,x,v)}var v,y,p,m,w,h=(v=n,m=(y=c)("real"),w=y("imag"),m&&w&&(p=Math.min(m.length,w.length)),v._length=p,p);if(h){c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),A.hasLines(n)&&(T(r,n,a,i,c,{backoff:!0}),b(r,n,c),c("connectgaps")),A.hasMarkers(n)&&l(r,n,a,i,c,{gradient:!0}),A.hasText(n)&&(c("texttemplate"),d(r,n,i,c));var f=[];(A.hasMarkers(n)||A.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),f.push("points")),c("fill"),"none"!==n.fill&&(s(r,n,a,c),A.hasLines(n)||b(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||f.push("fills"),c("hoveron",f.join("+")||"points"),k.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},62047:function(Q,z,e){"use strict";var k=e(89298);Q.exports=function(A,l,T){var b={},d=T[l.subplot]._subplot;return b.realLabel=k.tickText(d.radialAxis,A.real,!0).text,b.imagLabel=k.tickText(d.angularAxis,A.imag,!0).text,b}},11350:function(Q,z,e){"use strict";var k=e(33720);function A(l,T,b,d){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var o={};o[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,o);d.realLabel=r.realLabel,d.imagLabel=r.imagLabel;var a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=(l.hi||T.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&i(s,d.realLabel),-1!==c.indexOf("imag")&&i(t,d.imagLabel),-1!==c.indexOf("text")&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}Q.exports={hoverPoints:function(l,T,b,d){var s=k(l,T,b,d);if(s&&!1!==s[0].index){var t=s[0];if(void 0===t.index)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,A(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:A}},85956:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function(Q,z,e){"use strict";var k=e(32663),A=e(50606).BADNUM,l=e(23893).smith;Q.exports=function(T,b,d){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,o=b.yaxis,r={xaxis:t,yaxis:o,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},n=0;n<d.length;n++)for(var a=d[n],i=0;i<a.length;i++){0===i&&(a[0].trace._xA=t,a[0].trace._yA=o);var c=a[i],h=c.real;if(h===A)c.x=c.y=A;else{var f=l([h,c.imag]);c.x=f[0],c.y=f[1]}}k(T,r,d,s)}},50413:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(82196),T=e(9012),b=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=l.marker,o=l.line,r=t.line;Q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:A({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:o.color,width:o.width,dash:d,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},b("marker.line")),gradient:t.gradient,editType:"calc"},b("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:k()}},54337:function(Q,z,e){"use strict";var k=e(92770),A=e(36922),l=e(75225),T=e(66279),b=e(47761).calcMarkerSize,d=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};Q.exports=function(t,o){var r,n,a,i,c,h,f=t._fullLayout[o.subplot].sum,x=o.sum||f,v={a:o.a,b:o.b,c:o.c};for(r=0;r<d.length;r++)if(!v[a=d[r]]){for(c=v[s[a][0]],h=v[s[a][1]],i=new Array(c.length),n=0;n<c.length;n++)i[n]=x-c[n]-h[n];v[a]=i}var g,y,p,m,S=o._length,_=new Array(S);for(r=0;r<S;r++)y=v.b[r],p=v.c[r],k(g=v.a[r])&&k(y)&&k(p)?(1!=(m=f/((g=+g)+(y=+y)+(p=+p)))&&(g*=m,y*=m,p*=m),_[r]={x:p-y,y:g,a:g,b:y,c:p}):_[r]={x:!1,y:!1};return b(o,S),A(t,o),l(_,o),T(_,o),_}},46008:function(Q,z,e){"use strict";var k=e(71828),A=e(47581),l=e(34098),T=e(49508),b=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(50413);Q.exports=function(r,n,a,i){function c(y,p){return k.coerce(r,n,o,y,p)}var h,f=c("a"),x=c("b"),v=c("c");if(f?(h=f.length,x?(h=Math.min(h,x.length),v&&(h=Math.min(h,v.length))):h=v?Math.min(h,v.length):0):x&&v&&(h=Math.min(x.length,v.length)),h){n._length=h,c("sum"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),c("mode",h<A.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,a,i,c,{backoff:!0}),d(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&(c("texttemplate"),s(r,n,i,c));var g=[];(l.hasMarkers(n)||l.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),g.push("points")),c("fill"),"none"!==n.fill&&(t(r,n,a,c),l.hasLines(n)||d(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||g.push("fills"),c("hoveron",g.join("+")||"points"),k.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},4524:function(Q){"use strict";Q.exports=function(z,e,k,A,l){if(e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),A[l]){var T=A[l];z.a=T.a,z.b=T.b,z.c=T.c}else z.a=e.a,z.b=e.b,z.c=e.c;return z}},93645:function(Q,z,e){"use strict";var k=e(89298);Q.exports=function(A,l,T){var b={},d=T[l.subplot]._subplot;return b.aLabel=k.tickText(d.aaxis,A.a,!0).text,b.bLabel=k.tickText(d.baxis,A.b,!0).text,b.cLabel=k.tickText(d.caxis,A.c,!0).text,b}},47250:function(Q,z,e){"use strict";var k=e(33720);Q.exports=function(A,l,T,b){var d=k(A,l,T,b);if(d&&!1!==d[0].index){var s=d[0];if(void 0===s.index){var o=A.xa._length,r=o*(1-s.y0/A.ya._length)/2,n=o-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),d}var a=s.cd[s.index],i=s.trace,c=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[i.subplot]={_subplot:c};var f=i._module.formatLabels(a,i,h);s.aLabel=f.aLabel,s.bLabel=f.bLabel,s.cLabel=f.cLabel;var v=[];if(!i.hovertemplate){var g=(a.hi||i.hoverinfo).split("+");-1!==g.indexOf("all")&&(g=["a","b","c"]),-1!==g.indexOf("a")&&y(c.aaxis,s.aLabel),-1!==g.indexOf("b")&&y(c.baxis,s.bLabel),-1!==g.indexOf("c")&&y(c.caxis,s.cLabel)}return s.extraText=v.join("<br>"),s.hovertemplate=i.hovertemplate,d}function y(p,m){v.push(p._hovertitle+": "+m)}}},52979:function(Q,z,e){"use strict";Q.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(Q,z,e){"use strict";var k=e(32663);Q.exports=function(A,l,T){var b=l.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var d=l.xaxis,s=l.yaxis,t={xaxis:d,yaxis:s,plot:b,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},o=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=d,n[0].trace._yA=s)}k(A,t,T,o)}},46880:function(Q,z,e){"use strict";var k=e(82196),A=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,b=e(42341),d=e(85555).idRegex,s=e(44467).templatedArray,t=e(1426).extendFlat,o=k.marker,r=o.line,n=t(A("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(A("marker"),{symbol:o.symbol,angle:o.angle,size:t({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:n,editType:"calc"});function i(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d[c],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",Q.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:a,xaxes:i("x"),yaxes:i("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},65017:function(Q,z,e){"use strict";var k=e(73972),A=e(83312);Q.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},k.register(A)},16947:function(Q,z,e){"use strict";var k=e(46075),A=e(73972),l=e(79749),T=e(27659).a0,b=e(93612),d=e(41675).getFromId,s=e(89298).shouldShowZeroLine,t="splom",o={};function r(a,i,c){for(var f=i._visibleDims,x=c.viewOpts.ranges=new Array(c.matrixOptions.data.length),v=0;v<f.length;v++){var g=f[v],y=x[v]=new Array(4),p=d(a,i._diag[g][0]);p&&(y[0]=p.r2l(p.range[0]),y[2]=p.r2l(p.range[1]));var m=d(a,i._diag[g][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:x},{ranges:x}):c.matrix.update({ranges:x})}function n(a){var i=a._fullLayout,c=i._glcanvas.data()[0].regl,h=i._splomGrid;h||(h=i._splomGrid=k(c)),h.update(function(f){var x,v=f._context.plotGlPixelRatio,g=f._fullLayout,y=g._size,p=[0,0,g.width*v,g.height*v],m={};function w(N,J,Z,V,W,X){Z*=v,V*=v,W*=v,X*=v;var K=J[N+"color"],ne=J[N+"width"],re=String(K+ne);re in m?m[re].data.push(NaN,NaN,Z,V,W,X):m[re]={data:[Z,V,W,X],join:"rect",thickness:ne*v,color:K,viewport:p,range:p,overlay:!1}}for(x in g._splomSubplots){var u,S,_=g._plots[x],E=_.xaxis,L=_.yaxis,C=E._gridVals,P=L._gridVals,I=E._offset,j=E._length,R=L._length,H=y.b+L.domain[0]*y.h,F=-L._m,U=-F*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(x=0;x<C.length;x++)u=I+E.l2p(C[x].x),w("grid",E,u,H,u,H+R);if(L.showgrid)for(x=0;x<P.length;x++)w("grid",L,I,S=H+U+F*P[x].x,I+j,S);s(f,E,L)&&(u=I+E.l2p(0),w("zeroline",E,u,H,u,H+R)),s(f,L,E)&&w("zeroline",L,I,S=H+U+0,I+j,S)}var B=[];for(x in m)B.push(m[x]);return B}(a))}Q.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var i=a._fullLayout,c=A.getModule(t),h=T(a.calcdata,c)[0];l(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&n(a),c.plot(a,{},h))},drag:function(a){var i=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&n(a);for(var h=0;h<i.length;h++){var f=i[h][0].trace,x=c._splomScenes[f.uid];"splom"===f.type&&x&&x.matrix&&r(a,f,x)}},updateGrid:n,clean:function(a,i,c,h){var f,x={};if(h._splomScenes){for(f=0;f<a.length;f++){var v=a[f];"splom"===v.type&&(x[v.uid]=1)}for(f=0;f<c.length;f++){var g=c[f];if(!x[g.uid]){var y=h._splomScenes[g.uid];y&&y.destroy&&y.destroy(),h._splomScenes[g.uid]=null,delete h._splomScenes[g.uid]}}}0===Object.keys(h._splomScenes||{}).length&&delete h._splomScenes,h._splomGrid&&!i._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),b.clean(a,i,c,h)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:o}},87625:function(Q,z,e){"use strict";var k=e(71828),A=e(41675),l=e(47761).calcMarkerSize,T=e(47761).calcAxisExpansion,b=e(36922),d=e(19635).markerSelection,s=e(19635).markerStyle,t=e(10164),o=e(50606).BADNUM,r=e(78232).TOO_MANY_POINTS;Q.exports=function(n,a){var i,c,h,f,x,v,g=a.dimensions,y=a._length,p={},m=p.cdata=[],w=p.data=[],u=a._visibleDims=[];function S(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:a.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===o?NaN:C[P];m.push(C),w.push("log"===E.type?k.simpleMap(C,E.c2l):C)}for(i=0;i<g.length;i++)if((h=g[i]).visible){if(f=A.getFromId(n,a._diag[i][0]),x=A.getFromId(n,a._diag[i][1]),f&&x&&f.type!==x.type){k.log("Skipping splom dimension "+i+" with conflicting axis types");continue}f?(S(f,h),x&&"category"===x.type&&(x._categories=f._categories.slice())):S(x,h),u.push(i)}for(b(n,a),k.extendFlat(p,s(n,a)),v=m.length*y>r?p.sizeAvg||Math.max(p.size,3):l(a,y),c=0;c<u.length;c++)h=g[i=u[c]],f=A.getFromId(n,a._diag[i][0])||{},x=A.getFromId(n,a._diag[i][1])||{},T(n,a,f,x,m[c],m[c],v);var _=t(n,a);return _.matrix||(_.matrix=!0),_.matrixOptions=p,_.selectedOptions=d(n,a,a.selected),_.unselectedOptions=d(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function(Q,z,e){"use strict";var k=e(71828),A=e(85501),l=e(46880),T=e(34098),b=e(49508),d=e(94397),s=e(68645).isOpenSymbol;function t(o,r){function n(i,c){return k.coerce(o,r,l.dimensions,i,c)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}Q.exports=function(o,r,n,a){function i(y,p){return k.coerce(o,r,l,y,p)}var c=A(o,r,{name:"dimensions",handleItemDefaults:t}),h=i("diagonal.visible"),f=i("showupperhalf"),x=i("showlowerhalf");if(d(r,c,"values")&&(h||f||x)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),b(o,r,n,a,i,{noAngleRef:!0,noStandOff:!0});var v=s(r.marker.symbol),g=T.isBubble(r);i("marker.line.width",v||g?1:0),function(y,p,m,w){var u,S,_=p.dimensions,E=_.length,L=p.showupperhalf,C=p.showlowerhalf,P=p.diagonal.visible,I=new Array(E),j=new Array(E);for(u=0;u<E;u++){var R=u?u+1:"";I[u]="x"+R,j[u]="y"+R}var H=w("xaxes",I),F=w("yaxes",j),U=p._diag=new Array(E);p._xaxes={},p._yaxes={};var B=[],N=[];function J(le,pe,xe,ye){if(le){var se=le.charAt(0),fe=m._splomAxes[se];if(p["_"+se+"axes"][le]=1,ye.push(le),!(le in fe)){var Ee=fe[le]={};xe&&(Ee.label=xe.label||"",xe.visible&&xe.axis&&(xe.axis.type&&(Ee.type=xe.axis.type),xe.axis.matches&&(Ee.matches=pe)))}}}var Z=!P&&!C,V=!P&&!L;for(p._axesDim={},u=0;u<E;u++){var W=_[u],X=0===u,K=u===E-1,ne=X&&Z||K&&V?void 0:H[u],re=X&&V||K&&Z?void 0:F[u];J(ne,re,W,B),J(re,ne,W,N),U[u]=[ne,re],p._axesDim[ne]=u,p._axesDim[re]=u}for(u=0;u<B.length;u++)for(S=0;S<N.length;S++){var ae=B[u]+N[S];u>S&&L||u<S&&C?m._splomSubplots[ae]=1:u!==S||!P&&C&&L||(m._splomSubplots[ae]=1)}(!C||!P&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,i),k.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1}},28801:function(Q,z,e){"use strict";var k=e(71828),A=e(36922),l=e(19635).markerStyle;Q.exports=function(T,b){var d=b.trace,s=T._fullLayout._splomScenes[d.uid];if(s){A(T,d),k.extendFlat(s.matrixOptions,l(T,d));var t=k.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},35948:function(Q,z){"use strict";z.getDimIndex=function(e,k){for(var A=k._id,l={x:0,y:1}[A.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++)if(e._diag[T[b]][l]===A)return b;return!1}},8567:function(Q,z,e){"use strict";var k=e(35948),A=e(20794).calcHover;Q.exports={hoverPoints:function(l,T,b){var d=l.cd[0].trace,s=l.scene.matrixOptions.cdata,t=l.xa,o=l.ya,r=t.c2p(T),n=o.c2p(b),a=l.distance,i=k.getDimIndex(d,t),c=k.getDimIndex(d,o);if(!1===i||!1===c)return[l];for(var h,f,x=s[i],v=s[c],g=a,y=0;y<x.length;y++){var m=v[y],w=t.c2p(x[y])-r,u=o.c2p(m)-n,S=Math.sqrt(w*w+u*u);S<g&&(g=f=S,h=y)}return l.index=h,l.distance=g,l.dxy=f,void 0===h?[l]:[A(l,x,v,d)]}}},6419:function(Q,z,e){"use strict";var k=e(65017);k.basePlotModule=e(16947),Q.exports=k},79410:function(Q,z,e){"use strict";var k=e(60487),A=e(71828),l=e(41675),T=e(64505).selectMode;function b(d,s){var t,o,r,n,a,i=d._fullLayout,c=i._size,h=s.trace,f=s.t,x=i._splomScenes[h.uid],v=x.matrixOptions,g=v.cdata,y=i._glcanvas.data()[0].regl,p=i.dragmode;if(0!==g.length){v.lower=h.showupperhalf,v.upper=h.showlowerhalf,v.diagonal=h.diagonal.visible;var m=h._visibleDims,w=g.length,u=x.viewOpts={};for(u.ranges=new Array(w),u.domains=new Array(w),a=0;a<m.length;a++){r=m[a];var S=u.ranges[a]=new Array(4),_=u.domains[a]=new Array(4);(t=l.getFromId(d,h._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],_[0]=t.domain[0],_[2]=t.domain[1]),(o=l.getFromId(d,h._diag[r][1]))&&(S[1]=o._rl[0],S[3]=o._rl[1],_[1]=o.domain[0],_[3]=o.domain[1])}var E=d._context.plotGlPixelRatio,L=c.l*E,C=c.b*E;u.viewport=[L,C,c.w*E+L,c.h*E+C],!0===x.matrix&&(x.matrix=k(y));var j=i.clickmode.indexOf("select")>-1,R=!0;if(T(p)||h.selectedpoints||j){var H=h._length;if(h.selectedpoints){x.selectBatch=h.selectedpoints;var F=h.selectedpoints,U={};for(r=0;r<F.length;r++)U[F[r]]=!0;var B=[];for(r=0;r<H;r++)U[r]||B.push(r);x.unselectBatch=B}var N=f.xpx=new Array(w),J=f.ypx=new Array(w);for(a=0;a<m.length;a++){if(t=l.getFromId(d,h._diag[r=m[a]][0]))for(N[a]=new Array(H),n=0;n<H;n++)N[a][n]=t.c2p(g[a][n]);if(o=l.getFromId(d,h._diag[r][1]))for(J[a]=new Array(H),n=0;n<H;n++)J[a][n]=o.c2p(g[a][n])}if(x.selectBatch.length||x.unselectBatch.length){var Z=A.extendFlat({},v,x.unselectedOptions,u),V=A.extendFlat({},v,x.selectedOptions,u);x.matrix.update(Z,V),R=!1}}else f.xpx=f.ypx=null;if(R){var W=A.extendFlat({},v,u);x.matrix.update(W,null)}}}Q.exports=function(d,s,t){if(t.length)for(var o=0;o<t.length;o++)b(d,t[o][0])}},10164:function(Q,z,e){"use strict";var k=e(71828);Q.exports=function(A,l){var T=A._fullLayout,b=l.uid,d=T._splomScenes;d||(d=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=d[l.uid];return t||((t=d[b]=k.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||k.extendFlat(t,s),t}},8689:function(Q,z,e){"use strict";var k=e(71828),A=k.pushUnique,l=e(34098),T=e(35948);Q.exports=function(b,d){var s=b.cd,t=s[0].trace,o=s[0].t,r=b.scene,n=r.matrixOptions.cdata,a=b.xaxis,i=b.yaxis,c=[];if(!r)return c;var h=!l.hasMarkers(t)&&!l.hasText(t);if(!0!==t.visible||h)return c;var f=T.getDimIndex(t,a),x=T.getDimIndex(t,i);if(!1===f||!1===x)return c;var v=o.xpx[f],g=o.ypx[x],y=n[f],p=n[x],m=(b.scene.selectBatch||[]).slice(),w=[];if(!1!==d&&!d.degenerate)for(var u=0;u<y.length;u++)d.contains([v[u],g[u]],null,u,b)?(c.push({pointNumber:u,x:y[u],y:p[u]}),A(m,u)):-1!==m.indexOf(u)?A(m,u):w.push(u);var S=r.matrixOptions;return m.length||w.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,k.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=m,r.unselectBatch=w,c}},21850:function(Q,z,e){"use strict";var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),b=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:A("u",1),vhoverformat:A("v",1),whoverformat:A("w",1),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,k("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,Q.exports=s},88489:function(Q,z,e){"use strict";var k=e(71828),A=e(78803);function l(d){var s,t,o,r,n,a,i,c,h,f,x,v,g=d._x,y=d._y,p=d._z,m=d._len,w=-1/0,u=1/0,S=-1/0,_=1/0,E=-1/0,L=1/0,C="";for(m&&(i=g[0],h=y[0],x=p[0]),m>1&&(c=g[m-1],f=y[m-1],v=p[m-1]),s=0;s<m;s++)w=Math.max(w,g[s]),u=Math.min(u,g[s]),S=Math.max(S,y[s]),_=Math.min(_,y[s]),E=Math.max(E,p[s]),L=Math.min(L,p[s]),r||g[s]===i||(r=!0,C+="x"),n||y[s]===h||(n=!0,C+="y"),a||p[s]===x||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var P=T(d._x),I=T(d._y),j=T(d._z);C=(C=(C=C.replace("x",(i>c?"-":"+")+"x")).replace("y",(h>f?"-":"+")+"y")).replace("z",(x>v?"-":"+")+"z");var R=function(){m=0,P=[],I=[],j=[]};(!m||m<P.length*I.length*j.length)&&R();var H=function(se){return"x"===se?g:"y"===se?y:p},F=function(se){return"x"===se?P:"y"===se?I:j},U=function(se){return se[m-1]<se[0]?-1:1},B=H(C[1]),N=H(C[3]),J=H(C[5]),Z=F(C[1]).length,V=F(C[3]).length,W=F(C[5]).length,X=!1,K=function(se,fe,Ee){return Z*(V*se+fe)+Ee},ne=U(H(C[1])),re=U(H(C[3])),ae=U(H(C[5]));for(s=0;s<W-1;s++){for(t=0;t<V-1;t++){for(o=0;o<Z-1;o++){var le=K(s,t,o),pe=K(s,t,o+1),xe=K(s,t+1,o),ye=K(s+1,t,o);if(B[le]*ne<B[pe]*ne&&N[le]*re<N[xe]*re&&J[le]*ae<J[ye]*ae||(X=!0),X)break}if(X)break}if(X)break}return X&&(k.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:u,yMin:_,zMin:L,xMax:w,yMax:S,zMax:E,Xs:P,Ys:I,Zs:j,len:m,fill:C}}function T(d){return k.distinctVals(d).vals}function b(d,s){if(void 0===s&&(s=d.length),k.isTypedArray(d))return d.subarray(0,s);for(var t=[],o=0;o<s;o++)t[o]=+d[o];return t}Q.exports={calc:function(d,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=l(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var o,r,n,a=0;s.starts&&(o=b(s.starts.x||[]),r=b(s.starts.y||[]),n=b(s.starts.z||[]),a=Math.min(o.length,r.length,n.length)),s._startsX=o||[],s._startsY=r||[],s._startsZ=n||[];var i,c=0,h=1/0;for(i=0;i<s._len;i++){var f=s._u[i],x=s._v[i],v=s._w[i],g=Math.sqrt(f*f+x*x+v*v);c=Math.max(c,g),h=Math.min(h,g)}for(A(d,s,{vals:[h,c],containerStr:"",cLetter:"c"}),i=0;i<a;i++){var y=o[i];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var p=r[i];t.yMax=Math.max(t.yMax,p),t.yMin=Math.min(t.yMin,p);var m=n[i];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=a,s._normMax=c,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:l}},90154:function(Q,z,e){"use strict";var k=e(9330).gl_streamtube3d,A=k.createTubeMesh,l=e(71828),T=e(81697).parseColorScale,b=e(21081).extractOpts,d=e(90060),s={xaxis:0,yaxis:1,zaxis:2};function t(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var o=t.prototype;function r(i){var c=i.length;return c>2?i.slice(1,c-1):2===c?[(i[0]+i[1])/2]:i}function n(i){var c=i.length;return 1===c?[.5,.5]:[i[1]-i[0],i[c-1]-i[c-2]]}function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,x=c._len,v={};function g(Z,V){var W=h[V],X=f[s[V]];return l.simpleMap(Z,function(K){return W.d2l(K)*X})}if(v.vectors=d(g(c._u,"xaxis"),g(c._v,"yaxis"),g(c._w,"zaxis"),x),!x)return{positions:[],cells:[]};var y=g(c._Xs,"xaxis"),p=g(c._Ys,"yaxis"),m=g(c._Zs,"zaxis");if(v.meshgrid=[y,p,m],v.gridFill=c._gridFill,c._slen)v.startingPositions=d(g(c._startsX,"xaxis"),g(c._startsY,"yaxis"),g(c._startsZ,"zaxis"));else{for(var w=p[0],u=r(y),S=r(m),_=new Array(u.length*S.length),E=0,L=0;L<u.length;L++)for(var C=0;C<S.length;C++)_[E++]=[u[L],w,S[C]];v.startingPositions=_}v.colormap=T(c),v.tubeSize=c.sizeref,v.maxLength=c.maxdisplayed;var P=g(c._xbnds,"xaxis"),I=g(c._ybnds,"yaxis"),j=g(c._zbnds,"zaxis"),R=n(y),H=n(p),F=n(m),B=k(v,[[P[0]-R[0],I[0]-H[0],j[0]-F[0]],[P[1]+R[1],I[1]+H[1],j[1]+F[1]]]),N=b(c);B.vertexIntensityBounds=[N.min/c._normMax,N.max/c._normMax];var J=c.lightposition;return B.lightPosition=[J.x,J.y,J.z],B.ambient=c.lighting.ambient,B.diffuse=c.lighting.diffuse,B.specular=c.lighting.specular,B.roughness=c.lighting.roughness,B.fresnel=c.lighting.fresnel,B.opacity=c.opacity,c._pad=B.tubeScale*c.sizeref*2,B}o.handlePick=function(i){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function f(g,y){var m=h[s[y]];return c[y].l2c(g)/m}if(i.object===this.mesh){var x=i.data.position,v=i.data.velocity;return i.traceCoordinate=[f(x[0],"xaxis"),f(x[1],"yaxis"),f(x[2],"zaxis"),f(v[0],"xaxis"),f(v[1],"yaxis"),f(v[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},o.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),x=A(h,f),v=new t(i,c.uid);return v.mesh=x,v.data=c,x._trace=v,i.glplot.add(x),v}},22459:function(Q,z,e){"use strict";var k=e(71828),A=e(1586),l=e(21850);Q.exports=function(T,b,d,s){function t(h,f){return k.coerce(T,b,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),c=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),A(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},61510:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(k,A){return k.tubex=k.x,k.tubey=k.y,k.tubez=k.z,k.tubeu=A.traceCoordinate[3],k.tubev=A.traceCoordinate[4],k.tubew=A.traceCoordinate[5],k.norm=A.traceCoordinate[6],k.divergence=A.traceCoordinate[7],delete k.x,delete k.y,delete k.z,k},meta:{}}},57564:function(Q,z,e){"use strict";var k=e(9012),A=e(5386).f,l=e(5386).s,T=e(50693),b=e(27670).Y,d=e(34e3),s=e(7055),t=e(1426).extendFlat;Q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},d.marker.line.color,{dflt:null}),width:t({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:d.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:d.hovertext,hoverinfo:t({},k.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:A({},{keys:s.eventDataKeys}),textfont:d.textfont,insidetextorientation:d.insidetextorientation,insidetextfont:d.insidetextfont,outsidetextfont:t({},d.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:d.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(Q,z,e){"use strict";var k=e(74875);z.name="sunburst",z.plot=function(A,l,T,b){k.plotBasePlot(z.name,A,l,T,b)},z.clean=function(A,l,T,b){k.cleanBasePlot(z.name,A,l,T,b)}},52147:function(Q,z,e){"use strict";var k=e(674),A=e(92770),l=e(71828),T=e(21081).makeColorScaleFuncFromTrace,b=e(32354).makePullColorFn,d=e(32354).generateExtendedColors,s=e(21081).calc,t=e(50606).ALMOST_EQUAL,o={},r={},n={};function a(i,c,h){var f=0,x=i.children;if(x){for(var v=x.length,g=0;g<v;g++)f+=a(x[g],c,h);h.branches&&f++}else h.leaves&&f++;return i.value=i.data.data.value=f,c._values||(c._values=[]),c._values[i.data.data.i]=f,f}z.calc=function(i,c){var h,f,x,v,g,y,p=i._fullLayout,m=c.ids,w=l.isArrayOrTypedArray(m),u=c.labels,S=c.parents,_=c.values,E=l.isArrayOrTypedArray(_),L=[],C={},P={},I=function(ae){return ae||"number"==typeof ae},j=function(ae){return!E||A(_[ae])&&_[ae]>=0};w?(h=Math.min(m.length,S.length),f=function(ae){return I(m[ae])&&j(ae)},x=function(ae){return String(m[ae])}):(h=Math.min(u.length,S.length),f=function(ae){return I(u[ae])&&j(ae)},x=function(ae){return String(u[ae])}),E&&(h=Math.min(h,_.length));for(var R=0;R<h;R++)if(f(R)){var H=x(R),F=I(S[R])?String(S[R]):"",U={i:R,id:H,pid:F,label:I(u[R])?String(u[R]):""};E&&(U.v=+_[R]),L.push(U),g=H,C[v=F]?C[v].push(g):C[v]=[g],P[g]=1}if(C[""]){if(C[""].length>1){for(var B=l.randstr(),N=0;N<L.length;N++)""===L[N].pid&&(L[N].pid=B);L.unshift({hasMultipleRoots:!0,id:B,pid:"",label:""})}}else{var J,Z=[];for(J in C)P[J]||Z.push(J);if(1!==Z.length)return l.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",Z.join(", ")].join(" "));L.unshift({hasImpliedRoot:!0,id:J=Z[0],pid:"",label:J})}try{y=k.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(L)}catch(ae){return l.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ae.message].join(" "))}var V=k.hierarchy(y),W=!1;if(E)switch(c.branchvalues){case"remainder":V.sum(function(ae){return ae.data.v});break;case"total":V.each(function(ae){var le=ae.data.data,pe=le.v;if(ae.children){var xe=ae.children.reduce(function(ye,se){return ye+se.data.data.v},0);if((le.hasImpliedRoot||le.hasMultipleRoots)&&(pe=xe),pe<xe*t)return W=!0,l.warn(["Total value for node",ae.data.data.id,"of",c.name,"is smaller than the sum of its children.","\nparent value =",pe,"\nchildren sum =",xe].join(" "))}ae.value=pe})}else a(V,c,{branches:-1!==c.count.indexOf("branches"),leaves:-1!==c.count.indexOf("leaves")});if(!W){var X,K;c.sort&&V.sort(function(ae,le){return le.value-ae.value});var ne=c.marker.colors||[];return c._hasColorscale?(!!ne.length||(ne=E?c.values:c._values),s(i,c,{vals:ne,containerStr:"marker",cLetter:"c"}),K=T(c.marker)):X=b(p["_"+c.type+"colormap"]),V.each(function(ae){var le=ae.data.data;le.color=c._hasColorscale?K(ne[le.i]):X(ne[le.i],le.id)}),L[0].hierarchy=V,L}},z._runCrossTraceCalc=function(i,c){var h=c._fullLayout,f=c.calcdata,x=h[i+"colorway"],v=h["_"+i+"colormap"];h["extend"+i+"colors"]&&(x=d(x,"icicle"===i?n:"treemap"===i?r:o));var g,y=0;function p(u){var S=u.data.data,_=S.id;!1===S.color&&(v[_]?S.color=v[_]:u.parent?u.parent.parent?S.color=u.parent.data.data.color:(v[_]=S.color=x[y%x.length],y++):S.color=g)}for(var m=0;m<f.length;m++){var w=f[m][0];w.trace.type===i&&w.hierarchy&&(g=w.trace.root.color,w.hierarchy.each(p))}},z.crossTraceCalc=function(i){return z._runCrossTraceCalc("sunburst",i)}},7055:function(Q){"use strict";Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(Q,z,e){"use strict";var k=e(71828),A=e(57564),l=e(27670).c,T=e(90769).handleText,b=e(21081),d=b.hasColorscale,s=b.handleDefaults;Q.exports=function(t,o,r,n){function a(v,g){return k.coerce(t,o,A,v,g)}var i=a("labels"),c=a("parents");if(i&&i.length&&c&&c.length){var h=a("values");a(h&&h.length?"branchvalues":"count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",n.paper_bgcolor),a("marker.colors");var f=o._hasColorscale=d(t,"marker","colors")||(t.marker||{}).coloraxis;f&&s(t,o,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",f?1:.7);var x=a("text");a("texttemplate"),o.texttemplate||a("textinfo",Array.isArray(x)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(t,o,n,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(o,n,a),o._length=null}else o.visible=!1}},83523:function(Q,z,e){"use strict";var k=e(39898),A=e(73972),l=e(23469).appendArrayPointValue,T=e(30211),b=e(71828),d=e(11086),s=e(2791),t=e(53581).formatPieValue;function o(r,n,a){for(var i=r.data.data,c={curveNumber:n.index,pointNumber:i.i,data:n._input,fullData:n},h=0;h<a.length;h++){var f=a[h];f in r&&(c[f]=r[f])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(c.parent=r.parentString),l(c,n,i.i),c}Q.exports=function(r,n,a,i,c){var h=i[0],f=h.trace,x=h.hierarchy,v="sunburst"===f.type,g="treemap"===f.type||"icicle"===f.type;"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(y){var p=a._fullLayout;if(!a._dragging&&!1!==p.hovermode){var m,w=a._fullData[f.index],u=y.data.data,S=u.i,_=s.isHierarchyRoot(y),E=s.getParent(x,y),L=s.getValue(y),C=function(ne){return b.castOption(w,S,ne)},P=C("hovertemplate"),I=T.castHoverinfo(w,p,S),j=p.separators;if(P||I&&"none"!==I&&"skip"!==I){var R,H;v&&(R=h.cx+y.pxmid[0]*(1-y.rInscribed),H=h.cy+y.pxmid[1]*(1-y.rInscribed)),g&&(R=y._hoverX,H=y._hoverY);var F,U={},B=[],N=[],J=function(ne){return-1!==B.indexOf(ne)};I&&(B="all"===I?w._module.attributes.hoverinfo.flags:I.split("+")),U.label=u.label,J("label")&&U.label&&N.push(U.label),u.hasOwnProperty("v")&&(U.value=u.v,U.valueLabel=t(U.value,j),J("value")&&N.push(U.valueLabel)),U.currentPath=y.currentPath=s.getPath(y.data),J("current path")&&!_&&N.push(U.currentPath);var Z=[],V=function(){-1===Z.indexOf(F)&&(N.push(F),Z.push(F))};U.percentParent=y.percentParent=L/s.getValue(E),U.parent=y.parentString=s.getPtLabel(E),J("percent parent")&&(F=s.formatPercent(U.percentParent,j)+" of "+U.parent,V()),U.percentEntry=y.percentEntry=L/s.getValue(n),U.entry=y.entry=s.getPtLabel(n),!J("percent entry")||_||y.onPathbar||(F=s.formatPercent(U.percentEntry,j)+" of "+U.entry,V()),U.percentRoot=y.percentRoot=L/s.getValue(x),U.root=y.root=s.getPtLabel(x),J("percent root")&&!_&&(F=s.formatPercent(U.percentRoot,j)+" of "+U.root,V()),U.text=C("hovertext")||C("text"),J("text")&&b.isValidTextValue(F=U.text)&&N.push(F),m=[o(y,w,c.eventDataKeys)];var W={trace:w,y:H,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:N.join("<br>"),name:P||J("name")?w.name:void 0,color:C("hoverlabel.bgcolor")||u.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:U,eventData:m};v&&(W.x0=R-y.rInscribed*y.rpx1,W.x1=R+y.rInscribed*y.rpx1,W.idealAlign=y.pxmid[0]<0?"left":"right"),g&&(W.x=R,W.idealAlign=R<0?"left":"right");var X=[];T.loneHover(W,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:a,inOut_bbox:X}),m[0].bbox=X[0],f._hasHoverLabel=!0}if(g){var K=r.select("path.surface");c.styleOne(K,y,w,{hovered:!0})}f._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[o(y,w,c.eventDataKeys)],event:k.event})}}),r.on("mouseout",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=k.select(this).datum();if(f._hasHoverEvent&&(y.originalEvent=k.event,a.emit("plotly_unhover",{points:[o(w,m,c.eventDataKeys)],event:k.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(T.loneUnhover(p._hoverlayer.node()),f._hasHoverLabel=!1),g){var u=r.select("path.surface");c.styleOne(u,w,m,{hovered:!1})}}),r.on("click",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=v&&(s.isHierarchyRoot(y)||s.isLeaf(y)),u=s.getPtId(y),S=s.isEntry(y)?s.findEntryWithChild(x,u):s.findEntryWithLevel(x,u),_=s.getPtId(S),E={points:[o(y,m,c.eventDataKeys)],event:k.event};w||(E.nextLevel=_);var L=d.triggerHandler(a,"plotly_"+f.type+"click",E);if(!1!==L&&p.hovermode&&(a._hoverdata=[o(y,m,c.eventDataKeys)],T.click(a,k.event)),!w&&!1!==L&&!a._dragging&&!a._transitioning){A.call("_storeDirectGUIEdit",m,p._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:_}],traces:[f.index]},P={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(p._hoverlayer.node()),A.call("animate",a,C,P)}})}},2791:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(6964),T=e(53581);function b(d){return d.data.data.pid}z.findEntryWithLevel=function(d,s){var t;return s&&d.eachAfter(function(o){if(z.getPtId(o)===s)return t=o.copy()}),t||d},z.findEntryWithChild=function(d,s){var t;return d.eachAfter(function(o){for(var r=o.children||[],n=0;n<r.length;n++)if(z.getPtId(r[n])===s)return t=o.copy()}),t||d},z.isEntry=function(d){return!d.parent},z.isLeaf=function(d){return!d.children},z.getPtId=function(d){return d.data.data.id},z.getPtLabel=function(d){return d.data.data.label},z.getValue=function(d){return d.value},z.isHierarchyRoot=function(d){return""===b(d)},z.setSliceCursor=function(d,s,t){var o=t.isTransitioning;if(!o){var r=d.datum();o=t.hideOnRoot&&z.isHierarchyRoot(r)||t.hideOnLeaves&&z.isLeaf(r)}l(d,o?null:"pointer")},z.getInsideTextFontKey=function(d,s,t,o,r){var a=t.data.data.i;return k.castOption(s,a,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+d)||k.castOption(s,a,"textfont."+d)||o.size},z.getOutsideTextFontKey=function(d,s,t,o){var r=t.data.data.i;return k.castOption(s,r,"outsidetextfont."+d)||k.castOption(s,r,"textfont."+d)||o.size},z.isOutsideText=function(d,s){return!d._hasColorscale&&z.isHierarchyRoot(s)},z.determineTextFont=function(d,s,t,o){return z.isOutsideText(d,s)?{color:z.getOutsideTextFontKey("color",r=d,n=s,a=t),family:z.getOutsideTextFontKey("family",r,n,a),size:z.getOutsideTextFontKey("size",r,n,a)}:function(r,n,a,i){var h=n.data.data,f=h.i,x=k.castOption(r,f,((i||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=k.castOption(r._input,f,"textfont.color")),{color:x||A.contrast(h.color),family:z.getInsideTextFontKey("family",r,n,a,i),size:z.getInsideTextFontKey("size",r,n,a,i)}}(d,s,t,o);var r,n,a},z.hasTransition=function(d){return!!(d&&d.duration>0)},z.getMaxDepth=function(d){return d.maxdepth>=0?d.maxdepth:1/0},z.isHeader=function(d,s){return!(z.isLeaf(d)||d.depth===s._maxDepth-1)},z.getParent=function(d,s){return z.findEntryWithLevel(d,b(s))},z.listPath=function(d,s){var t=d.parent;if(!t)return[];var o=s?[t.data[s]]:[t];return z.listPath(t,s).concat(o)},z.getPath=function(d){return z.listPath(d,"label").join("/")+"/"},z.formatValue=T.formatPieValue,z.formatPercent=function(d,s){var t=k.formatPercent(d,0);return"0%"===t&&(t=T.formatPiePercent(d,s)),t}},87619:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function(Q){"use strict";Q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(Q,z,e){"use strict";var k=e(71828),A=e(2654);Q.exports=function(l,T){function b(d,s){return k.coerce(l,T,A,d,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},24714:function(Q,z,e){"use strict";var k=e(39898),A=e(674),l=e(81684).sX,T=e(91424),b=e(71828),d=e(63893),s=e(72597),t=s.recordMinTextSize,o=s.clearMinTextSize,r=e(14575),n=e(53581).getRotationAngle,a=r.computeTransform,i=r.transformInsideText,c=e(29969).styleOne,h=e(16688).resizeText,f=e(83523),x=e(7055),v=e(2791);function g(p,m,w,u){var S=p._context.staticPlot,_=p._fullLayout,E=!_.uniformtext.mode&&v.hasTransition(u),L=k.select(w).selectAll("g.slice"),C=m[0],P=C.trace,j=v.findEntryWithLevel(C.hierarchy,P.level),R=v.getMaxDepth(P),H=_._size,F=P.domain,B=H.h*(F.y[1]-F.y[0]),N=.5*Math.min(H.w*(F.x[1]-F.x[0]),B),J=C.cx=H.l+H.w*(F.x[1]+F.x[0])/2,Z=C.cy=H.t+H.h*(1-F.y[0])-B/2;if(!j)return L.remove();var V=null,W={};E&&L.each(function(Te){W[v.getPtId(Te)]={rpx0:Te.rpx0,rpx1:Te.rpx1,x0:Te.x0,x1:Te.x1,transform:Te.transform},!V&&v.isEntry(Te)&&(V=Te)});var Te,X=(Te=j,A.partition().size([2*Math.PI,Te.height+1])(Te)).descendants(),K=j.height+1,ne=0,re=R;C.hasMultipleRoots&&v.isHierarchyRoot(j)&&(X=X.slice(1),K-=1,ne=1,re+=1),X=X.filter(function(Te){return Te.y1<=re});var ae=n(P.rotation);ae&&X.forEach(function(Te){Te.x0+=ae,Te.x1+=ae});var le=Math.min(K,R),pe=function(Te){return(Te-ne)/le*N},xe=function(Te,$){return[Te*Math.cos($),-Te*Math.sin($)]},ye=function(Te){return b.pathAnnulus(Te.rpx0,Te.rpx1,Te.x0,Te.x1,J,Z)},se=function(Te){return J+y(Te)[0]*(Te.transform.rCenter||0)+(Te.transform.x||0)},fe=function(Te){return Z+y(Te)[1]*(Te.transform.rCenter||0)+(Te.transform.y||0)};(L=L.data(X,v.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var Te=k.select(this);Te.select("path.surface").transition().attrTween("d",function($){var oe=function(he){var me,Me=v.getPtId(he),Ie=W[Me],Pe=W[v.getPtId(j)];if(Pe){var ze=(he.x1>Pe.x1?2*Math.PI:0)+ae;me=he.rpx1<Pe.rpx1?{x0:he.x0,x1:he.x1,rpx0:0,rpx1:0}:{x0:ze,x1:ze,rpx0:he.rpx0,rpx1:he.rpx1}}else{var ce,ge=v.getPtId(he.parent);L.each(function(nt){if(v.getPtId(nt)===ge)return ce=nt});var _e,De=ce.children;De.forEach(function(nt,tt){if(v.getPtId(nt)===Me)return _e=tt});var He=De.length,Ve=l(ce.x0,ce.x1);me={rpx0:N,rpx1:N,x0:Ve(_e/He),x1:Ve((_e+1)/He)}}return l(Ie,me)}($);return function(he){return ye(oe(he))}}),Te.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Ee=null;if(E&&V){var de=v.getPtId(V);L.each(function(Te){null===Ee&&v.getPtId(Te)===de&&(Ee=Te.x1)})}var we=L;function ke(Te){var $=Te.parent,oe=W[v.getPtId($)],he={};if(oe){var me=$.children,Me=me.indexOf(Te),Ie=me.length,Pe=l(oe.x0,oe.x1);he.x0=Pe(Me/Ie),he.x1=Pe(Me/Ie)}else he.x0=he.x1=0;return he}E&&(we=we.transition().each("end",function(){var Te=k.select(this);v.setSliceCursor(Te,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),we.each(function(Te){var ze,$=k.select(this),oe=b.ensureSingle($,"path","surface",function(ze){ze.style("pointer-events",S?"none":"all")});Te.rpx0=pe(Te.y0),Te.rpx1=pe(Te.y1),Te.xmid=(Te.x0+Te.x1)/2,Te.pxmid=xe(Te.rpx1,Te.xmid),Te.midangle=-(Te.xmid-Math.PI/2),Te.startangle=-(Te.x0-Math.PI/2),Te.stopangle=-(Te.x1-Math.PI/2),Te.halfangle=.5*Math.min(b.angleDelta(Te.x0,Te.x1)||Math.PI,Math.PI),Te.ring=1-Te.rpx0/Te.rpx1,Te.rInscribed=0===(ze=Te).rpx0&&b.isFullCircle([ze.x0,ze.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(ze.halfangle)),ze.ring/2)),E?oe.transition().attrTween("d",function(ze){var ce=function(ge){var _e,De=W[v.getPtId(ge)],He={x0:ge.x0,x1:ge.x1,rpx0:ge.rpx0,rpx1:ge.rpx1};if(De)_e=De;else if(V)if(ge.parent)if(Ee){var Ve=(ge.x1>Ee?2*Math.PI:0)+ae;_e={x0:Ve,x1:Ve}}else b.extendFlat(_e={rpx0:N,rpx1:N},ke(ge));else _e={rpx0:0,rpx1:0};else _e={x0:ae,x1:ae};return l(_e,He)}(ze);return function(ge){return ye(ce(ge))}}):oe.attr("d",ye),$.call(f,j,p,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:p._transitioning}),oe.call(c,Te,P);var he=b.ensureSingle($,"g","slicetext"),me=b.ensureSingle(he,"text","",function(ze){ze.attr("data-notex",1)}),Me=b.ensureUniformFontSize(p,v.determineTextFont(P,Te,_.font));me.text(z.formatSliceLabel(Te,j,P,m,_)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Me).call(d.convertToTspans,p);var Ie=T.bBox(me.node());Te.transform=i(Ie,Te,C),Te.transform.targetX=se(Te),Te.transform.targetY=fe(Te);var Pe=function(ze,ce){var ge=ze.transform;return a(ge,ce),ge.fontSize=Me.size,t(P.type,ge,_),b.getTextTransform(ge)};E?me.transition().attrTween("transform",function(ze){var ce=function(ge){var _e,De=W[v.getPtId(ge)],He=ge.transform;if(De)_e=De;else if(_e={rpx1:ge.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},V)if(ge.parent)if(Ee){var Ve=ge.x1>Ee?2*Math.PI:0;_e.x0=_e.x1=Ve}else b.extendFlat(_e,ke(ge));else _e.x0=_e.x1=ae;else _e.x0=_e.x1=ae;var nt=l(_e.transform.textPosAngle,ge.transform.textPosAngle),tt=l(_e.rpx1,ge.rpx1),at=l(_e.x0,ge.x0),dt=l(_e.x1,ge.x1),wt=l(_e.transform.scale,He.scale),bt=l(_e.transform.rotate,He.rotate),_t=0===He.rCenter?3:0===_e.transform.rCenter?1/3:1,Lt=l(_e.transform.rCenter,He.rCenter);return function(Ct){var Ot=tt(Ct),Ht=at(Ct),It=dt(Ct),Ge=Lt(Math.pow(Ct,_t)),Ze={pxmid:xe(Ot,(Ht+It)/2),rpx1:Ot,transform:{textPosAngle:nt(Ct),rCenter:Ge,x:He.x,y:He.y}};return t(P.type,He,_),{transform:{targetX:se(Ze),targetY:fe(Ze),scale:wt(Ct),rotate:bt(Ct),rCenter:Ge}}}}(ze);return function(ge){return Pe(ce(ge),Ie)}}):me.attr("transform",Pe(Te,Ie))})}function y(p){return w=p.transform.textPosAngle,[(m=p.rpx1)*Math.sin(w),-m*Math.cos(w)];var m,w}z.plot=function(p,m,w,u){var S,_,E=p._fullLayout,L=E._sunburstlayer,C=!w,P=!E.uniformtext.mode&&v.hasTransition(w);o("sunburst",E),(S=L.selectAll("g.trace.sunburst").data(m,function(I){return I[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(u&&(_=u()),k.transition().duration(w.duration).ease(w.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){L.selectAll("g.trace").each(function(I){g(p,I,this,w)})})):(S.each(function(I){g(p,I,this,w)}),E.uniformtext.mode&&h(p,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},z.formatSliceLabel=function(p,m,w,u,S){var _=w.texttemplate,E=w.textinfo;if(!(_||E&&"none"!==E))return"";var L=S.separators,P=p.data.data,I=u[0].hierarchy,j=v.isHierarchyRoot(p),R=v.getParent(I,p),H=v.getValue(p);if(!_){var F,U=E.split("+"),B=function(re){return-1!==U.indexOf(re)},N=[];if(B("label")&&P.label&&N.push(P.label),P.hasOwnProperty("v")&&B("value")&&N.push(v.formatValue(P.v,L)),!j){B("current path")&&N.push(v.getPath(p.data));var J=0;B("percent parent")&&J++,B("percent entry")&&J++,B("percent root")&&J++;var Z=J>1;if(J){var V,W=function(re){F=v.formatPercent(V,L),Z&&(F+=" of "+re),N.push(F)};B("percent parent")&&!j&&(V=H/v.getValue(R),W("parent")),B("percent entry")&&(V=H/v.getValue(m),W("entry")),B("percent root")&&(V=H/v.getValue(I),W("root"))}}return B("text")&&(F=b.castOption(w,P.i,"text"),b.isValidTextValue(F)&&N.push(F)),N.join("<br>")}var X=b.castOption(w,P.i,"texttemplate");if(!X)return"";var K={};P.label&&(K.label=P.label),P.hasOwnProperty("v")&&(K.value=P.v,K.valueLabel=v.formatValue(P.v,L)),K.currentPath=v.getPath(p.data),j||(K.percentParent=H/v.getValue(R),K.percentParentLabel=v.formatPercent(K.percentParent,L),K.parent=v.getPtLabel(R)),K.percentEntry=H/v.getValue(m),K.percentEntryLabel=v.formatPercent(K.percentEntry,L),K.entry=v.getPtLabel(m),K.percentRoot=H/v.getValue(I),K.percentRootLabel=v.formatPercent(K.percentRoot,L),K.root=v.getPtLabel(I),P.hasOwnProperty("color")&&(K.color=P.color);var ne=b.castOption(w,P.i,"text");return(b.isValidTextValue(ne)||""===ne)&&(K.text=ne),K.customdata=b.castOption(w,P.i,"customdata"),b.texttemplateString(X,K,S._d3locale,K,w._meta||{})}},29969:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(71828),T=e(72597).resizeText;function b(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||A.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(A.fill,o.color).call(A.stroke,a).style("opacity",r?t.leaf.opacity:null)}Q.exports={style:function(d){var s=d._fullLayout._sunburstlayer.selectAll(".trace");T(d,s,"sunburst"),s.each(function(t){var o=k.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){k.select(this).call(b,n,r)})})},styleOne:b}},54532:function(Q,z,e){"use strict";var k=e(7901),A=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,b=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:k.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:k.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=Q.exports=s(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},A("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},A.zauto,{}),zmin:d({},A.zmin,{}),zmax:d({},A.zmax,{})},hoverinfo:d({},b.hoverinfo),showlegend:d({},b.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},18396:function(Q,z,e){"use strict";var k=e(78803);Q.exports=function(A,l){k(A,l,l.surfacecolor?{vals:l.surfacecolor,containerStr:"",cLetter:"c"}:{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function(Q,z,e){"use strict";var k=e(9330).gl_surface3d,A=e(9330).ndarray,l=e(9330).ndarray_linear_interpolate.d2,T=e(824),b=e(43907),d=e(71828).isArrayOrTypedArray,s=e(81697).parseColorScale,t=e(78614),o=e(21081).extractOpts;function r(w,u,S){this.scene=w,this.uid=S,this.surface=u,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(w,u,S,_){var E=d(this.data.x)?d(this.data.x[0])?this.data.x[u][w]:this.data.x[w]:w;return void 0===S?E:_.d2l(E,0,S)},n.getYat=function(w,u,S,_){var E=d(this.data.y)?d(this.data.y[0])?this.data.y[u][w]:this.data.y[u]:u;return void 0===S?E:_.d2l(E,0,S)},n.getZat=function(w,u,S,_){var E=this.data.z[u][w];return null===E&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[u][w]),void 0===S?E:_.d2l(E,0,S)},n.handlePick=function(w){if(w.object===this.surface){var S=(w.data.index[1]-1)/this.dataScaleY-1,_=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);w.index=[_,E],w.traceCoordinate=[this.getXat(_,E),this.getYat(_,E),this.getZat(_,E)],w.dataCoordinate=[this.getXat(_,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(_,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(_,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)null!=w.dataCoordinate[L]&&(w.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return w.textLabel=Array.isArray(C)&&C[E]&&void 0!==C[E][_]?C[E][_]:C||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function i(w,u){if(w<u)return 0;for(var S=0;0===Math.floor(w%u);)w/=u,S++;return S}function c(w){for(var u=[],S=0;S<a.length;S++)u.push(i(w,a[S]));return u}function h(w){for(var u=c(w),S=w,_=0;_<a.length;_++)if(u[_]>0){S=a[_];break}return S}function f(w,u){if(!(w<1||u<1)){for(var S=c(w),_=c(u),E=1,L=0;L<a.length;L++)E*=Math.pow(a[L],Math.max(S[L],_[L]));return E}}n.calcXnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getXat(u-1,0),E=this.getXat(u,0);S[u-1]=E!==_&&null!=_&&null!=E?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]=0===S[u-1]?1:Math.round(L/S[u-1]);return S},n.calcYnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getYat(0,u-1),E=this.getYat(0,u);S[u-1]=E!==_&&null!=_&&null!=E?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]=0===S[u-1]?1:Math.round(L/S[u-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=x[9],g=x[13];function y(w,u,S){var _=S[8]+S[2]*u[0]+S[5]*u[1];return w[0]=(S[6]+S[0]*u[0]+S[3]*u[1])/_,w[1]=(S[7]+S[1]*u[0]+S[4]*u[1])/_,w}function p(w,u,S){return function(_,E,L,C){for(var P=[0,0],I=_.shape[0],j=_.shape[1],R=0;R<I;R++)for(var H=0;H<j;H++)L(P,[R,H],C),_.set(R,H,l(E,P[0],P[1]))}(w,u,y,S),w}function m(w,u){for(var S=!1,_=0;_<w.length;_++)if(u===w[_]){S=!0;break}!1===S&&w.push(u)}n.estimateScale=function(w,u){for(var S=1+function(E){if(0!==E.length){for(var L=1,C=0;C<E.length;C++)L=f(L,E[C]);return L}}(0===u?this.calcXnums(w):this.calcYnums(w));S<v;)S*=2;for(;S>g;)S--,S/=h(S),++S<v&&(S=g);var _=Math.round(S/w);return _>1?_:1},n.refineCoords=function(w){for(var u=this.dataScaleX,S=this.dataScaleY,_=w[0].shape[0],E=w[0].shape[1],L=0|Math.floor(w[0].shape[0]*u+1),C=0|Math.floor(w[0].shape[1]*S+1),P=1+_+1,I=1+E+1,j=A(new Float32Array(P*I),[P,I]),R=[1/u,0,0,0,1/S,0,0,0,1],H=0;H<w.length;++H){this.surface.padField(j,w[H]);var F=A(new Float32Array(L*C),[L,C]);p(F,j,R),w[H]=F}},n.setContourLevels=function(){var w,u,_=[[],[],[]],E=[!1,!1,!1],L=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(L=!0,this.contourSize[w]>0&&null!==this.contourStart[w]&&null!==this.contourEnd[w]&&this.contourEnd[w]>this.contourStart[w]))for(E[w]=!0,u=this.contourStart[w];u<this.contourEnd[w];u+=this.contourSize[w])m(_[w],u*this.scene.dataScale[w]);if(L){var C=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(C[w]=E[w]?_[w]:this.scene.contourLevels[w]);this.surface.update({levels:C})}},n.update=function(w){var u,S,_,E,L=this.scene,C=L.fullSceneLayout,P=this.surface,I=s(w),j=L.dataScale,R=w.z[0].length,H=w._ylength,F=L.contourLevels;this.data=w;var U=[];for(u=0;u<3;u++)for(U[u]=[],S=0;S<R;S++)U[u][S]=[];for(S=0;S<R;S++)for(_=0;_<H;_++)U[0][S][_]=this.getXat(S,_,w.xcalendar,C.xaxis),U[1][S][_]=this.getYat(S,_,w.ycalendar,C.yaxis),U[2][S][_]=this.getZat(S,_,w.zcalendar,C.zaxis);if(w.connectgaps)for(w._emptypoints=b(U[2]),T(U[2],w._emptypoints),w._interpolatedZ=[],S=0;S<R;S++)for(w._interpolatedZ[S]=[],_=0;_<H;_++)w._interpolatedZ[S][_]=U[2][S][_];for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<H;_++)null==(E=U[u][S][_])?U[u][S][_]=NaN:E=U[u][S][_]*=j[u];for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<H;_++)null!=(E=U[u][S][_])&&(this.minValues[u]>E&&(this.minValues[u]=E),this.maxValues[u]<E&&(this.maxValues[u]=E));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<H;_++)null!=(E=U[u][S][_])&&(U[u][S][_]-=this.objectOffset[u]);var B=[A(new Float32Array(R*H),[R,H]),A(new Float32Array(R*H),[R,H]),A(new Float32Array(R*H),[R,H])];for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<H;_++)B[u].set(S,_,U[u][S][_]);U=[];var N={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},J=o(w);if(N.intensityBounds=[J.min,J.max],w.surfacecolor){var Z=A(new Float32Array(R*H),[R,H]);for(S=0;S<R;S++)for(_=0;_<H;_++)Z.set(S,_,w.surfacecolor[_][S]);B.push(Z)}else N.intensityBounds[0]*=j[2],N.intensityBounds[1]*=j[2];(g<B[0].shape[0]||g<B[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(B[0].shape[0],0),this.dataScaleY=this.estimateScale(B[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(B)),w.surfacecolor&&(N.intensity=B.pop());var K,ne,re,V=[!0,!0,!0],W=["x","y","z"];for(u=0;u<3;++u){var X=w.contours[W[u]];V[u]=X.highlight,N.showContour[u]=X.show||X.highlight,N.showContour[u]&&(N.contourProject[u]=[X.project.x,X.project.y,X.project.z],X.show?(this.showContour[u]=!0,N.levels[u]=F[u],P.highlightColor[u]=N.contourColor[u]=t(X.color),P.highlightTint[u]=N.contourTint[u]=X.usecolormap?0:1,N.contourWidth[u]=X.width,this.contourStart[u]=X.start,this.contourEnd[u]=X.end,this.contourSize[u]=X.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),X.highlight&&(N.dynamicColor[u]=t(X.highlightcolor),N.dynamicWidth[u]=X.highlightwidth))}(ne=(K=I)[0].rgb)[0]===(re=K[K.length-1].rgb)[0]&&ne[1]===re[1]&&ne[2]===re[2]&&ne[3]===re[3]&&(N.vertexColor=!0),N.objectOffset=this.objectOffset,N.coords=B,P.update(N),P.visible=w.visible,P.enableDynamic=V,P.enableHighlight=V,P.snapToData=!0,"lighting"in w&&(P.ambientLight=w.lighting.ambient,P.diffuseLight=w.lighting.diffuse,P.specularLight=w.lighting.specular,P.roughness=w.lighting.roughness,P.fresnel=w.lighting.fresnel),"lightposition"in w&&(P.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},Q.exports=function(w,u){var _=k({gl:w.glplot.gl}),E=new r(w,_,u.uid);return _._trace=E,E.update(u),w.glplot.add(_),E}},91831:function(Q,z,e){"use strict";var k=e(73972),A=e(71828),l=e(1586),T=e(54532);function b(s,t,o,r){var n=r("opacityscale");"max"===n?t.opacityscale=[[0,.1],[1,1]]:"min"===n?t.opacityscale=[[0,1],[1,.1]]:"extremes"===n?t.opacityscale=function(a,i){for(var c=[],h=0;h<32;h++){var f=h/31,x=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));c.push([f,Math.max(0,Math.min(1,x))])}return c}():function(a){var i=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var h=a[c];if(2!==h.length||+h[0]<i)return!1;i=+h[0]}return!0}(n)||(t.opacityscale=void 0)}function d(s,t,o){t in s&&!(o in s)&&(s[o]=s[t])}Q.exports={supplyDefaults:function(s,t,o,r){var n,a;function i(m,w){return A.coerce(s,t,T,m,w)}var c=i("x"),h=i("y"),f=i("z");if(!f||!f.length||c&&c.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(c)&&A.isArrayOrTypedArray(c[0])?f.length:f[0].length,t._ylength=f.length,k.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){i(m)});var x=i("surfacecolor"),v=["x","y","z"];for(n=0;n<3;++n){var g="contours."+v[n],y=i(g+".show"),p=i(g+".highlight");if(y||p)for(a=0;a<3;++a)i(g+".project."+v[a]);y&&(i(g+".color"),i(g+".width"),i(g+".usecolormap")),p&&(i(g+".highlightcolor"),i(g+".highlightwidth")),i(g+".start"),i(g+".end"),i(g+".size")}x||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),l(s,t,r,i,{prefix:"",cLetter:"c"}),b(0,t,0,i),t._length=null}},opacityscaleDefaults:b}},93601:function(Q,z,e){"use strict";Q.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(Q,z,e){"use strict";var k=e(50215),A=e(1426).extendFlat,l=e(30962).overrideAll,T=e(41940),b=e(27670).Y,d=e(12663).descriptionOnlyNumbers;(Q.exports=l({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:A({},k.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:A({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:A({},k.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:A({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(Q,z,e){"use strict";var k=e(27659).a0,A=e(36736),l="table";z.name=l,z.plot=function(T){var b=k(T.calcdata,l)[0];b.length&&A(T,b)},z.clean=function(T,b,d,s){var t=s._has&&s._has(l),o=b._has&&b._has(l);t&&!o&&s._paperdiv.selectAll(".table").remove()}},76333:function(Q,z,e){"use strict";var k=e(28984).wrap;Q.exports=function(){return k({})}},49850:function(Q){"use strict";Q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(Q,z,e){"use strict";var k=e(49850),A=e(1426).extendFlat,l=e(92770);function T(n){if(Array.isArray(n)){for(var a=0,i=0;i<n.length;i++)a=Math.max(a,T(n[i]));return a}return n}function b(n,a){return n+a}function d(n){var a,i=n.slice(),c=1/0,h=0;for(a=0;a<i.length;a++)Array.isArray(i[a])||(i[a]=[i[a]]),c=Math.min(c,i[a].length),h=Math.max(h,i[a].length);if(c!==h)for(a=0;a<i.length;a++){var f=h-i[a].length;f&&(i[a]=i[a].concat(s(f)))}return i}function s(n){for(var a=new Array(n),i=0;i<n;i++)a[i]="";return a}function t(n){return n.calcdata.columns.reduce(function(a,i){return i.xIndex<n.xIndex?a+i.columnWidth:a},0)}function o(n,a){return Object.keys(n).map(function(i){return A({},n[i],{auxiliaryBlocks:a})})}function r(n,a){for(var i,c={},h=0,f=0,x={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,g=0,y=0;y<n.length;y++)x.rows.push({rowIndex:y,rowHeight:i=n[y]}),((f+=i)>=a||y===n.length-1)&&(c[h]=x,x.key=g++,x.firstRowIndex=v,x.lastRowIndex=y,x={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=f,v=y+1,f=0);return c}Q.exports=function(n,a){var i=d(a.cells.values),c=function(j){return j.slice(a.header.values.length,j.length)},h=d(a.header.values);h.length&&!h[0].length&&(h[0]=[""],h=d(h));var f=h.concat(c(i).map(function(){return s((h[0]||[""]).length)})),x=a.domain,v=Math.floor(n._fullLayout._size.w*(x.x[1]-x.x[0])),g=Math.floor(n._fullLayout._size.h*(x.y[1]-x.y[0])),y=a.header.values.length?f[0].map(function(){return a.header.height}):[k.emptyHeaderHeight],p=i.length?i[0].map(function(){return a.cells.height}):[],m=y.reduce(b,0),w=r(p,g-m+k.uplift),u=o(r(y,m),[]),S=o(w,u),_={},E=a._fullInput.columnorder.concat(c(i.map(function(j,R){return R}))),L=f.map(function(j,R){var H=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(R,a.columnwidth.length-1)]:a.columnwidth;return l(H)?Number(H):1}),C=L.reduce(b,0);L=L.map(function(j){return j/C*v});var P=Math.max(T(a.header.line.width),T(a.cells.line.width)),I={key:a.uid+n._context.staticPlot,translateX:x.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-x.y[1]),size:n._fullLayout._size,width:v,maxLineWidth:P,height:g,columnOrder:E,groupHeight:g,rowBlocks:S,headerRowBlocks:u,scrollY:0,cells:A({},a.cells,{values:i}),headerCells:A({},a.header,{values:f}),gdColumns:f.map(function(j){return j[0]}),gdColumnsOriginalOrder:f.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:f.map(function(j,R){return _[j]=(_[j]||0)+1,{key:j+"__"+_[j],label:j,specIndex:R,xIndex:E[R],xScale:t,x:void 0,calcdata:void 0,columnWidth:L[R]}})};return I.columns.forEach(function(j){j.calcdata=I,j.x=t(j)}),I}},56269:function(Q,z,e){"use strict";var k=e(1426).extendFlat;z.splitToPanels=function(A){var l=[0,0],T=k({},A,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:A.calcdata.headerCells.values[A.specIndex],rowBlocks:A.calcdata.headerRowBlocks,calcdata:k({},A.calcdata,{cells:A.calcdata.headerCells})});return[k({},A,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),k({},A,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),T]},z.splitToCells=function(A){var T,b,d,l=[d=(b=(T=A).rowBlocks[T.page])?b.rows[0].rowIndex:0,b?d+b.rows.length:0];return(A.values||[]).slice(l[0],l[1]).map(function(T,b){return{keyWithinBlock:b+("string"==typeof T&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+b,column:A,calcdata:A.calcdata,page:A.page,rowBlocks:A.rowBlocks,value:T}})}},39754:function(Q,z,e){"use strict";var k=e(71828),A=e(44464),l=e(27670).c;Q.exports=function(T,b,d,s){function t(o,r){return k.coerce(T,b,A,o,r)}l(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),k.coerceFont(t,"header.font",k.extendFlat({},s.font)),function(o,r){for(var a=o.header.values.length,i=(o.columnorder||[]).slice(0,a),c=i.slice().sort(function(x,v){return x-v}),h=i.map(function(x){return c.indexOf(x)}),f=h.length;f<a;f++)h.push(f);r("columnorder",h)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),k.coerceFont(t,"cells.font",k.extendFlat({},s.font)),b._length=null}},96595:function(Q,z,e){"use strict";Q.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function(Q,z,e){"use strict";var k=e(49850),A=e(39898),l=e(71828).numberFormat,T=e(28984),b=e(91424),d=e(63893),s=e(71828).raiseToTop,t=e(71828).strTranslate,o=e(71828).cancelTransition,r=e(51018),n=e(56269),a=e(7901);function i(B){return Math.ceil(B.calcdata.maxLineWidth/2)}function c(B,N){return"clip"+B._fullLayout._uid+"_scrollAreaBottomClip_"+N.key}function h(B,N){return"clip"+B._fullLayout._uid+"_columnBoundaryClippath_"+N.calcdata.key+"_"+N.specIndex}function f(B){return[].concat.apply([],B.map(function(N){return N})).map(function(N){return N.__data__})}function x(B,N,J){var Z=B.selectAll("."+k.cn.scrollbarKit).data(T.repeat,T.keyFun);Z.enter().append("g").classed(k.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),Z.each(function(ne){var le,re=ne.scrollbarState;re.totalHeight=R(le=ne.rowBlocks,le.length-1)+(le.length?H(le[le.length-1],1/0):1),re.scrollableAreaHeight=ne.groupHeight-S(ne),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,k.goldenRatio*k.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=0===re.barWiggleRoom?0:ne.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ne){return t(ne.width+k.scrollbarWidth/2+k.scrollbarOffset,S(ne))});var V=Z.selectAll("."+k.cn.scrollbar).data(T.repeat,T.keyFun);V.enter().append("g").classed(k.cn.scrollbar,!0);var W=V.selectAll("."+k.cn.scrollbarSlider).data(T.repeat,T.keyFun);W.enter().append("g").classed(k.cn.scrollbarSlider,!0),W.attr("transform",function(ne){return t(0,ne.scrollbarState.topY||0)});var X=W.selectAll("."+k.cn.scrollbarGlyph).data(T.repeat,T.keyFun);X.enter().append("line").classed(k.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",k.scrollbarWidth).attr("stroke-linecap","round").attr("y1",k.scrollbarWidth/2),X.attr("y2",function(ne){return ne.scrollbarState.barLength-k.scrollbarWidth/2}).attr("stroke-opacity",function(ne){return ne.columnDragInProgress||!ne.scrollbarState.barWiggleRoom||J?0:.4}),X.transition().delay(0).duration(0),X.transition().delay(k.scrollbarHideDelay).duration(k.scrollbarHideDuration).attr("stroke-opacity",0);var K=V.selectAll("."+k.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);K.enter().append("line").classed(k.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",k.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ne){var re=A.event.y,ae=this.getBoundingClientRect(),le=ne.scrollbarState,pe=re-ae.top,xe=A.scale.linear().domain([0,le.scrollableAreaHeight]).range([0,le.totalHeight]).clamp(!0);le.topY<=pe&&pe<=le.bottomY||E(N,B,null,xe(pe-le.barLength/2))(ne)}).call(A.behavior.drag().origin(function(ne){return A.event.stopPropagation(),ne.scrollbarState.scrollbarScrollInProgress=!0,ne}).on("drag",E(N,B)).on("dragend",function(){})),K.attr("y2",function(ne){return ne.scrollbarState.scrollableAreaHeight}),N._context.staticPlot&&(X.remove(),K.remove())}function v(B,N,J,Z){var ae,W=function(re){var ae=re.selectAll("."+k.cn.columnCell).data(n.splitToCells,function(le){return le.keyWithinBlock});return ae.enter().append("g").classed(k.cn.columnCell,!0),ae.exit().remove(),ae}(((ae=J.selectAll("."+k.cn.columnCells).data(T.repeat,T.keyFun)).enter().append("g").classed(k.cn.columnCells,!0),ae.exit().remove(),ae));W.each(function(ae,le){var pe=ae.calcdata.cells.font,xe=ae.column.specIndex,ye={size:p(pe.size,xe,le),color:p(pe.color,xe,le),family:p(pe.family,xe,le)};ae.rowNumber=ae.key,ae.align=p(ae.calcdata.cells.align,xe,le),ae.cellBorderWidth=p(ae.calcdata.cells.line.width,xe,le),ae.font=ye});var X=function(re){var ae=re.selectAll("."+k.cn.cellRect).data(T.repeat,function(le){return le.keyWithinBlock});return ae.enter().append("rect").classed(k.cn.cellRect,!0),ae}(W);!function(re){re.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var le=A.select(this);a.stroke(le,p(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),a.fill(le,p(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}(X);var K=function(re){var ae=re.selectAll("."+k.cn.cellTextHolder).data(T.repeat,function(le){return le.keyWithinBlock});return ae.enter().append("g").classed(k.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}(W),ne=function(re){var ae=re.selectAll("."+k.cn.cellText).data(T.repeat,function(le){return le.keyWithinBlock});return ae.enter().append("text").classed(k.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){A.event.stopPropagation()}),ae}(K);(function(re){re.each(function(ae){b.font(A.select(this),ae.font)})})(ne),g(ne,N,Z,B),j(W)}function g(B,N,J,Z){B.text(function(V){var W=V.column.specIndex,X=V.rowNumber,K=V.value,ne="string"==typeof K,re=ne&&K.match(/<br>/i),ae=!ne||re;V.mayHaveMarkup=ne&&K.match(/[<&>]/);var le,pe="string"==typeof(le=K)&&le.match(k.latexCheck);V.latex=pe;var xe,ye,se=pe?"":p(V.calcdata.cells.prefix,W,X)||"",fe=pe?"":p(V.calcdata.cells.suffix,W,X)||"",Ee=pe?null:p(V.calcdata.cells.format,W,X)||null,de=se+(Ee?l(Ee)(V.value):V.value)+fe;if(V.wrappingNeeded=!V.wrapped&&!ae&&!pe&&(xe=y(de)),V.cellHeightMayIncrease=re||pe||V.mayHaveMarkup||(void 0===xe?y(de):xe),V.needsConvertToTspans=V.mayHaveMarkup||V.wrappingNeeded||V.latex,V.wrappingNeeded){var we=(" "===k.wrapSplitCharacter?de.replace(/<a href=/gi,"<a_href="):de).split(k.wrapSplitCharacter),ke=" "===k.wrapSplitCharacter?we.map(function(Te){return Te.replace(/<a_href=/gi,"<a href=")}):we;V.fragments=ke.map(function(Te){return{text:Te,width:null}}),V.fragments.push({fragment:k.wrapSpacer,width:null}),ye=ke.join(k.lineBreaker)+k.lineBreaker+k.wrapSpacer}else delete V.fragments,ye=de;return ye}).attr("dy",function(V){return V.needsConvertToTspans?0:"0.75em"}).each(function(V){var W=this,X=A.select(W);V.needsConvertToTspans?d.convertToTspans(X,Z,(V.wrappingNeeded?C:P)(J,W,N,Z,V)):A.select(W.parentNode).attr("transform",function(ne){return t(I(ne),k.cellPad)}).attr("text-anchor",function(ne){return{left:"start",center:"middle",right:"end"}[ne.align]})})}function y(B){return-1!==B.indexOf(k.wrapSplitCharacter)}function p(B,N,J){if(Array.isArray(B)){var Z=B[Math.min(N,B.length-1)];return Array.isArray(Z)?Z[Math.min(J,Z.length-1)]:Z}return B}function m(B,N,J){B.transition().ease(k.releaseTransitionEase).duration(k.releaseTransitionDuration).attr("transform",t(N.x,J))}function w(B){return"cells"===B.type}function u(B){return"header"===B.type}function S(B){return(B.rowBlocks.length?B.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(N,J){return N+H(J,1/0)},0)}function _(B,N,J){var Z=f(N)[0];if(void 0!==Z){var V=Z.rowBlocks,W=Z.calcdata,X=R(V,V.length),K=Z.calcdata.groupHeight-S(Z),ne=W.scrollY=Math.max(0,Math.min(X-K,W.scrollY)),re=function(ae,le,pe){for(var xe=[],ye=0,se=0;se<ae.length;se++){for(var fe=ae[se],Ee=fe.rows,de=0,we=0;we<Ee.length;we++)de+=Ee[we].rowHeight;fe.allRowsHeight=de,le<ye+de&&le+pe>ye&&xe.push(se),ye+=de}return xe}(V,ne,K);1===re.length&&(re[0]===V.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),N.each(function(ae,le){ae.page=re[le],ae.scrollY=ne}),N.attr("transform",function(ae){var le=R(ae.rowBlocks,ae.page)-ae.scrollY;return t(0,le)}),B&&(L(B,J,N,re,Z.prevPages,Z,0),L(B,J,N,re,Z.prevPages,Z,1),x(J,B))}}function E(B,N,J,Z){return function(V){var W=V.calcdata?V.calcdata:V,X=N.filter(function(ae){return W.key===ae.key}),ne=W.scrollY;W.scrollY=void 0===Z?W.scrollY+(J||W.scrollbarState.dragMultiplier)*A.event.dy:Z;var re=X.selectAll("."+k.cn.yColumn).selectAll("."+k.cn.columnBlock).filter(w);return _(B,re,X),W.scrollY===ne}}function L(B,N,J,Z,V,W,X){Z[X]!==V[X]&&(clearTimeout(W.currentRepaint[X]),W.currentRepaint[X]=setTimeout(function(){var K=J.filter(function(ne,re){return re===X&&Z[re]!==V[re]});v(B,N,K,J),V[X]=Z[X]}))}function C(B,N,J,Z){return function(){var V=A.select(N.parentNode);V.each(function(W){var X=W.fragments;V.selectAll("tspan.line").each(function(ye,se){X[se].width=this.getComputedTextLength()});var K,ne,re=X[X.length-1].width,ae=X.slice(0,-1),le=[],pe=0,xe=W.column.columnWidth-2*k.cellPad;for(W.value="";ae.length;)pe+(ne=(K=ae.shift()).width+re)>xe&&(W.value+=le.join(k.wrapSpacer)+k.lineBreaker,le=[],pe=0),le.push(K.text),pe+=ne;pe&&(W.value+=le.join(k.wrapSpacer)),W.wrapped=!0}),V.selectAll("tspan.line").remove(),g(V.select("."+k.cn.cellText),J,B,Z),A.select(N.parentNode.parentNode).call(j)}}function P(B,N,J,Z,V){return function(){if(!V.settledY){var W=A.select(N.parentNode),X=U(V),K=V.key-X.firstRowIndex,ne=X.rows[K].rowHeight,re=V.cellHeightMayIncrease?N.parentNode.getBoundingClientRect().height+2*k.cellPad:ne,ae=Math.max(re,ne);ae-X.rows[K].rowHeight&&(X.rows[K].rowHeight=ae,B.selectAll("."+k.cn.columnCell).call(j),_(null,B.filter(w),0),x(J,Z,!0)),W.attr("transform",function(){var pe=this.parentNode.getBoundingClientRect(),xe=A.select(this.parentNode).select("."+k.cn.cellRect).node().getBoundingClientRect(),ye=this.transform.baseVal.consolidate(),se=xe.top-pe.top+(ye?ye.matrix.f:k.cellPad);return t(I(V,A.select(this.parentNode).select("."+k.cn.cellTextHolder).node().getBoundingClientRect().width),se)}),V.settledY=!0}}}function I(B,N){switch(B.align){case"left":default:return k.cellPad;case"right":return B.column.columnWidth-(N||0)-k.cellPad;case"center":return(B.column.columnWidth-(N||0))/2}}function j(B){B.attr("transform",function(N){var J=N.rowBlocks[0].auxiliaryBlocks.reduce(function(V,W){return V+H(W,1/0)},0),Z=H(U(N),N.key);return t(0,Z+J)}).selectAll("."+k.cn.cellRect).attr("height",function(N){return(J=U(N),Z=N.key,J.rows[Z-J.firstRowIndex]).rowHeight;var J,Z})}function R(B,N){for(var J=0,Z=N-1;Z>=0;Z--)J+=F(B[Z]);return J}function H(B,N){for(var J=0,Z=0;Z<B.rows.length&&B.rows[Z].rowIndex<N;Z++)J+=B.rows[Z].rowHeight;return J}function F(B){var N=B.allRowsHeight;if(void 0!==N)return N;for(var J=0,Z=0;Z<B.rows.length;Z++)J+=B.rows[Z].rowHeight;return B.allRowsHeight=J,J}function U(B){return B.rowBlocks[B.page]}Q.exports=function(B,N){var J=!B._context.staticPlot,Z=B._fullLayout._paper.selectAll("."+k.cn.table).data(N.map(function(fe){var Ee=T.unwrap(fe).trace;return r(B,Ee)}),T.keyFun);Z.exit().remove(),Z.enter().append("g").classed(k.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),Z.attr("width",function(fe){return fe.width+fe.size.l+fe.size.r}).attr("height",function(fe){return fe.height+fe.size.t+fe.size.b}).attr("transform",function(fe){return t(fe.translateX,fe.translateY)});var V=Z.selectAll("."+k.cn.tableControlView).data(T.repeat,T.keyFun),W=V.enter().append("g").classed(k.cn.tableControlView,!0).style("box-sizing","content-box");if(J){var X="onwheel"in document?"wheel":"mousewheel";W.on("mousemove",function(fe){V.filter(function(Ee){return fe===Ee}).call(x,B)}).on(X,function(fe){fe.scrollbarState.wheeling||(fe.scrollbarState.wheeling=!0,E(B,V,null,fe.scrollY+A.event.deltaY)(fe)||(A.event.stopPropagation(),A.event.preventDefault()),fe.scrollbarState.wheeling=!1)}).call(x,B,!0)}V.attr("transform",function(fe){return t(fe.size.l,fe.size.t)});var K=V.selectAll("."+k.cn.scrollBackground).data(T.repeat,T.keyFun);K.enter().append("rect").classed(k.cn.scrollBackground,!0).attr("fill","none"),K.attr("width",function(fe){return fe.width}).attr("height",function(fe){return fe.height}),V.each(function(fe){b.setClipUrl(A.select(this),c(B,fe),B)});var ne=V.selectAll("."+k.cn.yColumn).data(function(fe){return fe.columns},T.keyFun);ne.enter().append("g").classed(k.cn.yColumn,!0),ne.exit().remove(),ne.attr("transform",function(fe){return t(fe.x,0)}),J&&ne.call(A.behavior.drag().origin(function(fe){return m(A.select(this),fe,-k.uplift),s(this),fe.calcdata.columnDragInProgress=!0,x(V.filter(function(Ee){return fe.calcdata.key===Ee.key}),B),fe}).on("drag",function(fe){var Ee=A.select(this),de=function(we){return(fe===we?A.event.x:we.x)+we.columnWidth/2};fe.x=Math.max(-k.overdrag,Math.min(fe.calcdata.width+k.overdrag-fe.columnWidth,A.event.x)),f(ne).filter(function(we){return we.calcdata.key===fe.calcdata.key}).sort(function(we,ke){return de(we)-de(ke)}).forEach(function(we,ke){we.xIndex=ke,we.x=fe===we?we.x:we.xScale(we)}),ne.filter(function(we){return fe!==we}).transition().ease(k.transitionEase).duration(k.transitionDuration).attr("transform",function(we){return t(we.x,0)}),Ee.call(o).attr("transform",t(fe.x,-k.uplift))}).on("dragend",function(fe){var we,ke,Te,$,Ee=A.select(this),de=fe.calcdata;fe.x=fe.xScale(fe),fe.calcdata.columnDragInProgress=!1,m(Ee,fe,0),we=B,ke=de,Te=de.columns.map(function(we){return we.xIndex}),$=ke.gdColumnsOriginalOrder,ke.gdColumns.sort(function(oe,he){return Te[$.indexOf(oe)]-Te[$.indexOf(he)]}),ke.columnorder=Te,we.emit("plotly_restyle")})),ne.each(function(fe){b.setClipUrl(A.select(this),h(B,fe),B)});var re=ne.selectAll("."+k.cn.columnBlock).data(n.splitToPanels,T.keyFun);re.enter().append("g").classed(k.cn.columnBlock,!0).attr("id",function(fe){return fe.key}),re.style("cursor",function(fe){return fe.dragHandle?"ew-resize":fe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ae=re.filter(u),le=re.filter(w);J&&le.call(A.behavior.drag().origin(function(fe){return A.event.stopPropagation(),fe}).on("drag",E(B,V,-1)).on("dragend",function(){})),v(B,V,ae,re),v(B,V,le,re);var pe=V.selectAll("."+k.cn.scrollAreaClip).data(T.repeat,T.keyFun);pe.enter().append("clipPath").classed(k.cn.scrollAreaClip,!0).attr("id",function(fe){return c(B,fe)});var xe=pe.selectAll("."+k.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);xe.enter().append("rect").classed(k.cn.scrollAreaClipRect,!0).attr("x",-k.overdrag).attr("y",-k.uplift).attr("fill","none"),xe.attr("width",function(fe){return fe.width+2*k.overdrag}).attr("height",function(fe){return fe.height+k.uplift}),ne.selectAll("."+k.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(k.cn.columnBoundary,!0);var ye=ne.selectAll("."+k.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);ye.enter().append("clipPath").classed(k.cn.columnBoundaryClippath,!0),ye.attr("id",function(fe){return h(B,fe)});var se=ye.selectAll("."+k.cn.columnBoundaryRect).data(T.repeat,T.keyFun);se.enter().append("rect").classed(k.cn.columnBoundaryRect,!0).attr("fill","none"),se.attr("width",function(fe){return fe.columnWidth+2*i(fe)}).attr("height",function(fe){return fe.calcdata.height+2*i(fe)+k.uplift}).attr("x",function(fe){return-i(fe)}).attr("y",function(fe){return-i(fe)}),_(null,le,V)}},45802:function(Q,z,e){"use strict";var k=e(5386).f,A=e(5386).s,l=e(50693),T=e(27670).Y,b=e(34e3),d=e(57564),s=e(43473),t=e(1426).extendFlat;Q.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:d.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:d.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:d.textinfo,texttemplate:A({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:k({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:d.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function(Q,z,e){"use strict";var k=e(74875);z.name="treemap",z.plot=function(A,l,T,b){k.plotBasePlot(z.name,A,l,T,b)},z.clean=function(A,l,T,b){k.cleanBasePlot(z.name,A,l,T,b)}},65039:function(Q,z,e){"use strict";var k=e(52147);z.y=function(A,l){return k.calc(A,l)},z.T=function(A){return k._runCrossTraceCalc("treemap",A)}},43473:function(Q){"use strict";Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(Q,z,e){"use strict";var k=e(71828),A=e(45802),l=e(7901),T=e(27670).c,b=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;Q.exports=function(r,n,a,i){function c(w,u){return k.coerce(r,n,A,w,u)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var x=c("values");c(x&&x.length?"branchvalues":"count"),c("level"),c("maxdepth"),"squarify"===c("tiling.packing")&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");b(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var y=-1!==n.textposition.indexOf("bottom");c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor);var p=c("marker.colors");(n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis)?o(r,n,i,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(p||[]).length);var m=2*n.textfont.size;c("marker.pad.t",y?m/4:m),c("marker.pad.l",m/4),c("marker.pad.r",m/4),c("marker.pad.b",y?m:m/4),c("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*d),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},80694:function(Q,z,e){"use strict";var k=e(39898),A=e(2791),l=e(72597).clearMinTextSize,T=e(16688).resizeText,b=e(46650);Q.exports=function(d,s,t,o,r){var n,a,i=r.type,c=r.drawDescendants,h=d._fullLayout,f=h["_"+i+"layer"],x=!t;l(i,h),(n=f.selectAll("g.trace."+i).data(s,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(i,!0),n.order(),!h.uniformtext.mode&&A.hasTransition(t)?(o&&(a=o()),k.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){f.selectAll("g.trace").each(function(v){b(d,v,this,t,c)})})):(n.each(function(v){b(d,v,this,t,c)}),h.uniformtext.mode&&T(d,f.selectAll(".trace"),i)),x&&n.exit().remove()}},66209:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(63893),b=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=!0;Q.exports=function(n,a,i,c,h){var f=h.barDifY,x=h.width,v=h.height,g=h.viewX,y=h.viewY,p=h.pathSlice,m=h.toMoveInsideSlice,w=h.strTransform,u=h.hasTransition,S=h.handleSlicesExit,_=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,P=n._fullLayout,I=a[0],j=I.trace,R=I.hierarchy,H=x/j._entryDepth,F=t.listPath(i.data,"id"),U=b(R.copy(),[x,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(U=U.filter(function(N){var J=F.indexOf(N.data.id);return-1!==J&&(N.x0=H*J,N.x1=H*(J+1),N.y0=f,N.y1=f+v,N.onPathbar=!0,!0)})).reverse(),(c=c.data(U,t.getPtId)).enter().append("g").classed("pathbar",!0),S(c,r,L,[x,v],p),c.order();var B=c;u&&(B=B.transition().each("end",function(){var N=k.select(this);t.setSliceCursor(N,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(N){N._x0=g(N.x0),N._x1=g(N.x1),N._y0=y(N.y0),N._y1=y(N.y1),N._hoverX=g(N.x1-Math.min(x,v)/2),N._hoverY=y(N.y1-v/2);var J=k.select(this),Z=A.ensureSingle(J,"path","surface",function(K){K.style("pointer-events",C?"none":"all")});u?Z.transition().attrTween("d",function(K){var ne=_(K,r,L,[x,v]);return function(re){return p(ne(re))}}):Z.attr("d",p),J.call(o,i,n,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),Z.call(d,N,j,{hovered:!1}),N._text=(t.getPtLabel(N)||"").split("<br>").join(" ")||"";var V=A.ensureSingle(J,"g","slicetext"),W=A.ensureSingle(V,"text","",function(K){K.attr("data-notex",1)}),X=A.ensureUniformFontSize(n,t.determineTextFont(j,N,P.font,{onPathbar:!0}));W.text(N._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,X).call(T.convertToTspans,n),N.textBB=l.bBox(W.node()),N.transform=m(N,{fontSize:X.size,onPathbar:!0}),N.transform.fontSize=X.size,u?W.transition().attrTween("transform",function(K){var ne=E(K,r,L,[x,v]);return function(re){return w(ne(re))}}):W.attr("transform",w(N))})}},52583:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(63893),b=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;Q.exports=function(a,i,c,h,f){var x=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,I=i[0].trace,j=-1!==I.textposition.indexOf("left"),R=-1!==I.textposition.indexOf("right"),H=-1!==I.textposition.indexOf("bottom"),F=!H&&!I.marker.pad.t||H&&!I.marker.pad.b,U=b(c,[x,v],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}).descendants(),B=1/0,N=-1/0;U.forEach(function(X){var K=X.depth;K>=I._maxDepth?(X.x0=X.x1=(X.x0+X.x1)/2,X.y0=X.y1=(X.y0+X.y1)/2):(B=Math.min(B,K),N=Math.max(N,K))}),h=h.data(U,t.getPtId),I._maxVisibleLayers=isFinite(N)?N-B+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[x,v],p),h.order();var J=null;if(u&&L){var Z=t.getPtId(L);h.each(function(X){null===J&&t.getPtId(X)===Z&&(J={x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1})})}var V=function(){return J||{x0:0,x1:x,y0:0,y1:v}},W=h;return u&&(W=W.transition().each("end",function(){var X=k.select(this);t.setSliceCursor(X,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(X){var K=t.isHeader(X,I);X._x0=g(X.x0),X._x1=g(X.x1),X._y0=y(X.y0),X._y1=y(X.y1),X._hoverX=g(X.x1-I.marker.pad.r),X._hoverY=y(H?X.y1-I.marker.pad.b/2:X.y0+I.marker.pad.t/2);var ne=k.select(this),re=A.ensureSingle(ne,"path","surface",function(xe){xe.style("pointer-events",C?"none":"all")});u?re.transition().attrTween("d",function(xe){var ye=_(xe,n,V(),[x,v]);return function(se){return p(ye(se))}}):re.attr("d",p),ne.call(o,c,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),re.call(d,X,I,{hovered:!1}),X._text=X.x0===X.x1||X.y0===X.y1?"":K?F?"":t.getPtLabel(X)||"":r(X,c,I,i,P)||"";var ae=A.ensureSingle(ne,"g","slicetext"),le=A.ensureSingle(ae,"text","",function(xe){xe.attr("data-notex",1)}),pe=A.ensureUniformFontSize(a,t.determineTextFont(I,X,P.font));le.text(X._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":j||K?"start":"middle").call(l.font,pe).call(T.convertToTspans,a),X.textBB=l.bBox(le.node()),X.transform=m(X,{fontSize:pe.size,isHeader:K}),X.transform.fontSize=pe.size,u?le.transition().attrTween("transform",function(xe){var ye=E(xe,n,V(),[x,v]);return function(se){return w(ye(se))}}):le.attr("transform",w(X))}),J}},14102:function(Q){"use strict";Q.exports=function z(e,k,A){var l;A.swapXY&&(l=e.x0,e.x0=e.y0,e.y0=l,l=e.x1,e.x1=e.y1,e.y1=l),A.flipX&&(l=e.x0,e.x0=k[0]-e.x1,e.x1=k[0]-l),A.flipY&&(l=e.y0,e.y0=k[1]-e.y1,e.y1=k[1]-l);var T=e.children;if(T)for(var b=0;b<T.length;b++)z(T[b],k,A)}},70954:function(Q,z,e){"use strict";Q.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function(Q){"use strict";Q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(Q,z,e){"use strict";var k=e(71828),A=e(55479);Q.exports=function(l,T){function b(d,s){return k.coerce(l,T,A,d,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},37210:function(Q,z,e){"use strict";var k=e(674),A=e(14102);Q.exports=function(l,T,b){var d,s=b.flipX,t=b.flipY,o="dice-slice"===b.packing,r=b.pad[t?"bottom":"top"],n=b.pad[s?"right":"left"],a=b.pad[s?"left":"right"],i=b.pad[t?"top":"bottom"];o&&(d=n,n=r,r=d,d=a,a=i,i=d);var c=k.treemap().tile(function(h,f){switch(h){case"squarify":return k.treemapSquarify.ratio(f);case"binary":return k.treemapBinary;case"dice":return k.treemapDice;case"slice":return k.treemapSlice;default:return k.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(i).size(o?[T[1],T[0]]:T)(l);return(o||s||t)&&A(c,T,{swapXY:o,flipX:s,flipY:t}),c}},5893:function(Q,z,e){"use strict";var k=e(80694),A=e(52583);Q.exports=function(l,T,b,d){return k(l,T,b,d,{type:"treemap",drawDescendants:A})}},46650:function(Q,z,e){"use strict";var k=e(39898),A=e(81684).sX,l=e(2791),T=e(71828),b=e(97313).TEXTPAD,d=e(17295).toMoveInsideBar,s=e(72597).recordMinTextSize,t=e(43473),o=e(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}Q.exports=function(n,a,i,c,h){var f=n._fullLayout,x=a[0],v=x.trace,g="icicle"===v.type,y=x.hierarchy,p=l.findEntryWithLevel(y,v.level),m=k.select(i),w=m.selectAll("g.pathbar"),u=m.selectAll("g.slice");if(!p)return w.remove(),void u.remove();var S=l.isHierarchyRoot(p),_=!f.uniformtext.mode&&l.hasTransition(c),E=l.getMaxDepth(v),L=f._size,C=v.domain,P=L.w*(C.x[1]-C.x[0]),I=L.h*(C.y[1]-C.y[0]),j=P,R=v.pathbar.thickness,H=v.marker.line.width+t.gapWithPathbar,F=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?I+H:-(R+H):0,U={x0:j,x1:j,y0:F,y1:F+R},B=function(ce,ge,_e){var De=v.tiling.pad,He=function(at){return at-De<=ge.x0},Ve=function(at){return at+De>=ge.x1},nt=function(at){return at-De<=ge.y0},tt=function(at){return at+De>=ge.y1};return ce.x0===ge.x0&&ce.x1===ge.x1&&ce.y0===ge.y0&&ce.y1===ge.y1?{x0:ce.x0,x1:ce.x1,y0:ce.y0,y1:ce.y1}:{x0:He(ce.x0-De)?0:Ve(ce.x0-De)?_e[0]:ce.x0,x1:He(ce.x1+De)?0:Ve(ce.x1+De)?_e[0]:ce.x1,y0:nt(ce.y0-De)?0:tt(ce.y0-De)?_e[1]:ce.y0,y1:nt(ce.y1+De)?0:tt(ce.y1+De)?_e[1]:ce.y1}},N=null,J={},Z={},V=null,W=function(ce,ge){return ge?J[r(ce)]:Z[r(ce)]};x.hasMultipleRoots&&S&&E++,v._maxDepth=E,v._backgroundColor=f.paper_bgcolor,v._entryDepth=p.data.depth,v._atRootLevel=S;var X=-P/2+L.l+L.w*(C.x[1]+C.x[0])/2,K=-I/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),ne=function(ce){return X+ce},re=function(ce){return K+ce},ae=re(0),le=ne(0),pe=function(ce){return le+ce},xe=function(ce){return ae+ce};function ye(ce,ge){return ce+","+ge}var se=pe(0),fe=function(ce){ce.x=Math.max(se,ce.x)},Ee=v.pathbar.edgeshape,de=v[g?"tiling":"marker"].pad,we=function(ce){return-1!==v.textposition.indexOf(ce)},ke=we("top"),Te=we("left"),$=we("right"),oe=we("bottom"),he=function(ce,ge){var _e=ce.x0,De=ce.x1,He=ce.y0,Ve=ce.y1,nt=ce.textBB,tt=ke||ge.isHeader&&!oe?"start":oe?"end":"middle",at=we("right"),dt=we("left")||ge.onPathbar?-1:at?1:0;if(ge.isHeader){if((_e+=(g?de:de.l)-b)>=(De-=(g?de:de.r)-b)){var wt=(_e+De)/2;_e=wt,De=wt}var bt;oe?He<(bt=Ve-(g?de:de.b))&&bt<Ve&&(He=bt):He<(bt=He+(g?de:de.t))&&bt<Ve&&(Ve=bt)}var _t=d(_e,De,He,Ve,nt,{isHorizontal:!1,constrained:!0,angle:0,anchor:tt,leftToRight:dt});return _t.fontSize=ge.fontSize,_t.targetX=ne(_t.targetX),_t.targetY=re(_t.targetY),isNaN(_t.targetX)||isNaN(_t.targetY)?{}:(_e!==De&&He!==Ve&&s(v.type,_t,f),{scale:_t.scale,rotate:_t.rotate,textX:_t.textX,textY:_t.textY,anchorX:_t.anchorX,anchorY:_t.anchorY,targetX:_t.targetX,targetY:_t.targetY})},me=function(ce,ge){for(var _e,De=0,He=ce;!_e&&De<E;)De++,(He=He.parent)?_e=W(He,ge):De=E;return _e||{}},Me=function(ce,ge,_e,De,He){var Ve,nt=W(ce,ge);if(nt)Ve=nt;else if(ge)Ve=U;else if(N)if(ce.parent){var tt=V||_e;tt&&!ge?Ve=B(ce,tt,De):T.extendFlat(Ve={},me(ce,ge))}else Ve=T.extendFlat({},ce),g&&("h"===He.orientation?He.flipX?Ve.x0=ce.x1:Ve.x1=0:He.flipY?Ve.y0=ce.y1:Ve.y1=0);else Ve={};return A(Ve,{x0:ce.x0,x1:ce.x1,y0:ce.y0,y1:ce.y1})},Ie=function(ce,ge,_e,De){var at,wt,bt,He=W(ce,ge),Ve={},nt=(at=ce,wt=_e,bt=De,ge?J[r(y)]||U:at.data.depth-p.data.depth<E?B(at,Z[v.level]||wt,bt):{});T.extendFlat(Ve,{transform:he({x0:nt.x0,x1:nt.x1,y0:nt.y0,y1:nt.y1,textBB:ce.textBB,_text:ce._text},{isHeader:l.isHeader(ce,v)})}),He?Ve=He:ce.parent&&T.extendFlat(Ve,me(ce,ge));var tt=ce.transform;return ce.x0!==ce.x1&&ce.y0!==ce.y1&&s(v.type,tt,f),A(Ve,{transform:{scale:tt.scale,rotate:tt.rotate,textX:tt.textX,textY:tt.textY,anchorX:tt.anchorX,anchorY:tt.anchorY,targetX:tt.targetX,targetY:tt.targetY}})},Pe=function(ce,ge,_e,De,He){var Ve=De[0],nt=De[1];_?ce.exit().transition().each(function(){var tt=k.select(this);tt.select("path.surface").transition().attrTween("d",function(at){var dt=function(wt,bt,_t,Lt){var Ct,Ot=W(wt,bt);if(bt)Ct=U;else{var Ht=W(p,bt);Ct=Ht?B(wt,Ht,Lt):{}}return A(Ot,Ct)}(at,ge,0,[Ve,nt]);return function(wt){return He(dt(wt))}}),tt.select("g.slicetext").attr("opacity",0)}).remove():ce.exit().remove()},ze=function(ce){var ge=ce.transform;return ce.x0!==ce.x1&&ce.y0!==ce.y1&&s(v.type,ge,f),T.getTextTransform({textX:ge.textX,textY:ge.textY,anchorX:ge.anchorX,anchorY:ge.anchorY,targetX:ge.targetX,targetY:ge.targetY,scale:ge.scale,rotate:ge.rotate})};_&&(w.each(function(ce){J[r(ce)]={x0:ce.x0,x1:ce.x1,y0:ce.y0,y1:ce.y1},ce.transform&&(J[r(ce)].transform={textX:ce.transform.textX,textY:ce.transform.textY,anchorX:ce.transform.anchorX,anchorY:ce.transform.anchorY,targetX:ce.transform.targetX,targetY:ce.transform.targetY,scale:ce.transform.scale,rotate:ce.transform.rotate})}),u.each(function(ce){Z[r(ce)]={x0:ce.x0,x1:ce.x1,y0:ce.y0,y1:ce.y1},ce.transform&&(Z[r(ce)].transform={textX:ce.transform.textX,textY:ce.transform.textY,anchorX:ce.transform.anchorX,anchorY:ce.transform.anchorY,targetX:ce.transform.targetX,targetY:ce.transform.targetY,scale:ce.transform.scale,rotate:ce.transform.rotate}),!N&&l.isEntry(ce)&&(N=ce)})),V=h(n,a,p,u,{width:P,height:I,viewX:ne,viewY:re,pathSlice:function(ce){var ge=ne(ce.x0),_e=ne(ce.x1),De=re(ce.y0),He=re(ce.y1),Ve=_e-ge,nt=He-De;if(!Ve||!nt)return"";var at=Math.min(v.marker.cornerradius||0,Ve/2,nt/2);at&&ce.data&&ce.data.data&&ce.data.data.label&&(ke&&(at=Math.min(at,de.t)),Te&&(at=Math.min(at,de.l)),$&&(at=Math.min(at,de.r)),oe&&(at=Math.min(at,de.b)));var dt=function(wt,bt){return at?"a"+ye(at,at)+" 0 0 1 "+ye(wt,bt):""};return"M"+ye(ge,De+at)+dt(at,-at)+"L"+ye(_e-at,De)+dt(at,at)+"L"+ye(_e,He-at)+dt(-at,at)+"L"+ye(ge+at,He)+dt(-at,-at)+"Z"},toMoveInsideSlice:he,prevEntry:N,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Ie,handleSlicesExit:Pe,hasTransition:_,strTransform:ze}),v.pathbar.visible?o(n,a,p,w,{barDifY:F,width:j,height:R,viewX:pe,viewY:xe,pathSlice:function(ce){var ge=pe(Math.max(Math.min(ce.x0,ce.x0),0)),_e=pe(Math.min(Math.max(ce.x1,ce.x1),j)),De=xe(ce.y0),He=xe(ce.y1),Ve=R/2,nt={},tt={};nt.x=ge,tt.x=_e,nt.y=tt.y=(De+He)/2;var at={x:ge,y:De},dt={x:_e,y:De},wt={x:_e,y:He},bt={x:ge,y:He};return">"===Ee?(at.x-=Ve,dt.x-=Ve,wt.x-=Ve,bt.x-=Ve):"/"===Ee?(wt.x-=Ve,bt.x-=Ve,nt.x-=Ve/2,tt.x-=Ve/2):"\\"===Ee?(at.x-=Ve,dt.x-=Ve,nt.x-=Ve/2,tt.x-=Ve/2):"<"===Ee&&(nt.x-=Ve,tt.x-=Ve),fe(at),fe(bt),fe(nt),fe(dt),fe(wt),fe(tt),"M"+ye(at.x,at.y)+"L"+ye(dt.x,dt.y)+"L"+ye(tt.x,tt.y)+"L"+ye(wt.x,wt.y)+"L"+ye(bt.x,bt.y)+"L"+ye(nt.x,nt.y)+"Z"},toMoveInsideSlice:he,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Ie,handleSlicesExit:Pe,hasTransition:_,strTransform:ze}):w.remove()}},96362:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(71828),T=e(2791),b=e(72597).resizeText;function d(s,t,o,r){var n,a,i=(r||{}).hovered,c=t.data.data,h=c.i,f=c.color,x=T.isHierarchyRoot(t),v=1;if(i)n=o._hovered.marker.line.color,a=o._hovered.marker.line.width;else if(x&&f===o.root.color)v=100,n="rgba(0,0,0,0)",a=0;else if(n=l.castOption(o,h,"marker.line.color")||A.defaultLine,a=l.castOption(o,h,"marker.line.width")||0,!o._hasColorscale&&!t.onPathbar){var g=o.marker.depthfade;if(g){var y,p=A.combine(A.addOpacity(o._backgroundColor,.75),f);if(!0===g){var m=T.getMaxDepth(o);y=isFinite(m)?T.isLeaf(t)?0:o._maxVisibleLayers-(t.data.depth-o._entryDepth):t.data.height+1}else y=t.data.depth-o._entryDepth,o._atRootLevel||y++;if(y>0)for(var w=0;w<y;w++)f=A.combine(A.addOpacity(p,.5*w/y),f)}}s.style("stroke-width",a).call(A.fill,f).call(A.stroke,n).style("opacity",v)}Q.exports={style:function(s){var t=s._fullLayout._treemaplayer.selectAll(".trace");b(s,t,"treemap"),t.each(function(o){var r=k.select(this),n=o[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){k.select(this).call(d,a,n,{hovered:!1})})})},styleOne:d}},68875:function(Q,z,e){"use strict";var k=e(53522),A=e(1426).extendFlat,l=e(12663).axisHoverFormat;Q.exports={y:k.y,x:k.x,x0:k.x0,y0:k.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:A({},k.name,{}),orientation:A({},k.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:k.fillcolor,points:A({},k.boxpoints,{}),jitter:A({},k.jitter,{}),pointpos:A({},k.pointpos,{}),width:A({},k.width,{}),marker:k.marker,text:k.text,hovertext:k.hovertext,hovertemplate:k.hovertemplate,quartilemethod:k.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:k.selected,unselected:k.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(48518),T=e(60168),b=e(50606).BADNUM;function d(t,o,r){var n=o.max-o.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var c,a=r.length,i=k.stdev(r,a-1,o.mean);return Math.max((c=a,1.059*Math.min(i,(o.q3-o.q1)/1.349)*Math.pow(c,-.2)),n/100)}function s(t,o,r,n){var a,i=t.spanmode,c=t.span||[],f=[o.min-2*n,o.max+2*n];function x(g){var y=c[g],p="multicategory"===r.type?r.r2c(y):r.d2c(y,0,t[o.valLetter+"calendar"]);return p===b?f[g]:p}var v={type:"linear",range:a="soft"===i?f:"hard"===i?[o.min,o.max]:[x(0),x(1)]};return A.setConvert(v),v.cleanRange(),a}Q.exports=function(t,o){var r=l(t,o);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=A.getFromId(t,o["h"===o.orientation?"xaxis":"yaxis"]),i=1/0,c=-1/0,h=0,f=0,x=0;x<r.length;x++){var v=r[x],g=v.pts.map(T.extractVal),y=v.bandwidth=d(o,v,g),p=v.span=s(o,v,a,y);if(v.min===v.max&&0===y)p=v.span=[v.min,v.max],v.density=[{v:1,t:p[0]}],v.bandwidth=y,h=Math.max(h,1);else{var m=p[1]-p[0],w=Math.ceil(m/(y/3)),u=m/w;if(!isFinite(u)||!isFinite(w))return k.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(v,o,g);v.density=new Array(w);for(var _=0,E=p[0];E<p[1]+u/2;_++,E+=u){var L=S(E);v.density[_]={v:L,t:E},h=Math.max(h,L)}}f=Math.max(f,g.length),i=Math.min(i,p[0]),c=Math.max(c,p[1])}var C=A.findExtremes(a,[i,c],{padded:!0});if(o._extremes[a._id]=C,o.width)r[0].t.maxKDE=h;else{var P=n._violinScaleGroupStats,I=o.scalegroup,j=P[I];j?(j.maxKDE=Math.max(j.maxKDE,h),j.maxCount=Math.max(j.maxCount,f)):P[I]={maxKDE:h,maxCount:f}}return r[0].t.labels.kde=k._(t,"kde:"),r}},86403:function(Q,z,e){"use strict";var k=e(37188).setPositionOffset,A=["v","h"];Q.exports=function(l,T){for(var b=l.calcdata,d=T.xaxis,s=T.yaxis,t=0;t<A.length;t++){for(var o=A[t],r="h"===o?s:d,n=[],a=0;a<b.length;a++){var i=b[a],h=i[0].trace;!0!==h.visible||"violin"!==h.type||i[0].t.empty||h.orientation!==o||h.xaxis!==d._id||h.yaxis!==s._id||n.push(a)}k("violin",l,n,r)}}},15899:function(Q,z,e){"use strict";var k=e(71828),A=e(7901),l=e(36411),T=e(68875);Q.exports=function(b,d,s,t){function o(m,w){return k.coerce(b,d,T,m,w)}function r(m,w){return k.coerce2(b,d,T,m,w)}if(l.handleSampleDefaults(b,d,o,t),!1!==d.visible){o("bandwidth"),o("side"),o("width")||(o("scalegroup",d.name),o("scalemode"));var n,a=o("span");Array.isArray(a)&&(n="manual"),o("spanmode",n);var i=o("line.color",(b.marker||{}).color||s),c=o("line.width"),h=o("fillcolor",A.addOpacity(d.line.color,.5));l.handlePointsDefaults(b,d,o,{prefix:""});var f=r("box.width"),x=r("box.fillcolor",h),v=r("box.line.color",i),g=r("box.line.width",c);o("box.visible",Boolean(f||x||v||g))||(d.box={visible:!1});var y=r("meanline.color",i),p=r("meanline.width",c);o("meanline.visible",Boolean(y||p))||(d.meanline={visible:!1}),o("quartilemethod")}}},60168:function(Q,z,e){"use strict";var k=e(71828),A=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};z.makeKDE=function(l,T,b){var d=b.length,s=A,t=l.bandwidth,o=1/(d*t);return function(r){for(var n=0,a=0;a<d;a++)n+=s((r-b[a])/t);return o*n}},z.getPositionOnKdePath=function(l,T,b){var d,s;"h"===T.orientation?(d="y",s="x"):(d="x",s="y");var t=k.findPointOnPath(l.path,b,s,{pathLength:l.pathLength}),o=l.posCenterPx,r=t[d];return[r,"both"===T.side?2*o-r:o]},z.getKdeValue=function(l,T,b){var d=l.pts.map(z.extractVal);return z.makeKDE(l,T,d)(b)/l.posDensityScale},z.extractVal=function(l){return l.v}},57634:function(Q,z,e){"use strict";var k=e(7901),A=e(71828),l=e(89298),T=e(41868),b=e(60168);Q.exports=function(d,s,t,o,r){r||(r={});var n,a,i=r.hoverLayer,c=d.cd,h=c[0].trace,f=h.hoveron,x=-1!==f.indexOf("violins"),v=-1!==f.indexOf("kde"),g=[];if(x||v){var y=T.hoverOnBoxes(d,s,t,o);if(v&&y.length>0){var p,m,w,u,S,_=d.xa,E=d.ya;"h"===h.orientation?(S=s,p="y",w=E,m="x",u=_):(S=t,p="x",w=_,m="y",u=E);var L=c[d.index];if(S>=L.span[0]&&S<=L.span[1]){var C=A.extendFlat({},d),P=u.c2p(S,!0),I=b.getKdeValue(L,h,S),j=b.getPositionOnKdePath(L,h,P),R=w._offset,H=w._length;C[p+"0"]=j[0],C[p+"1"]=j[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+l.hoverLabelText(u,S,h[m+"hoverformat"])+", "+c[0].t.labels.kde+" "+I.toFixed(3);for(var F=0,U=0;U<y.length;U++)if("med"===y[U].attr){F=U;break}C.spikeDistance=y[F].spikeDistance;var B=p+"Spike";C[B]=y[F][B],y[F].spikeDistance=void 0,y[F][B]=void 0,C.hovertemplate=!1,g.push(C),(a={})[p+"1"]=A.constrain(R+j[0],R,R+H),a[p+"2"]=A.constrain(R+j[1],R,R+H),a[m+"1"]=a[m+"2"]=u._offset+P}}x&&(g=g.concat(y))}-1!==f.indexOf("points")&&(n=T.hoverOnPoints(d,s,t));var N=i.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return N.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),N.exit().remove(),N.attr(a).call(k.stroke,d.color),"closest"===o?n?[n]:g:(n&&g.push(n),g)}},47462:function(Q,z,e){"use strict";Q.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(Q,z,e){"use strict";var k=e(40094),A=e(71828).extendFlat;Q.exports={violinmode:A({},k.boxmode,{}),violingap:A({},k.boxgap,{}),violingroupgap:A({},k.boxgroupgap,{})}},33598:function(Q,z,e){"use strict";var k=e(71828),A=e(9228),l=e(4199);Q.exports=function(T,b,d){l._supply(T,b,d,function(s,t){return k.coerce(T,b,A,s,t)},"violin")}},28443:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(86047),b=e(34621),d=e(60168);Q.exports=function(s,t,o,r){var n=s._context.staticPlot,a=s._fullLayout,i=t.xaxis,c=t.yaxis;function h(f,x){var v=b(f,{xaxis:i,yaxis:c,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(v[0],1)}A.makeTraceGroups(r,o,"trace violins").each(function(f){var x=k.select(this),v=f[0],g=v.t,y=v.trace;if(!0!==y.visible||g.empty)x.remove();else{var p=g.bPos,m=g.bdPos,w=t[g.valLetter+"axis"],u=t[g.posLetter+"axis"],S="both"===y.side,_=S||"positive"===y.side,E=S||"negative"===y.side,L=x.selectAll("path.violin").data(A.identity);L.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(U){var B,N,J,Z,V,W,X,K,ne=k.select(this),re=U.density,ae=re.length,le=u.c2l(U.pos+p,!0),pe=u.l2p(le);if(y.width)B=g.maxKDE/m;else{var xe=a._violinScaleGroupStats[y.scalegroup];B="count"===y.scalemode?xe.maxKDE/m*(xe.maxCount/U.pts.length):xe.maxKDE/m}if(_){for(X=new Array(ae),V=0;V<ae;V++)(K=X[V]={})[g.posLetter]=le+re[V].v/B,K[g.valLetter]=w.c2l(re[V].t,!0);N=h(X,y)}if(E){for(X=new Array(ae),W=0,V=ae-1;W<ae;W++,V--)(K=X[W]={})[g.posLetter]=le-re[V].v/B,K[g.valLetter]=w.c2l(re[V].t,!0);J=h(X,y)}if(S)Z=N+"L"+J.substr(1)+"Z";else{var ye=[pe,w.c2p(re[0].t)],se=[pe,w.c2p(re[ae-1].t)];"h"===y.orientation&&(ye.reverse(),se.reverse()),Z=_?"M"+ye+"L"+N.substr(1)+"L"+se:"M"+se+"L"+J.substr(1)+"L"+ye}ne.attr("d",Z),U.posCenterPx=pe,U.posDensityScale=B*m,U.path=ne.node(),U.pathLength=U.path.getTotalLength()/(S?2:1)});var C,P,I,j=y.box,R=j.width,H=(j.line||{}).width;S?(C=m*R,P=0):_?(C=[0,m*R/2],P=H*{x:1,y:-1}[g.posLetter]):(C=[m*R/2,0],P=H*{x:-1,y:1}[g.posLetter]),T.plotBoxAndWhiskers(x,{pos:u,val:w},y,{bPos:p,bdPos:C,bPosPxOffset:P}),T.plotBoxMean(x,{pos:u,val:w},y,{bPos:p,bdPos:C,bPosPxOffset:P}),!y.box.visible&&y.meanline.visible&&(I=A.identity);var F=x.selectAll("path.meanline").data(I||[]);F.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),F.exit().remove(),F.each(function(U){var B=w.c2p(U.mean,!0),N=d.getPositionOnKdePath(U,y,B);k.select(this).attr("d","h"===y.orientation?"M"+B+","+N[0]+"V"+N[1]:"M"+N[0]+","+B+"H"+N[1])}),T.plotPoints(x,{x:i,y:c},y,g)}})}},31847:function(Q,z,e){"use strict";var k=e(39898),A=e(7901),l=e(16296).stylePoints;Q.exports=function(T){var b=k.select(T).selectAll("g.trace.violins");b.style("opacity",function(d){return d[0].trace.opacity}),b.each(function(d){var s=d[0].trace,t=k.select(this),o=s.box||{},r=o.line||{},n=s.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(A.stroke,s.line.color).call(A.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(A.stroke,r.color).call(A.fill,o.fillcolor);var i={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(i).call(A.stroke,n.color),t.selectAll("path.meanline").style(i).call(A.stroke,n.color),l(t,s,T)})}},16336:function(Q,z,e){"use strict";var k=e(50693),A=e(16249),l=e(54532),T=e(9012),b=e(1426).extendFlat,d=e(30962).overrideAll,s=Q.exports=d(b({x:A.x,y:A.y,z:A.z,value:A.value,isomin:A.isomin,isomax:A.isomax,surface:A.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:A.slices,caps:A.caps,text:A.text,hovertext:A.hovertext,xhoverformat:A.xhoverformat,yhoverformat:A.yhoverformat,zhoverformat:A.zhoverformat,valuehoverformat:A.valuehoverformat,hovertemplate:A.hovertemplate},k("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:A.colorbar,opacity:A.opacity,opacityscale:l.opacityscale,lightposition:A.lightposition,lighting:A.lighting,flatshading:A.flatshading,contour:A.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function(Q,z,e){"use strict";var k=e(9330).gl_mesh3d,A=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,b=e(90060),d=e(22674).findNearestOnAxis,s=e(22674).generateIsoMeshes;function t(r,n,a){this.scene=r,this.uid=a,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,i=this.data._meshY[n],c=this.data._meshZ[n],h=this.data._Ys.length,f=this.data._Zs.length,x=d(this.data._meshX[n],this.data._Xs).id,v=d(i,this.data._Ys).id,g=d(c,this.data._Zs).id,y=r.index=g+f*v+f*h*x;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&void 0!==p[y]?r.textLabel=p[y]:p&&(r.textLabel=p),!0}},o.update=function(r){var n=this.scene,a=n.fullSceneLayout;function i(f,x,v,g){return x.map(function(y){return f.d2l(y,0,g)*v})}this.data=s(r);var c={positions:b(i(a.xaxis,r._meshX,n.dataScale[0],r.xcalendar),i(a.yaxis,r._meshY,n.dataScale[1],r.ycalendar),i(a.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:b(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},h=T(r);c.vertexIntensity=r._meshIntensity,c.vertexIntensityBounds=[h.min,h.max],c.colormap=A(r),this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(r,n){var i=k({gl:r.glplot.gl}),c=new t(r,i,n.uid);return i._trace=c,c.update(n),r.glplot.add(i),c}},47651:function(Q,z,e){"use strict";var k=e(71828),A=e(16336),l=e(82738).supplyIsoDefaults,T=e(91831).opacityscaleDefaults;Q.exports=function(b,d,s,t){function o(r,n){return k.coerce(b,d,A,r,n)}l(b,d,s,t,o),T(b,d,t,o)}},17659:function(Q,z,e){"use strict";Q.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(Q,z,e){"use strict";var k=e(1486),A=e(82196).line,l=e(9012),T=e(12663).axisHoverFormat,b=e(5386).f,d=e(5386).s,s=e(48334),t=e(1426).extendFlat,o=e(7901);function r(n){return{marker:{color:t({},k.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},k.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},k.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:k.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:d({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:k.text,textposition:k.textposition,insidetextanchor:k.insidetextanchor,textangle:k.textangle,textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:k.orientation,offset:k.offset,width:k.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},A.color,{dflt:o.defaultLine}),width:t({},A.width,{editType:"plot"}),dash:A.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},52752:function(Q,z,e){"use strict";var k=e(89298),A=e(42973),l=e(71828).mergeArray,T=e(66279),b=e(50606).BADNUM;function d(t){return"a"===t||"absolute"===t}function s(t){return"t"===t||"total"===t}Q.exports=function(t,o){var r,n,a,i,c,h,f=k.getFromId(t,o.xaxis||"x"),x=k.getFromId(t,o.yaxis||"y");"h"===o.orientation?(r=f.makeCalcdata(o,"x"),a=x.makeCalcdata(o,"y"),i=A(o,x,"y",a),c=!!o.yperiodalignment,h="y"):(r=x.makeCalcdata(o,"y"),a=f.makeCalcdata(o,"x"),i=A(o,f,"x",a),c=!!o.xperiodalignment,h="x"),n=i.vals;for(var v,g=Math.min(n.length,r.length),y=new Array(g),p=0,m=!1,w=0;w<g;w++){var u=r[w]||0,S=!1;(r[w]!==b||s(o.measure[w])||d(o.measure[w]))&&w+1<g&&(r[w+1]!==b||s(o.measure[w+1])||d(o.measure[w+1]))&&(S=!0);var _=y[w]={i:w,p:n[w],s:u,rawS:u,cNext:S};d(o.measure[w])?(p=_.s,_.isSum=!0,_.dir="totals",_.s=p):s(o.measure[w])?(_.isSum=!0,_.dir="totals",_.s=p):(_.isSum=!1,_.dir=_.rawS<0?"decreasing":"increasing",_.s=p+(v=_.s),p+=v),"totals"===_.dir&&(m=!0),c&&(y[w].orig_p=a[w],y[w][h+"End"]=i.ends[w],y[w][h+"Start"]=i.starts[w]),o.ids&&(_.id=String(o.ids[w])),_.v=(o.base||0)+p}return y.length&&(y[0].hasTotals=m),l(o.text,y,"tx"),l(o.hovertext,y,"htx"),T(y,o),y}},48334:function(Q){"use strict";Q.exports={eventDataKeys:["initial","delta","final"]}},70766:function(Q,z,e){"use strict";var k=e(11661).setGroupPositions;Q.exports=function(A,l){var T,b,d=A._fullLayout,s=A._fullData,t=A.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(b=0;b<s.length;b++){var c=s[b];!0===c.visible&&c.xaxis===o._id&&c.yaxis===r._id&&"waterfall"===c.type&&(T=t[b],"h"===c.orientation?i.push(T):a.push(T),n.push(T))}var h={mode:d.waterfallmode,norm:d.waterfallnorm,gap:d.waterfallgap,groupgap:d.waterfallgroupgap};for(k(A,o,r,a,h),k(A,r,o,i,h),b=0;b<n.length;b++){T=n[b];for(var f=0;f<T.length;f++){var x=T[f];!1===x.isSum&&(x.s0+=0===f?0:T[f-1].s),f+1<T.length&&(T[f].nextP0=T[f+1].p0,T[f].nextS0=T[f+1].s0)}}}},83266:function(Q,z,e){"use strict";var k=e(71828),A=e(26125),l=e(90769).handleText,T=e(67513),b=e(73927),d=e(43037),s=e(7901),t=e(22372),o=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,i,c){a(i+".marker.color",c),a(i+".marker.line.color",s.defaultLine),a(i+".marker.line.width")}Q.exports={supplyDefaults:function(a,i,c,h){function f(v,g){return k.coerce(a,i,d,v,g)}if(T(a,i,h,f)){b(a,i,h,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",i.x&&!i.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var x=f("textposition");l(a,i,h,f,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==i.textposition&&(f("texttemplate"),i.texttemplate||f("textinfo")),n(f,"increasing",o),n(f,"decreasing",r),n(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(a,i){var c,h;function f(v){return k.coerce(h._input,h,d,v)}if("group"===i.waterfallmode)for(var x=0;x<a.length;x++)c=(h=a[x])._input,A(c,h,i,f)}}},58593:function(Q){"use strict";Q.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"initial"in e&&(z.initial=e.initial),"delta"in e&&(z.delta=e.delta),"final"in e&&(z.final=e.final),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},61326:function(Q,z,e){"use strict";var k=e(89298).hoverLabelText,A=e(7901).opacity,l=e(95423).hoverOnBars,T=e(22372),b=T.INCREASING.SYMBOL,d=T.DECREASING.SYMBOL;Q.exports=function(s,t,o,r,n){var C,P,I,j,a=l(s,t,o,r,n);if(a){var i=a.cd,c=i[0].trace,h="h"===c.orientation,f=h?"x":"y",x=h?s.xa:s.ya,v=i[a.index],g=v.isSum?v.b+v.s:v.rawS;if(!v.isSum){a.initial=v.b+v.s-g,a.delta=g,a.final=a.initial+a.delta;var y=_(Math.abs(a.delta));a.deltaLabel=g<0?"("+y+")":y,a.finalLabel=_(a.final),a.initialLabel=_(a.initial)}var p=v.hi||c.hoverinfo,m=[];if(p&&"none"!==p&&"skip"!==p){var w="all"===p,u=p.split("+"),S=function(E){return w||-1!==u.indexOf(E)};v.isSum||(!S("final")||S(h?"x":"y")||m.push(a.finalLabel),S("delta")&&m.push(g<0?a.deltaLabel+" "+d:a.deltaLabel+" "+b),S("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=(I=(C=c[v.dir].marker).line.color,j=C.line.width,A(P=C.color)?P:A(I)&&j?I:void 0),[a]}function _(E){return k(x,E,c[f+"hoverformat"])}}},19990:function(Q,z,e){"use strict";Q.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(Q){"use strict";Q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(Q,z,e){"use strict";var k=e(71828),A=e(13494);Q.exports=function(l,T,b){var d=!1;function s(r,n){return k.coerce(l,T,A,r,n)}for(var t=0;t<b.length;t++){var o=b[t];if(o.visible&&"waterfall"===o.type){d=!0;break}}d&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function(Q,z,e){"use strict";var k=e(39898),A=e(71828),l=e(91424),T=e(50606).BADNUM,b=e(17295),d=e(72597).clearMinTextSize;Q.exports=function(s,t,o,r){var a,i,f,x,n=s._fullLayout;d("waterfall",n),b.plot(s,t,o,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),a=s,f=(i=t).xaxis,x=i.yaxis,A.makeTraceGroups(r,o,"trace bars").each(function(v){var g=k.select(this),y=v[0].trace,p=A.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible){var m="h"===y.orientation,w=y.connector.mode,u=p.selectAll("g.line").data(A.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=(R=f,H=x,B=[],J=(F=m)?H:R,(U=[])[0]=(N=F?R:H).c2p((j=_).s0,!0),B[0]=J.c2p(j.p0,!0),U[1]=N.c2p(j.s1,!0),B[1]=J.c2p(j.p1,!0),U[2]=N.c2p(j.nextS0,!0),B[2]=J.c2p(j.nextP0,!0),F?[U,B]:[B,U]),C=L[0],P=L[1],I="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&("spanning"===w&&!_.isSum&&E>0&&(I+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),"between"!==w&&(_.isSum||E<S-1)&&(I+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(I+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),""===I&&(I="M0,0Z"),A.ensureSingle(k.select(this),"path").attr("d",I).call(l.setClipUrl,i.layerClipId,a)}var j,R,H,F,U,B,N,J})}else p.remove()})}},55750:function(Q,z,e){"use strict";var k=e(39898),A=e(91424),l=e(7901),T=e(37822).DESELECTDIM,b=e(16688),d=e(72597).resizeText,s=b.styleTextPoints;Q.exports={style:function(t,o,r){var n=r||k.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");d(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=k.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c[h.dir].marker;k.select(this).call(l.fill,f.color).call(l.stroke,f.line.color).call(A.dashLine,f.line.dash,f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,t),i.selectAll(".lines").each(function(){var h=c.connector.line;A.lineGroupStyle(k.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},82887:function(Q,z,e){"use strict";var k=e(89298),A=e(71828),l=e(86281),T=e(79344).p,b=e(50606).BADNUM;z.moduleType="transform",z.name="aggregate";var d=z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=d.aggregations;function t(a,i,c,h){if(h.enabled){for(var f=h.target,x=A.nestedProperty(i,f),v=x.get(),g=function(m,w){var S=w.d2c,_=w.c2d;switch(m.func){case"count":return o;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==b&&(C+=I)}return _(C)};case"avg":return function(E,L){for(var C=0,P=0,I=0;I<L.length;I++){var j=S(E[L[I]]);j!==b&&(C+=j,P++)}return P?_(C/P):b};case"min":return function(E,L){for(var C=1/0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==b&&(C=Math.min(C,I))}return C===1/0?b:_(C)};case"max":return function(E,L){for(var C=-1/0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==b&&(C=Math.max(C,I))}return C===-1/0?b:_(C)};case"range":return function(E,L){for(var C=1/0,P=-1/0,I=0;I<L.length;I++){var j=S(E[L[I]]);j!==b&&(C=Math.min(C,j),P=Math.max(P,j))}return P===-1/0||C===1/0?b:_(P-C)};case"change":return function(E,L){var C=S(E[L[0]]),P=S(E[L[L.length-1]]);return C===b||P===b?b:_(P-C)};case"median":return function(E,L){for(var C=[],P=0;P<L.length;P++){var I=S(E[L[P]]);I!==b&&C.push(I)}if(!C.length)return b;C.sort(A.sorterAsc);var j=(C.length-1)/2;return _((C[Math.floor(j)]+C[Math.ceil(j)])/2)};case"mode":return function(E,L){for(var C={},P=0,I=b,j=0;j<L.length;j++){var R=S(E[L[j]]);if(R!==b){var H=C[R]=(C[R]||0)+1;H>P&&(P=H,I=R)}}return P?_(I):b};case"rms":return function(E,L){for(var C=0,P=0,I=0;I<L.length;I++){var j=S(E[L[I]]);j!==b&&(C+=j*j,P++)}return P?_(Math.sqrt(C/P)):b};case"stddev":return function(E,L){var C,P=0,I=0,j=1,R=b;for(C=0;C<L.length&&R===b;C++)R=S(E[L[C]]);if(R===b)return b;for(;C<L.length;C++){var H=S(E[L[C]]);if(H!==b){var F=H-R;P+=F,I+=F*F,j++}}var U="sample"===m.funcmode?j-1:j;return U?Math.sqrt((I-P*P/j)/U):0}}}(h,k.getDataConversions(a,i,f,v)),y=new Array(c.length),p=0;p<c.length;p++)y[p]=g(v,c[p]);x.set(y),"count"===h.func&&A.pushUnique(i._arrayAttrs,f)}}function o(a,i){return i.length}function r(a,i){return a[i[0]]}function n(a,i){return a[i[i.length-1]]}z.supplyDefaults=function(a,i){var c,h={};function f(_,E){return A.coerce(a,h,d,_,E)}if(!f("enabled"))return h;var x=l.findArrayAttributes(i),v={};for(c=0;c<x.length;c++)v[x[c]]=1;var g=f("groups");if(!Array.isArray(g)){if(!v[g])return h.enabled=!1,h;v[g]=0}var y,p=a.aggregations||[],m=h.aggregations=new Array(p.length);function w(_,E){return A.coerce(p[c],y,s,_,E)}for(c=0;c<p.length;c++){y={_index:c};var u=w("target"),S=w("func");w("enabled")&&u&&(v[u]||"count"===S&&void 0===v[u])?("stddev"===S&&w("funcmode"),v[u]=0,m[c]=y):m[c]={enabled:!1,_index:c}}for(c=0;c<x.length;c++)v[x[c]]&&m.push({target:x[c],func:s.func.dflt,enabled:!0,_index:-1});return h},z.calcTransform=function(a,i,c){if(c.enabled){var h=c.groups,f=A.getTargetArray(i,{target:h});if(f){var x,v,g,p={},m={},w=[],u=T(i.transforms,c),S=f.length;for(i._length&&(S=Math.min(S,i._length)),x=0;x<S;x++)void 0===(g=p[v=f[x]])?(p[v]=w.length,w.push([x]),m[p[v]]=u(x)):(w[g].push(x),m[p[v]]=(m[p[v]]||[]).concat(u(x)));c._indexToPoints=m;var _=c.aggregations;for(x=0;x<_.length;x++)t(a,i,w,_[x]);"string"==typeof h&&t(a,i,w,{target:h,func:"first",enabled:!0}),i._length=w.length}}}},14382:function(Q,z,e){"use strict";var k=e(71828),A=e(73972),l=e(89298),T=e(79344).p,b=e(74808),d=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;z.moduleType="transform",z.name="filter",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},z.supplyDefaults=function(o){var r={};function n(c,h){return k.coerce(o,r,z.attributes,c,h)}if(n("enabled")){var a=n("target");if(k.isArrayOrTypedArray(a)&&0===a.length)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var i=A.getComponentMethod("calendars","handleDefaults");i(o,r,"valuecalendar",null),i(o,r,"targetcalendar",null)}return r},z.calcTransform=function(o,r,n){if(n.enabled){var a=k.getTargetArray(r,n);if(a){var i=n.target,c=a.length;r._length&&(c=Math.min(c,r._length));var h=n.targetcalendar,f=r._arrayAttrs,x=n.preservegaps;if("string"==typeof i){var v=k.nestedProperty(r,i+"calendar").get();v&&(h=v)}var g,y,p=function(L,C,P){var I=L.operation,j=L.value,R=Array.isArray(j);function H(N){return-1!==N.indexOf(I)}var F,U=function(N){return C(N,0,L.valuecalendar)},B=function(N){return C(N,0,P)};switch(H(d)?F=U(R?j[0]:j):H(s)?F=R?[U(j[0]),U(j[1])]:[U(j),U(j)]:H(t)&&(F=R?j.map(U):[U(j)]),I){case"=":return function(N){return B(N)===F};case"!=":return function(N){return B(N)!==F};case"<":return function(N){return B(N)<F};case"<=":return function(N){return B(N)<=F};case">":return function(N){return B(N)>F};case">=":return function(N){return B(N)>=F};case"[]":return function(N){var J=B(N);return J>=F[0]&&J<=F[1]};case"()":return function(N){var J=B(N);return J>F[0]&&J<F[1]};case"[)":return function(N){var J=B(N);return J>=F[0]&&J<F[1]};case"(]":return function(N){var J=B(N);return J>F[0]&&J<=F[1]};case"][":return function(N){var J=B(N);return J<=F[0]||J>=F[1]};case")(":return function(N){var J=B(N);return J<F[0]||J>F[1]};case"](":return function(N){var J=B(N);return J<=F[0]||J>F[1]};case")[":return function(N){var J=B(N);return J<F[0]||J>=F[1]};case"{}":return function(N){return-1!==F.indexOf(B(N))};case"}{":return function(N){return-1===F.indexOf(B(N))}}}(n,l.getDataToCoordFunc(o,r,i,a),h),m={},w={},u=0;x?(g=function(L){m[L.astr]=k.extendDeep([],L.get()),L.set(new Array(c))},y=function(L,C){var P=m[L.astr][C];L.get()[C]=P}):(g=function(L){m[L.astr]=k.extendDeep([],L.get()),L.set([])},y=function(L,C){var P=m[L.astr][C];L.get().push(P)}),E(g);for(var S=T(r.transforms,n),_=0;_<c;_++)p(a[_])?(E(y,_),w[u++]=S(_)):x&&u++;n._indexToPoints=w,r._length=u}}function E(L,C){for(var P=0;P<f.length;P++)L(k.nestedProperty(r,f[P]),C)}}},43102:function(Q,z,e){"use strict";var k=e(71828),A=e(86281),l=e(74875),T=e(79344).p;function b(d,s){var t,o,r,n,a,i,c,h,f,x,v=s.transform,g=s.transformIndex,y=d.transforms[g].groups,p=T(d.transforms,v);if(!k.isArrayOrTypedArray(y)||0===y.length)return[d];var m=k.filterUnique(y),w=new Array(m.length),u=y.length,S=A.findArrayAttributes(d),_=v.styles||[],E={};for(t=0;t<_.length;t++)E[_[t].target]=_[t].value;v.styles&&(x=k.keyedContainer(v,"styles","target","value.name"));var L={},C={};for(t=0;t<m.length;t++){L[i=m[t]]=t,C[i]=0,(c=w[t]=k.extendDeepNoArrays({},d))._group=i,c.transforms[g]._indexToPoints={};var P=null;for(x&&(P=x.get(i)),c.name=P||""===P?P:k.templateString(v.nameformat,{trace:d.name,group:i}),h=c.transforms,c.transforms=[],o=0;o<h.length;o++)c.transforms[o]=k.extendDeepNoArrays({},h[o]);for(o=0;o<S.length;o++)k.nestedProperty(c,S[o]).set([])}for(r=0;r<S.length;r++){for(n=S[r],o=0,f=[];o<m.length;o++)f[o]=k.nestedProperty(w[o],n).get();for(a=k.nestedProperty(d,n).get(),o=0;o<u;o++)f[L[y[o]]].push(a[o])}for(o=0;o<u;o++)(c=w[L[y[o]]]).transforms[g]._indexToPoints[C[y[o]]]=p(o),C[y[o]]++;for(t=0;t<m.length;t++)i=m[t],l.clearExpandedTraceDefaultColors(c=w[t]),c=k.extendDeepNoArrays(c,E[i]||{});return w}z.moduleType="transform",z.name="groupby",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},z.supplyDefaults=function(d,s,t){var o,r={};function n(f,x){return k.coerce(d,r,z.attributes,f,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=d.styles,i=r.styles=[];if(a)for(o=0;o<a.length;o++){var c=i[o]={};k.coerce(a[o],i[o],z.attributes.styles,"target");var h=k.coerce(a[o],i[o],z.attributes.styles,"value");k.isPlainObject(h)?c.value=k.extendDeep({},h):h&&delete c.value}return r},z.transform=function(d,s){var t,o,r,n=[];for(o=0;o<d.length;o++)for(t=b(d[o],s),r=0;r<t.length;r++)n.push(t[r]);return n}},79344:function(Q,z){"use strict";z.p=function(e,k){for(var A,l,T=0;T<e.length&&(A=e[T])!==k;T++)A._indexToPoints&&!1!==A.enabled&&(l=A._indexToPoints);return l?function(d){return l[d]}:function(d){return[d]}}},32275:function(Q,z,e){"use strict";var k=e(71828),A=e(89298),l=e(79344).p,T=e(50606).BADNUM;z.moduleType="transform",z.name="sort",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},z.supplyDefaults=function(b){var d={};function s(t,o){return k.coerce(b,d,z.attributes,t,o)}return s("enabled")&&(s("target"),s("order")),d},z.calcTransform=function(b,d,s){if(s.enabled){var t=k.getTargetArray(d,s);if(t){var o=s.target,r=t.length;d._length&&(r=Math.min(r,d._length));var n,a,i=d._arrayAttrs,c=function(y,p,m,w){var u,S=new Array(w),_=new Array(w);for(u=0;u<w;u++)S[u]={v:p[u],i:u};for(S.sort(function(E,L){switch(E.order){case"ascending":return function(C,P){var I=L(C.v),j=L(P.v);return I===T?1:j===T?-1:I-j};case"descending":return function(C,P){var I=L(C.v),j=L(P.v);return I===T?1:j===T?-1:j-I}}}(y,m)),u=0;u<w;u++)_[u]=S[u].i;return _}(s,t,A.getDataToCoordFunc(b,d,o,t),r),h=l(d.transforms,s),f={};for(n=0;n<i.length;n++){var x=k.nestedProperty(d,i[n]),v=x.get(),g=new Array(r);for(a=0;a<r;a++)g[a]=v[c[a]];x.set(g)}for(a=0;a<r;a++)f[a]=h(c[a]);s._indexToPoints=f,d._length=r}}}},11506:function(Q,z){"use strict";z.version="2.18.2"},9330:function(Q,z,e){var k,A=e(90386);k=function(){return function(){var l={7386:function(d,s,t){d.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(d,s,t){"use strict";function n(ce,ge){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,De){return _e.__proto__=De,_e})(ce,ge)}function i(ce){if(void 0===ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function c(ce){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)})(ce)}function h(ce){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge})(ce)}var f=t(3910),x=t(3187),v="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=p,s.h2=50;var g=2147483647;function y(ce){if(ce>g)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var ge=new Uint8Array(ce);return Object.setPrototypeOf(ge,p.prototype),ge}function p(ce,ge,_e){if("number"==typeof ce){if("string"==typeof ge)throw new TypeError('The "string" argument must be of type string. Received type number');return u(ce)}return m(ce,ge,_e)}function m(ce,ge,_e){if("string"==typeof ce)return function(Ve,nt){if("string"==typeof nt&&""!==nt||(nt="utf8"),!p.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);var tt=0|L(Ve,nt),at=y(tt),dt=at.write(Ve,nt);return dt!==tt&&(at=at.slice(0,dt)),at}(ce,ge);if(ArrayBuffer.isView(ce))return function(Ve){if(me(Ve,Uint8Array)){var nt=new Uint8Array(Ve);return _(nt.buffer,nt.byteOffset,nt.byteLength)}return S(Ve)}(ce);if(null==ce)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(ce));if(me(ce,ArrayBuffer)||ce&&me(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(ce,SharedArrayBuffer)||ce&&me(ce.buffer,SharedArrayBuffer)))return _(ce,ge,_e);if("number"==typeof ce)throw new TypeError('The "value" argument must not be of type number. Received type number');var De=ce.valueOf&&ce.valueOf();if(null!=De&&De!==ce)return p.from(De,ge,_e);var He=function(Ve){if(p.isBuffer(Ve)){var nt=0|E(Ve.length),tt=y(nt);return 0===tt.length||Ve.copy(tt,0,0,nt),tt}return void 0!==Ve.length?"number"!=typeof Ve.length||Me(Ve.length)?y(0):S(Ve):"Buffer"===Ve.type&&Array.isArray(Ve.data)?S(Ve.data):void 0}(ce);if(He)return He;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ce[Symbol.toPrimitive])return p.from(ce[Symbol.toPrimitive]("string"),ge,_e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(ce))}function w(ce){if("number"!=typeof ce)throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function u(ce){return w(ce),y(ce<0?0:0|E(ce))}function S(ce){for(var ge=ce.length<0?0:0|E(ce.length),_e=y(ge),De=0;De<ge;De+=1)_e[De]=255&ce[De];return _e}function _(ce,ge,_e){if(ge<0||ce.byteLength<ge)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ge+(_e||0))throw new RangeError('"length" is outside of buffer bounds');var De;return De=void 0===ge&&void 0===_e?new Uint8Array(ce):void 0===_e?new Uint8Array(ce,ge):new Uint8Array(ce,ge,_e),Object.setPrototypeOf(De,p.prototype),De}function E(ce){if(ce>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|ce}function L(ce,ge){if(p.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||me(ce,ArrayBuffer))return ce.byteLength;if("string"!=typeof ce)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+h(ce));var _e=ce.length,De=arguments.length>2&&!0===arguments[2];if(!De&&0===_e)return 0;for(var He=!1;;)switch(ge){case"ascii":case"latin1":case"binary":return _e;case"utf8":case"utf-8":return $(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_e;case"hex":return _e>>>1;case"base64":return oe(ce).length;default:if(He)return De?-1:$(ce).length;ge=(""+ge).toLowerCase(),He=!0}}function C(ce,ge,_e){var De=!1;if((void 0===ge||ge<0)&&(ge=0),ge>this.length||((void 0===_e||_e>this.length)&&(_e=this.length),_e<=0)||(_e>>>=0)<=(ge>>>=0))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return X(this,ge,_e);case"utf8":case"utf-8":return J(this,ge,_e);case"ascii":return V(this,ge,_e);case"latin1":case"binary":return W(this,ge,_e);case"base64":return N(this,ge,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,ge,_e);default:if(De)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),De=!0}}function P(ce,ge,_e){var De=ce[ge];ce[ge]=ce[_e],ce[_e]=De}function I(ce,ge,_e,De,He){if(0===ce.length)return-1;if("string"==typeof _e?(De=_e,_e=0):_e>2147483647?_e=2147483647:_e<-2147483648&&(_e=-2147483648),Me(_e=+_e)&&(_e=He?0:ce.length-1),_e<0&&(_e=ce.length+_e),_e>=ce.length){if(He)return-1;_e=ce.length-1}else if(_e<0){if(!He)return-1;_e=0}if("string"==typeof ge&&(ge=p.from(ge,De)),p.isBuffer(ge))return 0===ge.length?-1:j(ce,ge,_e,De,He);if("number"==typeof ge)return ge&=255,"function"==typeof Uint8Array.prototype.indexOf?He?Uint8Array.prototype.indexOf.call(ce,ge,_e):Uint8Array.prototype.lastIndexOf.call(ce,ge,_e):j(ce,[ge],_e,De,He);throw new TypeError("val must be string, number or Buffer")}function j(ce,ge,_e,De,He){var Ve,nt=1,tt=ce.length,at=ge.length;if(void 0!==De&&("ucs2"===(De=String(De).toLowerCase())||"ucs-2"===De||"utf16le"===De||"utf-16le"===De)){if(ce.length<2||ge.length<2)return-1;nt=2,tt/=2,at/=2,_e/=2}function dt(Lt,Ct){return 1===nt?Lt[Ct]:Lt.readUInt16BE(Ct*nt)}if(He){var wt=-1;for(Ve=_e;Ve<tt;Ve++)if(dt(ce,Ve)===dt(ge,-1===wt?0:Ve-wt)){if(-1===wt&&(wt=Ve),Ve-wt+1===at)return wt*nt}else-1!==wt&&(Ve-=Ve-wt),wt=-1}else for(_e+at>tt&&(_e=tt-at),Ve=_e;Ve>=0;Ve--){for(var bt=!0,_t=0;_t<at;_t++)if(dt(ce,Ve+_t)!==dt(ge,_t)){bt=!1;break}if(bt)return Ve}return-1}function R(ce,ge,_e,De){_e=Number(_e)||0;var He=ce.length-_e;De?(De=Number(De))>He&&(De=He):De=He;var Ve,nt=ge.length;for(De>nt/2&&(De=nt/2),Ve=0;Ve<De;++Ve){var tt=parseInt(ge.substr(2*Ve,2),16);if(Me(tt))return Ve;ce[_e+Ve]=tt}return Ve}function H(ce,ge,_e,De){return he($(ge,ce.length-_e),ce,_e,De)}function F(ce,ge,_e,De){return he(function(He){for(var Ve=[],nt=0;nt<He.length;++nt)Ve.push(255&He.charCodeAt(nt));return Ve}(ge),ce,_e,De)}function U(ce,ge,_e,De){return he(oe(ge),ce,_e,De)}function B(ce,ge,_e,De){return he(function(He,Ve){for(var nt,tt,dt=[],wt=0;wt<He.length&&!((Ve-=2)<0);++wt)tt=(nt=He.charCodeAt(wt))>>8,dt.push(nt%256),dt.push(tt);return dt}(ge,ce.length-_e),ce,_e,De)}function N(ce,ge,_e){return f.fromByteArray(0===ge&&_e===ce.length?ce:ce.slice(ge,_e))}function J(ce,ge,_e){_e=Math.min(ce.length,_e);for(var De=[],He=ge;He<_e;){var Ve=ce[He],nt=null,tt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(He+tt<=_e){var at=void 0,dt=void 0,wt=void 0,bt=void 0;switch(tt){case 1:Ve<128&&(nt=Ve);break;case 2:128==(192&(at=ce[He+1]))&&(bt=(31&Ve)<<6|63&at)>127&&(nt=bt);break;case 3:dt=ce[He+2],128==(192&(at=ce[He+1]))&&128==(192&dt)&&(bt=(15&Ve)<<12|(63&at)<<6|63&dt)>2047&&(bt<55296||bt>57343)&&(nt=bt);break;case 4:dt=ce[He+2],wt=ce[He+3],128==(192&(at=ce[He+1]))&&128==(192&dt)&&128==(192&wt)&&(bt=(15&Ve)<<18|(63&at)<<12|(63&dt)<<6|63&wt)>65535&&bt<1114112&&(nt=bt)}}null===nt?(nt=65533,tt=1):nt>65535&&(De.push((nt-=65536)>>>10&1023|55296),nt=56320|1023&nt),De.push(nt),He+=tt}return function(_t){var Lt=_t.length;if(Lt<=Z)return String.fromCharCode.apply(String,_t);for(var Ct="",Ot=0;Ot<Lt;)Ct+=String.fromCharCode.apply(String,_t.slice(Ot,Ot+=Z));return Ct}(De)}(p.TYPED_ARRAY_SUPPORT=function(){try{var ce=new Uint8Array(1),ge={foo:function(){return 42}};return Object.setPrototypeOf(ge,Uint8Array.prototype),Object.setPrototypeOf(ce,ge),42===ce.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(ce,ge,_e){return m(ce,ge,_e)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(ce,ge,_e){return He=ge,Ve=_e,w(De=ce),De<=0?y(De):void 0!==He?"string"==typeof Ve?y(De).fill(He,Ve):y(De).fill(He):y(De);var De,He,Ve},p.allocUnsafe=function(ce){return u(ce)},p.allocUnsafeSlow=function(ce){return u(ce)},p.isBuffer=function(ce){return null!=ce&&!0===ce._isBuffer&&ce!==p.prototype},p.compare=function(ce,ge){if(me(ce,Uint8Array)&&(ce=p.from(ce,ce.offset,ce.byteLength)),me(ge,Uint8Array)&&(ge=p.from(ge,ge.offset,ge.byteLength)),!p.isBuffer(ce)||!p.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===ge)return 0;for(var _e=ce.length,De=ge.length,He=0,Ve=Math.min(_e,De);He<Ve;++He)if(ce[He]!==ge[He]){_e=ce[He],De=ge[He];break}return _e<De?-1:De<_e?1:0},p.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(ce,ge){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ce.length)return p.alloc(0);var _e;if(void 0===ge)for(ge=0,_e=0;_e<ce.length;++_e)ge+=ce[_e].length;var De=p.allocUnsafe(ge),He=0;for(_e=0;_e<ce.length;++_e){var Ve=ce[_e];if(me(Ve,Uint8Array))He+Ve.length>De.length?(p.isBuffer(Ve)||(Ve=p.from(Ve)),Ve.copy(De,He)):Uint8Array.prototype.set.call(De,Ve,He);else{if(!p.isBuffer(Ve))throw new TypeError('"list" argument must be an Array of Buffers');Ve.copy(De,He)}He+=Ve.length}return De},p.byteLength=L,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var ce=this.length;if(ce%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ge=0;ge<ce;ge+=2)P(this,ge,ge+1);return this},p.prototype.swap32=function(){var ce=this.length;if(ce%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ge=0;ge<ce;ge+=4)P(this,ge,ge+3),P(this,ge+1,ge+2);return this},p.prototype.swap64=function(){var ce=this.length;if(ce%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ge=0;ge<ce;ge+=8)P(this,ge,ge+7),P(this,ge+1,ge+6),P(this,ge+2,ge+5),P(this,ge+3,ge+4);return this},p.prototype.toString=function(){var ce=this.length;return 0===ce?"":0===arguments.length?J(this,0,ce):C.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(ce){if(!p.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce||0===p.compare(this,ce)},p.prototype.inspect=function(){var ce="",ge=s.h2;return ce=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(ce+=" ... "),"<Buffer "+ce+">"},v&&(p.prototype[v]=p.prototype.inspect),p.prototype.compare=function(ce,ge,_e,De,He){if(me(ce,Uint8Array)&&(ce=p.from(ce,ce.offset,ce.byteLength)),!p.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+h(ce));if(void 0===ge&&(ge=0),void 0===_e&&(_e=ce?ce.length:0),void 0===De&&(De=0),void 0===He&&(He=this.length),ge<0||_e>ce.length||De<0||He>this.length)throw new RangeError("out of range index");if(De>=He&&ge>=_e)return 0;if(De>=He)return-1;if(ge>=_e)return 1;if(this===ce)return 0;for(var Ve=(He>>>=0)-(De>>>=0),nt=(_e>>>=0)-(ge>>>=0),tt=Math.min(Ve,nt),at=this.slice(De,He),dt=ce.slice(ge,_e),wt=0;wt<tt;++wt)if(at[wt]!==dt[wt]){Ve=at[wt],nt=dt[wt];break}return Ve<nt?-1:nt<Ve?1:0},p.prototype.includes=function(ce,ge,_e){return-1!==this.indexOf(ce,ge,_e)},p.prototype.indexOf=function(ce,ge,_e){return I(this,ce,ge,_e,!0)},p.prototype.lastIndexOf=function(ce,ge,_e){return I(this,ce,ge,_e,!1)},p.prototype.write=function(ce,ge,_e,De){if(void 0===ge)De="utf8",_e=this.length,ge=0;else if(void 0===_e&&"string"==typeof ge)De=ge,_e=this.length,ge=0;else{if(!isFinite(ge))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ge>>>=0,isFinite(_e)?(_e>>>=0,void 0===De&&(De="utf8")):(De=_e,_e=void 0)}var He=this.length-ge;if((void 0===_e||_e>He)&&(_e=He),ce.length>0&&(_e<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");for(var Ve=!1;;)switch(De){case"hex":return R(this,ce,ge,_e);case"utf8":case"utf-8":return H(this,ce,ge,_e);case"ascii":case"latin1":case"binary":return F(this,ce,ge,_e);case"base64":return U(this,ce,ge,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ce,ge,_e);default:if(Ve)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ve=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;function V(ce,ge,_e){var De="";_e=Math.min(ce.length,_e);for(var He=ge;He<_e;++He)De+=String.fromCharCode(127&ce[He]);return De}function W(ce,ge,_e){var De="";_e=Math.min(ce.length,_e);for(var He=ge;He<_e;++He)De+=String.fromCharCode(ce[He]);return De}function X(ce,ge,_e){var De=ce.length;(!ge||ge<0)&&(ge=0),(!_e||_e<0||_e>De)&&(_e=De);for(var He="",Ve=ge;Ve<_e;++Ve)He+=Ie[ce[Ve]];return He}function K(ce,ge,_e){for(var De=ce.slice(ge,_e),He="",Ve=0;Ve<De.length-1;Ve+=2)He+=String.fromCharCode(De[Ve]+256*De[Ve+1]);return He}function ne(ce,ge,_e){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+ge>_e)throw new RangeError("Trying to access beyond buffer length")}function re(ce,ge,_e,De,He,Ve){if(!p.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(ge>He||ge<Ve)throw new RangeError('"value" argument is out of bounds');if(_e+De>ce.length)throw new RangeError("Index out of range")}function ae(ce,ge,_e,De,He){de(ge,De,He,ce,_e,7);var Ve=Number(ge&BigInt(4294967295));ce[_e++]=Ve,ce[_e++]=Ve>>=8,ce[_e++]=Ve>>=8,ce[_e++]=Ve>>=8;var nt=Number(ge>>BigInt(32)&BigInt(4294967295));return ce[_e++]=nt,ce[_e++]=nt>>=8,ce[_e++]=nt>>=8,ce[_e++]=nt>>=8,_e}function le(ce,ge,_e,De,He){de(ge,De,He,ce,_e,7);var Ve=Number(ge&BigInt(4294967295));ce[_e+7]=Ve,ce[_e+6]=Ve>>=8,ce[_e+5]=Ve>>=8,ce[_e+4]=Ve>>=8;var nt=Number(ge>>BigInt(32)&BigInt(4294967295));return ce[_e+3]=nt,ce[_e+2]=nt>>=8,ce[_e+1]=nt>>=8,ce[_e]=nt>>=8,_e+8}function pe(ce,ge,_e,De,He,Ve){if(_e+De>ce.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("Index out of range")}function xe(ce,ge,_e,De,He){return ge=+ge,_e>>>=0,He||pe(ce,0,_e,4),x.write(ce,ge,_e,De,23,4),_e+4}function ye(ce,ge,_e,De,He){return ge=+ge,_e>>>=0,He||pe(ce,0,_e,8),x.write(ce,ge,_e,De,52,8),_e+8}p.prototype.slice=function(ce,ge){var _e=this.length;(ce=~~ce)<0?(ce+=_e)<0&&(ce=0):ce>_e&&(ce=_e),(ge=void 0===ge?_e:~~ge)<0?(ge+=_e)<0&&(ge=0):ge>_e&&(ge=_e),ge<ce&&(ge=ce);var De=this.subarray(ce,ge);return Object.setPrototypeOf(De,p.prototype),De},p.prototype.readUintLE=p.prototype.readUIntLE=function(ce,ge,_e){ce>>>=0,ge>>>=0,_e||ne(ce,ge,this.length);for(var De=this[ce],He=1,Ve=0;++Ve<ge&&(He*=256);)De+=this[ce+Ve]*He;return De},p.prototype.readUintBE=p.prototype.readUIntBE=function(ce,ge,_e){ce>>>=0,ge>>>=0,_e||ne(ce,ge,this.length);for(var De=this[ce+--ge],He=1;ge>0&&(He*=256);)De+=this[ce+--ge]*He;return De},p.prototype.readUint8=p.prototype.readUInt8=function(ce,ge){return ce>>>=0,ge||ne(ce,1,this.length),this[ce]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(ce,ge){return ce>>>=0,ge||ne(ce,2,this.length),this[ce]|this[ce+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(ce,ge){return ce>>>=0,ge||ne(ce,2,this.length),this[ce]<<8|this[ce+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(ce,ge){return ce>>>=0,ge||ne(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+16777216*this[ce+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(ce,ge){return ce>>>=0,ge||ne(ce,4,this.length),16777216*this[ce]+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},p.prototype.readBigUInt64LE=Pe(function(ce){we(ce>>>=0,"offset");var ge=this[ce],_e=this[ce+7];void 0!==ge&&void 0!==_e||ke(ce,this.length-8);var De=ge+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24),He=this[++ce]+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+_e*Math.pow(2,24);return BigInt(De)+(BigInt(He)<<BigInt(32))}),p.prototype.readBigUInt64BE=Pe(function(ce){we(ce>>>=0,"offset");var ge=this[ce],_e=this[ce+7];void 0!==ge&&void 0!==_e||ke(ce,this.length-8);var De=ge*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce],He=this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+_e;return(BigInt(De)<<BigInt(32))+BigInt(He)}),p.prototype.readIntLE=function(ce,ge,_e){ce>>>=0,ge>>>=0,_e||ne(ce,ge,this.length);for(var De=this[ce],He=1,Ve=0;++Ve<ge&&(He*=256);)De+=this[ce+Ve]*He;return De>=(He*=128)&&(De-=Math.pow(2,8*ge)),De},p.prototype.readIntBE=function(ce,ge,_e){ce>>>=0,ge>>>=0,_e||ne(ce,ge,this.length);for(var De=ge,He=1,Ve=this[ce+--De];De>0&&(He*=256);)Ve+=this[ce+--De]*He;return Ve>=(He*=128)&&(Ve-=Math.pow(2,8*ge)),Ve},p.prototype.readInt8=function(ce,ge){return ce>>>=0,ge||ne(ce,1,this.length),128&this[ce]?-1*(255-this[ce]+1):this[ce]},p.prototype.readInt16LE=function(ce,ge){ce>>>=0,ge||ne(ce,2,this.length);var _e=this[ce]|this[ce+1]<<8;return 32768&_e?4294901760|_e:_e},p.prototype.readInt16BE=function(ce,ge){ce>>>=0,ge||ne(ce,2,this.length);var _e=this[ce+1]|this[ce]<<8;return 32768&_e?4294901760|_e:_e},p.prototype.readInt32LE=function(ce,ge){return ce>>>=0,ge||ne(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},p.prototype.readInt32BE=function(ce,ge){return ce>>>=0,ge||ne(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},p.prototype.readBigInt64LE=Pe(function(ce){we(ce>>>=0,"offset");var ge=this[ce],_e=this[ce+7];void 0!==ge&&void 0!==_e||ke(ce,this.length-8);var De=this[ce+4]+this[ce+5]*Math.pow(2,8)+this[ce+6]*Math.pow(2,16)+(_e<<24);return(BigInt(De)<<BigInt(32))+BigInt(ge+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24))}),p.prototype.readBigInt64BE=Pe(function(ce){we(ce>>>=0,"offset");var ge=this[ce],_e=this[ce+7];void 0!==ge&&void 0!==_e||ke(ce,this.length-8);var De=(ge<<24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce];return(BigInt(De)<<BigInt(32))+BigInt(this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+_e)}),p.prototype.readFloatLE=function(ce,ge){return ce>>>=0,ge||ne(ce,4,this.length),x.read(this,ce,!0,23,4)},p.prototype.readFloatBE=function(ce,ge){return ce>>>=0,ge||ne(ce,4,this.length),x.read(this,ce,!1,23,4)},p.prototype.readDoubleLE=function(ce,ge){return ce>>>=0,ge||ne(ce,8,this.length),x.read(this,ce,!0,52,8)},p.prototype.readDoubleBE=function(ce,ge){return ce>>>=0,ge||ne(ce,8,this.length),x.read(this,ce,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(ce,ge,_e,De){ce=+ce,ge>>>=0,_e>>>=0,De||re(this,ce,ge,_e,Math.pow(2,8*_e)-1,0);var He=1,Ve=0;for(this[ge]=255&ce;++Ve<_e&&(He*=256);)this[ge+Ve]=ce/He&255;return ge+_e},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(ce,ge,_e,De){ce=+ce,ge>>>=0,_e>>>=0,De||re(this,ce,ge,_e,Math.pow(2,8*_e)-1,0);var He=_e-1,Ve=1;for(this[ge+He]=255&ce;--He>=0&&(Ve*=256);)this[ge+He]=ce/Ve&255;return ge+_e},p.prototype.writeUint8=p.prototype.writeUInt8=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,1,255,0),this[ge]=255&ce,ge+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,2,65535,0),this[ge]=255&ce,this[ge+1]=ce>>>8,ge+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,2,65535,0),this[ge]=ce>>>8,this[ge+1]=255&ce,ge+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,4,4294967295,0),this[ge+3]=ce>>>24,this[ge+2]=ce>>>16,this[ge+1]=ce>>>8,this[ge]=255&ce,ge+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,4,4294967295,0),this[ge]=ce>>>24,this[ge+1]=ce>>>16,this[ge+2]=ce>>>8,this[ge+3]=255&ce,ge+4},p.prototype.writeBigUInt64LE=Pe(function(ce){return ae(this,ce,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Pe(function(ce){return le(this,ce,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(ce,ge,_e,De){if(ce=+ce,ge>>>=0,!De){var He=Math.pow(2,8*_e-1);re(this,ce,ge,_e,He-1,-He)}var Ve=0,nt=1,tt=0;for(this[ge]=255&ce;++Ve<_e&&(nt*=256);)ce<0&&0===tt&&0!==this[ge+Ve-1]&&(tt=1),this[ge+Ve]=(ce/nt>>0)-tt&255;return ge+_e},p.prototype.writeIntBE=function(ce,ge,_e,De){if(ce=+ce,ge>>>=0,!De){var He=Math.pow(2,8*_e-1);re(this,ce,ge,_e,He-1,-He)}var Ve=_e-1,nt=1,tt=0;for(this[ge+Ve]=255&ce;--Ve>=0&&(nt*=256);)ce<0&&0===tt&&0!==this[ge+Ve+1]&&(tt=1),this[ge+Ve]=(ce/nt>>0)-tt&255;return ge+_e},p.prototype.writeInt8=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,1,127,-128),ce<0&&(ce=255+ce+1),this[ge]=255&ce,ge+1},p.prototype.writeInt16LE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,2,32767,-32768),this[ge]=255&ce,this[ge+1]=ce>>>8,ge+2},p.prototype.writeInt16BE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,2,32767,-32768),this[ge]=ce>>>8,this[ge+1]=255&ce,ge+2},p.prototype.writeInt32LE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,4,2147483647,-2147483648),this[ge]=255&ce,this[ge+1]=ce>>>8,this[ge+2]=ce>>>16,this[ge+3]=ce>>>24,ge+4},p.prototype.writeInt32BE=function(ce,ge,_e){return ce=+ce,ge>>>=0,_e||re(this,ce,ge,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[ge]=ce>>>24,this[ge+1]=ce>>>16,this[ge+2]=ce>>>8,this[ge+3]=255&ce,ge+4},p.prototype.writeBigInt64LE=Pe(function(ce){return ae(this,ce,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Pe(function(ce){return le(this,ce,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(ce,ge,_e){return xe(this,ce,ge,!0,_e)},p.prototype.writeFloatBE=function(ce,ge,_e){return xe(this,ce,ge,!1,_e)},p.prototype.writeDoubleLE=function(ce,ge,_e){return ye(this,ce,ge,!0,_e)},p.prototype.writeDoubleBE=function(ce,ge,_e){return ye(this,ce,ge,!1,_e)},p.prototype.copy=function(ce,ge,_e,De){if(!p.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),De||0===De||(De=this.length),ge>=ce.length&&(ge=ce.length),ge||(ge=0),De>0&&De<_e&&(De=_e),De===_e||0===ce.length||0===this.length)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),ce.length-ge<De-_e&&(De=ce.length-ge+_e);var He=De-_e;return this===ce&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ge,_e,De):Uint8Array.prototype.set.call(ce,this.subarray(_e,De),ge),He},p.prototype.fill=function(ce,ge,_e,De){if("string"==typeof ce){if("string"==typeof ge?(De=ge,ge=0,_e=this.length):"string"==typeof _e&&(De=_e,_e=this.length),void 0!==De&&"string"!=typeof De)throw new TypeError("encoding must be a string");if("string"==typeof De&&!p.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(1===ce.length){var He=ce.charCodeAt(0);("utf8"===De&&He<128||"latin1"===De)&&(ce=He)}}else"number"==typeof ce?ce&=255:"boolean"==typeof ce&&(ce=Number(ce));if(ge<0||this.length<ge||this.length<_e)throw new RangeError("Out of range index");if(_e<=ge)return this;var Ve;if(ge>>>=0,_e=void 0===_e?this.length:_e>>>0,ce||(ce=0),"number"==typeof ce)for(Ve=ge;Ve<_e;++Ve)this[Ve]=ce;else{var nt=p.isBuffer(ce)?ce:p.from(ce,De),tt=nt.length;if(0===tt)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ve=0;Ve<_e-ge;++Ve)this[Ve+ge]=nt[Ve%tt]}return this};var se={};function fe(ce,ge,_e){se[ce]=function(De){!function(wt,bt){if("function"!=typeof bt&&null!==bt)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(bt&&bt.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),Object.defineProperty(wt,"prototype",{writable:!1}),bt&&n(wt,bt)}(dt,De);var He,Ve,nt,tt,at=(nt=dt,tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var wt,bt=c(nt);if(tt){var _t=c(this).constructor;wt=Reflect.construct(bt,arguments,_t)}else wt=bt.apply(this,arguments);return function a(ce,ge){if(ge&&("object"===h(ge)||"function"==typeof ge))return ge;if(void 0!==ge)throw new TypeError("Derived constructors may only return object or undefined");return i(ce)}(this,wt)});function dt(){var wt;return function o(ce,ge){if(!(ce instanceof ge))throw new TypeError("Cannot call a class as a function")}(this,dt),wt=at.call(this),Object.defineProperty(i(wt),"message",{value:ge.apply(i(wt),arguments),writable:!0,configurable:!0}),wt.name="".concat(wt.name," [").concat(ce,"]"),delete wt.name,wt}return He=dt,(Ve=[{key:"code",get:function(){return ce},set:function(wt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:wt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ce,"]: ").concat(this.message)}}])&&function r(ce,ge){for(var _e=0;_e<ge.length;_e++){var De=ge[_e];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(ce,De.key,De)}}(He.prototype,Ve),Object.defineProperty(He,"prototype",{writable:!1}),dt}(_e)}function Ee(ce){for(var ge="",_e=ce.length,De="-"===ce[0]?1:0;_e>=De+4;_e-=3)ge="_".concat(ce.slice(_e-3,_e)).concat(ge);return"".concat(ce.slice(0,_e)).concat(ge)}function de(ce,ge,_e,De,He,Ve){if(ce>_e||ce<ge){var nt,tt="bigint"==typeof ge?"n":"";throw nt=Ve>3?0===ge||ge===BigInt(0)?">= 0".concat(tt," and < 2").concat(tt," ** ").concat(8*(Ve+1)).concat(tt):">= -(2".concat(tt," ** ").concat(8*(Ve+1)-1).concat(tt,") and < 2 ** ")+"".concat(8*(Ve+1)-1).concat(tt):">= ".concat(ge).concat(tt," and <= ").concat(_e).concat(tt),new se.ERR_OUT_OF_RANGE("value",nt,ce)}var at,dt,wt;at=De,wt=Ve,we(dt=He,"offset"),void 0!==at[dt]&&void 0!==at[dt+wt]||ke(dt,at.length-(wt+1))}function we(ce,ge){if("number"!=typeof ce)throw new se.ERR_INVALID_ARG_TYPE(ge,"number",ce)}function ke(ce,ge,_e){throw Math.floor(ce)!==ce?(we(ce,_e),new se.ERR_OUT_OF_RANGE(_e||"offset","an integer",ce)):ge<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE(_e||"offset",">= ".concat(_e?1:0," and <= ").concat(ge),ce)}fe("ERR_BUFFER_OUT_OF_BOUNDS",function(ce){return ce?"".concat(ce," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),fe("ERR_INVALID_ARG_TYPE",function(ce,ge){return'The "'.concat(ce,'" argument must be of type number. Received type ').concat(h(ge))},TypeError),fe("ERR_OUT_OF_RANGE",function(ce,ge,_e){var De='The value of "'.concat(ce,'" is out of range.'),He=_e;return Number.isInteger(_e)&&Math.abs(_e)>Math.pow(2,32)?He=Ee(String(_e)):"bigint"==typeof _e&&(He=String(_e),(_e>Math.pow(BigInt(2),BigInt(32))||_e<-Math.pow(BigInt(2),BigInt(32)))&&(He=Ee(He)),He+="n"),De+" It must be ".concat(ge,". Received ").concat(He)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function $(ce,ge){var _e;ge=ge||1/0;for(var De=ce.length,He=null,Ve=[],nt=0;nt<De;++nt){if((_e=ce.charCodeAt(nt))>55295&&_e<57344){if(!He){if(_e>56319){(ge-=3)>-1&&Ve.push(239,191,189);continue}if(nt+1===De){(ge-=3)>-1&&Ve.push(239,191,189);continue}He=_e;continue}if(_e<56320){(ge-=3)>-1&&Ve.push(239,191,189),He=_e;continue}_e=65536+(He-55296<<10|_e-56320)}else He&&(ge-=3)>-1&&Ve.push(239,191,189);if(He=null,_e<128){if((ge-=1)<0)break;Ve.push(_e)}else if(_e<2048){if((ge-=2)<0)break;Ve.push(_e>>6|192,63&_e|128)}else if(_e<65536){if((ge-=3)<0)break;Ve.push(_e>>12|224,_e>>6&63|128,63&_e|128)}else{if(!(_e<1114112))throw new Error("Invalid code point");if((ge-=4)<0)break;Ve.push(_e>>18|240,_e>>12&63|128,_e>>6&63|128,63&_e|128)}}return Ve}function oe(ce){return f.toByteArray(function(ge){if((ge=(ge=ge.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;ge.length%4!=0;)ge+="=";return ge}(ce))}function he(ce,ge,_e,De){var He;for(He=0;He<De&&!(He+_e>=ge.length||He>=ce.length);++He)ge[He+_e]=ce[He];return He}function me(ce,ge){return ce instanceof ge||null!=ce&&null!=ce.constructor&&null!=ce.constructor.name&&ce.constructor.name===ge.name}function Me(ce){return ce!=ce}var Ie=function(){for(var ce="0123456789abcdef",ge=new Array(256),_e=0;_e<16;++_e)for(var De=16*_e,He=0;He<16;++He)ge[De+He]=ce[_e]+ce[He];return ge}();function Pe(ce){return typeof BigInt>"u"?ze:ce}function ze(){throw new Error("BigInt not supported")}},3910:function(d,s){"use strict";s.byteLength=function(f){var x=c(f),g=x[1];return 3*(x[0]+g)/4-g},s.toByteArray=function(f){var x,v,E,g=c(f),y=g[0],p=g[1],m=new r(3*(y+(E=p))/4-E),w=0,u=p>0?y-4:y;for(v=0;v<u;v+=4)x=o[f.charCodeAt(v)]<<18|o[f.charCodeAt(v+1)]<<12|o[f.charCodeAt(v+2)]<<6|o[f.charCodeAt(v+3)],m[w++]=x>>16&255,m[w++]=x>>8&255,m[w++]=255&x;return 2===p&&(x=o[f.charCodeAt(v)]<<2|o[f.charCodeAt(v+1)]>>4,m[w++]=255&x),1===p&&(x=o[f.charCodeAt(v)]<<10|o[f.charCodeAt(v+1)]<<4|o[f.charCodeAt(v+2)]>>2,m[w++]=x>>8&255,m[w++]=255&x),m},s.fromByteArray=function(f){for(var x,v=f.length,g=v%3,y=[],p=16383,m=0,w=v-g;m<w;m+=p)y.push(h(f,m,m+p>w?w:m+p));return 1===g?y.push(t[(x=f[v-1])>>2]+t[x<<4&63]+"=="):2===g&&y.push(t[(x=(f[v-2]<<8)+f[v-1])>>10]+t[x>>4&63]+t[x<<2&63]+"="),y.join("")};for(var t=[],o=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)t[a]=n[a],o[n.charCodeAt(a)]=a;function c(f){var x=f.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=f.indexOf("=");return-1===v&&(v=x),[v,v===x?0:4-v%4]}function h(f,x,v){for(var y,p=[],m=x;m<v;m+=3)p.push(t[(y=(f[m]<<16&16711680)+(f[m+1]<<8&65280)+(255&f[m+2]))>>18&63]+t[y>>12&63]+t[y>>6&63]+t[63&y]);return p.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},3187:function(d,s){s.read=function(t,o,r,n,a){var i,c,h=8*a-n-1,f=(1<<h)-1,x=f>>1,v=-7,g=r?a-1:0,y=r?-1:1,p=t[o+g];for(g+=y,i=p&(1<<-v)-1,p>>=-v,v+=h;v>0;i=256*i+t[o+g],g+=y,v-=8);for(c=i&(1<<-v)-1,i>>=-v,v+=n;v>0;c=256*c+t[o+g],g+=y,v-=8);if(0===i)i=1-x;else{if(i===f)return c?NaN:1/0*(p?-1:1);c+=Math.pow(2,n),i-=x}return(p?-1:1)*c*Math.pow(2,i-n)},s.write=function(t,o,r,n,a,i){var c,h,f,x=8*i-a-1,v=(1<<x)-1,g=v>>1,y=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,w=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,c=v):(c=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-c))<1&&(c--,f*=2),(o+=c+g>=1?y/f:y*Math.pow(2,1-g))*f>=2&&(c++,f/=2),c+g>=v?(h=0,c=v):c+g>=1?(h=(o*f-1)*Math.pow(2,a),c+=g):(h=o*Math.pow(2,g-1)*Math.pow(2,a),c=0));a>=8;t[r+p]=255&h,p+=m,h/=256,a-=8);for(c=c<<a|h,x+=a;x>0;t[r+p]=255&c,p+=m,c/=256,x-=8);t[r+p-m]|=128*w}},1152:function(d,s,t){"use strict";d.exports=function(c){var h=(c=c||{}).eye||[0,0,1],f=c.center||[0,0,0],x=c.up||[0,1,0],v=c.distanceLimits||[0,1/0],g=c.mode||"turntable",y=o(),p=r(),m=n();return y.setDistanceLimits(v[0],v[1]),y.lookAt(0,h,f,x),p.setDistanceLimits(v[0],v[1]),p.lookAt(0,h,f,x),m.setDistanceLimits(v[0],v[1]),m.lookAt(0,h,f,x),new a({turntable:y,orbit:p,matrix:m},g)};var o=t(3440),r=t(7774),n=t(9298);function a(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(f){return c[f]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=a.prototype;i.flush=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].flush(c)},i.idle=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].idle(c)},i.lookAt=function(c,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].lookAt(c,h,f,x)},i.rotate=function(c,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].rotate(c,h,f,x)},i.pan=function(c,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].pan(c,h,f,x)},i.translate=function(c,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].translate(c,h,f,x)},i.setMatrix=function(c,h){for(var f=this._controllerList,x=0;x<f.length;++x)f[x].setMatrix(c,h)},i.setDistanceLimits=function(c,h){for(var f=this._controllerList,x=0;x<f.length;++x)f[x].setDistanceLimits(c,h)},i.setDistance=function(c,h){for(var f=this._controllerList,x=0;x<f.length;++x)f[x].setDistance(c,h)},i.recalcMatrix=function(c){this._active.recalcMatrix(c)},i.getDistance=function(c){return this._active.getDistance(c)},i.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},i.lastT=function(){return this._active.lastT()},i.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var f=this._active,x=this._controllerList[h],v=Math.max(f.lastT(),x.lastT());f.recalcMatrix(v),x.setMatrix(v,f.computedMatrix),this._active=x,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},8126:function(d,s,t){"use strict";var o=typeof WeakMap>"u"?t(5346):WeakMap,r=t(5827),n=t(2944),a=new o;d.exports=function(i){var c=a.get(i),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var f=r(i,new Float32Array([-1,-1,-1,4,4,-1]));(c=n(i,[{buffer:f,type:i.FLOAT,size:2}]))._triangleBuffer=f,a.set(i,c)}c.bind(),i.drawArrays(i.TRIANGLES,0,3),c.unbind()}},8008:function(d,s,t){var o=t(4930);d.exports=function(r,n,a){n="number"==typeof n?n:1,a=a||": ";var i=r.split(/\r?\n/),c=String(i.length+n-1).length;return i.map(function(h,f){var x=f+n,v=String(x).length;return o(x,c-v)+a+h}).join("\n")}},2153:function(d,s,t){"use strict";d.exports=function(n){var a=n.length;if(0===a)return[];if(1===a)return[0];for(var i=n[0].length,c=[n[0]],h=[0],f=1;f<a;++f)if(c.push(n[f]),r(c,i)){if(h.push(f),h.length===i+1)return h}else c.pop();return h};var o=t(417);function r(n,a){for(var i=new Array(a+1),c=0;c<n.length;++c)i[c]=n[c];for(c=0;c<=n.length;++c){for(var h=n.length;h<=a;++h){for(var f=new Array(a),x=0;x<a;++x)f[x]=Math.pow(h+1-c,x);i[h]=f}if(o.apply(void 0,i))return!0}return!1}},4653:function(d,s,t){"use strict";d.exports=function(n,a){return o(a).filter(function(i){for(var c=new Array(i.length),h=0;h<i.length;++h)c[h]=a[i[h]];return r(c)*n<1})};var o=t(4419),r=t(1778)},2350:function(d,s,t){d.exports=function(n,a){return r(o(n,a))};var o=t(4653),r=t(8691)},7896:function(d){d.exports=function(s){return atob(s)}},957:function(d,s,t){"use strict";d.exports=function(n,a){for(var i=a.length,c=new Array(i+1),h=0;h<i;++h){for(var f=new Array(i+1),x=0;x<=i;++x)f[x]=n[x][h];c[h]=f}for(c[i]=new Array(i+1),h=0;h<=i;++h)c[i][h]=1;var v=new Array(i+1);for(h=0;h<i;++h)v[h]=a[h];v[i]=1;var g=o(c,v),y=r(g[i+1]);0===y&&(y=1);var p=new Array(i+1);for(h=0;h<=i;++h)p[h]=r(g[h])/y;return p};var o=t(6606);function r(n){for(var a=0,i=0;i<n.length;++i)a+=n[i];return a}},1539:function(d,s,t){"use strict";var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(d){"use strict";d.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(d,s,t){"use strict";var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(d,s,t){"use strict";var o=t(234),r=t(3218),n=t(5514),a=t(2813),i=t(8524),c=t(9189);d.exports=function h(f,x){if(o(f))return x?c(f,h(x)):[f[0].clone(),f[1].clone()];var v,g,y=0;if(r(f))v=f.clone();else if("string"==typeof f)v=a(f);else{if(0===f)return[n(0),n(1)];if(f===Math.floor(f))v=n(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),y-=256;v=n(f)}}if(o(x))v.mul(x[1]),g=x[0].clone();else if(r(x))g=x.clone();else if("string"==typeof x)g=a(x);else if(x)if(x===Math.floor(x))g=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),y+=256;g=n(x)}else g=n(1);return y>0?v=v.ushln(y):y<0&&(g=g.ushln(-y)),i(v,g)}},234:function(d,s,t){"use strict";var o=t(3218);d.exports=function(r){return Array.isArray(r)&&2===r.length&&o(r[0])&&o(r[1])}},4275:function(d,s,t){"use strict";var o=t(1928);d.exports=function(r){return r.cmp(new o(0))}},9958:function(d,s,t){"use strict";var o=t(4275);d.exports=function(r){var n=r.length,a=r.words,i=0;if(1===n)i=a[0];else if(2===n)i=a[0]+67108864*a[1];else for(var c=0;c<n;c++)i+=a[c]*Math.pow(67108864,c);return o(r)*i}},1112:function(d,s,t){"use strict";var o=t(8362),r=t(2288).countTrailingZeros;d.exports=function(n){var a=r(o.lo(n));if(a<32)return a;var i=r(o.hi(n));return i>20?52:i+32}},3218:function(d,s,t){"use strict";t(1928),d.exports=function(o){return o&&"object"==typeof o&&Boolean(o.words)}},5514:function(d,s,t){"use strict";var o=t(1928),r=t(8362);d.exports=function(n){var a=r.exponent(n);return a<52?new o(n):new o(n*Math.pow(2,52-a)).ushln(a-52)}},8524:function(d,s,t){"use strict";var o=t(5514),r=t(4275);d.exports=function(n,a){var i=r(n),c=r(a);if(0===i)return[o(0),o(1)];if(0===c)return[o(0),o(0)];c<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},2813:function(d,s,t){"use strict";var o=t(1928);d.exports=function(r){return new o(r)}},3962:function(d,s,t){"use strict";var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(d,s,t){"use strict";var o=t(4275);d.exports=function(r){return o(r[0])*o(r[1])}},4354:function(d,s,t){"use strict";var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(d,s,t){"use strict";var o=t(9958),r=t(1112);d.exports=function(n){var a=n[0],i=n[1];if(0===a.cmpn(0))return 0;var c=a.abs().divmod(i.abs()),f=o(c.div),x=c.mod,v=a.negative!==i.negative?-1:1;if(0===x.cmpn(0))return v*f;if(f){var g=r(f)+4,y=o(x.ushln(g).divRound(i));return v*(f+y*Math.pow(2,-g))}var p=i.bitLength()-x.bitLength()+53;return y=o(x.ushln(p).divRound(i)),p<1023?v*y*Math.pow(2,-p):v*(y*=Math.pow(2,-1023))*Math.pow(2,1023-p)}},5070:function(d){"use strict";function s(i,c,h,f,x){for(var v=x+1;f<=x;){var g=f+x>>>1,y=i[g];(void 0!==h?h(y,c):y-c)>=0?(v=g,x=g-1):f=g+1}return v}function t(i,c,h,f,x){for(var v=x+1;f<=x;){var g=f+x>>>1,y=i[g];(void 0!==h?h(y,c):y-c)>0?(v=g,x=g-1):f=g+1}return v}function o(i,c,h,f,x){for(var v=f-1;f<=x;){var g=f+x>>>1,y=i[g];(void 0!==h?h(y,c):y-c)<0?(v=g,f=g+1):x=g-1}return v}function r(i,c,h,f,x){for(var v=f-1;f<=x;){var g=f+x>>>1,y=i[g];(void 0!==h?h(y,c):y-c)<=0?(v=g,f=g+1):x=g-1}return v}function n(i,c,h,f,x){for(;f<=x;){var v=f+x>>>1,g=i[v],y=void 0!==h?h(g,c):g-c;if(0===y)return v;y<=0?f=v+1:x=v-1}return-1}function a(i,c,h,f,x,v){return"function"==typeof h?v(i,c,h,void 0===f?0:0|f,void 0===x?i.length-1:0|x):v(i,c,void 0,void 0===h?0:0|h,void 0===f?i.length-1:0|f)}d.exports={ge:function(i,c,h,f,x){return a(i,c,h,f,x,s)},gt:function(i,c,h,f,x){return a(i,c,h,f,x,t)},lt:function(i,c,h,f,x){return a(i,c,h,f,x,o)},le:function(i,c,h,f,x){return a(i,c,h,f,x,r)},eq:function(i,c,h,f,x){return a(i,c,h,f,x,n)}}},2288:function(d,s){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},1928:function(d,s,t){!function(o,r){"use strict";function n(R,H){if(!R)throw new Error(H||"Assertion failed")}function a(R,H){R.super_=H;var F=function(){};F.prototype=H.prototype,R.prototype=new F,R.prototype.constructor=R}function i(R,H,F){if(i.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&("le"!==H&&"be"!==H||(F=H,H=10),this._init(R||0,H||10,F||"be"))}var c;"object"==typeof o?o.exports=i:r.BN=i,i.BN=i,i.wordSize=26;try{c=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:t(6601).Buffer}catch{}function h(R,H){var F=R.charCodeAt(H);return F>=65&&F<=70?F-55:F>=97&&F<=102?F-87:F-48&15}function f(R,H,F){var U=h(R,F);return F-1>=H&&(U|=h(R,F-1)<<4),U}function x(R,H,F,U){for(var B=0,N=Math.min(R.length,F),J=H;J<N;J++){var Z=R.charCodeAt(J)-48;B*=U,B+=Z>=49?Z-49+10:Z>=17?Z-17+10:Z}return B}i.isBN=function(R){return R instanceof i||null!==R&&"object"==typeof R&&R.constructor.wordSize===i.wordSize&&Array.isArray(R.words)},i.max=function(R,H){return R.cmp(H)>0?R:H},i.min=function(R,H){return R.cmp(H)<0?R:H},i.prototype._init=function(R,H,F){if("number"==typeof R)return this._initNumber(R,H,F);if("object"==typeof R)return this._initArray(R,H,F);"hex"===H&&(H=16),n(H===(0|H)&&H>=2&&H<=36);var U=0;"-"===(R=R.toString().replace(/\s+/g,""))[0]&&(U++,this.negative=1),U<R.length&&(16===H?this._parseHex(R,U,F):(this._parseBase(R,H,U),"le"===F&&this._initArray(this.toArray(),H,F)))},i.prototype._initNumber=function(R,H,F){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(n(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),"le"===F&&this._initArray(this.toArray(),H,F)},i.prototype._initArray=function(R,H,F){if(n("number"==typeof R.length),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var B,N,J=0;if("be"===F)for(U=R.length-1,B=0;U>=0;U-=3)this.words[B]|=(N=R[U]|R[U-1]<<8|R[U-2]<<16)<<J&67108863,this.words[B+1]=N>>>26-J&67108863,(J+=24)>=26&&(J-=26,B++);else if("le"===F)for(U=0,B=0;U<R.length;U+=3)this.words[B]|=(N=R[U]|R[U+1]<<8|R[U+2]<<16)<<J&67108863,this.words[B+1]=N>>>26-J&67108863,(J+=24)>=26&&(J-=26,B++);return this.strip()},i.prototype._parseHex=function(R,H,F){this.length=Math.ceil((R.length-H)/6),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var B,N=0,J=0;if("be"===F)for(U=R.length-1;U>=H;U-=2)B=f(R,H,U)<<N,this.words[J]|=67108863&B,N>=18?(N-=18,this.words[J+=1]|=B>>>26):N+=8;else for(U=(R.length-H)%2==0?H+1:H;U<R.length;U+=2)B=f(R,H,U)<<N,this.words[J]|=67108863&B,N>=18?(N-=18,this.words[J+=1]|=B>>>26):N+=8;this.strip()},i.prototype._parseBase=function(R,H,F){this.words=[0],this.length=1;for(var U=0,B=1;B<=67108863;B*=H)U++;U--,B=B/H|0;for(var N=R.length-F,J=N%U,Z=Math.min(N,N-J)+F,V=0,W=F;W<Z;W+=U)V=x(R,W,W+U,H),this.imuln(B),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(0!==J){var X=1;for(V=x(R,W,R.length,H),W=0;W<J;W++)X*=H;this.imuln(X),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this.strip()},i.prototype.copy=function(R){R.words=new Array(this.length);for(var H=0;H<this.length;H++)R.words[H]=this.words[H];R.length=this.length,R.negative=this.negative,R.red=this.red},i.prototype.clone=function(){var R=new i(null);return this.copy(R),R},i.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(R,H,F){F.negative=H.negative^R.negative;var U=R.length+H.length|0;F.length=U,U=U-1|0;var B=0|R.words[0],N=0|H.words[0],J=B*N,V=J/67108864|0;F.words[0]=67108863&J;for(var W=1;W<U;W++){for(var X=V>>>26,K=67108863&V,ne=Math.min(W,H.length-1),re=Math.max(0,W-R.length+1);re<=ne;re++)X+=(J=(B=0|R.words[W-re|0])*(N=0|H.words[re])+K)/67108864|0,K=67108863&J;F.words[W]=0|K,V=0|X}return 0!==V?F.words[W]=0|V:F.length--,F.strip()}i.prototype.toString=function(R,H){var F;if(H=0|H||1,16===(R=R||10)||"hex"===R){F="";for(var U=0,B=0,N=0;N<this.length;N++){var J=this.words[N],Z=(16777215&(J<<U|B)).toString(16);F=0!=(B=J>>>24-U&16777215)||N!==this.length-1?v[6-Z.length]+Z+F:Z+F,(U+=2)>=26&&(U-=26,N--)}for(0!==B&&(F=B.toString(16)+F);F.length%H!=0;)F="0"+F;return 0!==this.negative&&(F="-"+F),F}if(R===(0|R)&&R>=2&&R<=36){var V=g[R],W=y[R];F="";var X=this.clone();for(X.negative=0;!X.isZero();){var K=X.modn(W).toString(R);F=(X=X.idivn(W)).isZero()?K+F:v[V-K.length]+K+F}for(this.isZero()&&(F="0"+F);F.length%H!=0;)F="0"+F;return 0!==this.negative&&(F="-"+F),F}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var R=this.words[0];return 2===this.length?R+=67108864*this.words[1]:3===this.length&&1===this.words[2]?R+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-R:R},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(R,H){return n(void 0!==c),this.toArrayLike(c,R,H)},i.prototype.toArray=function(R,H){return this.toArrayLike(Array,R,H)},i.prototype.toArrayLike=function(R,H,F){var U=this.byteLength(),B=F||Math.max(1,U);n(U<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0"),this.strip();var N,J,Z="le"===H,V=new R(B),W=this.clone();if(Z){for(J=0;!W.isZero();J++)N=W.andln(255),W.iushrn(8),V[J]=N;for(;J<B;J++)V[J]=0}else{for(J=0;J<B-U;J++)V[J]=0;for(J=0;!W.isZero();J++)N=W.andln(255),W.iushrn(8),V[B-J-1]=N}return V},i.prototype._countBits=Math.clz32?function(R){return 32-Math.clz32(R)}:function(R){var H=R,F=0;return H>=4096&&(F+=13,H>>>=13),H>=64&&(F+=7,H>>>=7),H>=8&&(F+=4,H>>>=4),H>=2&&(F+=2,H>>>=2),F+H},i.prototype._zeroBits=function(R){if(0===R)return 26;var H=R,F=0;return!(8191&H)&&(F+=13,H>>>=13),!(127&H)&&(F+=7,H>>>=7),!(15&H)&&(F+=4,H>>>=4),!(3&H)&&(F+=2,H>>>=2),!(1&H)&&F++,F},i.prototype.bitLength=function(){var H=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+H},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,H=0;H<this.length;H++){var F=this._zeroBits(this.words[H]);if(R+=F,26!==F)break}return R},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(R){return 0!==this.negative?this.abs().inotn(R).iaddn(1):this.clone()},i.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var H=0;H<R.length;H++)this.words[H]=this.words[H]|R.words[H];return this.strip()},i.prototype.ior=function(R){return n(0==(this.negative|R.negative)),this.iuor(R)},i.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},i.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},i.prototype.iuand=function(R){var H;H=this.length>R.length?R:this;for(var F=0;F<H.length;F++)this.words[F]=this.words[F]&R.words[F];return this.length=H.length,this.strip()},i.prototype.iand=function(R){return n(0==(this.negative|R.negative)),this.iuand(R)},i.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},i.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},i.prototype.iuxor=function(R){var H,F;this.length>R.length?(H=this,F=R):(H=R,F=this);for(var U=0;U<F.length;U++)this.words[U]=H.words[U]^F.words[U];if(this!==H)for(;U<H.length;U++)this.words[U]=H.words[U];return this.length=H.length,this.strip()},i.prototype.ixor=function(R){return n(0==(this.negative|R.negative)),this.iuxor(R)},i.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},i.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},i.prototype.inotn=function(R){n("number"==typeof R&&R>=0);var H=0|Math.ceil(R/26),F=R%26;this._expand(H),F>0&&H--;for(var U=0;U<H;U++)this.words[U]=67108863&~this.words[U];return F>0&&(this.words[U]=~this.words[U]&67108863>>26-F),this.strip()},i.prototype.notn=function(R){return this.clone().inotn(R)},i.prototype.setn=function(R,H){n("number"==typeof R&&R>=0);var F=R/26|0,U=R%26;return this._expand(F+1),this.words[F]=H?this.words[F]|1<<U:this.words[F]&~(1<<U),this.strip()},i.prototype.iadd=function(R){var H,F,U;if(0!==this.negative&&0===R.negative)return this.negative=0,H=this.isub(R),this.negative^=1,this._normSign();if(0===this.negative&&0!==R.negative)return R.negative=0,H=this.isub(R),R.negative=1,H._normSign();this.length>R.length?(F=this,U=R):(F=R,U=this);for(var B=0,N=0;N<U.length;N++)this.words[N]=67108863&(H=(0|F.words[N])+(0|U.words[N])+B),B=H>>>26;for(;0!==B&&N<F.length;N++)this.words[N]=67108863&(H=(0|F.words[N])+B),B=H>>>26;if(this.length=F.length,0!==B)this.words[this.length]=B,this.length++;else if(F!==this)for(;N<F.length;N++)this.words[N]=F.words[N];return this},i.prototype.add=function(R){var H;return 0!==R.negative&&0===this.negative?(R.negative=0,H=this.sub(R),R.negative^=1,H):0===R.negative&&0!==this.negative?(this.negative=0,H=R.sub(this),this.negative=1,H):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},i.prototype.isub=function(R){if(0!==R.negative){R.negative=0;var H=this.iadd(R);return R.negative=1,H._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var F,U,B=this.cmp(R);if(0===B)return this.negative=0,this.length=1,this.words[0]=0,this;B>0?(F=this,U=R):(F=R,U=this);for(var N=0,J=0;J<U.length;J++)N=(H=(0|F.words[J])-(0|U.words[J])+N)>>26,this.words[J]=67108863&H;for(;0!==N&&J<F.length;J++)N=(H=(0|F.words[J])+N)>>26,this.words[J]=67108863&H;if(0===N&&J<F.length&&F!==this)for(;J<F.length;J++)this.words[J]=F.words[J];return this.length=Math.max(this.length,J),F!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(R){return this.clone().isub(R)};var m=function(R,H,F){var U,B,N,J=R.words,Z=H.words,V=F.words,W=0,X=0|J[0],K=8191&X,ne=X>>>13,re=0|J[1],ae=8191&re,le=re>>>13,pe=0|J[2],xe=8191&pe,ye=pe>>>13,se=0|J[3],fe=8191&se,Ee=se>>>13,de=0|J[4],we=8191&de,ke=de>>>13,Te=0|J[5],$=8191&Te,oe=Te>>>13,he=0|J[6],me=8191&he,Me=he>>>13,Ie=0|J[7],Pe=8191&Ie,ze=Ie>>>13,ce=0|J[8],ge=8191&ce,_e=ce>>>13,De=0|J[9],He=8191&De,Ve=De>>>13,nt=0|Z[0],tt=8191&nt,at=nt>>>13,dt=0|Z[1],wt=8191&dt,bt=dt>>>13,_t=0|Z[2],Lt=8191&_t,Ct=_t>>>13,Ot=0|Z[3],Ht=8191&Ot,It=Ot>>>13,Ge=0|Z[4],Ze=8191&Ge,Be=Ge>>>13,Ye=0|Z[5],rt=8191&Ye,Se=Ye>>>13,Re=0|Z[6],Ke=8191&Re,st=Re>>>13,ct=0|Z[7],Tt=8191&ct,Et=ct>>>13,At=0|Z[8],ht=8191&At,pt=At>>>13,gt=0|Z[9],Pt=8191&gt,zt=gt>>>13;F.negative=R.negative^H.negative,F.length=19;var Ut=(W+(U=Math.imul(K,tt))|0)+((8191&(B=(B=Math.imul(K,at))+Math.imul(ne,tt)|0))<<13)|0;W=((N=Math.imul(ne,at))+(B>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,U=Math.imul(ae,tt),B=(B=Math.imul(ae,at))+Math.imul(le,tt)|0,N=Math.imul(le,at);var Nt=(W+(U=U+Math.imul(K,wt)|0)|0)+((8191&(B=(B=B+Math.imul(K,bt)|0)+Math.imul(ne,wt)|0))<<13)|0;W=((N=N+Math.imul(ne,bt)|0)+(B>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,U=Math.imul(xe,tt),B=(B=Math.imul(xe,at))+Math.imul(ye,tt)|0,N=Math.imul(ye,at),U=U+Math.imul(ae,wt)|0,B=(B=B+Math.imul(ae,bt)|0)+Math.imul(le,wt)|0,N=N+Math.imul(le,bt)|0;var jt=(W+(U=U+Math.imul(K,Lt)|0)|0)+((8191&(B=(B=B+Math.imul(K,Ct)|0)+Math.imul(ne,Lt)|0))<<13)|0;W=((N=N+Math.imul(ne,Ct)|0)+(B>>>13)|0)+(jt>>>26)|0,jt&=67108863,U=Math.imul(fe,tt),B=(B=Math.imul(fe,at))+Math.imul(Ee,tt)|0,N=Math.imul(Ee,at),U=U+Math.imul(xe,wt)|0,B=(B=B+Math.imul(xe,bt)|0)+Math.imul(ye,wt)|0,N=N+Math.imul(ye,bt)|0,U=U+Math.imul(ae,Lt)|0,B=(B=B+Math.imul(ae,Ct)|0)+Math.imul(le,Lt)|0,N=N+Math.imul(le,Ct)|0;var Gt=(W+(U=U+Math.imul(K,Ht)|0)|0)+((8191&(B=(B=B+Math.imul(K,It)|0)+Math.imul(ne,Ht)|0))<<13)|0;W=((N=N+Math.imul(ne,It)|0)+(B>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,U=Math.imul(we,tt),B=(B=Math.imul(we,at))+Math.imul(ke,tt)|0,N=Math.imul(ke,at),U=U+Math.imul(fe,wt)|0,B=(B=B+Math.imul(fe,bt)|0)+Math.imul(Ee,wt)|0,N=N+Math.imul(Ee,bt)|0,U=U+Math.imul(xe,Lt)|0,B=(B=B+Math.imul(xe,Ct)|0)+Math.imul(ye,Lt)|0,N=N+Math.imul(ye,Ct)|0,U=U+Math.imul(ae,Ht)|0,B=(B=B+Math.imul(ae,It)|0)+Math.imul(le,Ht)|0,N=N+Math.imul(le,It)|0;var un=(W+(U=U+Math.imul(K,Ze)|0)|0)+((8191&(B=(B=B+Math.imul(K,Be)|0)+Math.imul(ne,Ze)|0))<<13)|0;W=((N=N+Math.imul(ne,Be)|0)+(B>>>13)|0)+(un>>>26)|0,un&=67108863,U=Math.imul($,tt),B=(B=Math.imul($,at))+Math.imul(oe,tt)|0,N=Math.imul(oe,at),U=U+Math.imul(we,wt)|0,B=(B=B+Math.imul(we,bt)|0)+Math.imul(ke,wt)|0,N=N+Math.imul(ke,bt)|0,U=U+Math.imul(fe,Lt)|0,B=(B=B+Math.imul(fe,Ct)|0)+Math.imul(Ee,Lt)|0,N=N+Math.imul(Ee,Ct)|0,U=U+Math.imul(xe,Ht)|0,B=(B=B+Math.imul(xe,It)|0)+Math.imul(ye,Ht)|0,N=N+Math.imul(ye,It)|0,U=U+Math.imul(ae,Ze)|0,B=(B=B+Math.imul(ae,Be)|0)+Math.imul(le,Ze)|0,N=N+Math.imul(le,Be)|0;var hn=(W+(U=U+Math.imul(K,rt)|0)|0)+((8191&(B=(B=B+Math.imul(K,Se)|0)+Math.imul(ne,rt)|0))<<13)|0;W=((N=N+Math.imul(ne,Se)|0)+(B>>>13)|0)+(hn>>>26)|0,hn&=67108863,U=Math.imul(me,tt),B=(B=Math.imul(me,at))+Math.imul(Me,tt)|0,N=Math.imul(Me,at),U=U+Math.imul($,wt)|0,B=(B=B+Math.imul($,bt)|0)+Math.imul(oe,wt)|0,N=N+Math.imul(oe,bt)|0,U=U+Math.imul(we,Lt)|0,B=(B=B+Math.imul(we,Ct)|0)+Math.imul(ke,Lt)|0,N=N+Math.imul(ke,Ct)|0,U=U+Math.imul(fe,Ht)|0,B=(B=B+Math.imul(fe,It)|0)+Math.imul(Ee,Ht)|0,N=N+Math.imul(Ee,It)|0,U=U+Math.imul(xe,Ze)|0,B=(B=B+Math.imul(xe,Be)|0)+Math.imul(ye,Ze)|0,N=N+Math.imul(ye,Be)|0,U=U+Math.imul(ae,rt)|0,B=(B=B+Math.imul(ae,Se)|0)+Math.imul(le,rt)|0,N=N+Math.imul(le,Se)|0;var Qt=(W+(U=U+Math.imul(K,Ke)|0)|0)+((8191&(B=(B=B+Math.imul(K,st)|0)+Math.imul(ne,Ke)|0))<<13)|0;W=((N=N+Math.imul(ne,st)|0)+(B>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,U=Math.imul(Pe,tt),B=(B=Math.imul(Pe,at))+Math.imul(ze,tt)|0,N=Math.imul(ze,at),U=U+Math.imul(me,wt)|0,B=(B=B+Math.imul(me,bt)|0)+Math.imul(Me,wt)|0,N=N+Math.imul(Me,bt)|0,U=U+Math.imul($,Lt)|0,B=(B=B+Math.imul($,Ct)|0)+Math.imul(oe,Lt)|0,N=N+Math.imul(oe,Ct)|0,U=U+Math.imul(we,Ht)|0,B=(B=B+Math.imul(we,It)|0)+Math.imul(ke,Ht)|0,N=N+Math.imul(ke,It)|0,U=U+Math.imul(fe,Ze)|0,B=(B=B+Math.imul(fe,Be)|0)+Math.imul(Ee,Ze)|0,N=N+Math.imul(Ee,Be)|0,U=U+Math.imul(xe,rt)|0,B=(B=B+Math.imul(xe,Se)|0)+Math.imul(ye,rt)|0,N=N+Math.imul(ye,Se)|0,U=U+Math.imul(ae,Ke)|0,B=(B=B+Math.imul(ae,st)|0)+Math.imul(le,Ke)|0,N=N+Math.imul(le,st)|0;var _n=(W+(U=U+Math.imul(K,Tt)|0)|0)+((8191&(B=(B=B+Math.imul(K,Et)|0)+Math.imul(ne,Tt)|0))<<13)|0;W=((N=N+Math.imul(ne,Et)|0)+(B>>>13)|0)+(_n>>>26)|0,_n&=67108863,U=Math.imul(ge,tt),B=(B=Math.imul(ge,at))+Math.imul(_e,tt)|0,N=Math.imul(_e,at),U=U+Math.imul(Pe,wt)|0,B=(B=B+Math.imul(Pe,bt)|0)+Math.imul(ze,wt)|0,N=N+Math.imul(ze,bt)|0,U=U+Math.imul(me,Lt)|0,B=(B=B+Math.imul(me,Ct)|0)+Math.imul(Me,Lt)|0,N=N+Math.imul(Me,Ct)|0,U=U+Math.imul($,Ht)|0,B=(B=B+Math.imul($,It)|0)+Math.imul(oe,Ht)|0,N=N+Math.imul(oe,It)|0,U=U+Math.imul(we,Ze)|0,B=(B=B+Math.imul(we,Be)|0)+Math.imul(ke,Ze)|0,N=N+Math.imul(ke,Be)|0,U=U+Math.imul(fe,rt)|0,B=(B=B+Math.imul(fe,Se)|0)+Math.imul(Ee,rt)|0,N=N+Math.imul(Ee,Se)|0,U=U+Math.imul(xe,Ke)|0,B=(B=B+Math.imul(xe,st)|0)+Math.imul(ye,Ke)|0,N=N+Math.imul(ye,st)|0,U=U+Math.imul(ae,Tt)|0,B=(B=B+Math.imul(ae,Et)|0)+Math.imul(le,Tt)|0,N=N+Math.imul(le,Et)|0;var Fn=(W+(U=U+Math.imul(K,ht)|0)|0)+((8191&(B=(B=B+Math.imul(K,pt)|0)+Math.imul(ne,ht)|0))<<13)|0;W=((N=N+Math.imul(ne,pt)|0)+(B>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,U=Math.imul(He,tt),B=(B=Math.imul(He,at))+Math.imul(Ve,tt)|0,N=Math.imul(Ve,at),U=U+Math.imul(ge,wt)|0,B=(B=B+Math.imul(ge,bt)|0)+Math.imul(_e,wt)|0,N=N+Math.imul(_e,bt)|0,U=U+Math.imul(Pe,Lt)|0,B=(B=B+Math.imul(Pe,Ct)|0)+Math.imul(ze,Lt)|0,N=N+Math.imul(ze,Ct)|0,U=U+Math.imul(me,Ht)|0,B=(B=B+Math.imul(me,It)|0)+Math.imul(Me,Ht)|0,N=N+Math.imul(Me,It)|0,U=U+Math.imul($,Ze)|0,B=(B=B+Math.imul($,Be)|0)+Math.imul(oe,Ze)|0,N=N+Math.imul(oe,Be)|0,U=U+Math.imul(we,rt)|0,B=(B=B+Math.imul(we,Se)|0)+Math.imul(ke,rt)|0,N=N+Math.imul(ke,Se)|0,U=U+Math.imul(fe,Ke)|0,B=(B=B+Math.imul(fe,st)|0)+Math.imul(Ee,Ke)|0,N=N+Math.imul(Ee,st)|0,U=U+Math.imul(xe,Tt)|0,B=(B=B+Math.imul(xe,Et)|0)+Math.imul(ye,Tt)|0,N=N+Math.imul(ye,Et)|0,U=U+Math.imul(ae,ht)|0,B=(B=B+Math.imul(ae,pt)|0)+Math.imul(le,ht)|0,N=N+Math.imul(le,pt)|0;var yn=(W+(U=U+Math.imul(K,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(K,zt)|0)+Math.imul(ne,Pt)|0))<<13)|0;W=((N=N+Math.imul(ne,zt)|0)+(B>>>13)|0)+(yn>>>26)|0,yn&=67108863,U=Math.imul(He,wt),B=(B=Math.imul(He,bt))+Math.imul(Ve,wt)|0,N=Math.imul(Ve,bt),U=U+Math.imul(ge,Lt)|0,B=(B=B+Math.imul(ge,Ct)|0)+Math.imul(_e,Lt)|0,N=N+Math.imul(_e,Ct)|0,U=U+Math.imul(Pe,Ht)|0,B=(B=B+Math.imul(Pe,It)|0)+Math.imul(ze,Ht)|0,N=N+Math.imul(ze,It)|0,U=U+Math.imul(me,Ze)|0,B=(B=B+Math.imul(me,Be)|0)+Math.imul(Me,Ze)|0,N=N+Math.imul(Me,Be)|0,U=U+Math.imul($,rt)|0,B=(B=B+Math.imul($,Se)|0)+Math.imul(oe,rt)|0,N=N+Math.imul(oe,Se)|0,U=U+Math.imul(we,Ke)|0,B=(B=B+Math.imul(we,st)|0)+Math.imul(ke,Ke)|0,N=N+Math.imul(ke,st)|0,U=U+Math.imul(fe,Tt)|0,B=(B=B+Math.imul(fe,Et)|0)+Math.imul(Ee,Tt)|0,N=N+Math.imul(Ee,Et)|0,U=U+Math.imul(xe,ht)|0,B=(B=B+Math.imul(xe,pt)|0)+Math.imul(ye,ht)|0,N=N+Math.imul(ye,pt)|0;var on=(W+(U=U+Math.imul(ae,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(ae,zt)|0)+Math.imul(le,Pt)|0))<<13)|0;W=((N=N+Math.imul(le,zt)|0)+(B>>>13)|0)+(on>>>26)|0,on&=67108863,U=Math.imul(He,Lt),B=(B=Math.imul(He,Ct))+Math.imul(Ve,Lt)|0,N=Math.imul(Ve,Ct),U=U+Math.imul(ge,Ht)|0,B=(B=B+Math.imul(ge,It)|0)+Math.imul(_e,Ht)|0,N=N+Math.imul(_e,It)|0,U=U+Math.imul(Pe,Ze)|0,B=(B=B+Math.imul(Pe,Be)|0)+Math.imul(ze,Ze)|0,N=N+Math.imul(ze,Be)|0,U=U+Math.imul(me,rt)|0,B=(B=B+Math.imul(me,Se)|0)+Math.imul(Me,rt)|0,N=N+Math.imul(Me,Se)|0,U=U+Math.imul($,Ke)|0,B=(B=B+Math.imul($,st)|0)+Math.imul(oe,Ke)|0,N=N+Math.imul(oe,st)|0,U=U+Math.imul(we,Tt)|0,B=(B=B+Math.imul(we,Et)|0)+Math.imul(ke,Tt)|0,N=N+Math.imul(ke,Et)|0,U=U+Math.imul(fe,ht)|0,B=(B=B+Math.imul(fe,pt)|0)+Math.imul(Ee,ht)|0,N=N+Math.imul(Ee,pt)|0;var pn=(W+(U=U+Math.imul(xe,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(xe,zt)|0)+Math.imul(ye,Pt)|0))<<13)|0;W=((N=N+Math.imul(ye,zt)|0)+(B>>>13)|0)+(pn>>>26)|0,pn&=67108863,U=Math.imul(He,Ht),B=(B=Math.imul(He,It))+Math.imul(Ve,Ht)|0,N=Math.imul(Ve,It),U=U+Math.imul(ge,Ze)|0,B=(B=B+Math.imul(ge,Be)|0)+Math.imul(_e,Ze)|0,N=N+Math.imul(_e,Be)|0,U=U+Math.imul(Pe,rt)|0,B=(B=B+Math.imul(Pe,Se)|0)+Math.imul(ze,rt)|0,N=N+Math.imul(ze,Se)|0,U=U+Math.imul(me,Ke)|0,B=(B=B+Math.imul(me,st)|0)+Math.imul(Me,Ke)|0,N=N+Math.imul(Me,st)|0,U=U+Math.imul($,Tt)|0,B=(B=B+Math.imul($,Et)|0)+Math.imul(oe,Tt)|0,N=N+Math.imul(oe,Et)|0,U=U+Math.imul(we,ht)|0,B=(B=B+Math.imul(we,pt)|0)+Math.imul(ke,ht)|0,N=N+Math.imul(ke,pt)|0;var ln=(W+(U=U+Math.imul(fe,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(fe,zt)|0)+Math.imul(Ee,Pt)|0))<<13)|0;W=((N=N+Math.imul(Ee,zt)|0)+(B>>>13)|0)+(ln>>>26)|0,ln&=67108863,U=Math.imul(He,Ze),B=(B=Math.imul(He,Be))+Math.imul(Ve,Ze)|0,N=Math.imul(Ve,Be),U=U+Math.imul(ge,rt)|0,B=(B=B+Math.imul(ge,Se)|0)+Math.imul(_e,rt)|0,N=N+Math.imul(_e,Se)|0,U=U+Math.imul(Pe,Ke)|0,B=(B=B+Math.imul(Pe,st)|0)+Math.imul(ze,Ke)|0,N=N+Math.imul(ze,st)|0,U=U+Math.imul(me,Tt)|0,B=(B=B+Math.imul(me,Et)|0)+Math.imul(Me,Tt)|0,N=N+Math.imul(Me,Et)|0,U=U+Math.imul($,ht)|0,B=(B=B+Math.imul($,pt)|0)+Math.imul(oe,ht)|0,N=N+Math.imul(oe,pt)|0;var dn=(W+(U=U+Math.imul(we,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(we,zt)|0)+Math.imul(ke,Pt)|0))<<13)|0;W=((N=N+Math.imul(ke,zt)|0)+(B>>>13)|0)+(dn>>>26)|0,dn&=67108863,U=Math.imul(He,rt),B=(B=Math.imul(He,Se))+Math.imul(Ve,rt)|0,N=Math.imul(Ve,Se),U=U+Math.imul(ge,Ke)|0,B=(B=B+Math.imul(ge,st)|0)+Math.imul(_e,Ke)|0,N=N+Math.imul(_e,st)|0,U=U+Math.imul(Pe,Tt)|0,B=(B=B+Math.imul(Pe,Et)|0)+Math.imul(ze,Tt)|0,N=N+Math.imul(ze,Et)|0,U=U+Math.imul(me,ht)|0,B=(B=B+Math.imul(me,pt)|0)+Math.imul(Me,ht)|0,N=N+Math.imul(Me,pt)|0;var Cn=(W+(U=U+Math.imul($,Pt)|0)|0)+((8191&(B=(B=B+Math.imul($,zt)|0)+Math.imul(oe,Pt)|0))<<13)|0;W=((N=N+Math.imul(oe,zt)|0)+(B>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,U=Math.imul(He,Ke),B=(B=Math.imul(He,st))+Math.imul(Ve,Ke)|0,N=Math.imul(Ve,st),U=U+Math.imul(ge,Tt)|0,B=(B=B+Math.imul(ge,Et)|0)+Math.imul(_e,Tt)|0,N=N+Math.imul(_e,Et)|0,U=U+Math.imul(Pe,ht)|0,B=(B=B+Math.imul(Pe,pt)|0)+Math.imul(ze,ht)|0,N=N+Math.imul(ze,pt)|0;var kn=(W+(U=U+Math.imul(me,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(me,zt)|0)+Math.imul(Me,Pt)|0))<<13)|0;W=((N=N+Math.imul(Me,zt)|0)+(B>>>13)|0)+(kn>>>26)|0,kn&=67108863,U=Math.imul(He,Tt),B=(B=Math.imul(He,Et))+Math.imul(Ve,Tt)|0,N=Math.imul(Ve,Et),U=U+Math.imul(ge,ht)|0,B=(B=B+Math.imul(ge,pt)|0)+Math.imul(_e,ht)|0,N=N+Math.imul(_e,pt)|0;var Rn=(W+(U=U+Math.imul(Pe,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(Pe,zt)|0)+Math.imul(ze,Pt)|0))<<13)|0;W=((N=N+Math.imul(ze,zt)|0)+(B>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,U=Math.imul(He,ht),B=(B=Math.imul(He,pt))+Math.imul(Ve,ht)|0,N=Math.imul(Ve,pt);var Nn=(W+(U=U+Math.imul(ge,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(ge,zt)|0)+Math.imul(_e,Pt)|0))<<13)|0;W=((N=N+Math.imul(_e,zt)|0)+(B>>>13)|0)+(Nn>>>26)|0,Nn&=67108863;var jn=(W+(U=Math.imul(He,Pt))|0)+((8191&(B=(B=Math.imul(He,zt))+Math.imul(Ve,Pt)|0))<<13)|0;return W=((N=Math.imul(Ve,zt))+(B>>>13)|0)+(jn>>>26)|0,jn&=67108863,V[0]=Ut,V[1]=Nt,V[2]=jt,V[3]=Gt,V[4]=un,V[5]=hn,V[6]=Qt,V[7]=_n,V[8]=Fn,V[9]=yn,V[10]=on,V[11]=pn,V[12]=ln,V[13]=dn,V[14]=Cn,V[15]=kn,V[16]=Rn,V[17]=Nn,V[18]=jn,0!==W&&(V[19]=W,F.length++),F};function w(R,H,F){return(new u).mulp(R,H,F)}function u(R,H){this.x=R,this.y=H}Math.imul||(m=p),i.prototype.mulTo=function(R,H){var U=this.length+R.length;return 10===this.length&&10===R.length?m(this,R,H):U<63?p(this,R,H):U<1024?function(B,N,J){J.negative=N.negative^B.negative,J.length=B.length+N.length;for(var Z=0,V=0,W=0;W<J.length-1;W++){var X=V;V=0;for(var K=67108863&Z,ne=Math.min(W,N.length-1),re=Math.max(0,W-B.length+1);re<=ne;re++){var le=(0|B.words[W-re])*(0|N.words[re]),pe=67108863&le;K=67108863&(pe=pe+K|0),V+=(X=(X=X+(le/67108864|0)|0)+(pe>>>26)|0)>>>26,X&=67108863}J.words[W]=K,Z=X,X=V}return 0!==Z?J.words[W]=Z:J.length--,J.strip()}(this,R,H):w(this,R,H)},u.prototype.makeRBT=function(R){for(var H=new Array(R),F=i.prototype._countBits(R)-1,U=0;U<R;U++)H[U]=this.revBin(U,F,R);return H},u.prototype.revBin=function(R,H,F){if(0===R||R===F-1)return R;for(var U=0,B=0;B<H;B++)U|=(1&R)<<H-B-1,R>>=1;return U},u.prototype.permute=function(R,H,F,U,B,N){for(var J=0;J<N;J++)U[J]=H[R[J]],B[J]=F[R[J]]},u.prototype.transform=function(R,H,F,U,B,N){this.permute(N,R,H,F,U,B);for(var J=1;J<B;J<<=1)for(var Z=J<<1,V=Math.cos(2*Math.PI/Z),W=Math.sin(2*Math.PI/Z),X=0;X<B;X+=Z)for(var K=V,ne=W,re=0;re<J;re++){var ae=F[X+re],le=U[X+re],pe=F[X+re+J],xe=U[X+re+J],ye=K*pe-ne*xe;xe=K*xe+ne*pe,F[X+re]=ae+(pe=ye),U[X+re]=le+xe,F[X+re+J]=ae-pe,U[X+re+J]=le-xe,re!==Z&&(ye=V*K-W*ne,ne=V*ne+W*K,K=ye)}},u.prototype.guessLen13b=function(R,H){var F=1|Math.max(H,R),U=1&F,B=0;for(F=F/2|0;F;F>>>=1)B++;return 1<<B+1+U},u.prototype.conjugate=function(R,H,F){if(!(F<=1))for(var U=0;U<F/2;U++){var B=R[U];R[U]=R[F-U-1],R[F-U-1]=B,B=H[U],H[U]=-H[F-U-1],H[F-U-1]=-B}},u.prototype.normalize13b=function(R,H){for(var F=0,U=0;U<H/2;U++){var B=8192*Math.round(R[2*U+1]/H)+Math.round(R[2*U]/H)+F;R[U]=67108863&B,F=B<67108864?0:B/67108864|0}return R},u.prototype.convert13b=function(R,H,F,U){for(var B=0,N=0;N<H;N++)F[2*N]=8191&(B+=0|R[N]),F[2*N+1]=8191&(B>>>=13),B>>>=13;for(N=2*H;N<U;++N)F[N]=0;n(0===B),n(0==(-8192&B))},u.prototype.stub=function(R){for(var H=new Array(R),F=0;F<R;F++)H[F]=0;return H},u.prototype.mulp=function(R,H,F){var U=2*this.guessLen13b(R.length,H.length),B=this.makeRBT(U),N=this.stub(U),J=new Array(U),Z=new Array(U),V=new Array(U),W=new Array(U),X=new Array(U),K=new Array(U),ne=F.words;ne.length=U,this.convert13b(R.words,R.length,J,U),this.convert13b(H.words,H.length,W,U),this.transform(J,N,Z,V,U,B),this.transform(W,N,X,K,U,B);for(var re=0;re<U;re++){var ae=Z[re]*X[re]-V[re]*K[re];V[re]=Z[re]*K[re]+V[re]*X[re],Z[re]=ae}return this.conjugate(Z,V,U),this.transform(Z,V,ne,N,U,B),this.conjugate(ne,N,U),this.normalize13b(ne,U),F.negative=R.negative^H.negative,F.length=R.length+H.length,F.strip()},i.prototype.mul=function(R){var H=new i(null);return H.words=new Array(this.length+R.length),this.mulTo(R,H)},i.prototype.mulf=function(R){var H=new i(null);return H.words=new Array(this.length+R.length),w(this,R,H)},i.prototype.imul=function(R){return this.clone().mulTo(R,this)},i.prototype.imuln=function(R){n("number"==typeof R),n(R<67108864);for(var H=0,F=0;F<this.length;F++){var U=(0|this.words[F])*R,B=(67108863&U)+(67108863&H);H>>=26,H+=U/67108864|0,H+=B>>>26,this.words[F]=67108863&B}return 0!==H&&(this.words[F]=H,this.length++),this},i.prototype.muln=function(R){return this.clone().imuln(R)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(R){var H=function(N){for(var J=new Array(N.bitLength()),Z=0;Z<J.length;Z++){var W=Z%26;J[Z]=(N.words[Z/26|0]&1<<W)>>>W}return J}(R);if(0===H.length)return new i(1);for(var F=this,U=0;U<H.length&&0===H[U];U++,F=F.sqr());if(++U<H.length)for(var B=F.sqr();U<H.length;U++,B=B.sqr())0!==H[U]&&(F=F.mul(B));return F},i.prototype.iushln=function(R){n("number"==typeof R&&R>=0);var H,F=R%26,U=(R-F)/26,B=67108863>>>26-F<<26-F;if(0!==F){var N=0;for(H=0;H<this.length;H++){var J=this.words[H]&B;this.words[H]=(0|this.words[H])-J<<F|N,N=J>>>26-F}N&&(this.words[H]=N,this.length++)}if(0!==U){for(H=this.length-1;H>=0;H--)this.words[H+U]=this.words[H];for(H=0;H<U;H++)this.words[H]=0;this.length+=U}return this.strip()},i.prototype.ishln=function(R){return n(0===this.negative),this.iushln(R)},i.prototype.iushrn=function(R,H,F){var U;n("number"==typeof R&&R>=0),U=H?(H-H%26)/26:0;var B=R%26,N=Math.min((R-B)/26,this.length),J=67108863^67108863>>>B<<B,Z=F;if(U-=N,U=Math.max(0,U),Z){for(var V=0;V<N;V++)Z.words[V]=this.words[V];Z.length=N}if(0!==N)if(this.length>N)for(this.length-=N,V=0;V<this.length;V++)this.words[V]=this.words[V+N];else this.words[0]=0,this.length=1;var W=0;for(V=this.length-1;V>=0&&(0!==W||V>=U);V--){var X=0|this.words[V];this.words[V]=W<<26-B|X>>>B,W=X&J}return Z&&0!==W&&(Z.words[Z.length++]=W),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(R,H,F){return n(0===this.negative),this.iushrn(R,H,F)},i.prototype.shln=function(R){return this.clone().ishln(R)},i.prototype.ushln=function(R){return this.clone().iushln(R)},i.prototype.shrn=function(R){return this.clone().ishrn(R)},i.prototype.ushrn=function(R){return this.clone().iushrn(R)},i.prototype.testn=function(R){n("number"==typeof R&&R>=0);var H=R%26,F=(R-H)/26;return!(this.length<=F||!(this.words[F]&1<<H))},i.prototype.imaskn=function(R){n("number"==typeof R&&R>=0);var H=R%26,F=(R-H)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=F?this:(0!==H&&F++,this.length=Math.min(F,this.length),0!==H&&(this.words[this.length-1]&=67108863^67108863>>>H<<H),this.strip())},i.prototype.maskn=function(R){return this.clone().imaskn(R)},i.prototype.iaddn=function(R){return n("number"==typeof R),n(R<67108864),R<0?this.isubn(-R):0!==this.negative?1===this.length&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},i.prototype._iaddn=function(R){this.words[0]+=R;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},i.prototype.isubn=function(R){if(n("number"==typeof R),n(R<67108864),R<0)return this.iaddn(-R);if(0!==this.negative)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},i.prototype.addn=function(R){return this.clone().iaddn(R)},i.prototype.subn=function(R){return this.clone().isubn(R)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(R,H,F){var U,B;this._expand(R.length+F);var J=0;for(U=0;U<R.length;U++){B=(0|this.words[U+F])+J;var Z=(0|R.words[U])*H;J=((B-=67108863&Z)>>26)-(Z/67108864|0),this.words[U+F]=67108863&B}for(;U<this.length-F;U++)J=(B=(0|this.words[U+F])+J)>>26,this.words[U+F]=67108863&B;if(0===J)return this.strip();for(n(-1===J),J=0,U=0;U<this.length;U++)J=(B=-(0|this.words[U])+J)>>26,this.words[U]=67108863&B;return this.negative=1,this.strip()},i.prototype._wordDiv=function(R,H){var F,U=this.clone(),B=R,N=0|B.words[B.length-1];0!=(F=26-this._countBits(N))&&(B=B.ushln(F),U.iushln(F),N=0|B.words[B.length-1]);var J,Z=U.length-B.length;if("mod"!==H){(J=new i(null)).length=Z+1,J.words=new Array(J.length);for(var V=0;V<J.length;V++)J.words[V]=0}var W=U.clone()._ishlnsubmul(B,1,Z);0===W.negative&&(U=W,J&&(J.words[Z]=1));for(var X=Z-1;X>=0;X--){var K=67108864*(0|U.words[B.length+X])+(0|U.words[B.length+X-1]);for(K=Math.min(K/N|0,67108863),U._ishlnsubmul(B,K,X);0!==U.negative;)K--,U.negative=0,U._ishlnsubmul(B,1,X),U.isZero()||(U.negative^=1);J&&(J.words[X]=K)}return J&&J.strip(),U.strip(),"div"!==H&&0!==F&&U.iushrn(F),{div:J||null,mod:U}},i.prototype.divmod=function(R,H,F){return n(!R.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===R.negative?(N=this.neg().divmod(R,H),"mod"!==H&&(U=N.div.neg()),"div"!==H&&(B=N.mod.neg(),F&&0!==B.negative&&B.iadd(R)),{div:U,mod:B}):0===this.negative&&0!==R.negative?(N=this.divmod(R.neg(),H),"mod"!==H&&(U=N.div.neg()),{div:U,mod:N.mod}):this.negative&R.negative?(N=this.neg().divmod(R.neg(),H),"div"!==H&&(B=N.mod.neg(),F&&0!==B.negative&&B.isub(R)),{div:N.div,mod:B}):R.length>this.length||this.cmp(R)<0?{div:new i(0),mod:this}:1===R.length?"div"===H?{div:this.divn(R.words[0]),mod:null}:"mod"===H?{div:null,mod:new i(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new i(this.modn(R.words[0]))}:this._wordDiv(R,H);var U,B,N},i.prototype.div=function(R){return this.divmod(R,"div",!1).div},i.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},i.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},i.prototype.divRound=function(R){var H=this.divmod(R);if(H.mod.isZero())return H.div;var F=0!==H.div.negative?H.mod.isub(R):H.mod,U=R.ushrn(1),B=R.andln(1),N=F.cmp(U);return N<0||1===B&&0===N?H.div:0!==H.div.negative?H.div.isubn(1):H.div.iaddn(1)},i.prototype.modn=function(R){n(R<=67108863);for(var H=67108864%R,F=0,U=this.length-1;U>=0;U--)F=(H*F+(0|this.words[U]))%R;return F},i.prototype.idivn=function(R){n(R<=67108863);for(var H=0,F=this.length-1;F>=0;F--){var U=(0|this.words[F])+67108864*H;this.words[F]=U/R|0,H=U%R}return this.strip()},i.prototype.divn=function(R){return this.clone().idivn(R)},i.prototype.egcd=function(R){n(0===R.negative),n(!R.isZero());var H=this,F=R.clone();H=0!==H.negative?H.umod(R):H.clone();for(var U=new i(1),B=new i(0),N=new i(0),J=new i(1),Z=0;H.isEven()&&F.isEven();)H.iushrn(1),F.iushrn(1),++Z;for(var V=F.clone(),W=H.clone();!H.isZero();){for(var X=0,K=1;!(H.words[0]&K)&&X<26;++X,K<<=1);if(X>0)for(H.iushrn(X);X-- >0;)(U.isOdd()||B.isOdd())&&(U.iadd(V),B.isub(W)),U.iushrn(1),B.iushrn(1);for(var ne=0,re=1;!(F.words[0]&re)&&ne<26;++ne,re<<=1);if(ne>0)for(F.iushrn(ne);ne-- >0;)(N.isOdd()||J.isOdd())&&(N.iadd(V),J.isub(W)),N.iushrn(1),J.iushrn(1);H.cmp(F)>=0?(H.isub(F),U.isub(N),B.isub(J)):(F.isub(H),N.isub(U),J.isub(B))}return{a:N,b:J,gcd:F.iushln(Z)}},i.prototype._invmp=function(R){n(0===R.negative),n(!R.isZero());var H=this,F=R.clone();H=0!==H.negative?H.umod(R):H.clone();for(var U,B=new i(1),N=new i(0),J=F.clone();H.cmpn(1)>0&&F.cmpn(1)>0;){for(var Z=0,V=1;!(H.words[0]&V)&&Z<26;++Z,V<<=1);if(Z>0)for(H.iushrn(Z);Z-- >0;)B.isOdd()&&B.iadd(J),B.iushrn(1);for(var W=0,X=1;!(F.words[0]&X)&&W<26;++W,X<<=1);if(W>0)for(F.iushrn(W);W-- >0;)N.isOdd()&&N.iadd(J),N.iushrn(1);H.cmp(F)>=0?(H.isub(F),B.isub(N)):(F.isub(H),N.isub(B))}return(U=0===H.cmpn(1)?B:N).cmpn(0)<0&&U.iadd(R),U},i.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var H=this.clone(),F=R.clone();H.negative=0,F.negative=0;for(var U=0;H.isEven()&&F.isEven();U++)H.iushrn(1),F.iushrn(1);for(;;){for(;H.isEven();)H.iushrn(1);for(;F.isEven();)F.iushrn(1);var B=H.cmp(F);if(B<0){var N=H;H=F,F=N}else if(0===B||0===F.cmpn(1))break;H.isub(F)}return F.iushln(U)},i.prototype.invm=function(R){return this.egcd(R).a.umod(R)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(R){return this.words[0]&R},i.prototype.bincn=function(R){n("number"==typeof R);var H=R%26,F=(R-H)/26,U=1<<H;if(this.length<=F)return this._expand(F+1),this.words[F]|=U,this;for(var B=U,N=F;0!==B&&N<this.length;N++){var J=0|this.words[N];B=(J+=B)>>>26,this.words[N]=J&=67108863}return 0!==B&&(this.words[N]=B,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(R){var H,F=R<0;if(0!==this.negative&&!F)return-1;if(0===this.negative&&F)return 1;if(this.strip(),this.length>1)H=1;else{F&&(R=-R),n(R<=67108863,"Number is too big");var U=0|this.words[0];H=U===R?0:U<R?-1:1}return 0!==this.negative?0|-H:H},i.prototype.cmp=function(R){if(0!==this.negative&&0===R.negative)return-1;if(0===this.negative&&0!==R.negative)return 1;var H=this.ucmp(R);return 0!==this.negative?0|-H:H},i.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var H=0,F=this.length-1;F>=0;F--){var U=0|this.words[F],B=0|R.words[F];if(U!==B){U<B?H=-1:U>B&&(H=1);break}}return H},i.prototype.gtn=function(R){return 1===this.cmpn(R)},i.prototype.gt=function(R){return 1===this.cmp(R)},i.prototype.gten=function(R){return this.cmpn(R)>=0},i.prototype.gte=function(R){return this.cmp(R)>=0},i.prototype.ltn=function(R){return-1===this.cmpn(R)},i.prototype.lt=function(R){return-1===this.cmp(R)},i.prototype.lten=function(R){return this.cmpn(R)<=0},i.prototype.lte=function(R){return this.cmp(R)<=0},i.prototype.eqn=function(R){return 0===this.cmpn(R)},i.prototype.eq=function(R){return 0===this.cmp(R)},i.red=function(R){return new I(R)},i.prototype.toRed=function(R){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),R.convertTo(this)._forceRed(R)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(R){return this.red=R,this},i.prototype.forceRed=function(R){return n(!this.red,"Already a number in reduction context"),this._forceRed(R)},i.prototype.redAdd=function(R){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},i.prototype.redIAdd=function(R){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},i.prototype.redSub=function(R){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},i.prototype.redISub=function(R){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},i.prototype.redShl=function(R){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},i.prototype.redMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},i.prototype.redIMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(R){return n(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var S={k256:null,p224:null,p192:null,p25519:null};function _(R,H){this.name=R,this.p=new i(H,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(R){if("string"==typeof R){var H=i._prime(R);this.m=H.p,this.prime=H}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function j(R){I.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var R=new i(null);return R.words=new Array(Math.ceil(this.n/13)),R},_.prototype.ireduce=function(R){var H,F=R;do{this.split(F,this.tmp),H=(F=(F=this.imulK(F)).iadd(this.tmp)).bitLength()}while(H>this.n);var U=H<this.n?-1:F.ucmp(this.p);return 0===U?(F.words[0]=0,F.length=1):U>0?F.isub(this.p):void 0!==F.strip?F.strip():F._strip(),F},_.prototype.split=function(R,H){R.iushrn(this.n,0,H)},_.prototype.imulK=function(R){return R.imul(this.k)},a(E,_),E.prototype.split=function(R,H){for(var F=4194303,U=Math.min(R.length,9),B=0;B<U;B++)H.words[B]=R.words[B];if(H.length=U,R.length<=9)return R.words[0]=0,void(R.length=1);var N=R.words[9];for(H.words[H.length++]=N&F,B=10;B<R.length;B++){var J=0|R.words[B];R.words[B-10]=(J&F)<<4|N>>>22,N=J}R.words[B-10]=N>>>=22,R.length-=0===N&&R.length>10?10:9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var H=0,F=0;F<R.length;F++){var U=0|R.words[F];R.words[F]=67108863&(H+=977*U),H=64*U+(H/67108864|0)}return 0===R.words[R.length-1]&&(R.length--,0===R.words[R.length-1]&&R.length--),R},a(L,_),a(C,_),a(P,_),P.prototype.imulK=function(R){for(var H=0,F=0;F<R.length;F++){var U=19*(0|R.words[F])+H,B=67108863&U;U>>>=26,R.words[F]=B,H=U}return 0!==H&&(R.words[R.length++]=H),R},i._prime=function(R){if(S[R])return S[R];var H;if("k256"===R)H=new E;else if("p224"===R)H=new L;else if("p192"===R)H=new C;else{if("p25519"!==R)throw new Error("Unknown prime "+R);H=new P}return S[R]=H,H},I.prototype._verify1=function(R){n(0===R.negative,"red works only with positives"),n(R.red,"red works only with red numbers")},I.prototype._verify2=function(R,H){n(0==(R.negative|H.negative),"red works only with positives"),n(R.red&&R.red===H.red,"red works only with red numbers")},I.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},I.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},I.prototype.add=function(R,H){this._verify2(R,H);var F=R.add(H);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},I.prototype.iadd=function(R,H){this._verify2(R,H);var F=R.iadd(H);return F.cmp(this.m)>=0&&F.isub(this.m),F},I.prototype.sub=function(R,H){this._verify2(R,H);var F=R.sub(H);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},I.prototype.isub=function(R,H){this._verify2(R,H);var F=R.isub(H);return F.cmpn(0)<0&&F.iadd(this.m),F},I.prototype.shl=function(R,H){return this._verify1(R),this.imod(R.ushln(H))},I.prototype.imul=function(R,H){return this._verify2(R,H),this.imod(R.imul(H))},I.prototype.mul=function(R,H){return this._verify2(R,H),this.imod(R.mul(H))},I.prototype.isqr=function(R){return this.imul(R,R.clone())},I.prototype.sqr=function(R){return this.mul(R,R)},I.prototype.sqrt=function(R){if(R.isZero())return R.clone();var H=this.m.andln(3);if(n(H%2==1),3===H){var F=this.m.add(new i(1)).iushrn(2);return this.pow(R,F)}for(var U=this.m.subn(1),B=0;!U.isZero()&&0===U.andln(1);)B++,U.iushrn(1);n(!U.isZero());var N=new i(1).toRed(this),J=N.redNeg(),Z=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new i(2*V*V).toRed(this);0!==this.pow(V,Z).cmp(J);)V.redIAdd(J);for(var W=this.pow(V,U),X=this.pow(R,U.addn(1).iushrn(1)),K=this.pow(R,U),ne=B;0!==K.cmp(N);){for(var re=K,ae=0;0!==re.cmp(N);ae++)re=re.redSqr();n(ae<ne);var le=this.pow(W,new i(1).iushln(ne-ae-1));X=X.redMul(le),W=le.redSqr(),K=K.redMul(W),ne=ae}return X},I.prototype.invm=function(R){var H=R._invmp(this.m);return 0!==H.negative?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},I.prototype.pow=function(R,H){if(H.isZero())return new i(1).toRed(this);if(0===H.cmpn(1))return R.clone();var F=new Array(16);F[0]=new i(1).toRed(this),F[1]=R;for(var U=2;U<F.length;U++)F[U]=this.mul(F[U-1],R);var B=F[0],N=0,J=0,Z=H.bitLength()%26;for(0===Z&&(Z=26),U=H.length-1;U>=0;U--){for(var V=H.words[U],W=Z-1;W>=0;W--){var X=V>>W&1;B!==F[0]&&(B=this.sqr(B)),0!==X||0!==N?(N<<=1,N|=X,(4==++J||0===U&&0===W)&&(B=this.mul(B,F[N]),J=0,N=0)):J=0}Z=26}return B},I.prototype.convertTo=function(R){var H=R.umod(this.m);return H===R?H.clone():H},I.prototype.convertFrom=function(R){var H=R.clone();return H.red=null,H},i.mont=function(R){return new j(R)},a(j,I),j.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},j.prototype.convertFrom=function(R){var H=this.imod(R.mul(this.rinv));return H.red=null,H},j.prototype.imul=function(R,H){if(R.isZero()||H.isZero())return R.words[0]=0,R.length=1,R;var F=R.imul(H),U=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=F.isub(U).iushrn(this.shift),N=B;return B.cmp(this.m)>=0?N=B.isub(this.m):B.cmpn(0)<0&&(N=B.iadd(this.m)),N._forceRed(this)},j.prototype.mul=function(R,H){if(R.isZero()||H.isZero())return new i(0)._forceRed(this);var F=R.mul(H),U=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=F.isub(U).iushrn(this.shift),N=B;return B.cmp(this.m)>=0?N=B.isub(this.m):B.cmpn(0)<0&&(N=B.iadd(this.m)),N._forceRed(this)},j.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}}(d=t.nmd(d),this)},2692:function(d){"use strict";d.exports=function(s){var t,o,r,n=s.length,a=0;for(t=0;t<n;++t)a+=s[t].length;var i=new Array(a),c=0;for(t=0;t<n;++t){var h=s[t],f=h.length;for(o=0;o<f;++o){var x=i[c++]=new Array(f-1),v=0;for(r=0;r<f;++r)r!==o&&(x[v++]=h[r]);if(1&o){var g=x[1];x[1]=x[0],x[0]=g}}}return i}},2569:function(d,s,t){"use strict";d.exports=function(g,y,p){switch(arguments.length){case 1:return function x(g){return o=[],h(g,g,f,!0),o}(g);case 2:return"function"==typeof y?h(g,g,y,!0):function v(g,y){return o=[],h(g,y,f,!1),o}(g,y);case 3:return h(g,y,p,!1);default:throw new Error("box-intersect: Invalid arguments")}};var o,r=t(5306),n=t(1390),a=t(2337);function i(g,y){for(var p=0;p<g;++p)if(!(y[p]<=y[p+g]))return!0;return!1}function c(g,y,p,m){for(var w=0,u=0,S=0,_=g.length;S<_;++S){var E=g[S];if(!i(y,E)){for(var L=0;L<2*y;++L)p[w++]=E[L];m[u++]=S}}return u}function h(g,y,p,m){var w=g.length,u=y.length;if(!(w<=0||u<=0)){var S=g[0].length>>>1;if(!(S<=0)){var _,E=r.mallocDouble(2*S*w),L=r.mallocInt32(w);if((w=c(g,S,E,L))>0){if(1===S&&m)n.init(w),_=n.sweepComplete(S,p,0,w,E,L,0,w,E,L);else{var C=r.mallocDouble(2*S*u),P=r.mallocInt32(u);(u=c(y,S,C,P))>0&&(n.init(w+u),_=1===S?n.sweepBipartite(S,p,0,w,E,L,0,u,C,P):a(S,p,m,w,E,L,u,C,P),r.free(C),r.free(P))}r.free(E),r.free(L)}return _}}}function f(g,y){o.push([g,y])}},7333:function(d,s){"use strict";function t(o){return o?function(r,n,a,i,c,h,f,x,v,g,y){return c-i>v-x?function(p,m,w,u,S,_,E,L,C,P,I){for(var j=2*p,R=u,H=j*u;R<S;++R,H+=j){var F=_[m+H],U=_[m+H+p],B=E[R];e:for(var N=L,J=j*L;N<C;++N,J+=j){var W=I[N];if(!(P[m+J+p]<F||U<P[m+J])){for(var X=m+1;X<p;++X)if(_[X+p+H]<P[X+J]||P[X+p+J]<_[X+H])continue e;var le=w(B,W);if(void 0!==le)return le}}}}(r,n,a,i,c,h,f,x,v,g,y):function(p,m,w,u,S,_,E,L,C,P,I){for(var j=2*p,R=L,H=j*L;R<C;++R,H+=j){var F=P[m+H],U=P[m+H+p],B=I[R];e:for(var N=u,J=j*u;N<S;++N,J+=j){var W=E[N];if(!(U<_[m+J]||_[m+J+p]<F)){for(var X=m+1;X<p;++X)if(_[X+p+J]<P[X+H]||P[X+p+H]<_[X+J])continue e;var le=w(W,B);if(void 0!==le)return le}}}}(r,n,a,i,c,h,f,x,v,g,y)}:function(r,n,a,i,c,h,f,x,v,g,y,p){return h-c>g-v?i?function(m,w,u,S,_,E,L,C,P,I,j){for(var R=2*m,H=S,F=R*S;H<_;++H,F+=R){var U=E[w+F],B=E[w+F+m],N=L[H];e:for(var J=C,Z=R*C;J<P;++J,Z+=R){var V=I[w+Z],W=j[J];if(!(V<=U||B<V)){for(var X=w+1;X<m;++X)if(E[X+m+F]<I[X+Z]||I[X+m+Z]<E[X+F])continue e;var le=u(W,N);if(void 0!==le)return le}}}}(r,n,a,c,h,f,x,v,g,y,p):function(m,w,u,S,_,E,L,C,P,I,j){for(var R=2*m,H=S,F=R*S;H<_;++H,F+=R){var U=E[w+F],B=E[w+F+m],N=L[H];e:for(var J=C,Z=R*C;J<P;++J,Z+=R){var V=I[w+Z],W=j[J];if(!(V<U||B<V)){for(var X=w+1;X<m;++X)if(E[X+m+F]<I[X+Z]||I[X+m+Z]<E[X+F])continue e;var le=u(N,W);if(void 0!==le)return le}}}}(r,n,a,c,h,f,x,v,g,y,p):i?function(m,w,u,S,_,E,L,C,P,I,j){for(var R=2*m,H=C,F=R*C;H<P;++H,F+=R){var U=I[w+F],B=j[H];e:for(var N=S,J=R*S;N<_;++N,J+=R){var W=L[N];if(!(U<=E[w+J]||E[w+J+m]<U)){for(var X=w+1;X<m;++X)if(E[X+m+J]<I[X+F]||I[X+m+F]<E[X+J])continue e;var le=u(B,W);if(void 0!==le)return le}}}}(r,n,a,c,h,f,x,v,g,y,p):function(m,w,u,S,_,E,L,C,P,I,j){for(var R=2*m,H=C,F=R*C;H<P;++H,F+=R){var U=I[w+F],B=j[H];e:for(var N=S,J=R*S;N<_;++N,J+=R){var W=L[N];if(!(U<E[w+J]||E[w+J+m]<U)){for(var X=w+1;X<m;++X)if(E[X+m+J]<I[X+F]||I[X+m+F]<E[X+J])continue e;var le=u(W,B);if(void 0!==le)return le}}}}(r,n,a,c,h,f,x,v,g,y,p)}}s.partial=t(!1),s.full=t(!0)},2337:function(d,s,t){"use strict";d.exports=function(L,C,P,I,j,R,H,F,U){!function(Ie,Pe){var ze=8*r.log2(Pe+1)*(Ie+1)|0,ce=r.nextPow2(6*ze);w.length<ce&&(o.free(w),w=o.mallocInt32(ce));var ge=r.nextPow2(2*ze);u.length<ge&&(o.free(u),u=o.mallocDouble(ge))}(L,I+H);var B,N=0,J=2*L;for(S(N++,0,0,I,0,H,P?16:0,-1/0,1/0),P||S(N++,0,0,H,0,I,1,-1/0,1/0);N>0;){var Z=6*(N-=1),V=w[Z],W=w[Z+1],X=w[Z+2],K=w[Z+3],ne=w[Z+4],re=w[Z+5],ae=2*N,le=u[ae],pe=u[ae+1],xe=1&re,ye=!!(16&re),se=j,fe=R,Ee=F,de=U;if(xe&&(se=F,fe=U,Ee=j,de=R),!(2&re&&(X=g(L,V,W,X,se,fe,pe),W>=X)||4&re&&(W=y(L,V,W,X,se,fe,le))>=X)){var we=X-W,ke=ne-K;if(ye){if(L*we*(we+ke)<4194304){if(void 0!==(B=c.scanComplete(L,V,C,W,X,se,fe,K,ne,Ee,de)))return B;continue}}else{if(L*Math.min(we,ke)<128){if(void 0!==(B=a(L,V,C,xe,W,X,se,fe,K,ne,Ee,de)))return B;continue}if(L*we*ke<4194304){if(void 0!==(B=c.scanBipartite(L,V,C,xe,W,X,se,fe,K,ne,Ee,de)))return B;continue}}var Te=x(L,V,W,X,se,fe,le,pe);if(W<Te)if(L*(Te-W)<128){if(void 0!==(B=i(L,V+1,C,W,Te,se,fe,K,ne,Ee,de)))return B}else if(V===L-2){if(void 0!==(B=xe?c.sweepBipartite(L,C,K,ne,Ee,de,W,Te,se,fe):c.sweepBipartite(L,C,W,Te,se,fe,K,ne,Ee,de)))return B}else S(N++,V+1,W,Te,K,ne,xe,-1/0,1/0),S(N++,V+1,K,ne,W,Te,1^xe,-1/0,1/0);if(Te<X){var $=h(L,V,K,ne,Ee,de),oe=Ee[J*$+V],he=v(L,V,$,ne,Ee,de,oe);if(he<ne&&S(N++,V,Te,X,he,ne,(4|xe)+(ye?16:0),oe,pe),K<$&&S(N++,V,Te,X,K,$,(2|xe)+(ye?16:0),le,oe),$+1===he){if(void 0!==(B=ye?E(L,V,C,Te,X,se,fe,$,Ee,de[$]):_(L,V,C,xe,Te,X,se,fe,$,Ee,de[$])))return B}else if($<he){var me;if(ye){if(Te<(me=p(L,V,Te,X,se,fe,oe))){var Me=v(L,V,Te,me,se,fe,oe);if(V===L-2){if(Te<Me&&void 0!==(B=c.sweepComplete(L,C,Te,Me,se,fe,$,he,Ee,de))||Me<me&&void 0!==(B=c.sweepBipartite(L,C,Me,me,se,fe,$,he,Ee,de)))return B}else Te<Me&&S(N++,V+1,Te,Me,$,he,16,-1/0,1/0),Me<me&&(S(N++,V+1,Me,me,$,he,0,-1/0,1/0),S(N++,V+1,$,he,Me,me,1,-1/0,1/0))}}else Te<(me=xe?m(L,V,Te,X,se,fe,oe):p(L,V,Te,X,se,fe,oe))&&(V===L-2?B=xe?c.sweepBipartite(L,C,$,he,Ee,de,Te,me,se,fe):c.sweepBipartite(L,C,Te,me,se,fe,$,he,Ee,de):(S(N++,V+1,Te,me,$,he,xe,-1/0,1/0),S(N++,V+1,$,he,Te,me,1^xe,-1/0,1/0)))}}}}};var o=t(5306),r=t(2288),n=t(7333),a=n.partial,i=n.full,c=t(1390),h=t(2464),f=t(122),x=f("!(lo>=p0)&&!(p1>=hi)"),v=f("lo===p0"),g=f("lo<p0"),y=f("hi<=p0"),p=f("lo<=p0&&p0<=hi"),m=f("lo<p0&&p0<=hi"),w=o.mallocInt32(1024),u=o.mallocDouble(1024);function S(L,C,P,I,j,R,H,F,U){var B=6*L;w[B]=C,w[B+1]=P,w[B+2]=I,w[B+3]=j,w[B+4]=R,w[B+5]=H;var N=2*L;u[N]=F,u[N+1]=U}function _(L,C,P,I,j,R,H,F,U,B,N){var J=2*L,Z=U*J,V=B[Z+C];e:for(var W=j,X=j*J;W<R;++W,X+=J){var K=H[X+C],ne=H[X+C+L];if(!(V<K||ne<V||I&&V===K)){for(var re,ae=F[W],le=C+1;le<L;++le)if(K=H[X+le],(ne=H[X+le+L])<B[Z+le]||B[Z+le+L]<K)continue e;if(void 0!==(re=I?P(N,ae):P(ae,N)))return re}}}function E(L,C,P,I,j,R,H,F,U,B){var N=2*L,J=F*N,Z=U[J+C];e:for(var V=I,W=I*N;V<j;++V,W+=N){var X=H[V];if(X!==B){var K=R[W+C],ne=R[W+C+L];if(!(Z<K||ne<Z)){for(var re=C+1;re<L;++re)if(K=R[W+re],(ne=R[W+re+L])<U[J+re]||U[J+re+L]<K)continue e;var pe=P(X,B);if(void 0!==pe)return pe}}}}},2464:function(d,s,t){"use strict";d.exports=function(n,a,i,c,h,f){if(c<=i+1)return i;for(var x=i,v=c,g=c+i>>>1,y=2*n,p=g,m=h[y*g+a];x<v;){if(v-x<8){r(n,a,x,v,h,f),m=h[y*g+a];break}var w=v-x,u=Math.random()*w+x|0,S=h[y*u+a],_=Math.random()*w+x|0,E=h[y*_+a],L=Math.random()*w+x|0,C=h[y*L+a];S<=E?C>=E?(p=_,m=E):S>=C?(p=u,m=S):(p=L,m=C):E>=C?(p=_,m=E):C>=S?(p=u,m=S):(p=L,m=C);for(var P=y*(v-1),I=y*p,j=0;j<y;++j,++P,++I){var R=h[P];h[P]=h[I],h[I]=R}var H=f[v-1];for(f[v-1]=f[p],f[p]=H,P=y*(v-1),I=y*(p=o(n,a,x,v-1,h,f,m)),j=0;j<y;++j,++P,++I)R=h[P],h[P]=h[I],h[I]=R;if(H=f[v-1],f[v-1]=f[p],f[p]=H,g<p){for(v=p-1;x<v&&h[y*(v-1)+a]===m;)v-=1;v+=1}else{if(!(p<g))break;for(x=p+1;x<v&&h[y*x+a]===m;)x+=1}}return o(n,a,i,g,h,f,h[y*g+a])};var o=t(122)("lo<p0");function r(n,a,i,c,h,f){for(var x=2*n,v=x*(i+1)+a,g=i+1;g<c;++g,v+=x)for(var y=h[v],p=g,m=x*(g-1);p>i&&h[m+a]>y;--p,m-=x){for(var w=m,u=m+x,S=0;S<x;++S,++w,++u){var _=h[w];h[w]=h[u],h[u]=_}var E=f[p];f[p]=f[p-1],f[p-1]=E}}},122:function(d){"use strict";d.exports=function(t){return s[t]};var s={"lo===p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]===c)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]<c)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<=p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,x=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"hi<=p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,x=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0&&p0<=hi":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h)if(a[f+g]<c&&c<=a[f+y])if(v===p)v+=1,x+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[x],a[x++]=S}var _=i[p];i[p]=i[v],i[v++]=_}return v},"lo<=p0&&p0<=hi":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h)if(a[f+g]<=c&&c<=a[f+y])if(v===p)v+=1,x+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[x],a[x++]=S}var _=i[p];i[p]=i[v],i[v++]=_}return v},"!(lo>=p0)&&!(p1>=hi)":function(t,o,r,n,a,i,c,h){for(var f=2*t,x=f*r,v=x,g=r,y=o,p=t+o,m=r;n>m;++m,x+=f)if(!(a[x+y]>=c||h>=a[x+p]))if(g===m)g+=1,v+=f;else{for(var S=0;f>S;++S){var _=a[x+S];a[x+S]=a[v],a[v++]=_}var E=i[m];i[m]=i[g],i[g++]=E}return g}}},309:function(d){"use strict";function s(h,f,x){for(var v=2*(h+1),g=h+1;g<=f;++g){for(var y=x[v++],p=x[v++],m=g,w=v-2;m-- >h;){var u=x[w-2],S=x[w-1];if(u<y||u===y&&S<p)break;x[w]=u,x[w+1]=S,w-=2}x[w]=y,x[w+1]=p}}function t(h,f,x){var v=x[h*=2],g=x[h+1];x[h]=x[f*=2],x[h+1]=x[f+1],x[f]=v,x[f+1]=g}function o(h,f,x){x[h*=2]=x[f*=2],x[h+1]=x[f+1]}function r(h,f,x,v){x*=2;var g=v[h*=2],y=v[h+1];v[h]=v[f*=2],v[h+1]=v[f+1],v[f]=v[x],v[f+1]=v[x+1],v[x]=g,v[x+1]=y}function n(h,f,x,v,g){g[h*=2]=g[f*=2],g[f]=x,g[h+1]=g[f+1],g[f+1]=v}function a(h,f,x){var v=x[h*=2],g=x[f*=2];return!(v<g)&&(v!==g||x[h+1]>x[f+1])}function i(h,f,x,v){var g=v[h*=2];return g<f||g===f&&v[h+1]<x}function c(h,f,x){var v=(f-h+1)/6|0,g=h+v,y=f-v,p=h+f>>1,m=p-v,w=p+v,u=g,S=m,_=p,E=w,L=y,C=h+1,P=f-1,I=0;a(u,S,x)&&(I=u,u=S,S=I),a(E,L,x)&&(I=E,E=L,L=I),a(u,_,x)&&(I=u,u=_,_=I),a(S,_,x)&&(I=S,S=_,_=I),a(u,E,x)&&(I=u,u=E,E=I),a(_,E,x)&&(I=_,_=E,E=I),a(S,L,x)&&(I=S,S=L,L=I),a(S,_,x)&&(I=S,S=_,_=I),a(E,L,x)&&(I=E,E=L,L=I);for(var j=x[2*S],R=x[2*S+1],H=x[2*E],F=x[2*E+1],U=2*u,B=2*_,N=2*L,J=2*g,Z=2*p,V=2*y,W=0;W<2;++W){var K=x[B+W],ne=x[N+W];x[J+W]=x[U+W],x[Z+W]=K,x[V+W]=ne}o(m,h,x),o(w,f,x);for(var re=C;re<=P;++re)if(i(re,j,R,x))re!==C&&t(re,C,x),++C;else if(!i(re,H,F,x))for(;;){if(i(P,H,F,x)){i(P,j,R,x)?(r(re,C,P,x),++C,--P):(t(re,P,x),--P);break}if(--P<re)break}n(h,C-1,j,R,x),n(f,P+1,H,F,x),C-2-h<=32?s(h,C-2,x):c(h,C-2,x),f-(P+2)<=32?s(P+2,f,x):c(P+2,f,x),P-C<=32?s(C,P,x):c(C,P,x)}d.exports=function(h,f){f<=128?s(0,f-1,h):c(0,f-1,h)}},1390:function(d,s,t){"use strict";d.exports={init:function(w){var u=r.nextPow2(w);c.length<u&&(o.free(c),c=o.mallocInt32(u)),h.length<u&&(o.free(h),h=o.mallocInt32(u)),f.length<u&&(o.free(f),f=o.mallocInt32(u)),x.length<u&&(o.free(x),x=o.mallocInt32(u)),v.length<u&&(o.free(v),v=o.mallocInt32(u)),g.length<u&&(o.free(g),g=o.mallocInt32(u));var S=8*u;y.length<S&&(o.free(y),y=o.mallocDouble(S))},sweepBipartite:function(w,u,S,_,E,L,C,P,I,j){for(var R=0,H=2*w,F=w-1,U=H-1,B=S;B<_;++B){var N=L[B],J=H*B;y[R++]=E[J+F],y[R++]=-(N+1),y[R++]=E[J+U],y[R++]=N}for(B=C;B<P;++B){N=j[B]+a;var Z=H*B;y[R++]=I[Z+F],y[R++]=-N,y[R++]=I[Z+U],y[R++]=N}var V=R>>>1;n(y,V);var W=0,X=0;for(B=0;B<V;++B){var K=0|y[2*B+1];if(K>=a)p(f,x,X--,K=K-a|0);else if(K>=0)p(c,h,W--,K);else if(K<=-268435456){K=-K-a|0;for(var ne=0;ne<W;++ne)if(void 0!==(re=u(c[ne],K)))return re;m(f,x,X++,K)}else{for(K=-K-1|0,ne=0;ne<X;++ne){var re;if(void 0!==(re=u(K,f[ne])))return re}m(c,h,W++,K)}}},sweepComplete:function(w,u,S,_,E,L,C,P,I,j){for(var R=0,H=2*w,F=w-1,U=H-1,B=S;B<_;++B){var N=L[B]+1<<1,J=H*B;y[R++]=E[J+F],y[R++]=-N,y[R++]=E[J+U],y[R++]=N}for(B=C;B<P;++B){N=j[B]+1<<1;var Z=H*B;y[R++]=I[Z+F],y[R++]=1|-N,y[R++]=I[Z+U],y[R++]=1|N}var V=R>>>1;n(y,V);var W=0,X=0,K=0;for(B=0;B<V;++B){var ne=0|y[2*B+1],re=1&ne;if(B<V-1&&ne>>1==y[2*B+3]>>1&&(re=2,B+=1),ne<0){for(var ae=-(ne>>1)-1,le=0;le<K;++le)if(void 0!==(pe=u(v[le],ae)))return pe;if(0!==re)for(le=0;le<W;++le)if(void 0!==(pe=u(c[le],ae)))return pe;if(1!==re)for(le=0;le<X;++le){var pe;if(void 0!==(pe=u(f[le],ae)))return pe}0===re?m(c,h,W++,ae):1===re?m(f,x,X++,ae):2===re&&m(v,g,K++,ae)}else ae=(ne>>1)-1,0===re?p(c,h,W--,ae):1===re?p(f,x,X--,ae):2===re&&p(v,g,K--,ae)}},scanBipartite:function(w,u,S,_,E,L,C,P,I,j,R,H){var F=0,U=2*w,B=u,N=u+w,J=1,Z=1;_?Z=a:J=a;for(var V=E;V<L;++V){var W=V+J,X=U*V;y[F++]=C[X+B],y[F++]=-W,y[F++]=C[X+N],y[F++]=W}for(V=I;V<j;++V)W=V+Z,y[F++]=R[U*V+B],y[F++]=-W;var ne=F>>>1;n(y,ne);var re=0;for(V=0;V<ne;++V){var ae=0|y[2*V+1];if(ae<0){var le=!1;if((W=-ae)>=a?(le=!_,W-=a):(le=!!_,W-=1),le)m(c,h,re++,W);else{var pe=H[W],xe=U*W,ye=R[xe+u+1],se=R[xe+u+1+w];e:for(var fe=0;fe<re;++fe){var Ee=c[fe],de=U*Ee;if(!(se<C[de+u+1]||C[de+u+1+w]<ye)){for(var we=u+2;we<w;++we)if(R[xe+we+w]<C[de+we]||C[de+we+w]<R[xe+we])continue e;var ke,Te=P[Ee];if(void 0!==(ke=_?S(pe,Te):S(Te,pe)))return ke}}}}else p(c,h,re--,ae-J)}},scanComplete:function(w,u,S,_,E,L,C,P,I,j,R){for(var H=0,F=2*w,U=u,B=u+w,N=_;N<E;++N){var J=N+a,Z=F*N;y[H++]=L[Z+U],y[H++]=-J,y[H++]=L[Z+B],y[H++]=J}for(N=P;N<I;++N)J=N+1,y[H++]=j[F*N+U],y[H++]=-J;var W=H>>>1;n(y,W);var X=0;for(N=0;N<W;++N){var K=0|y[2*N+1];if(K<0)if((J=-K)>=a)c[X++]=J-a;else{var ne=R[J-=1],re=F*J,ae=j[re+u+1],le=j[re+u+1+w];e:for(var pe=0;pe<X;++pe){var xe=c[pe],ye=C[xe];if(ye===ne)break;var se=F*xe;if(!(le<L[se+u+1]||L[se+u+1+w]<ae)){for(var fe=u+2;fe<w;++fe)if(j[re+fe+w]<L[se+fe]||L[se+fe+w]<j[re+fe])continue e;var Ee=S(ye,ne);if(void 0!==Ee)return Ee}}}else{for(J=K-a,pe=X-1;pe>=0;--pe)if(c[pe]===J){for(fe=pe+1;fe<X;++fe)c[fe-1]=c[fe];break}--X}}}};var o=t(5306),r=t(2288),n=t(309),a=1<<28,i=1024,c=o.mallocInt32(i),h=o.mallocInt32(i),f=o.mallocInt32(i),x=o.mallocInt32(i),v=o.mallocInt32(i),g=o.mallocInt32(i),y=o.mallocDouble(8192);function p(w,u,S,_){var E=u[_],L=w[S-1];w[E]=L,u[L]=E}function m(w,u,S,_){w[S]=_,u[_]=S}},7761:function(d,s,t){"use strict";var o=t(9971),r=t(743),n=t(2161),a=t(7098);function i(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function c(f,x){return f[0]-x[0]||f[1]-x[1]}function h(f,x,v){return x in f?f[x]:v}d.exports=function(f,x,v){Array.isArray(x)?(v=v||{},x=x||[]):(v=x||{},x=[]);var g=!!h(v,"delaunay",!0),y=!!h(v,"interior",!0),p=!!h(v,"exterior",!0),m=!!h(v,"infinity",!1);if(!y&&!p||0===f.length)return[];var w=o(f,x);if(g||y!==p||m){for(var u=r(f.length,x.map(i).sort(c)),S=0;S<w.length;++S){var _=w[S];u.addTriangle(_[0],_[1],_[2])}return g&&n(f,u),p?y?m?a(u,0,m):u.cells():a(u,1,m):a(u,-1)}return w}},2161:function(d,s,t){"use strict";var o=t(2227)[4];function r(n,a,i,c,h,f){var x=a.opposite(c,h);if(!(x<0)){if(h<c){var v=c;c=h,h=v,v=f,f=x,x=v}a.isConstraint(c,h)||o(n[c],n[h],n[f],n[x])<0&&i.push(c,h)}}t(5070),d.exports=function(n,a){for(var i=[],c=n.length,h=a.stars,f=0;f<c;++f)for(var x=h[f],v=1;v<x.length;v+=2)if(!((m=x[v])<f||a.isConstraint(f,m))){for(var g=x[v-1],y=-1,p=1;p<x.length;p+=2)if(x[p-1]===m){y=x[p];break}y<0||o(n[f],n[m],n[g],n[y])<0&&i.push(f,m)}for(;i.length>0;){for(var m=i.pop(),w=(g=-1,y=-1,x=h[f=i.pop()],1);w<x.length;w+=2){var u=x[w-1],S=x[w];u===m?y=S:S===m&&(g=u)}g<0||y<0||o(n[f],n[m],n[g],n[y])>=0||(a.flip(f,m),r(n,a,i,g,f,y),r(n,a,i,f,y,g),r(n,a,i,y,m,g),r(n,a,i,m,g,y))}}},7098:function(d,s,t){"use strict";var o,r=t(5070);function n(i,c,h,f,x,v,g){this.cells=i,this.neighbor=c,this.flags=f,this.constraint=h,this.active=x,this.next=v,this.boundary=g}function a(i,c){return i[0]-c[0]||i[1]-c[1]||i[2]-c[2]}d.exports=function(i,c,h){var f=function(C,P){for(var I=C.cells(),j=I.length,R=0;R<j;++R){var H=(K=I[R])[0],F=K[1],U=K[2];F<U?F<H&&(K[0]=F,K[1]=U,K[2]=H):U<H&&(K[0]=U,K[1]=H,K[2]=F)}I.sort(a);var B=new Array(j);for(R=0;R<B.length;++R)B[R]=0;var N=[],J=[],Z=new Array(3*j),V=new Array(3*j),W=null;P&&(W=[]);var X=new n(I,Z,V,B,N,J,W);for(R=0;R<j;++R)for(var K=I[R],ne=0;ne<3;++ne){var re=Z[3*R+ne]=X.locate(F=K[(ne+1)%3],H=K[ne],C.opposite(F,H)),ae=V[3*R+ne]=C.isConstraint(H,F);re<0&&(ae?J.push(R):(N.push(R),B[R]=1),P&&W.push([F,H,-1]))}return X}(i,h);if(0===c)return h?f.cells.concat(f.boundary):f.cells;for(var x=1,v=f.active,g=f.next,y=f.flags,p=f.cells,m=f.constraint,w=f.neighbor;v.length>0||g.length>0;){for(;v.length>0;){var u=v.pop();if(y[u]!==-x){y[u]=x;for(var S=0;S<3;++S){var _=w[3*u+S];_>=0&&0===y[_]&&(m[3*u+S]?g.push(_):(v.push(_),y[_]=x))}}}var E=g;g=v,v=E,g.length=0,x=-x}var L=function(C,P,I){for(var j=0,R=0;R<C.length;++R)P[R]===I&&(C[j++]=C[R]);return C.length=j,C}(p,y,c);return h?L.concat(f.boundary):L},n.prototype.locate=(o=[0,0,0],function(i,c,h){var f=i,x=c,v=h;return c<h?c<i&&(f=c,x=h,v=i):h<i&&(f=h,x=i,v=c),f<0?-1:(o[0]=f,o[1]=x,o[2]=v,r.eq(this.cells,o,a))})},9971:function(d,s,t){"use strict";var o=t(5070),r=t(417)[3];function n(g,y,p,m,w){this.a=g,this.b=y,this.idx=p,this.lowerIds=m,this.upperIds=w}function a(g,y,p,m){this.a=g,this.b=y,this.type=p,this.idx=m}function i(g,y){var p=g.a[0]-y.a[0]||g.a[1]-y.a[1]||g.type-y.type;return p||(0!==g.type&&(p=r(g.a,g.b,y.b))?p:g.idx-y.idx)}function c(g,y){return r(g.a,g.b,y)}function h(g,y,p,m,w){for(var u=o.lt(y,m,c),S=o.gt(y,m,c),_=u;_<S;++_){for(var E=y[_],L=E.lowerIds,C=L.length;C>1&&r(p[L[C-2]],p[L[C-1]],m)>0;)g.push([L[C-1],L[C-2],w]),C-=1;L.length=C,L.push(w);var P=E.upperIds;for(C=P.length;C>1&&r(p[P[C-2]],p[P[C-1]],m)<0;)g.push([P[C-2],P[C-1],w]),C-=1;P.length=C,P.push(w)}}function f(g,y){var p;return(p=g.a[0]<y.a[0]?r(g.a,g.b,y.a):r(y.b,y.a,g.a))?p:(p=y.b[0]<g.b[0]?r(g.a,g.b,y.b):r(y.b,y.a,g.b))||g.idx-y.idx}function x(g,y,p){var m=o.le(g,p,f),w=g[m],u=w.upperIds,S=u[u.length-1];w.upperIds=[S],g.splice(m+1,0,new n(p.a,p.b,p.idx,[S],u))}function v(g,y,p){var m=p.a;p.a=p.b,p.b=m;var w=o.eq(g,p,f);g[w-1].upperIds=g[w].upperIds,g.splice(w,1)}d.exports=function(g,y){for(var p=g.length,m=y.length,w=[],u=0;u<p;++u)w.push(new a(g[u],null,0,u));for(u=0;u<m;++u){var S=y[u],_=g[S[0]],E=g[S[1]];_[0]<E[0]?w.push(new a(_,E,2,u),new a(E,_,1,u)):_[0]>E[0]&&w.push(new a(E,_,2,u),new a(_,E,1,u))}w.sort(i);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[],[],[])],P=[],I=(u=0,w.length);u<I;++u){var j=w[u],R=j.type;0===R?h(P,C,g,j.a,j.idx):2===R?x(C,0,j):v(C,0,j)}return P}},743:function(d,s,t){"use strict";var o=t(5070);function r(i,c){this.stars=i,this.edges=c}d.exports=function(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=[];return new r(h,c)};var n=r.prototype;function a(i,c,h){for(var f=1,x=i.length;f<x;f+=2)if(i[f-1]===c&&i[f]===h)return i[f-1]=i[x-2],i[f]=i[x-1],void(i.length=x-2)}n.isConstraint=function(){var i=[0,0];function c(h,f){return h[0]-f[0]||h[1]-f[1]}return function(h,f){return i[0]=Math.min(h,f),i[1]=Math.max(h,f),o.eq(this.edges,i,c)>=0}}(),n.removeTriangle=function(i,c,h){var f=this.stars;a(f[i],c,h),a(f[c],h,i),a(f[h],i,c)},n.addTriangle=function(i,c,h){var f=this.stars;f[i].push(c,h),f[c].push(h,i),f[h].push(i,c)},n.opposite=function(i,c){for(var h=this.stars[c],f=1,x=h.length;f<x;f+=2)if(h[f]===i)return h[f-1];return-1},n.flip=function(i,c){var h=this.opposite(i,c),f=this.opposite(c,i);this.removeTriangle(i,c,h),this.removeTriangle(c,i,f),this.addTriangle(i,f,h),this.addTriangle(c,h,f)},n.edges=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var x=i[h],v=0,g=x.length;v<g;v+=2)c.push([x[v],x[v+1]]);return c},n.cells=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var x=i[h],v=0,g=x.length;v<g;v+=2){var y=x[v],p=x[v+1];h<Math.min(y,p)&&c.push([h,y,p])}return c}},9887:function(d){"use strict";d.exports=function(s){for(var t=1,o=1;o<s.length;++o)for(var r=0;r<o;++r)if(s[o]<s[r])t=-t;else if(s[r]===s[o])return 0;return t}},9243:function(d,s,t){"use strict";var o=t(3094),r=t(6606);function n(c,h){for(var f=0,x=c.length,v=0;v<x;++v)f+=c[v]*h[v];return f}function a(c){var h=c.length;if(0===h)return[];var f=o([c.length+1,c.length+1],1),x=o([c.length+1],1);f[h][h]=0;for(var v=0;v<h;++v){for(var g=0;g<=v;++g)f[g][v]=f[v][g]=2*n(c[v],c[g]);x[v]=n(c[v],c[v])}var y=r(f,x),p=0,m=y[h+1];for(v=0;v<m.length;++v)p+=m[v];var w=new Array(h);for(v=0;v<h;++v){m=y[v];var u=0;for(g=0;g<m.length;++g)u+=m[g];w[v]=u/p}return w}function i(c){if(0===c.length)return[];for(var h=c[0].length,f=o([h]),x=a(c),v=0;v<c.length;++v)for(var g=0;g<h;++g)f[g]+=c[v][g]*x[v];return f}i.barycenetric=a,d.exports=i},1778:function(d,s,t){d.exports=function(r){for(var n=o(r),a=0,i=0;i<r.length;++i)for(var c=r[i],h=0;h<n.length;++h)a+=Math.pow(c[h]-n[h],2);return Math.sqrt(a/r.length)};var o=t(9243)},197:function(d,s,t){"use strict";d.exports=function(S,_,E){var L,R,F,U;if(E){L=_;for(var C=new Array(_.length),P=0;P<_.length;++P){var I=_[P];C[P]=[I[0],I[1],E[P]]}_=C}for(var j=(F=!!E,void 0,w(_,U=y(R=S,[],g(R)),F),!!U);u(S,_,!!E);)j=!0;if(E&&j)for(L.length=0,E.length=0,P=0;P<_.length;++P)L.push([(I=_[P])[0],I[1]]),E.push(I[2]);return j};var o=t(1731),r=t(2569),n=t(4434),a=t(5125),i=t(8846),c=t(7999),h=t(2826),f=t(8551),x=t(5528);function v(S){var _=c(S);return[f(_,-1/0),f(_,1/0)]}function g(S){for(var _=new Array(S.length),E=0;E<S.length;++E){var L=S[E];_[E]=[f(L[0],-1/0),f(L[1],-1/0),f(L[0],1/0),f(L[1],1/0)]}return _}function y(S,_,E){for(var L=_.length,C=new o(L),P=[],I=0;I<_.length;++I){var j=_[I],R=v(j[0]),H=v(j[1]);P.push([f(R[0],-1/0),f(H[0],-1/0),f(R[1],1/0),f(H[1],1/0)])}r(P,function(J,Z){C.link(J,Z)});var F=!0,U=new Array(L);for(I=0;I<L;++I)(N=C.find(I))!==I&&(F=!1,S[N]=[Math.min(S[I][0],S[N][0]),Math.min(S[I][1],S[N][1])]);if(F)return null;var B=0;for(I=0;I<L;++I){var N;(N=C.find(I))===I?(U[I]=B,S[B++]=S[I]):U[I]=-1}for(S.length=B,I=0;I<L;++I)U[I]<0&&(U[I]=U[C.find(I)]);return U}function p(S,_){return S[0]-_[0]||S[1]-_[1]}function m(S,_){return S[0]-_[0]||S[1]-_[1]||(S[2]<_[2]?-1:S[2]>_[2]?1:0)}function w(S,_,E){if(0!==S.length){if(_)for(var L=0;L<S.length;++L){var C=_[(I=S[L])[0]],P=_[I[1]];I[0]=Math.min(C,P),I[1]=Math.max(C,P)}else for(L=0;L<S.length;++L){var I;C=(I=S[L])[0],P=I[1],I[0]=Math.min(C,P),I[1]=Math.max(C,P)}S.sort(E?m:p);var j=1;for(L=1;L<S.length;++L){var R=S[L-1],H=S[L];(H[0]!==R[0]||H[1]!==R[1]||E&&H[2]!==R[2])&&(S[j++]=H)}S.length=j}}function u(S,_,E){var R,H,U,L=function(R,H){for(var F=new Array(H.length),U=0;U<H.length;++U){var B=H[U],N=R[B[0]],J=R[B[1]];F[U]=[f(Math.min(N[0],J[0]),-1/0),f(Math.min(N[1],J[1]),-1/0),f(Math.max(N[0],J[0]),1/0),f(Math.max(N[1],J[1]),1/0)]}return F}(S,_),C=(R=S,H=_,U=[],r(L,function(B,N){var J=H[B],Z=H[N];J[0]!==Z[0]&&J[0]!==Z[1]&&J[1]!==Z[0]&&J[1]!==Z[1]&&n(R[J[0]],R[J[1]],R[Z[0]],R[Z[1]])&&U.push([B,N])}),U),P=function(R,H,F,U){var B=[];return r(F,U,function(N,J){var Z=H[N];if(Z[0]!==J&&Z[1]!==J){var V=R[J];n(R[Z[0]],R[Z[1]],V,V)&&B.push([N,J])}}),B}(S,_,L,g(S)),I=function(R,H,F,U,B){var N,J,Z=R.map(function(ke){return[a(ke[0]),a(ke[1])]});for(N=0;N<F.length;++N){var V=F[N],W=V[1],X=H[J=V[0]],K=H[W],ne=x(h(R[X[0]]),h(R[X[1]]),h(R[K[0]]),h(R[K[1]]));if(ne){var re=R.length;R.push([c(ne[0]),c(ne[1])]),Z.push(ne),U.push([J,re],[W,re])}}for(U.sort(function(ke,Te){if(ke[0]!==Te[0])return ke[0]-Te[0];var $=Z[ke[1]],oe=Z[Te[1]];return i($[0],oe[0])||i($[1],oe[1])}),N=U.length-1;N>=0;--N){var ae=H[J=(de=U[N])[0]],le=ae[0],pe=ae[1],xe=R[le],ye=R[pe];if((xe[0]-ye[0]||xe[1]-ye[1])<0){var se=le;le=pe,pe=se}ae[0]=le;var fe,Ee=ae[1]=de[1];for(B&&(fe=ae[2]);N>0&&U[N-1][0]===J;){var de,we=(de=U[--N])[1];H.push(B?[Ee,we,fe]:[Ee,we]),Ee=we}H.push(B?[Ee,pe,fe]:[Ee,pe])}return Z}(S,_,C,P,E),j=y(S,I);return w(_,j,E),!!j||C.length>0||P.length>0}},5528:function(d,s,t){"use strict";d.exports=function(x,v,g,y){var p=i(v,x),m=i(y,g),w=f(p,m);if(0===a(w))return null;var u=f(m,i(x,g)),S=r(u,w),_=h(p,S);return c(x,_)};var o=t(3962),r=t(9189),n=t(4354),a=t(4951),i=t(6695),c=t(7584),h=t(4469);function f(x,v){return n(o(x[0],v[1]),o(x[1],v[0]))}},5692:function(d){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(d,s,t){"use strict";var o=t(5692),r=t(3578);function n(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function a(c){for(var h,f="#",x=0;x<3;++x)f+=("00"+(h=(h=c[x]).toString(16))).substr(h.length);return f}function i(c){return"rgba("+c.join(",")+")"}d.exports=function(c){var h,f,x,v,g,y,p,m,w,u;if(c||(c={}),m=(c.nshades||72)-1,p=c.format||"hex",(y=c.colormap)||(y="jet"),"string"==typeof y){if(y=y.toLowerCase(),!o[y])throw Error(y+" not a supported colorscale");g=o[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);g=y.slice()}if(g.length>m+1)throw new Error(y+" map requires nshades to be at least size "+g.length);w=Array.isArray(c.alpha)?2!==c.alpha.length?[1,1]:c.alpha.slice():"number"==typeof c.alpha?[c.alpha,c.alpha]:[1,1],h=g.map(function(C){return Math.round(C.index*m)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var S=g.map(function(C,P){var I=g[P].index,j=g[P].rgb.slice();return 4===j.length&&j[3]>=0&&j[3]<=1||(j[3]=w[0]+(w[1]-w[0])*I),j}),_=[];for(u=0;u<h.length-1;++u){v=h[u+1]-h[u],f=S[u],x=S[u+1];for(var E=0;E<v;E++){var L=E/v;_.push([Math.round(r(f[0],x[0],L)),Math.round(r(f[1],x[1],L)),Math.round(r(f[2],x[2],L)),r(f[3],x[3],L)])}}return _.push(g[g.length-1].rgb.concat(w[1])),"hex"===p?_=_.map(a):"rgbaString"===p?_=_.map(i):"float"===p&&(_=_.map(n)),_}},9398:function(d,s,t){"use strict";d.exports=function(h,f,x,v){var g=o(f,x,v);if(0===g){var y=r(o(h,f,x)),p=r(o(h,f,v));if(y===p){if(0===y){var m=c(h,f,x);return m===c(h,f,v)?0:m?1:-1}return 0}return 0===p?y>0||c(h,f,v)?-1:1:0===y?p>0||c(h,f,x)?1:-1:r(p-y)}var w=o(h,f,x);return w>0?g>0&&o(h,f,v)>0?1:-1:w<0?g>0||o(h,f,v)>0?1:-1:o(h,f,v)>0||c(h,f,x)?1:-1};var o=t(417),r=t(7538),n=t(87),a=t(2019),i=t(9662);function c(h,f,x){var v=n(h[0],-f[0]),g=n(h[1],-f[1]),y=n(x[0],-f[0]),p=n(x[1],-f[1]),m=i(a(v,y),a(g,p));return m[m.length-1]>=0}},7538:function(d){"use strict";d.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(d){d.exports=function(o,r){var n=o.length,a=o.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return o[0]+o[1]-r[0]-r[1]||s(o[0],o[1])-s(r[0],r[1]);case 3:var i=o[0]+o[1],c=r[0]+r[1];if(a=i+o[2]-(c+r[2]))return a;var h=s(o[0],o[1]),f=s(r[0],r[1]);return s(h,o[2])-s(f,r[2])||s(h+o[2],i)-s(f+r[2],c);case 4:var x=o[0],v=o[1],g=o[2],y=o[3],p=r[0],m=r[1],w=r[2],u=r[3];return x+v+g+y-(p+m+w+u)||s(x,v,g,y)-s(p,m,w,u,p)||s(x+v,x+g,x+y,v+g,v+y,g+y)-s(p+m,p+w,p+u,m+w,m+u,w+u)||s(x+v+g,x+v+y,x+g+y,v+g+y)-s(p+m+w,p+m+u,p+w+u,m+w+u);default:for(var S=o.slice().sort(t),_=r.slice().sort(t),E=0;E<n;++E)if(a=S[E]-_[E])return a;return 0}};var s=Math.min;function t(o,r){return o-r}},1284:function(d,s,t){"use strict";var o=t(9209),r=t(9887);d.exports=function(n,a){return o(n,a)||r(n)-r(a)}},5537:function(d,s,t){"use strict";var o=t(8950),r=t(8722),n=t(3332);d.exports=function(a){var i=a.length;if(0===i)return[];if(1===i)return[[0]];var c=a[0].length;return 0===c?[]:1===c?o(a):2===c?r(a):n(a,c)}},8950:function(d){"use strict";d.exports=function(s){for(var t=0,o=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[o][0]&&(o=r);return t<o?[[t],[o]]:t>o?[[o],[t]]:[[t]]}},8722:function(d,s,t){"use strict";d.exports=function(r){var n=o(r),a=n.length;if(a<=2)return[];for(var i=new Array(a),c=n[a-1],h=0;h<a;++h){var f=n[h];i[h]=[c,f],c=f}return i};var o=t(3266)},3332:function(d,s,t){"use strict";d.exports=function(n,a){try{return o(n,!0)}catch{var i=r(n);if(i.length<=a)return[];var c=function(f,x){for(var v=f.length,g=new Array(v),y=0;y<x.length;++y)g[y]=f[x[y]];var p=x.length;for(y=0;y<v;++y)x.indexOf(y)<0&&(g[p++]=f[y]);return g}(n,i);return function(f,x){for(var v=f.length,g=x.length,y=0;y<v;++y)for(var p=f[y],m=0;m<p.length;++m){var w=p[m];if(w<g)p[m]=x[w];else{w-=g;for(var u=0;u<g;++u)w>=x[u]&&(w+=1);p[m]=w}}return f}(o(c,!0),i)}};var o=t(2183),r=t(2153)},9680:function(d){"use strict";d.exports=function(s,t,o,r,n,a){var i=n-1,c=n*n,h=i*i,f=(1+2*n)*h,x=n*h,v=c*(3-2*n),g=c*i;if(s.length){a||(a=new Array(s.length));for(var y=s.length-1;y>=0;--y)a[y]=f*s[y]+x*t[y]+v*o[y]+g*r[y];return a}return f*s+x*t+v*o+g*r},d.exports.derivative=function(s,t,o,r,n,a){var i=6*n*n-6*n,c=3*n*n-4*n+1,h=-6*n*n+6*n,f=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var x=s.length-1;x>=0;--x)a[x]=i*s[x]+c*t[x]+h*o[x]+f*r[x];return a}return i*s+c*t+h*o[x]+f*r}},4419:function(d,s,t){"use strict";var o=t(2183),r=t(1215);function n(i,c){this.point=i,this.index=c}function a(i,c){for(var h=i.point,f=c.point,x=h.length,v=0;v<x;++v){var g=f[v]-h[v];if(g)return g}return 0}d.exports=function(i,c){var h=i.length;if(0===h)return[];var f=i[0].length;if(f<1)return[];if(1===f)return function(I,j,R){if(1===I)return R?[[-1,0]]:[];var H=j.map(function(J,Z){return[J[0],Z]});H.sort(function(J,Z){return J[0]-Z[0]});for(var F=new Array(I-1),U=1;U<I;++U)F[U-1]=[H[U-1][1],H[U][1]];return R&&F.push([-1,F[0][1]],[F[I-1][1],-1]),F}(h,i,c);for(var x=new Array(h),v=1,g=0;g<h;++g){for(var y=i[g],p=new Array(f+1),m=0,w=0;w<f;++w){var u=y[w];p[w]=u,m+=u*u}p[f]=m,x[g]=new n(p,g),v=Math.max(m,v)}r(x,a),h=x.length;var S=new Array(h+f+1),_=new Array(h+f+1),E=(f+1)*(f+1)*v,L=new Array(f+1);for(g=0;g<=f;++g)L[g]=0;for(L[f]=E,S[0]=L.slice(),_[0]=-1,g=0;g<=f;++g)(p=L.slice())[g]=1,S[g+1]=p,_[g+1]=-1;for(g=0;g<h;++g){var C=x[g];S[g+f+1]=C.point,_[g+f+1]=C.index}var P=o(S,!1);if(P=P.filter(c?function(I){for(var j=0,R=0;R<=f;++R){var H=_[I[R]];if(H<0&&++j>=2)return!1;I[R]=H}return!0}:function(I){for(var j=0;j<=f;++j){var R=_[I[j]];if(R<0)return!1;I[j]=R}return!0}),1&f)for(g=0;g<P.length;++g)p=(C=P[g])[0],C[0]=C[1],C[1]=p;return P}},8362:function(d){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),o=new Uint32Array(t.buffer);t[0]=1,s=!0,1072693248===o[1]?(d.exports=function(n){return t[0]=n,[o[0],o[1]]},d.exports.pack=function(n,a){return o[0]=n,o[1]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[0]},d.exports.hi=function(n){return t[0]=n,o[1]}):1072693248===o[0]?(d.exports=function(n){return t[0]=n,[o[1],o[0]]},d.exports.pack=function(n,a){return o[1]=n,o[0]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[1]},d.exports.hi=function(n){return t[0]=n,o[0]}):s=!1}if(!s){var r=new Buffer(8);d.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},d.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},d.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},d.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}d.exports.sign=function(n){return d.exports.hi(n)>>>31},d.exports.exponent=function(n){return(d.exports.hi(n)<<1>>>21)-1023},d.exports.fraction=function(n){var a=d.exports.lo(n),i=d.exports.hi(n),c=1048575&i;return 2146435072&i&&(c+=1048576),[a,c]},d.exports.denormalized=function(n){return!(2146435072&d.exports.hi(n))}},3094:function(d){"use strict";function s(t,o,r){var n=0|t[r];if(n<=0)return[];var a,i=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)i[a]=o;else for(a=0;a<n;++a)i[a]=s(t,o,r+1);return i}d.exports=function(t,o){switch(void 0===o&&(o=0),typeof t){case"number":if(t>0)return function(r,n){var a,i;for(a=new Array(r),i=0;i<r;++i)a[i]=n;return a}(0|t,o);break;case"object":if("number"==typeof t.length)return s(t,o,0)}return[]}},8348:function(d,s,t){"use strict";d.exports=function(r,n){var a=r.length;if("number"!=typeof n){n=0;for(var i=0;i<a;++i){var c=r[i];n=Math.max(n,c[0],c[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(i=0;i<n;++i)h[i]=[];for(i=0;i<a;++i)h[(c=r[i])[0]].push(c[1]),h[c[1]].push(c[0]);for(var f=0;f<n;++f)o(h[f],function(x,v){return x-v});return h};var o=t(1215)},5795:function(d){"use strict";d.exports=function(s,t,o){var r=t||0,n=o||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(d,s,t){"use strict";d.exports=function(h,f,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof h?new a(v=c(h),v,0):new a(h,c(h.length),0);case 2:if("number"==typeof f){var v=c(h.length);return new a(h,v,+f)}x=0;case 3:if(h.length!==f.length)throw new Error("state and velocity lengths must match");return new a(h,f,x)}};var o=t(9680),r=t(5070);function n(h,f,x){return Math.min(f,Math.max(h,x))}function a(h,f,x){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=h.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[x],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=a.prototype;function c(h){for(var f=new Array(h),x=0;x<h;++x)f[x]=0;return f}i.flush=function(h){var f=r.gt(this._time,h)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},i.curve=function(h){var f=this._time,x=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension,w=this.bounds;if(v<0)for(var u=m-1,S=0;S<m;++S,--u)g[S]=y[u];else if(v>=x-1){u=y.length-1;var _=h-f[x-1];for(S=0;S<m;++S,--u)g[S]=y[u]+_*p[u]}else{u=m*(v+1)-1;var E=f[v],L=f[v+1]-E||1,C=this._scratch[1],P=this._scratch[2],I=this._scratch[3],j=this._scratch[4],R=!0;for(S=0;S<m;++S,--u)C[S]=y[u],I[S]=p[u]*L,P[S]=y[u+m],j[S]=p[u+m]*L,R=R&&C[S]===P[S]&&I[S]===j[S]&&0===I[S];if(R)for(S=0;S<m;++S)g[S]=C[S];else o(C,I,P,j,(h-E)/L,g)}var H=w[0],F=w[1];for(S=0;S<m;++S)g[S]=n(H[S],F[S],g[S]);return g},i.dcurve=function(h){var f=this._time,x=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension;if(v>=x-1)for(var w=y.length-1,u=0;u<m;++u,--w)g[u]=p[w];else{w=m*(v+1)-1;var S=f[v],_=f[v+1]-S||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],P=this._scratch[4],I=!0;for(u=0;u<m;++u,--w)E[u]=y[w],C[u]=p[w]*_,L[u]=y[w+m],P[u]=p[w+m]*_,I=I&&E[u]===L[u]&&C[u]===P[u]&&0===C[u];if(I)for(u=0;u<m;++u)g[u]=0;else for(o.derivative(E,C,L,P,(h-S)/_,g),u=0;u<m;++u)g[u]/=_}return g},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,f=h.length,x=this.dimension-1;x>=0;--x)if(h[--f])return!1;return!0},i.jump=function(h){var f=this.lastT(),x=this.dimension;if(!(h<f||arguments.length!==x+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1];this._time.push(f,h);for(var u=0;u<2;++u)for(var S=0;S<x;++S)v.push(v[y++]),g.push(0);for(this._time.push(h),S=x;S>0;--S)v.push(n(m[S-1],w[S-1],arguments[S])),g.push(0)}},i.push=function(h){var f=this.lastT(),x=this.dimension;if(!(h<f||arguments.length!==x+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=h-f,m=this.bounds,w=m[0],u=m[1],S=p>1e-6?1/p:0;this._time.push(h);for(var _=x;_>0;--_){var E=n(w[_-1],u[_-1],arguments[_]);v.push(E),g.push((E-v[y++])*S)}}},i.set=function(h){var f=this.dimension;if(!(h<this.lastT()||arguments.length!==f+1)){var x=this._state,v=this._velocity,g=this.bounds,y=g[0],p=g[1];this._time.push(h);for(var m=f;m>0;--m)x.push(n(y[m-1],p[m-1],arguments[m])),v.push(0)}},i.move=function(h){var f=this.lastT(),x=this.dimension;if(!(h<=f||arguments.length!==x+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1],u=h-f,S=u>1e-6?1/u:0;this._time.push(h);for(var _=x;_>0;--_){var E=arguments[_];v.push(n(m[_-1],w[_-1],v[y++]+E)),g.push(E*S)}}},i.idle=function(h){var f=this.lastT();if(!(h<f)){var x=this.dimension,v=this._state,g=this._velocity,y=v.length-x,p=this.bounds,m=p[0],w=p[1],u=h-f;this._time.push(h);for(var S=x-1;S>=0;--S)v.push(n(m[S],w[S],v[y]+u*g[y])),g.push(0),y+=1}}},7080:function(d){"use strict";function s(y,p,m,w,u,S){this._color=y,this.key=p,this.value=m,this.left=w,this.right=u,this._count=S}function t(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function o(y,p){return new s(y,p.key,p.value,p.left,p.right,p._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,p){this._compare=y,this.root=p}d.exports=function(y){return new n(y||g,null)};var a=n.prototype;function i(y,p){var m;return p.left&&(m=i(y,p.left))?m:(m=y(p.key,p.value))||(p.right?i(y,p.right):void 0)}function c(y,p,m,w){var u;return p(y,w.key)<=0&&(w.left&&(u=c(y,p,m,w.left))||(u=m(w.key,w.value)))?u:w.right?c(y,p,m,w.right):void 0}function h(y,p,m,w,u){var S,_=m(y,u.key),E=m(p,u.key);return _<=0&&(u.left&&(S=h(y,p,m,w,u.left))||E>0&&(S=w(u.key,u.value)))?S:E>0&&u.right?h(y,p,m,w,u.right):void 0}function f(y,p){this.tree=y,this._stack=p}Object.defineProperty(a,"keys",{get:function(){var y=[];return this.forEach(function(p,m){y.push(p)}),y}}),Object.defineProperty(a,"values",{get:function(){var y=[];return this.forEach(function(p,m){y.push(m)}),y}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(y,p){for(var m=this._compare,w=this.root,u=[],S=[];w;){var _=m(y,w.key);u.push(w),S.push(_),w=_<=0?w.left:w.right}u.push(new s(0,y,p,null,null,1));for(var E=u.length-2;E>=0;--E)w=u[E],u[E]=S[E]<=0?new s(w._color,w.key,w.value,u[E+1],w.right,w._count+1):new s(w._color,w.key,w.value,w.left,u[E+1],w._count+1);for(E=u.length-1;E>1;--E){var L=u[E-1];if(w=u[E],1===L._color||1===w._color)break;var C=u[E-2];if(C.left===L)if(L.left===w){if(!(P=C.right)||0!==P._color){C._color=0,C.left=L.right,L._color=1,L.right=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((I=u[E-3]).left===C?I.left=L:I.right=L);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else{if(!(P=C.right)||0!==P._color){L.right=w.left,C._color=0,C.left=w.right,w._color=1,w.left=L,w.right=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((I=u[E-3]).left===C?I.left=w:I.right=w);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else if(L.right===w){if(!(P=C.left)||0!==P._color){C._color=0,C.right=L.left,L._color=1,L.left=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((I=u[E-3]).right===C?I.right=L:I.left=L);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||0!==P._color){var I;L.left=w.right,C._color=0,C.right=w.left,w._color=1,w.right=L,w.left=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((I=u[E-3]).right===C?I.right=w:I.left=w);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}}return u[0]._color=1,new n(m,u[0])},a.forEach=function(y,p,m){if(this.root)switch(arguments.length){case 1:return i(y,this.root);case 2:return c(p,this._compare,y,this.root);case 3:return this._compare(p,m)>=0?void 0:h(p,m,this._compare,y,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.left;return new f(this,y)}}),Object.defineProperty(a,"end",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.right;return new f(this,y)}}),a.at=function(y){if(y<0)return new f(this,[]);for(var p=this.root,m=[];;){if(m.push(p),p.left){if(y<p.left._count){p=p.left;continue}y-=p.left._count}if(!y)return new f(this,m);if(y-=1,!p.right||y>=p.right._count)break;p=p.right}return new f(this,[])},a.ge=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S<=0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.gt=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S<0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.lt=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S>0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.le=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S>=0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.find=function(y){for(var p=this._compare,m=this.root,w=[];m;){var u=p(y,m.key);if(w.push(m),0===u)return new f(this,w);m=u<=0?m.left:m.right}return new f(this,[])},a.remove=function(y){var p=this.find(y);return p?p.remove():this},a.get=function(y){for(var p=this._compare,m=this.root;m;){var w=p(y,m.key);if(0===w)return m.value;m=w<=0?m.left:m.right}};var x=f.prototype;function v(y,p){y.key=p.key,y.value=p.value,y.left=p.left,y.right=p.right,y._color=p._color,y._count=p._count}function g(y,p){return y<p?-1:y>p?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new f(this.tree,this._stack.slice())},x.remove=function(){var y=this._stack;if(0===y.length)return this.tree;var p=new Array(y.length),m=y[y.length-1];p[p.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=y.length-2;w>=0;--w)p[w]=(m=y[w]).left===y[w+1]?new s(m._color,m.key,m.value,p[w+1],m.right,m._count):new s(m._color,m.key,m.value,m.left,p[w+1],m._count);if((m=p[p.length-1]).left&&m.right){var u=p.length;for(m=m.left;m.right;)p.push(m),m=m.right;var S=p[u-1];for(p.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),p[u-1].key=m.key,p[u-1].value=m.value,w=p.length-2;w>=u;--w)p[w]=new s((m=p[w])._color,m.key,m.value,m.left,p[w+1],m._count);p[u-1].left=p[u]}if(0===(m=p[p.length-1])._color){var _=p[p.length-2];for(_.left===m?_.left=null:_.right===m&&(_.right=null),p.pop(),w=0;w<p.length;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(m.left||m.right){for(m.left?v(m,m.left):m.right&&v(m,m.right),m._color=1,w=0;w<p.length-1;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(1===p.length)return new n(this.tree._compare,null);for(w=0;w<p.length;++w)p[w]._count--;var E=p[p.length-2];return function(L){for(var C,P,I,j,R=L.length-1;R>=0;--R){if(C=L[R],0===R)return void(C._color=1);if((P=L[R-1]).left===C){if((I=P.right).right&&0===I.right._color)return j=(I=P.right=t(I)).right=t(I.right),P.right=I.left,I.left=P,I.right=j,I._color=P._color,C._color=1,P._color=1,j._color=1,r(P),r(I),R>1&&((H=L[R-2]).left===P?H.left=I:H.right=I),void(L[R-1]=I);if(I.left&&0===I.left._color)return j=(I=P.right=t(I)).left=t(I.left),P.right=j.left,I.left=j.right,j.left=P,j.right=I,j._color=P._color,P._color=1,I._color=1,C._color=1,r(P),r(I),r(j),R>1&&((H=L[R-2]).left===P?H.left=j:H.right=j),void(L[R-1]=j);if(1===I._color){if(0===P._color)return P._color=1,void(P.right=o(0,I));P.right=o(0,I);continue}I=t(I),P.right=I.left,I.left=P,I._color=P._color,P._color=0,r(P),r(I),R>1&&((H=L[R-2]).left===P?H.left=I:H.right=I),L[R-1]=I,L[R]=P,R+1<L.length?L[R+1]=C:L.push(C),R+=2}else{if((I=P.left).left&&0===I.left._color)return j=(I=P.left=t(I)).left=t(I.left),P.left=I.right,I.right=P,I.left=j,I._color=P._color,C._color=1,P._color=1,j._color=1,r(P),r(I),R>1&&((H=L[R-2]).right===P?H.right=I:H.left=I),void(L[R-1]=I);if(I.right&&0===I.right._color)return j=(I=P.left=t(I)).right=t(I.right),P.left=j.right,I.right=j.left,j.right=P,j.left=I,j._color=P._color,P._color=1,I._color=1,C._color=1,r(P),r(I),r(j),R>1&&((H=L[R-2]).right===P?H.right=j:H.left=j),void(L[R-1]=j);if(1===I._color){if(0===P._color)return P._color=1,void(P.left=o(0,I));P.left=o(0,I);continue}var H;I=t(I),P.left=I.right,I.right=P,I._color=P._color,P._color=0,r(P),r(I),R>1&&((H=L[R-2]).right===P?H.right=I:H.left=I),L[R-1]=I,L[R]=P,R+1<L.length?L[R+1]=C:L.push(C),R+=2}}}(p),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,p[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var y=0,p=this._stack;if(0===p.length){var m=this.tree.root;return m?m._count:0}p[p.length-1].left&&(y=p[p.length-1].left._count);for(var w=p.length-2;w>=0;--w)p[w+1]===p[w].right&&(++y,p[w].left&&(y+=p[w].left._count));return y},enumerable:!0}),x.next=function(){var y=this._stack;if(0!==y.length){var p=y[y.length-1];if(p.right)for(p=p.right;p;)y.push(p),p=p.left;else for(y.pop();y.length>0&&y[y.length-1].right===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var y=this._stack;if(0===y.length)return!1;if(y[y.length-1].right)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].left===y[p])return!0;return!1}}),x.update=function(y){var p=this._stack;if(0===p.length)throw new Error("Can't update empty node!");var m=new Array(p.length),w=p[p.length-1];m[m.length-1]=new s(w._color,w.key,y,w.left,w.right,w._count);for(var u=p.length-2;u>=0;--u)m[u]=(w=p[u]).left===p[u+1]?new s(w._color,w.key,w.value,m[u+1],w.right,w._count):new s(w._color,w.key,w.value,w.left,m[u+1],w._count);return new n(this.tree._compare,m[0])},x.prev=function(){var y=this._stack;if(0!==y.length){var p=y[y.length-1];if(p.left)for(p=p.left;p;)y.push(p),p=p.right;else for(y.pop();y.length>0&&y[y.length-1].left===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var y=this._stack;if(0===y.length)return!1;if(y[y.length-1].left)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].right===y[p])return!0;return!1}})},7453:function(d,s,t){"use strict";d.exports=function(_,E){var L=new f(_);return L.update(E),L};var o=t(9557),r=t(1681),n=t(1011),a=t(2864),i=t(8468),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(_,E){return _[0]=E[0],_[1]=E[1],_[2]=E[2],_}function f(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(_)}var x=f.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(_){function E(J,Z,V){if(V in _){var W,X=_[V],K=this[V];this[V]=W=(J?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?[Z(X[0]),Z(X[1]),Z(X[2])]:[Z(X),Z(X),Z(X)];for(var ne=0;ne<3;++ne)if(W[ne]!==K[ne])return!0}return!1}_=_||{};var L,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),I=E.bind(this,!1,String),j=E.bind(this,!0,function(J){if(Array.isArray(J)){if(3===J.length)return[+J[0],+J[1],+J[2],1];if(4===J.length)return[+J[0],+J[1],+J[2],+J[3]]}return[0,0,0,1]}),R=!1,H=!1;if("bounds"in _)for(var F=_.bounds,U=0;U<2;++U)for(var B=0;B<3;++B)F[U][B]!==this.bounds[U][B]&&(H=!0),this.bounds[U][B]=F[U][B];if("ticks"in _)for(L=_.ticks,R=!0,this.autoTicks=!1,U=0;U<3;++U)this.tickSpacing[U]=0;else C("tickSpacing")&&(this.autoTicks=!0,H=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),H=!0,R=!0,this._firstInit=!1),H&&this.autoTicks&&(L=i.create(this.bounds,this.tickSpacing),R=!0),R){for(U=0;U<3;++U)L[U].sort(function(J,Z){return J.x-Z.x});i.equal(L,this.ticks)?R=!1:this.ticks=L}P("tickEnable"),I("tickFont")&&(R=!0),C("tickSize"),C("tickAngle"),C("tickPad"),j("tickColor");var N=I("labels");I("labelFont")&&(N=!0),P("labelEnable"),C("labelSize"),C("labelPad"),j("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),j("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),j("lineTickColor"),P("gridEnable"),C("gridWidth"),j("gridColor"),P("zeroEnable"),j("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),j("backgroundColor"),this._text?this._text&&(N||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var g=[new v,new v,new v];function y(_,E,L,C,P){for(var I=_.primalOffset,j=_.primalMinor,R=_.mirrorOffset,H=_.mirrorMinor,F=C[E],U=0;U<3;++U)if(E!==U){var B=I,N=R,J=j,Z=H;F&1<<U&&(B=R,N=I,J=H,Z=j),B[U]=L[0][U],N[U]=L[1][U],P[U]>0?(J[U]=-1,Z[U]=0):(J[U]=0,Z[U]=1)}}var p=[0,0,0],m={model:c,view:c,projection:c,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(_){};var w=[0,0,0],u=[0,0,0],S=[0,0,0];x.draw=function(_){for(var E=this.gl,L=(_=_||m).model||c,C=_.view||c,P=_.projection||c,I=this.bounds,j=_._ortho||!1,R=a(L,C,P,I,j),H=R.cubeEdges,F=R.axis,Z=(j?2:1)*this.pixelRatio*(P[3]*C[12]+P[7]*C[13]+P[11]*C[14]+P[15]*C[15])/E.drawingBufferHeight,V=0;V<3;++V)this.lastCubeProps.cubeEdges[V]=H[V],this.lastCubeProps.axis[V]=F[V];var W=g;for(V=0;V<3;++V)y(g[V],V,this.bounds,H,F);E=this.gl;var X,K,ne,he,me,Me,Ie,Pe,ze,ce,ge,_e,re=p;for(V=0;V<3;++V)re[V]=this.backgroundEnable[V]?F[V]:0;for(this._background.draw(L,C,P,I,re,this.backgroundColor),this._lines.bind(L,C,P,this),V=0;V<3;++V){var ae=[0,0,0];ae[V]=F[V]>0?I[1][V]:I[0][V];for(var le=0;le<2;++le){var pe=(V+1+le)%3,xe=(V+1+(1^le))%3;this.gridEnable[pe]&&this._lines.drawGrid(pe,xe,this.bounds,ae,this.gridColor[pe],this.gridWidth[pe]*this.pixelRatio)}for(le=0;le<2;++le)pe=(V+1+le)%3,this.zeroEnable[xe=(V+1+(1^le))%3]&&Math.min(I[0][xe],I[1][xe])<=0&&Math.max(I[0][xe],I[1][xe])>=0&&this._lines.drawZero(pe,xe,this.bounds,ae,this.zeroLineColor[xe],this.zeroLineWidth[xe]*this.pixelRatio)}for(V=0;V<3;++V){this.lineEnable[V]&&this._lines.drawAxisLine(V,this.bounds,W[V].primalOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio),this.lineMirror[V]&&this._lines.drawAxisLine(V,this.bounds,W[V].mirrorOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio);var ye=h(w,W[V].primalMinor),se=h(u,W[V].mirrorMinor),fe=this.lineTickLength;for(le=0;le<3;++le){var Ee=Z/L[5*le];ye[le]*=fe[le]*Ee,se[le]*=fe[le]*Ee}this.lineTickEnable[V]&&this._lines.drawAxisTicks(V,W[V].primalOffset,ye,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio),this.lineTickMirror[V]&&this._lines.drawAxisTicks(V,W[V].mirrorOffset,se,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio)}function de(he){(ne=[0,0,0])[he]=1}for(this._lines.unbind(),this._text.bind(L,C,P,this.pixelRatio),V=0;V<3;++V){var ke=W[V].primalMinor,Te=W[V].mirrorMinor,$=h(S,W[V].primalOffset);for(le=0;le<3;++le)this.lineTickEnable[V]&&($[le]+=Z*ke[le]*Math.max(this.lineTickLength[le],0)/L[5*le]);var oe=[0,0,0];if(oe[V]=1,this.tickEnable[V]){for(-3600===this.tickAngle[V]?(this.tickAngle[V]=0,this.tickAlign[V]="auto"):this.tickAlign[V]=-1,X[0]="auto"===(X=[this.tickAlign[V],.5,K=1])[0]?0:parseInt(""+X[0]),ne=[0,0,0],void 0,void 0,void 0,void 0,void 0,void 0,ce=(me=ke)[Pe=((he=V)+2)%3],ge=(Me=Te)[Ie=(he+1)%3],_e=Me[Pe],(ze=me[Ie])>0&&_e>0||ze>0&&_e<0||ze<0&&_e>0||ze<0&&_e<0?de(Ie):(ce>0&&ge>0||ce>0&&ge<0||ce<0&&ge>0||ce<0&&ge<0)&&de(Pe),le=0;le<3;++le)$[le]+=Z*ke[le]*this.tickPad[le]/L[5*le];this._text.drawTicks(V,this.tickSize[V],this.tickAngle[V],$,this.tickColor[V],oe,ne,X)}if(this.labelEnable[V]){for(K=0,ne=[0,0,0],this.labels[V].length>4&&(de(V),K=1),X[0]="auto"===(X=[this.labelAlign[V],.5,K])[0]?0:parseInt(""+X[0]),le=0;le<3;++le)$[le]+=Z*ke[le]*this.labelPad[le]/L[5*le];$[V]+=.5*(I[0][V]+I[1][V]),this._text.drawLabel(V,this.labelSize[V],this.labelAngle[V],$,this.labelColor[V],[0,0,0],ne,X)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(d,s,t){"use strict";d.exports=function(c){for(var h=[],f=[],x=0,v=0;v<3;++v)for(var g=(v+1)%3,y=(v+2)%3,p=[0,0,0],m=[0,0,0],w=-1;w<=1;w+=2){f.push(x,x+2,x+1,x+1,x+2,x+3),p[v]=w,m[v]=w;for(var u=-1;u<=1;u+=2){p[g]=u;for(var S=-1;S<=1;S+=2)p[y]=S,h.push(p[0],p[1],p[2],m[0],m[1],m[2]),x+=1}var _=g;g=y,y=_}var E=o(c,new Float32Array(h)),L=o(c,new Uint16Array(f),c.ELEMENT_ARRAY_BUFFER),C=r(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],L),P=n(c);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(c,E,C,P)};var o=t(5827),r=t(2944),n=t(1943).bg;function a(c,h,f,x){this.gl=c,this.buffer=h,this.vao=f,this.shader=x}var i=a.prototype;i.draw=function(c,h,f,x,v,g){for(var y=!1,p=0;p<3;++p)y=y||v[p];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:f,bounds:x,enable:v,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(d,s,t){"use strict";d.exports=function(u,S,_,E,L){r(i,S,u),r(i,_,i);for(var C=0,P=0;P<2;++P){f[2]=E[P][2];for(var I=0;I<2;++I){f[1]=E[I][1];for(var j=0;j<2;++j)f[0]=E[j][0],v(c[C],f,i),C+=1}}var R=-1;for(P=0;P<8;++P){for(var H=c[P][3],F=0;F<3;++F)h[P][F]=c[P][F]/H;L&&(h[P][2]*=-1),H<0&&(R<0||h[P][2]<h[R][2])&&(R=P)}if(R<0){R=0;for(var U=0;U<3;++U){for(var B=(U+2)%3,N=(U+1)%3,J=-1,Z=-1,V=0;V<2;++V){var W=(K=V<<U)+(V<<B)+(1-V<<N),X=K+(1-V<<B)+(V<<N);a(h[K],h[W],h[X],x)<0||(V?J=1:Z=1)}if(J<0||Z<0)Z>J&&(R|=1<<U);else{for(V=0;V<2;++V){W=(K=V<<U)+(V<<B)+(1-V<<N);var K,ne=y([c[K],c[W],c[X=K+(1-V<<B)+(V<<N)],c[K+(1<<B)+(1<<N)]]);V?J=ne:Z=ne}Z>J&&(R|=1<<U)}}}var re=7^R,ae=-1;for(P=0;P<8;++P)P!==R&&P!==re&&(ae<0||h[ae][1]>h[P][1])&&(ae=P);var le=-1;for(P=0;P<3;++P)(xe=ae^1<<P)!==R&&xe!==re&&(le<0&&(le=xe),(N=h[xe])[0]<h[le][0]&&(le=xe));var pe=-1;for(P=0;P<3;++P){var xe;(xe=ae^1<<P)!==R&&xe!==re&&xe!==le&&(pe<0&&(pe=xe),(N=h[xe])[0]>h[pe][0]&&(pe=xe))}var ye=p;ye[0]=ye[1]=ye[2]=0,ye[o.log2(le^ae)]=ae&le,ye[o.log2(ae^pe)]=ae&pe;var se=7^pe;se===R||se===re?ye[o.log2(pe^(se=7^le))]=se&pe:ye[o.log2(le^se)]=se&le;var fe=m,Ee=R;for(U=0;U<3;++U)fe[U]=Ee&1<<U?-1:1;return w};var o=t(2288),r=t(104),n=t(4670),a=t(417),i=new Array(16),c=new Array(8),h=new Array(8),f=new Array(3),x=[0,0,0];function v(u,S,_){for(var E=0;E<4;++E){u[E]=_[12+E];for(var L=0;L<3;++L)u[E]+=S[L]*_[4*L+E]}}!function(){for(var u=0;u<8;++u)c[u]=[1,1,1,1],h[u]=[1,1,1]}();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(u){for(var S=0;S<g.length;++S)if((u=n.positive(u,g[S])).length<3)return 0;var _=u[0],E=_[0]/_[3],L=_[1]/_[3],C=0;for(S=1;S+1<u.length;++S){var P=u[S],I=u[S+1];C+=Math.abs((P[0]/P[3]-E)*(I[1]/I[3]-L)-(P[1]/P[3]-L)*(I[0]/I[3]-E))}return C}var p=[1,1,1],m=[0,0,0],w={cubeEdges:p,axis:m}},1681:function(d,s,t){"use strict";d.exports=function(p,m,w){var u=[],S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=u.length/3|0,I=0;I<w[C].length;++I){var j=+w[C][I].x;u.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1)}var R=u.length/3|0;S[C]=P,_[C]=R-P,P=u.length/3|0;for(var H=0;H<w[C].length;++H)u.push(j=+w[C][H].x,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1);R=u.length/3|0,E[C]=P,L[C]=R-P}var F=o(p,new Float32Array(u)),U=r(p,[{buffer:F,type:p.FLOAT,size:3,stride:0,offset:0}]),B=n(p);return B.attributes.position.location=0,new g(p,F,U,B,_,S,L,E)};var o=t(5827),r=t(2944),n=t(1943).j,a=[0,0,0],i=[0,0,0],c=[0,0,0],h=[0,0,0],f=[1,1];function x(p){return p[0]=p[1]=p[2]=0,p}function v(p,m){return p[0]=m[0],p[1]=m[1],p[2]=m[2],p}function g(p,m,w,u,S,_,E,L){this.gl=p,this.vertBuffer=m,this.vao=w,this.shader=u,this.tickCount=S,this.tickOffset=_,this.gridCount=E,this.gridOffset=L}var y=g.prototype;y.bind=function(p,m,w){this.shader.bind(),this.shader.uniforms.model=p,this.shader.uniforms.view=m,this.shader.uniforms.projection=w,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(p,m,w,u,S){var _=x(i);this.shader.uniforms.majorAxis=i,_[p]=m[1][p]-m[0][p],this.shader.uniforms.minorAxis=_;var E,L=v(h,w);L[p]+=m[0][p],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=u,(E=x(c))[(p+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(c))[(p+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(p,m,w,u,S){if(this.tickCount[p]){var _=x(a);_[p]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=u,this.shader.uniforms.lineWidth=S;var E=x(c);E[p]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p])}},y.drawGrid=function(p,m,w,u,S,_){if(this.gridCount[p]){var E=x(i);E[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[m]+=w[0][m],this.shader.uniforms.offset=L;var C=x(a);C[p]=1,this.shader.uniforms.majorAxis=C;var P=x(c);P[p]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[p],this.gridOffset[p])}},y.drawZero=function(p,m,w,u,S,_){var E=x(i);this.shader.uniforms.majorAxis=E,E[p]=w[1][p]-w[0][p],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[p]+=w[0][p],this.shader.uniforms.offset=L;var C=x(c);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(d,s,t){"use strict";var o=t(6832),r=t(5158),n=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);s.j=function(x){return r(x,n,a,null,[{name:"position",type:"vec3"}])};var i=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);s.f=function(x){return r(x,i,c,null,[{name:"position",type:"vec3"}])};var h=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),f=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);s.bg=function(x){return r(x,h,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(d,s,t){"use strict";d.exports=function(v,g,y,p,m,w){var u=o(v),S=r(v,[{buffer:u,size:3}]),_=a(v);_.attributes.position.location=0;var E=new h(v,_,u,S);return E.update(g,y,p,m,w),E};var o=t(5827),r=t(2944),n=t(875),a=t(1943).f,i=window||A.global||{},c=i.__TEXT_CACHE||{};function h(v,g,y,p){this.gl=v,this.shader=g,this.buffer=y,this.vao=p,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}i.__TEXT_CACHE={};var f=h.prototype,x=[0,0];f.bind=function(v,g,y,p){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=v,m.view=g,m.projection=y,m.pixelScale=p,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},f.unbind=function(){this.vao.unbind()},f.update=function(v,g,y,p,m){var w=[];function u(j,R,H,F,U,B){var N=c[H];N||(N=c[H]={});var J=N[R];J||(J=N[R]=function(le,pe){try{return n(le,pe)}catch(xe){return console.warn('error vectorizing text:"'+le+'" error:',xe),{cells:[],positions:[]}}}(R,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:B}));for(var Z=(F||12)/12,V=J.positions,W=J.cells,X=0,K=W.length;X<K;++X)for(var ne=W[X],re=2;re>=0;--re){var ae=V[ne[re]];w.push(Z*ae[0],-Z*ae[1],j)}}for(var S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=w.length/3|0,u(.5*(v[0][P]+v[1][P]),g[P],y[P],12,1.25,C),L[P]=(w.length/3|0)-E[P],S[P]=w.length/3|0;for(var I=0;I<p[P].length;++I)p[P][I].text&&u(p[P][I].x,p[P][I].text,p[P][I].font||m,p[P][I].fontSize||12,1.25,C);_[P]=(w.length/3|0)-S[P]}this.buffer.update(w),this.tickOffset=S,this.tickCount=_,this.labelOffset=E,this.labelCount=L},f.drawTicks=function(v,g,y,p,m,w,u,S){this.tickCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},f.drawLabel=function(v,g,y,p,m,w,u,S){this.labelCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(d,s){"use strict";function t(o,r){var n=o+"",a=n.indexOf("."),i=0;a>=0&&(i=n.length-a-1);var c=Math.pow(10,i),h=Math.round(o*r*c),f=h+"";if(f.indexOf("e")>=0)return f;var x=h/c,v=h%c;h<0?(x=0|-Math.ceil(x),v=0|-v):(x=0|Math.floor(x),v|=0);var g=""+x;if(h<0&&(g="-"+g),i){for(var y=""+v;y.length<i;)y="0"+y;return g+"."+y}return g}s.create=function(o,r){for(var n=[],a=0;a<3;++a){for(var i=[],c=0;c*r[a]<=o[1][a];++c)i.push({x:c*r[a],text:t(r[a],c)});for(c=-1;c*r[a]>=o[0][a];--c)i.push({x:c*r[a],text:t(r[a],c)});n.push(i)}return n},s.equal=function(o,r){for(var n=0;n<3;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;++a){var i=o[n][a],c=r[n][a];if(i.x!==c.x||i.text!==c.text||i.font!==c.font||i.fontColor!==c.fontColor||i.fontSize!==c.fontSize||i.dx!==c.dx||i.dy!==c.dy)return!1}}return!0}},2771:function(d,s,t){"use strict";d.exports=function(w,u,S,_,E){var L=u.model||h,C=u.view||h,P=u.projection||h,I=u._ortho||!1,j=w.bounds,R=(E=E||n(L,C,P,j,I)).axis;a(f,C,L),a(f,P,f);for(var H=p,F=0;F<3;++F)H[F].lo=1/0,H[F].hi=-1/0,H[F].pixelsPerDataUnit=1/0;var U=o(i(f,f));i(f,f);for(var B=0;B<3;++B){var N=(B+1)%3,J=(B+2)%3,Z=m;e:for(F=0;F<2;++F){var V=[];if(R[B]<0!=!!F){Z[B]=j[F][B];for(var W=0;W<2;++W){Z[N]=j[W^F][N];for(var X=0;X<2;++X)Z[J]=j[X^W^F][J],V.push(Z.slice())}var K=I?5:4;for(W=K;W===K;++W){if(0===V.length)continue e;V=r.positive(V,U[W])}for(W=0;W<V.length;++W){var ne=y(m,f,J=V[W],S,_);for(X=0;X<3;++X)H[X].lo=Math.min(H[X].lo,J[X]),H[X].hi=Math.max(H[X].hi,J[X]),X!==B&&(H[X].pixelsPerDataUnit=Math.min(H[X].pixelsPerDataUnit,Math.abs(ne[X])))}}}}return H};var o=t(5795),r=t(4670),n=t(2864),a=t(104),i=t(2142),c=t(6342),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function x(w,u,S){this.lo=w,this.hi=u,this.pixelsPerDataUnit=S}var v=[0,0,0,1],g=[0,0,0,1];function y(w,u,S,_,E){for(var L=0;L<3;++L){for(var C=v,P=g,I=0;I<3;++I)P[I]=C[I]=S[I];P[3]=C[3]=1,P[L]+=1,c(P,P,u),P[3]<0&&(w[L]=1/0),C[L]-=1,c(C,C,u),C[3]<0&&(w[L]=1/0);var j=(C[0]/C[3]-P[0]/P[3])*_,R=(C[1]/C[3]-P[1]/P[3])*E;w[L]=.25*Math.sqrt(j*j+R*R)}return w}var p=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(d,s,t){"use strict";var o=t(5306),r=t(7498),n=t(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(x,v,g,y,p){this.gl=x,this.type=v,this.handle=g,this.length=y,this.usage=p}var c=i.prototype;function h(x,v,g,y,p,m){var w=p.length*p.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(v,p,y),w;if(w+m>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(v,m,p),g}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(x,v){if("number"!=typeof v&&(v=-1),this.bind(),"object"==typeof x&&void 0!==x.shape){var g=x.dtype;if(a.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&"uint16"!==g?"uint32":"uint16"),g===x.dtype&&function(w,u){for(var S=1,_=u.length-1;_>=0;--_){if(u[_]!==S)return!1;S*=w[_]}return!0}(x.shape,x.stride))this.length=h(this.gl,this.type,this.length,this.usage,0===x.offset&&x.data.length===x.shape[0]?x.data:x.data.subarray(x.offset,x.shape[0]),v);else{var y=o.malloc(x.size,g),p=n(y,x.shape);r.assign(p,x),this.length=h(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,x.size),v),o.free(y)}}else if(Array.isArray(x)){var m;m=function f(x,v){for(var g=o.malloc(x.length,v),y=x.length,p=0;p<y;++p)g[p]=x[p];return g}(x,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=h(this.gl,this.type,this.length,this.usage,v<0?m:m.subarray(0,x.length),v),o.free(m)}else if("object"==typeof x&&"number"==typeof x.length)this.length=h(this.gl,this.type,this.length,this.usage,x,v);else{if("number"!=typeof x&&void 0!==x)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},d.exports=function(x,v,g,y){if(y=y||x.DYNAMIC_DRAW,(g=g||x.ARRAY_BUFFER)!==x.ARRAY_BUFFER&&g!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==x.DYNAMIC_DRAW&&y!==x.STATIC_DRAW&&y!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var p=x.createBuffer(),m=new i(x,g,p,0,y);return m.update(v),m}},1140:function(d,s,t){"use strict";var o=t(2858);d.exports=function(n,a){var i=n.positions,c=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(0===n.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var f=0,x=1/0,v=-1/0,g=1/0,y=-1/0,p=1/0,m=-1/0,w=null,u=null,S=[],_=1/0,E=!1,L=0;L<i.length;L++){var C=i[L];x=Math.min(C[0],x),v=Math.max(C[0],v),g=Math.min(C[1],g),y=Math.max(C[1],y),p=Math.min(C[2],p),m=Math.max(C[2],m);var P=c[L];if(o.length(P)>f&&(f=o.length(P)),L){var I=2*o.distance(w,C)/(o.length(u)+o.length(P));I?(_=Math.min(_,I),E=!1):E=!0}E||(w=C,u=P),S.push(P)}var R=[v,y,m];a&&(a[0]=[x,g,p],a[1]=R),0===f&&(f=1);var H=1/f;isFinite(_)||(_=1),h.vectorScale=_;var F=n.coneSize||.5;n.absoluteConeSize&&(F=n.absoluteConeSize*H),h.coneScale=F,L=0;for(var U=0;L<i.length;L++)for(var B=(C=i[L])[0],N=C[1],J=C[2],Z=S[L],V=o.length(Z)*H,W=0;W<8;W++){h.positions.push([B,N,J,U++]),h.positions.push([B,N,J,U++]),h.positions.push([B,N,J,U++]),h.positions.push([B,N,J,U++]),h.positions.push([B,N,J,U++]),h.positions.push([B,N,J,U++]),h.vectors.push(Z),h.vectors.push(Z),h.vectors.push(Z),h.vectors.push(Z),h.vectors.push(Z),h.vectors.push(Z),h.vertexIntensity.push(V,V,V),h.vertexIntensity.push(V,V,V);var X=h.positions.length;h.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return h};var r=t(7234);d.exports.createMesh=t(5028),d.exports.createConeMesh=function(n,a){return d.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},5028:function(d,s,t){"use strict";var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(104),c=t(7437),h=t(5050),f=t(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(m,w,u,S,_,E,L,C,P,I,j){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=u,this.pickShader=S,this.trianglePositions=_,this.triangleVectors=E,this.triangleColors=C,this.triangleUVs=P,this.triangleIds=L,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=j,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var g=v.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var w=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),void 0!==m.tubeScale&&(this.tubeScale=m.tubeScale),void 0!==m.vectorScale&&(this.vectorScale=m.vectorScale),void 0!==m.coneScale&&(this.coneScale=m.coneScale),void 0!==m.coneOffset&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ae){for(var le=f({colormap:ae,nshades:256,format:"rgba"}),pe=new Uint8Array(1024),xe=0;xe<256;++xe){for(var ye=le[xe],se=0;se<3;++se)pe[4*xe+se]=ye[se];pe[4*xe+3]=255*ye[3]}return h(pe,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var u=m.cells,S=m.positions,_=m.vectors;if(S&&u&&_){var E=[],L=[],C=[],P=[],I=[];this.cells=u,this.positions=S,this.vectors=_;var j=m.meshColor||[1,1,1,1],R=m.vertexIntensity,H=1/0,F=-1/0;if(R)if(m.vertexIntensityBounds)H=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var U=0;U<R.length;++U){var B=R[U];H=Math.min(H,B),F=Math.max(F,B)}else for(U=0;U<S.length;++U)B=S[U][2],H=Math.min(H,B),F=Math.max(F,B);for(this.intensity=R||function(ae){for(var le=ae.length,pe=new Array(le),xe=0;xe<le;++xe)pe[xe]=ae[xe][2];return pe}(S),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],U=0;U<S.length;++U)for(var N=S[U],J=0;J<3;++J)!isNaN(N[J])&&isFinite(N[J])&&(this.bounds[0][J]=Math.min(this.bounds[0][J],N[J]),this.bounds[1][J]=Math.max(this.bounds[1][J],N[J]));var Z=0;e:for(U=0;U<u.length;++U){var V=u[U];if(3===V.length){for(J=0;J<3;++J){N=S[X=V[J]];for(var W=0;W<3;++W)if(isNaN(N[W])||!isFinite(N[W]))continue e}for(J=0;J<3;++J){var X;N=S[X=V[2-J]],E.push(N[0],N[1],N[2],N[3]);var K=_[X];L.push(K[0],K[1],K[2],K[3]||0);var ne;C.push(j[0],j[1],j[2],3===j.length?1:j[3]),P.push((ne=R?[(R[X]-H)/(F-H),0]:[(N[2]-H)/(F-H),0])[0],ne[1]),I.push(U)}Z+=1}}this.triangleCount=Z,this.trianglePositions.update(E),this.triangleVectors.update(L),this.triangleColors.update(C),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(I))}},g.drawTransparent=g.draw=function(m){for(var w=this.gl,u=(m=m||{}).model||x,S=m.view||x,_=m.projection||x,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);var C={model:u,view:S,projection:_,inverseModel:x.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=c(C.inverseModel,C.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(i(P,C.view,C.model),i(P,C.projection,P),c(P,P),L=0;L<3;++L)C.eyePosition[L]=P[12+L]/P[15];var I=P[15];for(L=0;L<3;++L)I+=this.lightPosition[L]*P[4*L+3];for(L=0;L<3;++L){for(var j=P[12+L],R=0;R<3;++R)j+=P[4*R+L]*this.lightPosition[R];C.lightPosition[L]=j/I}if(this.triangleCount>0){var H=this.triShader;H.bind(),H.uniforms=C,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){for(var w=this.gl,u=(m=m||{}).model||x,S=m.view||x,_=m.projection||x,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);this._model=[].slice.call(u),this._view=[].slice.call(S),this._projection=[].slice.call(_),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var C={model:u,view:S,projection:_,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var w=m.value[0]+256*m.value[1]+65536*m.value[2],u=this.cells[w],S=this.positions[u[1]].slice(0,3),_={position:S,dataCoordinate:S,index:Math.floor(u[1]/48)};return"cone"===this.traceType?_.index=Math.floor(u[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[u[1]],_.velocity=this.vectors[u[1]].slice(0,3),_.divergence=this.vectors[u[1]][3],_.index=w),_},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},d.exports=function(m,w,u){var S=u.shaders;1===arguments.length&&(m=(w=m).gl);var _=function y(m,w){var u=o(m,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}(m,S),E=function p(m,w){var u=o(m,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}(m,S),L=a(m,h(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap(),L.minFilter=m.LINEAR_MIPMAP_LINEAR,L.magFilter=m.LINEAR;var C=r(m),P=r(m),I=r(m),j=r(m),R=r(m),F=new v(m,L,_,E,C,P,R,I,j,n(m,[{buffer:C,type:m.FLOAT,size:4},{buffer:R,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:m.FLOAT,size:4},{buffer:j,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),u.traceType||"cone");return F.update(w),F}},7234:function(d,s,t){var o=t(6832),r=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=o(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(d){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(d,s,t){var o=t(1950);d.exports=function(r){return o[r]}},3110:function(d,s,t){"use strict";d.exports=function(v){var g=v.gl,y=o(g),p=r(g,[{buffer:y,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:g.FLOAT,size:3,offset:28,stride:40}]),m=n(g);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var w=new i(g,y,p,m);return w.update(v),w};var o=t(5827),r=t(2944),n=t(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.shader=p,this.buffer=g,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=i.prototype;function h(v,g){for(var y=0;y<3;++y)v[0][y]=Math.min(v[0][y],g[y]),v[1][y]=Math.max(v[1][y],g[y])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(v){var g=this.gl,y=this.shader.uniforms;this.shader.bind();var p=y.view=v.view||a,m=y.projection=v.projection||a;y.model=v.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var E=(v._ortho?2:1)*this.pixelRatio*(m[3]*p[12]+m[7]*p[13]+m[11]*p[14]+m[15]*p[15])/g.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)g.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&g.drawArrays(g.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var f=function(){for(var v=new Array(3),g=0;g<3;++g){for(var y=[],p=1;p<=2;++p)for(var m=-1;m<=1;m+=2){var w=[0,0,0];w[(p+g)%3]=m,y.push(w)}v[g]=y}return v}();function x(v,g,y,p){for(var m=f[p],w=0;w<m.length;++w){var u=m[w];v.push(g[0],g[1],g[2],y[0],y[1],y[2],y[3],u[0],u[1],u[2])}return m.length}c.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=v.color||[[0,0,0],[0,0,0],[0,0,0]],y=v.position,p=v.error;if(Array.isArray(g[0])||(g=[g,g,g]),y&&p){var m=[],w=y.length,u=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=u;e:for(var _=0;_<w;++_){for(var E=y[_],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,P=p[_],I=g[S];Array.isArray(I[0])&&(I=g[_]),3===I.length?I=[I[0],I[1],I[2],1]:4===I.length&&(I=[I[0],I[1],I[2],I[3]],!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][S])||isNaN(P[1][S])||(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),u+=2+x(m,C,I,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),u+=2+x(m,C,I,S)))}this.lineCount[S]=u-this.lineOffset[S]}this.buffer.update(m)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(d,s,t){"use strict";var o=t(6832),r=t(5158),n=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(d,s,t){"use strict";var o=t(8931);d.exports=function(w,u,S,_){r||(r=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=w.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(H,F){var U=H.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(U+1);for(var B=0;B<=U;++B){for(var N=new Array(U),J=0;J<B;++J)N[J]=H.COLOR_ATTACHMENT0+J;for(J=B;J<U;++J)N[J]=H.NONE;c[B]=N}}(w,E),Array.isArray(u)&&(_=S,S=0|u[1],u=0|u[0]),"number"!=typeof u)throw new Error("gl-fbo: Missing shape parameter");var L=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(u<0||u>L||S<0||S>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(_=_||{})){if((C=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>w.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=w.UNSIGNED_BYTE,I=w.getExtension("OES_texture_float");if(_.float&&C>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else _.preferFloat&&C>0&&I&&(P=w.FLOAT);var j=!0;"depth"in _&&(j=!!_.depth);var R=!1;return"stencil"in _&&(R=!!_.stencil),new y(w,u,S,P,C,j,R,E)};var r,n,a,i,c=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function f(w,u){w.bindFramebuffer(w.FRAMEBUFFER,u[0]),w.bindRenderbuffer(w.RENDERBUFFER,u[1]),w.bindTexture(w.TEXTURE_2D,u[2])}function x(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(w,u,S,_,E,L){if(!_)return null;var C=o(w,u,S,E,_);return C.magFilter=w.NEAREST,C.minFilter=w.NEAREST,C.mipSamples=1,C.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,L,w.TEXTURE_2D,C.handle,0),C}function g(w,u,S,_,E){var L=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,L),w.renderbufferStorage(w.RENDERBUFFER,_,u,S),w.framebufferRenderbuffer(w.FRAMEBUFFER,E,w.RENDERBUFFER,L),L}function y(w,u,S,_,E,L,C,P){this.gl=w,this._shape=[0|u,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var I=0;I<E;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=L,this._useStencil=C;var j=this,R=[0|u,0|S];Object.defineProperties(R,{0:{get:function(){return j._shape[0]},set:function(H){return j.width=H}},1:{get:function(){return j._shape[1]},set:function(H){return j.height=H}}}),this._shapeVector=R,function(H){var F=h(H.gl),U=H.gl,B=H.handle=U.createFramebuffer(),N=H._shape[0],J=H._shape[1],Z=H.color.length,V=H._ext,W=H._useStencil,X=H._useDepth,K=H._colorType;U.bindFramebuffer(U.FRAMEBUFFER,B);for(var ne=0;ne<Z;++ne)H.color[ne]=v(U,N,J,K,U.RGBA,U.COLOR_ATTACHMENT0+ne);0===Z?(H._color_rb=g(U,N,J,U.RGBA4,U.COLOR_ATTACHMENT0),V&&V.drawBuffersWEBGL(c[0])):Z>1&&V.drawBuffersWEBGL(c[Z]);var re=U.getExtension("WEBGL_depth_texture");re?W?H.depth=v(U,N,J,re.UNSIGNED_INT_24_8_WEBGL,U.DEPTH_STENCIL,U.DEPTH_STENCIL_ATTACHMENT):X&&(H.depth=v(U,N,J,U.UNSIGNED_SHORT,U.DEPTH_COMPONENT,U.DEPTH_ATTACHMENT)):X&&W?H._depth_rb=g(U,N,J,U.DEPTH_STENCIL,U.DEPTH_STENCIL_ATTACHMENT):X?H._depth_rb=g(U,N,J,U.DEPTH_COMPONENT16,U.DEPTH_ATTACHMENT):W&&(H._depth_rb=g(U,N,J,U.STENCIL_INDEX,U.STENCIL_ATTACHMENT));var ae=U.checkFramebufferStatus(U.FRAMEBUFFER);if(ae!==U.FRAMEBUFFER_COMPLETE){for(H._destroyed=!0,U.bindFramebuffer(U.FRAMEBUFFER,null),U.deleteFramebuffer(H.handle),H.handle=null,H.depth&&(H.depth.dispose(),H.depth=null),H._depth_rb&&(U.deleteRenderbuffer(H._depth_rb),H._depth_rb=null),ne=0;ne<H.color.length;++ne)H.color[ne].dispose(),H.color[ne]=null;H._color_rb&&(U.deleteRenderbuffer(H._color_rb),H._color_rb=null),f(U,F),x(ae)}f(U,F)}(this)}var p=y.prototype;function m(w,u,S){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==u||w._shape[1]!==S){var _=w.gl,E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(u<0||u>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=u,w._shape[1]=S;for(var L=h(_),C=0;C<w.color.length;++C)w.color[C].shape=w._shape;w._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,w._shape[0],w._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,w.handle);var P=_.checkFramebufferStatus(_.FRAMEBUFFER);P!==_.FRAMEBUFFER_COMPLETE&&(w.dispose(),f(_,L),x(P)),f(_,L)}}Object.defineProperties(p,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|w[0],S=0|w[1];return m(this,u,S),[u,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return m(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return m(this,this._shape[0],w|=0),w},enumerable:!1}}),p.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},p.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(d,s,t){var o=t(8974).sprintf,r=t(6603),n=t(9365),a=t(8008);d.exports=function(i,c,h){"use strict";var f=n(c)||"of unknown name (see npm glsl-shader-name)",x="unknown type";void 0!==h&&(x=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var v=o("Error compiling %s shader %s:\n",x,f),g=o("%s%s",v,i),y=i.split("\n"),p={},m=0;m<y.length;m++){var w=y[m];if(""!==w&&"\0"!==w){var u=parseInt(w.split(":")[2]);if(isNaN(u))throw new Error(o("Could not parse error: %s",w));p[u]=w}}var S=a(c).split("\n");for(m=0;m<S.length;m++)if((p[m+3]||p[m+2]||p[m+1])&&(v+=S[m]+"\n",p[m+1])){var _=p[m+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),v+=o("^^^ %s\n\n",_)}return{long:v.trim(),short:g.trim()}}},6386:function(d,s,t){"use strict";d.exports=function(g,y){var p=g.gl,m=new h(g,a(p,c.vertex,c.fragment),a(p,c.pickVertex,c.pickFragment),i(p),i(p),i(p),i(p));return m.update(y),g.addObject(m),m};var o=t(5070),r=t(9560),n=t(5306),a=t(5158),i=t(5827),c=t(1292);function h(g,y,p,m,w,u,S){this.plot=g,this.shader=y,this.pickShader=p,this.positionBuffer=m,this.weightBuffer=w,this.colorBuffer=u,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,g,y,x=h.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,y=this.shader,p=this.bounds,m=this.numVertices;if(!(m<=0)){var w=g.gl,u=g.dataBox,_=p[3]-p[1],E=u[2]-u[0],L=u[3]-u[1];f[0]=2*(p[2]-p[0])/E,f[4]=2*_/L,f[6]=2*(p[0]-u[0])/E-1,f[7]=2*(p[1]-u[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=f,C.shape=this.shape;var P=y.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,m)}}),x.drawPick=(g=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0],function(p){var m=this.plot,w=this.pickShader,u=this.bounds,S=this.numVertices;if(!(S<=0)){var _=m.gl,E=m.dataBox,C=u[3]-u[1],P=E[2]-E[0],I=E[3]-E[1];g[0]=2*(u[2]-u[0])/P,g[4]=2*C/I,g[6]=2*(u[0]-E[0])/P-1,g[7]=2*(u[1]-E[1])/I-1;for(var j=0;j<4;++j)y[j]=p>>8*j&255;this.pickOffset=p,w.bind();var R=w.uniforms;R.viewTransform=g,R.pickOffset=y,R.shape=this.shape;var H=w.attributes;return this.positionBuffer.bind(),H.position.pointer(),this.weightBuffer.bind(),H.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),H.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,S),p+this.shape[0]*this.shape[1]}}),x.pick=function(g,y,p){var m=this.pickOffset;if(p<m||p>=m+this.shape[0]*this.shape[1])return null;var u=p-m;return{object:this,pointId:u,dataCoord:[this.xData[u%this.shape[0]],this.yData[u/this.shape[0]|0]]}},x.update=function(g){var y=(g=g||{}).shape||[0,0],p=g.x||r(y[0]),m=g.y||r(y[1]),w=g.z||new Float32Array(y[0]*y[1]),u=!1!==g.zsmooth;this.xData=p,this.yData=m;var S,_,E,L,C=g.colorLevels||[0],P=g.colorValues||[0,0,0,1],I=C.length,j=this.bounds;u?(S=j[0]=p[0],_=j[1]=m[0],E=j[2]=p[p.length-1],L=j[3]=m[m.length-1]):(S=j[0]=p[0]+(p[1]-p[0])/2,_=j[1]=m[0]+(m[1]-m[0])/2,E=j[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=j[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var R=1/(E-S),H=1/(L-_),F=y[0],U=y[1];this.shape=[F,U];var B=(u?(F-1)*(U-1):F*U)*(v.length>>>1);this.numVertices=B;for(var N=n.mallocUint8(4*B),J=n.mallocFloat32(2*B),Z=n.mallocUint8(2*B),V=n.mallocUint32(B),W=0,X=u?F-1:F,K=u?U-1:U,ne=0;ne<K;++ne){var re,ae;u?(re=H*(m[ne]-_),ae=H*(m[ne+1]-_)):(re=ne<U-1?H*(m[ne]-(m[ne+1]-m[ne])/2-_):H*(m[ne]-(m[ne]-m[ne-1])/2-_),ae=ne<U-1?H*(m[ne]+(m[ne+1]-m[ne])/2-_):H*(m[ne]+(m[ne]-m[ne-1])/2-_));for(var le=0;le<X;++le){var pe,xe;u?(pe=R*(p[le]-S),xe=R*(p[le+1]-S)):(pe=le<F-1?R*(p[le]-(p[le+1]-p[le])/2-S):R*(p[le]-(p[le]-p[le-1])/2-S),xe=le<F-1?R*(p[le]+(p[le+1]-p[le])/2-S):R*(p[le]+(p[le]-p[le-1])/2-S));for(var ye=0;ye<v.length;ye+=2){var se,fe,Ee,de,we=v[ye],ke=v[ye+1],Te=w[u?(ne+ke)*F+(le+we):ne*F+le],$=o.le(C,Te);if($<0)se=P[0],fe=P[1],Ee=P[2],de=P[3];else if($===I-1)se=P[4*I-4],fe=P[4*I-3],Ee=P[4*I-2],de=P[4*I-1];else{var oe=(Te-C[$])/(C[$+1]-C[$]),he=1-oe,me=4*$,Me=4*($+1);se=he*P[me]+oe*P[Me],fe=he*P[me+1]+oe*P[Me+1],Ee=he*P[me+2]+oe*P[Me+2],de=he*P[me+3]+oe*P[Me+3]}N[4*W]=255*se,N[4*W+1]=255*fe,N[4*W+2]=255*Ee,N[4*W+3]=255*de,J[2*W]=.5*pe+.5*xe,J[2*W+1]=.5*re+.5*ae,Z[2*W]=we,Z[2*W+1]=ke,V[W]=ne*F+le,W+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(Z),this.colorBuffer.update(N),this.idBuffer.update(V),n.free(J),n.free(N),n.free(Z),n.free(V)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(d,s,t){"use strict";var o=t(6832);d.exports={fragment:o(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:o(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(d,s,t){var o=t(6832),r=t(5158),n=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return r(h,n,a,null,c)},s.createPickShader=function(h){return r(h,n,i,null,c)}},6086:function(d,s,t){"use strict";d.exports=function(S){var _=S.gl||S.scene&&S.scene.gl,E=x(_);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=v(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=o(_),P=r(_,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),I=h(new Array(1024),[256,1,4]),j=0;j<1024;++j)I.data[j]=255;var R=n(_,I);R.wrap=_.REPEAT;var H=new w(_,E,L,C,P,R);return H.update(S),H};var o=t(5827),r=t(2944),n=t(8931),a=new Uint8Array(4),i=new Float32Array(a.buffer),c=t(5070),h=t(5050),f=t(248),x=f.createShader,v=f.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(S,_){for(var E=0,L=0;L<3;++L){var C=S[L]-_[L];E+=C*C}return Math.sqrt(E)}function p(S){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)_[0][E]=Math.max(S[0][E],_[0][E]),_[1][E]=Math.min(S[1][E],_[1][E]);return _}function m(S,_,E,L){this.arcLength=S,this.position=_,this.index=E,this.dataCoordinate=L}function w(S,_,E,L,C,P){this.gl=S,this.shader=_,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var u=w.prototype;u.isTransparent=function(){return this.hasAlpha},u.isOpaque=function(){return!this.hasAlpha},u.pickSlots=1,u.setPickBase=function(S){this.pickId=S},u.drawTransparent=u.draw=function(S){if(this.vertexCount){var _=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.drawPick=function(S){if(this.vertexCount){var _=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.update=function(S){var _,E;this.dirty=!0;var L=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],I=[],j=0,R=0,H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=S.position||S.positions;if(F){var U=S.color||S.colors||[0,0,0,1],B=S.lineWidth||1,N=!1;e:for(_=1;_<F.length;++_){var J,Z,V,W=F[_-1],X=F[_];for(P.push(j),I.push(W.slice()),E=0;E<3;++E){if(isNaN(W[E])||isNaN(X[E])||!isFinite(W[E])||!isFinite(X[E])){if(!L&&C.length>0){for(var K=0;K<24;++K)C.push(C[C.length-12]);R+=2,N=!0}continue e}H[0][E]=Math.min(H[0][E],W[E],X[E]),H[1][E]=Math.max(H[1][E],W[E],X[E])}Array.isArray(U[0])?(J=U.length>_-1?U[_-1]:U.length>0?U[U.length-1]:[0,0,0,1],Z=U.length>_?U[_]:U.length>0?U[U.length-1]:[0,0,0,1]):J=Z=U,3===J.length&&(J=[J[0],J[1],J[2],1]),3===Z.length&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&J[3]<1&&(this.hasAlpha=!0),V=Array.isArray(B)?B.length>_-1?B[_-1]:B.length>0?B[B.length-1]:[0,0,0,1]:B;var ne=j;if(j+=y(W,X),N){for(E=0;E<2;++E)C.push(W[0],W[1],W[2],X[0],X[1],X[2],ne,V,J[0],J[1],J[2],J[3]);R+=2,N=!1}C.push(W[0],W[1],W[2],X[0],X[1],X[2],ne,V,J[0],J[1],J[2],J[3],W[0],W[1],W[2],X[0],X[1],X[2],ne,-V,J[0],J[1],J[2],J[3],X[0],X[1],X[2],W[0],W[1],W[2],j,-V,Z[0],Z[1],Z[2],Z[3],X[0],X[1],X[2],W[0],W[1],W[2],j,V,Z[0],Z[1],Z[2],Z[3]),R+=4}}if(this.buffer.update(C),P.push(j),I.push(F[F.length-1].slice()),this.bounds=H,this.vertexCount=R,this.points=I,this.arcLength=P,"dashes"in S){var re=S.dashes.slice();for(re.unshift(0),_=1;_<re.length;++_)re[_]=re[_-1]+re[_];var ae=h(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(E=0;E<4;++E)ae.set(_,0,E,0);1&c.le(re,re[re.length-1]*_/255)?ae.set(_,0,0,0):ae.set(_,0,0,255)}this.texture.setPixels(ae)}},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},u.pick=function(S){if(!S||S.id!==this.pickId)return null;var F,U,B,_=(F=S.value[0],U=S.value[1],B=S.value[2],a[0]=0,a[1]=B,a[2]=U,a[3]=F,i[0]),E=c.le(this.arcLength,_);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(_-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),I=1-P,j=[0,0,0],R=0;R<3;++R)j[R]=I*L[R]+P*C[R];var H=Math.min(P<.5?E:E+1,this.points.length-1);return new m(_,j,H,this.points[H])}},7332:function(d){d.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(d){d.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3],a=s[4],i=s[5],c=s[6],h=s[7],f=s[8],x=s[9],v=s[10],g=s[11],y=s[12],p=s[13],m=s[14],w=s[15];return(t*i-o*a)*(v*w-g*m)-(t*c-r*a)*(x*w-g*p)+(t*h-n*a)*(x*m-v*p)+(o*c-r*i)*(f*w-g*y)-(o*h-n*i)*(f*m-v*y)+(r*h-n*c)*(f*p-x*y)}},5950:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o+o,c=r+r,h=n+n,f=o*i,x=r*i,v=r*c,g=n*i,y=n*c,p=n*h,m=a*i,w=a*c,u=a*h;return s[0]=1-v-p,s[1]=x+u,s[2]=g-w,s[3]=0,s[4]=x-u,s[5]=1-f-p,s[6]=y+m,s[7]=0,s[8]=g+w,s[9]=y-m,s[10]=1-f-v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],c=r+r,h=n+n,f=a+a,x=r*c,v=r*h,g=r*f,y=n*h,p=n*f,m=a*f,w=i*c,u=i*h,S=i*f;return s[0]=1-(y+m),s[1]=v+S,s[2]=g-u,s[3]=0,s[4]=v-S,s[5]=1-(x+m),s[6]=p+w,s[7]=0,s[8]=g+u,s[9]=p-w,s[10]=1-(x+y),s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}},9947:function(d){d.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=t[4],c=t[5],h=t[6],f=t[7],x=t[8],v=t[9],g=t[10],y=t[11],p=t[12],m=t[13],w=t[14],u=t[15],S=o*c-r*i,_=o*h-n*i,E=o*f-a*i,L=r*h-n*c,C=r*f-a*c,P=n*f-a*h,I=x*m-v*p,j=x*w-g*p,R=x*u-y*p,H=v*w-g*m,F=v*u-y*m,U=g*u-y*w,B=S*U-_*F+E*H+L*R-C*j+P*I;return B?(s[0]=(c*U-h*F+f*H)*(B=1/B),s[1]=(n*F-r*U-a*H)*B,s[2]=(m*P-w*C+u*L)*B,s[3]=(g*C-v*P-y*L)*B,s[4]=(h*R-i*U-f*j)*B,s[5]=(o*U-n*R+a*j)*B,s[6]=(w*E-p*P-u*_)*B,s[7]=(x*P-g*E+y*_)*B,s[8]=(i*F-c*R+f*I)*B,s[9]=(r*R-o*F-a*I)*B,s[10]=(p*C-m*E+u*S)*B,s[11]=(v*E-x*C-y*S)*B,s[12]=(c*j-i*H-h*I)*B,s[13]=(o*H-r*j+n*I)*B,s[14]=(m*_-p*L-w*S)*B,s[15]=(x*L-v*_+g*S)*B,s):null}},3012:function(d,s,t){var o=t(9947);d.exports=function(r,n,a,i){var c,h,f,x,v,g,y,p,m,w,u=n[0],S=n[1],_=n[2],E=i[0],L=i[1],C=i[2],P=a[0],I=a[1],j=a[2];return Math.abs(u-P)<1e-6&&Math.abs(S-I)<1e-6&&Math.abs(_-j)<1e-6?o(r):(y=u-P,p=S-I,m=_-j,c=L*(m*=w=1/Math.sqrt(y*y+p*p+m*m))-C*(p*=w),h=C*(y*=w)-E*m,f=E*p-L*y,(w=Math.sqrt(c*c+h*h+f*f))?(c*=w=1/w,h*=w,f*=w):(c=0,h=0,f=0),x=p*f-m*h,v=m*c-y*f,g=y*h-p*c,(w=Math.sqrt(x*x+v*v+g*g))?(x*=w=1/w,v*=w,g*=w):(x=0,v=0,g=0),r[0]=c,r[1]=x,r[2]=y,r[3]=0,r[4]=h,r[5]=v,r[6]=p,r[7]=0,r[8]=f,r[9]=g,r[10]=m,r[11]=0,r[12]=-(c*u+h*S+f*_),r[13]=-(x*u+v*S+g*_),r[14]=-(y*u+p*S+m*_),r[15]=1,r)}},104:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],c=t[4],h=t[5],f=t[6],x=t[7],v=t[8],g=t[9],y=t[10],p=t[11],m=t[12],w=t[13],u=t[14],S=t[15],_=o[0],E=o[1],L=o[2],C=o[3];return s[0]=_*r+E*c+L*v+C*m,s[1]=_*n+E*h+L*g+C*w,s[2]=_*a+E*f+L*y+C*u,s[3]=_*i+E*x+L*p+C*S,s[4]=(_=o[4])*r+(E=o[5])*c+(L=o[6])*v+(C=o[7])*m,s[5]=_*n+E*h+L*g+C*w,s[6]=_*a+E*f+L*y+C*u,s[7]=_*i+E*x+L*p+C*S,s[8]=(_=o[8])*r+(E=o[9])*c+(L=o[10])*v+(C=o[11])*m,s[9]=_*n+E*h+L*g+C*w,s[10]=_*a+E*f+L*y+C*u,s[11]=_*i+E*x+L*p+C*S,s[12]=(_=o[12])*r+(E=o[13])*c+(L=o[14])*v+(C=o[15])*m,s[13]=_*n+E*h+L*g+C*w,s[14]=_*a+E*f+L*y+C*u,s[15]=_*i+E*x+L*p+C*S,s}},5268:function(d){d.exports=function(s,t,o,r,n,a,i){var c=1/(t-o),h=1/(r-n),f=1/(a-i);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*f,s[11]=0,s[12]=(t+o)*c,s[13]=(n+r)*h,s[14]=(i+a)*f,s[15]=1,s}},1120:function(d){d.exports=function(s,t,o,r,n){var a=1/Math.tan(t/2),i=1/(r-n);return s[0]=a/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*i,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*i,s[15]=0,s}},4422:function(d){d.exports=function(s,t,o,r){var n,a,i,c,h,f,x,v,g,y,p,m,w,u,S,_,E,L,C,P,I,j,R,H,F=r[0],U=r[1],B=r[2],N=Math.sqrt(F*F+U*U+B*B);return Math.abs(N)<1e-6?null:(F*=N=1/N,U*=N,B*=N,n=Math.sin(o),i=1-(a=Math.cos(o)),h=t[1],f=t[2],x=t[3],g=t[5],y=t[6],p=t[7],w=t[9],u=t[10],S=t[11],C=F*U*i-B*n,P=U*U*i+a,I=B*U*i+F*n,j=F*B*i+U*n,R=U*B*i-F*n,H=B*B*i+a,s[0]=(c=t[0])*(_=F*F*i+a)+(v=t[4])*(E=U*F*i+B*n)+(m=t[8])*(L=B*F*i-U*n),s[1]=h*_+g*E+w*L,s[2]=f*_+y*E+u*L,s[3]=x*_+p*E+S*L,s[4]=c*C+v*P+m*I,s[5]=h*C+g*P+w*I,s[6]=f*C+y*P+u*I,s[7]=x*C+p*P+S*I,s[8]=c*j+v*R+m*H,s[9]=h*j+g*R+w*H,s[10]=f*j+y*R+u*H,s[11]=x*j+p*R+S*H,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[4],i=t[5],c=t[6],h=t[7],f=t[8],x=t[9],v=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*n+f*r,s[5]=i*n+x*r,s[6]=c*n+v*r,s[7]=h*n+g*r,s[8]=f*n-a*r,s[9]=x*n-i*r,s[10]=v*n-c*r,s[11]=g*n-h*r,s}},7115:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],c=t[2],h=t[3],f=t[8],x=t[9],v=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n-f*r,s[1]=i*n-x*r,s[2]=c*n-v*r,s[3]=h*n-g*r,s[8]=a*r+f*n,s[9]=i*r+x*n,s[10]=c*r+v*n,s[11]=h*r+g*n,s}},5240:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],c=t[2],h=t[3],f=t[4],x=t[5],v=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n+f*r,s[1]=i*n+x*r,s[2]=c*n+v*r,s[3]=h*n+g*r,s[4]=f*n-a*r,s[5]=x*n-i*r,s[6]=v*n-c*r,s[7]=g*n-h*r,s}},3668:function(d){d.exports=function(s,t,o){var r=o[0],n=o[1],a=o[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(d){d.exports=function(s,t,o){var r,n,a,i,c,h,f,x,v,g,y,p,m=o[0],w=o[1],u=o[2];return t===s?(s[12]=t[0]*m+t[4]*w+t[8]*u+t[12],s[13]=t[1]*m+t[5]*w+t[9]*u+t[13],s[14]=t[2]*m+t[6]*w+t[10]*u+t[14],s[15]=t[3]*m+t[7]*w+t[11]*u+t[15]):(n=t[1],a=t[2],i=t[3],c=t[4],h=t[5],f=t[6],x=t[7],v=t[8],g=t[9],y=t[10],p=t[11],s[0]=r=t[0],s[1]=n,s[2]=a,s[3]=i,s[4]=c,s[5]=h,s[6]=f,s[7]=x,s[8]=v,s[9]=g,s[10]=y,s[11]=p,s[12]=r*m+c*w+v*u+t[12],s[13]=n*m+h*w+g*u+t[13],s[14]=a*m+f*w+y*u+t[14],s[15]=i*m+x*w+p*u+t[15]),s}},2142:function(d){d.exports=function(s,t){if(s===t){var o=t[1],r=t[2],n=t[3],a=t[6],i=t[7],c=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=o,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=a,s[11]=t[14],s[12]=n,s[13]=i,s[14]=c}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(d,s,t){"use strict";var o=t(957),r=t(7309);function n(c,h){for(var f=[0,0,0,0],x=0;x<4;++x)for(var v=0;v<4;++v)f[v]+=c[4*x+v]*h[x];return f}function a(c,h,f,x,v){for(var g=n(x,n(f,n(h,[c[0],c[1],c[2],1]))),y=0;y<3;++y)g[y]/=g[3];return[.5*v[0]*(1+g[0]),.5*v[1]*(1-g[1])]}function i(c,h){for(var f=[0,0,0],x=0;x<c.length;++x)for(var v=c[x],g=h[x],y=0;y<3;++y)f[y]+=g*v[y];return f}d.exports=function(c,h,f,x,v,g){if(1===c.length)return[0,c[0].slice()];for(var y=new Array(c.length),p=0;p<c.length;++p)y[p]=a(c[p],f,x,v,g);var m=0,w=1/0;for(p=0;p<y.length;++p){for(var u=0,S=0;S<2;++S)u+=Math.pow(y[p][S]-h[S],2);u<w&&(w=u,m=p)}var _=function(L,C){if(2===L.length){for(var P=0,I=0,j=0;j<2;++j)P+=Math.pow(C[j]-L[0][j],2),I+=Math.pow(C[j]-L[1][j],2);return(P=Math.sqrt(P))+(I=Math.sqrt(I))<1e-6?[1,0]:[I/(P+I),P/(I+P)]}if(3===L.length){var R=[0,0];return r(L[0],L[1],L[2],C,R),o(L,R)}return[]}(y,h),E=0;for(p=0;p<3;++p){if(_[p]<-.001||_[p]>1.0001)return null;E+=_[p]}return Math.abs(E-1)>.001?null:[m,i(c,_),_]}},2056:function(d,s,t){var o=t(6832),r=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),n=o(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),x=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),v=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),g=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),y=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:f,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:v,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(d,s,t){"use strict";var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(115),c=t(104),h=t(7437),f=t(5050),x=t(9156),v=t(7212),g=t(5306),y=t(2056),p=t(4340),m=y.meshShader,w=y.wireShader,u=y.pointShader,S=y.pickShader,_=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(N,J,Z,V,W,X,K,ne,re,ae,le,pe,xe,ye,se,fe,Ee,de,we,ke,Te,$,oe,he,me,Me,Ie){this.gl=N,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=J,this.dirty=!0,this.triShader=Z,this.lineShader=V,this.pointShader=W,this.pickShader=X,this.pointPickShader=K,this.contourShader=ne,this.trianglePositions=re,this.triangleColors=le,this.triangleNormals=xe,this.triangleUVs=pe,this.triangleIds=ae,this.triangleVAO=ye,this.triangleCount=0,this.lineWidth=1,this.edgePositions=se,this.edgeColors=Ee,this.edgeUVs=de,this.edgeIds=fe,this.edgeVAO=we,this.edgeCount=0,this.pointPositions=ke,this.pointColors=$,this.pointUVs=oe,this.pointSizes=he,this.pointIds=Te,this.pointVAO=me,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Me,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=C.prototype;function I(N,J){if(!J||!J.length)return 1;for(var Z=0;Z<J.length;++Z){if(J.length<2)return 1;if(J[Z][0]===N)return J[Z][1];if(J[Z][0]>N&&Z>0){var V=(J[Z][0]-N)/(J[Z][0]-J[Z-1][0]);return J[Z][1]*(1-V)+V*J[Z-1][1]}}return 1}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(N){this.pickId=N},P.highlight=function(N){if(N&&this.contourEnable){for(var J=v(this.cells,this.intensity,N.intensity),Z=J.cells,V=J.vertexIds,W=J.vertexWeights,X=Z.length,K=g.mallocFloat32(6*X),ne=0,re=0;re<X;++re)for(var ae=Z[re],le=0;le<2;++le){var pe=ae[0];2===ae.length&&(pe=ae[le]);for(var se=W[pe],fe=1-se,Ee=this.positions[V[pe][0]],de=this.positions[V[pe][1]],we=0;we<3;++we)K[ne++]=se*Ee[we]+fe*de[we]}this.contourCount=ne/3|0,this.contourPositions.update(K.subarray(0,ne)),g.free(K)}else this.contourCount=0},P.update=function(N){N=N||{};var J=this.gl;this.dirty=!0,"contourEnable"in N&&(this.contourEnable=N.contourEnable),"contourColor"in N&&(this.contourColor=N.contourColor),"lineWidth"in N&&(this.lineWidth=N.lineWidth),"lightPosition"in N&&(this.lightPosition=N.lightPosition),this.hasAlpha=!1,"opacity"in N&&(this.opacity=N.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in N&&(this.opacityscale=N.opacityscale,this.hasAlpha=!0),"ambient"in N&&(this.ambientLight=N.ambient),"diffuse"in N&&(this.diffuseLight=N.diffuse),"specular"in N&&(this.specularLight=N.specular),"roughness"in N&&(this.roughness=N.roughness),"fresnel"in N&&(this.fresnel=N.fresnel),N.texture?(this.texture.dispose(),this.texture=a(J,N.texture)):N.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=J.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=J.LINEAR,this.texture.setPixels(function(It,Ge){for(var Ze=x({colormap:It,nshades:256,format:"rgba"}),Be=new Uint8Array(1024),Ye=0;Ye<256;++Ye){for(var rt=Ze[Ye],Se=0;Se<3;++Se)Be[4*Ye+Se]=rt[Se];Be[4*Ye+3]=Ge?255*I(Ye/255,Ge):255*rt[3]}return f(Be,[256,256,4],[4,0,1])}(N.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=N.cells,V=N.positions;if(V&&Z){var W=[],X=[],K=[],ne=[],re=[],ae=[],le=[],pe=[],xe=[],ye=[],se=[],fe=[],Ee=[],de=[];this.cells=Z,this.positions=V;var we=N.vertexNormals,ke=N.cellNormals,Te=void 0===N.vertexNormalsEpsilon?1e-6:N.vertexNormalsEpsilon;N.useFacetNormals&&!ke&&(ke=i.faceNormals(Z,V,void 0===N.faceNormalsEpsilon?1e-6:N.faceNormalsEpsilon)),ke||we||(we=i.vertexNormals(Z,V,Te));var oe=N.vertexColors,he=N.cellColors,me=N.meshColor||[1,1,1,1],Me=N.vertexUVs,Ie=N.vertexIntensity,Pe=N.cellUVs,ze=N.cellIntensity,ce=1/0,ge=-1/0;if(!Me&&!Pe)if(Ie)if(N.vertexIntensityBounds)ce=+N.vertexIntensityBounds[0],ge=+N.vertexIntensityBounds[1];else for(var _e=0;_e<Ie.length;++_e){var De=Ie[_e];ce=Math.min(ce,De),ge=Math.max(ge,De)}else if(ze)if(N.cellIntensityBounds)ce=+N.cellIntensityBounds[0],ge=+N.cellIntensityBounds[1];else for(_e=0;_e<ze.length;++_e)De=ze[_e],ce=Math.min(ce,De),ge=Math.max(ge,De);else for(_e=0;_e<V.length;++_e)De=V[_e][2],ce=Math.min(ce,De),ge=Math.max(ge,De);this.intensity=Ie||ze||function(It){for(var Ge=It.length,Ze=new Array(Ge),Be=0;Be<Ge;++Be)Ze[Be]=It[Be][2];return Ze}(V),this.pickVertex=!(ze||he);var He=N.pointSizes,Ve=N.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=0;_e<V.length;++_e)for(var nt=V[_e],tt=0;tt<3;++tt)!isNaN(nt[tt])&&isFinite(nt[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],nt[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],nt[tt]));var at=0,dt=0,wt=0;e:for(_e=0;_e<Z.length;++_e){var bt=Z[_e];switch(bt.length){case 1:for(nt=V[Lt=bt[0]],tt=0;tt<3;++tt)if(isNaN(nt[tt])||!isFinite(nt[tt]))continue e;ye.push(nt[0],nt[1],nt[2]),Ct=oe?oe[Lt]:he?he[_e]:me,this.opacityscale&&Ie?X.push(Ct[0],Ct[1],Ct[2],this.opacity*I((Ie[Lt]-ce)/(ge-ce),this.opacityscale)):3===Ct.length?se.push(Ct[0],Ct[1],Ct[2],this.opacity):(se.push(Ct[0],Ct[1],Ct[2],Ct[3]*this.opacity),Ct[3]<1&&(this.hasAlpha=!0)),fe.push((Ot=Me?Me[Lt]:Ie?[(Ie[Lt]-ce)/(ge-ce),0]:Pe?Pe[_e]:ze?[(ze[_e]-ce)/(ge-ce),0]:[(nt[2]-ce)/(ge-ce),0])[0],Ot[1]),Ee.push(He?He[Lt]:Ve),de.push(_e),wt+=1;break;case 2:for(tt=0;tt<2;++tt){nt=V[Lt=bt[tt]];for(var _t=0;_t<3;++_t)if(isNaN(nt[_t])||!isFinite(nt[_t]))continue e}for(tt=0;tt<2;++tt)nt=V[Lt=bt[tt]],ae.push(nt[0],nt[1],nt[2]),Ct=oe?oe[Lt]:he?he[_e]:me,this.opacityscale&&Ie?X.push(Ct[0],Ct[1],Ct[2],this.opacity*I((Ie[Lt]-ce)/(ge-ce),this.opacityscale)):3===Ct.length?le.push(Ct[0],Ct[1],Ct[2],this.opacity):(le.push(Ct[0],Ct[1],Ct[2],Ct[3]*this.opacity),Ct[3]<1&&(this.hasAlpha=!0)),pe.push((Ot=Me?Me[Lt]:Ie?[(Ie[Lt]-ce)/(ge-ce),0]:Pe?Pe[_e]:ze?[(ze[_e]-ce)/(ge-ce),0]:[(nt[2]-ce)/(ge-ce),0])[0],Ot[1]),xe.push(_e);dt+=1;break;case 3:for(tt=0;tt<3;++tt)for(nt=V[Lt=bt[tt]],_t=0;_t<3;++_t)if(isNaN(nt[_t])||!isFinite(nt[_t]))continue e;for(tt=0;tt<3;++tt){var Lt,Ct,Ot,Ht;nt=V[Lt=bt[2-tt]],W.push(nt[0],nt[1],nt[2]),(Ct=oe?oe[Lt]:he?he[_e]:me)?this.opacityscale&&Ie?X.push(Ct[0],Ct[1],Ct[2],this.opacity*I((Ie[Lt]-ce)/(ge-ce),this.opacityscale)):3===Ct.length?X.push(Ct[0],Ct[1],Ct[2],this.opacity):(X.push(Ct[0],Ct[1],Ct[2],Ct[3]*this.opacity),Ct[3]<1&&(this.hasAlpha=!0)):X.push(.5,.5,.5,1),ne.push((Ot=Me?Me[Lt]:Ie?[(Ie[Lt]-ce)/(ge-ce),0]:Pe?Pe[_e]:ze?[(ze[_e]-ce)/(ge-ce),0]:[(nt[2]-ce)/(ge-ce),0])[0],Ot[1]),K.push((Ht=we?we[Lt]:ke[_e])[0],Ht[1],Ht[2]),re.push(_e)}at+=1}}this.pointCount=wt,this.edgeCount=dt,this.triangleCount=at,this.pointPositions.update(ye),this.pointColors.update(se),this.pointUVs.update(fe),this.pointSizes.update(Ee),this.pointIds.update(new Uint32Array(de)),this.edgePositions.update(ae),this.edgeColors.update(le),this.edgeUVs.update(pe),this.edgeIds.update(new Uint32Array(xe)),this.trianglePositions.update(W),this.triangleColors.update(X),this.triangleUVs.update(ne),this.triangleNormals.update(K),this.triangleIds.update(new Uint32Array(re))}},P.drawTransparent=P.draw=function(N){for(var J=this.gl,Z=(N=N||{}).model||L,V=N.view||L,W=N.projection||L,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)X[0][K]=Math.max(X[0][K],this.clipBounds[0][K]),X[1][K]=Math.min(X[1][K],this.clipBounds[1][K]);var ne={model:Z,view:V,projection:W,inverseModel:L.slice(),clipBounds:X,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ne.inverseModel=h(ne.inverseModel,ne.model),J.disable(J.CULL_FACE),this.texture.bind(0);var re=new Array(16);for(c(re,ne.view,ne.model),c(re,ne.projection,re),h(re,re),K=0;K<3;++K)ne.eyePosition[K]=re[12+K]/re[15];var ae,le=re[15];for(K=0;K<3;++K)le+=this.lightPosition[K]*re[4*K+3];for(K=0;K<3;++K){for(var pe=re[12+K],xe=0;xe<3;++xe)pe+=re[4*xe+K]*this.lightPosition[xe];ne.lightPosition[K]=pe/le}this.triangleCount>0&&((ae=this.triShader).bind(),ae.uniforms=ne,this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ae=this.lineShader).bind(),ae.uniforms=ne,this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointShader).bind(),ae.uniforms=ne,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ae=this.contourShader).bind(),ae.uniforms=ne,this.contourVAO.bind(),J.drawArrays(J.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(N){for(var J=this.gl,Z=(N=N||{}).model||L,V=N.view||L,W=N.projection||L,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)X[0][K]=Math.max(X[0][K],this.clipBounds[0][K]),X[1][K]=Math.min(X[1][K],this.clipBounds[1][K]);this._model=[].slice.call(Z),this._view=[].slice.call(V),this._projection=[].slice.call(W),this._resolution=[J.drawingBufferWidth,J.drawingBufferHeight];var ne,re={model:Z,view:V,projection:W,clipBounds:X,pickId:this.pickId/255};(ne=this.pickShader).bind(),ne.uniforms=re,this.triangleCount>0&&(this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ne=this.pointPickShader).bind(),ne.uniforms=re,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(N){if(!N||N.id!==this.pickId)return null;for(var J=N.value[0]+256*N.value[1]+65536*N.value[2],Z=this.cells[J],V=this.positions,W=new Array(Z.length),X=0;X<Z.length;++X)W[X]=V[Z[X]];var K=N.coord[0],ne=N.coord[1];if(!this.pickVertex){var re=this.positions[Z[0]],ae=this.positions[Z[1]],le=this.positions[Z[2]];return{_cellCenter:!0,position:[K,ne],index:J,cell:Z,cellId:J,intensity:this.intensity[J],dataCoordinate:[(re[0]+ae[0]+le[0])/3,(re[1]+ae[1]+le[1])/3,(re[2]+ae[2]+le[2])/3]}}var xe=p(W,[K*this.pixelRatio,this._resolution[1]-ne*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!xe)return null;var ye=xe[2],se=0;for(X=0;X<Z.length;++X)se+=ye[X]*this.intensity[Z[X]];return{position:xe[1],index:Z[xe[0]],cell:Z,cellId:J,intensity:se,dataCoordinate:this.positions[Z[xe[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},d.exports=function(N,J){if(1===arguments.length&&(N=(J=N).gl),!(N.getExtension("OES_standard_derivatives")||N.getExtension("MOZ_OES_standard_derivatives")||N.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var V=function j(N){var J=o(N,m.vertex,m.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.normal.location=4,J}(N),W=function R(N){var J=o(N,w.vertex,w.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J}(N),X=function H(N){var J=o(N,u.vertex,u.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.pointSize.location=4,J}(N),K=function F(N){var J=o(N,S.vertex,S.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J}(N),ne=function U(N){var J=o(N,_.vertex,_.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J.attributes.pointSize.location=4,J}(N),re=function B(N){var J=o(N,E.vertex,E.fragment);return J.attributes.position.location=0,J}(N),ae=a(N,f(new Uint8Array([255,255,255,255]),[1,1,4]));ae.generateMipmap(),ae.minFilter=N.LINEAR_MIPMAP_LINEAR,ae.magFilter=N.LINEAR;var le=r(N),pe=r(N),xe=r(N),ye=r(N),se=r(N),fe=n(N,[{buffer:le,type:N.FLOAT,size:3},{buffer:se,type:N.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:N.FLOAT,size:4},{buffer:xe,type:N.FLOAT,size:2},{buffer:ye,type:N.FLOAT,size:3}]),Ee=r(N),de=r(N),we=r(N),ke=r(N),Te=n(N,[{buffer:Ee,type:N.FLOAT,size:3},{buffer:ke,type:N.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:de,type:N.FLOAT,size:4},{buffer:we,type:N.FLOAT,size:2}]),$=r(N),oe=r(N),he=r(N),me=r(N),Me=r(N),Ie=n(N,[{buffer:$,type:N.FLOAT,size:3},{buffer:Me,type:N.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:N.FLOAT,size:4},{buffer:he,type:N.FLOAT,size:2},{buffer:me,type:N.FLOAT,size:1}]),Pe=r(N),ce=new C(N,ae,V,W,X,K,ne,re,le,se,pe,xe,ye,fe,Ee,ke,de,we,Te,$,Me,oe,he,me,Ie,Pe,n(N,[{buffer:Pe,type:N.FLOAT,size:3}]));return ce.update(J),ce}},4554:function(d,s,t){"use strict";d.exports=function(f){var x=f.gl;return new a(f,o(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,x,v){this.plot=f,this.vbo=x,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],c=[0,0],function(f,x,v,g,y){var m=this.shader,w=this.plot.gl;i[0]=f,i[1]=x,c[0]=v,c[1]=g,m.uniforms.lo=i,m.uniforms.hi=c,m.uniforms.color=y,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(d,s,t){"use strict";d.exports=function(p){var m=p.gl;return new i(p,o(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var o=t(5827),r=t(5158),n=t(5070),a=t(2709);function i(p,m,w,u){this.plot=p,this.vbo=m,this.shader=w,this.tickShader=u,this.ticks=[[],[]]}function c(p,m){return p-m}var h,f,x,v,g,p,m,w,u,S,_,y=i.prototype;y.draw=(h=[0,0],f=[0,0],x=[0,0],function(){for(var p=this.plot,m=this.vbo,w=this.shader,u=this.ticks,S=p.gl,_=p._tickBounds,E=p.dataBox,L=p.viewBox,C=p.gridLineWidth,P=p.gridLineColor,I=p.gridLineEnable,j=p.pixelRatio,R=0;R<2;++R){var H=_[R],U=.5*(E[R+2]+E[R]),B=E[R+2]-E[R];f[R]=2*(_[R+2]-H)/B,h[R]=2*(H-U)/B}w.bind(),m.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=f;var N=0;for(R=0;R<2;++R){x[0]=x[1]=0,x[R]=1,w.uniforms.dataAxis=x,w.uniforms.lineWidth=C[R]/(L[R+2]-L[R])*j,w.uniforms.color=P[R];var J=6*u[R].length;I[R]&&J&&S.drawArrays(S.TRIANGLES,N,J),N+=J}}),y.drawTickMarks=(p=[0,0],m=[0,0],w=[1,0],u=[0,1],S=[0,0],_=[0,0],function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,P=this.ticks,I=E.gl,j=E._tickBounds,R=E.dataBox,H=E.viewBox,F=E.pixelRatio,U=E.screenBox,B=U[2]-U[0],N=U[3]-U[1],J=H[2]-H[0],Z=H[3]-H[1],V=0;V<2;++V){var W=j[V],K=.5*(R[V+2]+R[V]),ne=R[V+2]-R[V];m[V]=2*(j[V+2]-W)/ne,p[V]=2*(W-K)/ne}m[0]*=J/B,p[0]*=J/B,m[1]*=Z/N,p[1]*=Z/N,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var re=C.uniforms;re.dataShift=p,re.dataScale=m;var ae=E.tickMarkLength,le=E.tickMarkWidth,pe=E.tickMarkColor,xe=6*P[0].length,ye=Math.min(n.ge(P[0],(R[0]-j[0])/(j[2]-j[0]),c),P[0].length),se=Math.min(n.gt(P[0],(R[2]-j[0])/(j[2]-j[0]),c),P[0].length),fe=0+6*ye,Ee=6*Math.max(0,se-ye),de=Math.min(n.ge(P[1],(R[1]-j[1])/(j[3]-j[1]),c),P[1].length),we=Math.min(n.gt(P[1],(R[3]-j[1])/(j[3]-j[1]),c),P[1].length),ke=xe+6*de,Te=6*Math.max(0,we-de);S[0]=2*(H[0]-ae[1])/B-1,S[1]=(H[3]+H[1])/N-1,_[0]=ae[1]*F/B,_[1]=le[1]*F/N,Te&&(re.color=pe[1],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,I.drawArrays(I.TRIANGLES,ke,Te)),S[0]=(H[2]+H[0])/B-1,S[1]=2*(H[1]-ae[0])/N-1,_[0]=le[0]*F/B,_[1]=ae[0]*F/N,Ee&&(re.color=pe[0],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,I.drawArrays(I.TRIANGLES,fe,Ee)),S[0]=2*(H[2]+ae[3])/B-1,S[1]=(H[3]+H[1])/N-1,_[0]=ae[3]*F/B,_[1]=le[3]*F/N,Te&&(re.color=pe[3],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,I.drawArrays(I.TRIANGLES,ke,Te)),S[0]=(H[2]+H[0])/B-1,S[1]=2*(H[3]+ae[2])/N-1,_[0]=le[2]*F/B,_[1]=ae[2]*F/N,Ee&&(re.color=pe[2],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,I.drawArrays(I.TRIANGLES,fe,Ee))}),y.update=(v=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(p){for(var m=p.ticks,w=p.bounds,u=new Float32Array(18*(m[0].length+m[1].length)),S=0,_=[[],[]],E=0;E<2;++E)for(var L=_[E],C=m[E],P=w[E],I=w[E+2],j=0;j<C.length;++j){var R=(C[j].x-P)/(I-P);L.push(R);for(var H=0;H<6;++H)u[S++]=R,u[S++]=v[H],u[S++]=g[H]}this.ticks=_,this.vbo.update(u)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(d,s,t){"use strict";d.exports=function(f){var x=f.gl;return new a(f,o(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,x,v){this.plot=f,this.vbo=x,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],c=[0,0],function(f,x,v,g,y,p){var m=this.plot,w=this.shader,u=m.gl;i[0]=f,i[1]=x,c[0]=v,c[1]=g,w.uniforms.start=i,w.uniforms.end=c,w.uniforms.width=y*m.pixelRatio,w.uniforms.color=p,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(d,s,t){"use strict";var o=t(6832),r=o(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);d.exports={lineVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:o(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(d,s,t){"use strict";d.exports=function(m){var w=m.gl;return new c(m,o(w),r(w,i.textVert,i.textFrag))};var o=t(5827),r=t(5158),n=t(6946),a=t(5070),i=t(2709);function c(m,w,u){this.plot=m,this.vbo=w,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,f,x,v,g,y,m,w,p=c.prototype;p.drawTicks=(h=[0,0],f=[0,0],x=[0,0],function(m){var w=this.plot,u=this.shader,S=this.tickX[m],_=this.tickOffset[m],E=w.gl,L=w.viewBox,C=w.dataBox,P=w.screenBox,I=w.pixelRatio,j=w.tickEnable,R=w.tickPad,H=w.tickColor,F=w.tickAngle,U=w.labelEnable,B=w.labelPad,N=w.labelColor,J=w.labelAngle,Z=this.labelOffset[m],V=this.labelCount[m],W=a.lt(S,C[m]),X=a.le(S,C[m+2]);h[0]=h[1]=0,h[m]=1,f[m]=(L[2+m]+L[m])/(P[2+m]-P[m])-1;var K=2/P[2+(1^m)]-P[1^m];f[1^m]=K*L[1^m]-1,j[m]&&(f[1^m]-=K*I*R[m],W<X&&_[X]>_[W]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=H[m],u.uniforms.angle=F[m],E.drawArrays(E.TRIANGLES,_[W],_[X]-_[W]))),U[m]&&V&&(f[1^m]-=K*I*B[m],u.uniforms.dataAxis=x,u.uniforms.screenOffset=f,u.uniforms.color=N[m],u.uniforms.angle=J[m],E.drawArrays(E.TRIANGLES,Z,V)),f[1^m]=K*L[2+(1^m)]-1,j[m+2]&&(f[1^m]+=K*I*R[m+2],W<X&&_[X]>_[W]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=H[m+2],u.uniforms.angle=F[m+2],E.drawArrays(E.TRIANGLES,_[W],_[X]-_[W]))),U[m+2]&&V&&(f[1^m]+=K*I*B[m+2],u.uniforms.dataAxis=x,u.uniforms.screenOffset=f,u.uniforms.color=N[m+2],u.uniforms.angle=J[m+2],E.drawArrays(E.TRIANGLES,Z,V))}),p.drawTitle=(m=[0,0],w=[0,0],function(){var u=this.plot,S=this.shader,_=u.gl,E=u.screenBox,L=u.titleCenter,C=u.titleAngle,P=u.titleColor,I=u.pixelRatio;if(this.titleCount){for(var j=0;j<2;++j)w[j]=2*(L[j]*I-E[j])/(E[2+j]-E[j])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=w,S.uniforms.angle=C,S.uniforms.color=P,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}),p.bind=(v=[0,0],g=[0,0],y=[0,0],function(){var m=this.plot,w=this.shader,u=m._tickBounds,S=m.dataBox,_=m.screenBox,E=m.viewBox;w.bind();for(var L=0;L<2;++L){var C=u[L],I=.5*(S[L+2]+S[L]),j=S[L+2]-S[L],H=E[L+2]-E[L],U=_[L+2]-_[L];g[L]=2*(u[L+2]-C)/j*H/U,v[L]=2*(C-I)/j*H/U}y[1]=2*m.pixelRatio/(_[3]-_[1]),y[0]=y[1]*(_[3]-_[1])/(_[2]-_[0]),w.uniforms.dataScale=g,w.uniforms.dataShift=v,w.uniforms.textScale=y,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),p.update=function(m){var w,u,S,_,E,L=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var I=[Math.floor(L.length/3)],j=[-1/0],R=C[E];for(w=0;w<R.length;++w){var H=R[w],F=H.x,B=H.font||"sans-serif";_=H.fontSize||12;for(var N=1/(P[E+2]-P[E]),J=P[E],Z=H.text.split("\n"),V=0;V<Z.length;V++)for(S=n(B,Z[V]).data,u=0;u<S.length;u+=2)L.push(S[u]*_,-S[u+1]*_-V*_*1.2,(F-J)*N);I.push(Math.floor(L.length/3)),j.push(F)}this.tickOffset[E]=I,this.tickX[E]=j}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),S=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,_=m.labelSize[E],w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),S=n(m.titleFont,m.title).data,_=m.titleSize,w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(d,s,t){"use strict";d.exports=function(v){var g=v.gl,y=new c(g,o(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=a(y),y.box=i(y),y.update(v),y};var o=t(2611),r=t(3016),n=t(5613),a=t(1154),i=t(4554);function c(v,g){this.gl=v,this.pickBuffer=g,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=c.prototype;function f(v){for(var g=v.slice(),y=0;y<g.length;++y)g[y]=g[y].slice();return g}function x(v,g){return v.x-g.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var v=this.gl,g=this.screenBox,y=this.viewBox,p=this.dataBox,m=this.pixelRatio,w=this.grid,u=this.line,S=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;v.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),v.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT),w.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,I=this.zeroLineWidth;if(C[0]||C[1]){u.bind();for(var j=0;j<2;++j)if(C[j]&&p[j]<=0&&p[j+2]>=0){var R=g[j]-p[j]*(g[j+2]-g[j])/(p[j+2]-p[j]);0===j?u.drawLine(R,g[1],R,g[3],I[j],P[j]):u.drawLine(g[0],R,g[2],R,I[j],P[j])}}for(j=0;j<_.length;++j)_[j].draw();v.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),u.bind();var H=this.borderLineEnable,F=this.borderLineWidth,U=this.borderLineColor;for(H[1]&&u.drawLine(y[0],y[1]-.5*F[1]*m,y[0],y[3]+.5*F[3]*m,F[1],U[1]),H[0]&&u.drawLine(y[0]-.5*F[0]*m,y[1],y[2]+.5*F[2]*m,y[1],F[0],U[0]),H[3]&&u.drawLine(y[2],y[1]-.5*F[1]*m,y[2],y[3]+.5*F[3]*m,F[3],U[3]),H[2]&&u.drawLine(y[0]-.5*F[0]*m,y[3],y[2]+.5*F[2]*m,y[3],F[2],U[2]),S.bind(),j=0;j<2;++j)S.drawTicks(j);this.titleEnable&&S.drawTitle();var B=this.overlays;for(j=0;j<B.length;++j)B[j].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},h.drawPick=function(){if(!this.static){var v=this.pickBuffer;this._pickTimeout=null,v.begin();for(var g=1,y=this.objects,p=0;p<y.length;++p)g=y[p].drawPick(g);v.end()}},h.pick=function(v,g){if(!this.static){var y=this.pixelRatio,p=this.pickPixelRatio,m=this.viewBox,w=0|Math.round((v-m[0]/y)*p),u=0|Math.round((g-m[1]/y)*p),S=this.pickBuffer.query(w,u,this.pickRadius);if(!S)return null;for(var _=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(w,u,_);if(C)return C}return null}},h.setScreenBox=function(v){var g=this.screenBox,y=this.pixelRatio;g[0]=0|Math.round(v[0]*y),g[1]=0|Math.round(v[1]*y),g[2]=0|Math.round(v[2]*y),g[3]=0|Math.round(v[3]*y),this.setDirty()},h.setDataBox=function(v){var g=this.dataBox;(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3])&&(g[0]=v[0],g[1]=v[1],g[2]=v[2],g[3]=v[3],this.setDirty())},h.setViewBox=function(v){var g=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(v[0]*g),y[1]=0|Math.round(v[1]*g),y[2]=0|Math.round(v[2]*g),y[3]=0|Math.round(v[3]*g);var p=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*p),0|Math.round((v[3]-v[1])*p)],this.setDirty()},h.update=function(v){var g=this.gl;this.pixelRatio=(v=v||{}).pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(v.screenBox||[0,0,g.drawingBufferWidth/y,g.drawingBufferHeight/y]),this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var p=this.viewBox,m=(p[2]-p[0])/(p[3]-p[1]);this.setDataBox(v.dataBox||[-10,-10/m,10,10/m]),this.borderColor=!1!==v.borderColor&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(p[0]+p[2])/y,(p[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=v.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var S=0;S<2;++S){var _=w[S].slice(0);0!==_.length&&(_.sort(x),u[S]=Math.min(u[S],_[0].x),u[S+2]=Math.max(u[S+2],_[_.length-1].x))}this.grid.update({bounds:u,ticks:w}),this.text.update({bounds:u,ticks:w,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},h.removeObject=function(v){for(var g=this.objects,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setDirty();break}},h.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},h.removeOverlay=function(v){for(var g=this.overlays,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setOverlayDirty();break}}},4296:function(d,s,t){"use strict";d.exports=function(h,f){h=h||document.body;var x=[.01,1/0];"distanceLimits"in(f=f||{})&&(x[0]=f.distanceLimits[0],x[1]=f.distanceLimits[1]),"zoomMin"in f&&(x[0]=f.zoomMin),"zoomMax"in f&&(x[1]=f.zoomMax);var v=r({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:x}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,p=h.clientWidth,m=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:v,element:h,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:v.modes,_ortho:f._ortho||f.projection&&"orthographic"===f.projection.type||!1,tick:function(){var u=o(),S=this.delay,_=u-2*S;v.idle(u-S),v.recalcMatrix(_),v.flush(u-(100+2*S));for(var E=!0,L=v.computedMatrix,C=0;C<16;++C)E=E&&g[C]===L[C],g[C]=L[C];var P=h.clientWidth===p&&h.clientHeight===m;return p=h.clientWidth,m=h.clientHeight,E?!P:(y=Math.exp(v.computedRadius[0]),!0)},lookAt:function(u,S,_){v.lookAt(v.lastT(),u,S,_)},rotate:function(u,S,_){v.rotate(v.lastT(),u,S,_)},pan:function(u,S,_){v.pan(v.lastT(),u,S,_)},translate:function(u,S,_){v.translate(v.lastT(),u,S,_)}};return Object.defineProperties(w,{matrix:{get:function(){return v.computedMatrix},set:function(u){return v.setMatrix(v.lastT(),u),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(u){var S=v.computedUp.slice(),_=v.computedEye.slice(),E=v.computedCenter.slice();if(v.setMode(u),"turntable"===u){var L=o();v._active.lookAt(L,_,E,S),v._active.lookAt(L+500,_,E,[0,0,1]),v._active.flush(L)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(u){return v.lookAt(v.lastT(),null,u),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(u){return v.lookAt(v.lastT(),u),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(u){return v.lookAt(v.lastT(),null,null,u),v.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(u){return v.setDistance(v.lastT(),u),u},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(x)},set:function(u){return v.setDistanceLimits(u),u},enumerable:!0}}),h.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function u(S,_,E,L){var C=w.keyBindingMode;if(!1!==C){var P="rotate"===C,I="pan"===C,j="zoom"===C,R=!!L.control,H=!!L.alt,F=!!L.shift,U=!!(1&S),B=!!(2&S),N=!!(4&S),J=1/h.clientHeight,Z=J*(_-w._lastX),V=J*(E-w._lastY),W=w.flipX?1:-1,X=w.flipY?1:-1,K=Math.PI*w.rotateSpeed,ne=o();if(-1!==w._lastX&&-1!==w._lastY&&((P&&U&&!R&&!H&&!F||U&&!R&&!H&&F)&&v.rotate(ne,W*K*Z,-X*K*V,0),(I&&U&&!R&&!H&&!F||B||U&&R&&!H&&!F)&&v.pan(ne,-w.translateSpeed*Z*y,w.translateSpeed*V*y,0),j&&U&&!R&&!H&&!F||N||U&&!R&&H&&!F)){var re=-w.zoomSpeed*V/window.innerHeight*(ne-v.lastT())*100;v.pan(ne,0,0,y*(Math.exp(re)-1))}return w._lastX=_,w._lastY=E,w._lastMods=L,!0}}w.mouseListener=n(h,u),h.addEventListener("touchstart",function(S){var _=i(S.changedTouches[0],h);u(0,_[0],_[1],w._lastMods),u(1,_[0],_[1],w._lastMods)},!!c&&{passive:!0}),h.addEventListener("touchmove",function(S){var _=i(S.changedTouches[0],h);u(1,_[0],_[1],w._lastMods),S.preventDefault()},!!c&&{passive:!1}),h.addEventListener("touchend",function(S){u(0,w._lastX,w._lastY,w._lastMods)},!!c&&{passive:!0}),w.wheelListener=a(h,function(S,_){if(!1!==w.keyBindingMode&&w.enableWheel){var E=w.flipX?1:-1,L=w.flipY?1:-1,C=o();if(Math.abs(S)>Math.abs(_))v.rotate(C,0,0,-S*E*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var P=-w.zoomSpeed*L*_/window.innerHeight*(C-v.lastT())/20;v.pan(C,0,0,y*(Math.exp(P)-1))}}},!0)},w.enableMouseListeners(),w};var o=t(8161),r=t(1152),n=t(6145),a=t(6475),i=t(2565),c=t(5233)},8245:function(d,s,t){var o=t(6832),r=t(5158),n=o(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=o(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(d,s,t){"use strict";var o=t(4296),r=t(7453),n=t(2771),a=t(6496),i=t(2611),c=t(4234),h=t(8126),f=t(6145),x=t(1120),v=t(5268),g=t(8245),y=t(2861)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(u){var S=Math.round(Math.log(Math.abs(u))/Math.log(10));if(S<0){var _=Math.round(Math.pow(10,-S));return Math.ceil(u*_)/_}return S>0?(_=Math.round(Math.pow(10,S)),Math.ceil(u/_)*_):Math.ceil(u)}function w(u){return"boolean"!=typeof u||u}d.exports={createScene:function(u){(u=u||{}).camera=u.camera||{};var S=u.canvas;S||(S=document.createElement("canvas"),u.container?u.container.appendChild(S):document.body.appendChild(S));var _=u.gl;if(_||(u.glOptions&&(y=!!u.glOptions.preserveDrawingBuffer),_=function(Ee,de){var we=null;try{(we=Ee.getContext("webgl",de))||(we=Ee.getContext("experimental-webgl",de))}catch{return null}return we}(S,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!_)throw new Error("webgl not supported");var E=u.bounds||[[-10,-10,-10],[10,10,10]],L=new p,C=c(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!y}),P=g(_),I=u.cameraObject&&!0===u.cameraObject._ortho||u.camera.projection&&"orthographic"===u.camera.projection.type||!1,j={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:I},R=u.axes||{},H=r(_,R);H.enable=!R.disable;var U=a(_,u.spikes||{}),B=[],N=[],J=[],Z=[],V=!0,W=!0,X={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},K=(W=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ne=u.cameraObject||o(S,j),re={gl:_,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:S,selection:L,camera:ne,axes:H,axesPixels:null,spikes:U,bounds:E,objects:B,shape:K,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:w(u.autoResize),autoBounds:w(u.autoBounds),autoScale:!!u.autoScale,autoCenter:w(u.autoCenter),clipToBounds:w(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:X,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ee){this.aspect[0]=Ee.x,this.aspect[1]=Ee.y,this.aspect[2]=Ee.z,W=!0},setBounds:function(Ee,de){this.bounds[0][Ee]=de.min,this.bounds[1][Ee]=de.max},setClearColor:function(Ee){this.clearColor=Ee},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[_.drawingBufferWidth/re.pixelRatio|0,_.drawingBufferHeight/re.pixelRatio|0];function le(){if(!re._stopped&&re.autoResize){var Ee=S.parentNode,de=1,we=1;Ee&&Ee!==document.body?(de=Ee.clientWidth,we=Ee.clientHeight):(de=window.innerWidth,we=window.innerHeight);var ke=0|Math.ceil(de*re.pixelRatio),Te=0|Math.ceil(we*re.pixelRatio);if(ke!==S.width||Te!==S.height){S.width=ke,S.height=Te;var $=S.style;$.position=$.position||"absolute",$.left="0px",$.top="0px",$.width=de+"px",$.height=we+"px",V=!0}}}function pe(){for(var Ee=B.length,de=Z.length,we=0;we<de;++we)J[we]=0;e:for(we=0;we<Ee;++we){var ke=B[we],Te=ke.pickSlots;if(Te){for(var $=0;$<de;++$)if(J[$]+Te<255){N[we]=$,ke.setPickBase(J[$]+1),J[$]+=Te;continue e}var oe=i(_,K);N[we]=de,Z.push(oe),J.push(Te),ke.setPickBase(1),de+=1}else N[we]=-1}for(;de>0&&0===J[de-1];)J.pop(),Z.pop().dispose()}function xe(){if(re.contextLost)return!0;_.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&le(),window.addEventListener("resize",le),re.update=function(Ee){re._stopped||(Ee=Ee||{},V=!0,W=!0)},re.add=function(Ee){re._stopped||(Ee.axes=H,B.push(Ee),N.push(-1),V=!0,W=!0,pe())},re.remove=function(Ee){if(!re._stopped){var de=B.indexOf(Ee);de<0||(B.splice(de,1),N.pop(),V=!0,W=!0,pe())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",le),S.removeEventListener("webglcontextlost",xe),re.mouseListener.enabled=!1,!re.contextLost)){H.dispose(),U.dispose();for(var Ee=0;Ee<B.length;++Ee)B[Ee].dispose();for(C.dispose(),Ee=0;Ee<Z.length;++Ee)Z[Ee].dispose();P.dispose(),_=null,H=null,U=null,B=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=f(S,function(Ee,de,we){if(!re._stopped){var ke=Z.length,Te=B.length,$=L.object;L.distance=1/0,L.mouse[0]=de,L.mouse[1]=we,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var oe=!1;if(Ee&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(W=!0),re._mouseRotating=!1;for(var he=0;he<ke;++he){var me=Z[he].query(de,ae[1]-we-1,re.pickRadius);if(me){if(me.distance>L.distance)continue;for(var Me=0;Me<Te;++Me){var Ie=B[Me];if(N[Me]===he){var Pe=Ie.pick(me);Pe&&(L.buttons=Ee,L.screen=me.coord,L.distance=me.distance,L.object=Ie,L.index=Pe.distance,L.dataPosition=Pe.position,L.dataCoordinate=Pe.dataCoordinate,L.data=Pe,oe=!0)}}}}}$&&$!==L.object&&($.highlight&&$.highlight(null),V=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),V=!0),(oe=oe||L.object!==$)&&re.onselect&&re.onselect(L),1&Ee&&!(1&re._prevButtons)&&re.onclick&&re.onclick(L),re._prevButtons=Ee}})},S.addEventListener("webglcontextlost",xe);var ye=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],se=[ye[0].slice(),ye[1].slice()];function fe(){if(!xe()){le();var Ee=re.camera.tick();X.view=re.camera.matrix,V=V||Ee,W=W||Ee,H.pixelRatio=re.pixelRatio,U.pixelRatio=re.pixelRatio;var de=B.length,we=ye[0],ke=ye[1];we[0]=we[1]=we[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var Te=0;Te<de;++Te){(De=B[Te]).pixelRatio=re.pixelRatio,De.axes=re.axes,V=V||!!De.dirty,W=W||!!De.dirty;var $=De.bounds;if($)for(var oe=$[0],he=$[1],me=0;me<3;++me)we[me]=Math.min(we[me],oe[me]),ke[me]=Math.max(ke[me],he[me])}var Me=re.bounds;if(re.autoBounds)for(me=0;me<3;++me){if(ke[me]<we[me])we[me]=-1,ke[me]=1;else{we[me]===ke[me]&&(we[me]-=1,ke[me]+=1);var Ie=.05*(ke[me]-we[me]);we[me]=we[me]-Ie,ke[me]=ke[me]+Ie}Me[0][me]=we[me],Me[1][me]=ke[me]}var Pe=!1;for(me=0;me<3;++me)Pe=Pe||se[0][me]!==Me[0][me]||se[1][me]!==Me[1][me],se[0][me]=Me[0][me],se[1][me]=Me[1][me];if(W=W||Pe,V=V||Pe){if(Pe){var ze=[0,0,0];for(Te=0;Te<3;++Te)ze[Te]=m((Me[1][Te]-Me[0][Te])/10);H.update(H.autoTicks?{bounds:Me,tickSpacing:ze}:{bounds:Me})}var ce=_.drawingBufferWidth,ge=_.drawingBufferHeight;for(K[0]=ce,K[1]=ge,ae[0]=0|Math.max(ce/re.pixelRatio,1),ae[1]=0|Math.max(ge/re.pixelRatio,1),function(He,Ve){var nt=He.bounds,tt=He.cameraParams,at=tt.projection,dt=tt.model,_t=He.zNear,Lt=He.zFar,Ct=He.fovy,Ot=He.gl.drawingBufferWidth/He.gl.drawingBufferHeight;Ve?(v(at,-Ot,Ot,-1,1,_t,Lt),tt._ortho=!0):(x(at,Ct,Ot,_t,Lt),tt._ortho=!1);for(var Ht=0;Ht<16;++Ht)dt[Ht]=0;dt[15]=1;var It=0;for(Ht=0;Ht<3;++Ht)It=Math.max(It,nt[1][Ht]-nt[0][Ht]);for(Ht=0;Ht<3;++Ht)dt[5*Ht]=He.autoScale?He.aspect[Ht]/(nt[1][Ht]-nt[0][Ht]):1/It,He.autoCenter&&(dt[12+Ht]=.5*-dt[5*Ht]*(nt[0][Ht]+nt[1][Ht]))}(re,I),Te=0;Te<de;++Te)(De=B[Te]).axesBounds=Me,re.clipToBounds&&(De.clipBounds=Me);L.object&&(U.position=re.snapToData?L.dataCoordinate:L.dataPosition,U.bounds=Me),W&&(W=!1,function(){if(!xe()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var He=B.length,Ve=Z.length,nt=0;nt<Ve;++nt){var tt=Z[nt];tt.shape=ae,tt.begin();for(var at=0;at<He;++at)if(N[at]===nt){var dt=B[at];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(X))}tt.end()}}}()),re.axesPixels=n(re.axes,X,ce,ge),re.onrender&&re.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,ce,ge),re.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var _e=!1;for(H.enable&&(_e=_e||H.isTransparent(),H.draw(X)),U.axes=H,L.object&&U.draw(X),_.disable(_.CULL_FACE),Te=0;Te<de;++Te)(De=B[Te]).axes=H,De.pixelRatio=re.pixelRatio,De.isOpaque&&De.isOpaque()&&De.draw(X),De.isTransparent&&De.isTransparent()&&(_e=!0);if(_e){for(C.shape=K,C.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(X),Te=0;Te<de;++Te)(De=B[Te]).isOpaque&&De.isOpaque()&&De.draw(X);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(X),Te=0;Te<de;++Te){var De;(De=B[Te]).isTransparent&&De.isTransparent()&&De.drawTransparent(X)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,h(_),_.disable(_.BLEND)}for(V=!1,Te=0;Te<de;++Te)B[Te].dirty=!1}}}return re.enableMouseListeners(),function Ee(){re._stopped||re.contextLost||(fe(),requestAnimationFrame(Ee))}(),re.redraw=function(){re._stopped||(V=!0,fe())},re},createCamera:o}},8023:function(d,s,t){var o=t(6832);s.pointVertex=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),s.pointFragment=o(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),s.pickVertex=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),s.pickFragment=o(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(d,s,t){"use strict";var o=t(5158),r=t(5827),n=t(5306),a=t(8023);function i(x,v,g,y,p){this.plot=x,this.offsetBuffer=v,this.pickBuffer=g,this.shader=y,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}d.exports=function(x,v){var g=x.gl,y=new i(x,r(g),r(g),o(g,a.pointVertex,a.pointFragment),o(g,a.pickVertex,a.pickFragment));return y.update(v),x.addObject(y),y};var c,h,f=i.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(x){var v;function g(_,E){return _ in x?x[_]:E}x=x||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var y=x.positions.length>>>1,p=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=y,w=x.positions,u=p?w:n.mallocFloat32(w.length),S=m?x.idToIndex:n.mallocInt32(y);if(p||u.set(w),!m)for(u.set(w),v=0;v<y;v++)S[v]=v;this.points=w,this.offsetBuffer.update(u),this.pickBuffer.update(S),p||n.free(u),m||n.free(S),this.pointCount=y,this.pickOffset=0},f.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(x){var v=void 0!==x,g=v?this.pickShader:this.shader,y=this.plot.gl,p=this.plot.dataBox;if(0===this.pointCount)return x;var m=p[2]-p[0],w=p[3]-p[1],u=function(L,C){var P,I=0,j=L.length>>>1;for(P=0;P<j;P++){var R=L[2*P],H=L[2*P+1];R>=C[0]&&R<=C[2]&&H>=C[1]&&H<=C[3]&&I++}return I}(this.points,p),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));c[0]=2/m,c[4]=2/w,c[6]=-2*p[0]/m-1,c[7]=-2*p[1]/w-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=c,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(h[0]=255&x,h[1]=x>>8&255,h[2]=x>>16&255,h[3]=x>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(y.UNSIGNED_BYTE),g.uniforms.pickOffset=h,this.pickOffset=x);var _=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return _&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),_&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),x+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(x,v,g){var y=this.pickOffset;if(g<y||g>=y+this.pointCount)return null;var m=g-y,w=this.points;return{object:this,pointId:m,dataCoord:[w[2*m],w[2*m+1]]}}},6093:function(d){d.exports=function(s,t,o,r){var n,a,i,c,h,f=t[0],x=t[1],v=t[2],g=t[3],y=o[0],p=o[1],m=o[2],w=o[3];return(a=f*y+x*p+v*m+g*w)<0&&(a=-a,y=-y,p=-p,m=-m,w=-w),1-a>1e-6?(n=Math.acos(a),i=Math.sin(n),c=Math.sin((1-r)*n)/i,h=Math.sin(r*n)/i):(c=1-r,h=r),s[0]=c*f+h*y,s[1]=c*x+h*p,s[2]=c*v+h*m,s[3]=c*g+h*w,s}},8240:function(d){"use strict";d.exports=function(s){return s||0===s?s.toString():""}},4123:function(d,s,t){"use strict";var o=t(875);d.exports=function(n,a,i){var c=r[a];if(c||(c=r[a]={}),n in c)return c[n];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},f=o(n,h);h.triangles=!1;var x,v,g=o(n,h);if(i&&1!==i){for(x=0;x<f.positions.length;++x)for(v=0;v<f.positions[x].length;++v)f.positions[x][v]/=i;for(x=0;x<g.positions.length;++x)for(v=0;v<g.positions[x].length;++v)g.positions[x][v]/=i}var y=[[1/0,1/0],[-1/0,-1/0]],p=g.positions.length;for(x=0;x<p;++x){var m=g.positions[x];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],m[v]),y[1][v]=Math.max(y[1][v],m[v])}return c[n]=[f,g,y]};var r={}},9282:function(d,s,t){var o=t(5158),r=t(6832),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),i=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:c,attributes:f},v={vertex:a,fragment:c,attributes:f},g={vertex:i,fragment:c,attributes:f},y={vertex:n,fragment:h,attributes:f},p={vertex:a,fragment:h,attributes:f},m={vertex:i,fragment:h,attributes:f};function w(u,S){var _=o(u,S),E=_.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,_}s.createPerspective=function(u){return w(u,x)},s.createOrtho=function(u){return w(u,v)},s.createProject=function(u){return w(u,g)},s.createPickPerspective=function(u){return w(u,y)},s.createPickOrtho=function(u){return w(u,p)},s.createPickProject=function(u){return w(u,m)}},2182:function(d,s,t){"use strict";var o=t(3596),r=t(5827),n=t(2944),a=t(5306),i=t(104),c=t(9282),h=t(4123),f=t(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(N,J){var Z=N[0],V=N[1],W=N[2],X=N[3];return N[0]=J[0]*Z+J[4]*V+J[8]*W+J[12]*X,N[1]=J[1]*Z+J[5]*V+J[9]*W+J[13]*X,N[2]=J[2]*Z+J[6]*V+J[10]*W+J[14]*X,N[3]=J[3]*Z+J[7]*V+J[11]*W+J[15]*X,N}function g(N,J,Z,V){return v(V,V),v(V,V),v(V,V)}function y(N,J){this.index=N,this.dataCoordinate=this.position=J}function p(N){return!0===N||N>1?1:N}function m(N,J,Z,V,W,X,K,ne,re,ae,le,pe){this.gl=N,this.pixelRatio=1,this.shader=J,this.orthoShader=Z,this.projectShader=V,this.pointBuffer=W,this.colorBuffer=X,this.glyphBuffer=K,this.idBuffer=ne,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ae,this.pickOrthoShader=le,this.pickProjectShader=pe,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}d.exports=function(N){var J=N.gl,Z=c.createPerspective(J),V=c.createOrtho(J),W=c.createProject(J),X=c.createPickPerspective(J),K=c.createPickOrtho(J),ne=c.createPickProject(J),re=r(J),ae=r(J),le=r(J),pe=r(J),xe=new m(J,Z,V,W,re,ae,le,pe,n(J,[{buffer:re,size:3,type:J.FLOAT},{buffer:ae,size:4,type:J.FLOAT},{buffer:le,size:2,type:J.FLOAT},{buffer:pe,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),X,K,ne);return xe.update(N),xe};var w=m.prototype;w.pickSlots=1,w.setPickBase=function(N){this.pickId=N},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var N=0;N<3;++N)if(this.axesProject[N]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var N=0;N<3;++N)if(this.axesProject[N]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],S=[0,0,0],_=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=x.slice(),P=[0,0,0],I=[[0,0,0],[0,0,0]];function j(N){return N[0]=N[1]=N[2]=0,N}function R(N,J){return N[0]=J[0],N[1]=J[1],N[2]=J[2],N[3]=1,N}function H(N,J,Z,V){return N[0]=J[0],N[1]=J[1],N[2]=J[2],N[Z]=V,N}var F=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function U(N,J,Z,V,W,X,K){var ne=Z.gl;if((X===Z.projectHasAlpha||K)&&function(ae,le,pe,xe){var ye,se=le.axesProject,fe=le.gl,Ee=ae.uniforms,de=pe.model||x,we=pe.view||x,ke=pe.projection||x,Te=le.axesBounds,$=function(nt){for(var tt=I,at=0;at<2;++at)for(var dt=0;dt<3;++dt)tt[at][dt]=Math.max(Math.min(nt[at][dt],1e8),-1e8);return tt}(le.clipBounds);ye=le.axes&&le.axes.lastCubeProps?le.axes.lastCubeProps.axis:[1,1,1],u[0]=2/fe.drawingBufferWidth,u[1]=2/fe.drawingBufferHeight,ae.bind(),Ee.view=we,Ee.projection=ke,Ee.screenSize=u,Ee.highlightId=le.highlightId,Ee.highlightScale=le.highlightScale,Ee.clipBounds=$,Ee.pickGroup=le.pickId/255,Ee.pixelRatio=xe;for(var oe=0;oe<3;++oe)if(se[oe]){Ee.scale=le.projectScale[oe],Ee.opacity=le.projectOpacity[oe];for(var he=C,me=0;me<16;++me)he[me]=0;for(me=0;me<4;++me)he[5*me]=1;he[5*oe]=0,he[12+oe]=ye[oe]<0?Te[0][oe]:Te[1][oe],i(he,de,he),Ee.model=he;var Me=(oe+1)%3,Ie=(oe+2)%3,Pe=j(S),ze=j(_);Pe[Me]=1,ze[Ie]=1;var ce=g(0,0,0,R(E,Pe)),ge=g(0,0,0,R(L,ze));if(Math.abs(ce[1])>Math.abs(ge[1])){var _e=ce;ce=ge,ge=_e,_e=Pe,Pe=ze,ze=_e;var De=Me;Me=Ie,Ie=De}ce[0]<0&&(Pe[Me]=-1),ge[1]>0&&(ze[Ie]=-1);var He=0,Ve=0;for(me=0;me<4;++me)He+=Math.pow(de[4*Me+me],2),Ve+=Math.pow(de[4*Ie+me],2);Pe[Me]/=Math.sqrt(He),ze[Ie]/=Math.sqrt(Ve),Ee.axes[0]=Pe,Ee.axes[1]=ze,Ee.fragClipBounds[0]=H(P,$[0],oe,-1e8),Ee.fragClipBounds[1]=H(P,$[1],oe,1e8),le.vao.bind(),le.vao.draw(fe.TRIANGLES,le.vertexCount),le.lineWidth>0&&(fe.lineWidth(le.lineWidth*xe),le.vao.draw(fe.LINES,le.lineVertexCount,le.vertexCount)),le.vao.unbind()}}(J,Z,V,W),X===Z.hasAlpha||K){N.bind();var re=N.uniforms;re.model=V.model||x,re.view=V.view||x,re.projection=V.projection||x,u[0]=2/ne.drawingBufferWidth,u[1]=2/ne.drawingBufferHeight,re.screenSize=u,re.highlightId=Z.highlightId,re.highlightScale=Z.highlightScale,re.fragClipBounds=F,re.clipBounds=Z.axes.bounds,re.opacity=Z.opacity,re.pickGroup=Z.pickId/255,re.pixelRatio=W,Z.vao.bind(),Z.vao.draw(ne.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(ne.lineWidth(Z.lineWidth*W),Z.vao.draw(ne.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}function B(N,J,Z,V){var W;W=Array.isArray(N)?J<N.length?N[J]:void 0:N,W=f(W);var X=!0;o(W)&&(W="\u25bc",X=!1);var K=h(W,Z,V);return{mesh:K[0],lines:K[1],bounds:K[2],visible:X}}w.draw=function(N){U(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,N,this.pixelRatio,!1,!1)},w.drawTransparent=function(N){U(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,N,this.pixelRatio,!0,!1)},w.drawPick=function(N){U(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,N,1,!0,!0)},w.pick=function(N){if(!N||N.id!==this.pickId)return null;var J=N.value[2]+(N.value[1]<<8)+(N.value[0]<<16);if(J>=this.pointCount||J<0)return null;var Z=this.points[J],V=this._selectResult;V.index=J;for(var W=0;W<3;++W)V.position[W]=V.dataCoordinate[W]=Z[W];return V},w.highlight=function(N){if(N){var J=N.index;this.highlightId=[(255&J)/255,(J>>8&255)/255,(J>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(N){if("perspective"in(N=N||{})&&(this.useOrtho=!N.perspective),"orthographic"in N&&(this.useOrtho=!!N.orthographic),"lineWidth"in N&&(this.lineWidth=N.lineWidth),"project"in N)if(Array.isArray(N.project))this.axesProject=N.project;else{var J=!!N.project;this.axesProject=[J,J,J]}if("projectScale"in N)if(Array.isArray(N.projectScale))this.projectScale=N.projectScale.slice();else{var Z=+N.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in N){this.projectOpacity=Array.isArray(N.projectOpacity)?N.projectOpacity.slice():[Z=+N.projectOpacity,Z,Z];for(var V=0;V<3;++V)this.projectOpacity[V]=p(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in N&&(this.opacity=p(N.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var W,X,K=N.position,ne=N.font||"normal",re=N.alignment||[0,0];if(2===re.length)W=re[0],X=re[1];else for(W=[],X=[],V=0;V<re.length;++V)W[V]=re[V][0],X[V]=re[V][1];var ae=[1/0,1/0,1/0],le=[-1/0,-1/0,-1/0],pe=N.glyph,xe=N.color,ye=N.size,se=N.angle,fe=N.lineColor,Ee=-1,de=0,we=0,ke=0;if(K.length){ke=K.length;e:for(V=0;V<ke;++V){for(var Te=K[V],$=0;$<3;++$)if(isNaN(Te[$])||!isFinite(Te[$]))continue e;var oe=(tt=B(pe,V,ne,this.pixelRatio)).mesh,he=tt.lines,me=tt.bounds;de+=3*oe.cells.length,we+=2*he.edges.length}}var Me=de+we,Ie=a.mallocFloat(3*Me),Pe=a.mallocFloat(4*Me),ze=a.mallocFloat(2*Me),ce=a.mallocUint32(Me);if(Me>0){var ge=0,_e=de,De=[0,0,0,1],He=[0,0,0,1],Ve=Array.isArray(xe)&&Array.isArray(xe[0]),nt=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(V=0;V<ke;++V){for(Ee+=1,Te=K[V],$=0;$<3;++$){if(isNaN(Te[$])||!isFinite(Te[$]))continue e;le[$]=Math.max(le[$],Te[$]),ae[$]=Math.min(ae[$],Te[$])}oe=(tt=B(pe,V,ne,this.pixelRatio)).mesh,he=tt.lines,me=tt.bounds;var tt,at=tt.visible;if(at)if(Array.isArray(xe)){if(3===(dt=Ve?V<xe.length?xe[V]:[0,0,0,0]:xe).length){for($=0;$<3;++$)De[$]=dt[$];De[3]=1}else if(4===dt.length){for($=0;$<4;++$)De[$]=dt[$];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else De[0]=De[1]=De[2]=0,De[3]=1;else De=[1,1,1,0];if(at)if(Array.isArray(fe)){var dt;if(3===(dt=nt?V<fe.length?fe[V]:[0,0,0,0]:fe).length){for($=0;$<3;++$)He[$]=dt[$];He[$]=1}else if(4===dt.length){for($=0;$<4;++$)He[$]=dt[$];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var wt=.5;at?Array.isArray(ye)?wt=V<ye.length?+ye[V]:12:ye?wt=+ye:this.useOrtho&&(wt=12):wt=0;var bt=0;Array.isArray(se)?bt=V<se.length?+se[V]:0:se&&(bt=+se);var _t=Math.cos(bt),Lt=Math.sin(bt);for(Te=K[V],$=0;$<3;++$)le[$]=Math.max(le[$],Te[$]),ae[$]=Math.min(ae[$],Te[$]);var Ct=W,Ot=X;Ct=0,Array.isArray(W)?Ct=V<W.length?W[V]:0:W&&(Ct=W),Ot=0,Array.isArray(X)?Ot=V<X.length?X[V]:0:X&&(Ot=X);var Ht=[Ct*=Ct>0?1-me[0][0]:Ct<0?1+me[1][0]:1,Ot*=Ot>0?1-me[0][1]:Ot<0?1+me[1][1]:1],It=oe.cells||[],Ge=oe.positions||[];for($=0;$<It.length;++$)for(var Ze=It[$],Be=0;Be<3;++Be){for(var Ye=0;Ye<3;++Ye)Ie[3*ge+Ye]=Te[Ye];for(Ye=0;Ye<4;++Ye)Pe[4*ge+Ye]=De[Ye];ce[ge]=Ee;var rt=Ge[Ze[Be]];ze[2*ge]=wt*(_t*rt[0]-Lt*rt[1]+Ht[0]),ze[2*ge+1]=wt*(Lt*rt[0]+_t*rt[1]+Ht[1]),ge+=1}for(It=he.edges,Ge=he.positions,$=0;$<It.length;++$)for(Ze=It[$],Be=0;Be<2;++Be){for(Ye=0;Ye<3;++Ye)Ie[3*_e+Ye]=Te[Ye];for(Ye=0;Ye<4;++Ye)Pe[4*_e+Ye]=He[Ye];ce[_e]=Ee,ze[2*_e]=wt*(_t*(rt=Ge[Ze[Be]])[0]-Lt*rt[1]+Ht[0]),ze[2*_e+1]=wt*(Lt*rt[0]+_t*rt[1]+Ht[1]),_e+=1}}}this.bounds=[ae,le],this.points=K,this.pointCount=K.length,this.vertexCount=de,this.lineVertexCount=we,this.pointBuffer.update(Ie),this.colorBuffer.update(Pe),this.glyphBuffer.update(ze),this.idBuffer.update(ce),a.free(Ie),a.free(Pe),a.free(ze),a.free(ce)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(d,s,t){"use strict";var o=t(6832);s.boxVertex=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),s.boxFragment=o(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(d,s,t){"use strict";var o=t(5158),r=t(5827),n=t(1884);function a(c,h,f){this.plot=c,this.boxBuffer=h,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}d.exports=function(c,h){var f=c.gl,x=new a(c,r(f,[0,0,0,1,1,0,1,1]),o(f,n.boxVertex,n.boxFragment));return x.update(h),c.addOverlay(x),x};var i=a.prototype;i.draw=function(){if(this.enabled){var c=this.plot,h=this.selectBox,f=this.borderWidth,x=this.innerColor,v=this.outerColor,g=this.borderColor,y=c.box,p=c.screenBox,m=c.dataBox,w=c.viewBox,u=c.pixelRatio,S=(h[0]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],_=(h[1]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1],E=(h[2]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],L=(h[3]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1];if(S=Math.max(S,w[0]),_=Math.max(_,w[1]),E=Math.min(E,w[2]),L=Math.min(L,w[3]),!(E<S||L<_)){y.bind();var C=p[2]-p[0],P=p[3]-p[1];if(this.outerFill&&(y.drawBox(0,0,C,_,v),y.drawBox(0,_,S,L,v),y.drawBox(0,L,C,P,v),y.drawBox(E,_,C,L,v)),this.innerFill&&y.drawBox(S,_,E,L,x),f>0){var I=f*u;y.drawBox(S-I,_-I,E+I,_+I,g),y.drawBox(S-I,L-I,E+I,L+I,g),y.drawBox(S-I,_-I,S+I,L+I,g),y.drawBox(E-I,_-I,E+I,L+I,g)}}}},i.update=function(c){this.innerFill=!!(c=c||{}).innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(d,s,t){"use strict";d.exports=function(f,x){var v=x[0],g=x[1];return new c(f,o(f,v,g,{}),r.mallocUint8(v*g*4))};var o=t(4234),r=t(5306),n=t(5050),a=t(2288).nextPow2;function i(f,x,v,g,y){this.coord=[f,x],this.id=v,this.value=g,this.distance=y}function c(f,x,v){this.gl=f,this.fbo=x,this.buffer=v,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(x.bind(),f.readPixels(0,0,x.shape[0],x.shape[1],f.RGBA,f.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var x=this.fbo.shape[0],v=this.fbo.shape[1];if(v*x*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(a(v*x*4)),y=0;y<v*x*4;++y)g[y]=255}return f}}}),h.begin=function(){var f=this.gl;f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},h.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(f,x,v){if(!this.gl)return null;var g=this.fbo.shape.slice();f|=0,x|=0,"number"!=typeof v&&(v=1);var y=0|Math.min(Math.max(f-v,0),g[0]),p=0|Math.min(Math.max(f+v,0),g[0]),m=0|Math.min(Math.max(x-v,0),g[1]),w=0|Math.min(Math.max(x+v,0),g[1]);if(p<=y||w<=m)return null;var u=[p-y,w-m],S=n(this.buffer,[u[0],u[1],4],[4,4*g[0],1],4*(y+g[0]*m)),_=function(C,P,I){for(var j=1e8,R=-1,H=-1,F=C.shape[0],U=C.shape[1],B=0;B<F;B++)for(var N=0;N<U;N++){var J=C.get(B,N,0),Z=C.get(B,N,1),V=C.get(B,N,2),W=C.get(B,N,3);if(J<255||Z<255||V<255||W<255){var X=P-B,K=I-N,ne=X*X+K*K;ne<j&&(j=ne,R=B,H=N)}}return[R,H,j]}(S.hi(u[0],u[1],1),v,v),E=_[0],L=_[1];return E<0||Math.pow(this.radius,2)<_[2]?null:new i(E+y|0,L+m|0,S.get(E,L,0),[S.get(E,L,1),S.get(E,L,2),S.get(E,L,3)],Math.sqrt(_[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(d,s,t){"use strict";var o=t(9016),r=t(4280),n=t(3984),a=t(1628),i=t(2631),c=t(9068);function h(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=h.prototype;function x(v,g){return v.name<g.name?-1:1}f.bind=function(){var v;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(g>y)for(v=y;v<g;v++)this.gl.enableVertexAttribArray(v);else if(y>g)for(v=g;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},f.dispose=function(){for(var v=this.gl.lastAttribCount,g=0;g<v;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(v,g,y,p){if(!g||1===arguments.length){var m=v;v=m.vertex,g=m.fragment,y=m.uniforms,p=m.attributes}var w=this,u=w.gl,S=w._vref;w._vref=a.shader(u,u.VERTEX_SHADER,v),S&&S.dispose(),w.vertShader=w._vref.shader;var _=this._fref;if(w._fref=a.shader(u,u.FRAGMENT_SHADER,g),_&&_.dispose(),w.fragShader=w._fref.shader,!y||!p){var E=u.createProgram();if(u.attachShader(E,w.fragShader),u.attachShader(E,w.vertShader),u.linkProgram(E),!u.getProgramParameter(E,u.LINK_STATUS)){var L=u.getProgramInfoLog(E);throw new c(L,"Error linking program:"+L)}y=y||i.uniforms(u,E),p=p||i.attributes(u,E),u.deleteProgram(E)}(p=p.slice()).sort(x);var C,P=[],I=[],j=[];for(C=0;C<p.length;++C){var R=p[C];if(R.type.indexOf("mat")>=0){for(var H=0|R.type.charAt(R.type.length-1),F=new Array(H),U=0;U<H;++U)F[U]=j.length,I.push(R.name+"["+U+"]"),"number"==typeof R.location?j.push(R.location+U):Array.isArray(R.location)&&R.location.length===H&&"number"==typeof R.location[U]?j.push(0|R.location[U]):j.push(-1);P.push({name:R.name,type:R.type,locations:F})}else P.push({name:R.name,type:R.type,locations:[j.length]}),I.push(R.name),j.push("number"==typeof R.location?0|R.location:-1)}var B=0;for(C=0;C<j.length;++C)if(j[C]<0){for(;j.indexOf(B)>=0;)B+=1;j[C]=B}var N=new Array(y.length);function J(){w.program=a.program(u,w._vref,w._fref,I,j);for(var Z=0;Z<y.length;++Z)N[Z]=u.getUniformLocation(w.program,y[Z].name)}J(),w._relink=J,w.types={uniforms:n(y),attributes:n(p)},w.attributes=r(u,w,P,j),Object.defineProperty(w,"uniforms",o(u,w,y,N))},d.exports=function(v,g,y,p,m){var w=new h(v);return w.update(g,y,p,m),w}},9068:function(d){function s(t,o,r){this.shortMessage=o||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(o||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}(s.prototype=new Error).name="GLError",s.prototype.constructor=s,d.exports=s},4280:function(d,s,t){"use strict";d.exports=function(h,f,x,v){for(var g={},y=0,p=x.length;y<p;++y){var m=x[y],w=m.name,u=m.type,S=m.locations;switch(u){case"bool":case"int":case"float":i(h,f,S[0],v,1,g,w);break;default:if(u.indexOf("vec")>=0){if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);i(h,f,S[0],v,_,g,w)}else{if(!(u.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+w+": "+u);var _;if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);c(h,f,S,v,_,g,w)}}}return g};var o=t(9068);function r(h,f,x,v,g,y){this._gl=h,this._wrapper=f,this._index=x,this._locations=v,this._dimension=g,this._constFunc=y}var n=r.prototype;n.pointer=function(h,f,x,v){var g=this,y=g._gl,p=g._locations[g._index];y.vertexAttribPointer(p,g._dimension,h||y.FLOAT,!!f,x||0,v||0),y.enableVertexAttribArray(p)},n.set=function(h,f,x,v){return this._constFunc(this._locations[this._index],h,f,x,v)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,f,x){return void 0===x.length?h.vertexAttrib1f(f,x):h.vertexAttrib1fv(f,x)},function(h,f,x,v){return void 0===x.length?h.vertexAttrib2f(f,x,v):h.vertexAttrib2fv(f,x)},function(h,f,x,v,g){return void 0===x.length?h.vertexAttrib3f(f,x,v,g):h.vertexAttrib3fv(f,x)},function(h,f,x,v,g,y){return void 0===x.length?h.vertexAttrib4f(f,x,v,g,y):h.vertexAttrib4fv(f,x)}];function i(h,f,x,v,g,y,p){var m=a[g],w=new r(h,f,x,v,g,m);Object.defineProperty(y,p,{set:function(u){return h.disableVertexAttribArray(v[x]),m(h,v[x],u),u},get:function(){return w},enumerable:!0})}function c(h,f,x,v,g,y,p){for(var m=new Array(g),w=new Array(g),u=0;u<g;++u)i(h,f,x[u],v,g,m,u),w[u]=m[u];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<g;++L)w[L].location=E[L];else for(L=0;L<g;++L)w[L].location=E+L;return E},get:function(){for(var E=new Array(g),L=0;L<g;++L)E[L]=v[x[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,P){E=E||h.FLOAT,L=!!L,C=C||g*g,P=P||0;for(var I=0;I<g;++I){var j=v[x[I]];h.vertexAttribPointer(j,g,E,L,C,P+I*g),h.enableVertexAttribArray(j)}};var S=new Array(g),_=h["vertexAttrib"+g+"fv"];Object.defineProperty(y,p,{set:function(E){for(var L=0;L<g;++L){var C=v[x[L]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))_.call(h,C,E[L]);else{for(var P=0;P<g;++P)S[P]=E[g*L+P];_.call(h,C,S)}}return E},get:function(){return m},enumerable:!0})}},9016:function(d,s,t){"use strict";var o=t(3984),r=t(9068);function n(i){return function(){return i}}function a(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=c;return h}d.exports=function(i,c,h,f){function x(m){return function(w){for(var u=v("",m),S=0;S<u.length;++S){var _=u[S],E=_[0],L=_[1];if(f[L]){var C=w;if("string"==typeof E&&(0===E.indexOf(".")||0===E.indexOf("["))){var P=E;if(0===E.indexOf(".")&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var I=P.indexOf("["),j=P.slice(0,I),R=P.slice(I+1,P.length-1);C=j?w[j][R]:w[R]}else C=w[P]}var H,F=h[L].type;switch(F){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(f[L],C);break;case"float":i.uniform1f(f[L],C);break;default:var U=F.indexOf("vec");if(!(0<=U&&U<=1&&F.length===4+U)){if(0===F.indexOf("mat")&&4===F.length){if((H=F.charCodeAt(F.length-1)-48)<2||H>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+F);i["uniformMatrix"+H+"fv"](f[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+F)}if((H=F.charCodeAt(F.length-1)-48)<2||H>4)throw new r("","Invalid data type");switch(F.charAt(0)){case"b":case"i":i["uniform"+H+"iv"](f[L],C);break;case"v":i["uniform"+H+"fv"](f[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+F)}}}}}}function v(m,w){if("object"!=typeof w)return[[m,w]];var u=[];for(var S in w){var _=w[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,"object"==typeof _?u.push.apply(u,v(E,_)):u.push([E,_])}return u}function g(m,w,u){if("object"==typeof u){var S=y(u);Object.defineProperty(m,w,{get:n(S),set:x(u),enumerable:!0,configurable:!1})}else f[u]?Object.defineProperty(m,w,{get:(_=u,function(E,L,C){return E.getUniform(L.program,C[_])}),set:x(u),enumerable:!0,configurable:!1}):m[w]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return"b"===E.charAt(0)?a(C,!1):a(C,0)}if(0===E.indexOf("mat")&&4===E.length){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[u].type);var _}function y(m){var w;if(Array.isArray(m)){w=new Array(m.length);for(var u=0;u<m.length;++u)g(w,u,m[u])}else for(var S in w={},m)g(w,S,m[S]);return w}var p=o(h,!0);return{get:n(y(p)),set:x(p),enumerable:!0,configurable:!0}}},3984:function(d){"use strict";d.exports=function(s,t){for(var o={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=o,i=0;i<n.length;++i){var c=n[i].split("[");if(c.length>1){c[0]in a||(a[c[0]]=[]),a=a[c[0]];for(var h=1;h<c.length;++h){var f=parseInt(c[h]);h<c.length-1||i<n.length-1?(f in a||(a[f]=h<c.length-1?[]:{}),a=a[f]):a[f]=t?r:s[r].type}}else i<n.length-1?(c[0]in a||(a[c[0]]={}),a=a[c[0]]):a[c[0]]=t?r:s[r].type}return o}},2631:function(d,s){"use strict";s.uniforms=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=[],h=0;h<i;++h){var f=n.getActiveUniform(a,h);if(f){var x=r(n,f.type);if(f.size>1)for(var v=0;v<f.size;++v)c.push({name:f.name.replace("[0]","["+v+"]"),type:x});else c.push({name:f.name,type:x})}}return c},s.attributes=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=[],h=0;h<i;++h){var f=n.getActiveAttrib(a,h);f&&c.push({name:f.name,type:r(n,f.type)})}return c};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function r(n,a){if(!o){var i=Object.keys(t);o={};for(var c=0;c<i.length;++c){var h=i[c];o[n[h]]=t[h]}}return o[a]}},1628:function(d,s,t){"use strict";s.shader=function(x,v,g){return f(x).getShaderReference(v,g)},s.program=function(x,v,g,y,p){return f(x).getProgram(v,g,y,p)};var o=t(9068),r=t(3530),n=new(typeof WeakMap>"u"?t(4037):WeakMap),a=0;function i(x,v,g,y,p,m,w){this.id=x,this.src=v,this.type=g,this.shader=y,this.count=m,this.programs=[],this.cache=w}function c(x){this.gl=x,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(0==--this.count){for(var x=this.cache,v=x.gl,g=this.programs,y=0,p=g.length;y<p;++y){var m=x.programs[g[y]];m&&(delete x.programs[y],v.deleteProgram(m))}v.deleteShader(this.shader),delete x.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var h=c.prototype;function f(x){var v=n.get(x);return v||(v=new c(x),n.set(x,v)),v}h.getShaderReference=function(x,v){var g=this.gl,y=this.shaders[x===g.FRAGMENT_SHADER|0],p=y[v];if(p&&g.isShader(p.shader))p.count+=1;else{var m=function(w,u,S){var _=w.createShader(u);if(w.shaderSource(_,S),w.compileShader(_),!w.getShaderParameter(_,w.COMPILE_STATUS)){var E=w.getShaderInfoLog(_);try{var L=r(E,S,u)}catch(C){throw console.warn("Failed to format compiler error: "+C),new o(E,"Error compiling shader:\n"+E)}throw new o(E,L.short,L.long)}return _}(g,x,v);p=y[v]=new i(a++,v,x,m,[],1,this)}return p},h.getProgram=function(x,v,g,y){var p=[x.id,v.id,g.join(":"),y.join(":")].join("@"),m=this.programs[p];return m&&this.gl.isProgram(m)||(this.programs[p]=m=function(w,u,S,_,E){var L=w.createProgram();w.attachShader(L,u),w.attachShader(L,S);for(var C=0;C<_.length;++C)w.bindAttribLocation(L,E[C],_[C]);if(w.linkProgram(L),!w.getProgramParameter(L,w.LINK_STATUS)){var P=w.getProgramInfoLog(L);throw new o(P,"Error linking program: "+P)}return L}(this.gl,x.shader,v.shader,g,y),x.programs.push(p),v.programs.push(p)),m}},3050:function(d){"use strict";function s(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}d.exports=function(o,r){var n=new s(o);return n.update(r),o.addOverlay(n),n};var t=s.prototype;t.update=function(o){this.enable=((o=o||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var o=this.enable,r=this.width,n=this.color,a=this.center,i=this.plot,c=i.line,h=i.dataBox,f=i.viewBox;if(c.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var x=f[0]+(a[0]-h[0])/(h[2]-h[0])*(f[2]-f[0]),v=f[1]+(a[1]-h[1])/(h[3]-h[1])*(f[3]-f[1]);o[0]&&c.drawLine(x,v,f[0],v,r[0],n[0]),o[1]&&c.drawLine(x,v,x,f[1],r[1],n[1]),o[2]&&c.drawLine(x,v,f[2],v,r[2],n[2]),o[3]&&c.drawLine(x,v,x,f[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(d,s,t){"use strict";var o=t(6832),r=t(5158),n=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=o(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(d,s,t){"use strict";var o=t(5827),r=t(2944),n=t(3540);d.exports=function(v,g){var y=[];function p(_,E,L,C,P,I){var j=[_,E,L,0,0,0,1];j[C+3]=1,j[C]=P,y.push.apply(y,j),j[6]=-1,y.push.apply(y,j),j[C]=I,y.push.apply(y,j),y.push.apply(y,j),j[6]=1,y.push.apply(y,j),j[C]=P,y.push.apply(y,j)}p(0,0,0,0,0,1),p(0,0,0,1,0,1),p(0,0,0,2,0,1),p(1,0,0,1,-1,1),p(1,0,0,2,-1,1),p(0,1,0,0,-1,1),p(0,1,0,2,-1,1),p(0,0,1,0,-1,1),p(0,0,1,1,-1,1);var m=o(v,y),w=r(v,[{type:v.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:m,size:1,offset:24,stride:28}]),u=n(v);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var S=new i(v,m,w,u);return S.update(g),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.buffer=g,this.vao=y,this.shader=p,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=i.prototype,h=[0,0,0],f=[0,0,0],x=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(v){},c.draw=function(v){var g=this.gl,y=this.vao,p=this.shader;y.bind(),p.bind();var m,w=v.model||a,u=v.view||a,S=v.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var _=h,E=f,L=0;L<3;++L)m&&m[L]<0?(_[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(_[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(x[0]=g.drawingBufferWidth,x[1]=g.drawingBufferHeight,p.uniforms.model=w,p.uniforms.view=u,p.uniforms.projection=S,p.uniforms.coordinates=[this.position,_,E],p.uniforms.colors=this.colors,p.uniforms.screenShape=x,L=0;L<3;++L)p.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(g.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(g.TRIANGLES,12,18+12*L));y.unbind()},c.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(d,s,t){var o=t(6832),r=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=o(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(d,s,t){"use strict";var o=t(2858),r=t(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,v){var g,y=x.length;for(g=0;g<y;g++){var p=x[g];if(p===v)return g;if(p>v)return g-1}return g},i=function(x,v,g){return x<v?v:x>g?g:x},c=function(x){var v=1/0;x.sort(function(m,w){return m-w});for(var g=x.length,y=1;y<g;y++){var p=Math.abs(x[y]-x[y-1]);p<v&&(v=p)}return v};d.exports=function(x,v){var g=x.startingPositions,y=x.maxLength||1e3,p=x.tubeSize||1,m=x.absoluteTubeSize,w=x.gridFill||"+x+y+z",u={};-1!==w.indexOf("-x")&&(u.reversedX=!0),-1!==w.indexOf("-y")&&(u.reversedY=!0),-1!==w.indexOf("-z")&&(u.reversedZ=!0),u.filled=n.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var fe,Ee,de,we,S=x.getVelocity||function(fe){return function(Ee,de,we){var ke=de.vectors,Te=de.meshgrid,$=Ee[0],oe=Ee[1],he=Ee[2],me=Te[0].length,Me=Te[1].length,Ie=Te[2].length,Pe=a(Te[0],$),ze=a(Te[1],oe),ce=a(Te[2],he),ge=Pe+1,_e=ze+1,De=ce+1;if(Pe=i(Pe,0,me-1),ge=i(ge,0,me-1),ze=i(ze,0,Me-1),_e=i(_e,0,Me-1),ce=i(ce,0,Ie-1),De=i(De,0,Ie-1),Pe<0||ze<0||ce<0||ge>me-1||_e>Me-1||De>Ie-1)return o.create();var He,Ve,nt,tt,at,dt,wt=Te[0][Pe],_t=Te[1][ze],Ct=Te[2][ce],Ot=($-wt)/(Te[0][ge]-wt),Ht=(oe-_t)/(Te[1][_e]-_t),It=(he-Ct)/(Te[2][De]-Ct);switch(isFinite(Ot)||(Ot=.5),isFinite(Ht)||(Ht=.5),isFinite(It)||(It=.5),we.reversedX&&(Pe=me-1-Pe,ge=me-1-ge),we.reversedY&&(ze=Me-1-ze,_e=Me-1-_e),we.reversedZ&&(ce=Ie-1-ce,De=Ie-1-De),we.filled){case 5:at=ce,dt=De,nt=ze*Ie,tt=_e*Ie,He=Pe*Ie*Me,Ve=ge*Ie*Me;break;case 4:at=ce,dt=De,He=Pe*Ie,Ve=ge*Ie,nt=ze*Ie*me,tt=_e*Ie*me;break;case 3:nt=ze,tt=_e,at=ce*Me,dt=De*Me,He=Pe*Me*Ie,Ve=ge*Me*Ie;break;case 2:nt=ze,tt=_e,He=Pe*Me,Ve=ge*Me,at=ce*Me*me,dt=De*Me*me;break;case 1:He=Pe,Ve=ge,at=ce*me,dt=De*me,nt=ze*me*Ie,tt=_e*me*Ie;break;default:He=Pe,Ve=ge,nt=ze*me,tt=_e*me,at=ce*me*Me,dt=De*me*Me}var Ge=ke[He+nt+at],Ze=ke[He+nt+dt],Be=ke[He+tt+at],Ye=ke[He+tt+dt],rt=ke[Ve+nt+at],Se=ke[Ve+nt+dt],Re=ke[Ve+tt+at],Ke=ke[Ve+tt+dt],st=o.create(),ct=o.create(),Tt=o.create(),Et=o.create();o.lerp(st,Ge,rt,Ot),o.lerp(ct,Ze,Se,Ot),o.lerp(Tt,Be,Re,Ot),o.lerp(Et,Ye,Ke,Ot);var At=o.create(),ht=o.create();o.lerp(At,st,Tt,Ht),o.lerp(ht,ct,Et,Ht);var pt=o.create();return o.lerp(pt,At,ht,It),pt}(fe,x,u)},_=x.getDivergence||function(fe,Ee){var de=o.create(),we=1e-4;o.add(de,fe,[we,0,0]);var ke=S(de);o.subtract(ke,ke,Ee),o.scale(ke,ke,1/we),o.add(de,fe,[0,we,0]);var Te=S(de);o.subtract(Te,Te,Ee),o.scale(Te,Te,1/we),o.add(de,fe,[0,0,we]);var $=S(de);return o.subtract($,$,Ee),o.scale($,$,1/we),o.add(de,ke,Te),o.add(de,de,$),de},E=[],L=v[0][0],C=v[0][1],P=v[0][2],I=v[1][0],j=v[1][1],R=v[1][2],F=10*o.distance(v[0],v[1])/y,U=F*F,B=1,N=0,J=g.length;J>1&&(B=function(fe){for(var Ee=[],de=[],we=[],ke={},Te={},$={},oe=fe.length,he=0;he<oe;he++){var me=fe[he],Me=me[0],Ie=me[1],Pe=me[2];ke[Me]||(Ee.push(Me),ke[Me]=!0),Te[Ie]||(de.push(Ie),Te[Ie]=!0),$[Pe]||(we.push(Pe),$[Pe]=!0)}var ze=c(Ee),ce=c(de),ge=c(we),_e=Math.min(ze,ce,ge);return isFinite(_e)?_e:1}(g));for(var Z=0;Z<J;Z++){var V=o.create();o.copy(V,g[Z]);var W=[V],X=[],K=S(V),ne=V;X.push(K);var re=[],ae=_(V,K),le=o.length(ae);isFinite(le)&&le>N&&(N=le),re.push(le),E.push({points:W,velocities:X,divergences:re});for(var pe=0;pe<100*y&&W.length<y&&(void 0,void 0,void 0,de=(fe=V)[1],we=fe[2],!((Ee=fe[0])<L||Ee>I||de<C||de>j||we<P||we>R));){pe++;var xe=o.clone(K),ye=o.squaredLength(xe);if(0===ye)break;ye>U&&o.scale(xe,xe,F/Math.sqrt(ye)),o.add(xe,xe,V),K=S(xe),o.squaredDistance(ne,xe)-U>-1e-4*U&&(W.push(xe),ne=xe,X.push(K),ae=_(xe,K),le=o.length(ae),isFinite(le)&&le>N&&(N=le),re.push(le)),V=xe}}var se=function(fe,Ee,de,we){for(var ke=0,Te=0;Te<fe.length;Te++)for(var $=fe[Te].velocities,oe=0;oe<$.length;oe++)ke=Math.max(ke,o.length($[oe]));var he=fe.map(function(He){return function(Ve,nt,tt,at){for(var dt=Ve.points,wt=Ve.velocities,bt=Ve.divergences,_t=[],Lt=[],Ct=[],Ot=[],Ht=[],It=[],Ge=0,Ze=0,Be=r.create(),Ye=r.create(),rt=0;rt<dt.length;rt++){var Se=dt[rt],Re=wt[rt],Ke=bt[rt];0===nt&&(Ke=.05*tt),Ze=o.length(Re)/at,Be=r.create(),o.copy(Be,Re),Be[3]=Ke;for(var st=0;st<8;st++)Ht[st]=[Se[0],Se[1],Se[2],st];if(Ot.length>0)for(st=0;st<8;st++){var ct=(st+1)%8;_t.push(Ot[st],Ht[st],Ht[ct],Ht[ct],Ot[ct],Ot[st]),Ct.push(Ye,Be,Be,Be,Ye,Ye),It.push(Ge,Ze,Ze,Ze,Ge,Ge);var Tt=_t.length;Lt.push([Tt-6,Tt-5,Tt-4],[Tt-3,Tt-2,Tt-1])}var Et=Ot;Ot=Ht,Ht=Et;var At=Ye;Ye=Be,Be=At;var ht=Ge;Ge=Ze,Ze=ht}return{positions:_t,cells:Lt,vectors:Ct,vertexIntensity:It}}(He,de,we,ke)}),me=[],Me=[],Ie=[],Pe=[];for(Te=0;Te<he.length;Te++){var ze=he[Te],ce=me.length;for(me=me.concat(ze.positions),Ie=Ie.concat(ze.vectors),Pe=Pe.concat(ze.vertexIntensity),oe=0;oe<ze.cells.length;oe++){var ge=ze.cells[oe],_e=[];Me.push(_e);for(var De=0;De<ge.length;De++)_e.push(ge[De]+ce)}}return{positions:me,cells:Me,vectors:Ie,vertexIntensity:Pe,colormap:Ee}}(E,x.colormap,N,B);return m?se.tubeScale=m:(0===N&&(N=1),se.tubeScale=.5*p*B/N),se};var h=t(9578),f=t(1140).createMesh;d.exports.createTubeMesh=function(x,v){return f(x,v,{shaders:h,traceType:"streamtube"})}},9054:function(d,s,t){var o=t(5158),r=t(6832),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);s.createShader=function(h){var f=o(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createPickShader=function(h){var f=o(h,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createContourShader=function(h){var f=o(h,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},s.createPickContourShader=function(h){var f=o(h,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(d,s,t){"use strict";d.exports=function(ne){var re=ne.gl,ae=u(re),le=_(re),pe=S(re),xe=E(re),ye=r(re),se=n(re,[{buffer:ye,size:4,stride:40,offset:0},{buffer:ye,size:3,stride:40,offset:16},{buffer:ye,size:3,stride:40,offset:28}]),fe=r(re),Ee=n(re,[{buffer:fe,size:4,stride:20,offset:0},{buffer:fe,size:1,stride:20,offset:16}]),de=r(re),we=n(re,[{buffer:de,size:2,type:re.FLOAT}]),ke=a(re,1,256,re.RGBA,re.UNSIGNED_BYTE);ke.minFilter=re.LINEAR,ke.magFilter=re.LINEAR;var Te=new j(re,[0,0],[[0,0,0],[0,0,0]],ae,le,ye,se,ke,pe,xe,fe,Ee,de,we,[0,0,0]),$={levels:[[],[],[]]};for(var oe in ne)$[oe]=ne[oe];return $.colormap=$.colormap||"jet",Te.update($),Te};var o=t(2288),r=t(5827),n=t(2944),a=t(8931),i=t(5306),c=t(9156),h=t(7498),f=t(7382),x=t(5050),v=t(4162),g=t(104),y=t(7437),p=t(5070),m=t(9144),w=t(9054),u=w.createShader,S=w.createContourShader,_=w.createPickShader,E=w.createPickContourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(ne,re,ae,le,pe){this.position=ne,this.index=re,this.uv=ae,this.level=le,this.dataCoordinate=pe}function j(ne,re,ae,le,pe,xe,ye,se,fe,Ee,de,we,ke,Te,$){this.gl=ne,this.shape=re,this.bounds=ae,this.objectOffset=$,this.intensityBounds=[],this._shader=le,this._pickShader=pe,this._coordinateBuffer=xe,this._vao=ye,this._colorMap=se,this._contourShader=fe,this._contourPickShader=Ee,this._contourBuffer=de,this._contourVAO=we,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ke,this._dynamicVAO=Te,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(i.mallocFloat(1024),[0,0]),x(i.mallocFloat(1024),[0,0]),x(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var ne=0;ne<3;++ne){var re=P[ne],ae=(ne+2)%3;re[(ne+1)%3+0]=1,re[ae+3]=1,re[ne+6]=1}}();var R=j.prototype;R.genColormap=function(ne,re){var ae=!1,le=f([c({colormap:ne,nshades:256,format:"rgba"}).map(function(pe,xe){var ye=re?function(se,fe){if(!fe||!fe.length)return 1;for(var Ee=0;Ee<fe.length;++Ee){if(fe.length<2)return 1;if(fe[Ee][0]===se)return fe[Ee][1];if(fe[Ee][0]>se&&Ee>0){var de=(fe[Ee][0]-se)/(fe[Ee][0]-fe[Ee-1][0]);return fe[Ee][1]*(1-de)+de*fe[Ee-1][1]}}return 1}(xe/255,re):pe[3];return ye<1&&(ae=!0),[pe[0],pe[1],pe[2],255*ye]})]);return h.divseq(le,255),this.hasAlphaScale=ae,le},R.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},R.isOpaque=function(){return!this.isTransparent()},R.pickSlots=1,R.setPickBase=function(ne){this.pickId=ne};var H=[0,0,0],F={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function U(ne,re){var ae,le,pe,xe=re.axes&&re.axes.lastCubeProps.axis||H,ye=re.showSurface,se=re.showContour;for(ae=0;ae<3;++ae)for(ye=ye||re.surfaceProject[ae],le=0;le<3;++le)se=se||re.contourProject[ae][le];for(ae=0;ae<3;++ae){var fe=F.projections[ae];for(le=0;le<16;++le)fe[le]=0;for(le=0;le<4;++le)fe[5*le]=1;fe[5*ae]=0,fe[12+ae]=re.axesBounds[+(xe[ae]>0)][ae],g(fe,ne.model,fe);var Ee=F.clipBounds[ae];for(pe=0;pe<2;++pe)for(le=0;le<3;++le)Ee[pe][le]=ne.clipBounds[pe][le];Ee[0][ae]=-1e8,Ee[1][ae]=1e8}return F.showSurface=ye,F.showContour=se,F}var B={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},N=L.slice(),J=[1,0,0,0,1,0,0,0,1];function Z(ne,re){ne=ne||{};var ae=this.gl;ae.disable(ae.CULL_FACE),this._colorMap.bind(0);var le=B;le.model=ne.model||L,le.view=ne.view||L,le.projection=ne.projection||L,le.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],le.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],le.objectOffset=this.objectOffset,le.contourColor=this.contourColor[0],le.inverseModel=y(le.inverseModel,le.model);for(var pe=0;pe<2;++pe)for(var xe=le.clipBounds[pe],ye=0;ye<3;++ye)xe[ye]=Math.min(Math.max(this.clipBounds[pe][ye],-1e8),1e8);le.kambient=this.ambientLight,le.kdiffuse=this.diffuseLight,le.kspecular=this.specularLight,le.roughness=this.roughness,le.fresnel=this.fresnel,le.opacity=this.opacity,le.height=0,le.permutation=J,le.vertexColor=this.vertexColor;var se=N;for(g(se,le.view,le.model),g(se,le.projection,se),y(se,se),pe=0;pe<3;++pe)le.eyePosition[pe]=se[12+pe]/se[15];var fe=se[15];for(pe=0;pe<3;++pe)fe+=this.lightPosition[pe]*se[4*pe+3];for(pe=0;pe<3;++pe){var Ee=se[12+pe];for(ye=0;ye<3;++ye)Ee+=se[4*ye+pe]*this.lightPosition[ye];le.lightPosition[pe]=Ee/fe}var de=U(le,this);if(de.showSurface){for(this._shader.bind(),this._shader.uniforms=le,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ae.TRIANGLES,this._vertexCount),pe=0;pe<3;++pe)this.surfaceProject[pe]&&this.vertexCount&&(this._shader.uniforms.model=de.projections[pe],this._shader.uniforms.clipBounds=de.clipBounds[pe],this._vao.draw(ae.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var we=this._contourShader;le.kambient=1,le.kdiffuse=0,le.kspecular=0,le.opacity=1,we.bind(),we.uniforms=le;var ke=this._contourVAO;for(ke.bind(),pe=0;pe<3;++pe)for(we.uniforms.permutation=P[pe],ae.lineWidth(this.contourWidth[pe]*this.pixelRatio),ye=0;ye<this.contourLevels[pe].length;++ye)ye===this.highlightLevel[pe]?(we.uniforms.contourColor=this.highlightColor[pe],we.uniforms.contourTint=this.highlightTint[pe]):0!==ye&&ye-1!==this.highlightLevel[pe]||(we.uniforms.contourColor=this.contourColor[pe],we.uniforms.contourTint=this.contourTint[pe]),this._contourCounts[pe][ye]&&(we.uniforms.height=this.contourLevels[pe][ye],ke.draw(ae.LINES,this._contourCounts[pe][ye],this._contourOffsets[pe][ye]));for(pe=0;pe<3;++pe)for(we.uniforms.model=de.projections[pe],we.uniforms.clipBounds=de.clipBounds[pe],ye=0;ye<3;++ye)if(this.contourProject[pe][ye]){we.uniforms.permutation=P[ye],ae.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[ye].length;++Te)Te===this.highlightLevel[ye]?(we.uniforms.contourColor=this.highlightColor[ye],we.uniforms.contourTint=this.highlightTint[ye]):0!==Te&&Te-1!==this.highlightLevel[ye]||(we.uniforms.contourColor=this.contourColor[ye],we.uniforms.contourTint=this.contourTint[ye]),this._contourCounts[ye][Te]&&(we.uniforms.height=this.contourLevels[ye][Te],ke.draw(ae.LINES,this._contourCounts[ye][Te],this._contourOffsets[ye][Te]))}for(ke.unbind(),(ke=this._dynamicVAO).bind(),pe=0;pe<3;++pe)if(0!==this._dynamicCounts[pe])for(we.uniforms.model=le.model,we.uniforms.clipBounds=le.clipBounds,we.uniforms.permutation=P[pe],ae.lineWidth(this.dynamicWidth[pe]*this.pixelRatio),we.uniforms.contourColor=this.dynamicColor[pe],we.uniforms.contourTint=this.dynamicTint[pe],we.uniforms.height=this.dynamicLevel[pe],ke.draw(ae.LINES,this._dynamicCounts[pe],this._dynamicOffsets[pe]),ye=0;ye<3;++ye)this.contourProject[ye][pe]&&(we.uniforms.model=de.projections[ye],we.uniforms.clipBounds=de.clipBounds[ye],ke.draw(ae.LINES,this._dynamicCounts[pe],this._dynamicOffsets[pe]));ke.unbind()}}R.draw=function(ne){return Z.call(this,ne,!1)},R.drawTransparent=function(ne){return Z.call(this,ne,!0)};var V={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(ne,re){return Array.isArray(ne)?[re(ne[0]),re(ne[1]),re(ne[2])]:[re(ne),re(ne),re(ne)]}function X(ne){return Array.isArray(ne)?3===ne.length?[ne[0],ne[1],ne[2],1]:[ne[0],ne[1],ne[2],ne[3]]:[0,0,0,1]}function K(ne){if(Array.isArray(ne)){if(Array.isArray(ne))return[X(ne[0]),X(ne[1]),X(ne[2])];var re=X(ne);return[re.slice(),re.slice(),re.slice()]}}R.drawPick=function(ne){ne=ne||{};var re=this.gl;re.disable(re.CULL_FACE);var ae=V;ae.model=ne.model||L,ae.view=ne.view||L,ae.projection=ne.projection||L,ae.shape=this._field[2].shape,ae.pickId=this.pickId/255,ae.lowerBound=this.bounds[0],ae.upperBound=this.bounds[1],ae.objectOffset=this.objectOffset,ae.permutation=J;for(var le=0;le<2;++le)for(var pe=ae.clipBounds[le],xe=0;xe<3;++xe)pe[xe]=Math.min(Math.max(this.clipBounds[le][xe],-1e8),1e8);var ye=U(ae,this);if(ye.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ae,this._vao.bind(),this._vao.draw(re.TRIANGLES,this._vertexCount),le=0;le<3;++le)this.surfaceProject[le]&&(this._pickShader.uniforms.model=ye.projections[le],this._pickShader.uniforms.clipBounds=ye.clipBounds[le],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ye.showContour){var se=this._contourPickShader;se.bind(),se.uniforms=ae;var fe=this._contourVAO;for(fe.bind(),xe=0;xe<3;++xe)for(re.lineWidth(this.contourWidth[xe]*this.pixelRatio),se.uniforms.permutation=P[xe],le=0;le<this.contourLevels[xe].length;++le)this._contourCounts[xe][le]&&(se.uniforms.height=this.contourLevels[xe][le],fe.draw(re.LINES,this._contourCounts[xe][le],this._contourOffsets[xe][le]));for(le=0;le<3;++le)for(se.uniforms.model=ye.projections[le],se.uniforms.clipBounds=ye.clipBounds[le],xe=0;xe<3;++xe)if(this.contourProject[le][xe]){se.uniforms.permutation=P[xe],re.lineWidth(this.contourWidth[xe]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[xe].length;++Ee)this._contourCounts[xe][Ee]&&(se.uniforms.height=this.contourLevels[xe][Ee],fe.draw(re.LINES,this._contourCounts[xe][Ee],this._contourOffsets[xe][Ee]))}fe.unbind()}},R.pick=function(ne){if(!ne||ne.id!==this.pickId)return null;var re=this._field[2].shape,ae=this._pickResult,le=re[0]*(ne.value[0]+(ne.value[2]>>4)/16)/255,pe=Math.floor(le),xe=le-pe,ye=re[1]*(ne.value[1]+(15&ne.value[2])/16)/255,se=Math.floor(ye),fe=ye-se;pe+=1,se+=1;var Ee=ae.position;Ee[0]=Ee[1]=Ee[2]=0;for(var de=0;de<2;++de)for(var we=de?xe:1-xe,ke=0;ke<2;++ke)for(var Te=pe+de,$=se+ke,oe=we*(ke?fe:1-fe),he=0;he<3;++he)Ee[he]+=this._field[he].get(Te,$)*oe;for(var me=this._pickResult.level,Me=0;Me<3;++Me)if(me[Me]=p.le(this.contourLevels[Me],Ee[Me]),me[Me]<0)this.contourLevels[Me].length>0&&(me[Me]=0);else if(me[Me]<this.contourLevels[Me].length-1){var Pe=this.contourLevels[Me][me[Me]+1];Math.abs(this.contourLevels[Me][me[Me]]-Ee[Me])>Math.abs(Pe-Ee[Me])&&(me[Me]+=1)}for(ae.index[0]=xe<.5?pe:pe+1,ae.index[1]=fe<.5?se:se+1,ae.uv[0]=le/re[0],ae.uv[1]=ye/re[1],he=0;he<3;++he)ae.dataCoordinate[he]=this._field[he].get(ae.index[0],ae.index[1]);return ae},R.padField=function(ne,re){var ae=re.shape.slice(),le=ne.shape.slice();h.assign(ne.lo(1,1).hi(ae[0],ae[1]),re),h.assign(ne.lo(1).hi(ae[0],1),re.hi(ae[0],1)),h.assign(ne.lo(1,le[1]-1).hi(ae[0],1),re.lo(0,ae[1]-1).hi(ae[0],1)),h.assign(ne.lo(0,1).hi(1,ae[1]),re.hi(1)),h.assign(ne.lo(le[0]-1,1).hi(1,ae[1]),re.lo(ae[0]-1)),ne.set(0,0,re.get(0,0)),ne.set(0,le[1]-1,re.get(0,ae[1]-1)),ne.set(le[0]-1,0,re.get(ae[0]-1,0)),ne.set(le[0]-1,le[1]-1,re.get(ae[0]-1,ae[1]-1))},R.update=function(ne){this.objectOffset=(ne=ne||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ne&&(this.contourWidth=W(ne.contourWidth,Number)),"showContour"in ne&&(this.showContour=W(ne.showContour,Boolean)),"showSurface"in ne&&(this.showSurface=!!ne.showSurface),"contourTint"in ne&&(this.contourTint=W(ne.contourTint,Boolean)),"contourColor"in ne&&(this.contourColor=K(ne.contourColor)),"contourProject"in ne&&(this.contourProject=W(ne.contourProject,function(yn){return W(yn,Boolean)})),"surfaceProject"in ne&&(this.surfaceProject=ne.surfaceProject),"dynamicColor"in ne&&(this.dynamicColor=K(ne.dynamicColor)),"dynamicTint"in ne&&(this.dynamicTint=W(ne.dynamicTint,Number)),"dynamicWidth"in ne&&(this.dynamicWidth=W(ne.dynamicWidth,Number)),"opacity"in ne&&(this.opacity=ne.opacity),"opacityscale"in ne&&(this.opacityscale=ne.opacityscale),"colorBounds"in ne&&(this.colorBounds=ne.colorBounds),"vertexColor"in ne&&(this.vertexColor=ne.vertexColor?1:0),"colormap"in ne&&this._colorMap.setPixels(this.genColormap(ne.colormap,this.opacityscale));var re=ne.field||ne.coords&&ne.coords[2]||null,ae=!1;if(re||(re=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ne||"coords"in ne){var le=(re.shape[0]+2)*(re.shape[1]+2);le>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(o.nextPow2(le))),this._field[2]=x(this._field[2].data,[re.shape[0]+2,re.shape[1]+2]),this.padField(this._field[2],re),this.shape=re.shape.slice();for(var pe=this.shape,xe=0;xe<2;++xe)this._field[2].size>this._field[xe].data.length&&(i.freeFloat(this._field[xe].data),this._field[xe].data=i.mallocFloat(this._field[2].size)),this._field[xe]=x(this._field[xe].data,[pe[0]+2,pe[1]+2]);if(ne.coords){var ye=ne.coords;if(!Array.isArray(ye)||3!==ye.length)throw new Error("gl-surface: invalid coordinates for x/y");for(xe=0;xe<2;++xe){var se=ye[xe];for(ke=0;ke<2;++ke)if(se.shape[ke]!==pe[ke])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[xe],se)}}else if(ne.ticks){var fe=ne.ticks;if(!Array.isArray(fe)||2!==fe.length)throw new Error("gl-surface: invalid ticks");for(xe=0;xe<2;++xe){var Ee=fe[xe];if((Array.isArray(Ee)||Ee.length)&&(Ee=x(Ee)),Ee.shape[0]!==pe[xe])throw new Error("gl-surface: invalid tick length");var de=x(Ee.data,pe);de.stride[xe]=Ee.stride[0],de.stride[1^xe]=0,this.padField(this._field[xe],de)}}else{for(xe=0;xe<2;++xe){var we=[0,0];we[xe]=1,this._field[xe]=x(this._field[xe].data,[pe[0]+2,pe[1]+2],we,0)}this._field[0].set(0,0,0);for(var ke=0;ke<pe[0];++ke)this._field[0].set(ke+1,0,ke);for(this._field[0].set(pe[0]+1,0,pe[0]-1),this._field[1].set(0,0,0),ke=0;ke<pe[1];++ke)this._field[1].set(0,ke+1,ke);this._field[1].set(0,pe[1]+1,pe[1]-1)}var Te=this._field,$=x(i.mallocFloat(3*Te[2].size*2),[3,pe[0]+2,pe[1]+2,2]);for(xe=0;xe<3;++xe)m($.pick(xe),Te[xe],"mirror");var oe=x(i.mallocFloat(3*Te[2].size),[pe[0]+2,pe[1]+2,3]);for(xe=0;xe<pe[0]+2;++xe)for(ke=0;ke<pe[1]+2;++ke){var he=$.get(0,xe,ke,0),me=$.get(0,xe,ke,1),Me=$.get(1,xe,ke,0),Ie=$.get(1,xe,ke,1),Pe=$.get(2,xe,ke,0),ze=$.get(2,xe,ke,1),ce=Me*ze-Ie*Pe,ge=Pe*me-ze*he,_e=he*Ie-me*Me,De=Math.sqrt(ce*ce+ge*ge+_e*_e);De<1e-8?(De=Math.max(Math.abs(ce),Math.abs(ge),Math.abs(_e)))<1e-8?(_e=1,ge=ce=0,De=1):De=1/De:De=1/Math.sqrt(De),oe.set(xe,ke,0,ce*De),oe.set(xe,ke,1,ge*De),oe.set(xe,ke,2,_e*De)}i.free($.data);var He=[1/0,1/0,1/0],Ve=[-1/0,-1/0,-1/0],nt=1/0,tt=-1/0,dt=i.mallocFloat(o.nextPow2((pe[0]-1)*(pe[1]-1)*6*10)),wt=0,bt=0;for(xe=0;xe<pe[0]-1;++xe)e:for(ke=0;ke<pe[1]-1;++ke){for(var _t=0;_t<2;++_t)for(var Lt=0;Lt<2;++Lt)for(var Ct=0;Ct<3;++Ct){var Ot=this._field[Ct].get(1+xe+_t,1+ke+Lt);if(isNaN(Ot)||!isFinite(Ot))continue e}for(Ct=0;Ct<6;++Ct){var Ht=xe+C[Ct][0],It=ke+C[Ct][1],Ge=this._field[0].get(Ht+1,It+1),Ze=this._field[1].get(Ht+1,It+1);Ot=this._field[2].get(Ht+1,It+1),ce=oe.get(Ht+1,It+1,0),ge=oe.get(Ht+1,It+1,1),_e=oe.get(Ht+1,It+1,2),ne.intensity&&(Be=ne.intensity.get(Ht,It));var Be=ne.intensity?ne.intensity.get(Ht,It):Ot+this.objectOffset[2];dt[wt++]=Ht,dt[wt++]=It,dt[wt++]=Ge,dt[wt++]=Ze,dt[wt++]=Ot,dt[wt++]=0,dt[wt++]=Be,dt[wt++]=ce,dt[wt++]=ge,dt[wt++]=_e,He[0]=Math.min(He[0],Ge+this.objectOffset[0]),He[1]=Math.min(He[1],Ze+this.objectOffset[1]),He[2]=Math.min(He[2],Ot+this.objectOffset[2]),nt=Math.min(nt,Be),Ve[0]=Math.max(Ve[0],Ge+this.objectOffset[0]),Ve[1]=Math.max(Ve[1],Ze+this.objectOffset[1]),Ve[2]=Math.max(Ve[2],Ot+this.objectOffset[2]),tt=Math.max(tt,Be),bt+=1}}for(ne.intensityBounds&&(nt=+ne.intensityBounds[0],tt=+ne.intensityBounds[1]),xe=6;xe<wt;xe+=10)dt[xe]=(dt[xe]-nt)/(tt-nt);this._vertexCount=bt,this._coordinateBuffer.update(dt.subarray(0,wt)),i.freeFloat(dt),i.free(oe.data),this.bounds=[He,Ve],this.intensity=ne.intensity||this._field[2],this.intensityBounds[0]===nt&&this.intensityBounds[1]===tt||(ae=!0),this.intensityBounds=[nt,tt]}if("levels"in ne){var Ye=ne.levels;for(Ye=Array.isArray(Ye[0])?Ye.slice():[[],[],Ye],xe=0;xe<3;++xe)Ye[xe]=Ye[xe].slice(),Ye[xe].sort(function(yn,on){return yn-on});for(xe=0;xe<3;++xe)for(ke=0;ke<Ye[xe].length;++ke)Ye[xe][ke]-=this.objectOffset[xe];e:for(xe=0;xe<3;++xe){if(Ye[xe].length!==this.contourLevels[xe].length){ae=!0;break}for(ke=0;ke<Ye[xe].length;++ke)if(Ye[xe][ke]!==this.contourLevels[xe][ke]){ae=!0;break e}}this.contourLevels=Ye}if(ae){Te=this._field,pe=this.shape;for(var rt=[],Se=0;Se<3;++Se){var Re=this.contourLevels[Se],Ke=[],st=[],ct=[0,0,0];for(xe=0;xe<Re.length;++xe){var Tt=v(this._field[Se],Re[xe]);Ke.push(rt.length/5|0),bt=0;e:for(ke=0;ke<Tt.cells.length;++ke){var Et=Tt.cells[ke];for(Ct=0;Ct<2;++Ct){var At=Tt.positions[Et[Ct]],ht=At[0],pt=0|Math.floor(ht),gt=ht-pt,Pt=At[1],zt=0|Math.floor(Pt),Ut=Pt-zt,Nt=!1;t:for(var jt=0;jt<3;++jt){ct[jt]=0;var Gt=(Se+jt+1)%3;for(_t=0;_t<2;++_t){var un=_t?gt:1-gt;for(Ht=0|Math.min(Math.max(pt+_t,0),pe[0]),Lt=0;Lt<2;++Lt){var hn=Lt?Ut:1-Ut;if(It=0|Math.min(Math.max(zt+Lt,0),pe[1]),Ot=jt<2?this._field[Gt].get(Ht,It):(this.intensity.get(Ht,It)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ot)||isNaN(Ot)){Nt=!0;break t}ct[jt]+=un*hn*Ot}}}if(Nt){if(Ct>0){for(var _n=0;_n<5;++_n)rt.pop();bt-=1}continue e}rt.push(ct[0],ct[1],At[0],At[1],ct[2]),bt+=1}}st.push(bt)}this._contourOffsets[Se]=Ke,this._contourCounts[Se]=st}var Fn=i.mallocFloat(rt.length);for(xe=0;xe<rt.length;++xe)Fn[xe]=rt[xe];this._contourBuffer.update(Fn),i.freeFloat(Fn)}},R.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ne=0;ne<3;++ne)i.freeFloat(this._field[ne].data)},R.highlight=function(ne){var re,ae;if(!ne)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(re=0;re<3;++re)this.highlightLevel[re]=this.enableHighlight[re]?ne.level[re]:-1;for(ae=this.snapToData?ne.dataCoordinate:ne.position,re=0;re<3;++re)ae[re]-=this.objectOffset[re];if(this.enableDynamic[0]&&ae[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ae[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ae[2]!==this.dynamicLevel[2]){for(var le=0,pe=this.shape,xe=i.mallocFloat(12*pe[0]*pe[1]),ye=0;ye<3;++ye)if(this.enableDynamic[ye]){this.dynamicLevel[ye]=ae[ye];var de=this._field[(ye+1)%3],we=this._field[(ye+2)%3],ke=v(this._field[ye],ae[ye]),Te=ke.cells,$=ke.positions;for(this._dynamicOffsets[ye]=le,re=0;re<Te.length;++re)for(var oe=Te[re],he=0;he<2;++he){var me=$[oe[he]],Me=+me[0],Ie=0|Me,Pe=0|Math.min(Ie+1,pe[0]),ze=Me-Ie,ce=1-ze,ge=+me[1],_e=0|ge,De=0|Math.min(_e+1,pe[1]),He=ge-_e,Ve=1-He,nt=ce*Ve,tt=ce*He,at=ze*Ve,dt=ze*He,wt=nt*de.get(Ie,_e)+tt*de.get(Ie,De)+at*de.get(Pe,_e)+dt*de.get(Pe,De),bt=nt*we.get(Ie,_e)+tt*we.get(Ie,De)+at*we.get(Pe,_e)+dt*we.get(Pe,De);if(isNaN(wt)||isNaN(bt)){he&&(le-=1);break}xe[2*le+0]=wt,xe[2*le+1]=bt,le+=1}this._dynamicCounts[ye]=le-this._dynamicOffsets[ye]}else this.dynamicLevel[ye]=NaN,this._dynamicCounts[ye]=0;this._dynamicBuffer.update(xe.subarray(0,2*le)),i.freeFloat(xe)}}},8931:function(d,s,t){"use strict";var o=t(5050),r=t(7498),n=t(5306);d.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function h(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],i=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],c=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}(_),"number"==typeof arguments[1])return w(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var E=arguments[1],L=f(E)?E:E.raw;if(L)return function u(_,E,L,C,P,I){var j=m(_);return _.texImage2D(_.TEXTURE_2D,0,P,P,I,E),new g(_,j,L,C,P,I)}(_,L,0|E.width,0|E.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(E.shape&&E.data&&E.stride)return function S(_,E){var L=E.dtype,C=E.shape.slice(),P=_.getParameter(_.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var I=p(C,E.stride.slice()),j=0;"float32"===L?j=_.FLOAT:"float64"===L?(j=_.FLOAT,I=!1,L="float32"):"uint8"===L?j=_.UNSIGNED_BYTE:(j=_.UNSIGNED_BYTE,I=!1,L="uint8");var R,H,F=0;if(2===C.length)F=_.LUMINANCE,E=o(E.data,C=[C[0],C[1],1],[E.stride[0],E.stride[1],1],E.offset);else{if(3!==C.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===C[2])F=_.ALPHA;else if(2===C[2])F=_.LUMINANCE_ALPHA;else if(3===C[2])F=_.RGB;else{if(4!==C[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");F=_.RGBA}}j!==_.FLOAT||_.getExtension("OES_texture_float")||(j=_.UNSIGNED_BYTE,I=!1);var U=E.size;if(I)R=0===E.offset&&E.data.length===U?E.data:E.data.subarray(E.offset,E.offset+U);else{var B=[C[2],C[2]*C[0],1];H=n.malloc(U,L);var N=o(H,C,B,0);"float32"!==L&&"float64"!==L||j!==_.UNSIGNED_BYTE?r.assign(N,E):x(N,E),R=H.subarray(0,U)}var J=m(_);return _.texImage2D(_.TEXTURE_2D,0,F,C[0],C[1],0,F,j,R),I||n.free(H),new g(_,J,C[0],C[1],F,j)}(_,E)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,i=null,c=null;function f(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var x=function(_,E){r.muls(_,E,255)};function v(_,E,L){var C=_.gl,P=C.getParameter(C.MAX_TEXTURE_SIZE);if(E<0||E>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[E,L],_.bind(),C.texImage2D(C.TEXTURE_2D,0,_.format,E,L,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,E,L,C,P,I){this.gl=_,this.handle=E,this.format=P,this.type=I,this._shape=[L,C],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var j=this,R=[this._wrapS,this._wrapT];Object.defineProperties(R,[{get:function(){return j._wrapS},set:function(F){return j.wrapS=F}},{get:function(){return j._wrapT},set:function(F){return j.wrapT=F}}]),this._wrapVector=R;var H=[this._shape[0],this._shape[1]];Object.defineProperties(H,[{get:function(){return j._shape[0]},set:function(F){return j.width=F}},{get:function(){return j._shape[1]},set:function(F){return j.height=F}}]),this._shapeVector=H}var y=g.prototype;function p(_,E){return 3===_.length?1===E[2]&&E[1]===_[0]*_[2]&&E[0]===_[2]:1===E[0]&&E[1]===_[0]}function m(_){var E=_.createTexture();return _.bindTexture(_.TEXTURE_2D,E),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),E}function w(_,E,L,C,P){var I=_.getParameter(_.MAX_TEXTURE_SIZE);if(E<0||E>I||L<0||L>I)throw new Error("gl-texture2d: Invalid texture shape");if(P===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var j=m(_);return _.texImage2D(_.TEXTURE_2D,0,C,E,L,0,C,P,null),new g(_,j,E,L,C,P)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var E=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),E!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var E=0;E<2;++E)if(c.indexOf(_[E])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return v(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return v(this,this._shape[0],_|=0),_}}}),y.bind=function(_){var E=this.gl;return void 0!==_&&E.activeTexture(E.TEXTURE0+(0|_)),E.bindTexture(E.TEXTURE_2D,this.handle),void 0!==_?0|_:E.getParameter(E.ACTIVE_TEXTURE)-E.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),E=0;_>0;++E,_>>>=1)this._mipLevels.indexOf(E)<0&&this._mipLevels.push(E)},y.setPixels=function(_,E,L,C){var P=this.gl;this.bind(),Array.isArray(E)?(C=L,L=0|E[1],E=0|E[0]):(E=E||0,L=L||0),C=C||0;var I=f(_)?_:_.raw;if(I)this._mipLevels.indexOf(C)<0?(P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(C)):P.texSubImage2D(P.TEXTURE_2D,C,E,L,this.format,this.type,I);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||E+_.shape[1]>this._shape[1]>>>C||L+_.shape[0]>this._shape[0]>>>C||E<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(j,R,H,F,U,B,N,J){var Z=J.dtype,V=J.shape.slice();if(V.length<2||V.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var W=0,X=0,K=p(V,J.stride.slice());if("float32"===Z?W=j.FLOAT:"float64"===Z?(W=j.FLOAT,K=!1,Z="float32"):"uint8"===Z?W=j.UNSIGNED_BYTE:(W=j.UNSIGNED_BYTE,K=!1,Z="uint8"),2===V.length)X=j.LUMINANCE,J=o(J.data,V=[V[0],V[1],1],[J.stride[0],J.stride[1],1],J.offset);else{if(3!==V.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===V[2])X=j.ALPHA;else if(2===V[2])X=j.LUMINANCE_ALPHA;else if(3===V[2])X=j.RGB;else{if(4!==V[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");X=j.RGBA}}if(X!==j.LUMINANCE&&X!==j.ALPHA||U!==j.LUMINANCE&&U!==j.ALPHA||(X=U),X!==U)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ne=J.size,re=N.indexOf(F)<0;if(re&&N.push(F),W===B&&K)0===J.offset&&J.data.length===ne?re?j.texImage2D(j.TEXTURE_2D,F,U,V[0],V[1],0,U,B,J.data):j.texSubImage2D(j.TEXTURE_2D,F,R,H,V[0],V[1],U,B,J.data):re?j.texImage2D(j.TEXTURE_2D,F,U,V[0],V[1],0,U,B,J.data.subarray(J.offset,J.offset+ne)):j.texSubImage2D(j.TEXTURE_2D,F,R,H,V[0],V[1],U,B,J.data.subarray(J.offset,J.offset+ne));else{var ae;ae=B===j.FLOAT?n.mallocFloat32(ne):n.mallocUint8(ne);var le=o(ae,V,[V[2],V[2]*V[0],1]);W===j.FLOAT&&B===j.UNSIGNED_BYTE?x(le,J):r.assign(le,J),re?j.texImage2D(j.TEXTURE_2D,F,U,V[0],V[1],0,U,B,ae.subarray(0,ne)):j.texSubImage2D(j.TEXTURE_2D,F,R,H,V[0],V[1],U,B,ae.subarray(0,ne)),B===j.FLOAT?n.freeFloat32(ae):n.freeUint8(ae)}}(P,E,L,C,this.format,this.type,this._mipLevels,_)}}},3056:function(d){"use strict";d.exports=function(s,t,o){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(o){if(o.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<o.length;++n){var a=o[n];if(a.buffer){var c=a.size||4,h=a.type||s.FLOAT,f=!!a.normalized,x=a.stride||0,v=a.offset||0;a.buffer.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,c,h,f,x,v)}else{if("number"==typeof a)s.vertexAttrib1f(n,a);else if(1===a.length)s.vertexAttrib1f(n,a[0]);else if(2===a.length)s.vertexAttrib2f(n,a[0],a[1]);else if(3===a.length)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(d,s,t){"use strict";var o=t(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,i){this._elements=a,this._attributes=n,this._elementsType=i||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,i){i=i||0;var c=this.gl;this._elements?c.drawElements(n,a,this._elementsType,i):c.drawArrays(n,i,a)},d.exports=function(n){return new r(n)}},3778:function(d,s,t){"use strict";var o=t(3056);function r(a,i,c,h,f,x){this.location=a,this.dimension=i,this.a=c,this.b=h,this.c=f,this.d=x}function n(a,i,c){this.gl=a,this._ext=i,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,i,c){if(this.bind(),o(this.gl,i,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var f=a[h];"number"==typeof f?this._attribs.push(new r(h,1,f)):Array.isArray(f)&&this._attribs.push(new r(h,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!i,this._elementsType=c||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,i,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(a,i,this._elementsType,c):h.drawArrays(a,c,i)},d.exports=function(a,i){return new n(a,i,i.createVertexArrayOES())}},2944:function(d,s,t){"use strict";var o=t(3778),r=t(7220);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}d.exports=function(a,i,c,h){var f,x=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(f=x?o(a,x):r(a)).update(i,c,h),f}},2598:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s}},5879:function(d,s,t){d.exports=function(a,i){var c=o(a[0],a[1],a[2]),h=o(i[0],i[1],i[2]);r(c,c),r(h,h);var f=n(c,h);return f>1?0:Math.acos(f)};var o=t(5415),r=t(899),n=t(9305)},8827:function(d){d.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(d){d.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(d){d.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2];return s[0]=n*h-a*c,s[1]=a*i-r*h,s[2]=r*c-n*i,s}},5981:function(d,s,t){d.exports=t(8288)},8288:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(o*o+r*r+n*n)}},8629:function(d,s,t){d.exports=t(7979)},7979:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s}},9305:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(d){d.exports=1e-6},4932:function(d,s,t){d.exports=function(r,n){var a=r[0],i=r[1],c=r[2],h=n[0],f=n[1],x=n[2];return Math.abs(a-h)<=o*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=o*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(c-x)<=o*Math.max(1,Math.abs(c),Math.abs(x))};var o=t(154)},5777:function(d){d.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(d){d.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(d,s,t){d.exports=function(r,n,a,i,c,h){var f,x;for(n||(n=3),a||(a=0),x=i?Math.min(i*n+a,r.length):r.length,f=a;f<x;f+=n)o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],c(o,o,h),r[f]=o[0],r[f+1]=o[1],r[f+2]=o[2];return r};var o=t(8501)()},5415:function(d){d.exports=function(s,t,o){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=o,r}},2858:function(d,s,t){d.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(d,s,t){d.exports=t(4693)},4693:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return Math.sqrt(t*t+o*o+r*r)}},1868:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s}},1716:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s}},3605:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s}},5733:function(d,s,t){d.exports=t(105)},105:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s}},435:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=o*o+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},6660:function(d){d.exports=function(s,t){t=t||1;var o=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(o)*n,s[1]=Math.sin(o)*n,s[2]=r*t,s}},392:function(d){d.exports=function(s,t,o,r){var n=o[1],a=o[2],i=t[1]-n,c=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=t[0],s[1]=n+i*f-c*h,s[2]=a+i*h+c*f,s}},3222:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[2],i=t[0]-n,c=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+c*h+i*f,s[1]=t[1],s[2]=a+c*f-i*h,s}},3388:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[1],i=t[0]-n,c=t[1]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+i*f-c*h,s[1]=a+i*h+c*f,s[2]=t[2],s}},1624:function(d){d.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s}},6722:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s}},831:function(d){d.exports=function(s,t,o,r){return s[0]=t,s[1]=o,s[2]=r,s}},5294:function(d,s,t){d.exports=t(6403)},3303:function(d,s,t){d.exports=t(4337)},6403:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return o*o+r*r+n*n}},4337:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return t*t+o*o+r*r}},8921:function(d,s,t){d.exports=t(911)},911:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s}},9908:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2];return s[0]=r*o[0]+n*o[3]+a*o[6],s[1]=r*o[1]+n*o[4]+a*o[7],s[2]=r*o[2]+n*o[5]+a*o[8],s}},3255:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[3]*r+o[7]*n+o[11]*a+o[15];return s[0]=(o[0]*r+o[4]*n+o[8]*a+o[12])/(i=i||1),s[1]=(o[1]*r+o[5]*n+o[9]*a+o[13])/i,s[2]=(o[2]*r+o[6]*n+o[10]*a+o[14])/i,s}},6568:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2],f=o[3],x=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=x*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-x*-h,s[2]=g*f+y*-h+x*-c-v*-i,s}},3433:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s[3]=t[3]+o[3],s}},1413:function(d){d.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(d){d.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(o*o+r*r+n*n+a*a)}},205:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s[3]=t[3]/o[3],s}},4242:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(d){d.exports=function(s,t,o,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=o,n[3]=r,n}},4020:function(d,s,t){d.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+o*o+r*r+n*n)}},8746:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2],c=t[3];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s[3]=c+r*(o[3]-c),s}},3030:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s[3]=Math.max(t[3],o[3]),s}},2170:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s[3]=Math.min(t[3],o[3]),s}},746:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s}},6459:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o*o+r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),s[0]=o*i,s[1]=r*i,s[2]=n*i,s[3]=a*i),s}},3770:function(d,s,t){var o=t(381),r=t(5510);d.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),o(n,n),r(n,n,a),n}},5510:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s[3]=t[3]*o,s}},4224:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s[3]=t[3]+o[3]*r,s}},6453:function(d){d.exports=function(s,t,o,r,n){return s[0]=t,s[1]=o,s[2]=r,s[3]=n,s}},1542:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return o*o+r*r+n*n+a*a}},9037:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return t*t+o*o+r*r+n*n}},2705:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s[3]=t[3]-o[3],s}},6342:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3];return s[0]=o[0]*r+o[4]*n+o[8]*a+o[12]*i,s[1]=o[1]*r+o[5]*n+o[9]*a+o[13]*i,s[2]=o[2]*r+o[6]*n+o[10]*a+o[14]*i,s[3]=o[3]*r+o[7]*n+o[11]*a+o[15]*i,s}},5022:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2],f=o[3],x=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=x*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-x*-h,s[2]=g*f+y*-h+x*-c-v*-i,s[3]=t[3],s}},9365:function(d,s,t){var o=t(8096),r=t(7896);d.exports=function(n){for(var a=Array.isArray(n)?n:o(n),i=0;i<a.length;i++){var c=a[i];if("preprocessor"===c.type){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var x=h[2];return(h[1]?r(x):x).trim()}}}}},3193:function(d,s,t){d.exports=function(x){var v,g,y,p=0,m=0,w=c,u=[],S=[],_=1,E=0,L=0,C=!1,P=!1,I="",j=n,R=o;"300 es"===(x=x||{}).version&&(j=i,R=a);var H={},F={};for(p=0;p<j.length;p++)H[j[p]]=!0;for(p=0;p<R.length;p++)F[R[p]]=!0;return function(ae){return S=[],null!==ae?function(le){var pe;for(p=0,le.toString&&(le=le.toString()),I+=le.replace(/\r\n/g,"\n"),y=I.length;v=I[p],p<y;){switch(pe=p,w){case 0:p="/"===v&&"*"===g?(u.push(v),U(u.join("")),w=c,p+1):(u.push(v),g=v,p+1);break;case 1:case 2:p="\r"!==v&&"\n"!==v||"\\"===g?(u.push(v),g=v,p+1):(U(u.join("")),w=c,p);break;case 3:p=V();break;case 4:p="."===v||/[eE]/.test(v)?(u.push(v),w=5,g=v,p+1):"x"===v&&1===u.length&&"0"===u[0]?(w=11,u.push(v),g=v,p+1):/[^\d]/.test(v)?(U(u.join("")),w=c,p):(u.push(v),g=v,p+1);break;case 11:p=/[^a-fA-F0-9]/.test(v)?(U(u.join("")),w=c,p):(u.push(v),g=v,p+1);break;case 5:"f"===v&&(u.push(v),g=v,p+=1),p=/[eE]/.test(v)?(u.push(v),g=v,p+1):("-"!==v&&"+"!==v||!/[eE]/.test(g))&&/[^\d]/.test(v)?(U(u.join("")),w=c,p):(u.push(v),g=v,p+1);break;case h:p=re();break;case 9:p=/[^\s]/g.test(v)?(U(u.join("")),w=c,p):(u.push(v),g=v,p+1);break;case c:u=u.length?[]:u,p="/"===g&&"*"===v?(L=m+p-1,w=0,g=v,p+1):"/"===g&&"/"===v?(L=m+p-1,w=1,g=v,p+1):"#"===v?(w=2,L=m+p,p):/\s/.test(v)?(w=9,L=m+p,p):(C=/\d/.test(v),P=/[^\w_]/.test(v),L=m+p,w=C?4:P?3:h,p)}pe!==p&&("\n"===I[pe]?(E=0,++_):++E)}return m+=p,I=I.slice(p),S}(ae):(u.length&&U(u.join("")),w=10,U("(eof)"),S)};function U(ae){ae.length&&S.push({type:f[w],data:ae,position:L,line:_,column:E})}function V(){if("."===g&&/\d/.test(v))return w=5,p;if("/"===g&&"*"===v)return w=0,p;if("/"===g&&"/"===v)return w=1,p;if("."===v&&u.length){for(;W(u););return w=5,p}if(";"===v||")"===v||"("===v){if(u.length)for(;W(u););return U(v),w=c,p+1}var ae=2===u.length&&"="!==v;if(/[\w_\d\s]/.test(v)||ae){for(;W(u););return w=c,p}return u.push(v),g=v,p+1}function W(ae){for(var le,pe,xe=0;;){if(le=r.indexOf(ae.slice(0,ae.length+xe).join("")),pe=r[le],-1===le){if(xe--+ae.length>0)continue;pe=ae.slice(0,1).join("")}return U(pe),L+=pe.length,(u=u.slice(pe.length)).length}}function re(){if(/[^\d\w_]/.test(v)){var ae=u.join("");return w=F[ae]?8:H[ae]?7:6,U(u.join("")),w=c,p}return u.push(v),g=v,p+1}};var o=t(399),r=t(9746),n=t(9525),a=t(9458),i=t(3585),c=999,h=9999,f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(d,s,t){var o=t(9525);o=o.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),d.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(d){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(d,s,t){var o=t(399);d.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(d){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(d){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(d,s,t){var o=t(3193);d.exports=function(r,n){var a=o(n),i=[];return(i=i.concat(a(r))).concat(a(null))}},6832:function(d){d.exports=function(s){"string"==typeof s&&(s=[s]);for(var t=[].slice.call(arguments,1),o=[],r=0;r<s.length-1;r++)o.push(s[r],t[r]||"");return o.push(s[r]),o.join("")}},5233:function(d,s,t){"use strict";var o=t(4846);d.exports=o&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(d,s,t){"use strict";d.exports=function(x,v){var g=x.length;if(0===g)throw new Error("Must have at least d+1 points");var y=x[0].length;if(g<=y)throw new Error("Must input at least d+1 points");var p=x.slice(0,y+1),m=o.apply(void 0,p);if(0===m)throw new Error("Input not in general position");for(var w=new Array(y+1),u=0;u<=y;++u)w[u]=u;m<0&&(w[0]=1,w[1]=0);var S=new n(w,new Array(y+1),!1),_=S.adjacent,E=new Array(y+2);for(u=0;u<=y;++u){for(var L=w.slice(),C=0;C<=y;++C)C===u&&(L[C]=-1);var P=L[0];L[0]=L[1],L[1]=P;var I=new n(L,new Array(y+1),!0);_[u]=I,E[u]=I}for(E[y+1]=S,u=0;u<=y;++u){L=_[u].vertices;var j=_[u].adjacent;for(C=0;C<=y;++C){var R=L[C];if(R<0)j[C]=S;else for(var H=0;H<=y;++H)_[H].vertices.indexOf(R)<0&&(j[C]=_[H])}}var F=new h(y,p,E),U=!!v;for(u=y+1;u<g;++u)F.insert(x[u],U);return F.boundary()};var o=t(417),r=t(8211).H;function n(x,v,g){this.vertices=x,this.adjacent=v,this.boundary=g,this.lastVisited=-1}function a(x,v,g){this.vertices=x,this.cell=v,this.index=g}function i(x,v){return r(x.vertices,v.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var c=[];function h(x,v,g){this.dimension=x,this.vertices=v,this.simplices=g,this.interior=g.filter(function(w){return!w.boundary}),this.tuple=new Array(x+1);for(var y=0;y<=x;++y)this.tuple[y]=this.vertices[y];var p,w,m=c[x];m||(m=c[x]=((p=o[x+1])||(p=o),w=p,function(){return w.apply(this,this.tuple)})),this.orient=m}var f=h.prototype;f.handleBoundaryDegeneracy=function(x,v){var g=this.dimension,y=this.vertices.length-1,p=this.tuple,m=this.vertices,w=[x];for(x.lastVisited=-y;w.length>0;)for(var u=(x=w.pop()).adjacent,S=0;S<=g;++S){var _=u[S];if(_.boundary&&!(_.lastVisited<=-y)){for(var E=_.vertices,L=0;L<=g;++L){var C=E[L];p[L]=C<0?v:m[C]}var P=this.orient();if(P>0)return _;_.lastVisited=-y,0===P&&w.push(_)}}return null},f.walk=function(x,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=v?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[w];e:for(;!u.boundary;){for(var S=u.vertices,_=u.adjacent,E=0;E<=y;++E)m[E]=p[S[E]];for(u.lastVisited=g,E=0;E<=y;++E){var L=_[E];if(!(L.lastVisited>=g)){var C=m[E];m[E]=x;var P=this.orient();if(m[E]=C,P<0){u=L;continue e}L.lastVisited=L.boundary?-g:g}}return}return u},f.addPeaks=function(x,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=this.interior,u=this.simplices,S=[v];v.lastVisited=g,v.vertices[v.vertices.indexOf(-1)]=g,v.boundary=!1,w.push(v);for(var _=[];S.length>0;){var E=(v=S.pop()).vertices,L=v.adjacent,C=E.indexOf(g);if(!(C<0))for(var P=0;P<=y;++P)if(P!==C){var I=L[P];if(I.boundary&&!(I.lastVisited>=g)){var j=I.vertices;if(I.lastVisited!==-g){for(var R=0,H=0;H<=y;++H)j[H]<0?(R=H,m[H]=x):m[H]=p[j[H]];if(this.orient()>0){j[R]=g,I.boundary=!1,w.push(I),S.push(I),I.lastVisited=g;continue}I.lastVisited=-g}var F=I.adjacent,U=E.slice(),B=L.slice(),N=new n(U,B,!0);u.push(N);var J=F.indexOf(v);if(!(J<0))for(F[J]=N,B[C]=I,U[P]=-1,B[P]=v,L[P]=N,N.flip(),H=0;H<=y;++H){var Z=U[H];if(!(Z<0||Z===g)){for(var V=new Array(y-1),W=0,X=0;X<=y;++X){var K=U[X];K<0||X===H||(V[W++]=K)}_.push(new a(V,N,H))}}}}}for(_.sort(i),P=0;P+1<_.length;P+=2){var ne=_[P],re=_[P+1];ne.index<0||re.index<0||(ne.cell.adjacent[ne.index]=re.cell,re.cell.adjacent[re.index]=ne.cell)}},f.insert=function(x,v){var g=this.vertices;g.push(x);var y=this.walk(x,v);if(y){for(var p=this.dimension,m=this.tuple,w=0;w<=p;++w){var u=y.vertices[w];m[w]=u<0?x:g[u]}var S=this.orient(m);S<0||(0!==S||(y=this.handleBoundaryDegeneracy(y,x)))&&this.addPeaks(x,y)}},f.boundary=function(){for(var x=this.dimension,v=[],g=this.simplices,y=g.length,p=0;p<y;++p){var m=g[p];if(m.boundary){for(var w=new Array(x),u=m.vertices,S=0,_=0,E=0;E<=x;++E)u[E]>=0?w[S++]=u[E]:_=1&E;if(_===(1&x)){var L=w[0];w[0]=w[1],w[1]=L}v.push(w)}}return v}},9014:function(d,s,t){"use strict";var o=t(5070);function r(S,_,E,L,C){this.mid=S,this.left=_,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(_?_.count:0)+(E?E.count:0)+L.length}d.exports=function(S){return new w(S&&0!==S.length?m(S):null)};var n=r.prototype;function a(S,_){S.mid=_.mid,S.left=_.left,S.right=_.right,S.leftPoints=_.leftPoints,S.rightPoints=_.rightPoints,S.count=_.count}function i(S,_){var E=m(_);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function c(S,_){var E=S.intervals([]);E.push(_),i(S,E)}function h(S,_){var E=S.intervals([]),L=E.indexOf(_);return L<0?0:(E.splice(L,1),i(S,E),1)}function f(S,_,E){for(var L=0;L<S.length&&S[L][0]<=_;++L){var C=E(S[L]);if(C)return C}}function x(S,_,E){for(var L=S.length-1;L>=0&&S[L][1]>=_;--L){var C=E(S[L]);if(C)return C}}function v(S,_){for(var E=0;E<S.length;++E){var L=_(S[E]);if(L)return L}}function g(S,_){return S-_}function y(S,_){return S[0]-_[0]||S[1]-_[1]}function p(S,_){return S[1]-_[1]||S[0]-_[0]}function m(S){if(0===S.length)return null;for(var _=[],E=0;E<S.length;++E)_.push(S[E][0],S[E][1]);_.sort(g);var L=_[_.length>>1],C=[],P=[],I=[];for(E=0;E<S.length;++E){var j=S[E];j[1]<L?C.push(j):L<j[0]?P.push(j):I.push(j)}var R=I,H=I.slice();return R.sort(y),H.sort(p),new r(L,m(C),m(P),R,H)}function w(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var _=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?c(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?c(this,S):this.right.insert(S):this.right=m([S]);else{var E=o.ge(this.leftPoints,S,y),L=o.ge(this.rightPoints,S,p);this.leftPoints.splice(E,0,S),this.rightPoints.splice(L,0,S)}},n.remove=function(S){var _=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?h(this,S):2===(P=this.left.remove(S))?(this.left=null,this.count-=1,1):(1===P&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?h(this,S):2===(P=this.right.remove(S))?(this.right=null,this.count-=1,1):(1===P&&(this.count-=1),P):0;if(1===this.count)return this.leftPoints[0]===S?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=P}a(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(C=o.ge(this.leftPoints,S,y);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S)for(this.count-=1,this.leftPoints.splice(C,1),P=o.ge(this.rightPoints,S,p);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1;return 0},n.queryPoint=function(S,_){return S<this.mid?this.left&&(E=this.left.queryPoint(S,_))?E:f(this.leftPoints,S,_):S>this.mid?this.right&&(E=this.right.queryPoint(S,_))?E:x(this.rightPoints,S,_):v(this.leftPoints,_);var E},n.queryInterval=function(S,_,E){var L;return S<this.mid&&this.left&&(L=this.left.queryInterval(S,_,E))||_>this.mid&&this.right&&(L=this.right.queryInterval(S,_,E))?L:_<this.mid?f(this.leftPoints,_,E):S>this.mid?x(this.rightPoints,S,E):v(this.leftPoints,E)};var u=w.prototype;u.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},u.remove=function(S){if(this.root){var _=this.root.remove(S);return 2===_&&(this.root=null),0!==_}return!1},u.queryPoint=function(S,_){if(this.root)return this.root.queryPoint(S,_)},u.queryInterval=function(S,_,E){if(S<=_&&this.root)return this.root.queryInterval(S,_,E)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(d){"use strict";d.exports=function(s){for(var t=new Array(s),o=0;o<s;++o)t[o]=o;return t}},4846:function(d){d.exports=!0},4780:function(d){function s(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}d.exports=function(t){return null!=t&&(s(t)||"function"==typeof(o=t).readFloatLE&&"function"==typeof o.slice&&s(o.slice(0,0))||!!t._isBuffer);var o}},2861:function(d){"use strict";d.exports=o,d.exports.isMobile=o,d.exports.default=o;var s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(r){r||(r={});var n=r.ua;if(n||typeof navigator>"u"||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;var a=r.tablet?t.test(n):s.test(n);return!a&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(a=!0),a}},3596:function(d){"use strict";d.exports=function(s){for(var t,o=s.length,r=0;r<o;r++)if(((t=s.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},3578:function(d){d.exports=function(s,t,o){return s*(1-o)+t*o}},7191:function(d,s,t){var o=t(4690),r=t(9823),n=t(7332),a=t(7787),i=t(7437),c=t(2142),h={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},f=r(),x=r(),v=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function p(m,w,u,S,_){m[0]=w[0]*S+u[0]*_,m[1]=w[1]*S+u[1]*_,m[2]=w[2]*S+u[2]*_}d.exports=function(m,w,u,S,_,E){if(w||(w=[0,0,0]),u||(u=[0,0,0]),S||(S=[0,0,0]),_||(_=[0,0,0,1]),E||(E=[0,0,0,1]),!o(f,m)||(n(x,f),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var L,C,P,I,j,R,H,X,K,F=f[3],U=f[7],B=f[11],N=f[12],J=f[13],Z=f[14],V=f[15];if(0!==F||0!==U||0!==B){if(v[0]=F,v[1]=U,v[2]=B,v[3]=V,!i(x,x))return!1;c(x,x),I=(C=v)[0],(L=_)[0]=(P=x)[0]*I+P[4]*(j=C[1])+P[8]*(R=C[2])+P[12]*(H=C[3]),L[1]=P[1]*I+P[5]*j+P[9]*R+P[13]*H,L[2]=P[2]*I+P[6]*j+P[10]*R+P[14]*H,L[3]=P[3]*I+P[7]*j+P[11]*R+P[15]*H}else _[0]=_[1]=_[2]=0,_[3]=1;if(w[0]=N,w[1]=J,w[2]=Z,(X=g)[0][0]=(K=f)[0],X[0][1]=K[1],X[0][2]=K[2],X[1][0]=K[4],X[1][1]=K[5],X[1][2]=K[6],X[2][0]=K[8],X[2][1]=K[9],X[2][2]=K[10],u[0]=h.length(g[0]),h.normalize(g[0],g[0]),S[0]=h.dot(g[0],g[1]),p(g[1],g[1],g[0],1,-S[0]),u[1]=h.length(g[1]),h.normalize(g[1],g[1]),S[0]/=u[1],S[1]=h.dot(g[0],g[2]),p(g[2],g[2],g[0],1,-S[1]),S[2]=h.dot(g[1],g[2]),p(g[2],g[2],g[1],1,-S[2]),u[2]=h.length(g[2]),h.normalize(g[2],g[2]),S[1]/=u[2],S[2]/=u[2],h.cross(y,g[1],g[2]),h.dot(g[0],y)<0)for(var W=0;W<3;W++)u[W]*=-1,g[W][0]*=-1,g[W][1]*=-1,g[W][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4690:function(d){d.exports=function(s,t){var o=t[15];if(0===o)return!1;for(var r=1/o,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7649:function(d,s,t){var o=t(1868),r=t(1102),n=t(7191),a=t(7787),i=t(1116),c=x(),h=x(),f=x();function x(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(g){return[g||0,g||0,g||0]}d.exports=function(g,y,p,m){if(0===a(y)||0===a(p))return!1;var w=n(y,c.translate,c.scale,c.skew,c.perspective,c.quaternion),u=n(p,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!u||(o(f.translate,c.translate,h.translate,m),o(f.skew,c.skew,h.skew,m),o(f.scale,c.scale,h.scale,m),o(f.perspective,c.perspective,h.perspective,m),i(f.quaternion,c.quaternion,h.quaternion,m),r(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},1102:function(d,s,t){var o={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},r=(o.create(),o.create());d.exports=function(n,a,i,c,h,f){return o.identity(n),o.fromRotationTranslation(n,f,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],o.identity(r),0!==c[2]&&(r[9]=c[2],o.multiply(n,n,r)),0!==c[1]&&(r[9]=0,r[8]=c[1],o.multiply(n,n,r)),0!==c[0]&&(r[8]=0,r[4]=c[0],o.multiply(n,n,r)),o.scale(n,n,i),n}},9298:function(d,s,t){"use strict";var o=t(5070),r=t(7649),n=t(7437),a=t(6109),i=t(7115),c=t(5240),h=t(3012),f=t(998),x=(t(3668),t(899)),v=[0,0,0];function g(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}d.exports=function(m){return new g((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=g.prototype;y.recalcMatrix=function(m){var w=this._time,u=o.le(w,m),S=this.computedMatrix;if(!(u<0)){var _=this._components;if(u===w.length-1)for(var E=16*u,L=0;L<16;++L)S[L]=_[E++];else{var C=w[u+1]-w[u],P=(E=16*u,this.prevMatrix),I=!0;for(L=0;L<16;++L)P[L]=_[E++];var j=this.nextMatrix;for(L=0;L<16;++L)j[L]=_[E++],I=I&&P[L]===j[L];if(C<1e-6||I)for(L=0;L<16;++L)S[L]=P[L];else r(S,P,j,(m-w[u])/C)}var R=this.computedUp;R[0]=S[1],R[1]=S[5],R[2]=S[9],x(R,R);var H=this.computedInverse;n(H,S);var F=this.computedEye,U=H[15];F[0]=H[12]/U,F[1]=H[13]/U,F[2]=H[14]/U;var B=this.computedCenter,N=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)B[L]=F[L]-S[2+4*L]*N}},y.idle=function(m){if(!(m<this.lastT())){for(var w=this._components,u=w.length-16,S=0;S<16;++S)w.push(w[u++]);this._time.push(m)}},y.flush=function(m){var w=o.gt(this._time,m)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,w,u,S){this.recalcMatrix(m),this.setMatrix(m,h(this.computedMatrix,w=w||this.computedEye,u=u||v,S=S||this.computedUp));for(var _=0,E=0;E<3;++E)_+=Math.pow(u[E]-w[E],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},y.rotate=function(m,w,u,S){this.recalcMatrix(m);var _=this.computedInverse;w&&i(_,_,w),u&&a(_,_,u),S&&c(_,_,S),this.setMatrix(m,n(this.computedMatrix,_))};var p=[0,0,0];y.pan=function(m,w,u,S){p[0]=-(w||0),p[1]=-(u||0),p[2]=-(S||0),this.recalcMatrix(m);var _=this.computedInverse;f(_,_,p),this.setMatrix(m,n(_,_))},y.translate=function(m,w,u,S){p[0]=w||0,p[1]=u||0,p[2]=S||0,this.recalcMatrix(m);var _=this.computedMatrix;f(_,_,p),this.setMatrix(m,_)},y.setMatrix=function(m,w){if(!(m<this.lastT())){this._time.push(m);for(var u=0;u<16;++u)this._components.push(w[u])}},y.setDistance=function(m,w){this.computedRadius[0]=w},y.setDistanceLimits=function(m,w){var u=this._limits;u[0]=m,u[1]=w},y.getDistanceLimits=function(m){var w=this._limits;return m?(m[0]=w[0],m[1]=w[1],m):w}},3266:function(d,s,t){"use strict";d.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),i=0;i<n;++i)a[i]=i;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var c=new Array(n);for(i=0;i<n;++i)c[i]=i;c.sort(function(w,u){return r[w][0]-r[u][0]||r[w][1]-r[u][1]});var h=[c[0],c[1]],f=[c[0],c[1]];for(i=2;i<n;++i){for(var x=c[i],v=r[x],g=h.length;g>1&&o(r[h[g-2]],r[h[g-1]],v)<=0;)g-=1,h.pop();for(h.push(x),g=f.length;g>1&&o(r[f[g-2]],r[f[g-1]],v)>=0;)g-=1,f.pop();f.push(x)}a=new Array(f.length+h.length-2);for(var y=0,p=(i=0,h.length);i<p;++i)a[y++]=h[i];for(var m=f.length-2;m>0;--m)a[y++]=f[m];return a};var o=t(417)[3]},6145:function(d,s,t){"use strict";d.exports=function(r,n){n||(n=r,r=window);var a=0,i=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function x(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==h.meta,h.meta=!!E.metaKey),L}function v(E,L){var C=o.x(L),P=o.y(L);"buttons"in L&&(E=0|L.buttons),(E!==a||C!==i||P!==c||x(L))&&(a=0|E,i=C||0,c=P||0,n&&n(a,i,c,h))}function g(E){v(0,E)}function y(){(a||i||c||h.shift||h.alt||h.meta||h.control)&&(i=c=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function p(E){x(E)&&n&&n(a,i,c,h)}function m(E){0===o.buttons(E)?v(0,E):v(a,E)}function w(E){v(a|o.buttons(E),E)}function u(E){v(a&~o.buttons(E),E)}function S(){f||(f=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",w),r.addEventListener("mouseup",u),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",y),r.addEventListener("keyup",p),r.addEventListener("keydown",p),r.addEventListener("keypress",p),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}S();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return f},set:function(E){E?S():f&&(f=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",u),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",y),r.removeEventListener("keyup",p),r.removeEventListener("keydown",p),r.removeEventListener("keypress",p),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),_};var o=t(4110)},2565:function(d){var s={left:0,top:0};d.exports=function(t,o,r){o=o||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,i=t.clientY||0,c=(n=o)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-c.left,r[1]=i-c.top,r}},4110:function(d,s){"use strict";function t(o){return o.target||o.srcElement||window}s.buttons=function(o){if("object"==typeof o){if("buttons"in o)return o.buttons;if("which"in o){if(2===(r=o.which))return 4;if(3===r)return 2;if(r>0)return 1<<r-1}else if("button"in o){var r;if(1===(r=o.button))return 4;if(2===r)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(o){if("object"==typeof o){if("offsetX"in o)return o.offsetX;var r=t(o).getBoundingClientRect();return o.clientX-r.left}return 0},s.y=function(o){if("object"==typeof o){if("offsetY"in o)return o.offsetY;var r=t(o).getBoundingClientRect();return o.clientY-r.top}return 0}},6475:function(d,s,t){"use strict";var o=t(14);d.exports=function(r,n,a){"function"==typeof r&&(a=!!n,n=r,r=window);var i=o("ex",r),c=function(h){a&&h.preventDefault();var f=h.deltaX||0,x=h.deltaY||0,v=h.deltaZ||0,g=1;switch(h.deltaMode){case 1:g=i;break;case 2:g=window.innerHeight}if(x*=g,v*=g,(f*=g)||x||v)return n(f,x,v,h)};return r.addEventListener("wheel",c),c}},9284:function(d,s,t){"use strict";var o=t(5306);d.exports=function(n){function a(v){throw new Error("ndarray-extract-contour: "+v)}"object"!=typeof n&&a("Must specify arguments");var i=n.order;Array.isArray(i)||a("Must specify order");var v,g,y,u,c=n.arrayArguments||1;c<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof n.vertex&&a("Must specify vertex creation function"),"function"!=typeof n.cell&&a("Must specify cell creation function"),"function"!=typeof n.phase&&a("Must specify phase function");for(var h=n.getters||[],f=new Array(c),x=0;x<c;++x)f[x]=h.indexOf(x)>=0;return v=n.vertex,g=n.cell,y=n.phase,u=[f,i].join(","),(0,r[u])(v,g,y,o.mallocUint32,o.freeUint32)};var r={"false,0,1":function(n,a,i,c,h){return function(f,x,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,S=0|f.stride[0],_=0|f.stride[1],E=0|f.offset,L=0|-S,C=0,P=0|-_,I=0,j=-S-_|0,R=0,H=0|S,F=_-S*p|0,U=0,B=0,N=0,J=2*p|0,Z=c(J),V=c(J),W=0,X=0,K=-1,ne=-1,re=0,ae=0|-p,le=0|p,pe=0,xe=-p-1|0,ye=p-1|0,se=0,fe=0,Ee=0;for(U=0;U<p;++U)Z[W++]=i(w[E],x,v,g),E+=H;if(E+=F,m>0){if(B=1,Z[W++]=i(w[E],x,v,g),E+=H,p>0)for(U=1,X=Z[W]=i(y=w[E],x,v,g),pe=Z[W+ae],se=Z[W+xe],X===(re=Z[W+K])&&X===pe&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,re,pe,se,x,v,g),fe=V[W]=N++),W+=1,E+=H,U=2;U<p;++U)X=Z[W]=i(y=w[E],x,v,g),pe=Z[W+ae],se=Z[W+xe],X===(re=Z[W+K])&&X===pe&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,re,pe,se,x,v,g),fe=V[W]=N++,se!==re&&a(V[W+K],fe,R,C,se,re,x,v,g)),W+=1,E+=H;for(E+=F,W=0,Ee=K,K=ne,ne=Ee,Ee=ae,ae=le,le=Ee,Ee=xe,xe=ye,ye=Ee,B=2;B<m;++B){if(Z[W++]=i(w[E],x,v,g),E+=H,p>0)for(U=1,X=Z[W]=i(y=w[E],x,v,g),pe=Z[W+ae],se=Z[W+xe],X===(re=Z[W+K])&&X===pe&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,re,pe,se,x,v,g),fe=V[W]=N++,se!==pe&&a(V[W+ae],fe,I,R,pe,se,x,v,g)),W+=1,E+=H,U=2;U<p;++U)X=Z[W]=i(y=w[E],x,v,g),pe=Z[W+ae],se=Z[W+xe],X===(re=Z[W+K])&&X===pe&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,re,pe,se,x,v,g),fe=V[W]=N++,se!==pe&&a(V[W+ae],fe,I,R,pe,se,x,v,g),se!==re&&a(V[W+K],fe,R,C,se,re,x,v,g)),W+=1,E+=H;1&B&&(W=0),Ee=K,K=ne,ne=Ee,Ee=ae,ae=le,le=Ee,Ee=xe,xe=ye,ye=Ee,E+=F}}h(V),h(Z)}},"false,1,0":function(n,a,i,c,h){return function(f,x,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,S=0|f.stride[0],_=0|f.stride[1],E=0|f.offset,L=0|-S,C=0,P=0|-_,I=0,j=-S-_|0,R=0,H=0|_,F=S-_*m|0,U=0,B=0,N=0,J=2*m|0,Z=c(J),V=c(J),W=0,X=0,K=-1,ne=-1,re=0,ae=0|-m,le=0|m,pe=0,xe=-m-1|0,ye=m-1|0,se=0,fe=0,Ee=0;for(B=0;B<m;++B)Z[W++]=i(w[E],x,v,g),E+=H;if(E+=F,p>0){if(U=1,Z[W++]=i(w[E],x,v,g),E+=H,m>0)for(B=1,X=Z[W]=i(y=w[E],x,v,g),re=Z[W+K],se=Z[W+xe],X===(pe=Z[W+ae])&&X===re&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,pe,re,se,x,v,g),fe=V[W]=N++),W+=1,E+=H,B=2;B<m;++B)X=Z[W]=i(y=w[E],x,v,g),re=Z[W+K],se=Z[W+xe],X===(pe=Z[W+ae])&&X===re&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,pe,re,se,x,v,g),fe=V[W]=N++,se!==re&&a(V[W+K],fe,I,R,re,se,x,v,g)),W+=1,E+=H;for(E+=F,W=0,Ee=ae,ae=le,le=Ee,Ee=K,K=ne,ne=Ee,Ee=xe,xe=ye,ye=Ee,U=2;U<p;++U){if(Z[W++]=i(w[E],x,v,g),E+=H,m>0)for(B=1,X=Z[W]=i(y=w[E],x,v,g),re=Z[W+K],se=Z[W+xe],X===(pe=Z[W+ae])&&X===re&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,pe,re,se,x,v,g),fe=V[W]=N++,se!==pe&&a(V[W+ae],fe,R,C,se,pe,x,v,g)),W+=1,E+=H,B=2;B<m;++B)X=Z[W]=i(y=w[E],x,v,g),re=Z[W+K],se=Z[W+xe],X===(pe=Z[W+ae])&&X===re&&X===se||(n(U,B,y,C=w[E+L],I=w[E+P],R=w[E+j],X,pe,re,se,x,v,g),fe=V[W]=N++,se!==re&&a(V[W+K],fe,I,R,re,se,x,v,g),se!==pe&&a(V[W+ae],fe,R,C,se,pe,x,v,g)),W+=1,E+=H;1&U&&(W=0),Ee=ae,ae=le,le=Ee,Ee=K,K=ne,ne=Ee,Ee=xe,xe=ye,ye=Ee,E+=F}}h(V),h(Z)}}}},9144:function(d,s,t){"use strict";var o=t(3094),r={zero:function(p,m,w,u){var S=p[0];u|=0;var _=0,E=w[0];for(_=0;_<S;++_)m[u]=0,u+=E},fdTemplate1:function(p,m,w,u,S,_,E){var L=p[0],C=w[0],P=-1*C,I=C;u|=0,E|=0;var j=0,R=C,H=_[0];for(j=0;j<L;++j)S[E]=.5*(m[u+P]-m[u+I]),u+=R,E+=H},fdTemplate2:function(p,m,w,u,S,_,E,L,C,P){var I=p[0],j=p[1],R=w[0],H=w[1],U=_[1],N=C[1],J=-1*R,Z=R,V=-1*H,W=H;u|=0,E|=0,P|=0;var X=0,K=0,ne=H,re=R-j*H,ae=U,le=_[0]-j*U,pe=N,xe=C[0]-j*N;for(K=0;K<I;++K){for(X=0;X<j;++X)S[E]=.5*(m[u+J]-m[u+Z]),L[P]=.5*(m[u+V]-m[u+W]),u+=ne,E+=ae,P+=pe;u+=re,E+=le,P+=xe}}},n={cdiff:function(p){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,I=S.order,j=[_,E.join(),L,C.join(),P,I.join()].join(),R=m[j];return R||(m[j]=R=p([_,E,L,C,P,I])),R(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}},zero:function(p){var m={};return function(w){var u=w.dtype,S=w.order,_=[u,S.join()].join(),E=m[_];return E||(m[_]=E=p([u,S])),E(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(p){var m={};return function(w,u){var S=w.dtype,_=w.order,E=u.dtype,L=u.order,C=[S,_.join(),E,L.join()].join(),P=m[C];return P||(m[C]=P=p([S,_,E,L])),P(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(p){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,I=S.order,j=[_,E.join(),L,C.join(),P,I.join()].join(),R=m[j];return R||(m[j]=R=p([_,E,L,C,P,I])),R(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}}};function a(p){return(0,n[p.funcName])(i.bind(void 0,p))}function i(p){return r[p.funcName]}function c(p){return a({funcName:p.funcName})}var h={},f={},x=c({funcName:"cdiff"}),v=c({funcName:"zero"});function g(p){return p in h?h[p]:h[p]=c({funcName:"fdTemplate"+p})}function y(p,m,w,u){return function(S,_){var E=_.shape.slice();return E[0]>2&&E[1]>2&&u(_.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(w(_.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(w(_.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(w(_.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(w(_.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}d.exports=function(p,m,w){return Array.isArray(w)||(w=o(m.dimension,"string"==typeof w?w:"clamp")),0===m.size?p:0===m.dimension?(p.set(0),p):function(u){var S=u.join();if(C=f[S])return C;for(var _=u.length,E=[x,v],L=1;L<=_;++L)E.push(g(L));var C=y.apply(void 0,E);return f[S]=C,C}(w)(p,m)}},3581:function(d){"use strict";function s(n,a){var i=Math.floor(a),c=a-i,f=0<=i+1&&i+1<n.shape[0];return(1-c)*(0<=i&&i<n.shape[0]?+n.get(i):0)+c*(f?+n.get(i+1):0)}function t(n,a,i){var c=Math.floor(a),h=a-c,f=0<=c&&c<n.shape[0],x=0<=c+1&&c+1<n.shape[0],v=Math.floor(i),g=i-v,y=0<=v&&v<n.shape[1],p=0<=v+1&&v+1<n.shape[1],m=f&&y?n.get(c,v):0,w=f&&p?n.get(c,v+1):0;return(1-g)*((1-h)*m+h*(x&&y?n.get(c+1,v):0))+g*((1-h)*w+h*(x&&p?n.get(c+1,v+1):0))}function o(n,a,i,c){var h=Math.floor(a),f=a-h,x=0<=h&&h<n.shape[0],v=0<=h+1&&h+1<n.shape[0],g=Math.floor(i),y=i-g,p=0<=g&&g<n.shape[1],m=0<=g+1&&g+1<n.shape[1],w=Math.floor(c),u=c-w,S=0<=w&&w<n.shape[2],_=0<=w+1&&w+1<n.shape[2],E=x&&p&&S?n.get(h,g,w):0,L=x&&m&&S?n.get(h,g+1,w):0,C=v&&p&&S?n.get(h+1,g,w):0,P=v&&m&&S?n.get(h+1,g+1,w):0,I=x&&p&&_?n.get(h,g,w+1):0,j=x&&m&&_?n.get(h,g+1,w+1):0;return(1-u)*((1-y)*((1-f)*E+f*C)+y*((1-f)*L+f*P))+u*((1-y)*((1-f)*I+f*(v&&p&&_?n.get(h+1,g,w+1):0))+y*((1-f)*j+f*(v&&m&&_?n.get(h+1,g+1,w+1):0)))}function r(n){var a,i,c=0|n.shape.length,h=new Array(c),f=new Array(c),x=new Array(c),v=new Array(c);for(a=0;a<c;++a)i=+arguments[a+1],h[a]=Math.floor(i),f[a]=i-h[a],x[a]=0<=h[a]&&h[a]<n.shape[a],v[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var g,y,p,m=0;e:for(a=0;a<1<<c;++a){for(y=1,p=n.offset,g=0;g<c;++g)if(a&1<<g){if(!v[g])continue e;y*=f[g],p+=n.stride[g]*(h[g]+1)}else{if(!x[g])continue e;y*=1-f[g],p+=n.stride[g]*h[g]}m+=y*n.data[p]}return m}d.exports=function(n,a,i,c){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return t(n,a,i);case 3:return o(n,a,i,c);default:return r.apply(void 0,arguments)}},d.exports.d1=s,d.exports.d2=t,d.exports.d3=o},7498:function(d,s){"use strict";var t={"float64,2,1,0":function(){return function(i,c,h,f,x){var v=i[0],g=i[1],y=i[2],m=h[1],w=h[2];f|=0;var u=0,S=0,_=0,E=w,L=m-y*w,C=h[0]-g*m;for(_=0;_<v;++_){for(S=0;S<g;++S){for(u=0;u<y;++u)c[f]/=x,f+=E;f+=L}f+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,c,h,f,x,v,g,y){for(var p=i[0],m=i[1],w=i[2],u=h[0],S=h[1],_=h[2],E=v[0],L=v[1],C=v[2],P=f|=0,I=g|=0,j=0|i[0];j>0;){j<64?(p=j,j=0):(p=64,j-=64);for(var R=0|i[1];R>0;){R<64?(m=R,R=0):(m=64,R-=64),f=P+j*u+R*S,g=I+j*E+R*L;var H=0,F=0,U=0,B=_,N=u-w*_,J=S-p*u,Z=C,V=E-w*C,W=L-p*E;for(U=0;U<m;++U){for(F=0;F<p;++F){for(H=0;H<w;++H)c[f]=x[g]*y,f+=B,g+=Z;f+=N,g+=V}f+=J,g+=W}}}}},"float32,1,0,float32,1,0":function(){return function(i,c,h,f,x,v,g){var y=i[0],p=i[1],w=h[1],S=v[1];f|=0,g|=0;var _=0,E=0,L=w,C=h[0]-p*w,P=S,I=v[0]-p*S;for(E=0;E<y;++E){for(_=0;_<p;++_)c[f]=x[g],f+=L,g+=P;f+=C,g+=I}}},"float32,1,0,float32,0,1":function(){return function(i,c,h,f,x,v,g){for(var y=i[0],p=i[1],m=h[0],w=h[1],u=v[0],S=v[1],_=f|=0,E=g|=0,L=0|i[1];L>0;){L<64?(p=L,L=0):(p=64,L-=64);for(var C=0|i[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),f=_+L*w+C*m,g=E+L*S+C*u;var P=0,I=0,j=w,R=m-p*w,H=S,F=u-p*S;for(I=0;I<y;++I){for(P=0;P<p;++P)c[f]=x[g],f+=j,g+=H;f+=R,g+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,c,h,f,x,v,g){for(var y=i[0],p=i[1],m=i[2],w=h[0],u=h[1],S=h[2],_=v[0],E=v[1],L=v[2],C=f|=0,P=g|=0,I=0|i[2];I>0;){I<64?(m=I,I=0):(m=64,I-=64);for(var j=0|i[0];j>0;){j<64?(y=j,j=0):(y=64,j-=64);for(var R=0|i[1];R>0;){R<64?(p=R,R=0):(p=64,R-=64),f=C+I*S+j*w+R*u,g=P+I*L+j*_+R*E;var H=0,F=0,U=0,B=S,N=w-m*S,J=u-y*w,Z=L,V=_-m*L,W=E-y*_;for(U=0;U<p;++U){for(F=0;F<y;++F){for(H=0;H<m;++H)c[f]=x[g],f+=B,g+=Z;f+=N,g+=V}f+=J,g+=W}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,c,h,f,x,v,g){var y=i[0],p=i[1],m=i[2],w=h[0],S=h[2],_=v[0],L=v[2];f|=0,g|=0;var C=0,P=0,I=0,j=S,R=w-m*S,H=h[1]-y*w,F=L,U=_-m*L,B=v[1]-y*_;for(I=0;I<p;++I){for(P=0;P<y;++P){for(C=0;C<m;++C)c[f]=x[g],f+=j,g+=F;f+=R,g+=U}f+=H,g+=B}}}},o=function(i,c){var h=c.join(",");return(0,t[h])()},r={mul:function(i){var c={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=x.dtype,w=x.order,u=[v,g.join(),y,p.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,p,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x.data,x.stride,0|x.offset)}},muls:function(i){var c={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x)}},mulseq:function(i){var c={};return function(h,f){var x=h.dtype,v=h.order,g=[x,v.join()].join(),y=c[g];return y||(c[g]=y=i([x,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},div:function(i){var c={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=x.dtype,w=x.order,u=[v,g.join(),y,p.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,p,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x.data,x.stride,0|x.offset)}},divs:function(i){var c={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x)}},divseq:function(i){var c={};return function(h,f){var x=h.dtype,v=h.order,g=[x,v.join()].join(),y=c[g];return y||(c[g]=y=i([x,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},assign:function(i){var c={};return function(h,f){var x=h.dtype,v=h.order,g=f.dtype,y=f.order,p=[x,v.join(),g,y.join()].join(),m=c[p];return m||(c[p]=m=i([x,v,g,y])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset)}}};function n(i){return(0,r[(c={funcName:i.funcName}).funcName])(o.bind(void 0,c));var c}var a={mul:"*",div:"/"};(function(){for(var i in a)s[i]=n({funcName:i}),s[i+"s"]=n({funcName:i+"s"}),s[i+"seq"]=n({funcName:i+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(d,s,t){"use strict";var o=t(5050),r=t(9262);d.exports=function(n,a){for(var i=[],c=n,h=1;Array.isArray(c);)i.push(c.length),h*=c.length,c=c[0];return 0===i.length?o():(a||(a=o(new Float64Array(h),i)),r(a,n),a)}},9262:function(d){"use strict";var s,t;d.exports=(s=function(){return function(s,t,o,r,n){var a=s[0],i=s[1],c=s[2],f=o[1],x=o[2],v=[0,0,0];r|=0;var g=0,y=0,p=0,m=x,w=f-c*x,u=o[0]-i*f;for(p=0;p<a;++p){for(y=0;y<i;++y){for(g=0;g<c;++g){var S,_=n;for(S=0;S<v.length-1;++S)_=_[v[S]];t[r]=_[v[v.length-1]],r+=m,++v[2]}r+=w,v[2]-=c,++v[1]}r+=u,v[1]-=i,++v[0]}}}.bind(void 0,{funcName:"convert"}),t={},function(o,r){var n=o.dtype,a=o.order,i=[n,a.join()].join(),c=t[i];return c||(t[i]=c=s([n,a])),c(o.shape.slice(0),o.data,o.stride,0|o.offset,r)})},8139:function(d,s,t){"use strict";var o=t(5306);function r(c){return"uint32"===c?[o.mallocUint32,o.freeUint32]:null}var n={"uint32,1,0":function(c,h){return function(f,x,v,g,y,p,m,w,u,S,_){var E,L,C,P,I,j,R,H,F=f*y+g,U=c(w);for(E=f+1;E<=x;++E){for(L=E,C=F+=y,I=0,j=F,P=0;P<w;++P)U[I++]=v[j],j+=u;e:for(;L-- >f;){I=0,j=C-y;t:for(P=0;P<w;++P){if((R=v[j])<(H=U[I]))break e;if(R>H)break t;j+=S,I+=_}for(I=C,j=C-y,P=0;P<w;++P)v[I]=v[j],I+=u,j+=u;C-=y}for(I=C,j=0,P=0;P<w;++P)v[I]=U[j++],I+=u}h(U)}}},a={"uint32,1,0":function(c,h,f){return function x(v,g,y,p,m,w,u,S,_,E,L){var C,P,j,R,H,F,U,B,N,J,Z,V,W,X,K,ne,re,ae,le,pe,xe,ye,se,fe,Ee=(g-v+1)/6|0,de=v+Ee,we=g-Ee,ke=v+g>>1,Te=ke-Ee,$=ke+Ee,oe=de,he=Te,me=ke,Me=$,Ie=we,Pe=v+1,ze=g-1,ce=!0,ge=0,_e=0,De=0,He=S,Ve=h(He),nt=h(He);J=m*oe,Z=m*he,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=oe,oe=he,he=P;break e}if(De<0)break e;fe+=E}J=m*Me,Z=m*Ie,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=Me,Me=Ie,Ie=P;break e}if(De<0)break e;fe+=E}J=m*oe,Z=m*me,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=oe,oe=me,me=P;break e}if(De<0)break e;fe+=E}J=m*he,Z=m*me,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=he,he=me,me=P;break e}if(De<0)break e;fe+=E}J=m*oe,Z=m*Me,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=oe,oe=Me,Me=P;break e}if(De<0)break e;fe+=E}J=m*me,Z=m*Me,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=me,me=Me,Me=P;break e}if(De<0)break e;fe+=E}J=m*he,Z=m*Ie,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=he,he=Ie,Ie=P;break e}if(De<0)break e;fe+=E}J=m*he,Z=m*me,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=he,he=me,me=P;break e}if(De<0)break e;fe+=E}J=m*Me,Z=m*Ie,fe=p;e:for(N=0;N<S;++N){if((De=y[F=J+fe]-y[U=Z+fe])>0){P=Me,Me=Ie,Ie=P;break e}if(De<0)break e;fe+=E}for(J=m*oe,Z=m*he,V=m*me,W=m*Me,X=m*Ie,K=m*de,ne=m*ke,re=m*we,se=0,fe=p,N=0;N<S;++N)F=J+fe,B=V+fe,ae=W+fe,le=X+fe,pe=K+fe,xe=ne+fe,ye=re+fe,Ve[se]=y[U=Z+fe],nt[se]=y[ae],ce=ce&&Ve[se]===nt[se],j=y[B],R=y[le],y[pe]=y[F],y[xe]=j,y[ye]=R,++se,fe+=_;for(J=m*Te,Z=m*v,fe=p,N=0;N<S;++N)y[F=J+fe]=y[U=Z+fe],fe+=_;for(J=m*$,Z=m*g,fe=p,N=0;N<S;++N)y[F=J+fe]=y[U=Z+fe],fe+=_;if(ce)for(H=Pe;H<=ze;++H){for(F=p+H*m,se=0,N=0;N<S&&0==(De=y[F]-Ve[se]);++N)se+=L,F+=E;if(0!==De)if(De<0){if(H!==Pe)for(J=m*H,Z=m*Pe,fe=p,N=0;N<S;++N)C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=C,fe+=_;++Pe}else for(;;){for(F=p+ze*m,se=0,N=0;N<S&&0==(De=y[F]-Ve[se]);++N)se+=L,F+=E;if(!(De>0)){if(De<0){for(J=m*H,Z=m*Pe,V=m*ze,fe=p,N=0;N<S;++N)B=V+fe,C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=y[B],y[B]=C,fe+=_;++Pe,--ze;break}for(J=m*H,Z=m*ze,fe=p,N=0;N<S;++N)C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=C,fe+=_;--ze;break}ze--}}else for(H=Pe;H<=ze;++H){for(F=p+H*m,se=0,N=0;N<S&&0==(ge=y[F]-Ve[se]);++N)se+=L,F+=E;if(ge<0){if(H!==Pe)for(J=m*H,Z=m*Pe,fe=p,N=0;N<S;++N)C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=C,fe+=_;++Pe}else{for(F=p+H*m,se=0,N=0;N<S&&0==(_e=y[F]-nt[se]);++N)se+=L,F+=E;if(_e>0)for(;;){for(F=p+ze*m,se=0,N=0;N<S&&0==(De=y[F]-nt[se]);++N)se+=L,F+=E;if(!(De>0)){for(F=p+ze*m,se=0,N=0;N<S&&0==(De=y[F]-Ve[se]);++N)se+=L,F+=E;if(De<0){for(J=m*H,Z=m*Pe,V=m*ze,fe=p,N=0;N<S;++N)B=V+fe,C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=y[B],y[B]=C,fe+=_;++Pe,--ze}else{for(J=m*H,Z=m*ze,fe=p,N=0;N<S;++N)C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=C,fe+=_;--ze}break}if(--ze<H)break}}}for(J=m*v,Z=m*(Pe-1),se=0,fe=p,N=0;N<S;++N)y[F=J+fe]=y[U=Z+fe],y[U]=Ve[se],++se,fe+=_;for(J=m*g,Z=m*(ze+1),se=0,fe=p,N=0;N<S;++N)y[F=J+fe]=y[U=Z+fe],y[U]=nt[se],++se,fe+=_;if(Pe-2-v<=32?c(v,Pe-2,y,p,m,w,u,S,_,E,L):x(v,Pe-2,y,p,m,w,u,S,_,E,L),g-(ze+2)<=32?c(ze+2,g,y,p,m,w,u,S,_,E,L):x(ze+2,g,y,p,m,w,u,S,_,E,L),ce)return f(Ve),void f(nt);if(Pe<de&&ze>we){e:for(;;){for(F=p+Pe*m,se=0,fe=p,N=0;N<S;++N){if(y[F]!==Ve[se])break e;++se,F+=_}++Pe}e:for(;;){for(F=p+ze*m,se=0,fe=p,N=0;N<S;++N){if(y[F]!==nt[se])break e;++se,F+=_}--ze}for(H=Pe;H<=ze;++H){for(F=p+H*m,se=0,N=0;N<S&&0==(ge=y[F]-Ve[se]);++N)se+=L,F+=E;if(0===ge){if(H!==Pe)for(J=m*H,Z=m*Pe,fe=p,N=0;N<S;++N)C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=C,fe+=_;++Pe}else{for(F=p+H*m,se=0,N=0;N<S&&0==(_e=y[F]-nt[se]);++N)se+=L,F+=E;if(0===_e)for(;;){for(F=p+ze*m,se=0,N=0;N<S&&0==(De=y[F]-nt[se]);++N)se+=L,F+=E;if(0!==De){for(F=p+ze*m,se=0,N=0;N<S&&0==(De=y[F]-Ve[se]);++N)se+=L,F+=E;if(De<0){for(J=m*H,Z=m*Pe,V=m*ze,fe=p,N=0;N<S;++N)B=V+fe,C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=y[B],y[B]=C,fe+=_;++Pe,--ze}else{for(J=m*H,Z=m*ze,fe=p,N=0;N<S;++N)C=y[F=J+fe],y[F]=y[U=Z+fe],y[U]=C,fe+=_;--ze}break}if(--ze<H)break}}}}f(Ve),f(nt),ze-Pe<=32?c(Pe,ze,y,p,m,w,u,S,_,E,L):x(Pe,ze,y,p,m,w,u,S,_,E,L)}}},i={"uint32,1,0":function(c,h){return function(f){var x=f.data,v=0|f.offset,g=f.shape,y=f.stride,p=0|y[0],m=0|g[0],w=0|y[1],u=0|g[1],S=w,_=w;m<=32?c(0,m-1,x,v,p,w,m,u,S,_,1):h(0,m-1,x,v,p,w,m,u,S,_,1)}}};d.exports=function(c,h){var y,p,m,w,u,f=[h,c].join(","),x=i[f],v=(y=c,m=r(p=h),w=[p,y].join(","),u=n[w],m?u(m[0],m[1]):u()),g=function(y,p,m){var w=r(p),u=[p,y].join(","),S=a[u];return y.length>1&&w?S(m,w[0],w[1]):S(m)}(c,h,v);return x(v,g)}},8729:function(d,s,t){"use strict";var o=t(8139),r={};d.exports=function(n){var a=n.order,i=n.dtype,c=[a,i].join(":"),h=r[c];return h||(r[c]=h=o(a,i)),h(n),n}},5050:function(d,s,t){var o=t(4780),r=typeof Float64Array<"u";function n(f,x){return f[0]-x[0]}function a(){var f,x=this.stride,v=new Array(x.length);for(f=0;f<v.length;++f)v[f]=[Math.abs(x[f]),f];v.sort(n);var g=new Array(v.length);for(f=0;f<g.length;++f)g[f]=v[f][1];return g}var i={T:function(f){function x(g){this.data=g}var v=x.prototype;return v.dtype=f,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new x(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(g){return new x(g)}},0:function(f,x){function v(y,p){this.data=y,this.offset=p}var g=v.prototype;return g.dtype=f,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new v(this.data,this.offset)},g.pick=function(){return x(this.data)},g.valueOf=g.get=function(){return"generic"===f?this.data.get(this.offset):this.data[this.offset]},g.set=function(y){return"generic"===f?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,p,m,w){return new v(y,w)}},1:function(f,x,v){function g(p,m,w,u){this.data=p,this.shape=[m],this.stride=[w],this.offset=0|u}var y=g.prototype;return y.dtype=f,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(p,m){return"generic"===f?this.data.set(this.offset+this.stride[0]*p,m):this.data[this.offset+this.stride[0]*p]=m},y.get=function(p){return"generic"===f?this.data.get(this.offset+this.stride[0]*p):this.data[this.offset+this.stride[0]*p]},y.index=function(p){return this.offset+this.stride[0]*p},y.hi=function(p){return new g(this.data,"number"!=typeof p||p<0?this.shape[0]:0|p,this.stride[0],this.offset)},y.lo=function(p){var m=this.offset,w=0,u=this.shape[0],S=this.stride[0];return"number"==typeof p&&p>=0&&(m+=S*(w=0|p),u-=w),new g(this.data,u,S,m)},y.step=function(p){var m=this.shape[0],w=this.stride[0],u=this.offset,S=0,_=Math.ceil;return"number"==typeof p&&((S=0|p)<0?(u+=w*(m-1),m=_(-m/S)):m=_(m/S),w*=S),new g(this.data,m,w,u)},y.transpose=function(p){return new g(this.data,this.shape[p=void 0===p?0:0|p],this.stride[p],this.offset)},y.pick=function(p){var m=[],w=[],u=this.offset;return"number"==typeof p&&p>=0?u=u+this.stride[0]*p|0:(m.push(this.shape[0]),w.push(this.stride[0])),(0,x[m.length+1])(this.data,m,w,u)},function(p,m,w,u){return new g(p,m[0],w[0],u)}},2:function(f,x,v){function g(p,m,w,u,S,_){this.data=p,this.shape=[m,w],this.stride=[u,S],this.offset=0|_}var y=g.prototype;return y.dtype=f,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(p,m,w){return"generic"===f?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m,w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]=w},y.get=function(p,m){return"generic"===f?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]},y.index=function(p,m){return this.offset+this.stride[0]*p+this.stride[1]*m},y.hi=function(p,m){return new g(this.data,"number"!=typeof p||p<0?this.shape[0]:0|p,"number"!=typeof m||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(p,m){var w=this.offset,u=0,S=this.shape[0],_=this.shape[1],E=this.stride[0],L=this.stride[1];return"number"==typeof p&&p>=0&&(w+=E*(u=0|p),S-=u),"number"==typeof m&&m>=0&&(w+=L*(u=0|m),_-=u),new g(this.data,S,_,E,L,w)},y.step=function(p,m){var w=this.shape[0],u=this.shape[1],S=this.stride[0],_=this.stride[1],E=this.offset,L=0,C=Math.ceil;return"number"==typeof p&&((L=0|p)<0?(E+=S*(w-1),w=C(-w/L)):w=C(w/L),S*=L),"number"==typeof m&&((L=0|m)<0?(E+=_*(u-1),u=C(-u/L)):u=C(u/L),_*=L),new g(this.data,w,u,S,_,E)},y.transpose=function(p,m){var w=this.shape,u=this.stride;return new g(this.data,w[p=void 0===p?0:0|p],w[m=void 0===m?1:0|m],u[p],u[m],this.offset)},y.pick=function(p,m){var w=[],u=[],S=this.offset;return"number"==typeof p&&p>=0?S=S+this.stride[0]*p|0:(w.push(this.shape[0]),u.push(this.stride[0])),"number"==typeof m&&m>=0?S=S+this.stride[1]*m|0:(w.push(this.shape[1]),u.push(this.stride[1])),(0,x[w.length+1])(this.data,w,u,S)},function(p,m,w,u){return new g(p,m[0],m[1],w[0],w[1],u)}},3:function(f,x,v){function g(p,m,w,u,S,_,E,L){this.data=p,this.shape=[m,w,u],this.stride=[S,_,E],this.offset=0|L}var y=g.prototype;return y.dtype=f,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var p=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return p>m?m>w?[2,1,0]:p>w?[1,2,0]:[1,0,2]:p>w?[2,0,1]:w>m?[0,1,2]:[0,2,1]}}),y.set=function(p,m,w,u){return"generic"===f?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w,u):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]=u},y.get=function(p,m,w){return"generic"===f?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]},y.index=function(p,m,w){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w},y.hi=function(p,m,w){return new g(this.data,"number"!=typeof p||p<0?this.shape[0]:0|p,"number"!=typeof m||m<0?this.shape[1]:0|m,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(p,m,w){var u=this.offset,S=0,_=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],P=this.stride[1],I=this.stride[2];return"number"==typeof p&&p>=0&&(u+=C*(S=0|p),_-=S),"number"==typeof m&&m>=0&&(u+=P*(S=0|m),E-=S),"number"==typeof w&&w>=0&&(u+=I*(S=0|w),L-=S),new g(this.data,_,E,L,C,P,I,u)},y.step=function(p,m,w){var u=this.shape[0],S=this.shape[1],_=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],P=this.offset,I=0,j=Math.ceil;return"number"==typeof p&&((I=0|p)<0?(P+=E*(u-1),u=j(-u/I)):u=j(u/I),E*=I),"number"==typeof m&&((I=0|m)<0?(P+=L*(S-1),S=j(-S/I)):S=j(S/I),L*=I),"number"==typeof w&&((I=0|w)<0?(P+=C*(_-1),_=j(-_/I)):_=j(_/I),C*=I),new g(this.data,u,S,_,E,L,C,P)},y.transpose=function(p,m,w){var u=this.shape,S=this.stride;return new g(this.data,u[p=void 0===p?0:0|p],u[m=void 0===m?1:0|m],u[w=void 0===w?2:0|w],S[p],S[m],S[w],this.offset)},y.pick=function(p,m,w){var u=[],S=[],_=this.offset;return"number"==typeof p&&p>=0?_=_+this.stride[0]*p|0:(u.push(this.shape[0]),S.push(this.stride[0])),"number"==typeof m&&m>=0?_=_+this.stride[1]*m|0:(u.push(this.shape[1]),S.push(this.stride[1])),"number"==typeof w&&w>=0?_=_+this.stride[2]*w|0:(u.push(this.shape[2]),S.push(this.stride[2])),(0,x[u.length+1])(this.data,u,S,_)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],w[0],w[1],w[2],u)}},4:function(f,x,v){function g(p,m,w,u,S,_,E,L,C,P){this.data=p,this.shape=[m,w,u,S],this.stride=[_,E,L,C],this.offset=0|P}var y=g.prototype;return y.dtype=f,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,u,S){return"generic"===f?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u,S):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]=S},y.get=function(p,m,w,u){return"generic"===f?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]},y.index=function(p,m,w,u){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u},y.hi=function(p,m,w,u){return new g(this.data,"number"!=typeof p||p<0?this.shape[0]:0|p,"number"!=typeof m||m<0?this.shape[1]:0|m,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof u||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(p,m,w,u){var S=this.offset,_=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],P=this.shape[3],I=this.stride[0],j=this.stride[1],R=this.stride[2],H=this.stride[3];return"number"==typeof p&&p>=0&&(S+=I*(_=0|p),E-=_),"number"==typeof m&&m>=0&&(S+=j*(_=0|m),L-=_),"number"==typeof w&&w>=0&&(S+=R*(_=0|w),C-=_),"number"==typeof u&&u>=0&&(S+=H*(_=0|u),P-=_),new g(this.data,E,L,C,P,I,j,R,H,S)},y.step=function(p,m,w,u){var S=this.shape[0],_=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],P=this.stride[1],I=this.stride[2],j=this.stride[3],R=this.offset,H=0,F=Math.ceil;return"number"==typeof p&&((H=0|p)<0?(R+=C*(S-1),S=F(-S/H)):S=F(S/H),C*=H),"number"==typeof m&&((H=0|m)<0?(R+=P*(_-1),_=F(-_/H)):_=F(_/H),P*=H),"number"==typeof w&&((H=0|w)<0?(R+=I*(E-1),E=F(-E/H)):E=F(E/H),I*=H),"number"==typeof u&&((H=0|u)<0?(R+=j*(L-1),L=F(-L/H)):L=F(L/H),j*=H),new g(this.data,S,_,E,L,C,P,I,j,R)},y.transpose=function(p,m,w,u){var S=this.shape,_=this.stride;return new g(this.data,S[p=void 0===p?0:0|p],S[m=void 0===m?1:0|m],S[w=void 0===w?2:0|w],S[u=void 0===u?3:0|u],_[p],_[m],_[w],_[u],this.offset)},y.pick=function(p,m,w,u){var S=[],_=[],E=this.offset;return"number"==typeof p&&p>=0?E=E+this.stride[0]*p|0:(S.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof m&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof w&&w>=0?E=E+this.stride[2]*w|0:(S.push(this.shape[2]),_.push(this.stride[2])),"number"==typeof u&&u>=0?E=E+this.stride[3]*u|0:(S.push(this.shape[3]),_.push(this.stride[3])),(0,x[S.length+1])(this.data,S,_,E)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],m[3],w[0],w[1],w[2],w[3],u)}},5:function(f,x,v){function g(p,m,w,u,S,_,E,L,C,P,I,j){this.data=p,this.shape=[m,w,u,S,_],this.stride=[E,L,C,P,I],this.offset=0|j}var y=g.prototype;return y.dtype=f,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,u,S,_){return"generic"===f?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S,_):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]=_},y.get=function(p,m,w,u,S){return"generic"===f?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]},y.index=function(p,m,w,u,S){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S},y.hi=function(p,m,w,u,S){return new g(this.data,"number"!=typeof p||p<0?this.shape[0]:0|p,"number"!=typeof m||m<0?this.shape[1]:0|m,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof u||u<0?this.shape[3]:0|u,"number"!=typeof S||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(p,m,w,u,S){var _=this.offset,E=0,L=this.shape[0],C=this.shape[1],P=this.shape[2],I=this.shape[3],j=this.shape[4],R=this.stride[0],H=this.stride[1],F=this.stride[2],U=this.stride[3],B=this.stride[4];return"number"==typeof p&&p>=0&&(_+=R*(E=0|p),L-=E),"number"==typeof m&&m>=0&&(_+=H*(E=0|m),C-=E),"number"==typeof w&&w>=0&&(_+=F*(E=0|w),P-=E),"number"==typeof u&&u>=0&&(_+=U*(E=0|u),I-=E),"number"==typeof S&&S>=0&&(_+=B*(E=0|S),j-=E),new g(this.data,L,C,P,I,j,R,H,F,U,B,_)},y.step=function(p,m,w,u,S){var _=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],P=this.shape[4],I=this.stride[0],j=this.stride[1],R=this.stride[2],H=this.stride[3],F=this.stride[4],U=this.offset,B=0,N=Math.ceil;return"number"==typeof p&&((B=0|p)<0?(U+=I*(_-1),_=N(-_/B)):_=N(_/B),I*=B),"number"==typeof m&&((B=0|m)<0?(U+=j*(E-1),E=N(-E/B)):E=N(E/B),j*=B),"number"==typeof w&&((B=0|w)<0?(U+=R*(L-1),L=N(-L/B)):L=N(L/B),R*=B),"number"==typeof u&&((B=0|u)<0?(U+=H*(C-1),C=N(-C/B)):C=N(C/B),H*=B),"number"==typeof S&&((B=0|S)<0?(U+=F*(P-1),P=N(-P/B)):P=N(P/B),F*=B),new g(this.data,_,E,L,C,P,I,j,R,H,F,U)},y.transpose=function(p,m,w,u,S){var _=this.shape,E=this.stride;return new g(this.data,_[p=void 0===p?0:0|p],_[m=void 0===m?1:0|m],_[w=void 0===w?2:0|w],_[u=void 0===u?3:0|u],_[S=void 0===S?4:0|S],E[p],E[m],E[w],E[u],E[S],this.offset)},y.pick=function(p,m,w,u,S){var _=[],E=[],L=this.offset;return"number"==typeof p&&p>=0?L=L+this.stride[0]*p|0:(_.push(this.shape[0]),E.push(this.stride[0])),"number"==typeof m&&m>=0?L=L+this.stride[1]*m|0:(_.push(this.shape[1]),E.push(this.stride[1])),"number"==typeof w&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),E.push(this.stride[2])),"number"==typeof u&&u>=0?L=L+this.stride[3]*u|0:(_.push(this.shape[3]),E.push(this.stride[3])),"number"==typeof S&&S>=0?L=L+this.stride[4]*S|0:(_.push(this.shape[4]),E.push(this.stride[4])),(0,x[_.length+1])(this.data,_,E,L)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],m[3],m[4],w[0],w[1],w[2],w[3],w[4],u)}}};function c(f,x){var v=-1===x?"T":String(x),g=i[v];return-1===x?g(f):0===x?g(f,h[f][0]):g(f,h[f],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};d.exports=function(f,x,v,g){if(void 0===f)return(0,h.array[0])([]);"number"==typeof f&&(f=[f]),void 0===x&&(x=[f.length]);var y=x.length;if(void 0===v){v=new Array(y);for(var p=y-1,m=1;p>=0;--p)v[p]=m,m*=x[p]}if(void 0===g)for(g=0,p=0;p<y;++p)v[p]<0&&(g-=(x[p]-1)*v[p]);for(var w=function(S){if(o(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(f),u=h[w];u.length<=y+1;)u.push(c(w,u.length-1));return(0,u[y+1])(f,x,v,g)}},8551:function(d,s,t){"use strict";var o=t(8362),r=Math.pow(2,-1074),n=-1>>>0;d.exports=function(a,i){if(isNaN(a)||isNaN(i))return NaN;if(a===i)return a;if(0===a)return i<0?-r:r;var c=o.hi(a),h=o.lo(a);return i>a==a>0?h===n?(c+=1,h=0):h+=1:0===h?(h=n,c-=1):h-=1,o.pack(h,c)}},115:function(d,s){s.vertexNormals=function(t,o,r){for(var n=o.length,a=new Array(n),i=void 0===r?1e-6:r,c=0;c<n;++c)a[c]=[0,0,0];for(c=0;c<t.length;++c)for(var h=t[c],x=h[h.length-1],v=h[0],g=0;g<h.length;++g){for(var y=o[x],p=o[x=v],m=o[v=h[(g+1)%h.length]],w=new Array(3),u=0,S=new Array(3),_=0,E=0;E<3;++E)w[E]=y[E]-p[E],u+=w[E]*w[E],S[E]=m[E]-p[E],_+=S[E]*S[E];if(u*_>i){var L=a[x],C=1/Math.sqrt(u*_);for(E=0;E<3;++E){var P=(E+1)%3,I=(E+2)%3;L[E]+=C*(S[P]*w[I]-S[I]*w[P])}}}for(c=0;c<n;++c){L=a[c];var j=0;for(E=0;E<3;++E)j+=L[E]*L[E];if(j>i)for(C=1/Math.sqrt(j),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return a},s.faceNormals=function(t,o,r){for(var n=t.length,a=new Array(n),i=void 0===r?1e-6:r,c=0;c<n;++c){for(var h=t[c],f=new Array(3),x=0;x<3;++x)f[x]=o[h[x]];var v=new Array(3),g=new Array(3);for(x=0;x<3;++x)v[x]=f[1][x]-f[0][x],g[x]=f[2][x]-f[0][x];var y=new Array(3),p=0;for(x=0;x<3;++x){var m=(x+1)%3,w=(x+2)%3;y[x]=v[m]*g[w]-v[w]*g[m],p+=y[x]*y[x]}for(p=p>i?1/Math.sqrt(p):0,x=0;x<3;++x)y[x]*=p;a[c]=y}return a}},567:function(d){"use strict";d.exports=function(s,t,o,r,n,a,i,c,h,f){var x=t+a+f;if(v>0){var v=Math.sqrt(x+1);s[0]=.5*(i-h)/v,s[1]=.5*(c-r)/v,s[2]=.5*(o-a)/v,s[3]=.5*v}else{var g=Math.max(t,a,f);v=Math.sqrt(2*g-x+1),t>=g?(s[0]=.5*v,s[1]=.5*(n+o)/v,s[2]=.5*(c+r)/v,s[3]=.5*(i-h)/v):a>=g?(s[0]=.5*(o+n)/v,s[1]=.5*v,s[2]=.5*(h+i)/v,s[3]=.5*(c-r)/v):(s[0]=.5*(r+c)/v,s[1]=.5*(i+h)/v,s[2]=.5*v,s[3]=.5*(o-n)/v)}return s}},7774:function(d,s,t){"use strict";d.exports=function(g){var y=(g=g||{}).center||[0,0,0],p=g.rotation||[0,0,0,1],m=g.radius||1;y=[].slice.call(y,0,3),f(p=[].slice.call(p,0,4),p);var w=new x(p,y,Math.log(m));return w.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&w.lookAt(0,g.eye,g.center,g.up),w};var o=t(8444),r=t(3012),n=t(5950),a=t(7437),i=t(567);function c(g,y,p){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2))}function h(g,y,p,m){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2)+Math.pow(m,2))}function f(g,y){var p=y[0],m=y[1],w=y[2],u=y[3],S=h(p,m,w,u);S>1e-6?(g[0]=p/S,g[1]=m/S,g[2]=w/S,g[3]=u/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function x(g,y,p){this.radius=o([p]),this.center=o(y),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=x.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var y=this.computedRotation;f(y,y);var p=this.computedMatrix;n(p,y);var m=this.computedCenter,w=this.computedEye,u=this.computedUp,S=Math.exp(this.computedRadius[0]);w[0]=m[0]+S*p[2],w[1]=m[1]+S*p[6],w[2]=m[2]+S*p[10],u[0]=p[1],u[1]=p[5],u[2]=p[9];for(var _=0;_<3;++_){for(var E=0,L=0;L<3;++L)E+=p[_+4*L]*w[L];p[12+_]=-E}},v.getMatrix=function(g,y){this.recalcMatrix(g);var p=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=p[m];return y}return p},v.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},v.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},v.pan=function(g,y,p,m){y=y||0,p=p||0,m=m||0,this.recalcMatrix(g);var w=this.computedMatrix,u=w[1],S=w[5],_=w[9],E=c(u,S,_),L=w[0],C=w[4],P=w[8],I=L*(u/=E)+C*(S/=E)+P*(_/=E),j=c(L-=u*I,C-=S*I,P-=_*I),R=w[2],H=w[6],F=w[10],U=R*u+H*S+F*_,B=R*(L/=j)+H*(C/=j)+F*(P/=j),N=c(R-=U*u+B*L,H-=U*S+B*C,F-=U*_+B*P);R/=N,H/=N,F/=N,this.center.move(g,L*y+u*p,C*y+S*p,P*y+_*p);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+m),this.radius.set(g,Math.log(W))},v.rotate=function(g,y,p,m){this.recalcMatrix(g);var w=this.computedMatrix,P=w[2],I=w[6],j=w[10],R=(y=y||0)*w[0]+(p=p||0)*w[1],H=y*w[4]+p*w[5],F=y*w[8]+p*w[9],U=-(I*F-j*H),B=-(j*R-P*F),N=-(P*H-I*R),J=Math.sqrt(Math.max(0,1-Math.pow(U,2)-Math.pow(B,2)-Math.pow(N,2))),Z=h(U,B,N,J);Z>1e-6?(U/=Z,B/=Z,N/=Z,J/=Z):(U=B=N=0,J=1);var V=this.computedRotation,W=V[0],X=V[1],K=V[2],ne=V[3],re=W*J+ne*U+X*N-K*B,ae=X*J+ne*B+K*U-W*N,le=K*J+ne*N+W*B-X*U,pe=ne*J-W*U-X*B-K*N;if(m){U=P,B=I,N=j;var xe=Math.sin(m)/c(U,B,N);U*=xe,B*=xe,N*=xe,pe=pe*(J=Math.cos(y))-(re=re*J+pe*U+ae*N-le*B)*U-(ae=ae*J+pe*B+le*U-re*N)*B-(le=le*J+pe*N+re*B-ae*U)*N}var ye=h(re,ae,le,pe);ye>1e-6?(re/=ye,ae/=ye,le/=ye,pe/=ye):(re=ae=le=0,pe=1),this.rotation.set(g,re,ae,le,pe)},v.lookAt=function(g,y,p,m){this.recalcMatrix(g);var w=this.computedMatrix;r(w,y=y||this.computedEye,p=p||this.computedCenter,m=m||this.computedUp);var u=this.computedRotation;i(u,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),f(u,u),this.rotation.set(g,u[0],u[1],u[2],u[3]);for(var S=0,_=0;_<3;++_)S+=Math.pow(p[_]-y[_],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,p[0],p[1],p[2])},v.translate=function(g,y,p,m){this.center.move(g,y||0,p||0,m||0)},v.setMatrix=function(g,y){var p=this.computedRotation;i(p,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),f(p,p),this.rotation.set(g,p[0],p[1],p[2],p[3]);var m=this.computedMatrix;a(m,y);var w=m[15];if(Math.abs(w)>1e-6){var u=m[12]/w,S=m[13]/w,_=m[14]/w;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,u-m[2]*E,S-m[6]*E,_-m[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},v.setDistance=function(g,y){y>0&&this.radius.set(g,Math.log(y))},v.setDistanceLimits=function(g,y){g=g>0?Math.log(g):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(g){var y=this.radius.bounds;return g?(g[0]=Math.exp(y[0][0]),g[1]=Math.exp(y[1][0]),g):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(g){var y=this.lastT(),p=g.center;p&&this.center.set(y,p[0],p[1],p[2]);var m=g.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var w=g.distance;w&&w>0&&this.radius.set(y,Math.log(w)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},4930:function(d,s,t){"use strict";var o=t(6184);d.exports=function(r,n,a){return o(a=void 0!==a?a+"":" ",n)+r}},4405:function(d){d.exports=function(s,t){t||(t=[0,""]),s=String(s);var o=parseFloat(s,10);return t[0]=o,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(d,s,t){"use strict";d.exports=function(r,n){for(var a=0|n.length,i=r.length,c=[new Array(a),new Array(a)],h=0;h<a;++h)c[0][h]=[],c[1][h]=[];for(h=0;h<i;++h){var f=r[h];c[0][f[0]].push(f),c[1][f[1]].push(f)}var _,x=[];for(h=0;h<a;++h)c[0][h].length+c[1][h].length===0&&x.push([h]);function v(S,_){var E=c[_][S[_]];E.splice(E.indexOf(S),1)}function g(S,_,E){for(var L,C,P,I=0;I<2;++I)if(c[I][_].length>0){L=c[I][_][0],P=I;break}C=L[1^P];for(var j=0;j<2;++j)for(var R=c[j][_],H=0;H<R.length;++H){var F=R[H],U=F[1^j];o(n[S],n[_],n[C],n[U])>0&&(L=F,C=U,P=j)}return E||L&&v(L,P),C}function y(S,_){var E=c[_][S][0],L=[S];v(E,_);for(var C=E[1^_];;){for(;C!==S;)L.push(C),C=g(L[L.length-2],C,!1);if(c[0][S].length+c[1][S].length===0)break;var P=L[L.length-1],I=S,j=L[1],R=g(P,I,!0);if(o(n[P],n[I],n[j],n[R])<0)break;L.push(S),C=g(P,I)}return L}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var w=[];c[m][h].length>0;){var u=y(h,m);(_=u)[1]===_[_.length-1]?w.push.apply(w,u):(w.length>0&&x.push(w),w=u)}w.length>0&&x.push(w)}return x};var o=t(9398)},3959:function(d,s,t){"use strict";d.exports=function(r,n){for(var a=o(r,n.length),i=new Array(n.length),c=new Array(n.length),h=[],f=0;f<n.length;++f){var x=a[f].length;c[f]=x,i[f]=!0,x<=1&&h.push(f)}for(;h.length>0;){var v=h.pop();i[v]=!1;var g=a[v];for(f=0;f<g.length;++f){var y=g[f];0==--c[y]&&h.push(y)}}var p=new Array(n.length),m=[];for(f=0;f<n.length;++f)i[f]?(p[f]=v=m.length,m.push(n[f])):p[f]=-1;var w=[];for(f=0;f<r.length;++f){var u=r[f];i[u[0]]&&i[u[1]]&&w.push([p[u[0]],p[u[1]]])}return[w,m]};var o=t(8348)},8040:function(d,s,t){"use strict";d.exports=function(x,v){for(var g=h(x,v),y=(v=g[1]).length,p=o(x=g[0],v.length),m=0;m<y;++m)if(p[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(x,v),u=(w=w.filter(function(Ee){for(var de=Ee.length,we=[0],ke=0;ke<de;++ke){var Te=v[Ee[ke]],$=v[Ee[(ke+1)%de]],oe=a(-Te[0],Te[1]),he=a(-Te[0],$[1]),me=a($[0],Te[1]),Me=a($[0],$[1]);we=i(we,i(i(oe,he),i(me,Me)))}return we[we.length-1]>0})).length,S=new Array(u),_=new Array(u);for(m=0;m<u;++m){S[m]=m;var E=new Array(u),L=w[m].map(function(Ee){return v[Ee]}),C=n([L]),P=0;e:for(var I=0;I<u;++I)if(E[I]=0,m!==I){for(var j=(se=w[I]).length,R=0;R<j;++R){var H=C(v[se[R]]);if(0!==H){H<0&&(E[I]=1,P+=1);continue e}}E[I]=1,P+=1}_[m]=[P,m,E]}for(_.sort(function(Ee,de){return de[0]-Ee[0]}),m=0;m<u;++m){var F=(E=_[m])[1],U=E[2];for(I=0;I<u;++I)U[I]&&(S[I]=F)}var B=function(Ee){for(var de=new Array(Ee),we=0;we<Ee;++we)de[we]=[];return de}(u);for(m=0;m<u;++m)B[m].push(S[m]),B[S[m]].push(m);var N={},J=f(y,!1);for(m=0;m<u;++m)for(j=(se=w[m]).length,I=0;I<j;++I){var Z=se[I],V=se[(I+1)%j],W=Math.min(Z,V)+":"+Math.max(Z,V);if(W in N){var X=N[W];B[X].push(m),B[m].push(X),J[Z]=J[V]=!0}else N[W]=m}function K(Ee){for(var de=Ee.length,we=0;we<de;++we)if(!J[Ee[we]])return!1;return!0}var ne=[],re=f(u,-1);for(m=0;m<u;++m)S[m]!==m||K(w[m])?re[m]=-1:(ne.push(m),re[m]=0);for(g=[];ne.length>0;){var ae=ne.pop(),le=B[ae];c(le,function(Ee,de){return Ee-de});var pe,xe=le.length,ye=re[ae];if(0===ye){var se=w[ae];pe=[se]}for(m=0;m<xe;++m){var fe=le[m];re[fe]>=0||(re[fe]=1^ye,ne.push(fe),0===ye&&(K(se=w[fe])||(se.reverse(),pe.push(se))))}0===ye&&g.push(pe)}return g};var o=t(8348),r=t(4166),n=t(211),a=t(9660),i=t(9662),c=t(1215),h=t(3959);function f(x,v){for(var g=new Array(x),y=0;y<x;++y)g[y]=v;return g}},211:function(d,s,t){d.exports=function(f){for(var x=f.length,v=[],g=[],y=0;y<x;++y)for(var p=f[y],m=p.length,w=m-1,u=0;u<m;w=u++){var S=p[w],_=p[u];S[0]===_[0]?g.push([S,_]):v.push([S,_])}if(0===v.length)return 0===g.length?h:(E=c(g),function(P){return E(P[0],P[1])?0:1});var E,P,I,L=r(v),C=(P=L.slabs,I=L.coordinates,function(j){var R=a.le(I,j[0]);if(R<0)return 1;var H=P[R];if(!H){if(!(R>0&&I[R]===j[0]))return 1;H=P[R-1]}for(var F=1;H;){var U=H.key,B=o(j,U[0],U[1]);if(U[0][0]<U[1][0])if(B<0)H=H.left;else{if(!(B>0))return 0;F=-1,H=H.right}else if(B>0)H=H.left;else{if(!(B<0))return 0;F=1,H=H.right}}return F});return 0===g.length?C:function(P,I){return function(j){return P(j[0],j[1])?0:I(j)}}(c(g),C)};var o=t(417)[3],r=t(4385),n=t(9014),a=t(5070);function i(){return!0}function c(f){for(var x={},v=0;v<f.length;++v){var g=f[v],y=g[0][0],p=g[0][1],m=g[1][1],w=[Math.min(p,m),Math.max(p,m)];y in x?x[y].push(w):x[y]=[w]}var E,u={},S=Object.keys(x);for(v=0;v<S.length;++v)u[S[v]]=n(x[S[v]]);return E=u,function(L,C){var P=E[L];return!!P&&!!P.queryPoint(C,i)}}function h(f){return 1}},7309:function(d){"use strict";var s=new Float64Array(4),t=new Float64Array(4),o=new Float64Array(4);d.exports=function(r,n,a,i,c){s.length<i.length&&(s=new Float64Array(i.length),t=new Float64Array(i.length),o=new Float64Array(i.length));for(var h=0;h<i.length;++h)s[h]=r[h]-i[h],t[h]=n[h]-r[h],o[h]=a[h]-r[h];var f=0,x=0,v=0,g=0,y=0,p=0;for(h=0;h<i.length;++h){var m=t[h],w=o[h],u=s[h];f+=m*m,x+=m*w,v+=w*w,g+=u*m,y+=u*w,p+=u*u}var S,_,E,L,C,P=Math.abs(f*v-x*x),I=x*y-v*g,j=x*g-f*y;if(I+j<=P)if(I<0)j<0&&g<0?(j=0,-g>=f?(I=1,S=f+2*g+p):S=g*(I=-g/f)+p):(I=0,y>=0?(j=0,S=p):-y>=v?(j=1,S=v+2*y+p):S=y*(j=-y/v)+p);else if(j<0)j=0,g>=0?(I=0,S=p):-g>=f?(I=1,S=f+2*g+p):S=g*(I=-g/f)+p;else{var R=1/P;S=(I*=R)*(f*I+x*(j*=R)+2*g)+j*(x*I+v*j+2*y)+p}else I<0?(E=v+y)>(_=x+g)?(L=E-_)>=(C=f-2*x+v)?(I=1,j=0,S=f+2*g+p):S=(I=L/C)*(f*I+x*(j=1-I)+2*g)+j*(x*I+v*j+2*y)+p:(I=0,E<=0?(j=1,S=v+2*y+p):y>=0?(j=0,S=p):S=y*(j=-y/v)+p):j<0?(E=f+g)>(_=x+y)?(L=E-_)>=(C=f-2*x+v)?(j=1,I=0,S=v+2*y+p):S=(I=1-(j=L/C))*(f*I+x*j+2*g)+j*(x*I+v*j+2*y)+p:(j=0,E<=0?(I=1,S=f+2*g+p):g>=0?(I=0,S=p):S=g*(I=-g/f)+p):(L=v+y-x-g)<=0?(I=0,j=1,S=v+2*y+p):L>=(C=f-2*x+v)?(I=1,j=0,S=f+2*g+p):S=(I=L/C)*(f*I+x*(j=1-I)+2*g)+j*(x*I+v*j+2*y)+p;var H=1-I-j;for(h=0;h<i.length;++h)c[h]=H*r[h]+I*n[h]+j*a[h];return S<0?0:S}},1116:function(d,s,t){d.exports=t(6093)},7584:function(d,s,t){"use strict";var o=t(1539);d.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},2826:function(d,s,t){"use strict";d.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=o(r[a]);return n};var o=t(5125)},4469:function(d,s,t){"use strict";var o=t(5125),r=t(3962);d.exports=function(n,a){for(var i=o(a),c=n.length,h=new Array(c),f=0;f<c;++f)h[f]=r(n[f],i);return h}},6695:function(d,s,t){"use strict";var o=t(4354);d.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},7037:function(d,s,t){"use strict";var o=t(9209),r=t(1284),n=t(9887);d.exports=function(a){a.sort(r);for(var i=a.length,c=0,h=0;h<i;++h){var f=a[h],x=n(f);if(0!==x){if(c>0){var v=a[c-1];if(0===o(f,v)&&n(v)!==x){c-=1;continue}}a[c++]=f}}return a.length=c,a}},6184:function(d){"use strict";var s,t="";d.exports=function(o,r){if("string"!=typeof o)throw new TypeError("expected a string");if(1===r)return o;if(2===r)return o+o;var n=o.length*r;if(s!==o||void 0===s)s=o,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=o),r>>=1,o+=o;return t=(t+=o).substr(0,n)}},8161:function(d,s,t){d.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(d){"use strict";d.exports=function(s){for(var t=s.length,o=s[s.length-1],r=t,n=t-2;n>=0;--n){var a=o,i=s[n];(h=i-((o=a+i)-a))&&(s[--r]=o,o=h)}var c=0;for(n=r;n<t;++n){var h;(h=(i=o)-((o=(a=s[n])+i)-a))&&(s[c++]=h)}return s[c++]=o,s.length=c,s}},8167:function(d,s,t){"use strict";var o=t(9660),r=t(9662),n=t(8289),a=t(402);function i(y,p,m,w){return function(u){return w(y(m(u[0][0],u[1][1]),m(-u[0][1],u[1][0])))}}function c(y,p,m,w){return function(u){return w(y(p(y(m(u[1][1],u[2][2]),m(-u[1][2],u[2][1])),u[0][0]),y(p(y(m(u[1][0],u[2][2]),m(-u[1][2],u[2][0])),-u[0][1]),p(y(m(u[1][0],u[2][1]),m(-u[1][1],u[2][0])),u[0][2]))))}}function h(y,p,m,w){return function(u){return w(y(y(p(y(p(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][1]),y(p(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),-u[1][2]),p(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),p(y(p(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][0]),y(p(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][2]),p(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),y(p(y(p(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),u[1][0]),y(p(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][1]),p(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),p(y(p(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][0]),y(p(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),-u[1][1]),p(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function f(y,p,m,w){return function(u){return w(y(y(p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),y(p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),y(p(y(y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),p(y(p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),p(y(y(p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),p(y(p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function x(y){return(2===y?i:3===y?c:4===y?h:5===y?f:void 0)(r,n,o,a)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function g(y,p,m,w,u,S,_,E){return function(L){switch(L.length){case 0:return y(L);case 1:return p(L);case 2:return m(L);case 3:return w(L);case 4:return u(L);case 5:return S(L)}var C=_[L.length];return C||(C=_[L.length]=E(L.length)),C(L)}}!function(){for(;v.length<6;)v.push(x(v.length));d.exports=g.apply(void 0,v.concat([v,x]));for(var y=0;y<v.length;++y)d.exports[y]=v[y]}()},9130:function(d,s,t){"use strict";var o=t(9660),r=t(9662);d.exports=function(n,a){for(var i=o(n[0],a[0]),c=1;c<n.length;++c)i=r(i,o(n[c],a[c]));return i}},2227:function(d,s,t){"use strict";var o=t(9660),r=t(9662),n=t(4078),a=t(8289);function i(p){return(3===p?c:4===p?h:5===p?f:x)(r,n,o,a)}function c(p,m,w,u){return function(S,_,E){var L=w(S[0],S[0]),C=u(L,_[0]),P=u(L,E[0]),I=w(_[0],_[0]),j=u(I,S[0]),R=u(I,E[0]),H=w(E[0],E[0]),F=u(H,S[0]),U=u(H,_[0]),B=p(m(U,R),m(j,C)),N=m(F,P),J=m(B,N);return J[J.length-1]}}function h(p,m,w,u){return function(S,_,E,L){var C=p(w(S[0],S[0]),w(S[1],S[1])),P=u(C,_[0]),I=u(C,E[0]),j=u(C,L[0]),R=p(w(_[0],_[0]),w(_[1],_[1])),H=u(R,S[0]),F=u(R,E[0]),U=u(R,L[0]),B=p(w(E[0],E[0]),w(E[1],E[1])),N=u(B,S[0]),J=u(B,_[0]),Z=u(B,L[0]),V=p(w(L[0],L[0]),w(L[1],L[1])),W=u(V,S[0]),X=u(V,_[0]),K=u(V,E[0]),ne=p(p(u(m(K,Z),_[1]),p(u(m(X,U),-E[1]),u(m(J,F),L[1]))),p(u(m(X,U),S[1]),p(u(m(W,j),-_[1]),u(m(H,P),L[1])))),re=p(p(u(m(K,Z),S[1]),p(u(m(W,j),-E[1]),u(m(N,I),L[1]))),p(u(m(J,F),S[1]),p(u(m(N,I),-_[1]),u(m(H,P),E[1])))),ae=m(ne,re);return ae[ae.length-1]}}function f(p,m,w,u){return function(S,_,E,L,C){var P=p(w(S[0],S[0]),p(w(S[1],S[1]),w(S[2],S[2]))),I=u(P,_[0]),j=u(P,E[0]),R=u(P,L[0]),H=u(P,C[0]),F=p(w(_[0],_[0]),p(w(_[1],_[1]),w(_[2],_[2]))),U=u(F,S[0]),B=u(F,E[0]),N=u(F,L[0]),J=u(F,C[0]),Z=p(w(E[0],E[0]),p(w(E[1],E[1]),w(E[2],E[2]))),V=u(Z,S[0]),W=u(Z,_[0]),X=u(Z,L[0]),K=u(Z,C[0]),ne=p(w(L[0],L[0]),p(w(L[1],L[1]),w(L[2],L[2]))),re=u(ne,S[0]),ae=u(ne,_[0]),le=u(ne,E[0]),pe=u(ne,C[0]),xe=p(w(C[0],C[0]),p(w(C[1],C[1]),w(C[2],C[2]))),ye=u(xe,S[0]),se=u(xe,_[0]),fe=u(xe,E[0]),Ee=u(xe,L[0]),de=p(p(p(u(p(u(m(Ee,pe),E[1]),p(u(m(fe,K),-L[1]),u(m(le,X),C[1]))),_[2]),p(u(p(u(m(Ee,pe),_[1]),p(u(m(se,J),-L[1]),u(m(ae,N),C[1]))),-E[2]),u(p(u(m(fe,K),_[1]),p(u(m(se,J),-E[1]),u(m(W,B),C[1]))),L[2]))),p(u(p(u(m(le,X),_[1]),p(u(m(ae,N),-E[1]),u(m(W,B),L[1]))),-C[2]),p(u(p(u(m(Ee,pe),_[1]),p(u(m(se,J),-L[1]),u(m(ae,N),C[1]))),S[2]),u(p(u(m(Ee,pe),S[1]),p(u(m(ye,H),-L[1]),u(m(re,R),C[1]))),-_[2])))),p(p(u(p(u(m(se,J),S[1]),p(u(m(ye,H),-_[1]),u(m(U,I),C[1]))),L[2]),p(u(p(u(m(ae,N),S[1]),p(u(m(re,R),-_[1]),u(m(U,I),L[1]))),-C[2]),u(p(u(m(le,X),_[1]),p(u(m(ae,N),-E[1]),u(m(W,B),L[1]))),S[2]))),p(u(p(u(m(le,X),S[1]),p(u(m(re,R),-E[1]),u(m(V,j),L[1]))),-_[2]),p(u(p(u(m(ae,N),S[1]),p(u(m(re,R),-_[1]),u(m(U,I),L[1]))),E[2]),u(p(u(m(W,B),S[1]),p(u(m(V,j),-_[1]),u(m(U,I),E[1]))),-L[2]))))),we=p(p(p(u(p(u(m(Ee,pe),E[1]),p(u(m(fe,K),-L[1]),u(m(le,X),C[1]))),S[2]),u(p(u(m(Ee,pe),S[1]),p(u(m(ye,H),-L[1]),u(m(re,R),C[1]))),-E[2])),p(u(p(u(m(fe,K),S[1]),p(u(m(ye,H),-E[1]),u(m(V,j),C[1]))),L[2]),u(p(u(m(le,X),S[1]),p(u(m(re,R),-E[1]),u(m(V,j),L[1]))),-C[2]))),p(p(u(p(u(m(fe,K),_[1]),p(u(m(se,J),-E[1]),u(m(W,B),C[1]))),S[2]),u(p(u(m(fe,K),S[1]),p(u(m(ye,H),-E[1]),u(m(V,j),C[1]))),-_[2])),p(u(p(u(m(se,J),S[1]),p(u(m(ye,H),-_[1]),u(m(U,I),C[1]))),E[2]),u(p(u(m(W,B),S[1]),p(u(m(V,j),-_[1]),u(m(U,I),E[1]))),-C[2])))),ke=m(de,we);return ke[ke.length-1]}}function x(p,m,w,u){return function(S,_,E,L,C,P){var I=p(p(w(S[0],S[0]),w(S[1],S[1])),p(w(S[2],S[2]),w(S[3],S[3]))),j=u(I,_[0]),R=u(I,E[0]),H=u(I,L[0]),F=u(I,C[0]),U=u(I,P[0]),B=p(p(w(_[0],_[0]),w(_[1],_[1])),p(w(_[2],_[2]),w(_[3],_[3]))),N=u(B,S[0]),J=u(B,E[0]),Z=u(B,L[0]),V=u(B,C[0]),W=u(B,P[0]),X=p(p(w(E[0],E[0]),w(E[1],E[1])),p(w(E[2],E[2]),w(E[3],E[3]))),K=u(X,S[0]),ne=u(X,_[0]),re=u(X,L[0]),ae=u(X,C[0]),le=u(X,P[0]),pe=p(p(w(L[0],L[0]),w(L[1],L[1])),p(w(L[2],L[2]),w(L[3],L[3]))),xe=u(pe,S[0]),ye=u(pe,_[0]),se=u(pe,E[0]),fe=u(pe,C[0]),Ee=u(pe,P[0]),de=p(p(w(C[0],C[0]),w(C[1],C[1])),p(w(C[2],C[2]),w(C[3],C[3]))),we=u(de,S[0]),ke=u(de,_[0]),Te=u(de,E[0]),$=u(de,L[0]),oe=u(de,P[0]),he=p(p(w(P[0],P[0]),w(P[1],P[1])),p(w(P[2],P[2]),w(P[3],P[3]))),me=u(he,S[0]),Me=u(he,_[0]),Ie=u(he,E[0]),Pe=u(he,L[0]),ze=u(he,C[0]),ce=p(p(p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Pe,Ee),-C[1]),u(m($,fe),P[1]))),E[2]),u(p(u(m(ze,oe),E[1]),p(u(m(Ie,le),-C[1]),u(m(Te,ae),P[1]))),-L[2])),p(u(p(u(m(Pe,Ee),E[1]),p(u(m(Ie,le),-L[1]),u(m(se,re),P[1]))),C[2]),u(p(u(m($,fe),E[1]),p(u(m(Te,ae),-L[1]),u(m(se,re),C[1]))),-P[2]))),_[3]),p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Pe,Ee),-C[1]),u(m($,fe),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(ke,V),P[1]))),-L[2])),p(u(p(u(m(Pe,Ee),_[1]),p(u(m(Me,W),-L[1]),u(m(ye,Z),P[1]))),C[2]),u(p(u(m($,fe),_[1]),p(u(m(ke,V),-L[1]),u(m(ye,Z),C[1]))),-P[2]))),-E[3]),u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Ie,le),-C[1]),u(m(Te,ae),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(ke,V),P[1]))),-E[2])),p(u(p(u(m(Ie,le),_[1]),p(u(m(Me,W),-E[1]),u(m(ne,J),P[1]))),C[2]),u(p(u(m(Te,ae),_[1]),p(u(m(ke,V),-E[1]),u(m(ne,J),C[1]))),-P[2]))),L[3]))),p(p(u(p(p(u(p(u(m(Pe,Ee),E[1]),p(u(m(Ie,le),-L[1]),u(m(se,re),P[1]))),_[2]),u(p(u(m(Pe,Ee),_[1]),p(u(m(Me,W),-L[1]),u(m(ye,Z),P[1]))),-E[2])),p(u(p(u(m(Ie,le),_[1]),p(u(m(Me,W),-E[1]),u(m(ne,J),P[1]))),L[2]),u(p(u(m(se,re),_[1]),p(u(m(ye,Z),-E[1]),u(m(ne,J),L[1]))),-P[2]))),-C[3]),u(p(p(u(p(u(m($,fe),E[1]),p(u(m(Te,ae),-L[1]),u(m(se,re),C[1]))),_[2]),u(p(u(m($,fe),_[1]),p(u(m(ke,V),-L[1]),u(m(ye,Z),C[1]))),-E[2])),p(u(p(u(m(Te,ae),_[1]),p(u(m(ke,V),-E[1]),u(m(ne,J),C[1]))),L[2]),u(p(u(m(se,re),_[1]),p(u(m(ye,Z),-E[1]),u(m(ne,J),L[1]))),-C[2]))),P[3])),p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Pe,Ee),-C[1]),u(m($,fe),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(ke,V),P[1]))),-L[2])),p(u(p(u(m(Pe,Ee),_[1]),p(u(m(Me,W),-L[1]),u(m(ye,Z),P[1]))),C[2]),u(p(u(m($,fe),_[1]),p(u(m(ke,V),-L[1]),u(m(ye,Z),C[1]))),-P[2]))),S[3]),u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Pe,Ee),-C[1]),u(m($,fe),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,U),-C[1]),u(m(we,F),P[1]))),-L[2])),p(u(p(u(m(Pe,Ee),S[1]),p(u(m(me,U),-L[1]),u(m(xe,H),P[1]))),C[2]),u(p(u(m($,fe),S[1]),p(u(m(we,F),-L[1]),u(m(xe,H),C[1]))),-P[2]))),-_[3])))),p(p(p(u(p(p(u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(ke,V),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,U),-C[1]),u(m(we,F),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,U),-_[1]),u(m(N,j),P[1]))),C[2]),u(p(u(m(ke,V),S[1]),p(u(m(we,F),-_[1]),u(m(N,j),C[1]))),-P[2]))),L[3]),u(p(p(u(p(u(m(Pe,Ee),_[1]),p(u(m(Me,W),-L[1]),u(m(ye,Z),P[1]))),S[2]),u(p(u(m(Pe,Ee),S[1]),p(u(m(me,U),-L[1]),u(m(xe,H),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,U),-_[1]),u(m(N,j),P[1]))),L[2]),u(p(u(m(ye,Z),S[1]),p(u(m(xe,H),-_[1]),u(m(N,j),L[1]))),-P[2]))),-C[3])),p(u(p(p(u(p(u(m($,fe),_[1]),p(u(m(ke,V),-L[1]),u(m(ye,Z),C[1]))),S[2]),u(p(u(m($,fe),S[1]),p(u(m(we,F),-L[1]),u(m(xe,H),C[1]))),-_[2])),p(u(p(u(m(ke,V),S[1]),p(u(m(we,F),-_[1]),u(m(N,j),C[1]))),L[2]),u(p(u(m(ye,Z),S[1]),p(u(m(xe,H),-_[1]),u(m(N,j),L[1]))),-C[2]))),P[3]),u(p(p(u(p(u(m(Pe,Ee),E[1]),p(u(m(Ie,le),-L[1]),u(m(se,re),P[1]))),_[2]),u(p(u(m(Pe,Ee),_[1]),p(u(m(Me,W),-L[1]),u(m(ye,Z),P[1]))),-E[2])),p(u(p(u(m(Ie,le),_[1]),p(u(m(Me,W),-E[1]),u(m(ne,J),P[1]))),L[2]),u(p(u(m(se,re),_[1]),p(u(m(ye,Z),-E[1]),u(m(ne,J),L[1]))),-P[2]))),S[3]))),p(p(u(p(p(u(p(u(m(Pe,Ee),E[1]),p(u(m(Ie,le),-L[1]),u(m(se,re),P[1]))),S[2]),u(p(u(m(Pe,Ee),S[1]),p(u(m(me,U),-L[1]),u(m(xe,H),P[1]))),-E[2])),p(u(p(u(m(Ie,le),S[1]),p(u(m(me,U),-E[1]),u(m(K,R),P[1]))),L[2]),u(p(u(m(se,re),S[1]),p(u(m(xe,H),-E[1]),u(m(K,R),L[1]))),-P[2]))),-_[3]),u(p(p(u(p(u(m(Pe,Ee),_[1]),p(u(m(Me,W),-L[1]),u(m(ye,Z),P[1]))),S[2]),u(p(u(m(Pe,Ee),S[1]),p(u(m(me,U),-L[1]),u(m(xe,H),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,U),-_[1]),u(m(N,j),P[1]))),L[2]),u(p(u(m(ye,Z),S[1]),p(u(m(xe,H),-_[1]),u(m(N,j),L[1]))),-P[2]))),E[3])),p(u(p(p(u(p(u(m(Ie,le),_[1]),p(u(m(Me,W),-E[1]),u(m(ne,J),P[1]))),S[2]),u(p(u(m(Ie,le),S[1]),p(u(m(me,U),-E[1]),u(m(K,R),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,U),-_[1]),u(m(N,j),P[1]))),E[2]),u(p(u(m(ne,J),S[1]),p(u(m(K,R),-_[1]),u(m(N,j),E[1]))),-P[2]))),-L[3]),u(p(p(u(p(u(m(se,re),_[1]),p(u(m(ye,Z),-E[1]),u(m(ne,J),L[1]))),S[2]),u(p(u(m(se,re),S[1]),p(u(m(xe,H),-E[1]),u(m(K,R),L[1]))),-_[2])),p(u(p(u(m(ye,Z),S[1]),p(u(m(xe,H),-_[1]),u(m(N,j),L[1]))),E[2]),u(p(u(m(ne,J),S[1]),p(u(m(K,R),-_[1]),u(m(N,j),E[1]))),-L[2]))),P[3]))))),ge=p(p(p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Pe,Ee),-C[1]),u(m($,fe),P[1]))),E[2]),u(p(u(m(ze,oe),E[1]),p(u(m(Ie,le),-C[1]),u(m(Te,ae),P[1]))),-L[2])),p(u(p(u(m(Pe,Ee),E[1]),p(u(m(Ie,le),-L[1]),u(m(se,re),P[1]))),C[2]),u(p(u(m($,fe),E[1]),p(u(m(Te,ae),-L[1]),u(m(se,re),C[1]))),-P[2]))),S[3]),p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Pe,Ee),-C[1]),u(m($,fe),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,U),-C[1]),u(m(we,F),P[1]))),-L[2])),p(u(p(u(m(Pe,Ee),S[1]),p(u(m(me,U),-L[1]),u(m(xe,H),P[1]))),C[2]),u(p(u(m($,fe),S[1]),p(u(m(we,F),-L[1]),u(m(xe,H),C[1]))),-P[2]))),-E[3]),u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Ie,le),-C[1]),u(m(Te,ae),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,U),-C[1]),u(m(we,F),P[1]))),-E[2])),p(u(p(u(m(Ie,le),S[1]),p(u(m(me,U),-E[1]),u(m(K,R),P[1]))),C[2]),u(p(u(m(Te,ae),S[1]),p(u(m(we,F),-E[1]),u(m(K,R),C[1]))),-P[2]))),L[3]))),p(p(u(p(p(u(p(u(m(Pe,Ee),E[1]),p(u(m(Ie,le),-L[1]),u(m(se,re),P[1]))),S[2]),u(p(u(m(Pe,Ee),S[1]),p(u(m(me,U),-L[1]),u(m(xe,H),P[1]))),-E[2])),p(u(p(u(m(Ie,le),S[1]),p(u(m(me,U),-E[1]),u(m(K,R),P[1]))),L[2]),u(p(u(m(se,re),S[1]),p(u(m(xe,H),-E[1]),u(m(K,R),L[1]))),-P[2]))),-C[3]),u(p(p(u(p(u(m($,fe),E[1]),p(u(m(Te,ae),-L[1]),u(m(se,re),C[1]))),S[2]),u(p(u(m($,fe),S[1]),p(u(m(we,F),-L[1]),u(m(xe,H),C[1]))),-E[2])),p(u(p(u(m(Te,ae),S[1]),p(u(m(we,F),-E[1]),u(m(K,R),C[1]))),L[2]),u(p(u(m(se,re),S[1]),p(u(m(xe,H),-E[1]),u(m(K,R),L[1]))),-C[2]))),P[3])),p(u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Ie,le),-C[1]),u(m(Te,ae),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(ke,V),P[1]))),-E[2])),p(u(p(u(m(Ie,le),_[1]),p(u(m(Me,W),-E[1]),u(m(ne,J),P[1]))),C[2]),u(p(u(m(Te,ae),_[1]),p(u(m(ke,V),-E[1]),u(m(ne,J),C[1]))),-P[2]))),S[3]),u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Ie,le),-C[1]),u(m(Te,ae),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,U),-C[1]),u(m(we,F),P[1]))),-E[2])),p(u(p(u(m(Ie,le),S[1]),p(u(m(me,U),-E[1]),u(m(K,R),P[1]))),C[2]),u(p(u(m(Te,ae),S[1]),p(u(m(we,F),-E[1]),u(m(K,R),C[1]))),-P[2]))),-_[3])))),p(p(p(u(p(p(u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(ke,V),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,U),-C[1]),u(m(we,F),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,U),-_[1]),u(m(N,j),P[1]))),C[2]),u(p(u(m(ke,V),S[1]),p(u(m(we,F),-_[1]),u(m(N,j),C[1]))),-P[2]))),E[3]),u(p(p(u(p(u(m(Ie,le),_[1]),p(u(m(Me,W),-E[1]),u(m(ne,J),P[1]))),S[2]),u(p(u(m(Ie,le),S[1]),p(u(m(me,U),-E[1]),u(m(K,R),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,U),-_[1]),u(m(N,j),P[1]))),E[2]),u(p(u(m(ne,J),S[1]),p(u(m(K,R),-_[1]),u(m(N,j),E[1]))),-P[2]))),-C[3])),p(u(p(p(u(p(u(m(Te,ae),_[1]),p(u(m(ke,V),-E[1]),u(m(ne,J),C[1]))),S[2]),u(p(u(m(Te,ae),S[1]),p(u(m(we,F),-E[1]),u(m(K,R),C[1]))),-_[2])),p(u(p(u(m(ke,V),S[1]),p(u(m(we,F),-_[1]),u(m(N,j),C[1]))),E[2]),u(p(u(m(ne,J),S[1]),p(u(m(K,R),-_[1]),u(m(N,j),E[1]))),-C[2]))),P[3]),u(p(p(u(p(u(m($,fe),E[1]),p(u(m(Te,ae),-L[1]),u(m(se,re),C[1]))),_[2]),u(p(u(m($,fe),_[1]),p(u(m(ke,V),-L[1]),u(m(ye,Z),C[1]))),-E[2])),p(u(p(u(m(Te,ae),_[1]),p(u(m(ke,V),-E[1]),u(m(ne,J),C[1]))),L[2]),u(p(u(m(se,re),_[1]),p(u(m(ye,Z),-E[1]),u(m(ne,J),L[1]))),-C[2]))),S[3]))),p(p(u(p(p(u(p(u(m($,fe),E[1]),p(u(m(Te,ae),-L[1]),u(m(se,re),C[1]))),S[2]),u(p(u(m($,fe),S[1]),p(u(m(we,F),-L[1]),u(m(xe,H),C[1]))),-E[2])),p(u(p(u(m(Te,ae),S[1]),p(u(m(we,F),-E[1]),u(m(K,R),C[1]))),L[2]),u(p(u(m(se,re),S[1]),p(u(m(xe,H),-E[1]),u(m(K,R),L[1]))),-C[2]))),-_[3]),u(p(p(u(p(u(m($,fe),_[1]),p(u(m(ke,V),-L[1]),u(m(ye,Z),C[1]))),S[2]),u(p(u(m($,fe),S[1]),p(u(m(we,F),-L[1]),u(m(xe,H),C[1]))),-_[2])),p(u(p(u(m(ke,V),S[1]),p(u(m(we,F),-_[1]),u(m(N,j),C[1]))),L[2]),u(p(u(m(ye,Z),S[1]),p(u(m(xe,H),-_[1]),u(m(N,j),L[1]))),-C[2]))),E[3])),p(u(p(p(u(p(u(m(Te,ae),_[1]),p(u(m(ke,V),-E[1]),u(m(ne,J),C[1]))),S[2]),u(p(u(m(Te,ae),S[1]),p(u(m(we,F),-E[1]),u(m(K,R),C[1]))),-_[2])),p(u(p(u(m(ke,V),S[1]),p(u(m(we,F),-_[1]),u(m(N,j),C[1]))),E[2]),u(p(u(m(ne,J),S[1]),p(u(m(K,R),-_[1]),u(m(N,j),E[1]))),-C[2]))),-L[3]),u(p(p(u(p(u(m(se,re),_[1]),p(u(m(ye,Z),-E[1]),u(m(ne,J),L[1]))),S[2]),u(p(u(m(se,re),S[1]),p(u(m(xe,H),-E[1]),u(m(K,R),L[1]))),-_[2])),p(u(p(u(m(ye,Z),S[1]),p(u(m(xe,H),-_[1]),u(m(N,j),L[1]))),E[2]),u(p(u(m(ne,J),S[1]),p(u(m(K,R),-_[1]),u(m(N,j),E[1]))),-L[2]))),C[3]))))),_e=m(ce,ge);return _e[_e.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function g(p){var m=v[p.length];return m||(m=v[p.length]=i(p.length)),m.apply(void 0,p)}function y(p,m,w,u,S,_,E,L){return function(C,P,I,j,R,H){switch(arguments.length){case 0:case 1:return 0;case 2:return u(C,P);case 3:return S(C,P,I);case 4:return _(C,P,I,j);case 5:return E(C,P,I,j,R);case 6:return L(C,P,I,j,R,H)}for(var F=new Array(arguments.length),U=0;U<arguments.length;++U)F[U]=arguments[U];return p(F)}}!function(){for(;v.length<=6;)v.push(i(v.length));d.exports=y.apply(void 0,[g].concat(v));for(var p=0;p<=6;++p)d.exports[p]=v[p]}()},6606:function(d,s,t){"use strict";var o=t(8167);function r(v){return(2===v?n:3===v?a:4===v?i:5===v?c:h)(v<6?o[v]:o)}function n(v){return function(g,y){return[v([[+y[0],+g[0][1]],[+y[1],+g[1][1]]]),v([[+g[0][0],+y[0]],[+g[1][0],+y[1]]]),v(g)]}}function a(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2]],[+y[1],+g[1][1],+g[1][2]],[+y[2],+g[2][1],+g[2][2]]]),v([[+g[0][0],+y[0],+g[0][2]],[+g[1][0],+y[1],+g[1][2]],[+g[2][0],+y[2],+g[2][2]]]),v([[+g[0][0],+g[0][1],+y[0]],[+g[1][0],+g[1][1],+y[1]],[+g[2][0],+g[2][1],+y[2]]]),v(g)]}}function i(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3]],[+y[1],+g[1][1],+g[1][2],+g[1][3]],[+y[2],+g[2][1],+g[2][2],+g[2][3]],[+y[3],+g[3][1],+g[3][2],+g[3][3]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3]],[+g[1][0],+y[1],+g[1][2],+g[1][3]],[+g[2][0],+y[2],+g[2][2],+g[2][3]],[+g[3][0],+y[3],+g[3][2],+g[3][3]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3]],[+g[1][0],+g[1][1],+y[1],+g[1][3]],[+g[2][0],+g[2][1],+y[2],+g[2][3]],[+g[3][0],+g[3][1],+y[3],+g[3][3]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+y[3]]]),v(g)]}}function c(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4]]]),v(g)]}}function h(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+y[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+y[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+y[5],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+y[5],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+y[5],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+y[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+y[5]]]),v(g)]}}var f=[function(){return[[0]]},function(v,g){return[[g[0]],[v[0][0]]]}];function x(v,g,y,p,m,w,u,S){return function(_,E){switch(_.length){case 0:return v(_,E);case 1:return g(_,E);case 2:return y(_,E);case 3:return p(_,E);case 4:return m(_,E);case 5:return w(_,E)}var L=u[_.length];return L||(L=u[_.length]=S(_.length)),L(_,E)}}!function(){for(;f.length<6;)f.push(r(f.length));d.exports=x.apply(void 0,f.concat([f,r]));for(var v=0;v<6;++v)d.exports[v]=f[v]}()},417:function(d,s,t){"use strict";var o=t(9660),r=t(9662),n=t(8289),a=t(4078);function i(m,w,u,S){return function(_,E,L){var C=m(m(w(E[1],L[0]),w(-L[1],E[0])),m(w(_[1],E[0]),w(-E[1],_[0]))),P=m(w(_[1],L[0]),w(-L[1],_[0])),I=S(C,P);return I[I.length-1]}}function c(m,w,u,S){return function(_,E,L,C){var P=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2])))),I=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2])))),j=S(P,I);return j[j.length-1]}}function h(m,w,u,S){return function(_,E,L,C,P){var I=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),E[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),-L[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),C[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),-P[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-E[3])))),m(m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),C[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),-P[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),_[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-E[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-C[3]))))),j=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-L[3])),m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),C[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-P[3]))),m(m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),_[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),-E[3])),m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-P[3])))),R=S(I,j);return R[R.length-1]}}function f(m){return(3===m?i:4===m?c:h)(r,o,n,a)}var x=f(3),v=f(4),g=[function(){return 0},function(){return 0},function(m,w){return w[0]-m[0]},function(m,w,u){var S,_=(m[1]-u[1])*(w[0]-u[0]),E=(m[0]-u[0])*(w[1]-u[1]),L=_-E;if(_>0){if(E<=0)return L;S=_+E}else{if(!(_<0)||E>=0)return L;S=-(_+E)}var C=33306690738754716e-32*S;return L>=C||L<=-C?L:x(m,w,u)},function(m,w,u,S){var _=m[0]-S[0],E=w[0]-S[0],L=u[0]-S[0],C=m[1]-S[1],P=w[1]-S[1],I=u[1]-S[1],j=m[2]-S[2],R=w[2]-S[2],H=u[2]-S[2],F=E*I,U=L*P,B=L*C,N=_*I,J=_*P,Z=E*C,V=j*(F-U)+R*(B-N)+H*(J-Z),W=7771561172376103e-31*((Math.abs(F)+Math.abs(U))*Math.abs(j)+(Math.abs(B)+Math.abs(N))*Math.abs(R)+(Math.abs(J)+Math.abs(Z))*Math.abs(H));return V>W||-V>W?V:v(m,w,u,S)}];function y(m){var w=g[m.length];return w||(w=g[m.length]=f(m.length)),w.apply(void 0,m)}function p(m,w,u,S,_,E,L){return function(C,P,I,j,R){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return _(C,P,I);case 4:return E(C,P,I,j);case 5:return L(C,P,I,j,R)}for(var H=new Array(arguments.length),F=0;F<arguments.length;++F)H[F]=arguments[F];return m(H)}}!function(){for(;g.length<=5;)g.push(f(g.length));d.exports=p.apply(void 0,[y].concat(g));for(var m=0;m<=5;++m)d.exports[m]=g[m]}()},2019:function(d,s,t){"use strict";var o=t(9662),r=t(8289);d.exports=function(n,a){if(1===n.length)return r(a,n[0]);if(1===a.length)return r(n,a[0]);if(0===n.length||0===a.length)return[0];var i=[0];if(n.length<a.length)for(var c=0;c<n.length;++c)i=o(i,r(a,n[c]));else for(c=0;c<a.length;++c)i=o(i,r(n,a[c]));return i}},8289:function(d,s,t){"use strict";var o=t(9660),r=t(87);d.exports=function(n,a){var i=n.length;if(1===i){var c=o(n[0],a);return c[0]?c:[c[1]]}var h=new Array(2*i),f=[.1,.1],x=[.1,.1],v=0;o(n[0],a,f),f[0]&&(h[v++]=f[0]);for(var g=1;g<i;++g){o(n[g],a,x),r(f[1],x[0],f),f[0]&&(h[v++]=f[0]);var p=x[1],m=f[1],w=p+m,u=m-(w-p);f[1]=w,u&&(h[v++]=u)}return f[1]&&(h[v++]=f[1]),0===v&&(h[v++]=0),h.length=v,h}},4434:function(d,s,t){"use strict";d.exports=function(r,n,a,i){var c=o(r,a,i),h=o(n,a,i);if(c>0&&h>0||c<0&&h<0)return!1;var f=o(a,r,n),x=o(i,r,n);return!(f>0&&x>0||f<0&&x<0)&&(0!==c||0!==h||0!==f||0!==x||function(v,g,y,p){for(var m=0;m<2;++m){var w=v[m],u=g[m],S=Math.min(w,u),_=Math.max(w,u),E=y[m],L=p[m],C=Math.min(E,L);if(Math.max(E,L)<S||_<C)return!1}return!0}(r,n,a,i))};var o=t(417)[3]},4078:function(d){"use strict";d.exports=function(s,t){var C,P,I,j,R,o=0|s.length,r=0|t.length;if(1===o&&1===r)return(R=(C=s[0])-((I=C+(P=-t[0]))-(j=I-C))+(P-j))?[R,I]:[I];var n,a,i=new Array(o+r),c=0,h=0,f=0,x=Math.abs,v=s[h],g=x(v),y=-t[f],p=x(y);g<p?(a=v,(h+=1)<o&&(g=x(v=s[h]))):(a=y,(f+=1)<r&&(p=x(y=-t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=-t[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=-t[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=-t[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},9662:function(d){"use strict";d.exports=function(s,t){var C,P,I,j,R,o=0|s.length,r=0|t.length;if(1===o&&1===r)return(R=(C=s[0])-((I=C+(P=t[0]))-(j=I-C))+(P-j))?[R,I]:[I];var n,a,i=new Array(o+r),c=0,h=0,f=0,x=Math.abs,v=s[h],g=x(v),y=t[f],p=x(y);g<p?(a=v,(h+=1)<o&&(g=x(v=s[h]))):(a=y,(f+=1)<r&&(p=x(y=t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=t[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=t[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=t[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},8691:function(d,s,t){"use strict";d.exports=function(n){return r(o(n))};var o=t(2692),r=t(7037)},7212:function(d,s,t){"use strict";d.exports=function(i,c,h,f){if(h=h||0,void 0===f&&(f=function(u){for(var S=u.length,_=0,E=0;E<S;++E)_=0|Math.max(_,u[E].length);return _-1}(i)),0===i.length||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(u,S){for(var _=u.length,E=r.mallocUint8(_),L=0;L<_;++L)E[L]=u[L]<S|0;return E}(c,+h),v=function(u,S){for(var _=u.length,L=r.mallocUint32(2*(S*(S+1)/2*_|0)),C=0,P=0;P<_;++P)for(var I=u[P],j=(S=I.length,0);j<S;++j)for(var R=0;R<j;++R){var H=I[R],F=I[j];L[C++]=0|Math.min(H,F),L[C++]=0|Math.max(H,F)}n(o(L,[C/2|0,2]));var U=2;for(P=2;P<C;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[U++]=L[P],L[U++]=L[P+1]);return o(L,[U/2|0,2])}(i,f),g=function(u,S,_,E){for(var L=u.data,C=u.shape[0],P=r.mallocDouble(C),I=0,j=0;j<C;++j){var R=L[2*j],H=L[2*j+1];if(_[R]!==_[H]){var F=S[R],U=S[H];L[2*I]=R,L[2*I+1]=H,P[I++]=(U-E)/(U-F)}}return u.shape[0]=I,o(P,[I])}(v,c,x,+h),y=function(u,S){var _=r.mallocInt32(2*S),E=u.shape[0],L=u.data;_[0]=0;for(var C=0,P=0;P<E;++P){var I=L[2*P];if(I!==C){for(_[2*C+1]=P;++C<I;)_[2*C]=P,_[2*C+1]=P;_[2*C]=P}}for(_[2*C+1]=E;++C<S;)_[2*C]=_[2*C+1]=E;return _}(v,0|c.length),p=a(f)(i,v.data,y,x),m=function(u){for(var S=0|u.shape[0],_=u.data,E=new Array(S),L=0;L<S;++L)E[L]=[_[2*L],_[2*L+1]];return E}(v),w=[].slice.call(g.data,0,g.shape[0]);return r.free(x),r.free(v.data),r.free(g.data),r.free(y),{cells:p,vertexIds:m,vertexWeights:w}};var o=t(5050),r=t(5306),n=t(8729),a=t(1168)},1168:function(d){"use strict";d.exports=function(t){return s[t]()};var s=[function(){return function(t,o,r,n){for(var a=t.length,i=0;i<a;++i);return[]}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var x=h+f>>1,v=r[2*x+1];if(v===c)return x;c<v?f=x:h=x+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h];if(2===f.length){var x=(a[f[0]]<<0)+(a[f[1]]<<1);if(0===x||3===x)continue;switch(x){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var x=h+f>>1,v=r[2*x+1];if(v===c)return x;c<v?f=x:h=x+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],x=f.length;if(3===x){if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))||7===v)continue;switch(v){case 0:case 7:break;case 1:c.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:c.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:c.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:c.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:c.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(2===x){var v;if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1))||3===v)continue;switch(v){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var x=h+f>>1,v=r[2*x+1];if(v===c)return x;c<v?f=x:h=x+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],x=f.length;if(4===x){if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2)+(a[f[3]]<<3))||15===v)continue;switch(v){case 0:case 15:break;case 1:c.push([t(n,r,f[0],f[1]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])]);break;case 2:c.push([t(n,r,f[1],f[2]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])]);break;case 3:c.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])],[t(n,r,f[1],f[3]),t(n,r,f[1],f[2]),t(n,r,f[0],f[3])]);break;case 4:c.push([t(n,r,f[2],f[0]),t(n,r,f[2],f[1]),t(n,r,f[2],f[3])]);break;case 5:c.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[0],f[3])],[t(n,r,f[2],f[1]),t(n,r,f[2],f[3]),t(n,r,f[0],f[3])]);break;case 6:c.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])],[t(n,r,f[2],f[3]),t(n,r,f[2],f[0]),t(n,r,f[1],f[3])]);break;case 7:c.push([t(n,r,f[0],f[3]),t(n,r,f[1],f[3]),t(n,r,f[2],f[3])]);break;case 8:c.push([t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[3],f[2])]);break;case 9:c.push([t(n,r,f[3],f[1]),t(n,r,f[0],f[1]),t(n,r,f[0],f[2])],[t(n,r,f[3],f[2]),t(n,r,f[3],f[1]),t(n,r,f[0],f[2])]);break;case 10:c.push([t(n,r,f[1],f[0]),t(n,r,f[3],f[0]),t(n,r,f[1],f[2])],[t(n,r,f[3],f[0]),t(n,r,f[3],f[2]),t(n,r,f[1],f[2])]);break;case 11:c.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[3],f[2])]);break;case 12:c.push([t(n,r,f[3],f[0]),t(n,r,f[2],f[0]),t(n,r,f[2],f[1])],[t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[2],f[1])]);break;case 13:c.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[3],f[1])]);break;case 14:c.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[3],f[0])])}}else if(3===x){if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))||7===v)continue;switch(v){case 0:case 7:break;case 1:c.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:c.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:c.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:c.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:c.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(2===x){var v;if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1))||3===v)continue;switch(v){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}}]},8211:function(d,s,t){"use strict";t(2288),t(1731),s.H=function(o,r){var n=o.length,a=o.length-r.length,i=Math.min;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return(f=o[0]+o[1]-r[0]-r[1])||i(o[0],o[1])-i(r[0],r[1]);case 3:var c=o[0]+o[1],h=r[0]+r[1];if(f=c+o[2]-(h+r[2]))return f;var f,x=i(o[0],o[1]),v=i(r[0],r[1]);return(f=i(x,o[2])-i(v,r[2]))||i(x+o[2],c)-i(v+r[2],h);default:var g=o.slice(0);g.sort();var y=r.slice(0);y.sort();for(var p=0;p<n;++p)if(a=g[p]-y[p])return a;return 0}}},9392:function(d,s){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6656:function(d,s,t){"use strict";var o=t(9392),r=t(9521);function n(v,g){var y=v.length,p=v.length-g.length,m=Math.min;if(p)return p;switch(y){case 0:return 0;case 1:return v[0]-g[0];case 2:return(S=v[0]+v[1]-g[0]-g[1])||m(v[0],v[1])-m(g[0],g[1]);case 3:var w=v[0]+v[1],u=g[0]+g[1];if(S=w+v[2]-(u+g[2]))return S;var S,_=m(v[0],v[1]),E=m(g[0],g[1]);return(S=m(_,v[2])-m(E,g[2]))||m(_+v[2],w)-m(E+g[2],u);default:var L=v.slice(0);L.sort();var C=g.slice(0);C.sort();for(var P=0;P<y;++P)if(p=L[P]-C[P])return p;return 0}}function a(v,g){return n(v[0],g[0])}function i(v,g){if(g){for(var y=v.length,p=new Array(y),m=0;m<y;++m)p[m]=[v[m],g[m]];for(p.sort(a),m=0;m<y;++m)v[m]=p[m][0],g[m]=p[m][1];return v}return v.sort(n),v}function c(v){if(0===v.length)return[];for(var g=1,y=v.length,p=1;p<y;++p){var m=v[p];if(n(m,v[p-1])){if(p===g){g++;continue}v[g++]=m}}return v.length=g,v}function h(v,g){for(var y=0,p=v.length-1,m=-1;y<=p;){var w=y+p>>1,u=n(v[w],g);u<=0?(0===u&&(m=w),y=w+1):u>0&&(p=w-1)}return m}function f(v,g){for(var y=new Array(v.length),p=0,m=y.length;p<m;++p)y[p]=[];for(var w=[],u=(p=0,g.length);p<u;++p)for(var S=g[p],_=S.length,E=1,L=1<<_;E<L;++E){w.length=o.popCount(E);for(var C=0,P=0;P<_;++P)E&1<<P&&(w[C++]=S[P]);var I=h(v,w);if(!(I<0))for(;y[I++].push(p),!(I>=v.length||0!==n(v[I],w)););}return y}function x(v,g){if(g<0)return[];for(var y=[],p=(1<<g+1)-1,m=0;m<v.length;++m)for(var w=v[m],u=p;u<1<<w.length;u=o.nextCombination(u)){for(var S=new Array(g+1),_=0,E=0;E<w.length;++E)u&1<<E&&(S[_++]=w[E]);y.push(S)}return i(y)}s.dimension=function(v){for(var g=0,y=Math.max,p=0,m=v.length;p<m;++p)g=y(g,v[p].length);return g-1},s.countVertices=function(v){for(var g=-1,y=Math.max,p=0,m=v.length;p<m;++p)for(var w=v[p],u=0,S=w.length;u<S;++u)g=y(g,w[u]);return g+1},s.cloneCells=function(v){for(var g=new Array(v.length),y=0,p=v.length;y<p;++y)g[y]=v[y].slice(0);return g},s.compareCells=n,s.normalize=i,s.unique=c,s.findCell=h,s.incidence=f,s.dual=function(v,g){if(!g)return f(c(x(v,0)),v);for(var y=new Array(g),p=0;p<g;++p)y[p]=[];p=0;for(var m=v.length;p<m;++p)for(var w=v[p],u=0,S=w.length;u<S;++u)y[w[u]].push(p);return y},s.explode=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0|m.length,u=1,S=1<<w;u<S;++u){for(var _=[],E=0;E<w;++E)u>>>E&1&&_.push(m[E]);g.push(_)}return i(g)},s.skeleton=x,s.boundary=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0,u=m.length;w<u;++w){for(var S=new Array(m.length-1),_=0,E=0;_<u;++_)_!==w&&(S[E++]=m[_]);g.push(S)}return i(g)},s.connectedComponents=function(v,g){return g?function(y,p){for(var m=new r(p),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=S+1;_<u.length;++_)m.link(u[S],u[_]);var E=[],L=m.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<y.length;++w){var C=m.find(y[w][0]);L[C]<0?(L[C]=E.length,E.push([y[w].slice(0)])):E[L[C]].push(y[w].slice(0))}return E}(v,g):function(y){for(var p=c(i(x(y,0))),m=new r(p.length),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=h(p,[u[S]]),E=S+1;E<u.length;++E)m.link(_,h(p,[u[E]]));var L=[],C=m.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<y.length;++w){var P=m.find(h(p,[y[w][0]]));C[P]<0?(C[P]=L.length,L.push([y[w].slice(0)])):L[C[P]].push(y[w].slice(0))}return L}(v)}},9521:function(d){"use strict";function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}d.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var o=this.roots;o[t]!==t;){var r=o[t];o[t]=o[r],t=r}return t},s.prototype.link=function(t,o){var r=this.find(t),n=this.find(o);if(r!==n){var a=this.ranks,i=this.roots,c=a[r],h=a[n];c<h?i[r]=n:h<c?i[n]=r:(i[n]=r,++a[r])}}},8243:function(d,s,t){"use strict";d.exports=function(n,a,i){for(var c=a.length,h=n.length,f=new Array(c),x=new Array(c),v=new Array(c),g=new Array(c),y=0;y<c;++y)f[y]=x[y]=-1,v[y]=1/0,g[y]=!1;for(y=0;y<h;++y){var p=n[y];if(2!==p.length)throw new Error("Input must be a graph");var m=p[1],w=p[0];x[w]=-1!==x[w]?-2:m,f[m]=-1!==f[m]?-2:w}function u(Z){if(g[Z])return 1/0;var W,X,K=f[Z],ne=x[Z];return K<0||ne<0?1/0:(W=a[K],X=a[ne],Math.abs(o(a[Z],W,X))/Math.sqrt(Math.pow(W[0]-X[0],2)+Math.pow(W[1]-X[1],2)))}function S(Z,V){var W=R[Z],X=R[V];R[Z]=X,R[V]=W,H[W]=V,H[X]=Z}function _(Z){return v[R[Z]]}function E(Z){return 1&Z?Z-1>>1:(Z>>1)-1}function L(Z){for(var V=_(Z);;){var W=V,X=2*Z+1,K=2*(Z+1),ne=Z;if(X<F){var re=_(X);re<W&&(ne=X,W=re)}if(K<F&&_(K)<W&&(ne=K),ne===Z)return Z;S(Z,ne),Z=ne}}function C(Z){for(var V=_(Z);Z>0;){var W=E(Z);if(!(W>=0&&V<_(W)))return Z;S(Z,W),Z=W}}function P(){if(F>0){var Z=R[0];return S(0,F-1),F-=1,L(0),Z}return-1}function I(Z,V){var W=R[Z];return v[W]===V?Z:(v[W]=-1/0,C(Z),P(),v[W]=V,C((F+=1)-1))}function j(Z){if(!g[Z]){g[Z]=!0;var V=f[Z],W=x[Z];f[W]>=0&&(f[W]=V),x[V]>=0&&(x[V]=W),H[V]>=0&&I(H[V],u(V)),H[W]>=0&&I(H[W],u(W))}}var R=[],H=new Array(c);for(y=0;y<c;++y)(v[y]=u(y))<1/0?(H[y]=R.length,R.push(y)):H[y]=-1;var F=R.length;for(y=F>>1;y>=0;--y)L(y);for(;;){var U=P();if(U<0||v[U]>i)break;j(U)}var B=[];for(y=0;y<c;++y)g[y]||(H[y]=B.length,B.push(a[y].slice()));function N(Z,V){if(Z[V]<0)return V;var W=V,X=V;do{var K=Z[X];if(!g[X]||K<0||K===X||(K=Z[X=K],!g[X]||K<0||K===X))break;X=K,W=Z[W]}while(W!==X);for(var ne=V;ne!==X;ne=Z[ne])Z[ne]=X;return X}var J=[];return n.forEach(function(Z){var V=N(f,Z[0]),W=N(x,Z[1]);if(V>=0&&W>=0&&V!==W){var X=H[V],K=H[W];X!==K&&J.push([X,K])}}),r.unique(r.normalize(J)),{positions:B,edges:J}};var o=t(417),r=t(6656)},6638:function(d,s,t){"use strict";d.exports=function(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);i=a[1],c=a[0]}if(n[0][0]<n[1][0])h=n[0],f=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],f=n[0]}var x=o(i,c,f),v=o(i,c,h);if(x<0){if(v<=0)return x}else if(x>0){if(v>=0)return x}else if(v)return v;if(x=o(f,h,c),v=o(f,h,i),x<0){if(v<=0)return x}else if(x>0){if(v>=0)return x}else if(v)return v;return c[0]-f[0]};var o=t(417);function r(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(n[0][1],n[1][1]),v=Math.max(n[0][1],n[1][1]),g=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return v<g?v-g:x>y?x-y:v-y}i=a[1],c=a[0]}n[0][1]<n[1][1]?(h=n[0],f=n[1]):(h=n[1],f=n[0]);var p=o(c,i,h);return p||(p=o(c,i,f))||f-c}},4385:function(d,s,t){"use strict";d.exports=function(v){for(var g=v.length,y=2*g,p=new Array(y),m=0;m<g;++m){var w=v[m],u=w[0][0]<w[1][0];p[2*m]=new x(w[0][0],w,u,m),p[2*m+1]=new x(w[1][0],w,!u,m)}p.sort(function(j,R){var H=j.x-R.x;return H||(H=j.create-R.create)||Math.min(j.segment[0][1],j.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var S=r(a),_=[],E=[],L=[];for(m=0;m<y;){for(var C=p[m].x,P=[];m<y;){var I=p[m];if(I.x!==C)break;m+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(P.push(new f(I.segment[0][1],I.index,!0,!0)),P.push(new f(I.segment[1][1],I.index,!1,!1))):(P.push(new f(I.segment[1][1],I.index,!0,!1)),P.push(new f(I.segment[0][1],I.index,!1,!0)))):S=I.create?S.insert(I.segment,I.index):S.remove(I.segment)}_.push(S.root),E.push(C),L.push(P)}return new i(_,E,L)};var o=t(5070),r=t(7080),n=t(417),a=t(6638);function i(v,g,y){this.slabs=v,this.coordinates=g,this.horizontal=y}function c(v,g){return v.y-g}function h(v,g){for(var y=null;v;){var p,m,w=v.key;w[0][0]<w[1][0]?(p=w[0],m=w[1]):(p=w[1],m=w[0]);var u=n(p,m,g);if(u<0)v=v.left;else if(u>0)if(g[0]!==w[1][0])y=v,v=v.right;else{if(S=h(v.right,g))return S;v=v.left}else{if(g[0]!==w[1][0])return v;var S;if(S=h(v.right,g))return S;v=v.left}}return y}function f(v,g,y,p){this.y=v,this.index=g,this.start=y,this.closed=p}function x(v,g,y,p){this.x=v,this.segment=g,this.create=y,this.index=p}i.prototype.castUp=function(v){var g=o.le(this.coordinates,v[0]);if(g<0)return-1;var y=h(this.slabs[g],v),p=-1;if(y&&(p=y.value),this.coordinates[g]===v[0]){var m=null;if(y&&(m=y.key),g>0){var w=h(this.slabs[g-1],v);w&&(m?a(w.key,m)>0&&(m=w.key,p=w.value):(p=w.value,m=w.key))}var u=this.horizontal[g];if(u.length>0){var S=o.ge(u,v[1],c);if(S<u.length){var _=u[S];if(v[1]===_.y){if(_.closed)return _.index;for(;S<u.length-1&&u[S+1].y===v[1];)if((_=u[S+=1]).closed)return _.index;if(_.y===v[1]&&!_.start){if((S+=1)>=u.length)return p;_=u[S]}}if(_.start)if(m){var E=n(m[0],m[1],[v[0],_.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(p=_.index)}else p=_.index;else _.y!==v[1]&&(p=_.index)}}}return p}},4670:function(d,s,t){"use strict";var o=t(9130),r=t(9662);function n(i,c){var h=r(o(i,c),[c[c.length-1]]);return h[h.length-1]}function a(i,c,h,f){var x=-c/(f-c);x<0?x=0:x>1&&(x=1);for(var v=1-x,g=i.length,y=new Array(g),p=0;p<g;++p)y[p]=x*i[p]+v*h[p];return y}d.exports=function(i,c){for(var h=[],f=[],x=n(i[i.length-1],c),v=i[i.length-1],g=i[0],y=0;y<i.length;++y,v=g){var p=n(g=i[y],c);if(x<0&&p>0||x>0&&p<0){var m=a(v,p,g,x);h.push(m),f.push(m.slice())}p<0?f.push(g.slice()):p>0?h.push(g.slice()):(h.push(g.slice()),f.push(g.slice())),x=p}return{positive:h,negative:f}},d.exports.positive=function(i,c){for(var h=[],f=n(i[i.length-1],c),x=i[i.length-1],v=i[0],g=0;g<i.length;++g,x=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(x,y,v,f)),y>=0&&h.push(v.slice()),f=y}return h},d.exports.negative=function(i,c){for(var h=[],f=n(i[i.length-1],c),x=i[i.length-1],v=i[0],g=0;g<i.length;++g,x=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(x,y,v,f)),y<=0&&h.push(v.slice()),f=y}return h}},8974:function(d,s,t){var o;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(f){return function i(f,x){var v,g,y,p,m,w,u,S,_,E=1,L=f.length,C="";for(g=0;g<L;g++)if("string"==typeof f[g])C+=f[g];else if("object"==typeof f[g]){if((p=f[g]).keys)for(v=x[E],y=0;y<p.keys.length;y++){if(null==v)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[y],p.keys[y-1]));v=v[p.keys[y]]}else v=p.param_no?x[p.param_no]:x[E++];if(r.not_type.test(p.type)&&r.not_primitive.test(p.type)&&v instanceof Function&&(v=v()),r.numeric_arg.test(p.type)&&"number"!=typeof v&&isNaN(v))throw new TypeError(n("[sprintf] expecting number but found %T",v));switch(r.number.test(p.type)&&(S=v>=0),p.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,p.width?parseInt(p.width):0);break;case"e":v=p.precision?parseFloat(v).toExponential(p.precision):parseFloat(v).toExponential();break;case"f":v=p.precision?parseFloat(v).toFixed(p.precision):parseFloat(v);break;case"g":v=p.precision?String(Number(v.toPrecision(p.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=p.precision?v.substring(0,p.precision):v;break;case"t":v=String(!!v),v=p.precision?v.substring(0,p.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=p.precision?v.substring(0,p.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=p.precision?v.substring(0,p.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase()}r.json.test(p.type)?C+=v:(!r.number.test(p.type)||S&&!p.sign?_="":(_=S?"+":"-",v=v.toString().replace(r.sign,"")),w=p.pad_char?"0"===p.pad_char?"0":p.pad_char.charAt(1):" ",u=p.width-(_+v).length,m=p.width&&u>0?w.repeat(u):"",C+=p.align?_+v+m:"0"===w?_+m+v:m+_+v)}return C}(function h(f){if(c[f])return c[f];for(var x,v=f,g=[],y=0;v;){if(null!==(x=r.text.exec(v)))g.push(x[0]);else if(null!==(x=r.modulo.exec(v)))g.push("%");else{if(null===(x=r.placeholder.exec(v)))throw new SyntaxError("[sprintf] unexpected placeholder");if(x[2]){y|=1;var p=[],m=x[2],w=[];if(null===(w=r.key.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(w[1]);""!==(m=m.substring(w[0].length));)if(null!==(w=r.key_access.exec(m)))p.push(w[1]);else{if(null===(w=r.index_access.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(w[1])}x[2]=p}else y|=2;if(3===y)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:x[0],param_no:x[1],keys:x[2],sign:x[3],pad_char:x[4],align:x[5],width:x[6],precision:x[7],type:x[8]})}v=v.substring(x[0].length)}return c[f]=g}(f),arguments)}function a(f,x){return n.apply(null,[f].concat(x||[]))}var c=Object.create(null);s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,void 0===(o=function(){return{sprintf:n,vsprintf:a}}.call(s,t,s,d))||(d.exports=o))}()},4162:function(d,s,t){"use strict";d.exports=function(i,c){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return function(x,v){for(var g=r(x,v),y=g.length,p=new Array(y),m=new Array(y),w=0;w<y;++w)p[w]=[g[w]],m[w]=[w];return{positions:p,cells:m}}(i,c);var h=i.order.join()+"-"+i.dtype,f=a[h];return c=+c||0,f||(f=a[h]=function(x,v){var y=n[x.length+"d"];if(y)return y(o,x,v)}(i.order,i.dtype)),f(i,c)};var o=t(9284),r=t(9584),n={"2d":function(i,c,h){var f=i({order:c,scalarArguments:3,getters:"generic"===h?[0]:void 0,phase:function(x,v,g,y){return x>y|0},vertex:function(x,v,g,y,p,m,w,u,S,_,E,L,C){var P=(w<<0)+(u<<1)+(S<<2)+(_<<3)|0;if(0!==P&&15!==P)switch(P){case 0:case 15:E.push([x-.5,v-.5]);break;case 1:E.push([x-.25-.25*(y+g-2*C)/(g-y),v-.25-.25*(p+g-2*C)/(g-p)]);break;case 2:E.push([x-.75-.25*(-y-g+2*C)/(y-g),v-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([x-.5,v-.5-.5*(p+g+m+y-4*C)/(g-p+y-m)]);break;case 4:E.push([x-.25-.25*(m+p-2*C)/(p-m),v-.75-.25*(-p-g+2*C)/(p-g)]);break;case 5:E.push([x-.5-.5*(y+g+m+p-4*C)/(g-y+p-m),v-.5]);break;case 6:E.push([x-.5-.25*(-y-g+m+p)/(y-g+p-m),v-.5-.25*(-p-g+m+y)/(p-g+y-m)]);break;case 7:E.push([x-.75-.25*(m+p-2*C)/(p-m),v-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([x-.75-.25*(-m-p+2*C)/(m-p),v-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([x-.5-.25*(y+g+-m-p)/(g-y+m-p),v-.5-.25*(p+g+-m-y)/(g-p+m-y)]);break;case 10:E.push([x-.5-.5*(-y-g-m-p+4*C)/(y-g+m-p),v-.5]);break;case 11:E.push([x-.25-.25*(-m-p+2*C)/(m-p),v-.75-.25*(p+g-2*C)/(g-p)]);break;case 12:E.push([x-.5,v-.5-.5*(-p-g-m-y+4*C)/(p-g+m-y)]);break;case 13:E.push([x-.75-.25*(y+g-2*C)/(g-y),v-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([x-.25-.25*(-y-g+2*C)/(y-g),v-.25-.25*(-p-g+2*C)/(p-g)])}},cell:function(x,v,g,y,p,m,w,u,S){u.push(p?[x,v]:[v,x])}});return function(x,v){var g=[],y=[];return f(x,g,y,v),{positions:g,cells:y}}}},a={}},6946:function(d,s,t){"use strict";d.exports=function a(i,c,h){h=h||{};var f=n[i];f||(f=n[i]={" ":{data:new Float32Array(0),shape:.2}});var x=f[c];if(!x)if(c.length<=1||!/\d/.test(c))x=f[c]=function(L){for(var C=L.cells,P=L.positions,I=new Float32Array(6*C.length),j=0,R=0,H=0;H<C.length;++H)for(var F=C[H],U=0;U<3;++U){var B=P[F[U]];I[j++]=B[0],I[j++]=B[1]+1.4,R=Math.max(B[0],R)}return{data:I,shape:R}}(o(c,{triangles:!0,font:i,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),g=new Array(v.length),y=0,p=0,m=0;m<v.length;++m)g[m]=a(i,v[m]),y+=g[m].data.length,p+=g[m].shape,m>0&&(p+=.02);var w=new Float32Array(y),u=0,S=-.5*p;for(m=0;m<g.length;++m){for(var _=g[m].data,E=0;E<_.length;E+=2)w[u++]=_[E]+S,w[u++]=_[E+1];S+=g[m].shape+.02}x=f[c]={data:w,shape:p}}return x};var o=t(875),r=window||A.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(d,s,t){"use strict";var o=t(4405);function r(a,i){var c=o(getComputedStyle(a).getPropertyValue(i));return c[0]*n(c[1],a)}function n(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return function(c,h){var f=document.createElement("div");f.style["font-size"]="128"+c,h.appendChild(f);var x=r(f,"font-size")/128;return h.removeChild(f),x}(a,i);case"em":return r(i,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}d.exports=n},3440:function(d,s,t){"use strict";d.exports=function(p){var m=(p=p||{}).center||[0,0,0],w=p.up||[0,1,0],u=p.right||x(w),S=p.radius||1,_=p.theta||0,E=p.phi||0;if(m=[].slice.call(m,0,3),w=[].slice.call(w,0,3),i(w,w),u=[].slice.call(u,0,3),i(u,u),"eye"in p){var L=p.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];a(u,C,w),h(u[0],u[1],u[2])<1e-6?u=x(w):i(u,u),S=h(C[0],C[1],C[2]);var P=c(w,C)/S,I=c(u,C)/S;E=Math.acos(P),_=Math.acos(I)}return S=Math.log(S),new v(p.zoomMin,p.zoomMax,m,w,u,S,_,E)};var o=t(8444),r=t(7437),n=t(4422),a=t(903),i=t(899),c=t(9305);function h(p,m,w){return Math.sqrt(Math.pow(p,2)+Math.pow(m,2)+Math.pow(w,2))}function f(p){return Math.min(1,Math.max(-1,p))}function x(p){var m=Math.abs(p[0]),w=Math.abs(p[1]),u=Math.abs(p[2]),S=[0,0,0];m>Math.max(w,u)?S[2]=1:w>Math.max(m,u)?S[0]=1:S[1]=1;for(var _=0,E=0,L=0;L<3;++L)_+=p[L]*p[L],E+=S[L]*p[L];for(L=0;L<3;++L)S[L]-=E/_*p[L];return i(S,S),S}function v(p,m,w,u,S,_,E,L){this.center=o(w),this.up=o(u),this.right=o(S),this.radius=o([_]),this.angle=o([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(p,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var g=v.prototype;g.setDistanceLimits=function(p,m){p=p>0?Math.log(p):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(p){var m=this.radius.bounds[0];return p?(p[0]=Math.exp(m[0][0]),p[1]=Math.exp(m[1][0]),p):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.recalcMatrix=function(p){this.center.curve(p),this.up.curve(p),this.right.curve(p),this.radius.curve(p),this.angle.curve(p);for(var m=this.computedUp,w=this.computedRight,u=0,S=0,_=0;_<3;++_)S+=m[_]*w[_],u+=m[_]*m[_];var E=Math.sqrt(u),L=0;for(_=0;_<3;++_)w[_]-=m[_]*S/u,L+=w[_]*w[_],m[_]/=E;var C=Math.sqrt(L);for(_=0;_<3;++_)w[_]/=C;var P=this.computedToward;a(P,m,w),i(P,P);var I=Math.exp(this.computedRadius[0]),j=this.computedAngle[0],R=this.computedAngle[1],H=Math.cos(j),F=Math.sin(j),U=Math.cos(R),B=Math.sin(R),N=this.computedCenter,J=H*U,Z=F*U,V=B,W=-H*B,X=-F*B,K=U,ne=this.computedEye,re=this.computedMatrix;for(_=0;_<3;++_){var ae=J*w[_]+Z*P[_]+V*m[_];re[4*_+1]=W*w[_]+X*P[_]+K*m[_],re[4*_+2]=ae,re[4*_+3]=0}var le=re[1],pe=re[5],xe=re[9],ye=re[2],se=re[6],fe=re[10],Ee=pe*fe-xe*se,de=xe*ye-le*fe,we=le*se-pe*ye,ke=h(Ee,de,we);for(de/=ke,we/=ke,re[0]=Ee/=ke,re[4]=de,re[8]=we,_=0;_<3;++_)ne[_]=N[_]+re[2+4*_]*I;for(_=0;_<3;++_){L=0;for(var Te=0;Te<3;++Te)L+=re[_+4*Te]*ne[Te];re[12+_]=-L}re[15]=1},g.getMatrix=function(p,m){this.recalcMatrix(p);var w=this.computedMatrix;if(m){for(var u=0;u<16;++u)m[u]=w[u];return m}return w};var y=[0,0,0];g.rotate=function(p,m,w,u){if(this.angle.move(p,m,w),u){this.recalcMatrix(p);var S=this.computedMatrix;y[0]=S[2],y[1]=S[6],y[2]=S[10];for(var _=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)S[4*C]=_[C],S[4*C+1]=E[C],S[4*C+2]=L[C];for(n(S,S,u,y),C=0;C<3;++C)_[C]=S[4*C],E[C]=S[4*C+1];this.up.set(p,_[0],_[1],_[2]),this.right.set(p,E[0],E[1],E[2])}},g.pan=function(p,m,w,u){m=m||0,w=w||0,u=u||0,this.recalcMatrix(p);var S=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],L=S[9],C=h(_,E,L),P=S[0],I=S[4],j=S[8],R=P*(_/=C)+I*(E/=C)+j*(L/=C),H=h(P-=_*R,I-=E*R,j-=L*R),F=(P/=H)*m+_*w,U=(I/=H)*m+E*w,B=(j/=H)*m+L*w;this.center.move(p,F,U,B);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+u),this.radius.set(p,Math.log(N))},g.translate=function(p,m,w,u){this.center.move(p,m||0,w||0,u||0)},g.setMatrix=function(p,m,w,u){var S=1;"number"==typeof w&&(S=0|w),(S<0||S>3)&&(S=1);var _=(S+2)%3;m||(this.recalcMatrix(p),m=this.computedMatrix);var E=m[S],L=m[S+4],C=m[S+8];if(u){var P=Math.abs(E),I=Math.abs(L),j=Math.abs(C),R=Math.max(P,I,j);P===R?(E=E<0?-1:1,L=C=0):j===R?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var H=h(E,L,C);E/=H,L/=H,C/=H}var F,U,B=m[_],N=m[_+4],J=m[_+8],Z=B*E+N*L+J*C,V=h(B-=E*Z,N-=L*Z,J-=C*Z),W=L*(J/=V)-C*(N/=V),X=C*(B/=V)-E*J,K=E*N-L*B,ne=h(W,X,K);if(W/=ne,X/=ne,K/=ne,this.center.jump(p,me,Me,Ie),this.radius.idle(p),this.up.jump(p,E,L,C),this.right.jump(p,B,N,J),2===S){var re=m[1],ae=m[5],le=m[9];F=Ee<0?-Math.PI/2:Math.PI/2,U=Math.atan2(re*W+ae*X+le*K,re*B+ae*N+le*J)}else{var ye=m[2],se=m[6],fe=m[10],Ee=ye*E+se*L+fe*C,de=ye*B+se*N+fe*J,we=ye*W+se*X+fe*K;F=Math.asin(f(Ee)),U=Math.atan2(we,de)}this.angle.jump(p,U,F),this.recalcMatrix(p);var ke=m[2],Te=m[6],$=m[10],oe=this.computedMatrix;r(oe,m);var he=oe[15],me=oe[12]/he,Me=oe[13]/he,Ie=oe[14]/he,Pe=Math.exp(this.computedRadius[0]);this.center.jump(p,me-ke*Pe,Me-Te*Pe,Ie-$*Pe)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(p){this.center.idle(p),this.up.idle(p),this.right.idle(p),this.radius.idle(p),this.angle.idle(p)},g.flush=function(p){this.center.flush(p),this.up.flush(p),this.right.flush(p),this.radius.flush(p),this.angle.flush(p)},g.setDistance=function(p,m){m>0&&this.radius.set(p,Math.log(m))},g.lookAt=function(p,m,w,u){this.recalcMatrix(p),m=m||this.computedEye,w=w||this.computedCenter;var S=(u=u||this.computedUp)[0],_=u[1],E=u[2],L=h(S,_,E);if(!(L<1e-6)){S/=L,_/=L,E/=L;var C=m[0]-w[0],P=m[1]-w[1],I=m[2]-w[2],j=h(C,P,I);if(!(j<1e-6)){C/=j,P/=j,I/=j;var R=this.computedRight,H=R[0],F=R[1],U=R[2],B=S*H+_*F+E*U,N=h(H-=B*S,F-=B*_,U-=B*E);if(!(N<.01&&(N=h(H=_*I-E*P,F=E*C-S*I,U=S*P-_*C))<1e-6)){H/=N,F/=N,U/=N,this.up.set(p,S,_,E),this.right.set(p,H,F,U),this.center.set(p,w[0],w[1],w[2]),this.radius.set(p,Math.log(j));var J=_*U-E*F,Z=E*H-S*U,V=S*F-_*H,W=h(J,Z,V),K=H*C+F*P+U*I,ne=(J/=W)*C+(Z/=W)*P+(V/=W)*I,re=Math.asin(f(S*C+_*P+E*I)),ae=Math.atan2(ne,K),le=this.angle._state,pe=le[le.length-1],xe=le[le.length-2];pe%=2*Math.PI;var ye=Math.abs(pe+2*Math.PI-ae),se=Math.abs(pe-ae),fe=Math.abs(pe-2*Math.PI-ae);ye<se&&(pe+=2*Math.PI),fe<se&&(pe-=2*Math.PI),this.angle.jump(this.angle.lastT(),pe,xe),this.angle.set(p,ae,re)}}}}},9660:function(d){"use strict";d.exports=function(t,o,r){var n=t*o,a=s*t,i=a-(a-t),c=t-i,h=s*o,f=h-(h-o),x=o-f,v=c*x-(n-i*f-c*f-i*x);return r?(r[0]=v,r[1]=n,r):[v,n]};var s=+(Math.pow(2,27)+1)},87:function(d){"use strict";d.exports=function(s,t,o){var r=s+t,n=r-s,a=t-n,i=s-(r-n);return o?(o[0]=i+a,o[1]=r,o):[i+a,r]}},5306:function(d,s,t){"use strict";var o=t(2288),r=t(3094),n=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",i=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var f=h.DATA,x=h.BUFFER;function v(R){if(R){var F=o.log2(R.length||R.byteLength);f[F].push(R)}}function g(R){R=o.nextPow2(R);var H=o.log2(R),F=f[H];return F.length>0?F.pop():new ArrayBuffer(R)}function y(R){return new Uint8Array(g(R),0,R)}function p(R){return new Uint16Array(g(2*R),0,R)}function m(R){return new Uint32Array(g(4*R),0,R)}function w(R){return new Int8Array(g(R),0,R)}function u(R){return new Int16Array(g(2*R),0,R)}function S(R){return new Int32Array(g(4*R),0,R)}function _(R){return new Float32Array(g(4*R),0,R)}function E(R){return new Float64Array(g(8*R),0,R)}function L(R){return a?new Uint8ClampedArray(g(R),0,R):y(R)}function C(R){return i?new BigUint64Array(g(8*R),0,R):null}function P(R){return c?new BigInt64Array(g(8*R),0,R):null}function I(R){return new DataView(g(R),0,R)}function j(R){R=o.nextPow2(R);var H=o.log2(R),F=x[H];return F.length>0?F.pop():new n(R)}s.free=function(R){if(n.isBuffer(R))x[o.log2(R.length)].push(R);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(R)&&(R=R.buffer),!R)return;var F=0|o.log2(R.length||R.byteLength);f[F].push(R)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(R){v(R.buffer)},s.freeArrayBuffer=v,s.freeBuffer=function(R){x[o.log2(R.length)].push(R)},s.malloc=function(R,H){if(void 0===H||"arraybuffer"===H)return g(R);switch(H){case"uint8":return y(R);case"uint16":return p(R);case"uint32":return m(R);case"int8":return w(R);case"int16":return u(R);case"int32":return S(R);case"float":case"float32":return _(R);case"double":case"float64":return E(R);case"uint8_clamped":return L(R);case"bigint64":return P(R);case"biguint64":return C(R);case"buffer":return j(R);case"data":case"dataview":return I(R);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=y,s.mallocUint16=p,s.mallocUint32=m,s.mallocInt8=w,s.mallocInt16=u,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=_,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=I,s.mallocBuffer=j,s.clearCache=function(){for(var R=0;R<32;++R)h.UINT8[R].length=0,h.UINT16[R].length=0,h.UINT32[R].length=0,h.INT8[R].length=0,h.INT16[R].length=0,h.INT32[R].length=0,h.FLOAT[R].length=0,h.DOUBLE[R].length=0,h.BIGUINT64[R].length=0,h.BIGINT64[R].length=0,h.UINT8C[R].length=0,f[R].length=0,x[R].length=0}},1731:function(d){"use strict";function s(o){this.roots=new Array(o),this.ranks=new Array(o);for(var r=0;r<o;++r)this.roots[r]=r,this.ranks[r]=0}d.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},t.find=function(o){for(var r=o,n=this.roots;n[o]!==o;)o=n[o];for(;n[r]!==o;){var a=n[r];n[r]=o,r=a}return o},t.link=function(o,r){var n=this.find(o),a=this.find(r);if(n!==a){var i=this.ranks,c=this.roots,h=i[n],f=i[a];h<f?c[n]=a:f<h?c[a]=n:(c[a]=n,++i[n])}}},1215:function(d){"use strict";d.exports=function(s,t,o){return 0===s.length?s:t?(o||s.sort(t),function(r,n){for(var a=1,i=r.length,c=r[0],h=r[0],f=1;f<i;++f)if(h=c,n(c=r[f],h)){if(f===a){a++;continue}r[a++]=c}return r.length=a,r}(s,t)):(o||s.sort(),function(r){for(var n=1,a=r.length,i=r[0],c=r[0],h=1;h<a;++h,c=i)if(c=i,(i=r[h])!==c){if(h===n){n++;continue}r[n++]=i}return r.length=n,r}(s))}},875:function(d,s,t){"use strict";d.exports=function(a,i){return"object"==typeof i&&null!==i||(i={}),o(a,i.canvas||r,i.context||n,i)};var o=t(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(d,s,t){d.exports=function(p,m,w,u){var S=64,_=1.25,E={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(S=u.size),u.lineSpacing&&u.lineSpacing>0&&(_=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(E.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(E.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(E.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(E.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(E.superscripts=!!u.styletags.superscripts)),w.font=[u.fontStyle,u.fontVariant,u.fontWeight,S+"px",u.font].filter(function(L){return L}).join(" "),w.textAlign="start",w.textBaseline="alphabetic",w.direction="ltr",y(function(L,C,P,I,j,R){P=(P=P.replace(/\n/g,"")).replace(/\<br\>/g,!0===R.breaklines?"\n":" ");var H="",F=[];for(J=0;J<P.length;++J)F[J]=H;!0===R.bolds&&(F=x("b",h,P,F)),!0===R.italics&&(F=x("i",f,P,F)),!0===R.superscripts&&(F=x("sup","+1",P,F)),!0===R.subscripts&&(F=x("sub","-1",P,F));var U=[],B="";for(J=0;J<P.length;++J)null!==F[J]&&(B+=P[J],U.push(F[J]));var N,J,Z,V,W,X=B.split("\n"),K=X.length,ne=Math.round(j*I),re=I,ae=2*I,le=0,pe=K*ne+ae;L.height<pe&&(L.height=pe),C.fillStyle="#000",C.fillRect(0,0,L.width,L.height),C.fillStyle="#fff";var xe=0,ye="";function se(){if(""!==ye){var oe=C.measureText(ye).width;C.fillText(ye,re+Z,ae+V),Z+=oe}}function fe(){return Math.round(W)+"px "}function Ee(oe,he){var me=""+C.font;if(!0===R.subscripts){var Me=oe.indexOf("-"),Ie=he.indexOf("-"),Pe=Me>-1?parseInt(oe[1+Me]):0,ze=Ie>-1?parseInt(he[1+Ie]):0;Pe!==ze&&(me=me.replace(fe(),"?px "),W*=Math.pow(.75,ze-Pe),me=me.replace("?px ",fe())),V+=.25*ne*(ze-Pe)}if(!0===R.superscripts){var ce=oe.indexOf("+"),ge=he.indexOf("+"),_e=ce>-1?parseInt(oe[1+ce]):0,De=ge>-1?parseInt(he[1+ge]):0;_e!==De&&(me=me.replace(fe(),"?px "),W*=Math.pow(.75,De-_e),me=me.replace("?px ",fe())),V-=.25*ne*(De-_e)}if(!0===R.bolds){var He=oe.indexOf(h)>-1,Ve=he.indexOf(h)>-1;!He&&Ve&&(me=nt?me.replace("italic ","italic bold "):"bold "+me),He&&!Ve&&(me=me.replace("bold ",""))}if(!0===R.italics){var nt=oe.indexOf(f)>-1,tt=he.indexOf(f)>-1;!nt&&tt&&(me="italic "+me),nt&&!tt&&(me=me.replace("italic ",""))}C.font=me}for(N=0;N<K;++N){var de=X[N]+"\n";for(Z=0,V=N*ne,W=I,ye="",J=0;J<de.length;++J){var we=J+xe<U.length?U[J+xe]:U[U.length-1];H===we?ye+=de[J]:(se(),ye=de[J],void 0!==we&&(Ee(H,we),H=we))}se(),xe+=de.length;var ke=0|Math.round(Z+2*re);le<ke&&(le=ke)}var Te=le,$=ae+ne*K;return r(C.getImageData(0,0,Te,$).data,[$,Te,4]).pick(-1,-1,0).transpose(1,0)}(m,w,p,S,_,E),u,S)},d.exports.processPixels=y;var o=t(4162),r=t(5050),n=t(8243),a=t(197),i=t(7761),c=t(8040),h="b|",f="i|";function x(p,m,w,u){for(var S="<"+p+">",_="</"+p+">",E=S.length,L=_.length,C="+"===m[0]||"-"===m[0],P=0,I=-L;P>-1&&-1!==(P=w.indexOf(S,P))&&-1!==(I=w.indexOf(_,P+E))&&!(I<=P);){for(var j=P;j<I+L;++j)if(j<P+E||j>=I)u[j]=null,w=w.substr(0,j)+" "+w.substr(j+1);else if(null!==u[j]){var R=u[j].indexOf(m[0]);-1===R?u[j]+=m:C&&(u[j]=u[j].substr(0,R+1)+(1+parseInt(u[j][R+1]))+u[j].substr(R+2))}var H=P+E,F=w.substr(H,I-H).indexOf(S);P=-1!==F?F:I+L}return u}function g(p,m,w,u){var S=function v(p,m){var w=o(p,128);return m?n(w.cells,w.positions,.25):{edges:w.cells,positions:w.positions}}(p,u),_=function(N,J,Z){for(var V=J.textAlign||"start",W=J.textBaseline||"alphabetic",X=[1<<30,1<<30],K=[0,0],ne=N.length,re=0;re<ne;++re)for(var ae=N[re],le=0;le<2;++le)X[le]=0|Math.min(X[le],ae[le]),K[le]=0|Math.max(K[le],ae[le]);var pe=0;switch(V){case"center":pe=-.5*(X[0]+K[0]);break;case"right":case"end":pe=-K[0];break;case"left":case"start":pe=-X[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+V+"'")}var xe=0;switch(W){case"hanging":case"top":xe=-X[1];break;case"middle":xe=-.5*(X[1]+K[1]);break;case"alphabetic":case"ideographic":xe=-3*Z;break;case"bottom":xe=-K[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+W+"'")}var ye=1/Z;return"lineHeight"in J?ye*=+J.lineHeight:"width"in J?ye=J.width/(K[0]-X[0]):"height"in J&&(ye=J.height/(K[1]-X[1])),N.map(function(se){return[ye*(se[0]+pe),ye*(se[1]+xe)]})}(S.positions,m,w),E=S.edges,L="ccw"===m.orientation;if(a(_,E),m.polygons||m.polygon||m.polyline){for(var C=c(E,_),P=new Array(C.length),I=0;I<C.length;++I){for(var j=C[I],R=new Array(j.length),H=0;H<j.length;++H){for(var F=j[H],U=new Array(F.length),B=0;B<F.length;++B)U[B]=_[F[B]].slice();L&&U.reverse(),R[H]=U}P[I]=R}return P}return m.triangles||m.triangulate||m.triangle?{cells:i(_,E,{delaunay:!1,exterior:!1,interior:!0}),positions:_}:{edges:E,positions:_}}function y(p,m,w){try{return g(p,m,w,!0)}catch{}try{return g(p,m,w,!1)}catch{}return m.polygons||m.polyline||m.polygon?[]:m.triangles||m.triangulate||m.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(d){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if("function"==typeof WeakMap){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var o=new t,r=Object.freeze({});if(o.set(r,1),1===o.get(r))return void(d.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,i=Object.isExtensible,c="weakmap:",h="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var f=new ArrayBuffer(25),x=new Uint8Array(f);crypto.getRandomValues(x),h="weakmap:rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(w)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return v(E).filter(w)}})}!function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return u(P),E(P)}});var L=Object.seal;a(Object,"seal",{value:function(P){return u(P),L(P)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return u(P),C(P)}})}();var g=!1,y=0,p=function(){this instanceof p||_();var E=[],L=[],C=y++;return Object.create(p.prototype,{get___:{value:S(function(P,I){var j,R=u(P);return R?C in R?R[C]:I:(j=E.indexOf(P))>=0?L[j]:I})},has___:{value:S(function(P){var I=u(P);return I?C in I:E.indexOf(P)>=0})},set___:{value:S(function(P,I){var j,R=u(P);return R?R[C]=I:(j=E.indexOf(P))>=0?L[j]=I:(L[j=E.length]=I,E[j]=P),this})},delete___:{value:S(function(P){var I,j,R=u(P);return R?C in R&&delete R[C]:!((I=E.indexOf(P))<0||(j=E.length-1,E[I]=void 0,L[I]=L[j],E[I]=E[j],E.length=j,L.length=j,0))})}})};p.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof t?function(){function E(){this instanceof p||_();var L,C=new t,P=void 0,I=!1;return L=s?function(j,R){return C.set(j,R),C.has(j)||(P||(P=new p),P.set(j,R)),this}:function(j,R){if(I)try{C.set(j,R)}catch{P||(P=new p),P.set___(j,R)}else C.set(j,R);return this},Object.create(p.prototype,{get___:{value:S(function(j,R){return P?C.has(j)?C.get(j):P.get___(j,R):C.get(j,R)})},has___:{value:S(function(j){return C.has(j)||!!P&&P.has___(j)})},set___:{value:S(L)},delete___:{value:S(function(j){var R=!!C.delete(j);return P&&P.delete___(j)||R})},permitHostObjects___:{value:S(function(j){if(j!==m)throw new Error("bogus call to permitHostObjects___");I=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=p.prototype,d.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=p)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function w(E){return!(E.substr(0,c.length)==c&&"___"===E.substr(E.length-3))}function u(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[h];if(L&&L.key===E)return L;if(i(E)){L={key:E};try{return a(E,h,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function _(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(d,s,t){var o=t(7178);d.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:o(n,r)}}},7178:function(d){d.exports=function(s,t){var o={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):o},writable:!0}),o}},4037:function(d,s,t){var o=t(9222);d.exports=function(){var r=o();return{get:function(n,a){var i=r(n);return i.hasOwnProperty("value")?i.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(d){"use strict";var s,t;d.exports=(s=function(){return function(s,t,o,r,n,a){var i=s[0],c=o[0],h=[0],f=c;r|=0;var x=0,v=c;for(x=0;x<i;++x){var g=t[r]-a,y=t[r+f]-a;g>=0!=y>=0&&n.push(h[0]+.5+.5*(g+y)/(g-y)),r+=v,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),t={},function(o,r,n){var a=o.dtype,i=o.order,c=[a,i.join()].join(),h=t[c];return h||(t[c]=h=s([a,i])),h(o.shape.slice(0),o.data,o.stride,0|o.offset,r,n)})},9584:function(d,s,t){"use strict";d.exports=function(r,n){var a=[];return n=+n||0,o(r.hi(r.shape[0]-1),a,n),a};var o=t(6183)},6601:function(){}},T={};function b(d){var s=T[d];if(void 0!==s)return s.exports;var t=T[d]={id:d,loaded:!1,exports:{}};return l[d].call(t.exports,t,t.exports,b),t.loaded=!0,t.exports}return b.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),b.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d},b(7386)}()},Q.exports=k()},12856:function(Q,z,e){"use strict";function l($,oe){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,me){return he.__proto__=me,he})($,oe)}function b($){if(void 0===$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d($){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)})($)}function s($){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(oe){return typeof oe}:function(oe){return oe&&"function"==typeof Symbol&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe})($)}var t=e(95341),o=e(95280),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;z.Buffer=i,z.SlowBuffer=function($){return+$!=$&&($=0),i.alloc(+$)},z.INSPECT_MAX_BYTES=50;var n=2147483647;function a($){if($>n)throw new RangeError('The value "'+$+'" is invalid for option "size"');var oe=new Uint8Array($);return Object.setPrototypeOf(oe,i.prototype),oe}function i($,oe,he){if("number"==typeof $){if("string"==typeof oe)throw new TypeError('The "string" argument must be of type string. Received type number');return f($)}return c($,oe,he)}function c($,oe,he){if("string"==typeof $)return function(Ie,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!i.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var ze=0|y(Ie,Pe),ce=a(ze),ge=ce.write(Ie,Pe);return ge!==ze&&(ce=ce.slice(0,ge)),ce}($,oe);if(ArrayBuffer.isView($))return function(Ie){if(Ee(Ie,Uint8Array)){var Pe=new Uint8Array(Ie);return v(Pe.buffer,Pe.byteOffset,Pe.byteLength)}return x(Ie)}($);if(null==$)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s($));if(Ee($,ArrayBuffer)||$&&Ee($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee($,SharedArrayBuffer)||$&&Ee($.buffer,SharedArrayBuffer)))return v($,oe,he);if("number"==typeof $)throw new TypeError('The "value" argument must not be of type number. Received type number');var me=$.valueOf&&$.valueOf();if(null!=me&&me!==$)return i.from(me,oe,he);var Me=function(Ie){if(i.isBuffer(Ie)){var Pe=0|g(Ie.length),ze=a(Pe);return 0===ze.length||Ie.copy(ze,0,0,Pe),ze}return void 0!==Ie.length?"number"!=typeof Ie.length||de(Ie.length)?a(0):x(Ie):"Buffer"===Ie.type&&Array.isArray(Ie.data)?x(Ie.data):void 0}($);if(Me)return Me;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof $[Symbol.toPrimitive])return i.from($[Symbol.toPrimitive]("string"),oe,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s($))}function h($){if("number"!=typeof $)throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function f($){return h($),a($<0?0:0|g($))}function x($){for(var oe=$.length<0?0:0|g($.length),he=a(oe),me=0;me<oe;me+=1)he[me]=255&$[me];return he}function v($,oe,he){if(oe<0||$.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<oe+(he||0))throw new RangeError('"length" is outside of buffer bounds');var me;return me=void 0===oe&&void 0===he?new Uint8Array($):void 0===he?new Uint8Array($,oe):new Uint8Array($,oe,he),Object.setPrototypeOf(me,i.prototype),me}function g($){if($>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|$}function y($,oe){if(i.isBuffer($))return $.length;if(ArrayBuffer.isView($)||Ee($,ArrayBuffer))return $.byteLength;if("string"!=typeof $)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+s($));var he=$.length,me=arguments.length>2&&!0===arguments[2];if(!me&&0===he)return 0;for(var Me=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return ye($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*he;case"hex":return he>>>1;case"base64":return se($).length;default:if(Me)return me?-1:ye($).length;oe=(""+oe).toLowerCase(),Me=!0}}function p($,oe,he){var me=!1;if((void 0===oe||oe<0)&&(oe=0),oe>this.length||((void 0===he||he>this.length)&&(he=this.length),he<=0)||(he>>>=0)<=(oe>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return F(this,oe,he);case"utf8":case"utf-8":return I(this,oe,he);case"ascii":return R(this,oe,he);case"latin1":case"binary":return H(this,oe,he);case"base64":return P(this,oe,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,oe,he);default:if(me)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),me=!0}}function m($,oe,he){var me=$[oe];$[oe]=$[he],$[he]=me}function w($,oe,he,me,Me){if(0===$.length)return-1;if("string"==typeof he?(me=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),de(he=+he)&&(he=Me?0:$.length-1),he<0&&(he=$.length+he),he>=$.length){if(Me)return-1;he=$.length-1}else if(he<0){if(!Me)return-1;he=0}if("string"==typeof oe&&(oe=i.from(oe,me)),i.isBuffer(oe))return 0===oe.length?-1:u($,oe,he,me,Me);if("number"==typeof oe)return oe&=255,"function"==typeof Uint8Array.prototype.indexOf?Me?Uint8Array.prototype.indexOf.call($,oe,he):Uint8Array.prototype.lastIndexOf.call($,oe,he):u($,[oe],he,me,Me);throw new TypeError("val must be string, number or Buffer")}function u($,oe,he,me,Me){var Ie,Pe=1,ze=$.length,ce=oe.length;if(void 0!==me&&("ucs2"===(me=String(me).toLowerCase())||"ucs-2"===me||"utf16le"===me||"utf-16le"===me)){if($.length<2||oe.length<2)return-1;Pe=2,ze/=2,ce/=2,he/=2}function ge(Ve,nt){return 1===Pe?Ve[nt]:Ve.readUInt16BE(nt*Pe)}if(Me){var _e=-1;for(Ie=he;Ie<ze;Ie++)if(ge($,Ie)===ge(oe,-1===_e?0:Ie-_e)){if(-1===_e&&(_e=Ie),Ie-_e+1===ce)return _e*Pe}else-1!==_e&&(Ie-=Ie-_e),_e=-1}else for(he+ce>ze&&(he=ze-ce),Ie=he;Ie>=0;Ie--){for(var De=!0,He=0;He<ce;He++)if(ge($,Ie+He)!==ge(oe,He)){De=!1;break}if(De)return Ie}return-1}function S($,oe,he,me){he=Number(he)||0;var Me=$.length-he;me?(me=Number(me))>Me&&(me=Me):me=Me;var Ie,Pe=oe.length;for(me>Pe/2&&(me=Pe/2),Ie=0;Ie<me;++Ie){var ze=parseInt(oe.substr(2*Ie,2),16);if(de(ze))return Ie;$[he+Ie]=ze}return Ie}function _($,oe,he,me){return fe(ye(oe,$.length-he),$,he,me)}function E($,oe,he,me){return fe(function(Me){for(var Ie=[],Pe=0;Pe<Me.length;++Pe)Ie.push(255&Me.charCodeAt(Pe));return Ie}(oe),$,he,me)}function L($,oe,he,me){return fe(se(oe),$,he,me)}function C($,oe,he,me){return fe(function(Me,Ie){for(var Pe,ze,ge=[],_e=0;_e<Me.length&&!((Ie-=2)<0);++_e)ze=(Pe=Me.charCodeAt(_e))>>8,ge.push(Pe%256),ge.push(ze);return ge}(oe,$.length-he),$,he,me)}function P($,oe,he){return t.fromByteArray(0===oe&&he===$.length?$:$.slice(oe,he))}function I($,oe,he){he=Math.min($.length,he);for(var me=[],Me=oe;Me<he;){var Ie=$[Me],Pe=null,ze=Ie>239?4:Ie>223?3:Ie>191?2:1;if(Me+ze<=he){var ce=void 0,ge=void 0,_e=void 0,De=void 0;switch(ze){case 1:Ie<128&&(Pe=Ie);break;case 2:128==(192&(ce=$[Me+1]))&&(De=(31&Ie)<<6|63&ce)>127&&(Pe=De);break;case 3:ge=$[Me+2],128==(192&(ce=$[Me+1]))&&128==(192&ge)&&(De=(15&Ie)<<12|(63&ce)<<6|63&ge)>2047&&(De<55296||De>57343)&&(Pe=De);break;case 4:ge=$[Me+2],_e=$[Me+3],128==(192&(ce=$[Me+1]))&&128==(192&ge)&&128==(192&_e)&&(De=(15&Ie)<<18|(63&ce)<<12|(63&ge)<<6|63&_e)>65535&&De<1114112&&(Pe=De)}}null===Pe?(Pe=65533,ze=1):Pe>65535&&(me.push((Pe-=65536)>>>10&1023|55296),Pe=56320|1023&Pe),me.push(Pe),Me+=ze}return function(He){var Ve=He.length;if(Ve<=j)return String.fromCharCode.apply(String,He);for(var nt="",tt=0;tt<Ve;)nt+=String.fromCharCode.apply(String,He.slice(tt,tt+=j));return nt}(me)}z.kMaxLength=n,(i.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf($,oe),42===$.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function($,oe,he){return c($,oe,he)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function($,oe,he){return Me=oe,Ie=he,h(me=$),me<=0?a(me):void 0!==Me?"string"==typeof Ie?a(me).fill(Me,Ie):a(me).fill(Me):a(me);var me,Me,Ie},i.allocUnsafe=function($){return f($)},i.allocUnsafeSlow=function($){return f($)},i.isBuffer=function($){return null!=$&&!0===$._isBuffer&&$!==i.prototype},i.compare=function($,oe){if(Ee($,Uint8Array)&&($=i.from($,$.offset,$.byteLength)),Ee(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer($)||!i.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===oe)return 0;for(var he=$.length,me=oe.length,Me=0,Ie=Math.min(he,me);Me<Ie;++Me)if($[Me]!==oe[Me]){he=$[Me],me=oe[Me];break}return he<me?-1:me<he?1:0},i.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function($,oe){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$.length)return i.alloc(0);var he;if(void 0===oe)for(oe=0,he=0;he<$.length;++he)oe+=$[he].length;var me=i.allocUnsafe(oe),Me=0;for(he=0;he<$.length;++he){var Ie=$[he];if(Ee(Ie,Uint8Array))Me+Ie.length>me.length?(i.isBuffer(Ie)||(Ie=i.from(Ie)),Ie.copy(me,Me)):Uint8Array.prototype.set.call(me,Ie,Me);else{if(!i.isBuffer(Ie))throw new TypeError('"list" argument must be an Array of Buffers');Ie.copy(me,Me)}Me+=Ie.length}return me},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<$;oe+=2)m(this,oe,oe+1);return this},i.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<$;oe+=4)m(this,oe,oe+3),m(this,oe+1,oe+2);return this},i.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<$;oe+=8)m(this,oe,oe+7),m(this,oe+1,oe+6),m(this,oe+2,oe+5),m(this,oe+3,oe+4);return this},i.prototype.toString=function(){var $=this.length;return 0===$?"":0===arguments.length?I(this,0,$):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function($){if(!i.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||0===i.compare(this,$)},i.prototype.inspect=function(){var $="",oe=z.INSPECT_MAX_BYTES;return $=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&($+=" ... "),"<Buffer "+$+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function($,oe,he,me,Me){if(Ee($,Uint8Array)&&($=i.from($,$.offset,$.byteLength)),!i.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+s($));if(void 0===oe&&(oe=0),void 0===he&&(he=$?$.length:0),void 0===me&&(me=0),void 0===Me&&(Me=this.length),oe<0||he>$.length||me<0||Me>this.length)throw new RangeError("out of range index");if(me>=Me&&oe>=he)return 0;if(me>=Me)return-1;if(oe>=he)return 1;if(this===$)return 0;for(var Ie=(Me>>>=0)-(me>>>=0),Pe=(he>>>=0)-(oe>>>=0),ze=Math.min(Ie,Pe),ce=this.slice(me,Me),ge=$.slice(oe,he),_e=0;_e<ze;++_e)if(ce[_e]!==ge[_e]){Ie=ce[_e],Pe=ge[_e];break}return Ie<Pe?-1:Pe<Ie?1:0},i.prototype.includes=function($,oe,he){return-1!==this.indexOf($,oe,he)},i.prototype.indexOf=function($,oe,he){return w(this,$,oe,he,!0)},i.prototype.lastIndexOf=function($,oe,he){return w(this,$,oe,he,!1)},i.prototype.write=function($,oe,he,me){if(void 0===oe)me="utf8",he=this.length,oe=0;else if(void 0===he&&"string"==typeof oe)me=oe,he=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(he)?(he>>>=0,void 0===me&&(me="utf8")):(me=he,he=void 0)}var Me=this.length-oe;if((void 0===he||he>Me)&&(he=Me),$.length>0&&(he<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var Ie=!1;;)switch(me){case"hex":return S(this,$,oe,he);case"utf8":case"utf-8":return _(this,$,oe,he);case"ascii":case"latin1":case"binary":return E(this,$,oe,he);case"base64":return L(this,$,oe,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,$,oe,he);default:if(Ie)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Ie=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function R($,oe,he){var me="";he=Math.min($.length,he);for(var Me=oe;Me<he;++Me)me+=String.fromCharCode(127&$[Me]);return me}function H($,oe,he){var me="";he=Math.min($.length,he);for(var Me=oe;Me<he;++Me)me+=String.fromCharCode($[Me]);return me}function F($,oe,he){var me=$.length;(!oe||oe<0)&&(oe=0),(!he||he<0||he>me)&&(he=me);for(var Me="",Ie=oe;Ie<he;++Ie)Me+=we[$[Ie]];return Me}function U($,oe,he){for(var me=$.slice(oe,he),Me="",Ie=0;Ie<me.length-1;Ie+=2)Me+=String.fromCharCode(me[Ie]+256*me[Ie+1]);return Me}function B($,oe,he){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+oe>he)throw new RangeError("Trying to access beyond buffer length")}function N($,oe,he,me,Me,Ie){if(!i.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>Me||oe<Ie)throw new RangeError('"value" argument is out of bounds');if(he+me>$.length)throw new RangeError("Index out of range")}function J($,oe,he,me,Me){ae(oe,me,Me,$,he,7);var Ie=Number(oe&BigInt(4294967295));$[he++]=Ie,$[he++]=Ie>>=8,$[he++]=Ie>>=8,$[he++]=Ie>>=8;var Pe=Number(oe>>BigInt(32)&BigInt(4294967295));return $[he++]=Pe,$[he++]=Pe>>=8,$[he++]=Pe>>=8,$[he++]=Pe>>=8,he}function Z($,oe,he,me,Me){ae(oe,me,Me,$,he,7);var Ie=Number(oe&BigInt(4294967295));$[he+7]=Ie,$[he+6]=Ie>>=8,$[he+5]=Ie>>=8,$[he+4]=Ie>>=8;var Pe=Number(oe>>BigInt(32)&BigInt(4294967295));return $[he+3]=Pe,$[he+2]=Pe>>=8,$[he+1]=Pe>>=8,$[he]=Pe>>=8,he+8}function V($,oe,he,me,Me,Ie){if(he+me>$.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function W($,oe,he,me,Me){return oe=+oe,he>>>=0,Me||V($,0,he,4),o.write($,oe,he,me,23,4),he+4}function X($,oe,he,me,Me){return oe=+oe,he>>>=0,Me||V($,0,he,8),o.write($,oe,he,me,52,8),he+8}i.prototype.slice=function($,oe){var he=this.length;($=~~$)<0?($+=he)<0&&($=0):$>he&&($=he),(oe=void 0===oe?he:~~oe)<0?(oe+=he)<0&&(oe=0):oe>he&&(oe=he),oe<$&&(oe=$);var me=this.subarray($,oe);return Object.setPrototypeOf(me,i.prototype),me},i.prototype.readUintLE=i.prototype.readUIntLE=function($,oe,he){$>>>=0,oe>>>=0,he||B($,oe,this.length);for(var me=this[$],Me=1,Ie=0;++Ie<oe&&(Me*=256);)me+=this[$+Ie]*Me;return me},i.prototype.readUintBE=i.prototype.readUIntBE=function($,oe,he){$>>>=0,oe>>>=0,he||B($,oe,this.length);for(var me=this[$+--oe],Me=1;oe>0&&(Me*=256);)me+=this[$+--oe]*Me;return me},i.prototype.readUint8=i.prototype.readUInt8=function($,oe){return $>>>=0,oe||B($,1,this.length),this[$]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function($,oe){return $>>>=0,oe||B($,2,this.length),this[$]|this[$+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function($,oe){return $>>>=0,oe||B($,2,this.length),this[$]<<8|this[$+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function($,oe){return $>>>=0,oe||B($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function($,oe){return $>>>=0,oe||B($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},i.prototype.readBigUInt64LE=ke(function($){le($>>>=0,"offset");var oe=this[$],he=this[$+7];void 0!==oe&&void 0!==he||pe($,this.length-8);var me=oe+this[++$]*Math.pow(2,8)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,24),Me=this[++$]+this[++$]*Math.pow(2,8)+this[++$]*Math.pow(2,16)+he*Math.pow(2,24);return BigInt(me)+(BigInt(Me)<<BigInt(32))}),i.prototype.readBigUInt64BE=ke(function($){le($>>>=0,"offset");var oe=this[$],he=this[$+7];void 0!==oe&&void 0!==he||pe($,this.length-8);var me=oe*Math.pow(2,24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+this[++$],Me=this[++$]*Math.pow(2,24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+he;return(BigInt(me)<<BigInt(32))+BigInt(Me)}),i.prototype.readIntLE=function($,oe,he){$>>>=0,oe>>>=0,he||B($,oe,this.length);for(var me=this[$],Me=1,Ie=0;++Ie<oe&&(Me*=256);)me+=this[$+Ie]*Me;return me>=(Me*=128)&&(me-=Math.pow(2,8*oe)),me},i.prototype.readIntBE=function($,oe,he){$>>>=0,oe>>>=0,he||B($,oe,this.length);for(var me=oe,Me=1,Ie=this[$+--me];me>0&&(Me*=256);)Ie+=this[$+--me]*Me;return Ie>=(Me*=128)&&(Ie-=Math.pow(2,8*oe)),Ie},i.prototype.readInt8=function($,oe){return $>>>=0,oe||B($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},i.prototype.readInt16LE=function($,oe){$>>>=0,oe||B($,2,this.length);var he=this[$]|this[$+1]<<8;return 32768&he?4294901760|he:he},i.prototype.readInt16BE=function($,oe){$>>>=0,oe||B($,2,this.length);var he=this[$+1]|this[$]<<8;return 32768&he?4294901760|he:he},i.prototype.readInt32LE=function($,oe){return $>>>=0,oe||B($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},i.prototype.readInt32BE=function($,oe){return $>>>=0,oe||B($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},i.prototype.readBigInt64LE=ke(function($){le($>>>=0,"offset");var oe=this[$],he=this[$+7];void 0!==oe&&void 0!==he||pe($,this.length-8);var me=this[$+4]+this[$+5]*Math.pow(2,8)+this[$+6]*Math.pow(2,16)+(he<<24);return(BigInt(me)<<BigInt(32))+BigInt(oe+this[++$]*Math.pow(2,8)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,24))}),i.prototype.readBigInt64BE=ke(function($){le($>>>=0,"offset");var oe=this[$],he=this[$+7];void 0!==oe&&void 0!==he||pe($,this.length-8);var me=(oe<<24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+this[++$];return(BigInt(me)<<BigInt(32))+BigInt(this[++$]*Math.pow(2,24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+he)}),i.prototype.readFloatLE=function($,oe){return $>>>=0,oe||B($,4,this.length),o.read(this,$,!0,23,4)},i.prototype.readFloatBE=function($,oe){return $>>>=0,oe||B($,4,this.length),o.read(this,$,!1,23,4)},i.prototype.readDoubleLE=function($,oe){return $>>>=0,oe||B($,8,this.length),o.read(this,$,!0,52,8)},i.prototype.readDoubleBE=function($,oe){return $>>>=0,oe||B($,8,this.length),o.read(this,$,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function($,oe,he,me){$=+$,oe>>>=0,he>>>=0,me||N(this,$,oe,he,Math.pow(2,8*he)-1,0);var Me=1,Ie=0;for(this[oe]=255&$;++Ie<he&&(Me*=256);)this[oe+Ie]=$/Me&255;return oe+he},i.prototype.writeUintBE=i.prototype.writeUIntBE=function($,oe,he,me){$=+$,oe>>>=0,he>>>=0,me||N(this,$,oe,he,Math.pow(2,8*he)-1,0);var Me=he-1,Ie=1;for(this[oe+Me]=255&$;--Me>=0&&(Ie*=256);)this[oe+Me]=$/Ie&255;return oe+he},i.prototype.writeUint8=i.prototype.writeUInt8=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,1,255,0),this[oe]=255&$,oe+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,2,65535,0),this[oe]=255&$,this[oe+1]=$>>>8,oe+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,2,65535,0),this[oe]=$>>>8,this[oe+1]=255&$,oe+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,4,4294967295,0),this[oe+3]=$>>>24,this[oe+2]=$>>>16,this[oe+1]=$>>>8,this[oe]=255&$,oe+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,4,4294967295,0),this[oe]=$>>>24,this[oe+1]=$>>>16,this[oe+2]=$>>>8,this[oe+3]=255&$,oe+4},i.prototype.writeBigUInt64LE=ke(function($){return J(this,$,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=ke(function($){return Z(this,$,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function($,oe,he,me){if($=+$,oe>>>=0,!me){var Me=Math.pow(2,8*he-1);N(this,$,oe,he,Me-1,-Me)}var Ie=0,Pe=1,ze=0;for(this[oe]=255&$;++Ie<he&&(Pe*=256);)$<0&&0===ze&&0!==this[oe+Ie-1]&&(ze=1),this[oe+Ie]=($/Pe>>0)-ze&255;return oe+he},i.prototype.writeIntBE=function($,oe,he,me){if($=+$,oe>>>=0,!me){var Me=Math.pow(2,8*he-1);N(this,$,oe,he,Me-1,-Me)}var Ie=he-1,Pe=1,ze=0;for(this[oe+Ie]=255&$;--Ie>=0&&(Pe*=256);)$<0&&0===ze&&0!==this[oe+Ie+1]&&(ze=1),this[oe+Ie]=($/Pe>>0)-ze&255;return oe+he},i.prototype.writeInt8=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,1,127,-128),$<0&&($=255+$+1),this[oe]=255&$,oe+1},i.prototype.writeInt16LE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,2,32767,-32768),this[oe]=255&$,this[oe+1]=$>>>8,oe+2},i.prototype.writeInt16BE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,2,32767,-32768),this[oe]=$>>>8,this[oe+1]=255&$,oe+2},i.prototype.writeInt32LE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,4,2147483647,-2147483648),this[oe]=255&$,this[oe+1]=$>>>8,this[oe+2]=$>>>16,this[oe+3]=$>>>24,oe+4},i.prototype.writeInt32BE=function($,oe,he){return $=+$,oe>>>=0,he||N(this,$,oe,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[oe]=$>>>24,this[oe+1]=$>>>16,this[oe+2]=$>>>8,this[oe+3]=255&$,oe+4},i.prototype.writeBigInt64LE=ke(function($){return J(this,$,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=ke(function($){return Z(this,$,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function($,oe,he){return W(this,$,oe,!0,he)},i.prototype.writeFloatBE=function($,oe,he){return W(this,$,oe,!1,he)},i.prototype.writeDoubleLE=function($,oe,he){return X(this,$,oe,!0,he)},i.prototype.writeDoubleBE=function($,oe,he){return X(this,$,oe,!1,he)},i.prototype.copy=function($,oe,he,me){if(!i.isBuffer($))throw new TypeError("argument should be a Buffer");if(he||(he=0),me||0===me||(me=this.length),oe>=$.length&&(oe=$.length),oe||(oe=0),me>0&&me<he&&(me=he),me===he||0===$.length||0===this.length)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),$.length-oe<me-he&&(me=$.length-oe+he);var Me=me-he;return this===$&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(oe,he,me):Uint8Array.prototype.set.call($,this.subarray(he,me),oe),Me},i.prototype.fill=function($,oe,he,me){if("string"==typeof $){if("string"==typeof oe?(me=oe,oe=0,he=this.length):"string"==typeof he&&(me=he,he=this.length),void 0!==me&&"string"!=typeof me)throw new TypeError("encoding must be a string");if("string"==typeof me&&!i.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(1===$.length){var Me=$.charCodeAt(0);("utf8"===me&&Me<128||"latin1"===me)&&($=Me)}}else"number"==typeof $?$&=255:"boolean"==typeof $&&($=Number($));if(oe<0||this.length<oe||this.length<he)throw new RangeError("Out of range index");if(he<=oe)return this;var Ie;if(oe>>>=0,he=void 0===he?this.length:he>>>0,$||($=0),"number"==typeof $)for(Ie=oe;Ie<he;++Ie)this[Ie]=$;else{var Pe=i.isBuffer($)?$:i.from($,me),ze=Pe.length;if(0===ze)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(Ie=0;Ie<he-oe;++Ie)this[Ie+oe]=Pe[Ie%ze]}return this};var K={};function ne($,oe,he){K[$]=function(me){!function(_e,De){if("function"!=typeof De&&null!==De)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(De&&De.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),De&&l(_e,De)}(ge,me);var Me,Ie,Pe,ze,ce=(Pe=ge,ze=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,De=d(Pe);if(ze){var He=d(this).constructor;_e=Reflect.construct(De,arguments,He)}else _e=De.apply(this,arguments);return function T($,oe){if(oe&&("object"===s(oe)||"function"==typeof oe))return oe;if(void 0!==oe)throw new TypeError("Derived constructors may only return object or undefined");return b($)}(this,_e)});function ge(){var _e;return function k($,oe){if(!($ instanceof oe))throw new TypeError("Cannot call a class as a function")}(this,ge),_e=ce.call(this),Object.defineProperty(b(_e),"message",{value:oe.apply(b(_e),arguments),writable:!0,configurable:!0}),_e.name="".concat(_e.name," [").concat($,"]"),delete _e.name,_e}return Me=ge,(Ie=[{key:"code",get:function(){return $},set:function(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat($,"]: ").concat(this.message)}}])&&function A($,oe){for(var he=0;he<oe.length;he++){var me=oe[he];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty($,me.key,me)}}(Me.prototype,Ie),Object.defineProperty(Me,"prototype",{writable:!1}),ge}(he)}function re($){for(var oe="",he=$.length,me="-"===$[0]?1:0;he>=me+4;he-=3)oe="_".concat($.slice(he-3,he)).concat(oe);return"".concat($.slice(0,he)).concat(oe)}function ae($,oe,he,me,Me,Ie){if($>he||$<oe){var Pe,ze="bigint"==typeof oe?"n":"";throw Pe=Ie>3?0===oe||oe===BigInt(0)?">= 0".concat(ze," and < 2").concat(ze," ** ").concat(8*(Ie+1)).concat(ze):">= -(2".concat(ze," ** ").concat(8*(Ie+1)-1).concat(ze,") and < 2 ** ")+"".concat(8*(Ie+1)-1).concat(ze):">= ".concat(oe).concat(ze," and <= ").concat(he).concat(ze),new K.ERR_OUT_OF_RANGE("value",Pe,$)}var ce,ge,_e;ce=me,_e=Ie,le(ge=Me,"offset"),void 0!==ce[ge]&&void 0!==ce[ge+_e]||pe(ge,ce.length-(_e+1))}function le($,oe){if("number"!=typeof $)throw new K.ERR_INVALID_ARG_TYPE(oe,"number",$)}function pe($,oe,he){throw Math.floor($)!==$?(le($,he),new K.ERR_OUT_OF_RANGE(he||"offset","an integer",$)):oe<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE(he||"offset",">= ".concat(he?1:0," and <= ").concat(oe),$)}ne("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?"".concat($," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function($,oe){return'The "'.concat($,'" argument must be of type number. Received type ').concat(s(oe))},TypeError),ne("ERR_OUT_OF_RANGE",function($,oe,he){var me='The value of "'.concat($,'" is out of range.'),Me=he;return Number.isInteger(he)&&Math.abs(he)>Math.pow(2,32)?Me=re(String(he)):"bigint"==typeof he&&(Me=String(he),(he>Math.pow(BigInt(2),BigInt(32))||he<-Math.pow(BigInt(2),BigInt(32)))&&(Me=re(Me)),Me+="n"),me+" It must be ".concat(oe,". Received ").concat(Me)},RangeError);var xe=/[^+/0-9A-Za-z-_]/g;function ye($,oe){var he;oe=oe||1/0;for(var me=$.length,Me=null,Ie=[],Pe=0;Pe<me;++Pe){if((he=$.charCodeAt(Pe))>55295&&he<57344){if(!Me){if(he>56319){(oe-=3)>-1&&Ie.push(239,191,189);continue}if(Pe+1===me){(oe-=3)>-1&&Ie.push(239,191,189);continue}Me=he;continue}if(he<56320){(oe-=3)>-1&&Ie.push(239,191,189),Me=he;continue}he=65536+(Me-55296<<10|he-56320)}else Me&&(oe-=3)>-1&&Ie.push(239,191,189);if(Me=null,he<128){if((oe-=1)<0)break;Ie.push(he)}else if(he<2048){if((oe-=2)<0)break;Ie.push(he>>6|192,63&he|128)}else if(he<65536){if((oe-=3)<0)break;Ie.push(he>>12|224,he>>6&63|128,63&he|128)}else{if(!(he<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;Ie.push(he>>18|240,he>>12&63|128,he>>6&63|128,63&he|128)}}return Ie}function se($){return t.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(xe,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}($))}function fe($,oe,he,me){var Me;for(Me=0;Me<me&&!(Me+he>=oe.length||Me>=$.length);++Me)oe[Me+he]=$[Me];return Me}function Ee($,oe){return $ instanceof oe||null!=$&&null!=$.constructor&&null!=$.constructor.name&&$.constructor.name===oe.name}function de($){return $!=$}var we=function(){for(var $="0123456789abcdef",oe=new Array(256),he=0;he<16;++he)for(var me=16*he,Me=0;Me<16;++Me)oe[me+Me]=$[he]+$[Me];return oe}();function ke($){return typeof BigInt>"u"?Te:$}function Te(){throw new Error("BigInt not supported")}},35791:function(Q){"use strict";Q.exports=A,Q.exports.isMobile=A,Q.exports.default=A;var z=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,k=/android|ipad|playbook|silk/i;function A(l){l||(l={});var T=l.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&"string"==typeof T.headers["user-agent"]&&(T=T.headers["user-agent"]),"string"!=typeof T)return!1;var b=z.test(T)&&!e.test(T)||!!l.tablet&&k.test(T);return!b&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==T.indexOf("Macintosh")&&-1!==T.indexOf("Safari")&&(b=!0),b}},86781:function(Q,z,e){"use strict";e.r(z),e.d(z,{sankeyCenter:function(){return r},sankeyCircular:function(){return E},sankeyJustify:function(){return o},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var k=e(33064),A=e(15140),l=e(45879),T=e(2502),b=e.n(T);function d(se){return se.target.depth}function s(se){return se.depth}function t(se,fe){return fe-1-se.height}function o(se,fe){return se.sourceLinks.length?se.depth:fe-1}function r(se){return se.targetLinks.length?se.depth:se.sourceLinks.length?(0,k.VV)(se.sourceLinks,d)-1:0}function n(se){return function(){return se}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(se){return typeof se}:function(se){return se&&"function"==typeof Symbol&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se};function i(se,fe){return h(se.source,fe.source)||se.index-fe.index}function c(se,fe){return h(se.target,fe.target)||se.index-fe.index}function h(se,fe){return se.partOfCycle===fe.partOfCycle?se.y0-fe.y0:"top"===se.circularLinkType||"bottom"===fe.circularLinkType?-1:1}function f(se){return se.value}function x(se){return(se.y0+se.y1)/2}function v(se){return x(se.source)}function g(se){return x(se.target)}function y(se){return se.index}function p(se){return se.nodes}function m(se){return se.links}function w(se,fe){var Ee=se.get(fe);if(!Ee)throw new Error("missing: "+fe);return Ee}function u(se,fe){return fe(se)}var S=25,_=10;function E(){var se,fe,Ee=0,de=0,we=1,ke=1,Te=24,$=y,oe=o,he=p,me=m,Me=32,Ie=2,Pe=null;function ze(){var Ve={nodes:he.apply(null,arguments),links:me.apply(null,arguments)};(function ce(Ve){Ve.nodes.forEach(function(tt,at){tt.index=at,tt.sourceLinks=[],tt.targetLinks=[]});var nt=(0,A.UI)(Ve.nodes,$);Ve.links.forEach(function(tt,at){tt.index=at;var dt=tt.source,wt=tt.target;"object"!==(void 0===dt?"undefined":a(dt))&&(dt=tt.source=w(nt,dt)),"object"!==(void 0===wt?"undefined":a(wt))&&(wt=tt.target=w(nt,wt)),dt.sourceLinks.push(tt),wt.targetLinks.push(tt)})})(Ve),function L(se,fe,Ee){var de=0;if(null===Ee){for(var we=[],ke=0;ke<se.links.length;ke++){var Te=se.links[ke],$=Te.source.index,oe=Te.target.index;we[$]||(we[$]=[]),we[oe]||(we[oe]=[]),-1===we[$].indexOf(oe)&&we[$].push(oe)}var he=b()(we);he.sort(function(Ie,Pe){return Ie.length-Pe.length});var me={};for(ke=0;ke<he.length;ke++){var Me=he[ke].slice(-2);me[Me[0]]||(me[Me[0]]={}),me[Me[0]][Me[1]]=!0}se.links.forEach(function(Ie){var Pe=Ie.target.index,ze=Ie.source.index;Pe===ze||me[ze]&&me[ze][Pe]?(Ie.circular=!0,Ie.circularLinkID=de,de+=1):Ie.circular=!1})}else se.links.forEach(function(Ie){Ie.source[Ee]<Ie.target[Ee]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=de,de+=1)})}(Ve,0,Pe),function ge(Ve){Ve.nodes.forEach(function(nt){nt.partOfCycle=!1,nt.value=Math.max((0,k.Sm)(nt.sourceLinks,f),(0,k.Sm)(nt.targetLinks,f)),nt.sourceLinks.forEach(function(tt){tt.circular&&(nt.partOfCycle=!0,nt.circularLinkType=tt.circularLinkType)}),nt.targetLinks.forEach(function(tt){tt.circular&&(nt.partOfCycle=!0,nt.circularLinkType=tt.circularLinkType)})})}(Ve),function _e(Ve){var nt,tt,at;for(nt=Ve.nodes,tt=[],at=0;nt.length;++at,nt=tt,tt=[])nt.forEach(function(dt){dt.depth=at,dt.sourceLinks.forEach(function(wt){tt.indexOf(wt.target)<0&&!wt.circular&&tt.push(wt.target)})});for(nt=Ve.nodes,tt=[],at=0;nt.length;++at,nt=tt,tt=[])nt.forEach(function(dt){dt.height=at,dt.targetLinks.forEach(function(wt){tt.indexOf(wt.source)<0&&!wt.circular&&tt.push(wt.source)})});Ve.nodes.forEach(function(dt){dt.column=Math.floor(oe.call(null,dt,at))})}(Ve),C(Ve,$),function De(Ve,nt,tt){var at=(0,A.b1)().key(function(Lt){return Lt.column}).sortKeys(k.j2).entries(Ve.nodes).map(function(Lt){return Lt.values});(function(Lt){if(fe){var Ct=1/0;at.forEach(function(Ge){var Ze=ke*fe/(Ge.length+1);Ct=Ze<Ct?Ze:Ct}),se=Ct}var Ot=(0,k.VV)(at,function(Ge){return(ke-de-(Ge.length-1)*se)/(0,k.Sm)(Ge,f)});Ot*=.3,Ve.links.forEach(function(Ge){Ge.width=Ge.value*Ot});var Ge,Ze,Be,Ye,rt,Se,Ht=(Ze=0,Be=0,Ye=0,rt=0,Se=(0,k.Fp)((Ge=Ve).nodes,function(Re){return Re.column}),Ge.links.forEach(function(Re){Re.circular&&("top"==Re.circularLinkType?Ze+=Re.width:Be+=Re.width,0==Re.target.column&&(rt+=Re.width),Re.source.column==Se&&(Ye+=Re.width))}),{top:Ze=Ze>0?Ze+S+_:Ze,bottom:Be=Be>0?Be+S+_:Be,left:rt=rt>0?rt+S+_:rt,right:Ye=Ye>0?Ye+S+_:Ye}),It=function(Ge,Ze){var Be=(0,k.Fp)(Ge.nodes,function(Ke){return Ke.column}),Ye=we-Ee,rt=ke-de,Se=Ye/(Ye+Ze.right+Ze.left),Re=rt/(rt+Ze.top+Ze.bottom);return Ee=Ee*Se+Ze.left,we=0==Ze.right?we:we*Se,de=de*Re+Ze.top,ke*=Re,Ge.nodes.forEach(function(Ke){Ke.x0=Ee+Ke.column*((we-Ee-Te)/Be),Ke.x1=Ke.x0+Te}),Re}(Ve,Ht);Ot*=It,Ve.links.forEach(function(Ge){Ge.width=Ge.value*Ot}),at.forEach(function(Ge){var Ze=Ge.length;Ge.forEach(function(Be,Ye){Be.depth==at.length-1&&1==Ze||0==Be.depth&&1==Ze?(Be.y0=ke/2-Be.value*Ot,Be.y1=Be.y0+Be.value*Ot):Be.partOfCycle?0==I(Be,Lt)?(Be.y0=ke/2+Ye,Be.y1=Be.y0+Be.value*Ot):"top"==Be.circularLinkType?(Be.y0=de+Ye,Be.y1=Be.y0+Be.value*Ot):(Be.y0=ke-Be.value*Ot-Ye,Be.y1=Be.y0+Be.value*Ot):0==Ht.top||0==Ht.bottom?(Be.y0=(ke-de)/Ze*Ye,Be.y1=Be.y0+Be.value*Ot):(Be.y0=(ke-de)/2-Ze/2+Ye,Be.y1=Be.y0+Be.value*Ot)})})})(tt),_t();for(var dt=1,wt=nt;wt>0;--wt)bt(dt*=.99,tt),_t();function bt(Lt,Ct){var Ot=at.length;at.forEach(function(Ht){var It=Ht.length,Ge=Ht[0].depth;Ht.forEach(function(Ze){var Be;if((Ze.sourceLinks.length||Ze.targetLinks.length)&&!(Ze.partOfCycle&&I(Ze,Ct)>0))if(0==Ge&&1==It)Ze.y0=ke/2-(Be=Ze.y1-Ze.y0)/2,Ze.y1=ke/2+Be/2;else if(Ge==Ot-1&&1==It)Ze.y0=ke/2-(Be=Ze.y1-Ze.y0)/2,Ze.y1=ke/2+Be/2;else{var Ye=(0,k.J6)(Ze.sourceLinks,g),rt=(0,k.J6)(Ze.targetLinks,v),Se=((Ye&&rt?(Ye+rt)/2:Ye||rt)-x(Ze))*Lt;Ze.y0+=Se,Ze.y1+=Se}})})}function _t(){at.forEach(function(Lt){var Ct,Ot,Ht,It=de,Ge=Lt.length;for(Lt.sort(h),Ht=0;Ht<Ge;++Ht)(Ot=It-(Ct=Lt[Ht]).y0)>0&&(Ct.y0+=Ot,Ct.y1+=Ot),It=Ct.y1+se;if((Ot=It-se-ke)>0)for(It=Ct.y0-=Ot,Ct.y1-=Ot,Ht=Ge-2;Ht>=0;--Ht)(Ot=(Ct=Lt[Ht]).y1+se-It)>0&&(Ct.y0-=Ot,Ct.y1-=Ot),It=Ct.y0})}}(Ve,Me,$),He(Ve);for(var tt=0;tt<4;tt++)re(Ve,ke,$),ae(Ve,0,$),K(Ve,de,ke,$),re(Ve,ke,$),ae(Ve,0,$);return function ye(se,fe,Ee){var de=se.nodes,we=se.links,ke=!1,Te=!1;if(we.forEach(function(he){"top"==he.circularLinkType?ke=!0:"bottom"==he.circularLinkType&&(Te=!0)}),0==ke||0==Te){var $=(0,k.VV)(de,function(he){return he.y0}),oe=(Ee-fe)/((0,k.Fp)(de,function(he){return he.y1})-$);de.forEach(function(he){var me=(he.y1-he.y0)*oe;he.y0=(he.y0-$)*oe,he.y1=he.y0+me}),we.forEach(function(he){he.y0=(he.y0-$)*oe,he.y1=(he.y1-$)*oe,he.width=he.width*oe})}}(Ve,de,ke),H(Ve,Ie,ke,$),Ve}function He(Ve){Ve.nodes.forEach(function(nt){nt.sourceLinks.sort(c),nt.targetLinks.sort(i)}),Ve.nodes.forEach(function(nt){var tt=nt.y0,at=tt,dt=nt.y1,wt=dt;nt.sourceLinks.forEach(function(bt){bt.circular?(bt.y0=dt-bt.width/2,dt-=bt.width):(bt.y0=tt+bt.width/2,tt+=bt.width)}),nt.targetLinks.forEach(function(bt){bt.circular?(bt.y1=wt-bt.width/2,wt-=bt.width):(bt.y1=at+bt.width/2,at+=bt.width)})})}return ze.nodeId=function(Ve){return arguments.length?($="function"==typeof Ve?Ve:n(Ve),ze):$},ze.nodeAlign=function(Ve){return arguments.length?(oe="function"==typeof Ve?Ve:n(Ve),ze):oe},ze.nodeWidth=function(Ve){return arguments.length?(Te=+Ve,ze):Te},ze.nodePadding=function(Ve){return arguments.length?(se=+Ve,ze):se},ze.nodes=function(Ve){return arguments.length?(he="function"==typeof Ve?Ve:n(Ve),ze):he},ze.links=function(Ve){return arguments.length?(me="function"==typeof Ve?Ve:n(Ve),ze):me},ze.size=function(Ve){return arguments.length?(Ee=de=0,we=+Ve[0],ke=+Ve[1],ze):[we-Ee,ke-de]},ze.extent=function(Ve){return arguments.length?(Ee=+Ve[0][0],we=+Ve[1][0],de=+Ve[0][1],ke=+Ve[1][1],ze):[[Ee,de],[we,ke]]},ze.iterations=function(Ve){return arguments.length?(Me=+Ve,ze):Me},ze.circularLinkGap=function(Ve){return arguments.length?(Ie=+Ve,ze):Ie},ze.nodePaddingRatio=function(Ve){return arguments.length?(fe=+Ve,ze):fe},ze.sortNodes=function(Ve){return arguments.length?(Pe=Ve,ze):Pe},ze.update=function(Ve){return C(Ve,$),He(Ve),Ve.links.forEach(function(nt){nt.circular&&(nt.circularLinkType=nt.y0+nt.y1<ke?"top":"bottom",nt.source.circularLinkType=nt.circularLinkType,nt.target.circularLinkType=nt.circularLinkType)}),re(Ve,ke,$,!1),ae(Ve,0,$),H(Ve,Ie,ke,$),Ve},ze}function C(se,fe){var Ee=0,de=0;se.links.forEach(function(we){we.circular&&(we.circularLinkType=we.source.circularLinkType||we.target.circularLinkType?we.source.circularLinkType?we.source.circularLinkType:we.target.circularLinkType:Ee<de?"top":"bottom","top"==we.circularLinkType?Ee+=1:de+=1,se.nodes.forEach(function(ke){u(ke,fe)!=u(we.source,fe)&&u(ke,fe)!=u(we.target,fe)||(ke.circularLinkType=we.circularLinkType)}))}),se.links.forEach(function(we){we.circular&&(we.source.circularLinkType==we.target.circularLinkType&&(we.circularLinkType=we.source.circularLinkType),xe(we,fe)&&(we.circularLinkType=we.source.circularLinkType))})}function P(se){var fe=Math.abs(se.y1-se.y0),Ee=Math.abs(se.target.x0-se.source.x1);return Math.atan(Ee/fe)}function I(se,fe){var Ee=0;se.sourceLinks.forEach(function(we){Ee=we.circular&&!xe(we,fe)?Ee+1:Ee});var de=0;return se.targetLinks.forEach(function(we){de=we.circular&&!xe(we,fe)?de+1:de}),Ee+de}function j(se){var Ee=0;se.source.sourceLinks.forEach(function(ke){Ee=ke.circular?Ee+1:Ee});var we=0;return se.target.targetLinks.forEach(function(ke){we=ke.circular?we+1:we}),!(Ee>1||we>1)}function R(se,fe,Ee){return se.sort(F),se.forEach(function(de,we){var ke,Te,$=0;if(xe(de,Ee)&&j(de))de.circularPathData.verticalBuffer=$+de.width/2;else{for(var oe=0;oe<we;oe++)if(!((ke=se[we]).source.column<(Te=se[oe]).target.column||ke.target.column>Te.source.column)){var he=se[oe].circularPathData.verticalBuffer+se[oe].width/2+fe;$=he>$?he:$}de.circularPathData.verticalBuffer=$+de.width/2}}),se}function H(se,fe,Ee,de){var we=(0,k.VV)(se.links,function(ke){return ke.source.y0});se.links.forEach(function(ke){ke.circular&&(ke.circularPathData={})}),R(se.links.filter(function(ke){return"top"==ke.circularLinkType}),fe,de),R(se.links.filter(function(ke){return"bottom"==ke.circularLinkType}),fe,de),se.links.forEach(function(ke){if(ke.circular){if(ke.circularPathData.arcRadius=ke.width+_,ke.circularPathData.leftNodeBuffer=5,ke.circularPathData.rightNodeBuffer=5,ke.circularPathData.sourceWidth=ke.source.x1-ke.source.x0,ke.circularPathData.sourceX=ke.source.x0+ke.circularPathData.sourceWidth,ke.circularPathData.targetX=ke.target.x0,ke.circularPathData.sourceY=ke.y0,ke.circularPathData.targetY=ke.y1,xe(ke,de)&&j(ke))ke.circularPathData.leftSmallArcRadius=_+ke.width/2,ke.circularPathData.leftLargeArcRadius=_+ke.width/2,ke.circularPathData.rightSmallArcRadius=_+ke.width/2,ke.circularPathData.rightLargeArcRadius=_+ke.width/2,"bottom"==ke.circularLinkType?(ke.circularPathData.verticalFullExtent=ke.source.y1+S+ke.circularPathData.verticalBuffer,ke.circularPathData.verticalLeftInnerExtent=ke.circularPathData.verticalFullExtent-ke.circularPathData.leftLargeArcRadius,ke.circularPathData.verticalRightInnerExtent=ke.circularPathData.verticalFullExtent-ke.circularPathData.rightLargeArcRadius):(ke.circularPathData.verticalFullExtent=ke.source.y0-S-ke.circularPathData.verticalBuffer,ke.circularPathData.verticalLeftInnerExtent=ke.circularPathData.verticalFullExtent+ke.circularPathData.leftLargeArcRadius,ke.circularPathData.verticalRightInnerExtent=ke.circularPathData.verticalFullExtent+ke.circularPathData.rightLargeArcRadius);else{var Te=ke.source.column,$=ke.circularLinkType,oe=se.links.filter(function(Me){return Me.source.column==Te&&Me.circularLinkType==$});oe.sort("bottom"==ke.circularLinkType?B:U);var he=0;oe.forEach(function(Me,Ie){Me.circularLinkID==ke.circularLinkID&&(ke.circularPathData.leftSmallArcRadius=_+ke.width/2+he,ke.circularPathData.leftLargeArcRadius=_+ke.width/2+Ie*fe+he),he+=Me.width}),Te=ke.target.column,(oe=se.links.filter(function(Me){return Me.target.column==Te&&Me.circularLinkType==$})).sort("bottom"==ke.circularLinkType?J:N),he=0,oe.forEach(function(Me,Ie){Me.circularLinkID==ke.circularLinkID&&(ke.circularPathData.rightSmallArcRadius=_+ke.width/2+he,ke.circularPathData.rightLargeArcRadius=_+ke.width/2+Ie*fe+he),he+=Me.width}),"bottom"==ke.circularLinkType?(ke.circularPathData.verticalFullExtent=Math.max(Ee,ke.source.y1,ke.target.y1)+S+ke.circularPathData.verticalBuffer,ke.circularPathData.verticalLeftInnerExtent=ke.circularPathData.verticalFullExtent-ke.circularPathData.leftLargeArcRadius,ke.circularPathData.verticalRightInnerExtent=ke.circularPathData.verticalFullExtent-ke.circularPathData.rightLargeArcRadius):(ke.circularPathData.verticalFullExtent=we-S-ke.circularPathData.verticalBuffer,ke.circularPathData.verticalLeftInnerExtent=ke.circularPathData.verticalFullExtent+ke.circularPathData.leftLargeArcRadius,ke.circularPathData.verticalRightInnerExtent=ke.circularPathData.verticalFullExtent+ke.circularPathData.rightLargeArcRadius)}ke.circularPathData.leftInnerExtent=ke.circularPathData.sourceX+ke.circularPathData.leftNodeBuffer,ke.circularPathData.rightInnerExtent=ke.circularPathData.targetX-ke.circularPathData.rightNodeBuffer,ke.circularPathData.leftFullExtent=ke.circularPathData.sourceX+ke.circularPathData.leftLargeArcRadius+ke.circularPathData.leftNodeBuffer,ke.circularPathData.rightFullExtent=ke.circularPathData.targetX-ke.circularPathData.rightLargeArcRadius-ke.circularPathData.rightNodeBuffer}if(ke.circular)ke.path="top"==(Me=ke).circularLinkType?"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 0 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY-Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 0 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 0 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY-Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 0 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY:"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 1 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY+Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 1 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 1 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY+Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 1 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY;else{var me=(0,l.h5)().source(function(Me){return[Me.source.x0+(Me.source.x1-Me.source.x0),Me.y0]}).target(function(Me){return[Me.target.x0,Me.y1]});ke.path=me(ke)}var Me})}function F(se,fe){return Z(se)==Z(fe)?"bottom"==se.circularLinkType?B(se,fe):U(se,fe):Z(fe)-Z(se)}function U(se,fe){return se.y0-fe.y0}function B(se,fe){return fe.y0-se.y0}function N(se,fe){return se.y1-fe.y1}function J(se,fe){return fe.y1-se.y1}function Z(se){return se.target.column-se.source.column}function V(se){return se.target.x0-se.source.x1}function W(se,fe){var Ee=P(se),de=V(fe)/Math.tan(Ee);return"up"==pe(se)?se.y1+de:se.y1-de}function X(se,fe){var Ee=P(se),de=V(fe)/Math.tan(Ee);return"up"==pe(se)?se.y1-de:se.y1+de}function K(se,fe,Ee,de){se.links.forEach(function(we){if(!we.circular&&we.target.column-we.source.column>1){var ke=we.source.column+1,Te=we.target.column-1,$=1,oe=Te-ke+1;for($=1;ke<=Te;ke++,$++)se.nodes.forEach(function(he){if(he.column==ke){var me,Me=$/(oe+1),Ie=Math.pow(1-Me,3),Pe=3*Me*Math.pow(1-Me,2),ze=3*Math.pow(Me,2)*(1-Me),ce=Math.pow(Me,3),ge=Ie*we.y0+Pe*we.y0+ze*we.y1+ce*we.y1,_e=ge-we.width/2,De=ge+we.width/2;_e>he.y0&&_e<he.y1?(me=he.y1-_e+10,he=ne(he,me="bottom"==he.circularLinkType?me:-me,fe,Ee),se.nodes.forEach(function(He){var Ve,nt;u(He,de)!=u(he,de)&&He.column==he.column&&((Ve=he).y0>(nt=He).y0&&Ve.y0<nt.y1||Ve.y1>nt.y0&&Ve.y1<nt.y1||Ve.y0<nt.y0&&Ve.y1>nt.y1)&&ne(He,me,fe,Ee)})):(De>he.y0&&De<he.y1||_e<he.y0&&De>he.y1)&&(he=ne(he,me=De-he.y0+10,fe,Ee),se.nodes.forEach(function(He){u(He,de)!=u(he,de)&&He.column==he.column&&He.y0<he.y1&&He.y1>he.y1&&ne(He,me,fe,Ee)}))}})}})}function ne(se,fe,Ee,de){return se.y0+fe>=Ee&&se.y1+fe<=de&&(se.y0=se.y0+fe,se.y1=se.y1+fe,se.targetLinks.forEach(function(we){we.y1=we.y1+fe}),se.sourceLinks.forEach(function(we){we.y0=we.y0+fe})),se}function re(se,fe,Ee,de){se.nodes.forEach(function(we){de&&we.y+(we.y1-we.y0)>fe&&(we.y=we.y-(we.y+(we.y1-we.y0)-fe));var ke=se.links.filter(function(oe){return u(oe.source,Ee)==u(we,Ee)}),Te=ke.length;Te>1&&ke.sort(function(oe,he){if(!oe.circular&&!he.circular){if(oe.target.column==he.target.column||!le(oe,he))return oe.y1-he.y1;if(oe.target.column>he.target.column){var me=X(he,oe);return oe.y1-me}if(he.target.column>oe.target.column)return X(oe,he)-he.y1}return oe.circular&&!he.circular?"top"==oe.circularLinkType?-1:1:he.circular&&!oe.circular?"top"==he.circularLinkType?1:-1:oe.circular&&he.circular?oe.circularLinkType===he.circularLinkType&&"top"==oe.circularLinkType?oe.target.column===he.target.column?oe.target.y1-he.target.y1:he.target.column-oe.target.column:oe.circularLinkType===he.circularLinkType&&"bottom"==oe.circularLinkType?oe.target.column===he.target.column?he.target.y1-oe.target.y1:oe.target.column-he.target.column:"top"==oe.circularLinkType?-1:1:void 0});var $=we.y0;ke.forEach(function(oe){oe.y0=$+oe.width/2,$+=oe.width}),ke.forEach(function(oe,he){if("bottom"==oe.circularLinkType){for(var me=he+1,Me=0;me<Te;me++)Me+=ke[me].width;oe.y0=we.y1-Me-oe.width/2}})})}function ae(se,fe,Ee){se.nodes.forEach(function(de){var we=se.links.filter(function($){return u($.target,Ee)==u(de,Ee)}),ke=we.length;ke>1&&we.sort(function($,oe){if(!$.circular&&!oe.circular){if($.source.column==oe.source.column||!le($,oe))return $.y0-oe.y0;if(oe.source.column<$.source.column){var he=W(oe,$);return $.y0-he}if($.source.column<oe.source.column)return W($,oe)-oe.y0}return $.circular&&!oe.circular?"top"==$.circularLinkType?-1:1:oe.circular&&!$.circular?"top"==oe.circularLinkType?1:-1:$.circular&&oe.circular?$.circularLinkType===oe.circularLinkType&&"top"==$.circularLinkType?$.source.column===oe.source.column?$.source.y1-oe.source.y1:$.source.column-oe.source.column:$.circularLinkType===oe.circularLinkType&&"bottom"==$.circularLinkType?$.source.column===oe.source.column?$.source.y1-oe.source.y1:oe.source.column-$.source.column:"top"==$.circularLinkType?-1:1:void 0});var Te=de.y0;we.forEach(function($){$.y1=Te+$.width/2,Te+=$.width}),we.forEach(function($,oe){if("bottom"==$.circularLinkType){for(var he=oe+1,me=0;he<ke;he++)me+=we[he].width;$.y1=de.y1-me-$.width/2}})})}function le(se,fe){return pe(se)==pe(fe)}function pe(se){return se.y0-se.y1>0?"up":"down"}function xe(se,fe){return u(se.source,fe)==u(se.target,fe)}},30838:function(Q,z,e){"use strict";e.r(z),e.d(z,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return d},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return u},sankeyRight:function(){return b}});var k=e(33064),A=e(15140);function l(S){return S.target.depth}function T(S){return S.depth}function b(S,_){return _-1-S.height}function d(S,_){return S.sourceLinks.length?S.depth:_-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,k.VV)(S.sourceLinks,l)-1:0}function t(S){return function(){return S}}function o(S,_){return n(S.source,_.source)||S.index-_.index}function r(S,_){return n(S.target,_.target)||S.index-_.index}function n(S,_){return S.y0-_.y0}function a(S){return S.value}function i(S){return(S.y0+S.y1)/2}function c(S){return i(S.source)*S.value}function h(S){return i(S.target)*S.value}function f(S){return S.index}function x(S){return S.nodes}function v(S){return S.links}function g(S,_){var E=S.get(_);if(!E)throw new Error("missing: "+_);return E}function y(){var S=0,_=0,E=1,L=1,C=24,P=8,I=f,j=d,R=x,H=v,F=32;function U(){var W={nodes:R.apply(null,arguments),links:H.apply(null,arguments)};return function B(W){W.nodes.forEach(function(K,ne){K.index=ne,K.sourceLinks=[],K.targetLinks=[]});var X=(0,A.UI)(W.nodes,I);W.links.forEach(function(K,ne){K.index=ne;var re=K.source,ae=K.target;"object"!=typeof re&&(re=K.source=g(X,re)),"object"!=typeof ae&&(ae=K.target=g(X,ae)),re.sourceLinks.push(K),ae.targetLinks.push(K)})}(W),function N(W){W.nodes.forEach(function(X){X.value=Math.max((0,k.Sm)(X.sourceLinks,a),(0,k.Sm)(X.targetLinks,a))})}(W),function J(W){var X,K,ne;for(X=W.nodes,K=[],ne=0;X.length;++ne,X=K,K=[])X.forEach(function(ae){ae.depth=ne,ae.sourceLinks.forEach(function(le){K.indexOf(le.target)<0&&K.push(le.target)})});for(X=W.nodes,K=[],ne=0;X.length;++ne,X=K,K=[])X.forEach(function(ae){ae.height=ne,ae.targetLinks.forEach(function(le){K.indexOf(le.source)<0&&K.push(le.source)})});var re=(E-S-C)/(ne-1);W.nodes.forEach(function(ae){ae.x1=(ae.x0=S+Math.max(0,Math.min(ne-1,Math.floor(j.call(null,ae,ne))))*re)+C})}(W),function Z(W){var X=(0,A.b1)().key(function(pe){return pe.x0}).sortKeys(k.j2).entries(W.nodes).map(function(pe){return pe.values});(function(){var pe=(0,k.Fp)(X,function(se){return se.length}),xe=.6666666666666666*(L-_)/(pe-1);P>xe&&(P=xe);var ye=(0,k.VV)(X,function(se){return(L-_-(se.length-1)*P)/(0,k.Sm)(se,a)});X.forEach(function(se){se.forEach(function(fe,Ee){fe.y1=(fe.y0=Ee)+fe.value*ye})}),W.links.forEach(function(se){se.width=se.value*ye})})(),le();for(var K=1,ne=F;ne>0;--ne)ae(K*=.99),le(),re(K),le();function re(pe){X.forEach(function(xe){xe.forEach(function(ye){if(ye.targetLinks.length){var se=((0,k.Sm)(ye.targetLinks,c)/(0,k.Sm)(ye.targetLinks,a)-i(ye))*pe;ye.y0+=se,ye.y1+=se}})})}function ae(pe){X.slice().reverse().forEach(function(xe){xe.forEach(function(ye){if(ye.sourceLinks.length){var se=((0,k.Sm)(ye.sourceLinks,h)/(0,k.Sm)(ye.sourceLinks,a)-i(ye))*pe;ye.y0+=se,ye.y1+=se}})})}function le(){X.forEach(function(pe){var xe,ye,se,fe=_,Ee=pe.length;for(pe.sort(n),se=0;se<Ee;++se)(ye=fe-(xe=pe[se]).y0)>0&&(xe.y0+=ye,xe.y1+=ye),fe=xe.y1+P;if((ye=fe-P-L)>0)for(fe=xe.y0-=ye,xe.y1-=ye,se=Ee-2;se>=0;--se)(ye=(xe=pe[se]).y1+P-fe)>0&&(xe.y0-=ye,xe.y1-=ye),fe=xe.y0})}}(W),V(W),W}function V(W){W.nodes.forEach(function(X){X.sourceLinks.sort(r),X.targetLinks.sort(o)}),W.nodes.forEach(function(X){var K=X.y0,ne=K;X.sourceLinks.forEach(function(re){re.y0=K+re.width/2,K+=re.width}),X.targetLinks.forEach(function(re){re.y1=ne+re.width/2,ne+=re.width})})}return U.update=function(W){return V(W),W},U.nodeId=function(W){return arguments.length?(I="function"==typeof W?W:t(W),U):I},U.nodeAlign=function(W){return arguments.length?(j="function"==typeof W?W:t(W),U):j},U.nodeWidth=function(W){return arguments.length?(C=+W,U):C},U.nodePadding=function(W){return arguments.length?(P=+W,U):P},U.nodes=function(W){return arguments.length?(R="function"==typeof W?W:t(W),U):R},U.links=function(W){return arguments.length?(H="function"==typeof W?W:t(W),U):H},U.size=function(W){return arguments.length?(S=_=0,E=+W[0],L=+W[1],U):[E-S,L-_]},U.extent=function(W){return arguments.length?(S=+W[0][0],E=+W[1][0],_=+W[0][1],L=+W[1][1],U):[[S,_],[E,L]]},U.iterations=function(W){return arguments.length?(F=+W,U):F},U}var p=e(45879);function m(S){return[S.source.x1,S.y0]}function w(S){return[S.target.x0,S.y1]}function u(){return(0,p.h5)().source(m).target(w)}},39898:function(Q,z,e){var k,A;(function(){var l={version:"3.8.0"},T=[].slice,b=function(ee){return T.call(ee)},d=self.document;function s(ee){return ee&&(ee.ownerDocument||ee.document||ee).documentElement}function t(ee){return ee&&(ee.ownerDocument&&ee.ownerDocument.defaultView||ee.document&&ee||ee.defaultView)}if(d)try{b(d.documentElement.childNodes)}catch{b=function(ue){for(var Ae=ue.length,Oe=new Array(Ae);Ae--;)Oe[Ae]=ue[Ae];return Oe}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,r=o.setAttribute,n=o.setAttributeNS,a=this.CSSStyleDeclaration.prototype,i=a.setProperty;o.setAttribute=function(ue,Ae){r.call(this,ue,Ae+"")},o.setAttributeNS=function(ue,Ae,Oe){n.call(this,ue,Ae,Oe+"")},a.setProperty=function(ue,Ae,Oe){i.call(this,ue,Ae+"",Oe)}}function c(ee,ue){return ee<ue?-1:ee>ue?1:ee>=ue?0:NaN}function h(ee){return null===ee?NaN:+ee}function f(ee){return!isNaN(ee)}function x(ee){return{left:function(ue,Ae,Oe,Fe){for(arguments.length<3&&(Oe=0),arguments.length<4&&(Fe=ue.length);Oe<Fe;){var Ue=Oe+Fe>>>1;ee(ue[Ue],Ae)<0?Oe=Ue+1:Fe=Ue}return Oe},right:function(ue,Ae,Oe,Fe){for(arguments.length<3&&(Oe=0),arguments.length<4&&(Fe=ue.length);Oe<Fe;){var Ue=Oe+Fe>>>1;ee(ue[Ue],Ae)>0?Fe=Ue:Oe=Ue+1}return Oe}}}l.ascending=c,l.descending=function(ee,ue){return ue<ee?-1:ue>ee?1:ue>=ee?0:NaN},l.min=function(ee,ue){var Ae,Oe,Fe=-1,Ue=ee.length;if(1===arguments.length){for(;++Fe<Ue;)if(null!=(Oe=ee[Fe])&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ee[Fe])&&Ae>Oe&&(Ae=Oe)}else{for(;++Fe<Ue;)if(null!=(Oe=ue.call(ee,ee[Fe],Fe))&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ue.call(ee,ee[Fe],Fe))&&Ae>Oe&&(Ae=Oe)}return Ae},l.max=function(ee,ue){var Ae,Oe,Fe=-1,Ue=ee.length;if(1===arguments.length){for(;++Fe<Ue;)if(null!=(Oe=ee[Fe])&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ee[Fe])&&Oe>Ae&&(Ae=Oe)}else{for(;++Fe<Ue;)if(null!=(Oe=ue.call(ee,ee[Fe],Fe))&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ue.call(ee,ee[Fe],Fe))&&Oe>Ae&&(Ae=Oe)}return Ae},l.extent=function(ee,ue){var Ae,Oe,Fe,Ue=-1,We=ee.length;if(1===arguments.length){for(;++Ue<We;)if(null!=(Oe=ee[Ue])&&Oe>=Oe){Ae=Fe=Oe;break}for(;++Ue<We;)null!=(Oe=ee[Ue])&&(Ae>Oe&&(Ae=Oe),Fe<Oe&&(Fe=Oe))}else{for(;++Ue<We;)if(null!=(Oe=ue.call(ee,ee[Ue],Ue))&&Oe>=Oe){Ae=Fe=Oe;break}for(;++Ue<We;)null!=(Oe=ue.call(ee,ee[Ue],Ue))&&(Ae>Oe&&(Ae=Oe),Fe<Oe&&(Fe=Oe))}return[Ae,Fe]},l.sum=function(ee,ue){var Ae,Oe=0,Fe=ee.length,Ue=-1;if(1===arguments.length)for(;++Ue<Fe;)f(Ae=+ee[Ue])&&(Oe+=Ae);else for(;++Ue<Fe;)f(Ae=+ue.call(ee,ee[Ue],Ue))&&(Oe+=Ae);return Oe},l.mean=function(ee,ue){var Ae,Oe=0,Fe=ee.length,Ue=-1,We=Fe;if(1===arguments.length)for(;++Ue<Fe;)f(Ae=h(ee[Ue]))?Oe+=Ae:--We;else for(;++Ue<Fe;)f(Ae=h(ue.call(ee,ee[Ue],Ue)))?Oe+=Ae:--We;if(We)return Oe/We},l.quantile=function(ee,ue){var Ae=(ee.length-1)*ue+1,Oe=Math.floor(Ae),Fe=+ee[Oe-1],Ue=Ae-Oe;return Ue?Fe+Ue*(ee[Oe]-Fe):Fe},l.median=function(ee,ue){var Ae,Oe=[],Fe=ee.length,Ue=-1;if(1===arguments.length)for(;++Ue<Fe;)f(Ae=h(ee[Ue]))&&Oe.push(Ae);else for(;++Ue<Fe;)f(Ae=h(ue.call(ee,ee[Ue],Ue)))&&Oe.push(Ae);if(Oe.length)return l.quantile(Oe.sort(c),.5)},l.variance=function(ee,ue){var Ae,Oe,Fe=ee.length,Ue=0,We=0,Je=-1,it=0;if(1===arguments.length)for(;++Je<Fe;)f(Ae=h(ee[Je]))&&(We+=(Oe=Ae-Ue)*(Ae-(Ue+=Oe/++it)));else for(;++Je<Fe;)f(Ae=h(ue.call(ee,ee[Je],Je)))&&(We+=(Oe=Ae-Ue)*(Ae-(Ue+=Oe/++it)));if(it>1)return We/(it-1)},l.deviation=function(){var ee=l.variance.apply(this,arguments);return ee&&Math.sqrt(ee)};var v=x(c);function g(ee){return ee.length}l.bisectLeft=v.left,l.bisect=l.bisectRight=v.right,l.bisector=function(ee){return x(1===ee.length?function(ue,Ae){return c(ee(ue),Ae)}:ee)},l.shuffle=function(ee,ue,Ae){(Ue=arguments.length)<3&&(Ae=ee.length,Ue<2&&(ue=0));for(var Oe,Fe,Ue=Ae-ue;Ue;)Fe=Math.random()*Ue--|0,Oe=ee[Ue+ue],ee[Ue+ue]=ee[Fe+ue],ee[Fe+ue]=Oe;return ee},l.permute=function(ee,ue){for(var Ae=ue.length,Oe=new Array(Ae);Ae--;)Oe[Ae]=ee[ue[Ae]];return Oe},l.pairs=function(ee){for(var ue=0,Ae=ee.length-1,Oe=ee[0],Fe=new Array(Ae<0?0:Ae);ue<Ae;)Fe[ue]=[Oe,Oe=ee[++ue]];return Fe},l.transpose=function(ee){if(!(Fe=ee.length))return[];for(var ue=-1,Ae=l.min(ee,g),Oe=new Array(Ae);++ue<Ae;)for(var Fe,Ue=-1,We=Oe[ue]=new Array(Fe);++Ue<Fe;)We[Ue]=ee[Ue][ue];return Oe},l.zip=function(){return l.transpose(arguments)},l.keys=function(ee){var ue=[];for(var Ae in ee)ue.push(Ae);return ue},l.values=function(ee){var ue=[];for(var Ae in ee)ue.push(ee[Ae]);return ue},l.entries=function(ee){var ue=[];for(var Ae in ee)ue.push({key:Ae,value:ee[Ae]});return ue},l.merge=function(ee){for(var ue,Ae,Oe,Fe=ee.length,Ue=-1,We=0;++Ue<Fe;)We+=ee[Ue].length;for(Ae=new Array(We);--Fe>=0;)for(ue=(Oe=ee[Fe]).length;--ue>=0;)Ae[--We]=Oe[ue];return Ae};var y=Math.abs;function m(ee,ue){for(var Ae in ue)Object.defineProperty(ee.prototype,Ae,{value:ue[Ae],enumerable:!1})}function w(){this._=Object.create(null)}function u(ee){return"__proto__"==(ee+="")||"\0"===ee[0]?"\0"+ee:ee}function S(ee){return"\0"===(ee+="")[0]?ee.slice(1):ee}function _(ee){return u(ee)in this._}function E(ee){return(ee=u(ee))in this._&&delete this._[ee]}function L(){var ee=[];for(var ue in this._)ee.push(S(ue));return ee}function C(){var ee=0;for(var ue in this._)++ee;return ee}function P(){for(var ee in this._)return!1;return!0}function I(){this._=Object.create(null)}function j(ee){return ee}function R(ee,ue,Ae){return function(){var Oe=Ae.apply(ue,arguments);return Oe===ue?ee:Oe}}function H(ee,ue){if(ue in ee)return ue;ue=ue.charAt(0).toUpperCase()+ue.slice(1);for(var Ae=0,Oe=F.length;Ae<Oe;++Ae){var Fe=F[Ae]+ue;if(Fe in ee)return Fe}}l.range=function(ee,ue,Ae){if(arguments.length<3&&(Ae=1,arguments.length<2&&(ue=ee,ee=0)),(ue-ee)/Ae==1/0)throw new Error("infinite range");var Oe,Fe=[],Ue=function p(ee){for(var ue=1;ee*ue%1;)ue*=10;return ue}(y(Ae)),We=-1;if(ee*=Ue,ue*=Ue,(Ae*=Ue)<0)for(;(Oe=ee+Ae*++We)>ue;)Fe.push(Oe/Ue);else for(;(Oe=ee+Ae*++We)<ue;)Fe.push(Oe/Ue);return Fe},l.map=function(ee,ue){var Ae=new w;if(ee instanceof w)ee.forEach(function(Je,it){Ae.set(Je,it)});else if(Array.isArray(ee)){var Oe,Fe=-1,Ue=ee.length;if(1===arguments.length)for(;++Fe<Ue;)Ae.set(Fe,ee[Fe]);else for(;++Fe<Ue;)Ae.set(ue.call(ee,Oe=ee[Fe],Fe),Oe)}else for(var We in ee)Ae.set(We,ee[We]);return Ae},m(w,{has:_,get:function(ee){return this._[u(ee)]},set:function(ee,ue){return this._[u(ee)]=ue},remove:E,keys:L,values:function(){var ee=[];for(var ue in this._)ee.push(this._[ue]);return ee},entries:function(){var ee=[];for(var ue in this._)ee.push({key:S(ue),value:this._[ue]});return ee},size:C,empty:P,forEach:function(ee){for(var ue in this._)ee.call(this,S(ue),this._[ue])}}),l.nest=function(){var ee,ue,Ae={},Oe=[],Fe=[];function Ue(Je,it,ut){if(ut>=Oe.length)return ue?ue.call(Ae,it):ee?it.sort(ee):it;for(var St,Dt,Ft,Wt,cn=-1,Yt=it.length,en=Oe[ut++],Xt=new w;++cn<Yt;)(Wt=Xt.get(St=en(Dt=it[cn])))?Wt.push(Dt):Xt.set(St,[Dt]);return Je?(Dt=Je(),Ft=function(bn,gn){Dt.set(bn,Ue(Je,gn,ut))}):(Dt={},Ft=function(bn,gn){Dt[bn]=Ue(Je,gn,ut)}),Xt.forEach(Ft),Dt}function We(Je,it){if(it>=Oe.length)return Je;var ut=[],St=Fe[it++];return Je.forEach(function(Dt,Ft){ut.push({key:Dt,values:We(Ft,it)})}),St?ut.sort(function(Dt,Ft){return St(Dt.key,Ft.key)}):ut}return Ae.map=function(Je,it){return Ue(it,Je,0)},Ae.entries=function(Je){return We(Ue(l.map,Je,0),0)},Ae.key=function(Je){return Oe.push(Je),Ae},Ae.sortKeys=function(Je){return Fe[Oe.length-1]=Je,Ae},Ae.sortValues=function(Je){return ee=Je,Ae},Ae.rollup=function(Je){return ue=Je,Ae},Ae},l.set=function(ee){var ue=new I;if(ee)for(var Ae=0,Oe=ee.length;Ae<Oe;++Ae)ue.add(ee[Ae]);return ue},m(I,{has:_,add:function(ee){return this._[u(ee+="")]=!0,ee},remove:E,values:L,size:C,empty:P,forEach:function(ee){for(var ue in this._)ee.call(this,S(ue))}}),l.behavior={},l.rebind=function(ee,ue){for(var Ae,Oe=1,Fe=arguments.length;++Oe<Fe;)ee[Ae=arguments[Oe]]=R(ee,ue,ue[Ae]);return ee};var F=["webkit","ms","moz","Moz","o","O"];function U(){}function B(){}function N(ee){var ue=[],Ae=new w;function Oe(){for(var Fe,Ue=ue,We=-1,Je=Ue.length;++We<Je;)(Fe=Ue[We].on)&&Fe.apply(this,arguments);return ee}return Oe.on=function(Fe,Ue){var We,Je=Ae.get(Fe);return arguments.length<2?Je&&Je.on:(Je&&(Je.on=null,ue=ue.slice(0,We=ue.indexOf(Je)).concat(ue.slice(We+1)),Ae.remove(Fe)),Ue&&ue.push(Ae.set(Fe,{on:Ue})),ee)},Oe}function J(){l.event.preventDefault()}function Z(){for(var ee,ue=l.event;ee=ue.sourceEvent;)ue=ee;return ue}function V(ee){for(var ue=new B,Ae=0,Oe=arguments.length;++Ae<Oe;)ue[arguments[Ae]]=N(ue);return ue.of=function(Fe,Ue){return function(We){try{var Je=We.sourceEvent=l.event;We.target=ee,l.event=We,ue[We.type].apply(Fe,Ue)}finally{l.event=Je}}},ue}l.dispatch=function(){for(var ee=new B,ue=-1,Ae=arguments.length;++ue<Ae;)ee[arguments[ue]]=N(ee);return ee},B.prototype.on=function(ee,ue){var Ae=ee.indexOf("."),Oe="";if(Ae>=0&&(Oe=ee.slice(Ae+1),ee=ee.slice(0,Ae)),ee)return arguments.length<2?this[ee].on(Oe):this[ee].on(Oe,ue);if(2===arguments.length){if(null==ue)for(ee in this)this.hasOwnProperty(ee)&&this[ee].on(Oe,null);return this}},l.event=null,l.requote=function(ee){return ee.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(ee,ue){ee.__proto__=ue}:function(ee,ue){for(var Ae in ue)ee[Ae]=ue[Ae]};function K(ee){return X(ee,le),ee}var ne=function(ee,ue){return ue.querySelector(ee)},re=function(ee,ue){return ue.querySelectorAll(ee)},ae=function(ee,ue){var Ae=ee.matches||ee[H(ee,"matchesSelector")];return(ae=function(Oe,Fe){return Ae.call(Oe,Fe)})(ee,ue)};"function"==typeof Sizzle&&(ne=function(ee,ue){return Sizzle(ee,ue)[0]||null},re=Sizzle,ae=Sizzle.matchesSelector),l.selection=function(){return l.select(d.documentElement)};var le=l.selection.prototype=[];function pe(ee){return"function"==typeof ee?ee:function(){return ne(ee,this)}}function xe(ee){return"function"==typeof ee?ee:function(){return re(ee,this)}}le.select=function(ee){var ue,Ae,Oe,Fe,Ue=[];ee=pe(ee);for(var We=-1,Je=this.length;++We<Je;){Ue.push(ue=[]),ue.parentNode=(Oe=this[We]).parentNode;for(var it=-1,ut=Oe.length;++it<ut;)(Fe=Oe[it])?(ue.push(Ae=ee.call(Fe,Fe.__data__,it,We)),Ae&&"__data__"in Fe&&(Ae.__data__=Fe.__data__)):ue.push(null)}return K(Ue)},le.selectAll=function(ee){var ue,Ae,Oe=[];ee=xe(ee);for(var Fe=-1,Ue=this.length;++Fe<Ue;)for(var We=this[Fe],Je=-1,it=We.length;++Je<it;)(Ae=We[Je])&&(Oe.push(ue=b(ee.call(Ae,Ae.__data__,Je,Fe))),ue.parentNode=Ae);return K(Oe)};var ye="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:ye,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fe(ee,ue){return ee=l.ns.qualify(ee),null==ue?ee.local?function(){this.removeAttributeNS(ee.space,ee.local)}:function(){this.removeAttribute(ee)}:"function"==typeof ue?ee.local?function(){var Ae=ue.apply(this,arguments);null==Ae?this.removeAttributeNS(ee.space,ee.local):this.setAttributeNS(ee.space,ee.local,Ae)}:function(){var Ae=ue.apply(this,arguments);null==Ae?this.removeAttribute(ee):this.setAttribute(ee,Ae)}:ee.local?function(){this.setAttributeNS(ee.space,ee.local,ue)}:function(){this.setAttribute(ee,ue)}}function Ee(ee){return ee.trim().replace(/\s+/g," ")}function de(ee){return new RegExp("(?:^|\\s+)"+l.requote(ee)+"(?:\\s+|$)","g")}function we(ee){return(ee+"").trim().split(/^|\s+/)}function ke(ee,ue){var Ae=(ee=we(ee).map(Te)).length;return"function"==typeof ue?function(){for(var Oe=-1,Fe=ue.apply(this,arguments);++Oe<Ae;)ee[Oe](this,Fe)}:function(){for(var Oe=-1;++Oe<Ae;)ee[Oe](this,ue)}}function Te(ee){var ue=de(ee);return function(Ae,Oe){if(Fe=Ae.classList)return Oe?Fe.add(ee):Fe.remove(ee);var Fe=Ae.getAttribute("class")||"";Oe?(ue.lastIndex=0,ue.test(Fe)||Ae.setAttribute("class",Ee(Fe+" "+ee))):Ae.setAttribute("class",Ee(Fe.replace(ue," ")))}}function $(ee,ue,Ae){return null==ue?function(){this.style.removeProperty(ee)}:"function"==typeof ue?function(){var Oe=ue.apply(this,arguments);null==Oe?this.style.removeProperty(ee):this.style.setProperty(ee,Oe,Ae)}:function(){this.style.setProperty(ee,ue,Ae)}}function oe(ee,ue){return null==ue?function(){delete this[ee]}:"function"==typeof ue?function(){var Ae=ue.apply(this,arguments);null==Ae?delete this[ee]:this[ee]=Ae}:function(){this[ee]=ue}}function he(ee){return"function"==typeof ee?ee:(ee=l.ns.qualify(ee)).local?function(){return this.ownerDocument.createElementNS(ee.space,ee.local)}:function(){var ue=this.ownerDocument,Ae=this.namespaceURI;return Ae===ye&&ue.documentElement.namespaceURI===ye?ue.createElement(ee):ue.createElementNS(Ae,ee)}}function me(){var ee=this.parentNode;ee&&ee.removeChild(this)}function Me(ee){return{__data__:ee}}function Ie(ee){return function(){return ae(this,ee)}}function Pe(ee){return arguments.length||(ee=c),function(ue,Ae){return ue&&Ae?ee(ue.__data__,Ae.__data__):!ue-!Ae}}function ze(ee,ue){for(var Ae=0,Oe=ee.length;Ae<Oe;Ae++)for(var Fe,Ue=ee[Ae],We=0,Je=Ue.length;We<Je;We++)(Fe=Ue[We])&&ue(Fe,We,Ae);return ee}function ce(ee){return X(ee,ge),ee}l.ns={prefix:se,qualify:function(ee){var ue=ee.indexOf(":"),Ae=ee;return ue>=0&&"xmlns"!==(Ae=ee.slice(0,ue))&&(ee=ee.slice(ue+1)),se.hasOwnProperty(Ae)?{space:se[Ae],local:ee}:ee}},le.attr=function(ee,ue){if(arguments.length<2){if("string"==typeof ee){var Ae=this.node();return(ee=l.ns.qualify(ee)).local?Ae.getAttributeNS(ee.space,ee.local):Ae.getAttribute(ee)}for(ue in ee)this.each(fe(ue,ee[ue]));return this}return this.each(fe(ee,ue))},le.classed=function(ee,ue){if(arguments.length<2){if("string"==typeof ee){var Ae=this.node(),Oe=(ee=we(ee)).length,Fe=-1;if(ue=Ae.classList){for(;++Fe<Oe;)if(!ue.contains(ee[Fe]))return!1}else for(ue=Ae.getAttribute("class");++Fe<Oe;)if(!de(ee[Fe]).test(ue))return!1;return!0}for(ue in ee)this.each(ke(ue,ee[ue]));return this}return this.each(ke(ee,ue))},le.style=function(ee,ue,Ae){var Oe=arguments.length;if(Oe<3){if("string"!=typeof ee){for(Ae in Oe<2&&(ue=""),ee)this.each($(Ae,ee[Ae],ue));return this}if(Oe<2){var Fe=this.node();return t(Fe).getComputedStyle(Fe,null).getPropertyValue(ee)}Ae=""}return this.each($(ee,ue,Ae))},le.property=function(ee,ue){if(arguments.length<2){if("string"==typeof ee)return this.node()[ee];for(ue in ee)this.each(oe(ue,ee[ue]));return this}return this.each(oe(ee,ue))},le.text=function(ee){return arguments.length?this.each("function"==typeof ee?function(){var ue=ee.apply(this,arguments);this.textContent=ue??""}:null==ee?function(){this.textContent=""}:function(){this.textContent=ee}):this.node().textContent},le.html=function(ee){return arguments.length?this.each("function"==typeof ee?function(){var ue=ee.apply(this,arguments);this.innerHTML=ue??""}:null==ee?function(){this.innerHTML=""}:function(){this.innerHTML=ee}):this.node().innerHTML},le.append=function(ee){return ee=he(ee),this.select(function(){return this.appendChild(ee.apply(this,arguments))})},le.insert=function(ee,ue){return ee=he(ee),ue=pe(ue),this.select(function(){return this.insertBefore(ee.apply(this,arguments),ue.apply(this,arguments)||null)})},le.remove=function(){return this.each(me)},le.data=function(ee,ue){var Ae,Oe,Fe=-1,Ue=this.length;if(!arguments.length){for(ee=new Array(Ue=(Ae=this[0]).length);++Fe<Ue;)(Oe=Ae[Fe])&&(ee[Fe]=Oe.__data__);return ee}function We(St,Dt){var Ft,Wt,cn,Yt=St.length,en=Dt.length,Xt=Math.min(Yt,en),bn=new Array(en),gn=new Array(en),$t=new Array(Yt);if(ue){var On,Dn=new w,Yn=new Array(Yt);for(Ft=-1;++Ft<Yt;)(Wt=St[Ft])&&(Dn.has(On=ue.call(Wt,Wt.__data__,Ft))?$t[Ft]=Wt:Dn.set(On,Wt),Yn[Ft]=On);for(Ft=-1;++Ft<en;)(Wt=Dn.get(On=ue.call(Dt,cn=Dt[Ft],Ft)))?!0!==Wt&&(bn[Ft]=Wt,Wt.__data__=cn):gn[Ft]=Me(cn),Dn.set(On,!0);for(Ft=-1;++Ft<Yt;)Ft in Yn&&!0!==Dn.get(Yn[Ft])&&($t[Ft]=St[Ft])}else{for(Ft=-1;++Ft<Xt;)cn=Dt[Ft],(Wt=St[Ft])?(Wt.__data__=cn,bn[Ft]=Wt):gn[Ft]=Me(cn);for(;Ft<en;++Ft)gn[Ft]=Me(Dt[Ft]);for(;Ft<Yt;++Ft)$t[Ft]=St[Ft]}gn.update=bn,gn.parentNode=bn.parentNode=$t.parentNode=St.parentNode,Je.push(gn),it.push(bn),ut.push($t)}var Je=ce([]),it=K([]),ut=K([]);if("function"==typeof ee)for(;++Fe<Ue;)We(Ae=this[Fe],ee.call(Ae,Ae.parentNode.__data__,Fe));else for(;++Fe<Ue;)We(Ae=this[Fe],ee);return it.enter=function(){return Je},it.exit=function(){return ut},it},le.datum=function(ee){return arguments.length?this.property("__data__",ee):this.property("__data__")},le.filter=function(ee){var ue,Ae,Oe,Fe=[];"function"!=typeof ee&&(ee=Ie(ee));for(var Ue=0,We=this.length;Ue<We;Ue++){Fe.push(ue=[]),ue.parentNode=(Ae=this[Ue]).parentNode;for(var Je=0,it=Ae.length;Je<it;Je++)(Oe=Ae[Je])&&ee.call(Oe,Oe.__data__,Je,Ue)&&ue.push(Oe)}return K(Fe)},le.order=function(){for(var ee=-1,ue=this.length;++ee<ue;)for(var Ae,Oe=this[ee],Fe=Oe.length-1,Ue=Oe[Fe];--Fe>=0;)(Ae=Oe[Fe])&&(Ue&&Ue!==Ae.nextSibling&&Ue.parentNode.insertBefore(Ae,Ue),Ue=Ae);return this},le.sort=function(ee){ee=Pe.apply(this,arguments);for(var ue=-1,Ae=this.length;++ue<Ae;)this[ue].sort(ee);return this.order()},le.each=function(ee){return ze(this,function(ue,Ae,Oe){ee.call(ue,ue.__data__,Ae,Oe)})},le.call=function(ee){var ue=b(arguments);return ee.apply(ue[0]=this,ue),this},le.empty=function(){return!this.node()},le.node=function(){for(var ee=0,ue=this.length;ee<ue;ee++)for(var Ae=this[ee],Oe=0,Fe=Ae.length;Oe<Fe;Oe++){var Ue=Ae[Oe];if(Ue)return Ue}return null},le.size=function(){var ee=0;return ze(this,function(){++ee}),ee};var ge=[];function De(ee,ue,Ae){var Oe="__on"+ee,Fe=ee.indexOf("."),Ue=Ve;Fe>0&&(ee=ee.slice(0,Fe));var We=He.get(ee);function Je(){var it=this[Oe];it&&(this.removeEventListener(ee,it,it.$),delete this[Oe])}return We&&(ee=We,Ue=nt),Fe?ue?function(){var it=Ue(ue,b(arguments));Je.call(this),this.addEventListener(ee,this[Oe]=it,it.$=Ae),it._=ue}:Je:ue?U:function(){var it,ut=new RegExp("^__on([^.]+)"+l.requote(ee)+"$");for(var St in this)if(it=St.match(ut)){var Dt=this[St];this.removeEventListener(it[1],Dt,Dt.$),delete this[St]}}}l.selection.enter=ce,l.selection.enter.prototype=ge,ge.append=le.append,ge.empty=le.empty,ge.node=le.node,ge.call=le.call,ge.size=le.size,ge.select=function(ee){for(var ue,Ae,Oe,Fe,Ue,We=[],Je=-1,it=this.length;++Je<it;){Oe=(Fe=this[Je]).update,We.push(ue=[]),ue.parentNode=Fe.parentNode;for(var ut=-1,St=Fe.length;++ut<St;)(Ue=Fe[ut])?(ue.push(Oe[ut]=Ae=ee.call(Fe.parentNode,Ue.__data__,ut,Je)),Ae.__data__=Ue.__data__):ue.push(null)}return K(We)},ge.insert=function(ee,ue){return arguments.length<2&&(ue=function _e(ee){var ue,Ae;return function(Oe,Fe,Ue){var We,Je=ee[Ue].update,it=Je.length;for(Ue!=Ae&&(Ae=Ue,ue=0),Fe>=ue&&(ue=Fe+1);!(We=Je[ue])&&++ue<it;);return We}}(this)),le.insert.call(this,ee,ue)},l.select=function(ee){var ue;return"string"==typeof ee?(ue=[ne(ee,d)]).parentNode=d.documentElement:(ue=[ee]).parentNode=s(ee),K([ue])},l.selectAll=function(ee){var ue;return"string"==typeof ee?(ue=b(re(ee,d))).parentNode=d.documentElement:(ue=b(ee)).parentNode=null,K([ue])},le.on=function(ee,ue,Ae){var Oe=arguments.length;if(Oe<3){if("string"!=typeof ee){for(Ae in Oe<2&&(ue=!1),ee)this.each(De(Ae,ee[Ae],ue));return this}if(Oe<2)return(Oe=this.node()["__on"+ee])&&Oe._;Ae=!1}return this.each(De(ee,ue,Ae))};var He=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(ee,ue){return function(Ae){var Oe=l.event;l.event=Ae,ue[0]=this.__data__;try{ee.apply(this,ue)}finally{l.event=Oe}}}function nt(ee,ue){var Ae=Ve(ee,ue);return function(Oe){var Ue=Oe.relatedTarget;Ue&&(Ue===this||8&Ue.compareDocumentPosition(this))||Ae.call(this,Oe)}}d&&He.forEach(function(ee){"on"+ee in d&&He.remove(ee)});var tt,at=0;function dt(ee){var ue=".dragsuppress-"+ ++at,Ae="click"+ue,Oe=l.select(t(ee)).on("touchmove"+ue,J).on("dragstart"+ue,J).on("selectstart"+ue,J);if(null==tt&&(tt=!("onselectstart"in ee)&&H(ee.style,"userSelect")),tt){var Fe=s(ee).style,Ue=Fe[tt];Fe[tt]="none"}return function(We){if(Oe.on(ue,null),tt&&(Fe[tt]=Ue),We){var Je=function(){Oe.on(Ae,null)};Oe.on(Ae,function(){J(),Je()},!0),setTimeout(Je,0)}}}l.mouse=function(ee){return bt(ee,Z())};var wt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(ee,ue){ue.changedTouches&&(ue=ue.changedTouches[0]);var Ae=ee.ownerSVGElement||ee;if(Ae.createSVGPoint){var Oe=Ae.createSVGPoint();if(wt<0){var Fe=t(ee);if(Fe.scrollX||Fe.scrollY){var Ue=(Ae=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();wt=!(Ue.f||Ue.e),Ae.remove()}}return wt?(Oe.x=ue.pageX,Oe.y=ue.pageY):(Oe.x=ue.clientX,Oe.y=ue.clientY),[(Oe=Oe.matrixTransform(ee.getScreenCTM().inverse())).x,Oe.y]}var We=ee.getBoundingClientRect();return[ue.clientX-We.left-ee.clientLeft,ue.clientY-We.top-ee.clientTop]}function _t(){return l.event.changedTouches[0].identifier}l.touch=function(ee,ue,Ae){if(arguments.length<3&&(Ae=ue,ue=Z().changedTouches),ue)for(var Oe,Fe=0,Ue=ue.length;Fe<Ue;++Fe)if((Oe=ue[Fe]).identifier===Ae)return bt(ee,Oe)},l.behavior.drag=function(){var ee=V(Fe,"drag","dragstart","dragend"),ue=null,Ae=Ue(U,l.mouse,t,"mousemove","mouseup"),Oe=Ue(_t,l.touch,j,"touchmove","touchend");function Fe(){this.on("mousedown.drag",Ae).on("touchstart.drag",Oe)}function Ue(We,Je,it,ut,St){return function(){var Dt,Wt=l.event.target.correspondingElement||l.event.target,cn=this.parentNode,Yt=ee.of(this,arguments),en=0,Xt=We(),bn=".drag"+(null==Xt?"":"-"+Xt),gn=l.select(it(Wt)).on(ut+bn,function Dn(){var Xn,gr,vr=Je(cn,Xt);vr&&(en|=(Xn=vr[0]-On[0])|(gr=vr[1]-On[1]),On=vr,Yt({type:"drag",x:vr[0]+Dt[0],y:vr[1]+Dt[1],dx:Xn,dy:gr}))}).on(St+bn,function Yn(){Je(cn,Xt)&&(gn.on(ut+bn,null).on(St+bn,null),$t(en),Yt({type:"dragend"}))}),$t=dt(Wt),On=Je(cn,Xt);Dt=ue?[(Dt=ue.apply(this,arguments)).x-On[0],Dt.y-On[1]]:[0,0],Yt({type:"dragstart"})}}return Fe.origin=function(We){return arguments.length?(ue=We,Fe):ue},l.rebind(Fe,ee,"on")},l.touches=function(ee,ue){return arguments.length<2&&(ue=Z().touches),ue?b(ue).map(function(Ae){var Oe=bt(ee,Ae);return Oe.identifier=Ae.identifier,Oe}):[]};var Lt=1e-6,Ct=Math.PI,Ot=2*Ct,Ht=Ot-Lt,It=Ct/2,Ge=Ct/180,Ze=180/Ct;function Be(ee){return ee>1?It:ee<-1?-It:Math.asin(ee)}function Ye(ee){return((ee=Math.exp(ee))+1/ee)/2}var rt=Math.SQRT2;l.interpolateZoom=function(ee,ue){var Ae,Oe,Fe=ee[0],Ue=ee[1],We=ee[2],ut=ue[2],St=ue[0]-Fe,Dt=ue[1]-Ue,Ft=St*St+Dt*Dt;if(Ft<1e-12)Oe=Math.log(ut/We)/rt,Ae=function(bn){return[Fe+bn*St,Ue+bn*Dt,We*Math.exp(rt*bn*Oe)]};else{var Wt=Math.sqrt(Ft),cn=(ut*ut-We*We+4*Ft)/(2*We*2*Wt),Yt=(ut*ut-We*We-4*Ft)/(2*ut*2*Wt),en=Math.log(Math.sqrt(cn*cn+1)-cn),Xt=Math.log(Math.sqrt(Yt*Yt+1)-Yt);Oe=(Xt-en)/rt,Ae=function(bn){var gn,Yn,$t=bn*Oe,On=Ye(en),Dn=We/(2*Wt)*(On*(gn=rt*$t+en,((gn=Math.exp(2*gn))-1)/(gn+1))-(Yn=en,((Yn=Math.exp(Yn))-1/Yn)/2));return[Fe+Dn*St,Ue+Dn*Dt,We*On/Ye(rt*$t+en)]}}return Ae.duration=1e3*Oe,Ae},l.behavior.zoom=function(){var ee,ue,Ae,Oe,Fe,Ue,We,Je,it,ut={x:0,y:0,k:1},St=[960,500],Dt=Ke,Ft=250,Wt=0,cn="mousedown.zoom",Yt="mousemove.zoom",en="mouseup.zoom",Xt="touchstart.zoom",bn=V(gn,"zoomstart","zoom","zoomend");function gn(hr){hr.on(cn,dr).on(Re+".zoom",Vr).on("dblclick.zoom",Hr).on(Xt,kr)}function $t(hr){return[(hr[0]-ut.x)/ut.k,(hr[1]-ut.y)/ut.k]}function On(hr){ut.k=Math.max(Dt[0],Math.min(Dt[1],hr))}function Dn(hr,Ar){var Dr;ut.x+=hr[0]-(Ar=[(Dr=Ar)[0]*ut.k+ut.x,Dr[1]*ut.k+ut.y])[0],ut.y+=hr[1]-Ar[1]}function Yn(hr,Ar,Dr,Rr){hr.__chart__={x:ut.x,y:ut.y,k:ut.k},On(Math.pow(2,Rr)),Dn(ue=Ar,Dr),hr=l.select(hr),Ft>0&&(hr=hr.transition().duration(Ft)),hr.call(gn.event)}function Xn(){We&&We.domain(Ue.range().map(function(hr){return(hr-ut.x)/ut.k}).map(Ue.invert)),it&&it.domain(Je.range().map(function(hr){return(hr-ut.y)/ut.k}).map(Je.invert))}function gr(hr){Wt++||hr({type:"zoomstart"})}function vr(hr){Xn(),hr({type:"zoom",scale:ut.k,translate:[ut.x,ut.y]})}function ur(hr){--Wt||(hr({type:"zoomend"}),ue=null)}function dr(){var hr=this,Ar=bn.of(hr,arguments),Dr=0,Rr=l.select(t(hr)).on(Yt,function $r(){Dr=1,Dn(l.mouse(hr),Wr),vr(Ar)}).on(en,function ui(){Rr.on(Yt,null).on(en,null),Zr(Dr),ur(Ar)}),Wr=$t(l.mouse(hr)),Zr=dt(hr);fi.call(hr),gr(Ar)}function kr(){var hr,Ar=this,Dr=bn.of(Ar,arguments),Rr={},Wr=0,Zr=".zoom-"+l.event.changedTouches[0].identifier,$r="touchmove"+Zr,ui="touchend"+Zr,yi=[],hi=l.select(Ar),si=dt(Ar);function ci(){var Fi=l.touches(Ar);return hr=ut.k,Fi.forEach(function(Br){Br.identifier in Rr&&(Rr[Br.identifier]=$t(Br))}),Fi}function pi(){var Fi=l.event.target;l.select(Fi).on($r,Si).on(ui,Mo),yi.push(Fi);for(var Br=l.event.changedTouches,Gi=0,Qi=Br.length;Gi<Qi;++Gi)Rr[Br[Gi].identifier]=null;var ki=ci(),Ga=Date.now();if(1===ki.length){if(Ga-Fe<500){var Yr=ki[0];Yn(Ar,Yr,Rr[Yr.identifier],Math.floor(Math.log(ut.k)/Math.LN2)+1),J()}Fe=Ga}else if(ki.length>1){var Bi=ki[1],ha=(Yr=ki[0])[0]-Bi[0],Ds=Yr[1]-Bi[1];Wr=ha*ha+Ds*Ds}}function Si(){var Fi,Br,Gi,Qi,ki=l.touches(Ar);fi.call(Ar);for(var Ga=0,Yr=ki.length;Ga<Yr;++Ga,Qi=null)if(Qi=Rr[(Gi=ki[Ga]).identifier]){if(Br)break;Fi=Gi,Br=Qi}if(Qi){var Bi=(Bi=Gi[0]-Fi[0])*Bi+(Bi=Gi[1]-Fi[1])*Bi,ha=Wr&&Math.sqrt(Bi/Wr);Fi=[(Fi[0]+Gi[0])/2,(Fi[1]+Gi[1])/2],Br=[(Br[0]+Qi[0])/2,(Br[1]+Qi[1])/2],On(ha*hr)}Fe=null,Dn(Fi,Br),vr(Dr)}function Mo(){if(l.event.touches.length){for(var Fi=l.event.changedTouches,Br=0,Gi=Fi.length;Br<Gi;++Br)delete Rr[Fi[Br].identifier];for(var Qi in Rr)return void ci()}l.selectAll(yi).on(Zr,null),hi.on(cn,dr).on(Xt,kr),si(),ur(Dr)}pi(),gr(Dr),hi.on(cn,null).on(Xt,pi)}function Vr(){var hr=bn.of(this,arguments);Oe?clearTimeout(Oe):(fi.call(this),ee=$t(ue=Ae||l.mouse(this)),gr(hr)),Oe=setTimeout(function(){Oe=null,ur(hr)},50),J(),On(Math.pow(2,.002*Se())*ut.k),Dn(ue,ee),vr(hr)}function Hr(){var hr=l.mouse(this),Ar=Math.log(ut.k)/Math.LN2;Yn(this,hr,$t(hr),l.event.shiftKey?Math.ceil(Ar)-1:Math.floor(Ar)+1)}return Re||(Re="onwheel"in d?(Se=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(Se=function(){return l.event.wheelDelta},"mousewheel"):(Se=function(){return-l.event.detail},"MozMousePixelScroll")),gn.event=function(hr){hr.each(function(){var Ar=bn.of(this,arguments),Dr=ut;$e?l.select(this).transition().each("start.zoom",function(){ut=this.__chart__||{x:0,y:0,k:1},gr(Ar)}).tween("zoom:zoom",function(){var Rr=St[0],Zr=ue?ue[0]:Rr/2,$r=ue?ue[1]:St[1]/2,ui=l.interpolateZoom([(Zr-ut.x)/ut.k,($r-ut.y)/ut.k,Rr/ut.k],[(Zr-Dr.x)/Dr.k,($r-Dr.y)/Dr.k,Rr/Dr.k]);return function(yi){var hi=ui(yi),si=Rr/hi[2];this.__chart__=ut={x:Zr-hi[0]*si,y:$r-hi[1]*si,k:si},vr(Ar)}}).each("interrupt.zoom",function(){ur(Ar)}).each("end.zoom",function(){ur(Ar)}):(this.__chart__=ut,gr(Ar),vr(Ar),ur(Ar))})},gn.translate=function(hr){return arguments.length?(ut={x:+hr[0],y:+hr[1],k:ut.k},Xn(),gn):[ut.x,ut.y]},gn.scale=function(hr){return arguments.length?(ut={x:ut.x,y:ut.y,k:null},On(+hr),Xn(),gn):ut.k},gn.scaleExtent=function(hr){return arguments.length?(Dt=null==hr?Ke:[+hr[0],+hr[1]],gn):Dt},gn.center=function(hr){return arguments.length?(Ae=hr&&[+hr[0],+hr[1]],gn):Ae},gn.size=function(hr){return arguments.length?(St=hr&&[+hr[0],+hr[1]],gn):St},gn.duration=function(hr){return arguments.length?(Ft=+hr,gn):Ft},gn.x=function(hr){return arguments.length?(We=hr,Ue=hr.copy(),ut={x:0,y:0,k:1},gn):We},gn.y=function(hr){return arguments.length?(it=hr,Je=hr.copy(),ut={x:0,y:0,k:1},gn):it},l.rebind(gn,bn,"on")};var Se,Re,Ke=[0,1/0];function st(){}function ct(ee,ue,Ae){return this instanceof ct?(this.h=+ee,this.s=+ue,void(this.l=+Ae)):arguments.length<2?ee instanceof ct?new ct(ee.h,ee.s,ee.l):ln(""+ee,dn,ct):new ct(ee,ue,Ae)}l.color=st,st.prototype.toString=function(){return this.rgb()+""},l.hsl=ct;var Tt=ct.prototype=new st;function Et(ee,ue,Ae){var Oe,Fe;function Ue(We){return Math.round(255*((Je=We)>360?Je-=360:Je<0&&(Je+=360),Je<60?Oe+(Fe-Oe)*Je/60:Je<180?Fe:Je<240?Oe+(Fe-Oe)*(240-Je)/60:Oe));var Je}return ee=isNaN(ee)?0:(ee%=360)<0?ee+360:ee,ue=isNaN(ue)||ue<0?0:ue>1?1:ue,Oe=2*(Ae=Ae<0?0:Ae>1?1:Ae)-(Fe=Ae<=.5?Ae*(1+ue):Ae+ue-Ae*ue),new _n(Ue(ee+120),Ue(ee),Ue(ee-120))}function At(ee,ue,Ae){return this instanceof At?(this.h=+ee,this.c=+ue,void(this.l=+Ae)):arguments.length<2?ee instanceof At?new At(ee.h,ee.c,ee.l):function Gt(ee,ue,Ae){return ee>0?new At(Math.atan2(Ae,ue)*Ze,Math.sqrt(ue*ue+Ae*Ae),ee):new At(NaN,NaN,ee)}(ee instanceof gt?ee.l:(ee=Cn((ee=l.rgb(ee)).r,ee.g,ee.b)).l,ee.a,ee.b):new At(ee,ue,Ae)}Tt.brighter=function(ee){return ee=Math.pow(.7,arguments.length?ee:1),new ct(this.h,this.s,this.l/ee)},Tt.darker=function(ee){return ee=Math.pow(.7,arguments.length?ee:1),new ct(this.h,this.s,ee*this.l)},Tt.rgb=function(){return Et(this.h,this.s,this.l)},l.hcl=At;var ht=At.prototype=new st;function pt(ee,ue,Ae){return isNaN(ee)&&(ee=0),isNaN(ue)&&(ue=0),new gt(Ae,Math.cos(ee*=Ge)*ue,Math.sin(ee)*ue)}function gt(ee,ue,Ae){return this instanceof gt?(this.l=+ee,this.a=+ue,void(this.b=+Ae)):arguments.length<2?ee instanceof gt?new gt(ee.l,ee.a,ee.b):ee instanceof At?pt(ee.h,ee.c,ee.l):Cn((ee=_n(ee)).r,ee.g,ee.b):new gt(ee,ue,Ae)}ht.brighter=function(ee){return new At(this.h,this.c,Math.min(100,this.l+Pt*(arguments.length?ee:1)))},ht.darker=function(ee){return new At(this.h,this.c,Math.max(0,this.l-Pt*(arguments.length?ee:1)))},ht.rgb=function(){return pt(this.h,this.c,this.l).rgb()},l.lab=gt;var Pt=18,zt=.95047,Ut=1.08883,Nt=gt.prototype=new st;function jt(ee,ue,Ae){var Oe=(ee+16)/116,Fe=Oe+ue/500,Ue=Oe-Ae/200;return new _n(Qt(3.2404542*(Fe=un(Fe)*zt)-1.5371385*(Oe=1*un(Oe))-.4985314*(Ue=un(Ue)*Ut)),Qt(-.969266*Fe+1.8760108*Oe+.041556*Ue),Qt(.0556434*Fe-.2040259*Oe+1.0572252*Ue))}function un(ee){return ee>.206893034?ee*ee*ee:(ee-.13793103448275862)/7.787037}function hn(ee){return ee>.008856?Math.pow(ee,.3333333333333333):7.787037*ee+.13793103448275862}function Qt(ee){return Math.round(255*(ee<=.00304?12.92*ee:1.055*Math.pow(ee,.4166666666666667)-.055))}function _n(ee,ue,Ae){return this instanceof _n?(this.r=~~ee,this.g=~~ue,void(this.b=~~Ae)):arguments.length<2?ee instanceof _n?new _n(ee.r,ee.g,ee.b):ln(""+ee,_n,Et):new _n(ee,ue,Ae)}function Fn(ee){return new _n(ee>>16,ee>>8&255,255&ee)}function yn(ee){return Fn(ee)+""}Nt.brighter=function(ee){return new gt(Math.min(100,this.l+Pt*(arguments.length?ee:1)),this.a,this.b)},Nt.darker=function(ee){return new gt(Math.max(0,this.l-Pt*(arguments.length?ee:1)),this.a,this.b)},Nt.rgb=function(){return jt(this.l,this.a,this.b)},l.rgb=_n;var on=_n.prototype=new st;function pn(ee){return ee<16?"0"+Math.max(0,ee).toString(16):Math.min(255,ee).toString(16)}function ln(ee,ue,Ae){var Oe,Fe,Ue,We=0,Je=0,it=0;if(Oe=/([a-z]+)\((.*)\)/.exec(ee=ee.toLowerCase()))switch(Fe=Oe[2].split(","),Oe[1]){case"hsl":return Ae(parseFloat(Fe[0]),parseFloat(Fe[1])/100,parseFloat(Fe[2])/100);case"rgb":return ue(Rn(Fe[0]),Rn(Fe[1]),Rn(Fe[2]))}return(Ue=Nn.get(ee))?ue(Ue.r,Ue.g,Ue.b):(null==ee||"#"!==ee.charAt(0)||isNaN(Ue=parseInt(ee.slice(1),16))||(4===ee.length?(We=(3840&Ue)>>4,We|=We>>4,Je=240&Ue,Je|=Je>>4,it=15&Ue,it|=it<<4):7===ee.length&&(We=(16711680&Ue)>>16,Je=(65280&Ue)>>8,it=255&Ue)),ue(We,Je,it))}function dn(ee,ue,Ae){var Oe,Fe,Ue=Math.min(ee/=255,ue/=255,Ae/=255),We=Math.max(ee,ue,Ae),Je=We-Ue,it=(We+Ue)/2;return Je?(Fe=it<.5?Je/(We+Ue):Je/(2-We-Ue),Oe=ee==We?(ue-Ae)/Je+(ue<Ae?6:0):ue==We?(Ae-ee)/Je+2:(ee-ue)/Je+4,Oe*=60):(Oe=NaN,Fe=it>0&&it<1?0:Oe),new ct(Oe,Fe,it)}function Cn(ee,ue,Ae){var Oe=hn((.4124564*(ee=kn(ee))+.3575761*(ue=kn(ue))+.1804375*(Ae=kn(Ae)))/zt),Fe=hn((.2126729*ee+.7151522*ue+.072175*Ae)/1);return gt(116*Fe-16,500*(Oe-Fe),200*(Fe-hn((.0193339*ee+.119192*ue+.9503041*Ae)/Ut)))}function kn(ee){return(ee/=255)<=.04045?ee/12.92:Math.pow((ee+.055)/1.055,2.4)}function Rn(ee){var ue=parseFloat(ee);return"%"===ee.charAt(ee.length-1)?Math.round(2.55*ue):ue}on.brighter=function(ee){ee=Math.pow(.7,arguments.length?ee:1);var ue=this.r,Ae=this.g,Oe=this.b;return ue||Ae||Oe?(ue&&ue<30&&(ue=30),Ae&&Ae<30&&(Ae=30),Oe&&Oe<30&&(Oe=30),new _n(Math.min(255,ue/ee),Math.min(255,Ae/ee),Math.min(255,Oe/ee))):new _n(30,30,30)},on.darker=function(ee){return new _n((ee=Math.pow(.7,arguments.length?ee:1))*this.r,ee*this.g,ee*this.b)},on.hsl=function(){return dn(this.r,this.g,this.b)},on.toString=function(){return"#"+pn(this.r)+pn(this.g)+pn(this.b)};var Nn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function jn(ee){return"function"==typeof ee?ee:function(){return ee}}function er(ee){return function(ue,Ae,Oe){return 2===arguments.length&&"function"==typeof Ae&&(Oe=Ae,Ae=null),Kn(ue,Ae,ee,Oe)}}function Kn(ee,ue,Ae,Oe){var St,Fe={},Ue=l.dispatch("beforesend","progress","load","error"),We={},Je=new XMLHttpRequest,it=null;function ut(){var St,Ft,Wt,Dt=Je.status;if(!Dt&&((Wt=(Ft=Je).responseType)&&"text"!==Wt?Ft.response:Ft.responseText)||Dt>=200&&Dt<300||304===Dt){try{St=Ae.call(Fe,Je)}catch(Ft){return void Ue.error.call(Fe,Ft)}Ue.load.call(Fe,St)}else Ue.error.call(Fe,Je)}return self.XDomainRequest&&!("withCredentials"in Je)&&/^(http(s)?:)?\/\//.test(ee)&&(Je=new XDomainRequest),"onload"in Je?Je.onload=Je.onerror=ut:Je.onreadystatechange=function(){Je.readyState>3&&ut()},Je.onprogress=function(St){var Dt=l.event;l.event=St;try{Ue.progress.call(Fe,Je)}finally{l.event=Dt}},Fe.header=function(St,Dt){return St=(St+"").toLowerCase(),arguments.length<2?We[St]:(null==Dt?delete We[St]:We[St]=Dt+"",Fe)},Fe.mimeType=function(St){return arguments.length?(ue=null==St?null:St+"",Fe):ue},Fe.responseType=function(St){return arguments.length?(it=St,Fe):it},Fe.response=function(St){return Ae=St,Fe},["get","post"].forEach(function(St){Fe[St]=function(){return Fe.send.apply(Fe,[St].concat(b(arguments)))}}),Fe.send=function(St,Dt,Ft){if(2===arguments.length&&"function"==typeof Dt&&(Ft=Dt,Dt=null),Je.open(St,ee,!0),null==ue||"accept"in We||(We.accept=ue+",*/*"),Je.setRequestHeader)for(var Wt in We)Je.setRequestHeader(Wt,We[Wt]);return null!=ue&&Je.overrideMimeType&&Je.overrideMimeType(ue),null!=it&&(Je.responseType=it),null!=Ft&&Fe.on("error",Ft).on("load",function(cn){Ft(null,cn)}),Ue.beforesend.call(Fe,Je),Je.send(Dt??null),Fe},Fe.abort=function(){return Je.abort(),Fe},l.rebind(Fe,Ue,"on"),null==Oe?Fe:Fe.get(1===(St=Oe).length?function(Dt,Ft){St(null==Dt?Ft:null)}:St)}Nn.forEach(function(ee,ue){Nn.set(ee,Fn(ue))}),l.functor=jn,l.xhr=er(j),l.dsv=function(ee,ue){var Ae=new RegExp('["'+ee+"\n]"),Oe=ee.charCodeAt(0);function Fe(ut,St,Dt){arguments.length<3&&(Dt=St,St=null);var Ft=Kn(ut,ue,null==St?Ue:We(St),Dt);return Ft.row=function(Wt){return arguments.length?Ft.response(null==(St=Wt)?Ue:We(Wt)):St},Ft}function Ue(ut){return Fe.parse(ut.responseText)}function We(ut){return function(St){return Fe.parse(St.responseText,ut)}}function Je(ut){return ut.map(it).join(ee)}function it(ut){return Ae.test(ut)?'"'+ut.replace(/\"/g,'""')+'"':ut}return Fe.parse=function(ut,St){var Dt;return Fe.parseRows(ut,function(Ft,Wt){if(Dt)return Dt(Ft,Wt-1);var cn=function(Yt){for(var en={},Xt=Ft.length,bn=0;bn<Xt;++bn)en[Ft[bn]]=Yt[bn];return en};Dt=St?function(Yt,en){return St(cn(Yt),en)}:cn})},Fe.parseRows=function(ut,St){var Dt,Ft,Wt={},cn={},Yt=[],en=ut.length,Xt=0,bn=0;function gn(){if(Xt>=en)return cn;if(Ft)return Ft=!1,Wt;var On=Xt;if(34===ut.charCodeAt(On)){for(var Dn=On;Dn++<en;)if(34===ut.charCodeAt(Dn)){if(34!==ut.charCodeAt(Dn+1))break;++Dn}return Xt=Dn+2,13===(Yn=ut.charCodeAt(Dn+1))?(Ft=!0,10===ut.charCodeAt(Dn+2)&&++Xt):10===Yn&&(Ft=!0),ut.slice(On+1,Dn).replace(/""/g,'"')}for(;Xt<en;){var Yn,Xn=1;if(10===(Yn=ut.charCodeAt(Xt++)))Ft=!0;else if(13===Yn)Ft=!0,10===ut.charCodeAt(Xt)&&(++Xt,++Xn);else if(Yn!==Oe)continue;return ut.slice(On,Xt-Xn)}return ut.slice(On)}for(;(Dt=gn())!==cn;){for(var $t=[];Dt!==Wt&&Dt!==cn;)$t.push(Dt),Dt=gn();St&&null==($t=St($t,bn++))||Yt.push($t)}return Yt},Fe.format=function(ut){if(Array.isArray(ut[0]))return Fe.formatRows(ut);var St=new I,Dt=[];return ut.forEach(function(Ft){for(var Wt in Ft)St.has(Wt)||Dt.push(St.add(Wt))}),[Dt.map(it).join(ee)].concat(ut.map(function(Ft){return Dt.map(function(Wt){return it(Ft[Wt])}).join(ee)})).join("\n")},Fe.formatRows=function(ut){return ut.map(Je).join("\n")},Fe},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("\t","text/tab-separated-values");var yr,lr,$n,Gn,ir=this[H(this,"requestAnimationFrame")]||function(ee){setTimeout(ee,17)};function Jt(ee,ue,Ae){var Oe=arguments.length;Oe<2&&(ue=0),Oe<3&&(Ae=Date.now());var Ue={c:ee,t:Ae+ue,n:null};return lr?lr.n=Ue:yr=Ue,lr=Ue,$n||(Gn=clearTimeout(Gn),$n=1,ir(rn)),Ue}function rn(){var ee=Sn(),ue=Tn()-ee;ue>24?(isFinite(ue)&&(clearTimeout(Gn),Gn=setTimeout(rn,ue)),$n=0):($n=1,ir(rn))}function Sn(){for(var ee=Date.now(),ue=yr;ue;)ee>=ue.t&&ue.c(ee-ue.t)&&(ue.c=null),ue=ue.n;return ee}function Tn(){for(var ee,ue=yr,Ae=1/0;ue;)ue.c?(ue.t<Ae&&(Ae=ue.t),ue=(ee=ue).n):ue=ee?ee.n=ue.n:yr=ue.n;return lr=ee,Ae}function Ln(ee){return ee[0]}function Bn(ee){return ee[1]}function Hn(ee){for(var ue,Ae,Oe,Fe=ee.length,Ue=[0,1],We=2,Je=2;Je<Fe;Je++){for(;We>1&&((Ae=ee[Ue[We-1]])[0]-(ue=ee[Ue[We-2]])[0])*((Oe=ee[Je])[1]-ue[1])-(Ae[1]-ue[1])*(Oe[0]-ue[0])<=0;)--We;Ue[We++]=Je}return Ue.slice(0,We)}function or(ee,ue){return ee[0]-ue[0]||ee[1]-ue[1]}l.timer=function(){Jt.apply(this,arguments)},l.timer.flush=function(){Sn(),Tn()},l.round=function(ee,ue){return ue?Math.round(ee*(ue=Math.pow(10,ue)))/ue:Math.round(ee)},l.geom={},l.geom.hull=function(ee){var ue=Ln,Ae=Bn;if(arguments.length)return Oe(ee);function Oe(Fe){if(Fe.length<3)return[];var Ue,We=jn(ue),Je=jn(Ae),it=Fe.length,ut=[],St=[];for(Ue=0;Ue<it;Ue++)ut.push([+We.call(this,Fe[Ue],Ue),+Je.call(this,Fe[Ue],Ue),Ue]);for(ut.sort(or),Ue=0;Ue<it;Ue++)St.push([ut[Ue][0],-ut[Ue][1]]);var Dt=Hn(ut),Ft=Hn(St),Wt=Ft[0]===Dt[0],cn=Ft[Ft.length-1]===Dt[Dt.length-1],Yt=[];for(Ue=Dt.length-1;Ue>=0;--Ue)Yt.push(Fe[ut[Dt[Ue]][2]]);for(Ue=+Wt;Ue<Ft.length-cn;++Ue)Yt.push(Fe[ut[Ft[Ue]][2]]);return Yt}return Oe.x=function(Fe){return arguments.length?(ue=Fe,Oe):ue},Oe.y=function(Fe){return arguments.length?(Ae=Fe,Oe):Ae},Oe},l.geom.polygon=function(ee){return X(ee,mr),ee};var mr=l.geom.polygon.prototype=[];function Kt(ee,ue,Ae){return(Ae[0]-ue[0])*(ee[1]-ue[1])<(Ae[1]-ue[1])*(ee[0]-ue[0])}function An(ee,ue,Ae,Oe){var Fe=ee[0],Ue=Ae[0],We=ue[0]-Fe,Je=Oe[0]-Ue,it=ee[1],ut=Ae[1],St=ue[1]-it,Dt=Oe[1]-ut,Ft=(Je*(it-ut)-Dt*(Fe-Ue))/(Dt*We-Je*St);return[Fe+Ft*We,it+Ft*St]}function Rt(ee){var ue=ee[0],Ae=ee[ee.length-1];return!(ue[0]-Ae[0]||ue[1]-Ae[1])}mr.area=function(){for(var ee,ue=-1,Ae=this.length,Oe=this[Ae-1],Fe=0;++ue<Ae;)Fe+=(ee=Oe)[1]*(Oe=this[ue])[0]-ee[0]*Oe[1];return.5*Fe},mr.centroid=function(ee){var ue,Ae,Oe=-1,Fe=this.length,Ue=0,We=0,Je=this[Fe-1];for(arguments.length||(ee=-1/(6*this.area()));++Oe<Fe;)Ue+=((ue=Je)[0]+(Je=this[Oe])[0])*(Ae=ue[0]*Je[1]-Je[0]*ue[1]),We+=(ue[1]+Je[1])*Ae;return[Ue*ee,We*ee]},mr.clip=function(ee){for(var ue,Ae,Oe,Fe,Ue,We,Je=Rt(ee),it=-1,ut=this.length-Rt(this),St=this[ut-1];++it<ut;){for(ue=ee.slice(),ee.length=0,Fe=this[it],Ue=ue[(Oe=ue.length-Je)-1],Ae=-1;++Ae<Oe;)Kt(We=ue[Ae],St,Fe)?(Kt(Ue,St,Fe)||ee.push(An(Ue,We,St,Fe)),ee.push(We)):Kt(Ue,St,Fe)&&ee.push(An(Ue,We,St,Fe)),Ue=We;Je&&ee.push(ee[0]),St=Fe}return ee};var Zt,tn,En,Mn,wn,an=[],vn=[];function sn(){li(this),this.edge=this.site=this.circle=null}function fn(ee){var ue=an.pop()||new sn;return ue.site=ee,ue}function mn(ee){cr(ee),En.remove(ee),an.push(ee),li(ee)}function Pn(ee){var ue=ee.circle,Ae=ue.x,Oe=ue.cy,Fe={x:Ae,y:Oe},Ue=ee.P,We=ee.N,Je=[ee];mn(ee);for(var it=Ue;it.circle&&y(Ae-it.circle.x)<Lt&&y(Oe-it.circle.cy)<Lt;)Ue=it.P,Je.unshift(it),mn(it),it=Ue;Je.unshift(it),cr(it);for(var ut=We;ut.circle&&y(Ae-ut.circle.x)<Lt&&y(Oe-ut.circle.cy)<Lt;)We=ut.N,Je.push(ut),mn(ut),ut=We;Je.push(ut),cr(ut);var St,Dt=Je.length;for(St=1;St<Dt;++St)fr((ut=Je[St]).edge,(it=Je[St-1]).site,ut.site,Fe);(ut=Je[Dt-1]).edge=Sr((it=Je[0]).site,ut.site,null,Fe),ar(it),ar(ut)}function qn(ee){for(var ue,Ae,Oe,Fe,Ue=ee.x,We=ee.y,Je=En._;Je;)if((Oe=Zn(Je,We)-Ue)>Lt)Je=Je.L;else{if(!((Fe=Ue-Jn(Je,We))>Lt)){Oe>-Lt?(ue=Je.P,Ae=Je):Fe>-Lt?(ue=Je,Ae=Je.N):ue=Ae=Je;break}if(!Je.R){ue=Je;break}Je=Je.R}var it=fn(ee);if(En.insert(ue,it),ue||Ae){if(ue===Ae)return cr(ue),Ae=fn(ue.site),En.insert(it,Ae),it.edge=Ae.edge=Sr(ue.site,it.site),ar(ue),void ar(Ae);if(Ae){cr(ue),cr(Ae);var ut=ue.site,St=ut.x,Dt=ut.y,Ft=ee.x-St,Wt=ee.y-Dt,cn=Ae.site,Yt=cn.x-St,en=cn.y-Dt,Xt=2*(Ft*en-Wt*Yt),bn=Ft*Ft+Wt*Wt,gn=Yt*Yt+en*en,$t={x:(en*bn-Wt*gn)/Xt+St,y:(Ft*gn-Yt*bn)/Xt+Dt};fr(Ae.edge,ut,cn,$t),it.edge=Sr(ut,ee,null,$t),Ae.edge=Sr(ee,cn,null,$t),ar(ue),ar(Ae)}else it.edge=Sr(ue.site,it.site)}}function Zn(ee,ue){var Ae=ee.site,Oe=Ae.x,Fe=Ae.y,Ue=Fe-ue;if(!Ue)return Oe;var We=ee.P;if(!We)return-1/0;var Je=(Ae=We.site).x,it=Ae.y,ut=it-ue;if(!ut)return Je;var St=Je-Oe,Dt=1/Ue-1/ut,Ft=St/ut;return Dt?(-Ft+Math.sqrt(Ft*Ft-2*Dt*(St*St/(-2*ut)-it+ut/2+Fe-Ue/2)))/Dt+Oe:(Oe+Je)/2}function Jn(ee,ue){var Ae=ee.N;if(Ae)return Zn(Ae,ue);var Oe=ee.site;return Oe.y===ue?Oe.x:1/0}function rr(ee){this.site=ee,this.edges=[]}function tr(ee,ue){return ue.angle-ee.angle}function sr(){li(this),this.x=this.y=this.arc=this.site=this.cy=null}function ar(ee){var ue=ee.P,Ae=ee.N;if(ue&&Ae){var Oe=ue.site,Fe=ee.site,Ue=Ae.site;if(Oe!==Ue){var We=Fe.x,Je=Fe.y,it=Oe.x-We,ut=Oe.y-Je,St=Ue.x-We,Dt=2*(it*(en=Ue.y-Je)-ut*St);if(!(Dt>=-1e-12)){var Ft=it*it+ut*ut,Wt=St*St+en*en,cn=(en*Ft-ut*Wt)/Dt,Yt=(it*Wt-St*Ft)/Dt,en=Yt+Je,Xt=vn.pop()||new sr;Xt.arc=ee,Xt.site=Fe,Xt.x=cn+We,Xt.y=en+Math.sqrt(cn*cn+Yt*Yt),Xt.cy=en,ee.circle=Xt;for(var bn=null,gn=wn._;gn;)if(Xt.y<gn.y||Xt.y===gn.y&&Xt.x<=gn.x){if(!gn.L){bn=gn.P;break}gn=gn.L}else{if(!gn.R){bn=gn;break}gn=gn.R}wn.insert(bn,Xt),bn||(Mn=Xt)}}}}function cr(ee){var ue=ee.circle;ue&&(ue.P||(Mn=ue.N),wn.remove(ue),vn.push(ue),li(ue),ee.circle=null)}function br(ee,ue){var Ae=ee.b;if(Ae)return!0;var Oe,Fe,Ue=ee.a,We=ue[0][0],Je=ue[1][0],it=ue[0][1],ut=ue[1][1],St=ee.l,Dt=ee.r,Ft=St.x,Wt=St.y,cn=Dt.x,Yt=Dt.y,en=(Ft+cn)/2;if(Yt===Wt){if(en<We||en>=Je)return;if(Ft>cn){if(Ue){if(Ue.y>=ut)return}else Ue={x:en,y:it};Ae={x:en,y:ut}}else{if(Ue){if(Ue.y<it)return}else Ue={x:en,y:ut};Ae={x:en,y:it}}}else if(Fe=(Wt+Yt)/2-(Oe=(Ft-cn)/(Yt-Wt))*en,Oe<-1||Oe>1)if(Ft>cn){if(Ue){if(Ue.y>=ut)return}else Ue={x:(it-Fe)/Oe,y:it};Ae={x:(ut-Fe)/Oe,y:ut}}else{if(Ue){if(Ue.y<it)return}else Ue={x:(ut-Fe)/Oe,y:ut};Ae={x:(it-Fe)/Oe,y:it}}else if(Wt<Yt){if(Ue){if(Ue.x>=Je)return}else Ue={x:We,y:Oe*We+Fe};Ae={x:Je,y:Oe*Je+Fe}}else{if(Ue){if(Ue.x<We)return}else Ue={x:Je,y:Oe*Je+Fe};Ae={x:We,y:Oe*We+Fe}}return ee.a=Ue,ee.b=Ae,!0}function Ur(ee,ue){this.l=ee,this.r=ue,this.a=this.b=null}function Sr(ee,ue,Ae,Oe){var Fe=new Ur(ee,ue);return Zt.push(Fe),Ae&&fr(Fe,ee,ue,Ae),Oe&&fr(Fe,ue,ee,Oe),tn[ee.i].edges.push(new Lr(Fe,ee,ue)),tn[ue.i].edges.push(new Lr(Fe,ue,ee)),Fe}function fr(ee,ue,Ae,Oe){ee.a||ee.b?ee.l===Ae?ee.b=Oe:ee.a=Oe:(ee.a=Oe,ee.l=ue,ee.r=Ae)}function Lr(ee,ue,Ae){var Oe=ee.a,Fe=ee.b;this.edge=ee,this.site=ue,this.angle=Ae?Math.atan2(Ae.y-ue.y,Ae.x-ue.x):ee.l===ue?Math.atan2(Fe.x-Oe.x,Oe.y-Fe.y):Math.atan2(Oe.x-Fe.x,Fe.y-Oe.y)}function zr(){this._=null}function li(ee){ee.U=ee.C=ee.L=ee.R=ee.P=ee.N=null}function Mi(ee,ue){var Ae=ue,Oe=ue.R,Fe=Ae.U;Fe?Fe.L===Ae?Fe.L=Oe:Fe.R=Oe:ee._=Oe,Oe.U=Fe,Ae.U=Oe,Ae.R=Oe.L,Ae.R&&(Ae.R.U=Ae),Oe.L=Ae}function Pi(ee,ue){var Ae=ue,Oe=ue.L,Fe=Ae.U;Fe?Fe.L===Ae?Fe.L=Oe:Fe.R=Oe:ee._=Oe,Oe.U=Fe,Ae.U=Oe,Ae.L=Oe.R,Ae.L&&(Ae.L.U=Ae),Oe.R=Ae}function Ea(ee){for(;ee.L;)ee=ee.L;return ee}function Ui(ee,ue){var Ae,Oe,Fe,Ue=ee.sort(vi).pop();for(Zt=[],tn=new Array(ee.length),En=new zr,wn=new zr;;)if(Fe=Mn,Ue&&(!Fe||Ue.y<Fe.y||Ue.y===Fe.y&&Ue.x<Fe.x))Ue.x===Ae&&Ue.y===Oe||(tn[Ue.i]=new rr(Ue),qn(Ue),Ae=Ue.x,Oe=Ue.y),Ue=ee.pop();else{if(!Fe)break;Pn(Fe.arc)}ue&&(function(Je){for(var it,ut,St,Dt,Ft,Wt=Zt,cn=(ut=Je[0][0],St=Je[0][1],Dt=Je[1][0],Ft=Je[1][1],function(en){var Xt,bn=en.a,gn=en.b,$t=bn.x,On=bn.y,Dn=0,Yn=1,Xn=gn.x-$t,gr=gn.y-On;if(Xt=ut-$t,Xn||!(Xt>0)){if(Xt/=Xn,Xn<0){if(Xt<Dn)return;Xt<Yn&&(Yn=Xt)}else if(Xn>0){if(Xt>Yn)return;Xt>Dn&&(Dn=Xt)}if(Xt=Dt-$t,Xn||!(Xt<0)){if(Xt/=Xn,Xn<0){if(Xt>Yn)return;Xt>Dn&&(Dn=Xt)}else if(Xn>0){if(Xt<Dn)return;Xt<Yn&&(Yn=Xt)}if(Xt=St-On,gr||!(Xt>0)){if(Xt/=gr,gr<0){if(Xt<Dn)return;Xt<Yn&&(Yn=Xt)}else if(gr>0){if(Xt>Yn)return;Xt>Dn&&(Dn=Xt)}if(Xt=Ft-On,gr||!(Xt<0)){if(Xt/=gr,gr<0){if(Xt>Yn)return;Xt>Dn&&(Dn=Xt)}else if(gr>0){if(Xt<Dn)return;Xt<Yn&&(Yn=Xt)}return Dn>0&&(en.a={x:$t+Dn*Xn,y:On+Dn*gr}),Yn<1&&(en.b={x:$t+Yn*Xn,y:On+Yn*gr}),en}}}}}),Yt=Wt.length;Yt--;)(!br(it=Wt[Yt],Je)||!cn(it)||y(it.a.x-it.b.x)<Lt&&y(it.a.y-it.b.y)<Lt)&&(it.a=it.b=null,Wt.splice(Yt,1))}(ue),function(Je){for(var it,ut,St,Dt,Ft,Wt,cn,Yt,en,Xt,bn=Je[0][0],gn=Je[1][0],$t=Je[0][1],On=Je[1][1],Dn=tn,Yn=Dn.length;Yn--;)if((Ft=Dn[Yn])&&Ft.prepare())for(Yt=(cn=Ft.edges).length,Wt=0;Wt<Yt;)St=(Xt=cn[Wt].end()).x,Dt=Xt.y,it=(en=cn[++Wt%Yt].start()).x,ut=en.y,(y(St-it)>Lt||y(Dt-ut)>Lt)&&(cn.splice(Wt,0,new Lr((Xn=Ft.site,gr=Xt,vr=y(St-bn)<Lt&&On-Dt>Lt?{x:bn,y:y(it-bn)<Lt?ut:On}:y(Dt-On)<Lt&&gn-St>Lt?{x:y(ut-On)<Lt?it:gn,y:On}:y(St-gn)<Lt&&Dt-$t>Lt?{x:gn,y:y(it-gn)<Lt?ut:$t}:y(Dt-$t)<Lt&&St-bn>Lt?{x:y(ut-$t)<Lt?it:bn,y:$t}:null,ur=void 0,(ur=new Ur(Xn,null)).a=gr,ur.b=vr,Zt.push(ur),ur),Ft.site,null)),++Yt);var Xn,gr,vr,ur}(ue));var We={cells:tn,edges:Zt};return En=wn=Zt=tn=null,We}function vi(ee,ue){return ue.y-ee.y||ue.x-ee.x}rr.prototype.prepare=function(){for(var ee,ue=this.edges,Ae=ue.length;Ae--;)(ee=ue[Ae].edge).b&&ee.a||ue.splice(Ae,1);return ue.sort(tr),ue.length},Lr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},zr.prototype={insert:function(ee,ue){var Ae,Oe,Fe;if(ee){if(ue.P=ee,ue.N=ee.N,ee.N&&(ee.N.P=ue),ee.N=ue,ee.R){for(ee=ee.R;ee.L;)ee=ee.L;ee.L=ue}else ee.R=ue;Ae=ee}else this._?(ee=Ea(this._),ue.P=null,ue.N=ee,ee.P=ee.L=ue,Ae=ee):(ue.P=ue.N=null,this._=ue,Ae=null);for(ue.L=ue.R=null,ue.U=Ae,ue.C=!0,ee=ue;Ae&&Ae.C;)Ae===(Oe=Ae.U).L?(Fe=Oe.R)&&Fe.C?(Ae.C=Fe.C=!1,Oe.C=!0,ee=Oe):(ee===Ae.R&&(Mi(this,Ae),Ae=(ee=Ae).U),Ae.C=!1,Oe.C=!0,Pi(this,Oe)):(Fe=Oe.L)&&Fe.C?(Ae.C=Fe.C=!1,Oe.C=!0,ee=Oe):(ee===Ae.L&&(Pi(this,Ae),Ae=(ee=Ae).U),Ae.C=!1,Oe.C=!0,Mi(this,Oe)),Ae=ee.U;this._.C=!1},remove:function(ee){ee.N&&(ee.N.P=ee.P),ee.P&&(ee.P.N=ee.N),ee.N=ee.P=null;var ue,Ae,Oe,Fe=ee.U,Ue=ee.L,We=ee.R;if(Ae=Ue?We?Ea(We):Ue:We,Fe?Fe.L===ee?Fe.L=Ae:Fe.R=Ae:this._=Ae,Ue&&We?(Oe=Ae.C,Ae.C=ee.C,Ae.L=Ue,Ue.U=Ae,Ae!==We?(Fe=Ae.U,Ae.U=ee.U,Fe.L=ee=Ae.R,Ae.R=We,We.U=Ae):(Ae.U=Fe,Fe=Ae,ee=Ae.R)):(Oe=ee.C,ee=Ae),ee&&(ee.U=Fe),!Oe)if(ee&&ee.C)ee.C=!1;else{do{if(ee===this._)break;if(ee===Fe.L){if((ue=Fe.R).C&&(ue.C=!1,Fe.C=!0,Mi(this,Fe),ue=Fe.R),ue.L&&ue.L.C||ue.R&&ue.R.C){ue.R&&ue.R.C||(ue.L.C=!1,ue.C=!0,Pi(this,ue),ue=Fe.R),ue.C=Fe.C,Fe.C=ue.R.C=!1,Mi(this,Fe),ee=this._;break}}else if((ue=Fe.L).C&&(ue.C=!1,Fe.C=!0,Pi(this,Fe),ue=Fe.L),ue.L&&ue.L.C||ue.R&&ue.R.C){ue.L&&ue.L.C||(ue.R.C=!1,ue.C=!0,Mi(this,ue),ue=Fe.L),ue.C=Fe.C,Fe.C=ue.L.C=!1,Pi(this,Fe),ee=this._;break}ue.C=!0,ee=Fe,Fe=Fe.U}while(!ee.C);ee&&(ee.C=!1)}}},l.geom.voronoi=function(ee){var ue=Ln,Ae=Bn,Oe=ue,Fe=Ae,Ue=La;if(ee)return We(ee);function We(it){var ut=new Array(it.length),St=Ue[0][0],Dt=Ue[0][1],Ft=Ue[1][0],Wt=Ue[1][1];return Ui(Je(it),Ue).cells.forEach(function(cn,Yt){var en=cn.edges,Xt=cn.site;(ut[Yt]=en.length?en.map(function(bn){var gn=bn.start();return[gn.x,gn.y]}):Xt.x>=St&&Xt.x<=Ft&&Xt.y>=Dt&&Xt.y<=Wt?[[St,Wt],[Ft,Wt],[Ft,Dt],[St,Dt]]:[]).point=it[Yt]}),ut}function Je(it){return it.map(function(ut,St){return{x:Math.round(Oe(ut,St)/Lt)*Lt,y:Math.round(Fe(ut,St)/Lt)*Lt,i:St}})}return We.links=function(it){return Ui(Je(it)).edges.filter(function(ut){return ut.l&&ut.r}).map(function(ut){return{source:it[ut.l.i],target:it[ut.r.i]}})},We.triangles=function(it){var ut=[];return Ui(Je(it)).cells.forEach(function(St,Dt){for(var Ft,Wt,cn,Yt,en=St.site,Xt=St.edges.sort(tr),bn=-1,gn=Xt.length,$t=Xt[gn-1].edge,On=$t.l===en?$t.r:$t.l;++bn<gn;)Ft=On,On=($t=Xt[bn].edge).l===en?$t.r:$t.l,Dt<Ft.i&&Dt<On.i&&((Wt=en).x-(Yt=On).x)*((cn=Ft).y-Wt.y)-(Wt.x-cn.x)*(Yt.y-Wt.y)<0&&ut.push([it[Dt],it[Ft.i],it[On.i]])}),ut},We.x=function(it){return arguments.length?(Oe=jn(ue=it),We):ue},We.y=function(it){return arguments.length?(Fe=jn(Ae=it),We):Ae},We.clipExtent=function(it){return arguments.length?(Ue=it??La,We):Ue===La?null:Ue},We.size=function(it){return arguments.length?We.clipExtent(it&&[[0,0],it]):Ue===La?null:Ue&&Ue[1]},We};var La=[[-1e6,-1e6],[1e6,1e6]];function to(ee){return ee.x}function qo(ee){return ee.y}function Go(ee,ue,Ae,Oe,Fe,Ue){if(!ee(ue,Ae,Oe,Fe,Ue)){var We=.5*(Ae+Fe),Je=.5*(Oe+Ue),it=ue.nodes;it[0]&&Go(ee,it[0],Ae,Oe,We,Je),it[1]&&Go(ee,it[1],We,Oe,Fe,Je),it[2]&&Go(ee,it[2],Ae,Je,We,Ue),it[3]&&Go(ee,it[3],We,Je,Fe,Ue)}}function Us(ee,ue){ee=l.rgb(ee),ue=l.rgb(ue);var Ae=ee.r,Oe=ee.g,Fe=ee.b,Ue=ue.r-Ae,We=ue.g-Oe,Je=ue.b-Fe;return function(it){return"#"+pn(Math.round(Ae+Ue*it))+pn(Math.round(Oe+We*it))+pn(Math.round(Fe+Je*it))}}function Zo(ee,ue){var Ae,Oe={},Fe={};for(Ae in ee)Ae in ue?Oe[Ae]=ma(ee[Ae],ue[Ae]):Fe[Ae]=ee[Ae];for(Ae in ue)Ae in ee||(Fe[Ae]=ue[Ae]);return function(Ue){for(Ae in Oe)Fe[Ae]=Oe[Ae](Ue);return Fe}}function Ta(ee,ue){return ee=+ee,ue=+ue,function(Ae){return ee*(1-Ae)+ue*Ae}}function Vs(ee,ue){var Ae,Oe,Fe,Ue=Ri.lastIndex=ss.lastIndex=0,We=-1,Je=[],it=[];for(ee+="",ue+="";(Ae=Ri.exec(ee))&&(Oe=ss.exec(ue));)(Fe=Oe.index)>Ue&&(Fe=ue.slice(Ue,Fe),Je[We]?Je[We]+=Fe:Je[++We]=Fe),(Ae=Ae[0])===(Oe=Oe[0])?Je[We]?Je[We]+=Oe:Je[++We]=Oe:(Je[++We]=null,it.push({i:We,x:Ta(Ae,Oe)})),Ue=ss.lastIndex;return Ue<ue.length&&(Fe=ue.slice(Ue),Je[We]?Je[We]+=Fe:Je[++We]=Fe),Je.length<2?it[0]?(ue=it[0].x,function(ut){return ue(ut)+""}):function(){return ue}:(ue=it.length,function(ut){for(var St,Dt=0;Dt<ue;++Dt)Je[(St=it[Dt]).i]=St.x(ut);return Je.join("")})}l.geom.delaunay=function(ee){return l.geom.voronoi().triangles(ee)},l.geom.quadtree=function(ee,ue,Ae,Oe,Fe){var Ue,We=Ln,Je=Bn;if(Ue=arguments.length)return We=to,Je=qo,3===Ue&&(Fe=Ae,Oe=ue,Ae=ue=0),it(ee);function it(ut){var St,Dt,Ft,Wt,cn,Yt,en,Xt,bn,gn=jn(We),$t=jn(Je);if(null!=ue)Yt=ue,en=Ae,Xt=Oe,bn=Fe;else if(Xt=bn=-(Yt=en=1/0),Dt=[],Ft=[],cn=ut.length,Ue)for(Wt=0;Wt<cn;++Wt)(St=ut[Wt]).x<Yt&&(Yt=St.x),St.y<en&&(en=St.y),St.x>Xt&&(Xt=St.x),St.y>bn&&(bn=St.y),Dt.push(St.x),Ft.push(St.y);else for(Wt=0;Wt<cn;++Wt){var On=+gn(St=ut[Wt],Wt),Dn=+$t(St,Wt);On<Yt&&(Yt=On),Dn<en&&(en=Dn),On>Xt&&(Xt=On),Dn>bn&&(bn=Dn),Dt.push(On),Ft.push(Dn)}var Yn=Xt-Yt,Xn=bn-en;function gr(dr,kr,Vr,Hr,hr,Ar,Dr,Rr){if(!isNaN(Vr)&&!isNaN(Hr))if(dr.leaf){var Wr=dr.x,Zr=dr.y;if(null!=Wr)if(y(Wr-Vr)+y(Zr-Hr)<.01)vr(dr,kr,Vr,Hr,hr,Ar,Dr,Rr);else{var $r=dr.point;dr.x=dr.y=dr.point=null,vr(dr,$r,Wr,Zr,hr,Ar,Dr,Rr),vr(dr,kr,Vr,Hr,hr,Ar,Dr,Rr)}else dr.x=Vr,dr.y=Hr,dr.point=kr}else vr(dr,kr,Vr,Hr,hr,Ar,Dr,Rr)}function vr(dr,kr,Vr,Hr,hr,Ar,Dr,Rr){var Wr=.5*(hr+Dr),Zr=.5*(Ar+Rr),$r=Vr>=Wr,ui=Hr>=Zr,yi=ui<<1|$r;dr.leaf=!1,$r?hr=Wr:Dr=Wr,ui?Ar=Zr:Rr=Zr,gr(dr=dr.nodes[yi]||(dr.nodes[yi]={leaf:!0,nodes:[],point:null,x:null,y:null}),kr,Vr,Hr,hr,Ar,Dr,Rr)}Yn>Xn?bn=en+Yn:Xt=Yt+Xn;var ur={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(dr){gr(ur,dr,+gn(dr,++Wt),+$t(dr,Wt),Yt,en,Xt,bn)},visit:function(dr){Go(dr,ur,Yt,en,Xt,bn)},find:function(dr){return function il(ee,ue,Ae,Oe,Fe,Ue,We){var Je,it=1/0;return function ut(St,Dt,Ft,Wt,cn){if(!(Dt>Ue||Ft>We||Wt<Oe||cn<Fe)){if(Yt=St.point){var Yt,en=ue-St.x,Xt=Ae-St.y,bn=en*en+Xt*Xt;if(bn<it){var gn=Math.sqrt(it=bn);Oe=ue-gn,Fe=Ae-gn,Ue=ue+gn,We=Ae+gn,Je=Yt}}for(var $t=St.nodes,On=.5*(Dt+Wt),Dn=.5*(Ft+cn),Yn=(Ae>=Dn)<<1|ue>=On,Xn=Yn+4;Yn<Xn;++Yn)if(St=$t[3&Yn])switch(3&Yn){case 0:ut(St,Dt,Ft,On,Dn);break;case 1:ut(St,On,Ft,Wt,Dn);break;case 2:ut(St,Dt,Dn,On,cn);break;case 3:ut(St,On,Dn,Wt,cn)}}}(ee,Oe,Fe,Ue,We),Je}(ur,dr[0],dr[1],Yt,en,Xt,bn)}};if(Wt=-1,null==ue){for(;++Wt<cn;)gr(ur,ut[Wt],Dt[Wt],Ft[Wt],Yt,en,Xt,bn);--Wt}else ut.forEach(ur.add);return Dt=Ft=ut=St=null,ur}return it.x=function(ut){return arguments.length?(We=ut,it):We},it.y=function(ut){return arguments.length?(Je=ut,it):Je},it.extent=function(ut){return arguments.length?(null==ut?ue=Ae=Oe=Fe=null:(ue=+ut[0][0],Ae=+ut[0][1],Oe=+ut[1][0],Fe=+ut[1][1]),it):null==ue?null:[[ue,Ae],[Oe,Fe]]},it.size=function(ut){return arguments.length?(null==ut?ue=Ae=Oe=Fe=null:(ue=Ae=0,Oe=+ut[0],Fe=+ut[1]),it):null==ue?null:[Oe-ue,Fe-Ae]},it},l.interpolateRgb=Us,l.interpolateObject=Zo,l.interpolateNumber=Ta,l.interpolateString=Vs;var Ri=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ss=new RegExp(Ri.source,"g");function ma(ee,ue){for(var Ae,Oe=l.interpolators.length;--Oe>=0&&!(Ae=l.interpolators[Oe](ee,ue)););return Ae}function ka(ee,ue){var Ae,Oe=[],Fe=[],Ue=ee.length,We=ue.length,Je=Math.min(ee.length,ue.length);for(Ae=0;Ae<Je;++Ae)Oe.push(ma(ee[Ae],ue[Ae]));for(;Ae<Ue;++Ae)Fe[Ae]=ee[Ae];for(;Ae<We;++Ae)Fe[Ae]=ue[Ae];return function(it){for(Ae=0;Ae<Je;++Ae)Fe[Ae]=Oe[Ae](it);return Fe}}l.interpolate=ma,l.interpolators=[function(ee,ue){var Ae=typeof ue;return("string"===Ae?Nn.has(ue.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ue)?Us:Vs:ue instanceof st?Us:Array.isArray(ue)?ka:"object"===Ae&&isNaN(ue)?Zo:Ta)(ee,ue)}],l.interpolateArray=ka;var vo=function(){return j},Qr=l.map({linear:vo,poly:function(ee){return function(ue){return Math.pow(ue,ee)}},quad:function(){return ls},cubic:function(){return al},sin:function(){return ol},exp:function(){return sl},circle:function(){return ml},elastic:function(ee,ue){var Ae;return arguments.length<2&&(ue=.45),arguments.length?Ae=ue/Ot*Math.asin(1/ee):(ee=1,Ae=ue/4),function(Oe){return 1+ee*Math.pow(2,-10*Oe)*Math.sin((Oe-Ae)*Ot/ue)}},back:function(ee){return ee||(ee=1.70158),function(ue){return ue*ue*((ee+1)*ue-ee)}},bounce:function(){return Hs}}),mo=l.map({in:j,out:Ua,"in-out":Ya,"out-in":function(ee){return Ya(Ua(ee))}});function Ua(ee){return function(ue){return 1-ee(1-ue)}}function Ya(ee){return function(ue){return.5*(ue<.5?ee(2*ue):2-ee(2-2*ue))}}function ls(ee){return ee*ee}function al(ee){return ee*ee*ee}function no(ee){if(ee<=0)return 0;if(ee>=1)return 1;var ue=ee*ee,Ae=ue*ee;return 4*(ee<.5?Ae:3*(ee-ue)+Ae-.75)}function ol(ee){return 1-Math.cos(ee*It)}function sl(ee){return Math.pow(2,10*(ee-1))}function ml(ee){return 1-Math.sqrt(1-ee*ee)}function Hs(ee){return ee<.36363636363636365?7.5625*ee*ee:ee<.7272727272727273?7.5625*(ee-=.5454545454545454)*ee+.75:ee<.9090909090909091?7.5625*(ee-=.8181818181818182)*ee+.9375:7.5625*(ee-=.9545454545454546)*ee+.984375}function ll(ee,ue){return ue-=ee,function(Ae){return Math.round(ee+ue*Ae)}}function qs(ee){var ue,Ae,Oe,Fe=[ee.a,ee.b],Ue=[ee.c,ee.d],We=io(Fe),Je=ro(Fe,Ue),it=io(((ue=Ue)[0]+=(Oe=-Je)*(Ae=Fe)[0],ue[1]+=Oe*Ae[1],ue))||0;Fe[0]*Ue[1]<Ue[0]*Fe[1]&&(Fe[0]*=-1,Fe[1]*=-1,We*=-1,Je*=-1),this.rotate=(We?Math.atan2(Fe[1],Fe[0]):Math.atan2(-Ue[0],Ue[1]))*Ze,this.translate=[ee.e,ee.f],this.scale=[We,it],this.skew=it?Math.atan2(Je,it)*Ze:0}function ro(ee,ue){return ee[0]*ue[0]+ee[1]*ue[1]}function io(ee){var ue=Math.sqrt(ro(ee,ee));return ue&&(ee[0]/=ue,ee[1]/=ue),ue}l.ease=function(ee){var ue=ee.indexOf("-"),Ae=ue>=0?ee.slice(0,ue):ee,Oe=ue>=0?ee.slice(ue+1):"in";return Ae=Qr.get(Ae)||vo,function Ca(ee){return function(ue){return ue<=0?0:ue>=1?1:ee(ue)}}((Oe=mo.get(Oe)||j)(Ae.apply(null,T.call(arguments,1))))},l.interpolateHcl=function(ee,ue){ee=l.hcl(ee),ue=l.hcl(ue);var Ae=ee.h,Oe=ee.c,Fe=ee.l,Ue=ue.h-Ae,We=ue.c-Oe,Je=ue.l-Fe;return isNaN(We)&&(We=0,Oe=isNaN(Oe)?ue.c:Oe),isNaN(Ue)?(Ue=0,Ae=isNaN(Ae)?ue.h:Ae):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(it){return pt(Ae+Ue*it,Oe+We*it,Fe+Je*it)+""}},l.interpolateHsl=function(ee,ue){ee=l.hsl(ee),ue=l.hsl(ue);var Ae=ee.h,Oe=ee.s,Fe=ee.l,Ue=ue.h-Ae,We=ue.s-Oe,Je=ue.l-Fe;return isNaN(We)&&(We=0,Oe=isNaN(Oe)?ue.s:Oe),isNaN(Ue)?(Ue=0,Ae=isNaN(Ae)?ue.h:Ae):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(it){return Et(Ae+Ue*it,Oe+We*it,Fe+Je*it)+""}},l.interpolateLab=function(ee,ue){ee=l.lab(ee),ue=l.lab(ue);var Ae=ee.l,Oe=ee.a,Fe=ee.b,Ue=ue.l-Ae,We=ue.a-Oe,Je=ue.b-Fe;return function(it){return jt(Ae+Ue*it,Oe+We*it,Fe+Je*it)+""}},l.interpolateRound=ll,l.transform=function(ee){var ue=d.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(Ae){if(null!=Ae){ue.setAttribute("transform",Ae);var Oe=ue.transform.baseVal.consolidate()}return new qs(Oe?Oe.matrix:Wo)})(ee)},qs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Wo={a:1,b:0,c:0,d:1,e:0,f:0};function ao(ee){return ee.length?ee.pop()+",":""}function Gs(ee,ue){var Fe,Ue,We,Ae=[],Oe=[];return ee=l.transform(ee),ue=l.transform(ue),function(Fe,Ue,We,Je){if(Fe[0]!==Ue[0]||Fe[1]!==Ue[1]){var it=We.push("translate(",null,",",null,")");Je.push({i:it-4,x:Ta(Fe[0],Ue[0])},{i:it-2,x:Ta(Fe[1],Ue[1])})}else(Ue[0]||Ue[1])&&We.push("translate("+Ue+")")}(ee.translate,ue.translate,Ae,Oe),We=Ae,(Fe=ee.rotate)!==(Ue=ue.rotate)?(Fe-Ue>180?Ue+=360:Ue-Fe>180&&(Fe+=360),Oe.push({i:We.push(ao(We)+"rotate(",null,")")-2,x:Ta(Fe,Ue)})):Ue&&We.push(ao(We)+"rotate("+Ue+")"),function(Fe,Ue,We,Je){Fe!==Ue?Je.push({i:We.push(ao(We)+"skewX(",null,")")-2,x:Ta(Fe,Ue)}):Ue&&We.push(ao(We)+"skewX("+Ue+")")}(ee.skew,ue.skew,Ae,Oe),function(Fe,Ue,We,Je){if(Fe[0]!==Ue[0]||Fe[1]!==Ue[1]){var it=We.push(ao(We)+"scale(",null,",",null,")");Je.push({i:it-4,x:Ta(Fe[0],Ue[0])},{i:it-2,x:Ta(Fe[1],Ue[1])})}else 1===Ue[0]&&1===Ue[1]||We.push(ao(We)+"scale("+Ue+")")}(ee.scale,ue.scale,Ae,Oe),ee=ue=null,function(Fe){for(var Ue,We=-1,Je=Oe.length;++We<Je;)Ae[(Ue=Oe[We]).i]=Ue.x(Fe);return Ae.join("")}}function Zs(ee,ue){return ue=(ue-=ee=+ee)||1/ue,function(Ae){return(Ae-ee)/ue}}function Co(ee,ue){return ue=(ue-=ee=+ee)||1/ue,function(Ae){return Math.max(0,Math.min(1,(Ae-ee)/ue))}}function Ms(ee){for(var ue=ee.source,Ae=ee.target,Oe=function(We,Je){if(We===Je)return We;for(var it=yo(We),ut=yo(Je),St=it.pop(),Dt=ut.pop(),Ft=null;St===Dt;)Ft=St,St=it.pop(),Dt=ut.pop();return Ft}(ue,Ae),Fe=[ue];ue!==Oe;)Fe.push(ue=ue.parent);for(var Ue=Fe.length;Ae!==Oe;)Fe.splice(Ue,0,Ae),Ae=Ae.parent;return Fe}function yo(ee){for(var ue=[],Ae=ee.parent;null!=Ae;)ue.push(ee),ee=Ae,Ae=Ae.parent;return ue.push(ee),ue}function Yo(ee){ee.fixed|=2}function Po(ee){ee.fixed&=-7}function oo(ee){ee.fixed|=4,ee.px=ee.x,ee.py=ee.y}function ei(ee){ee.fixed&=-5}function xo(ee,ue,Ae){var Oe=0,Fe=0;if(ee.charge=0,!ee.leaf)for(var Ue,We=ee.nodes,Je=We.length,it=-1;++it<Je;)null!=(Ue=We[it])&&(xo(Ue,ue,Ae),ee.charge+=Ue.charge,Oe+=Ue.charge*Ue.cx,Fe+=Ue.charge*Ue.cy);if(ee.point){ee.leaf||(ee.point.x+=Math.random()-.5,ee.point.y+=Math.random()-.5);var ut=ue*Ae[ee.point.index];ee.charge+=ee.pointCharge=ut,Oe+=ut*ee.point.x,Fe+=ut*ee.point.y}ee.cx=Oe/ee.charge,ee.cy=Fe/ee.charge}l.interpolateTransform=Gs,l.layout={},l.layout.bundle=function(){return function(ee){for(var ue=[],Ae=-1,Oe=ee.length;++Ae<Oe;)ue.push(Ms(ee[Ae]));return ue}},l.layout.chord=function(){var ee,ue,Ae,Oe,Fe,Ue,We,Je={},it=0;function ut(){var Dt,Ft,Wt,cn,Yt,en={},Xt=[],bn=l.range(Oe),gn=[];for(ee=[],ue=[],Dt=0,cn=-1;++cn<Oe;){for(Ft=0,Yt=-1;++Yt<Oe;)Ft+=Ae[cn][Yt];Xt.push(Ft),gn.push(l.range(Oe)),Dt+=Ft}for(Fe&&bn.sort(function(ur,dr){return Fe(Xt[ur],Xt[dr])}),Ue&&gn.forEach(function(ur,dr){ur.sort(function(kr,Vr){return Ue(Ae[dr][kr],Ae[dr][Vr])})}),Dt=(Ot-it*Oe)/Dt,Ft=0,cn=-1;++cn<Oe;){for(Wt=Ft,Yt=-1;++Yt<Oe;){var $t=bn[cn],On=gn[$t][Yt],Dn=Ae[$t][On],Yn=Ft,Xn=Ft+=Dn*Dt;en[$t+"-"+On]={index:$t,subindex:On,startAngle:Yn,endAngle:Xn,value:Dn}}ue[$t]={index:$t,startAngle:Wt,endAngle:Ft,value:Xt[$t]},Ft+=it}for(cn=-1;++cn<Oe;)for(Yt=cn-1;++Yt<Oe;){var gr=en[cn+"-"+Yt],vr=en[Yt+"-"+cn];(gr.value||vr.value)&&ee.push(gr.value<vr.value?{source:vr,target:gr}:{source:gr,target:vr})}We&&St()}function St(){ee.sort(function(Dt,Ft){return We((Dt.source.value+Dt.target.value)/2,(Ft.source.value+Ft.target.value)/2)})}return Je.matrix=function(Dt){return arguments.length?(Oe=(Ae=Dt)&&Ae.length,ee=ue=null,Je):Ae},Je.padding=function(Dt){return arguments.length?(it=Dt,ee=ue=null,Je):it},Je.sortGroups=function(Dt){return arguments.length?(Fe=Dt,ee=ue=null,Je):Fe},Je.sortSubgroups=function(Dt){return arguments.length?(Ue=Dt,ee=null,Je):Ue},Je.sortChords=function(Dt){return arguments.length?(We=Dt,ee&&St(),Je):We},Je.chords=function(){return ee||ut(),ee},Je.groups=function(){return ue||ut(),ue},Je},l.layout.force=function(){var ee,ue,Ae,Oe,Fe,Ue,We={},Je=l.dispatch("start","tick","end"),it=[1,1],ut=.9,St=yl,Dt=Ss,Ft=-30,Wt=us,cn=.1,Yt=.64,en=[],Xt=[];function bn($t){return function(On,Dn,Yn,Xn){if(On.point!==$t){var gr=On.cx-$t.x,vr=On.cy-$t.y,ur=Xn-Dn,dr=gr*gr+vr*vr;if(ur*ur/Yt<dr){if(dr<Wt){var kr=On.charge/dr;$t.px-=gr*kr,$t.py-=vr*kr}return!0}On.point&&dr&&dr<Wt&&($t.px-=gr*(kr=On.pointCharge/dr),$t.py-=vr*kr)}return!On.charge}}function gn($t){$t.px=l.event.x,$t.py=l.event.y,We.resume()}return We.tick=function(){if((Ae*=.99)<.005)return ee=null,Je.end({type:"end",alpha:Ae=0}),!0;var $t,On,Dn,Yn,Xn,gr,vr,ur,dr,kr=en.length,Vr=Xt.length;for(On=0;On<Vr;++On)Yn=(Dn=Xt[On]).source,(gr=(ur=(Xn=Dn.target).x-Yn.x)*ur+(dr=Xn.y-Yn.y)*dr)&&(ur*=gr=Ae*Fe[On]*((gr=Math.sqrt(gr))-Oe[On])/gr,dr*=gr,Xn.x-=ur*(vr=Yn.weight+Xn.weight?Yn.weight/(Yn.weight+Xn.weight):.5),Xn.y-=dr*vr,Yn.x+=ur*(vr=1-vr),Yn.y+=dr*vr);if((vr=Ae*cn)&&(ur=it[0]/2,dr=it[1]/2,On=-1,vr))for(;++On<kr;)(Dn=en[On]).x+=(ur-Dn.x)*vr,Dn.y+=(dr-Dn.y)*vr;if(Ft)for(xo($t=l.geom.quadtree(en),Ae,Ue),On=-1;++On<kr;)(Dn=en[On]).fixed||$t.visit(bn(Dn));for(On=-1;++On<kr;)(Dn=en[On]).fixed?(Dn.x=Dn.px,Dn.y=Dn.py):(Dn.x-=(Dn.px-(Dn.px=Dn.x))*ut,Dn.y-=(Dn.py-(Dn.py=Dn.y))*ut);Je.tick({type:"tick",alpha:Ae})},We.nodes=function($t){return arguments.length?(en=$t,We):en},We.links=function($t){return arguments.length?(Xt=$t,We):Xt},We.size=function($t){return arguments.length?(it=$t,We):it},We.linkDistance=function($t){return arguments.length?(St="function"==typeof $t?$t:+$t,We):St},We.distance=We.linkDistance,We.linkStrength=function($t){return arguments.length?(Dt="function"==typeof $t?$t:+$t,We):Dt},We.friction=function($t){return arguments.length?(ut=+$t,We):ut},We.charge=function($t){return arguments.length?(Ft="function"==typeof $t?$t:+$t,We):Ft},We.chargeDistance=function($t){return arguments.length?(Wt=$t*$t,We):Math.sqrt(Wt)},We.gravity=function($t){return arguments.length?(cn=+$t,We):cn},We.theta=function($t){return arguments.length?(Yt=$t*$t,We):Math.sqrt(Yt)},We.alpha=function($t){return arguments.length?($t=+$t,Ae?$t>0?Ae=$t:(ee.c=null,ee.t=NaN,ee=null,Je.end({type:"end",alpha:Ae=0})):$t>0&&(Je.start({type:"start",alpha:Ae=$t}),ee=Jt(We.tick)),We):Ae},We.start=function(){var $t,On,Dn,Yn=en.length,Xn=Xt.length,gr=it[0],vr=it[1];for($t=0;$t<Yn;++$t)(Dn=en[$t]).index=$t,Dn.weight=0;for($t=0;$t<Xn;++$t)"number"==typeof(Dn=Xt[$t]).source&&(Dn.source=en[Dn.source]),"number"==typeof Dn.target&&(Dn.target=en[Dn.target]),++Dn.source.weight,++Dn.target.weight;for($t=0;$t<Yn;++$t)Dn=en[$t],isNaN(Dn.x)&&(Dn.x=ur("x",gr)),isNaN(Dn.y)&&(Dn.y=ur("y",vr)),isNaN(Dn.px)&&(Dn.px=Dn.x),isNaN(Dn.py)&&(Dn.py=Dn.y);if(Oe=[],"function"==typeof St)for($t=0;$t<Xn;++$t)Oe[$t]=+St.call(this,Xt[$t],$t);else for($t=0;$t<Xn;++$t)Oe[$t]=St;if(Fe=[],"function"==typeof Dt)for($t=0;$t<Xn;++$t)Fe[$t]=+Dt.call(this,Xt[$t],$t);else for($t=0;$t<Xn;++$t)Fe[$t]=Dt;if(Ue=[],"function"==typeof Ft)for($t=0;$t<Yn;++$t)Ue[$t]=+Ft.call(this,en[$t],$t);else for($t=0;$t<Yn;++$t)Ue[$t]=Ft;function ur(dr,kr){if(!On){for(On=new Array(Yn),Ar=0;Ar<Yn;++Ar)On[Ar]=[];for(Ar=0;Ar<Xn;++Ar){var Vr=Xt[Ar];On[Vr.source.index].push(Vr.target),On[Vr.target.index].push(Vr.source)}}for(var Hr,hr=On[$t],Ar=-1,Dr=hr.length;++Ar<Dr;)if(!isNaN(Hr=hr[Ar][dr]))return Hr;return Math.random()*kr}return We.resume()},We.resume=function(){return We.alpha(.1)},We.stop=function(){return We.alpha(0)},We.drag=function(){if(ue||(ue=l.behavior.drag().origin(j).on("dragstart.force",Yo).on("drag.force",gn).on("dragend.force",Po)),!arguments.length)return ue;this.on("mouseover.force",oo).on("mouseout.force",ei).call(ue)},l.rebind(We,Je,"on")};var yl=20,Ss=1,us=1/0;function Oo(ee,ue){return l.rebind(ee,ue,"sort","children","value"),ee.nodes=ee,ee.links=fs,ee}function Xo(ee,ue){for(var Ae=[ee];null!=(ee=Ae.pop());)if(ue(ee),(Fe=ee.children)&&(Oe=Fe.length))for(var Oe,Fe;--Oe>=0;)Ae.push(Fe[Oe])}function Pa(ee,ue){for(var Ae=[ee],Oe=[];null!=(ee=Ae.pop());)if(Oe.push(ee),(Ue=ee.children)&&(Fe=Ue.length))for(var Fe,Ue,We=-1;++We<Fe;)Ae.push(Ue[We]);for(;null!=(ee=Oe.pop());)ue(ee)}function Ws(ee){return ee.children}function cs(ee){return ee.value}function Jo(ee,ue){return ue.value-ee.value}function fs(ee){return l.merge(ee.map(function(ue){return(ue.children||[]).map(function(Ae){return{source:ue,target:Ae}})}))}l.layout.hierarchy=function(){var ee=Jo,ue=Ws,Ae=cs;function Oe(Fe){var Ue,We=[Fe],Je=[];for(Fe.depth=0;null!=(Ue=We.pop());)if(Je.push(Ue),(ut=ue.call(Oe,Ue,Ue.depth))&&(it=ut.length)){for(var it,ut,St;--it>=0;)We.push(St=ut[it]),St.parent=Ue,St.depth=Ue.depth+1;Ae&&(Ue.value=0),Ue.children=ut}else Ae&&(Ue.value=+Ae.call(Oe,Ue,Ue.depth)||0),delete Ue.children;return Pa(Fe,function(Dt){var Ft,Wt;ee&&(Ft=Dt.children)&&Ft.sort(ee),Ae&&(Wt=Dt.parent)&&(Wt.value+=Dt.value)}),Je}return Oe.sort=function(Fe){return arguments.length?(ee=Fe,Oe):ee},Oe.children=function(Fe){return arguments.length?(ue=Fe,Oe):ue},Oe.value=function(Fe){return arguments.length?(Ae=Fe,Oe):Ae},Oe.revalue=function(Fe){return Ae&&(Xo(Fe,function(Ue){Ue.children&&(Ue.value=0)}),Pa(Fe,function(Ue){var We;Ue.children||(Ue.value=+Ae.call(Oe,Ue,Ue.depth)||0),(We=Ue.parent)&&(We.value+=Ue.value)})),Fe},Oe},l.layout.partition=function(){var ee=l.layout.hierarchy(),ue=[1,1];function Ae(Ue,We,Je,it){var ut=Ue.children;if(Ue.x=We,Ue.y=Ue.depth*it,Ue.dx=Je,Ue.dy=it,ut&&(St=ut.length)){var St,Dt,Ft,Wt=-1;for(Je=Ue.value?Je/Ue.value:0;++Wt<St;)Ae(Dt=ut[Wt],We,Ft=Dt.value*Je,it),We+=Ft}}function Oe(Ue){var We=Ue.children,Je=0;if(We&&(it=We.length))for(var it,ut=-1;++ut<it;)Je=Math.max(Je,Oe(We[ut]));return 1+Je}function Fe(Ue,We){var Je=ee.call(this,Ue,We);return Ae(Je[0],0,ue[0],ue[1]/Oe(Je[0])),Je}return Fe.size=function(Ue){return arguments.length?(ue=Ue,Fe):ue},Oo(Fe,ee)},l.layout.pie=function(){var ee=Number,ue=Io,Ae=0,Oe=Ot,Fe=0;function Ue(We){var Je,it=We.length,ut=We.map(function(bn,gn){return+ee.call(Ue,bn,gn)}),St=+("function"==typeof Ae?Ae.apply(this,arguments):Ae),Dt=("function"==typeof Oe?Oe.apply(this,arguments):Oe)-St,Ft=Math.min(Math.abs(Dt)/it,+("function"==typeof Fe?Fe.apply(this,arguments):Fe)),Wt=Ft*(Dt<0?-1:1),cn=l.sum(ut),Yt=cn?(Dt-it*Wt)/cn:0,en=l.range(it),Xt=[];return null!=ue&&en.sort(ue===Io?function(bn,gn){return ut[gn]-ut[bn]}:function(bn,gn){return ue(We[bn],We[gn])}),en.forEach(function(bn){Xt[bn]={data:We[bn],value:Je=ut[bn],startAngle:St,endAngle:St+=Je*Yt+Wt,padAngle:Ft}}),Xt}return Ue.value=function(We){return arguments.length?(ee=We,Ue):ee},Ue.sort=function(We){return arguments.length?(ue=We,Ue):ue},Ue.startAngle=function(We){return arguments.length?(Ae=We,Ue):Ae},Ue.endAngle=function(We){return arguments.length?(Oe=We,Ue):Oe},Ue.padAngle=function(We){return arguments.length?(Fe=We,Ue):Fe},Ue};var Io={};function zo(ee){return ee.x}function Ko(ee){return ee.y}function hs(ee,ue,Ae){ee.y0=ue,ee.y=Ae}l.layout.stack=function(){var ee=j,ue=ds,Ae=gs,Oe=hs,Fe=zo,Ue=Ko;function We(Je,it){if(!(Ft=Je.length))return Je;var ut=Je.map(function(bn,gn){return ee.call(We,bn,gn)}),St=ut.map(function(bn){return bn.map(function(gn,$t){return[Fe.call(We,gn,$t),Ue.call(We,gn,$t)]})}),Dt=ue.call(We,St,it);ut=l.permute(ut,Dt),St=l.permute(St,Dt);var Ft,Wt,cn,Yt,en=Ae.call(We,St,it),Xt=ut[0].length;for(cn=0;cn<Xt;++cn)for(Oe.call(We,ut[0][cn],Yt=en[cn],St[0][cn][1]),Wt=1;Wt<Ft;++Wt)Oe.call(We,ut[Wt][cn],Yt+=St[Wt-1][cn][1],St[Wt][cn][1]);return Je}return We.values=function(Je){return arguments.length?(ee=Je,We):ee},We.order=function(Je){return arguments.length?(ue="function"==typeof Je?Je:ps.get(Je)||ds,We):ue},We.offset=function(Je){return arguments.length?(Ae="function"==typeof Je?Je:Oa.get(Je)||gs,We):Ae},We.x=function(Je){return arguments.length?(Fe=Je,We):Fe},We.y=function(Je){return arguments.length?(Ue=Je,We):Ue},We.out=function(Je){return arguments.length?(Oe=Je,We):Oe},We};var ps=l.map({"inside-out":function(ee){var ue,Ae,Oe=ee.length,Fe=ee.map(Ys),Ue=ee.map(bo),We=l.range(Oe).sort(function(Dt,Ft){return Fe[Dt]-Fe[Ft]}),Je=0,it=0,ut=[],St=[];for(ue=0;ue<Oe;++ue)Ae=We[ue],Je<it?(Je+=Ue[Ae],ut.push(Ae)):(it+=Ue[Ae],St.push(Ae));return St.reverse().concat(ut)},reverse:function(ee){return l.range(ee.length).reverse()},default:ds}),Oa=l.map({silhouette:function(ee){var ue,Ae,Oe,Fe=ee.length,Ue=ee[0].length,We=[],Je=0,it=[];for(Ae=0;Ae<Ue;++Ae){for(ue=0,Oe=0;ue<Fe;ue++)Oe+=ee[ue][Ae][1];Oe>Je&&(Je=Oe),We.push(Oe)}for(Ae=0;Ae<Ue;++Ae)it[Ae]=(Je-We[Ae])/2;return it},wiggle:function(ee){var ue,Ae,Oe,Fe,Ue,We,Je,it,ut,St=ee.length,Dt=ee[0],Ft=Dt.length,Wt=[];for(Wt[0]=it=ut=0,Ae=1;Ae<Ft;++Ae){for(ue=0,Fe=0;ue<St;++ue)Fe+=ee[ue][Ae][1];for(ue=0,Ue=0,Je=Dt[Ae][0]-Dt[Ae-1][0];ue<St;++ue){for(Oe=0,We=(ee[ue][Ae][1]-ee[ue][Ae-1][1])/(2*Je);Oe<ue;++Oe)We+=(ee[Oe][Ae][1]-ee[Oe][Ae-1][1])/Je;Ue+=We*ee[ue][Ae][1]}Wt[Ae]=it-=Fe?Ue/Fe*Je:0,it<ut&&(ut=it)}for(Ae=0;Ae<Ft;++Ae)Wt[Ae]-=ut;return Wt},expand:function(ee){var ue,Ae,Oe,Fe=ee.length,Ue=ee[0].length,We=1/Fe,Je=[];for(Ae=0;Ae<Ue;++Ae){for(ue=0,Oe=0;ue<Fe;ue++)Oe+=ee[ue][Ae][1];if(Oe)for(ue=0;ue<Fe;ue++)ee[ue][Ae][1]/=Oe;else for(ue=0;ue<Fe;ue++)ee[ue][Ae][1]=We}for(Ae=0;Ae<Ue;++Ae)Je[Ae]=0;return Je},zero:gs});function ds(ee){return l.range(ee.length)}function gs(ee){for(var ue=-1,Ae=ee[0].length,Oe=[];++ue<Ae;)Oe[ue]=0;return Oe}function Ys(ee){for(var ue,Ae=1,Oe=0,Fe=ee[0][1],Ue=ee.length;Ae<Ue;++Ae)(ue=ee[Ae][1])>Fe&&(Oe=Ae,Fe=ue);return Oe}function bo(ee){return ee.reduce(Es,0)}function Es(ee,ue){return ee+ue[1]}function vs(ee,ue){return Xs(ee,Math.ceil(Math.log(ue.length)/Math.LN2+1))}function Xs(ee,ue){for(var Ae=-1,Oe=+ee[0],Fe=(ee[1]-Oe)/ue,Ue=[];++Ae<=ue;)Ue[Ae]=Fe*Ae+Oe;return Ue}function ms(ee){return[l.min(ee),l.max(ee)]}function $o(ee,ue){return ee.value-ue.value}function Ro(ee,ue){var Ae=ee._pack_next;ee._pack_next=ue,ue._pack_prev=ee,ue._pack_next=Ae,Ae._pack_prev=ue}function Do(ee,ue){ee._pack_next=ue,ue._pack_prev=ee}function ai(ee,ue){var Ae=ue.x-ee.x,Oe=ue.y-ee.y,Fe=ee.r+ue.r;return.999*Fe*Fe>Ae*Ae+Oe*Oe}function _o(ee){if((ue=ee.children)&&(it=ue.length)){var ue,Ae,Oe,Fe,Ue,We,Je,it,ut=1/0,St=-1/0,Dt=1/0,Ft=-1/0;if(ue.forEach(wo),(Ae=ue[0]).x=-Ae.r,Ae.y=0,gn(Ae),it>1&&((Oe=ue[1]).x=Oe.r,Oe.y=0,gn(Oe),it>2))for(Kr(Ae,Oe,Fe=ue[2]),gn(Fe),Ro(Ae,Fe),Ae._pack_prev=Fe,Ro(Fe,Oe),Oe=Ae._pack_next,Ue=3;Ue<it;Ue++){Kr(Ae,Oe,Fe=ue[Ue]);var Wt=0,cn=1,Yt=1;for(We=Oe._pack_next;We!==Oe;We=We._pack_next,cn++)if(ai(We,Fe)){Wt=1;break}if(1==Wt)for(Je=Ae._pack_prev;Je!==We._pack_prev&&!ai(Je,Fe);Je=Je._pack_prev,Yt++);Wt?(cn<Yt||cn==Yt&&Oe.r<Ae.r?Do(Ae,Oe=We):Do(Ae=Je,Oe),Ue--):(Ro(Ae,Fe),Oe=Fe,gn(Fe))}var en=(ut+St)/2,Xt=(Dt+Ft)/2,bn=0;for(Ue=0;Ue<it;Ue++)(Fe=ue[Ue]).x-=en,Fe.y-=Xt,bn=Math.max(bn,Fe.r+Math.sqrt(Fe.x*Fe.x+Fe.y*Fe.y));ee.r=bn,ue.forEach(Zi)}function gn($t){ut=Math.min($t.x-$t.r,ut),St=Math.max($t.x+$t.r,St),Dt=Math.min($t.y-$t.r,Dt),Ft=Math.max($t.y+$t.r,Ft)}}function wo(ee){ee._pack_next=ee._pack_prev=ee}function Zi(ee){delete ee._pack_next,delete ee._pack_prev}function Xr(ee,ue,Ae,Oe){var Fe=ee.children;if(ee.x=ue+=Oe*ee.x,ee.y=Ae+=Oe*ee.y,ee.r*=Oe,Fe)for(var Ue=-1,We=Fe.length;++Ue<We;)Xr(Fe[Ue],ue,Ae,Oe)}function Kr(ee,ue,Ae){var Oe=ee.r+Ae.r,Fe=ue.x-ee.x,Ue=ue.y-ee.y;if(Oe&&(Fe||Ue)){var We=ue.r+Ae.r,Je=Fe*Fe+Ue*Ue,it=.5+((Oe*=Oe)-(We*=We))/(2*Je),ut=Math.sqrt(Math.max(0,2*We*(Oe+Je)-(Oe-=Je)*Oe-We*We))/(2*Je);Ae.x=ee.x+it*Fe+ut*Ue,Ae.y=ee.y+it*Ue-ut*Fe}else Ae.x=ee.x+Oe,Ae.y=ee.y}function so(ee,ue){return ee.parent==ue.parent?1:2}function Xa(ee){var ue=ee.children;return ue.length?ue[0]:ee.t}function Ls(ee){var ue,Ae=ee.children;return(ue=Ae.length)?Ae[ue-1]:ee.t}function Js(ee,ue,Ae){var Oe=Ae/(ue.i-ee.i);ue.c-=Oe,ue.s+=Ae,ee.c+=Oe,ue.z+=Ae,ue.m+=Ae}function Fo(ee,ue,Ae){return ee.a.parent===ue.parent?ee.a:Ae}function Ks(ee){var ue=ee.children;return ue&&ue.length?Ks(ue[0]):ee}function Bo(ee){var ue,Ae=ee.children;return Ae&&(ue=Ae.length)?Bo(Ae[ue-1]):ee}function lo(ee){return{x:ee.x,y:ee.y,dx:ee.dx,dy:ee.dy}}function No(ee,ue){var Ae=ee.x+ue[3],Oe=ee.y+ue[0],Fe=ee.dx-ue[1]-ue[3],Ue=ee.dy-ue[0]-ue[2];return Fe<0&&(Ae+=Fe/2,Fe=0),Ue<0&&(Oe+=Ue/2,Ue=0),{x:Ae,y:Oe,dx:Fe,dy:Ue}}function mi(ee){var ue=ee[0],Ae=ee[ee.length-1];return ue<Ae?[ue,Ae]:[Ae,ue]}function Ja(ee){return ee.rangeExtent?ee.rangeExtent():mi(ee.range())}function jo(ee,ue,Ae,Oe){var Fe=Ae(ee[0],ee[1]),Ue=Oe(ue[0],ue[1]);return function(We){return Ue(Fe(We))}}function Ii(ee,ue){var Ae,Oe=0,Fe=ee.length-1,Ue=ee[Oe],We=ee[Fe];return We<Ue&&(Ae=Oe,Oe=Fe,Fe=Ae,Ae=Ue,Ue=We,We=Ae),ee[Oe]=ue.floor(Ue),ee[Fe]=ue.ceil(We),ee}function Wi(ee){return ee?{floor:function(ue){return Math.floor(ue/ee)*ee},ceil:function(ue){return Math.ceil(ue/ee)*ee}}:Yi}l.layout.histogram=function(){var ee=!0,ue=Number,Ae=ms,Oe=vs;function Fe(Ue,We){for(var Je,it,ut=[],St=Ue.map(ue,this),Dt=Ae.call(this,St,We),Ft=Oe.call(this,Dt,St,We),Wt=(We=-1,St.length),cn=Ft.length-1,Yt=ee?1:1/Wt;++We<cn;)(Je=ut[We]=[]).dx=Ft[We+1]-(Je.x=Ft[We]),Je.y=0;if(cn>0)for(We=-1;++We<Wt;)(it=St[We])>=Dt[0]&&it<=Dt[1]&&((Je=ut[l.bisect(Ft,it,1,cn)-1]).y+=Yt,Je.push(Ue[We]));return ut}return Fe.value=function(Ue){return arguments.length?(ue=Ue,Fe):ue},Fe.range=function(Ue){return arguments.length?(Ae=jn(Ue),Fe):Ae},Fe.bins=function(Ue){return arguments.length?(Oe="number"==typeof Ue?function(We){return Xs(We,Ue)}:jn(Ue),Fe):Oe},Fe.frequency=function(Ue){return arguments.length?(ee=!!Ue,Fe):ee},Fe},l.layout.pack=function(){var ee,ue=l.layout.hierarchy().sort($o),Ae=0,Oe=[1,1];function Fe(Ue,We){var Je=ue.call(this,Ue,We),it=Je[0],ut=Oe[0],St=Oe[1],Dt=null==ee?Math.sqrt:"function"==typeof ee?ee:function(){return ee};if(it.x=it.y=0,Pa(it,function(Wt){Wt.r=+Dt(Wt.value)}),Pa(it,_o),Ae){var Ft=Ae*(ee?1:Math.max(2*it.r/ut,2*it.r/St))/2;Pa(it,function(Wt){Wt.r+=Ft}),Pa(it,_o),Pa(it,function(Wt){Wt.r-=Ft})}return Xr(it,ut/2,St/2,ee?1:1/Math.max(2*it.r/ut,2*it.r/St)),Je}return Fe.size=function(Ue){return arguments.length?(Oe=Ue,Fe):Oe},Fe.radius=function(Ue){return arguments.length?(ee=null==Ue||"function"==typeof Ue?Ue:+Ue,Fe):ee},Fe.padding=function(Ue){return arguments.length?(Ae=+Ue,Fe):Ae},Oo(Fe,ue)},l.layout.tree=function(){var ee=l.layout.hierarchy().sort(null).value(null),ue=so,Ae=[1,1],Oe=null;function Fe(it,ut){var St=ee.call(this,it,ut),Dt=St[0],Ft=function(gn){for(var $t,On={A:null,children:[gn]},Dn=[On];null!=($t=Dn.pop());)for(var Yn,Xn=$t.children,gr=0,vr=Xn.length;gr<vr;++gr)Dn.push((Xn[gr]=Yn={_:Xn[gr],parent:$t,children:(Yn=Xn[gr].children)&&Yn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:gr}).a=Yn);return On.children[0]}(Dt);if(Pa(Ft,Ue),Ft.parent.m=-Ft.z,Xo(Ft,We),Oe)Xo(Dt,Je);else{var Wt=Dt,cn=Dt,Yt=Dt;Xo(Dt,function(gn){gn.x<Wt.x&&(Wt=gn),gn.x>cn.x&&(cn=gn),gn.depth>Yt.depth&&(Yt=gn)});var en=ue(Wt,cn)/2-Wt.x,Xt=Ae[0]/(cn.x+ue(cn,Wt)/2+en),bn=Ae[1]/(Yt.depth||1);Xo(Dt,function(gn){gn.x=(gn.x+en)*Xt,gn.y=gn.depth*bn})}return St}function Ue(it){var ut=it.children,St=it.parent.children,Dt=it.i?St[it.i-1]:null;if(ut.length){!function(Wt){for(var cn,Yt=0,en=0,Xt=Wt.children,bn=Xt.length;--bn>=0;)(cn=Xt[bn]).z+=Yt,cn.m+=Yt,Yt+=cn.s+(en+=cn.c)}(it);var Ft=(ut[0].z+ut[ut.length-1].z)/2;Dt?(it.z=Dt.z+ue(it._,Dt._),it.m=it.z-Ft):it.z=Ft}else Dt&&(it.z=Dt.z+ue(it._,Dt._));it.parent.A=function(Wt,cn,Yt){if(cn){for(var en,Xt=Wt,bn=Wt,gn=cn,$t=Xt.parent.children[0],On=Xt.m,Dn=bn.m,Yn=gn.m,Xn=$t.m;gn=Ls(gn),Xt=Xa(Xt),gn&&Xt;)$t=Xa($t),(bn=Ls(bn)).a=Wt,(en=gn.z+Yn-Xt.z-On+ue(gn._,Xt._))>0&&(Js(Fo(gn,Wt,Yt),Wt,en),On+=en,Dn+=en),Yn+=gn.m,On+=Xt.m,Xn+=$t.m,Dn+=bn.m;gn&&!Ls(bn)&&(bn.t=gn,bn.m+=Yn-Dn),Xt&&!Xa($t)&&($t.t=Xt,$t.m+=On-Xn,Yt=Wt)}return Yt}(it,Dt,it.parent.A||St[0])}function We(it){it._.x=it.z+it.parent.m,it.m+=it.parent.m}function Je(it){it.x*=Ae[0],it.y=it.depth*Ae[1]}return Fe.separation=function(it){return arguments.length?(ue=it,Fe):ue},Fe.size=function(it){return arguments.length?(Oe=null==(Ae=it)?Je:null,Fe):Oe?null:Ae},Fe.nodeSize=function(it){return arguments.length?(Oe=null==(Ae=it)?null:Je,Fe):Oe?Ae:null},Oo(Fe,ee)},l.layout.cluster=function(){var ee=l.layout.hierarchy().sort(null).value(null),ue=so,Ae=[1,1],Oe=!1;function Fe(Ue,We){var Je,it=ee.call(this,Ue,We),ut=it[0],St=0;Pa(ut,function(Yt){var Xt,en=Yt.children;en&&en.length?(Yt.x=(Xt=en).reduce(function(bn,gn){return bn+gn.x},0)/Xt.length,Yt.y=function(Xt){return 1+l.max(Xt,function(bn){return bn.y})}(en)):(Yt.x=Je?St+=ue(Yt,Je):0,Yt.y=0,Je=Yt)});var Dt=Ks(ut),Ft=Bo(ut),Wt=Dt.x-ue(Dt,Ft)/2,cn=Ft.x+ue(Ft,Dt)/2;return Pa(ut,Oe?function(Yt){Yt.x=(Yt.x-ut.x)*Ae[0],Yt.y=(ut.y-Yt.y)*Ae[1]}:function(Yt){Yt.x=(Yt.x-Wt)/(cn-Wt)*Ae[0],Yt.y=(1-(ut.y?Yt.y/ut.y:1))*Ae[1]}),it}return Fe.separation=function(Ue){return arguments.length?(ue=Ue,Fe):ue},Fe.size=function(Ue){return arguments.length?(Oe=null==(Ae=Ue),Fe):Oe?null:Ae},Fe.nodeSize=function(Ue){return arguments.length?(Oe=null!=(Ae=Ue),Fe):Oe?Ae:null},Oo(Fe,ee)},l.layout.treemap=function(){var ee,ue=l.layout.hierarchy(),Ae=Math.round,Oe=[1,1],Fe=null,Ue=lo,We=!1,Je="squarify",it=.5*(1+Math.sqrt(5));function ut(Yt,en){for(var Xt,bn,gn=-1,$t=Yt.length;++gn<$t;)bn=(Xt=Yt[gn]).value*(en<0?0:en),Xt.area=isNaN(bn)||bn<=0?0:bn}function St(Yt){var en=Yt.children;if(en&&en.length){var Xt,bn,gn,$t=Ue(Yt),On=[],Dn=en.slice(),Yn=1/0,Xn="slice"===Je?$t.dx:"dice"===Je?$t.dy:"slice-dice"===Je?1&Yt.depth?$t.dy:$t.dx:Math.min($t.dx,$t.dy);for(ut(Dn,$t.dx*$t.dy/Yt.value),On.area=0;(gn=Dn.length)>0;)On.push(Xt=Dn[gn-1]),On.area+=Xt.area,"squarify"!==Je||(bn=Ft(On,Xn))<=Yn?(Dn.pop(),Yn=bn):(On.area-=On.pop().area,Wt(On,Xn,$t,!1),Xn=Math.min($t.dx,$t.dy),On.length=On.area=0,Yn=1/0);On.length&&(Wt(On,Xn,$t,!0),On.length=On.area=0),en.forEach(St)}}function Dt(Yt){var en=Yt.children;if(en&&en.length){var Xt,bn=Ue(Yt),gn=en.slice(),$t=[];for(ut(gn,bn.dx*bn.dy/Yt.value),$t.area=0;Xt=gn.pop();)$t.push(Xt),$t.area+=Xt.area,null!=Xt.z&&(Wt($t,Xt.z?bn.dx:bn.dy,bn,!gn.length),$t.length=$t.area=0);en.forEach(Dt)}}function Ft(Yt,en){for(var Xt,bn=Yt.area,gn=0,$t=1/0,On=-1,Dn=Yt.length;++On<Dn;)(Xt=Yt[On].area)&&(Xt<$t&&($t=Xt),Xt>gn&&(gn=Xt));return en*=en,(bn*=bn)?Math.max(en*gn*it/bn,bn/(en*$t*it)):1/0}function Wt(Yt,en,Xt,bn){var gn,$t=-1,On=Yt.length,Dn=Xt.x,Yn=Xt.y,Xn=en?Ae(Yt.area/en):0;if(en==Xt.dx){for((bn||Xn>Xt.dy)&&(Xn=Xt.dy);++$t<On;)(gn=Yt[$t]).x=Dn,gn.y=Yn,gn.dy=Xn,Dn+=gn.dx=Math.min(Xt.x+Xt.dx-Dn,Xn?Ae(gn.area/Xn):0);gn.z=!0,gn.dx+=Xt.x+Xt.dx-Dn,Xt.y+=Xn,Xt.dy-=Xn}else{for((bn||Xn>Xt.dx)&&(Xn=Xt.dx);++$t<On;)(gn=Yt[$t]).x=Dn,gn.y=Yn,gn.dx=Xn,Yn+=gn.dy=Math.min(Xt.y+Xt.dy-Yn,Xn?Ae(gn.area/Xn):0);gn.z=!1,gn.dy+=Xt.y+Xt.dy-Yn,Xt.x+=Xn,Xt.dx-=Xn}}function cn(Yt){var en=ee||ue(Yt),Xt=en[0];return Xt.x=Xt.y=0,Xt.value?(Xt.dx=Oe[0],Xt.dy=Oe[1]):Xt.dx=Xt.dy=0,ee&&ue.revalue(Xt),ut([Xt],Xt.dx*Xt.dy/Xt.value),(ee?Dt:St)(Xt),We&&(ee=en),en}return cn.size=function(Yt){return arguments.length?(Oe=Yt,cn):Oe},cn.padding=function(Yt){return arguments.length?(Ue=null==(Fe=Yt)?lo:"function"==(bn=typeof Yt)?function en(gn){var $t=Yt.call(cn,gn,gn.depth);return null==$t?lo(gn):No(gn,"number"==typeof $t?[$t,$t,$t,$t]:$t)}:("number"===bn&&(Yt=[Yt,Yt,Yt,Yt]),function Xt(gn){return No(gn,Yt)}),cn):Fe;var bn},cn.round=function(Yt){return arguments.length?(Ae=Yt?Math.round:Number,cn):Ae!=Number},cn.sticky=function(Yt){return arguments.length?(We=Yt,ee=null,cn):We},cn.ratio=function(Yt){return arguments.length?(it=Yt,cn):it},cn.mode=function(Yt){return arguments.length?(Je=Yt+"",cn):Je},Oo(cn,ue)},l.random={normal:function(ee,ue){var Ae=arguments.length;return Ae<2&&(ue=1),Ae<1&&(ee=0),function(){var Oe,Fe,Ue;do{Ue=(Oe=2*Math.random()-1)*Oe+(Fe=2*Math.random()-1)*Fe}while(!Ue||Ue>1);return ee+ue*Oe*Math.sqrt(-2*Math.log(Ue)/Ue)}},logNormal:function(){var ee=l.random.normal.apply(l,arguments);return function(){return Math.exp(ee())}},bates:function(ee){var ue=l.random.irwinHall(ee);return function(){return ue()/ee}},irwinHall:function(ee){return function(){for(var ue=0,Ae=0;Ae<ee;Ae++)ue+=Math.random();return ue}}},l.scale={};var Yi={floor:j,ceil:j};function qi(ee,ue,Ae,Oe){var Fe=[],Ue=[],We=0,Je=Math.min(ee.length,ue.length)-1;for(ee[Je]<ee[0]&&(ee=ee.slice().reverse(),ue=ue.slice().reverse());++We<=Je;)Fe.push(Ae(ee[We-1],ee[We])),Ue.push(Oe(ue[We-1],ue[We]));return function(it){var ut=l.bisect(ee,it,1,Je)-1;return Ue[ut](Fe[ut](it))}}function sa(ee,ue,Ae,Oe){var Fe,Ue;function We(){var it=Math.min(ee.length,ue.length)>2?qi:jo,ut=Oe?Co:Zs;return Fe=it(ee,ue,ut,Ae),Ue=it(ue,ee,ut,ma),Je}function Je(it){return Fe(it)}return Je.invert=function(it){return Ue(it)},Je.domain=function(it){return arguments.length?(ee=it.map(Number),We()):ee},Je.range=function(it){return arguments.length?(ue=it,We()):ue},Je.rangeRound=function(it){return Je.range(it).interpolate(ll)},Je.clamp=function(it){return arguments.length?(Oe=it,We()):Oe},Je.interpolate=function(it){return arguments.length?(Ae=it,We()):Ae},Je.ticks=function(it){return ya(ee,it)},Je.tickFormat=function(it,ut){return d3_scale_linearTickFormat(ee,it,ut)},Je.nice=function(it){return Ia(ee,it),We()},Je.copy=function(){return sa(ee,ue,Ae,Oe)},We()}function To(ee,ue){return l.rebind(ee,ue,"range","rangeRound","interpolate","clamp")}function Ia(ee,ue){return Ii(ee,Wi(Di(ee,ue)[2])),Ii(ee,Wi(Di(ee,ue)[2])),ee}function Di(ee,ue){null==ue&&(ue=10);var Ae=mi(ee),Oe=Ae[1]-Ae[0],Fe=Math.pow(10,Math.floor(Math.log(Oe/ue)/Math.LN10)),Ue=ue/Oe*Fe;return Ue<=.15?Fe*=10:Ue<=.35?Fe*=5:Ue<=.75&&(Fe*=2),Ae[0]=Math.ceil(Ae[0]/Fe)*Fe,Ae[1]=Math.floor(Ae[1]/Fe)*Fe+.5*Fe,Ae[2]=Fe,Ae}function ya(ee,ue){return l.range.apply(l,Di(ee,ue))}function Cs(ee,ue,Ae,Oe){function Fe(Je){return(Ae?Math.log(Je<0?0:Je):-Math.log(Je>0?0:-Je))/Math.log(ue)}function Ue(Je){return Ae?Math.pow(ue,Je):-Math.pow(ue,-Je)}function We(Je){return ee(Fe(Je))}return We.invert=function(Je){return Ue(ee.invert(Je))},We.domain=function(Je){return arguments.length?(Ae=Je[0]>=0,ee.domain((Oe=Je.map(Number)).map(Fe)),We):Oe},We.base=function(Je){return arguments.length?(ue=+Je,ee.domain(Oe.map(Fe)),We):ue},We.nice=function(){var Je=Ii(Oe.map(Fe),Ae?Math:Ps);return ee.domain(Je),Oe=Je.map(Ue),We},We.ticks=function(){var Je=mi(Oe),it=[],ut=Je[0],St=Je[1],Dt=Math.floor(Fe(ut)),Ft=Math.ceil(Fe(St)),Wt=ue%1?2:ue;if(isFinite(Ft-Dt)){if(Ae){for(;Dt<Ft;Dt++)for(var cn=1;cn<Wt;cn++)it.push(Ue(Dt)*cn);it.push(Ue(Dt))}else for(it.push(Ue(Dt));Dt++<Ft;)for(cn=Wt-1;cn>0;cn--)it.push(Ue(Dt)*cn);for(Dt=0;it[Dt]<ut;Dt++);for(Ft=it.length;it[Ft-1]>St;Ft--);it=it.slice(Dt,Ft)}return it},We.copy=function(){return Cs(ee.copy(),ue,Ae,Oe)},To(We,ee)}l.scale.linear=function(){return sa([0,1],[0,1],ma,!1)},l.scale.log=function(){return Cs(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Ps={floor:function(ee){return-Math.ceil(-ee)},ceil:function(ee){return-Math.floor(-ee)}};function ia(ee,ue,Ae){var Oe=_r(ue),Fe=_r(1/ue);function Ue(We){return ee(Oe(We))}return Ue.invert=function(We){return Fe(ee.invert(We))},Ue.domain=function(We){return arguments.length?(ee.domain((Ae=We.map(Number)).map(Oe)),Ue):Ae},Ue.ticks=function(We){return ya(Ae,We)},Ue.tickFormat=function(We,Je){return d3_scale_linearTickFormat(Ae,We,Je)},Ue.nice=function(We){return Ue.domain(Ia(Ae,We))},Ue.exponent=function(We){return arguments.length?(Oe=_r(ue=We),Fe=_r(1/ue),ee.domain(Ae.map(Oe)),Ue):ue},Ue.copy=function(){return ia(ee.copy(),ue,Ae)},To(Ue,ee)}function _r(ee){return function(ue){return ue<0?-Math.pow(-ue,ee):Math.pow(ue,ee)}}function Uo(ee,ue){var Ae,Oe,Fe;function Ue(Je){return Oe[((Ae.get(Je)||("range"===ue.t?Ae.set(Je,ee.push(Je)):NaN))-1)%Oe.length]}function We(Je,it){return l.range(ee.length).map(function(ut){return Je+it*ut})}return Ue.domain=function(Je){if(!arguments.length)return ee;ee=[],Ae=new w;for(var it,ut=-1,St=Je.length;++ut<St;)Ae.has(it=Je[ut])||Ae.set(it,ee.push(it));return Ue[ue.t].apply(Ue,ue.a)},Ue.range=function(Je){return arguments.length?(Oe=Je,Fe=0,ue={t:"range",a:arguments},Ue):Oe},Ue.rangePoints=function(Je,it){arguments.length<2&&(it=0);var ut=Je[0],St=Je[1],Dt=ee.length<2?(ut=(ut+St)/2,0):(St-ut)/(ee.length-1+it);return Oe=We(ut+Dt*it/2,Dt),Fe=0,ue={t:"rangePoints",a:arguments},Ue},Ue.rangeRoundPoints=function(Je,it){arguments.length<2&&(it=0);var ut=Je[0],St=Je[1],Dt=ee.length<2?(ut=St=Math.round((ut+St)/2),0):(St-ut)/(ee.length-1+it)|0;return Oe=We(ut+Math.round(Dt*it/2+(St-ut-(ee.length-1+it)*Dt)/2),Dt),Fe=0,ue={t:"rangeRoundPoints",a:arguments},Ue},Ue.rangeBands=function(Je,it,ut){arguments.length<2&&(it=0),arguments.length<3&&(ut=it);var St=Je[1]<Je[0],Dt=Je[St-0],Wt=(Je[1-St]-Dt)/(ee.length-it+2*ut);return Oe=We(Dt+Wt*ut,Wt),St&&Oe.reverse(),Fe=Wt*(1-it),ue={t:"rangeBands",a:arguments},Ue},Ue.rangeRoundBands=function(Je,it,ut){arguments.length<2&&(it=0),arguments.length<3&&(ut=it);var St=Je[1]<Je[0],Dt=Je[St-0],Ft=Je[1-St],Wt=Math.floor((Ft-Dt)/(ee.length-it+2*ut));return Oe=We(Dt+Math.round((Ft-Dt-(ee.length-it)*Wt)/2),Wt),St&&Oe.reverse(),Fe=Math.round(Wt*(1-it)),ue={t:"rangeRoundBands",a:arguments},Ue},Ue.rangeBand=function(){return Fe},Ue.rangeExtent=function(){return mi(ue.a[0])},Ue.copy=function(){return Uo(ee,ue)},Ue.domain(ee)}l.scale.pow=function(){return ia(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Uo([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(la)},l.scale.category20=function(){return l.scale.ordinal().range(Os)},l.scale.category20b=function(){return l.scale.ordinal().range(Qo)},l.scale.category20c=function(){return l.scale.ordinal().range(es)};var la=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yn),Os=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yn),Qo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yn),es=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yn);function ts(ee,ue){var Ae;function Oe(){var Ue=0,We=ue.length;for(Ae=[];++Ue<We;)Ae[Ue-1]=l.quantile(ee,Ue/We);return Fe}function Fe(Ue){if(!isNaN(Ue=+Ue))return ue[l.bisect(Ae,Ue)]}return Fe.domain=function(Ue){return arguments.length?(ee=Ue.map(h).filter(f).sort(c),Oe()):ee},Fe.range=function(Ue){return arguments.length?(ue=Ue,Oe()):ue},Fe.quantiles=function(){return Ae},Fe.invertExtent=function(Ue){return(Ue=ue.indexOf(Ue))<0?[NaN,NaN]:[Ue>0?Ae[Ue-1]:ee[0],Ue<Ae.length?Ae[Ue]:ee[ee.length-1]]},Fe.copy=function(){return ts(ee,ue)},Oe()}function wr(ee,ue,Ae){var Oe,Fe;function Ue(Je){return Ae[Math.max(0,Math.min(Fe,Math.floor(Oe*(Je-ee))))]}function We(){return Oe=Ae.length/(ue-ee),Fe=Ae.length-1,Ue}return Ue.domain=function(Je){return arguments.length?(ee=+Je[0],ue=+Je[Je.length-1],We()):[ee,ue]},Ue.range=function(Je){return arguments.length?(Ae=Je,We()):Ae},Ue.invertExtent=function(Je){return[Je=(Je=Ae.indexOf(Je))<0?NaN:Je/Oe+ee,Je+1/Oe]},Ue.copy=function(){return wr(ee,ue,Ae)},We()}function ns(ee,ue){function Ae(Oe){if(Oe<=Oe)return ue[l.bisect(ee,Oe)]}return Ae.domain=function(Oe){return arguments.length?(ee=Oe,Ae):ee},Ae.range=function(Oe){return arguments.length?(ue=Oe,Ae):ue},Ae.invertExtent=function(Oe){return Oe=ue.indexOf(Oe),[ee[Oe-1],ee[Oe]]},Ae.copy=function(){return ns(ee,ue)},Ae}function za(ee){function ue(Ae){return+Ae}return ue.invert=ue,ue.domain=ue.range=function(Ae){return arguments.length?(ee=Ae.map(ue),ue):ee},ue.ticks=function(Ae){return ya(ee,Ae)},ue.tickFormat=function(Ae,Oe){return d3_scale_linearTickFormat(ee,Ae,Oe)},ue.copy=function(){return za(ee)},ue}function Is(){return 0}l.scale.quantile=function(){return ts([],[])},l.scale.quantize=function(){return wr(0,1,[0,1])},l.scale.threshold=function(){return ns([.5],[0,1])},l.scale.identity=function(){return za([0,1])},l.svg={},l.svg.arc=function(){var ee=Xi,ue=Vo,Ae=Is,Oe=ys,Fe=uo,Ue=xa,We=ko;function Je(){var ut=Math.max(0,+ee.apply(this,arguments)),St=Math.max(0,+ue.apply(this,arguments)),Dt=Fe.apply(this,arguments)-It,Ft=Ue.apply(this,arguments)-It,Wt=Math.abs(Ft-Dt),cn=Dt>Ft?0:1;if(St<ut&&(Yt=St,St=ut,ut=Yt),Wt>=Ht)return it(St,cn)+(ut?it(ut,1-cn):"")+"Z";var Yt,en,Xt,bn,gn,$t,On,Dn,Yn,Xn,gr,vr,ur=0,dr=0,kr=[];if((bn=(+We.apply(this,arguments)||0)/2)&&(Xt=Oe===ys?Math.sqrt(ut*ut+St*St):+Oe.apply(this,arguments),cn||(dr*=-1),St&&(dr=Be(Xt/St*Math.sin(bn))),ut&&(ur=Be(Xt/ut*Math.sin(bn)))),St){gn=St*Math.cos(Dt+dr),$t=St*Math.sin(Dt+dr),On=St*Math.cos(Ft-dr),Dn=St*Math.sin(Ft-dr);var Vr=Math.abs(Ft-Dt-2*dr)<=Ct?0:1;if(dr&&Va(gn,$t,On,Dn)===cn^Vr){var Hr=(Dt+Ft)/2;gn=St*Math.cos(Hr),$t=St*Math.sin(Hr),On=Dn=null}}else gn=$t=0;if(ut){Yn=ut*Math.cos(Ft-ur),Xn=ut*Math.sin(Ft-ur),gr=ut*Math.cos(Dt+ur),vr=ut*Math.sin(Dt+ur);var hr=Math.abs(Dt-Ft+2*ur)<=Ct?0:1;if(ur&&Va(Yn,Xn,gr,vr)===1-cn^hr){var Ar=(Dt+Ft)/2;Yn=ut*Math.cos(Ar),Xn=ut*Math.sin(Ar),gr=vr=null}}else Yn=Xn=0;if(Wt>Lt&&(Yt=Math.min(Math.abs(St-ut)/2,+Ae.apply(this,arguments)))>.001){en=ut<St^cn?0:1;var Dr=Yt,Rr=Yt;if(Wt<Ct){var Wr=null==gr?[Yn,Xn]:null==On?[gn,$t]:An([gn,$t],[gr,vr],[On,Dn],[Yn,Xn]),Zr=gn-Wr[0],$r=$t-Wr[1],ui=On-Wr[0],yi=Dn-Wr[1],hi=1/Math.sin(Math.acos((Zr*ui+$r*yi)/(Math.sqrt(Zr*Zr+$r*$r)*Math.sqrt(ui*ui+yi*yi)))/2),si=Math.sqrt(Wr[0]*Wr[0]+Wr[1]*Wr[1]);Rr=Math.min(Yt,(ut-si)/(hi-1)),Dr=Math.min(Yt,(St-si)/(hi+1))}if(null!=On){var ci=Ra(null==gr?[Yn,Xn]:[gr,vr],[gn,$t],St,Dr,cn),pi=Ra([On,Dn],[Yn,Xn],St,Dr,cn);Yt===Dr?kr.push("M",ci[0],"A",Dr,",",Dr," 0 0,",en," ",ci[1],"A",St,",",St," 0 ",1-cn^Va(ci[1][0],ci[1][1],pi[1][0],pi[1][1]),",",cn," ",pi[1],"A",Dr,",",Dr," 0 0,",en," ",pi[0]):kr.push("M",ci[0],"A",Dr,",",Dr," 0 1,",en," ",pi[0])}else kr.push("M",gn,",",$t);if(null!=gr){var Si=Ra([gn,$t],[gr,vr],ut,-Rr,cn),Mo=Ra([Yn,Xn],null==On?[gn,$t]:[On,Dn],ut,-Rr,cn);Yt===Rr?kr.push("L",Mo[0],"A",Rr,",",Rr," 0 0,",en," ",Mo[1],"A",ut,",",ut," 0 ",cn^Va(Mo[1][0],Mo[1][1],Si[1][0],Si[1][1]),",",1-cn," ",Si[1],"A",Rr,",",Rr," 0 0,",en," ",Si[0]):kr.push("L",Mo[0],"A",Rr,",",Rr," 0 0,",en," ",Si[0])}else kr.push("L",Yn,",",Xn)}else kr.push("M",gn,",",$t),null!=On&&kr.push("A",St,",",St," 0 ",Vr,",",cn," ",On,",",Dn),kr.push("L",Yn,",",Xn),null!=gr&&kr.push("A",ut,",",ut," 0 ",hr,",",1-cn," ",gr,",",vr);return kr.push("Z"),kr.join("")}function it(ut,St){return"M0,"+ut+"A"+ut+","+ut+" 0 1,"+St+" 0,"+-ut+"A"+ut+","+ut+" 0 1,"+St+" 0,"+ut}return Je.innerRadius=function(ut){return arguments.length?(ee=jn(ut),Je):ee},Je.outerRadius=function(ut){return arguments.length?(ue=jn(ut),Je):ue},Je.cornerRadius=function(ut){return arguments.length?(Ae=jn(ut),Je):Ae},Je.padRadius=function(ut){return arguments.length?(Oe=ut==ys?ys:jn(ut),Je):Oe},Je.startAngle=function(ut){return arguments.length?(Fe=jn(ut),Je):Fe},Je.endAngle=function(ut){return arguments.length?(Ue=jn(ut),Je):Ue},Je.padAngle=function(ut){return arguments.length?(We=jn(ut),Je):We},Je.centroid=function(){var ut=(+ee.apply(this,arguments)+ +ue.apply(this,arguments))/2,St=(+Fe.apply(this,arguments)+ +Ue.apply(this,arguments))/2-It;return[Math.cos(St)*ut,Math.sin(St)*ut]},Je};var ys="auto";function Xi(ee){return ee.innerRadius}function Vo(ee){return ee.outerRadius}function uo(ee){return ee.startAngle}function xa(ee){return ee.endAngle}function ko(ee){return ee&&ee.padAngle}function Va(ee,ue,Ae,Oe){return(ee-Ae)*ue-(ue-Oe)*ee>0?0:1}function Ra(ee,ue,Ae,Oe,Fe){var Ue=ee[0]-ue[0],We=ee[1]-ue[1],Je=(Fe?Oe:-Oe)/Math.sqrt(Ue*Ue+We*We),it=Je*We,ut=-Je*Ue,St=ee[0]+it,Dt=ee[1]+ut,Ft=ue[0]+it,Wt=ue[1]+ut,cn=(St+Ft)/2,Yt=(Dt+Wt)/2,en=Ft-St,Xt=Wt-Dt,bn=en*en+Xt*Xt,gn=Ae-Oe,$t=St*Wt-Ft*Dt,On=(Xt<0?-1:1)*Math.sqrt(Math.max(0,gn*gn*bn-$t*$t)),Dn=($t*Xt-en*On)/bn,Yn=(-$t*en-Xt*On)/bn,Xn=($t*Xt+en*On)/bn,gr=(-$t*en+Xt*On)/bn,vr=Dn-cn,ur=Yn-Yt,dr=Xn-cn,kr=gr-Yt;return vr*vr+ur*ur>dr*dr+kr*kr&&(Dn=Xn,Yn=gr),[[Dn-it,Yn-ut],[Dn*Ae/gn,Yn*Ae/gn]]}function Ho(){return!0}function Ji(ee){var ue=Ln,Ae=Bn,Oe=Ho,Fe=ri,Ue=Fe.key,We=.7;function Je(it){var ut,St=[],Dt=[],Ft=-1,Wt=it.length,cn=jn(ue),Yt=jn(Ae);function en(){St.push("M",Fe(ee(Dt),We))}for(;++Ft<Wt;)Oe.call(this,ut=it[Ft],Ft)?Dt.push([+cn.call(this,ut,Ft),+Yt.call(this,ut,Ft)]):Dt.length&&(en(),Dt=[]);return Dt.length&&en(),St.length?St.join(""):null}return Je.x=function(it){return arguments.length?(ue=it,Je):ue},Je.y=function(it){return arguments.length?(Ae=it,Je):Ae},Je.defined=function(it){return arguments.length?(Oe=it,Je):Oe},Je.interpolate=function(it){return arguments.length?(Ue="function"==typeof it?Fe=it:(Fe=Da.get(it)||ri).key,Je):Ue},Je.tension=function(it){return arguments.length?(We=it,Je):We},Je}l.svg.line=function(){return Ji(j)};var Da=l.map({linear:ri,"linear-closed":xs,step:function(ee){for(var ue=0,Ae=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++ue<Ae;)Fe.push("H",(Oe[0]+(Oe=ee[ue])[0])/2,"V",Oe[1]);return Ae>1&&Fe.push("H",Oe[0]),Fe.join("")},"step-before":Aa,"step-after":Fa,basis:ni,"basis-open":function(ee){if(ee.length<4)return ri(ee);for(var ue,Ae=[],Oe=-1,Fe=ee.length,Ue=[0],We=[0];++Oe<3;)Ue.push((ue=ee[Oe])[0]),We.push(ue[1]);for(Ae.push(Vi($a,Ue)+","+Vi($a,We)),--Oe;++Oe<Fe;)ue=ee[Oe],Ue.shift(),Ue.push(ue[0]),We.shift(),We.push(ue[1]),Ao(Ae,Ue,We);return Ae.join("")},"basis-closed":function(ee){for(var ue,Ae,Oe=-1,Fe=ee.length,Ue=Fe+4,We=[],Je=[];++Oe<4;)We.push((Ae=ee[Oe%Fe])[0]),Je.push(Ae[1]);for(ue=[Vi($a,We),",",Vi($a,Je)],--Oe;++Oe<Ue;)Ae=ee[Oe%Fe],We.shift(),We.push(Ae[0]),Je.shift(),Je.push(Ae[1]),Ao(ue,We,Je);return ue.join("")},bundle:function(ee,ue){var Ae=ee.length-1;if(Ae)for(var Oe,Fe,Ue=ee[0][0],We=ee[0][1],Je=ee[Ae][0]-Ue,it=ee[Ae][1]-We,ut=-1;++ut<=Ae;)(Oe=ee[ut])[0]=ue*Oe[0]+(1-ue)*(Ue+(Fe=ut/Ae)*Je),Oe[1]=ue*Oe[1]+(1-ue)*(We+Fe*it);return ni(ee)},cardinal:function(ee,ue){return ee.length<3?ri(ee):ee[0]+Ka(ee,ua(ee,ue))},"cardinal-open":function(ee,ue){return ee.length<4?ri(ee):ee[1]+Ka(ee.slice(1,-1),ua(ee,ue))},"cardinal-closed":function(ee,ue){return ee.length<3?xs(ee):ee[0]+Ka((ee.push(ee[0]),ee),ua([ee[ee.length-2]].concat(ee,[ee[1]]),ue))},monotone:function(ee){return ee.length<3?ri(ee):ee[0]+Ka(ee,function(ue){for(var Ae,Oe,Fe,Ue,We=[],Je=function(St){for(var Dt=0,Ft=St.length-1,Wt=[],cn=St[0],Yt=St[1],en=Wt[0]=co(cn,Yt);++Dt<Ft;)Wt[Dt]=(en+(en=co(cn=Yt,Yt=St[Dt+1])))/2;return Wt[Dt]=en,Wt}(ue),it=-1,ut=ue.length-1;++it<ut;)Ae=co(ue[it],ue[it+1]),y(Ae)<Lt?Je[it]=Je[it+1]=0:(Ue=(Oe=Je[it]/Ae)*Oe+(Fe=Je[it+1]/Ae)*Fe)>9&&(Ue=3*Ae/Math.sqrt(Ue),Je[it]=Ue*Oe,Je[it+1]=Ue*Fe);for(it=-1;++it<=ut;)Ue=(ue[Math.min(ut,it+1)][0]-ue[Math.max(0,it-1)][0])/(6*(1+Je[it]*Je[it])),We.push([Ue||0,Je[it]*Ue||0]);return We}(ee))}});function ri(ee){return ee.length>1?ee.join("L"):ee+"Z"}function xs(ee){return ee.join("L")+"Z"}function Aa(ee){for(var ue=0,Ae=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++ue<Ae;)Fe.push("V",(Oe=ee[ue])[1],"H",Oe[0]);return Fe.join("")}function Fa(ee){for(var ue=0,Ae=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++ue<Ae;)Fe.push("H",(Oe=ee[ue])[0],"V",Oe[1]);return Fe.join("")}function Ka(ee,ue){if(ue.length<1||ee.length!=ue.length&&ee.length!=ue.length+2)return ri(ee);var Ae=ee.length!=ue.length,Oe="",Fe=ee[0],Ue=ee[1],We=ue[0],Je=We,it=1;if(Ae&&(Oe+="Q"+(Ue[0]-2*We[0]/3)+","+(Ue[1]-2*We[1]/3)+","+Ue[0]+","+Ue[1],Fe=ee[1],it=2),ue.length>1){Ue=ee[it],it++,Oe+="C"+(Fe[0]+We[0])+","+(Fe[1]+We[1])+","+(Ue[0]-(Je=ue[1])[0])+","+(Ue[1]-Je[1])+","+Ue[0]+","+Ue[1];for(var ut=2;ut<ue.length;ut++,it++)Oe+="S"+((Ue=ee[it])[0]-(Je=ue[ut])[0])+","+(Ue[1]-Je[1])+","+Ue[0]+","+Ue[1]}if(Ae){var St=ee[it];Oe+="Q"+(Ue[0]+2*Je[0]/3)+","+(Ue[1]+2*Je[1]/3)+","+St[0]+","+St[1]}return Oe}function ua(ee,ue){for(var Ae,Oe=[],Fe=(1-ue)/2,Ue=ee[0],We=ee[1],Je=1,it=ee.length;++Je<it;)Ae=Ue,Ue=We,Oe.push([Fe*((We=ee[Je])[0]-Ae[0]),Fe*(We[1]-Ae[1])]);return Oe}function ni(ee){if(ee.length<3)return ri(ee);var ue=1,Ae=ee.length,Oe=ee[0],Fe=Oe[0],Ue=Oe[1],We=[Fe,Fe,Fe,(Oe=ee[1])[0]],Je=[Ue,Ue,Ue,Oe[1]],it=[Fe,",",Ue,"L",Vi($a,We),",",Vi($a,Je)];for(ee.push(ee[Ae-1]);++ue<=Ae;)Oe=ee[ue],We.shift(),We.push(Oe[0]),Je.shift(),Je.push(Oe[1]),Ao(it,We,Je);return ee.pop(),it.push("L",Oe),it.join("")}function Vi(ee,ue){return ee[0]*ue[0]+ee[1]*ue[1]+ee[2]*ue[2]+ee[3]*ue[3]}Da.forEach(function(ee,ue){ue.key=ee,ue.closed=/-closed$/.test(ee)});var Ha=[0,2/3,1/3,0],ca=[0,1/3,2/3,0],$a=[0,1/6,2/3,1/6];function Ao(ee,ue,Ae){ee.push("C",Vi(Ha,ue),",",Vi(Ha,Ae),",",Vi(ca,ue),",",Vi(ca,Ae),",",Vi($a,ue),",",Vi($a,Ae))}function co(ee,ue){return(ue[1]-ee[1])/(ue[0]-ee[0])}function Ki(ee){for(var ue,Ae,Oe,Fe=-1,Ue=ee.length;++Fe<Ue;)Ae=(ue=ee[Fe])[0],Oe=ue[1]-It,ue[0]=Ae*Math.cos(Oe),ue[1]=Ae*Math.sin(Oe);return ee}function Ba(ee){var ue=Ln,Ae=Ln,Oe=0,Fe=Bn,Ue=Ho,We=ri,Je=We.key,it=We,ut="L",St=.7;function Dt(Ft){var Wt,cn,Yt,en=[],Xt=[],bn=[],gn=-1,$t=Ft.length,On=jn(ue),Dn=jn(Oe),Yn=ue===Ae?function(){return cn}:jn(Ae),Xn=Oe===Fe?function(){return Yt}:jn(Fe);function gr(){en.push("M",We(ee(bn),St),ut,it(ee(Xt.reverse()),St),"Z")}for(;++gn<$t;)Ue.call(this,Wt=Ft[gn],gn)?(Xt.push([cn=+On.call(this,Wt,gn),Yt=+Dn.call(this,Wt,gn)]),bn.push([+Yn.call(this,Wt,gn),+Xn.call(this,Wt,gn)])):Xt.length&&(gr(),Xt=[],bn=[]);return Xt.length&&gr(),en.length?en.join(""):null}return Dt.x=function(Ft){return arguments.length?(ue=Ae=Ft,Dt):Ae},Dt.x0=function(Ft){return arguments.length?(ue=Ft,Dt):ue},Dt.x1=function(Ft){return arguments.length?(Ae=Ft,Dt):Ae},Dt.y=function(Ft){return arguments.length?(Oe=Fe=Ft,Dt):Fe},Dt.y0=function(Ft){return arguments.length?(Oe=Ft,Dt):Oe},Dt.y1=function(Ft){return arguments.length?(Fe=Ft,Dt):Fe},Dt.defined=function(Ft){return arguments.length?(Ue=Ft,Dt):Ue},Dt.interpolate=function(Ft){return arguments.length?(Je="function"==typeof Ft?We=Ft:(We=Da.get(Ft)||ri).key,it=We.reverse||We,ut=We.closed?"M":"L",Dt):Je},Dt.tension=function(Ft){return arguments.length?(St=Ft,Dt):St},Dt}function Mr(ee){return ee.source}function Or(ee){return ee.target}function rs(ee){return ee.radius}function fo(ee){return[ee.x,ee.y]}function $i(){return 64}function zs(){return"circle"}function fa(ee){var ue=Math.sqrt(ee/Ct);return"M0,"+ue+"A"+ue+","+ue+" 0 1,1 0,"+-ue+"A"+ue+","+ue+" 0 1,1 0,"+ue+"Z"}l.svg.line.radial=function(){var ee=Ji(Ki);return ee.radius=ee.x,delete ee.x,ee.angle=ee.y,delete ee.y,ee},Aa.reverse=Fa,Fa.reverse=Aa,l.svg.area=function(){return Ba(j)},l.svg.area.radial=function(){var ee=Ba(Ki);return ee.radius=ee.x,delete ee.x,ee.innerRadius=ee.x0,delete ee.x0,ee.outerRadius=ee.x1,delete ee.x1,ee.angle=ee.y,delete ee.y,ee.startAngle=ee.y0,delete ee.y0,ee.endAngle=ee.y1,delete ee.y1,ee},l.svg.chord=function(){var ee=Mr,ue=Or,Ae=rs,Oe=uo,Fe=xa;function Ue(ut,St){var Dt,Ft,Wt=We(this,ee,ut,St),cn=We(this,ue,ut,St);return"M"+Wt.p0+Je(Wt.r,Wt.p1,Wt.a1-Wt.a0)+((Dt=Wt).a0==(Ft=cn).a0&&Dt.a1==Ft.a1?it(0,0,0,Wt.p0):it(0,0,0,cn.p0)+Je(cn.r,cn.p1,cn.a1-cn.a0)+it(0,0,0,Wt.p0))+"Z"}function We(ut,St,Dt,Ft){var Wt=St.call(ut,Dt,Ft),cn=Ae.call(ut,Wt,Ft),Yt=Oe.call(ut,Wt,Ft)-It,en=Fe.call(ut,Wt,Ft)-It;return{r:cn,a0:Yt,a1:en,p0:[cn*Math.cos(Yt),cn*Math.sin(Yt)],p1:[cn*Math.cos(en),cn*Math.sin(en)]}}function Je(ut,St,Dt){return"A"+ut+","+ut+" 0 "+ +(Dt>Ct)+",1 "+St}function it(ut,St,Dt,Ft){return"Q 0,0 "+Ft}return Ue.radius=function(ut){return arguments.length?(Ae=jn(ut),Ue):Ae},Ue.source=function(ut){return arguments.length?(ee=jn(ut),Ue):ee},Ue.target=function(ut){return arguments.length?(ue=jn(ut),Ue):ue},Ue.startAngle=function(ut){return arguments.length?(Oe=jn(ut),Ue):Oe},Ue.endAngle=function(ut){return arguments.length?(Fe=jn(ut),Ue):Fe},Ue},l.svg.diagonal=function(){var ee=Mr,ue=Or,Ae=fo;function Oe(Fe,Ue){var We=ee.call(this,Fe,Ue),Je=ue.call(this,Fe,Ue),it=(We.y+Je.y)/2,ut=[We,{x:We.x,y:it},{x:Je.x,y:it},Je];return"M"+(ut=ut.map(Ae))[0]+"C"+ut[1]+" "+ut[2]+" "+ut[3]}return Oe.source=function(Fe){return arguments.length?(ee=jn(Fe),Oe):ee},Oe.target=function(Fe){return arguments.length?(ue=jn(Fe),Oe):ue},Oe.projection=function(Fe){return arguments.length?(Ae=Fe,Oe):Ae},Oe},l.svg.diagonal.radial=function(){var ee=l.svg.diagonal(),ue=fo,Ae=ee.projection;return ee.projection=function(Oe){return arguments.length?Ae(function qa(ee){return function(){var ue=ee.apply(this,arguments),Ae=ue[0],Oe=ue[1]-It;return[Ae*Math.cos(Oe),Ae*Math.sin(Oe)]}}(ue=Oe)):ue},ee},l.svg.symbol=function(){var ee=zs,ue=$i;function Ae(Oe,Fe){return(is.get(ee.call(this,Oe,Fe))||fa)(ue.call(this,Oe,Fe))}return Ae.type=function(Oe){return arguments.length?(ee=jn(Oe),Ae):ee},Ae.size=function(Oe){return arguments.length?(ue=jn(Oe),Ae):ue},Ae};var is=l.map({circle:fa,cross:function(ee){var ue=Math.sqrt(ee/5)/2;return"M"+-3*ue+","+-ue+"H"+-ue+"V"+-3*ue+"H"+ue+"V"+-ue+"H"+3*ue+"V"+ue+"H"+ue+"V"+3*ue+"H"+-ue+"V"+ue+"H"+-3*ue+"Z"},diamond:function(ee){var ue=Math.sqrt(ee/(2*oi)),Ae=ue*oi;return"M0,"+-ue+"L"+Ae+",0 0,"+ue+" "+-Ae+",0Z"},square:function(ee){var ue=Math.sqrt(ee)/2;return"M"+-ue+","+-ue+"L"+ue+","+-ue+" "+ue+","+ue+" "+-ue+","+ue+"Z"},"triangle-down":function(ee){var ue=Math.sqrt(ee/ho),Ae=ue*ho/2;return"M0,"+Ae+"L"+ue+","+-Ae+" "+-ue+","+-Ae+"Z"},"triangle-up":function(ee){var ue=Math.sqrt(ee/ho),Ae=ue*ho/2;return"M0,"+-Ae+"L"+ue+","+Ae+" "+-ue+","+Ae+"Z"}});l.svg.symbolTypes=is.keys();var ho=Math.sqrt(3),oi=Math.tan(30*Ge);le.transition=function(ee){for(var ue,Ae,Oe=$e||++xt,Fe=Y(ee),Ue=[],We=ot||{time:Date.now(),ease:no,delay:0,duration:250},Je=-1,it=this.length;++Je<it;){Ue.push(ue=[]);for(var ut=this[Je],St=-1,Dt=ut.length;++St<Dt;)(Ae=ut[St])&&q(Ae,St,Fe,Oe,We),ue.push(Ae)}return Xe(Ue,Fe,Oe)},le.interrupt=function(ee){return this.each(null==ee?fi:Rs(Y(ee)))};var fi=Rs(Y());function Rs(ee){return function(){var ue,Ae,Oe;(ue=this[ee])&&(Oe=ue[Ae=ue.active])&&(Oe.timer.c=null,Oe.timer.t=NaN,--ue.count?delete ue[Ae]:delete this[ee],ue.active+=.5,Oe.event&&Oe.event.interrupt.call(this,this.__data__,Oe.index))}}function Xe(ee,ue,Ae){return X(ee,ft),ee.namespace=ue,ee.id=Ae,ee}var $e,ot,ft=[],xt=0;function mt(ee,ue,Ae,Oe){var Fe=ee.id,Ue=ee.namespace;return ze(ee,"function"==typeof Ae?function(We,Je,it){We[Ue][Fe].tween.set(ue,Oe(Ae.call(We,We.__data__,Je,it)))}:(Ae=Oe(Ae),function(We){We[Ue][Fe].tween.set(ue,Ae)}))}function D(ee){return null==ee&&(ee=""),function(){this.textContent=ee}}function Y(ee){return null==ee?"__transition__":"__transition_"+ee+"__"}function q(ee,ue,Ae,Oe,Fe){var Ue,We,Je,it,ut,St=ee[Ae]||(ee[Ae]={active:0,count:0}),Dt=St[Oe];function Ft(cn){var Yt=St.active,en=St[Yt];for(var Xt in en&&(en.timer.c=null,en.timer.t=NaN,--St.count,delete St[Yt],en.event&&en.event.interrupt.call(ee,ee.__data__,en.index)),St)if(+Xt<Oe){var bn=St[Xt];bn.timer.c=null,bn.timer.t=NaN,--St.count,delete St[Xt]}We.c=Wt,Jt(function(){return We.c&&Wt(cn||1)&&(We.c=null,We.t=NaN),1},0,Ue),St.active=Oe,Dt.event&&Dt.event.start.call(ee,ee.__data__,ue),ut=[],Dt.tween.forEach(function(gn,$t){($t=$t.call(ee,ee.__data__,ue))&&ut.push($t)}),it=Dt.ease,Je=Dt.duration}function Wt(cn){for(var Yt=cn/Je,en=it(Yt),Xt=ut.length;Xt>0;)ut[--Xt].call(ee,en);if(Yt>=1)return Dt.event&&Dt.event.end.call(ee,ee.__data__,ue),--St.count?delete St[Oe]:delete ee[Ae],1}Dt||(We=Jt(function(cn){var Yt=Dt.delay;if(We.t=Yt+Ue,Yt<=cn)return Ft(cn-Yt);We.c=Ft},0,Ue=Fe.time),Dt=St[Oe]={tween:new w,time:Ue,timer:We,delay:Fe.delay,duration:Fe.duration,ease:Fe.ease,index:ue},Fe=null,++St.count)}ft.call=le.call,ft.empty=le.empty,ft.node=le.node,ft.size=le.size,l.transition=function(ee,ue){return ee&&ee.transition?$e?ee.transition(ue):ee:l.selection().transition(ee)},l.transition.prototype=ft,ft.select=function(ee){var ue,Ae,Oe,Fe=this.id,Ue=this.namespace,We=[];ee=pe(ee);for(var Je=-1,it=this.length;++Je<it;){We.push(ue=[]);for(var ut=this[Je],St=-1,Dt=ut.length;++St<Dt;)(Oe=ut[St])&&(Ae=ee.call(Oe,Oe.__data__,St,Je))?("__data__"in Oe&&(Ae.__data__=Oe.__data__),q(Ae,St,Ue,Fe,Oe[Ue][Fe]),ue.push(Ae)):ue.push(null)}return Xe(We,Ue,Fe)},ft.selectAll=function(ee){var ue,Ae,Oe,Fe,Ue,We=this.id,Je=this.namespace,it=[];ee=xe(ee);for(var ut=-1,St=this.length;++ut<St;)for(var Dt=this[ut],Ft=-1,Wt=Dt.length;++Ft<Wt;)if(Oe=Dt[Ft]){Ue=Oe[Je][We],Ae=ee.call(Oe,Oe.__data__,Ft,ut),it.push(ue=[]);for(var cn=-1,Yt=Ae.length;++cn<Yt;)(Fe=Ae[cn])&&q(Fe,cn,Je,We,Ue),ue.push(Fe)}return Xe(it,Je,We)},ft.filter=function(ee){var ue,Ae,Oe=[];"function"!=typeof ee&&(ee=Ie(ee));for(var Fe=0,Ue=this.length;Fe<Ue;Fe++){Oe.push(ue=[]);for(var We,Je=0,it=(We=this[Fe]).length;Je<it;Je++)(Ae=We[Je])&&ee.call(Ae,Ae.__data__,Je,Fe)&&ue.push(Ae)}return Xe(Oe,this.namespace,this.id)},ft.tween=function(ee,ue){var Ae=this.id,Oe=this.namespace;return arguments.length<2?this.node()[Oe][Ae].tween.get(ee):ze(this,null==ue?function(Fe){Fe[Oe][Ae].tween.remove(ee)}:function(Fe){Fe[Oe][Ae].tween.set(ee,ue)})},ft.attr=function(ee,ue){if(arguments.length<2){for(ue in ee)this.attr(ue,ee[ue]);return this}var Ae="transform"==ee?Gs:ma,Oe=l.ns.qualify(ee);function Fe(){this.removeAttribute(Oe)}function Ue(){this.removeAttributeNS(Oe.space,Oe.local)}return mt(this,"attr."+ee,ue,Oe.local?function Je(it){return null==it?Ue:(it+="",function(){var ut,St=this.getAttributeNS(Oe.space,Oe.local);return St!==it&&(ut=Ae(St,it),function(Dt){this.setAttributeNS(Oe.space,Oe.local,ut(Dt))})})}:function We(it){return null==it?Fe:(it+="",function(){var ut,St=this.getAttribute(Oe);return St!==it&&(ut=Ae(St,it),function(Dt){this.setAttribute(Oe,ut(Dt))})})})},ft.attrTween=function(ee,ue){var Ae=l.ns.qualify(ee);return this.tween("attr."+ee,Ae.local?function(Oe,Fe){var Ue=ue.call(this,Oe,Fe,this.getAttributeNS(Ae.space,Ae.local));return Ue&&function(We){this.setAttributeNS(Ae.space,Ae.local,Ue(We))}}:function(Oe,Fe){var Ue=ue.call(this,Oe,Fe,this.getAttribute(Ae));return Ue&&function(We){this.setAttribute(Ae,Ue(We))}})},ft.style=function(ee,ue,Ae){var Oe=arguments.length;if(Oe<3){if("string"!=typeof ee){for(Ae in Oe<2&&(ue=""),ee)this.style(Ae,ee[Ae],ue);return this}Ae=""}function Fe(){this.style.removeProperty(ee)}return mt(this,"style."+ee,ue,function Ue(We){return null==We?Fe:(We+="",function(){var Je,it=t(this).getComputedStyle(this,null).getPropertyValue(ee);return it!==We&&(Je=ma(it,We),function(ut){this.style.setProperty(ee,Je(ut),Ae)})})})},ft.styleTween=function(ee,ue,Ae){return arguments.length<3&&(Ae=""),this.tween("style."+ee,function Oe(Fe,Ue){var We=ue.call(this,Fe,Ue,t(this).getComputedStyle(this,null).getPropertyValue(ee));return We&&function(Je){this.style.setProperty(ee,We(Je),Ae)}})},ft.text=function(ee){return mt(this,"text",ee,D)},ft.remove=function(){var ee=this.namespace;return this.each("end.transition",function(){var ue;this[ee].count<2&&(ue=this.parentNode)&&ue.removeChild(this)})},ft.ease=function(ee){var ue=this.id,Ae=this.namespace;return arguments.length<1?this.node()[Ae][ue].ease:("function"!=typeof ee&&(ee=l.ease.apply(l,arguments)),ze(this,function(Oe){Oe[Ae][ue].ease=ee}))},ft.delay=function(ee){var ue=this.id,Ae=this.namespace;return arguments.length<1?this.node()[Ae][ue].delay:ze(this,"function"==typeof ee?function(Oe,Fe,Ue){Oe[Ae][ue].delay=+ee.call(Oe,Oe.__data__,Fe,Ue)}:(ee=+ee,function(Oe){Oe[Ae][ue].delay=ee}))},ft.duration=function(ee){var ue=this.id,Ae=this.namespace;return arguments.length<1?this.node()[Ae][ue].duration:ze(this,"function"==typeof ee?function(Oe,Fe,Ue){Oe[Ae][ue].duration=Math.max(1,ee.call(Oe,Oe.__data__,Fe,Ue))}:(ee=Math.max(1,ee),function(Oe){Oe[Ae][ue].duration=ee}))},ft.each=function(ee,ue){var Ae=this.id,Oe=this.namespace;if(arguments.length<2){var Fe=ot,Ue=$e;try{$e=Ae,ze(this,function(We,Je,it){ot=We[Oe][Ae],ee.call(We,We.__data__,Je,it)})}finally{ot=Fe,$e=Ue}}else ze(this,function(We){var Je=We[Oe][Ae];(Je.event||(Je.event=l.dispatch("start","end","interrupt"))).on(ee,ue)});return this},ft.transition=function(){for(var ee,ue,Ae,Oe=this.id,Fe=++xt,Ue=this.namespace,We=[],Je=0,it=this.length;Je<it;Je++){We.push(ee=[]);for(var ut,St=0,Dt=(ut=this[Je]).length;St<Dt;St++)(ue=ut[St])&&q(ue,St,Ue,Fe,{time:(Ae=ue[Ue][Oe]).time,ease:Ae.ease,delay:Ae.delay+Ae.duration,duration:Ae.duration}),ee.push(ue)}return Xe(We,Ue,Fe)},l.svg.axis=function(){var ee,ue=l.scale.linear(),Ae=te,Oe=6,Fe=6,Ue=3,We=[10],Je=null;function it(ut){ut.each(function(){var St,Dt=l.select(this),Ft=this.__chart__||ue,Wt=this.__chart__=ue.copy(),cn=Je??(Wt.ticks?Wt.ticks.apply(Wt,We):Wt.domain()),Yt=ee??(Wt.tickFormat?Wt.tickFormat.apply(Wt,We):j),en=Dt.selectAll(".tick").data(cn,Wt),Xt=en.enter().insert("g",".domain").attr("class","tick").style("opacity",Lt),bn=l.transition(en.exit()).style("opacity",Lt).remove(),gn=l.transition(en.order()).style("opacity",1),$t=Math.max(Oe,0)+Ue,On=Ja(Wt),Dn=Dt.selectAll(".domain").data([0]),Yn=(Dn.enter().append("path").attr("class","domain"),l.transition(Dn));Xt.append("line"),Xt.append("text");var Xn,gr,vr,ur,dr=Xt.select("line"),kr=gn.select("line"),Vr=en.select("text").text(Yt),Hr=Xt.select("text"),hr=gn.select("text"),Ar="top"===Ae||"left"===Ae?-1:1;if("bottom"===Ae||"top"===Ae?(St=Ce,Xn="x",vr="y",gr="x2",ur="y2",Vr.attr("dy",Ar<0?"0em":".71em").style("text-anchor","middle"),Yn.attr("d","M"+On[0]+","+Ar*Fe+"V0H"+On[1]+"V"+Ar*Fe)):(St=Ne,Xn="y",vr="x",gr="y2",ur="x2",Vr.attr("dy",".32em").style("text-anchor",Ar<0?"end":"start"),Yn.attr("d","M"+Ar*Fe+","+On[0]+"H0V"+On[1]+"H"+Ar*Fe)),dr.attr(ur,Ar*Oe),Hr.attr(vr,Ar*$t),kr.attr(gr,0).attr(ur,Ar*Oe),hr.attr(Xn,0).attr(vr,Ar*$t),Wt.rangeBand){var Dr=Wt,Rr=Dr.rangeBand()/2;Ft=Wt=function(Wr){return Dr(Wr)+Rr}}else Ft.rangeBand?Ft=Wt:bn.call(St,Wt,Ft);Xt.call(St,Ft,Wt),gn.call(St,Wt,Wt)})}return it.scale=function(ut){return arguments.length?(ue=ut,it):ue},it.orient=function(ut){return arguments.length?(Ae=ut in ve?ut+"":te,it):Ae},it.ticks=function(){return arguments.length?(We=b(arguments),it):We},it.tickValues=function(ut){return arguments.length?(Je=ut,it):Je},it.tickFormat=function(ut){return arguments.length?(ee=ut,it):ee},it.tickSize=function(ut){var St=arguments.length;return St?(Oe=+ut,Fe=+arguments[St-1],it):Oe},it.innerTickSize=function(ut){return arguments.length?(Oe=+ut,it):Oe},it.outerTickSize=function(ut){return arguments.length?(Fe=+ut,it):Fe},it.tickPadding=function(ut){return arguments.length?(Ue=+ut,it):Ue},it.tickSubdivide=function(){return arguments.length&&it},it};var te="bottom",ve={top:1,right:1,bottom:1,left:1};function Ce(ee,ue,Ae){ee.attr("transform",function(Oe){var Fe=ue(Oe);return"translate("+(isFinite(Fe)?Fe:Ae(Oe))+",0)"})}function Ne(ee,ue,Ae){ee.attr("transform",function(Oe){var Fe=ue(Oe);return"translate(0,"+(isFinite(Fe)?Fe:Ae(Oe))+")"})}l.svg.brush=function(){var ee,ue,Ae=V(St,"brushstart","brush","brushend"),Oe=null,Fe=null,Ue=[0,0],We=[0,0],Je=!0,it=!0,ut=et[0];function St(Yt){Yt.each(function(){var en=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Xt=en.selectAll(".background").data([0]);Xt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),en.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var bn=en.selectAll(".resize").data(ut,j);bn.exit().remove(),bn.enter().append("g").attr("class",function(Dn){return"resize "+Dn}).style("cursor",function(Dn){return qe[Dn]}).append("rect").attr("x",function(Dn){return/[ew]$/.test(Dn)?-3:null}).attr("y",function(Dn){return/^[ns]/.test(Dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),bn.style("display",St.empty()?"none":null);var gn,$t=l.transition(en),On=l.transition(Xt);Oe&&(gn=Ja(Oe),On.attr("x",gn[0]).attr("width",gn[1]-gn[0]),Ft($t)),Fe&&(gn=Ja(Fe),On.attr("y",gn[0]).attr("height",gn[1]-gn[0]),Wt($t)),Dt($t)})}function Dt(Yt){Yt.selectAll(".resize").attr("transform",function(en){return"translate("+Ue[+/e$/.test(en)]+","+We[+/^s/.test(en)]+")"})}function Ft(Yt){Yt.select(".extent").attr("x",Ue[0]),Yt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function Wt(Yt){Yt.select(".extent").attr("y",We[0]),Yt.selectAll(".extent,.e>rect,.w>rect").attr("height",We[1]-We[0])}function cn(){var Yt,en,Xt=this,bn=l.select(l.event.target),gn=Ae.of(Xt,arguments),$t=l.select(Xt),On=bn.datum(),Dn=!/^(n|s)$/.test(On)&&Oe,Yn=!/^(e|w)$/.test(On)&&Fe,Xn=bn.classed("extent"),gr=dt(Xt),vr=l.mouse(Xt),ur=l.select(t(Xt)).on("keydown.brush",function Vr(){32==l.event.keyCode&&(Xn||(Yt=null,vr[0]-=Ue[1],vr[1]-=We[1],Xn=2),J())}).on("keyup.brush",function Hr(){32==l.event.keyCode&&2==Xn&&(vr[0]+=Ue[1],vr[1]+=We[1],Xn=0,J())});if(l.event.changedTouches?ur.on("touchmove.brush",hr).on("touchend.brush",Dr):ur.on("mousemove.brush",hr).on("mouseup.brush",Dr),$t.interrupt().selectAll("*").interrupt(),Xn)vr[0]=Ue[0]-vr[0],vr[1]=We[0]-vr[1];else if(On){var dr=+/w$/.test(On),kr=+/^n/.test(On);en=[Ue[1-dr]-vr[0],We[1-kr]-vr[1]],vr[0]=Ue[dr],vr[1]=We[kr]}else l.event.altKey&&(Yt=vr.slice());function hr(){var Rr=l.mouse(Xt),Wr=!1;en&&(Rr[0]+=en[0],Rr[1]+=en[1]),Xn||(l.event.altKey?(Yt||(Yt=[(Ue[0]+Ue[1])/2,(We[0]+We[1])/2]),vr[0]=Ue[+(Rr[0]<Yt[0])],vr[1]=We[+(Rr[1]<Yt[1])]):Yt=null),Dn&&Ar(Rr,Oe,0)&&(Ft($t),Wr=!0),Yn&&Ar(Rr,Fe,1)&&(Wt($t),Wr=!0),Wr&&(Dt($t),gn({type:"brush",mode:Xn?"move":"resize"}))}function Ar(Rr,Wr,Zr){var $r,ui,yi=Ja(Wr),hi=yi[0],si=yi[1],ci=vr[Zr],pi=Zr?We:Ue,Si=pi[1]-pi[0];if(Xn&&(hi-=ci,si-=Si+ci),$r=(Zr?it:Je)?Math.max(hi,Math.min(si,Rr[Zr])):Rr[Zr],Xn?ui=($r+=ci)+Si:(Yt&&(ci=Math.max(hi,Math.min(si,2*Yt[Zr]-$r))),ci<$r?(ui=$r,$r=ci):ui=ci),pi[0]!=$r||pi[1]!=ui)return Zr?ue=null:ee=null,pi[0]=$r,pi[1]=ui,!0}function Dr(){hr(),$t.style("pointer-events","all").selectAll(".resize").style("display",St.empty()?"none":null),l.select("body").style("cursor",null),ur.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),gr(),gn({type:"brushend"})}$t.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",bn.style("cursor")),gn({type:"brushstart"}),hr()}return St.event=function(Yt){Yt.each(function(){var en=Ae.of(this,arguments),Xt={x:Ue,y:We,i:ee,j:ue},bn=this.__chart__||Xt;this.__chart__=Xt,$e?l.select(this).transition().each("start.brush",function(){ee=bn.i,ue=bn.j,Ue=bn.x,We=bn.y,en({type:"brushstart"})}).tween("brush:brush",function(){var gn=ka(Ue,Xt.x),$t=ka(We,Xt.y);return ee=ue=null,function(On){Ue=Xt.x=gn(On),We=Xt.y=$t(On),en({type:"brush",mode:"resize"})}}).each("end.brush",function(){ee=Xt.i,ue=Xt.j,en({type:"brush",mode:"resize"}),en({type:"brushend"})}):(en({type:"brushstart"}),en({type:"brush",mode:"resize"}),en({type:"brushend"}))})},St.x=function(Yt){return arguments.length?(ut=et[!(Oe=Yt)<<1|!Fe],St):Oe},St.y=function(Yt){return arguments.length?(ut=et[!Oe<<1|!(Fe=Yt)],St):Fe},St.clamp=function(Yt){return arguments.length?(Oe&&Fe?(Je=!!Yt[0],it=!!Yt[1]):Oe?Je=!!Yt:Fe&&(it=!!Yt),St):Oe&&Fe?[Je,it]:Oe?Je:Fe?it:null},St.extent=function(Yt){var en,Xt,bn,gn,$t;return arguments.length?(Oe&&(en=Yt[0],Xt=Yt[1],Fe&&(en=en[0],Xt=Xt[0]),ee=[en,Xt],Oe.invert&&(en=Oe(en),Xt=Oe(Xt)),Xt<en&&($t=en,en=Xt,Xt=$t),en==Ue[0]&&Xt==Ue[1]||(Ue=[en,Xt])),Fe&&(bn=Yt[0],gn=Yt[1],Oe&&(bn=bn[1],gn=gn[1]),ue=[bn,gn],Fe.invert&&(bn=Fe(bn),gn=Fe(gn)),gn<bn&&($t=bn,bn=gn,gn=$t),bn==We[0]&&gn==We[1]||(We=[bn,gn])),St):(Oe&&(ee?(en=ee[0],Xt=ee[1]):(en=Ue[0],Xt=Ue[1],Oe.invert&&(en=Oe.invert(en),Xt=Oe.invert(Xt)),Xt<en&&($t=en,en=Xt,Xt=$t))),Fe&&(ue?(bn=ue[0],gn=ue[1]):(bn=We[0],gn=We[1],Fe.invert&&(bn=Fe.invert(bn),gn=Fe.invert(gn)),gn<bn&&($t=bn,bn=gn,gn=$t))),Oe&&Fe?[[en,bn],[Xt,gn]]:Oe?[en,Xt]:Fe&&[bn,gn])},St.clear=function(){return St.empty()||(Ue=[0,0],We=[0,0],ee=ue=null),St},St.empty=function(){return!!Oe&&Ue[0]==Ue[1]||!!Fe&&We[0]==We[1]},l.rebind(St,Ae,"on")};var qe={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},et=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function vt(ee){return JSON.parse(ee.responseText)}function yt(ee){var ue=d.createRange();return ue.selectNode(d.body),ue.createContextualFragment(ee.responseText)}l.text=er(function(ee){return ee.responseText}),l.json=function(ee,ue){return Kn(ee,"application/json",vt,ue)},l.html=function(ee,ue){return Kn(ee,"text/html",yt,ue)},l.xml=er(function(ee){return ee.responseXML}),void 0===(A="function"==typeof(k=l)?k.call(z,e,z,Q):k)||(Q.exports=A)}).apply(self)},88294:function(Q,z,e){"use strict";Q.exports=e(62849)},62849:function(Q,z,e){"use strict";var k=e(91358),A=e(53435),l=e(18863),T=e(21527),b=e(71299),d=e(46775),s=e(30120),t=e(64941),o=e(90660),r=e(27084);function n(a,i){for(var c=i[0],h=i[1],f=1/(i[2]-c),x=1/(i[3]-h),v=new Array(a.length),g=0,y=a.length/2;g<y;g++)v[2*g]=A((a[2*g]-c)*f,0,1),v[2*g+1]=A((a[2*g+1]-h)*x,0,1);return v}Q.exports=function(a,i){i||(i={}),a=s(a,"float64"),i=b(i,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=d(i.maxDepth,255),h=d(i.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var f,x=n(a,h),v=a.length>>>1;i.dtype||(i.dtype="array"),"string"==typeof i.dtype?f=new(o(i.dtype))(v):i.dtype&&(f=i.dtype,Array.isArray(f)&&(f.length=v));for(var g=0;g<v;++g)f[g]=g;var y=[],p=[],m=[],w=[];!function j(R,H,F,U,B,N){if(!U.length)return null;var J=y[B]||(y[B]=[]),Z=m[B]||(m[B]=[]),V=p[B]||(p[B]=[]),W=J.length;if(++B>c||N>1073741824){for(var X=0;X<U.length;X++)J.push(U[X]),Z.push(N),V.push(null,null,null,null);return W}if(J.push(U[0]),Z.push(N),U.length<=1)return V.push(null,null,null,null),W;for(var K=.5*F,ne=R+K,re=H+K,ae=[],le=[],pe=[],xe=[],ye=1,se=U.length;ye<se;ye++){var fe=U[ye],de=x[2*fe+1];x[2*fe]<ne?de<re?ae.push(fe):le.push(fe):de<re?pe.push(fe):xe.push(fe)}return V.push(j(R,H,K,ae,B,N<<=2),j(R,re,K,le,B,N+1),j(ne,H,K,pe,B,N+2),j(ne,re,K,xe,B,N+3)),W}(0,0,1,f,0,1);for(var u=0,S=0;S<y.length;S++){var _=y[S];if(f.set)f.set(_,u);else for(var E=0,L=_.length;E<L;E++)f[E+u]=_[E];var C=u+y[S].length;w[S]=[u,C],u=C}return f.range=function(){for(var j,R=[],H=arguments.length;H--;)R[H]=arguments[H];if(t(R[R.length-1])){var F=R.pop();R.length||null==F.x&&null==F.l&&null==F.left||(R=[F],j={}),j=b(F,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else j={};R.length||(R=h);var U,B=l.apply(void 0,R),N=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],J=N[0],Z=N[1],V=N[2],W=N[3],X=n([J,Z,V,W],h),K=X[0],ne=X[1],re=X[2],ae=X[3],le=d(j.level,y.length);if(null!=j.d&&("number"==typeof j.d?U=[j.d,j.d]:j.d.length&&(U=j.d),le=Math.min(Math.max(Math.ceil(-r(Math.abs(U[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(U[1])/(h[3]-h[1])))),le)),le=Math.min(le,y.length),j.lod)return function P(j,R,H,F,U){for(var B=[],N=0;N<U;N++){var J=m[N],Z=w[N][0],V=I(j,R,N),W=I(H,F,N),X=k.ge(J,V),K=k.gt(J,W,X,J.length-1);B[N]=[X+Z,K+Z]}return B}(K,ne,re,ae,le);var pe=[];return function xe(se,fe,Ee,de,we,ke){if(null!==we&&null!==ke&&!(K>se+Ee||ne>fe+Ee||re<se||ae<fe||de>=le||we===ke)){var Te=y[de];void 0===ke&&(ke=Te.length);for(var $=we;$<ke;$++){var oe=Te[$],he=a[2*oe],me=a[2*oe+1];he>=J&&he<=V&&me>=Z&&me<=W&&pe.push(oe)}var Me=p[de],Ie=Me[4*we+0],Pe=Me[4*we+1],ze=Me[4*we+2],ce=Me[4*we+3],ge=function ye(se,fe){for(var Ee=null,de=0;null===Ee;)if(Ee=se[4*fe+de],++de>se.length)return null;return Ee}(Me,we+1),_e=.5*Ee,De=de+1;xe(se,fe,_e,De,Ie,Pe||ze||ce||ge),xe(se,fe+_e,_e,De,Pe,ze||ce||ge),xe(se+_e,fe,_e,De,ze,ce||ge),xe(se+_e,fe+_e,_e,De,ce,ge)}}(0,0,1,0,0,1),pe},f;function I(j,R,H){for(var F=1,U=.5,B=.5,N=.5,J=0;J<H;J++)F<<=2,F+=j<U?R<B?0:1:R<B?2:3,N*=.5,U+=j<U?-N:N,B+=R<B?-N:N;return F}}},30774:function(Q,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var k=e(60302),A=6378137;function l(d){var s=0;if(d&&d.length>0){s+=Math.abs(T(d[0]));for(var t=1;t<d.length;t++)s-=Math.abs(T(d[t]))}return s}function T(d){var s,t,o,r,n,a,i=0,c=d.length;if(c>2){for(a=0;a<c;a++)a===c-2?(o=c-2,r=c-1,n=0):a===c-1?(o=c-1,r=0,n=1):(o=a,r=a+1,n=a+2),s=d[o],t=d[r],i+=(b(d[n][0])-b(s[0]))*Math.sin(b(t[1]));i=i*A*A/2}return i}function b(d){return d*Math.PI/180}z.default=function(d){return k.geomReduce(d,function(s,t){return s+function(o){var r,n=0;switch(o.type){case"Polygon":return l(o.coordinates);case"MultiPolygon":for(r=0;r<o.coordinates.length;r++)n+=l(o.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function(Q,z){"use strict";function e(a,i,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function k(a,i,c){if(void 0===c&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,c)}function A(a,i,c){void 0===c&&(c={});for(var h=0,f=a;h<f.length;h++){var x=f[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<x[x.length-1].length;v++)if(x[x.length-1][v]!==x[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){void 0===i&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function b(a,i,c){return void 0===c&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return void 0===c&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return void 0===c&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){void 0===i&&(i="kilometers");var c=z.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){void 0===i&&(i="kilometers");var c=z.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=6371008.8,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,i,c){switch(void 0===c&&(c={}),a){case"Point":return k(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return A(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return b(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},z.point=k,z.points=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,i)}),c)},z.polygon=A,z.polygons=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return A(h,i)}),c)},z.lineString=l,z.lineStrings=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return l(h,i)}),c)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,i,c){return void 0===c&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},z.round=function(a,i){if(void 0===i&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},z.radiansToLength=t,z.lengthToRadians=o,z.lengthToDegrees=function(a,i){return r(o(a,i))},z.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,i,c){if(void 0===i&&(i="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},z.convertArea=function(a,i,c){if(void 0===i&&(i="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=z.areaFactors[i];if(!h)throw new Error("invalid original units");var f=z.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},60302:function(Q,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var k=e(23132);function A(o,r,n){if(null!==o)for(var a,i,c,h,f,x,v,g,y=0,p=0,m=o.type,w="FeatureCollection"===m,u="Feature"===m,S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&"GeometryCollection"===v.type)?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if(null!==(h=g?v.geometries[E]:v)){x=h.coordinates;var P=h.type;switch(y=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===r(x,p,_,L,C))return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(!1===r(x[a],p,_,L,C))return!1;p++,"MultiPoint"===P&&L++}"LineString"===P&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(i=0;i<x[a].length-y;i++){if(!1===r(x[a][i],p,_,L,C))return!1;p++}"MultiLineString"===P&&L++,"Polygon"===P&&C++}"Polygon"===P&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,i=0;i<x[a].length;i++){for(c=0;c<x[a][i].length-y;c++){if(!1===r(x[a][i][c],p,_,L,C))return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===A(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&!1!==r(o.features[n].properties,n);n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if("Feature"===o.type)r(o,0);else if("FeatureCollection"===o.type)for(var n=0;n<o.features.length&&!1!==r(o.features[n],n);n++);}function b(o,r){var n,a,i,c,h,f,x,v,g,y,p=0,m="FeatureCollection"===o.type,w="Feature"===o.type,u=m?o.features.length:1;for(n=0;n<u;n++){for(v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(x=!!(f=m?o.features[n].geometry:w?o.geometry:o)&&"GeometryCollection"===f.type)?f.geometries.length:1,i=0;i<h;i++)if(null!==(c=x?f.geometries[i]:f))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,p,v,g,y))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],p,v,g,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,p,v,g,y))return!1;p++}}function d(o,r){b(o,function(n,a,i,c,h){var f,x=null===n?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return!1!==r(k.feature(n,i,{bbox:c,id:h}),a,0)&&void 0}switch(x){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++)if(!1===r(k.feature({type:f,coordinates:n.coordinates[v]},i),a,v))return!1})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var f,x=0,v=0,g=0;return!1!==A(n,function(y,p,m,w,u){if(void 0===f||a>x||w>v||u>g)return f=y,x=a,v=w,g=u,void(c=0);var S=k.lineString([f,y],n.properties);if(!1===r(S,a,i,u,c))return!1;c++,f=y})&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,i,0,0))return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(!1===r(k.lineString(h[f],n.properties),a,i,f))return!1}}})}z.coordEach=A,z.coordReduce=function(o,r,n,a){var i=n;return A(o,function(c,h,f,x,v){i=0===h&&void 0===n?c:r(i,c,h,f,x,v)},a),i},z.propEach=l,z.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},z.featureEach=T,z.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},z.coordAll=function(o){var r=[];return A(o,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(o,r,n){var a=n;return b(o,function(i,c,h,f,x){a=0===c&&void 0===n?i:r(a,i,c,h,f,x)}),a},z.flattenEach=d,z.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=0===c&&0===h&&void 0===n?i:r(a,i,c,h)}),a},z.segmentEach=s,z.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,x,v){a=!1===i&&void 0===n?c:r(a,c,h,f,x,v),i=!0}),a},z.lineEach=t,z.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=0===c&&void 0===n?i:r(a,i,c,h,f)}),a},z.findSegment=function(o,r){if(!k.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),k.lineString([x[h],x[h+1]],f,r);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h-1),k.lineString([x[c][h],x[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h-1),k.lineString([x[i][h],x[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),c<0&&(c=x[i].length+c),h<0&&(h=x[i][c].length-h-1),k.lineString([x[i][c][h],x[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},z.findPoint=function(o,r){if(!k.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var x=n.coordinates;switch(n.type){case"Point":return k.point(x,f,r);case"MultiPoint":return i<0&&(i=x.length+i),k.point(x[i],f,r);case"LineString":return h<0&&(h=x.length+h),k.point(x[h],f,r);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h),k.point(x[c][h],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h),k.point(x[i][h],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),c<0&&(c=x[i].length+c),h<0&&(h=x[i][c].length-h),k.point(x[i][c][h],f,r)}throw new Error("geojson is invalid")}},85268:function(Q,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var k=e(27138);function A(l){var T=[1/0,1/0,-1/0,-1/0];return k.coordEach(l,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}A.default=A,z.default=A},94228:function(Q,z){"use strict";function e(a,i,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function k(a,i,c){if(void 0===c&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,c)}function A(a,i,c){void 0===c&&(c={});for(var h=0,f=a;h<f.length;h++){var x=f[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<x[x.length-1].length;v++)if(x[x.length-1][v]!==x[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){void 0===i&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function b(a,i,c){return void 0===c&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return void 0===c&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return void 0===c&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){void 0===i&&(i="kilometers");var c=z.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){void 0===i&&(i="kilometers");var c=z.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=6371008.8,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,i,c){switch(void 0===c&&(c={}),a){case"Point":return k(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return A(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return b(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},z.point=k,z.points=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,i)}),c)},z.polygon=A,z.polygons=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return A(h,i)}),c)},z.lineString=l,z.lineStrings=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return l(h,i)}),c)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,i,c){return void 0===c&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},z.round=function(a,i){if(void 0===i&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},z.radiansToLength=t,z.lengthToRadians=o,z.lengthToDegrees=function(a,i){return r(o(a,i))},z.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,i,c){if(void 0===i&&(i="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},z.convertArea=function(a,i,c){if(void 0===i&&(i="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=z.areaFactors[i];if(!h)throw new Error("invalid original units");var f=z.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},27138:function(Q,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var k=e(94228);function A(o,r,n){if(null!==o)for(var a,i,c,h,f,x,v,g,y=0,p=0,m=o.type,w="FeatureCollection"===m,u="Feature"===m,S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&"GeometryCollection"===v.type)?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if(null!==(h=g?v.geometries[E]:v)){x=h.coordinates;var P=h.type;switch(y=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===r(x,p,_,L,C))return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(!1===r(x[a],p,_,L,C))return!1;p++,"MultiPoint"===P&&L++}"LineString"===P&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(i=0;i<x[a].length-y;i++){if(!1===r(x[a][i],p,_,L,C))return!1;p++}"MultiLineString"===P&&L++,"Polygon"===P&&C++}"Polygon"===P&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,i=0;i<x[a].length;i++){for(c=0;c<x[a][i].length-y;c++){if(!1===r(x[a][i][c],p,_,L,C))return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===A(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&!1!==r(o.features[n].properties,n);n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if("Feature"===o.type)r(o,0);else if("FeatureCollection"===o.type)for(var n=0;n<o.features.length&&!1!==r(o.features[n],n);n++);}function b(o,r){var n,a,i,c,h,f,x,v,g,y,p=0,m="FeatureCollection"===o.type,w="Feature"===o.type,u=m?o.features.length:1;for(n=0;n<u;n++){for(v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(x=!!(f=m?o.features[n].geometry:w?o.geometry:o)&&"GeometryCollection"===f.type)?f.geometries.length:1,i=0;i<h;i++)if(null!==(c=x?f.geometries[i]:f))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,p,v,g,y))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],p,v,g,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,p,v,g,y))return!1;p++}}function d(o,r){b(o,function(n,a,i,c,h){var f,x=null===n?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return!1!==r(k.feature(n,i,{bbox:c,id:h}),a,0)&&void 0}switch(x){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++)if(!1===r(k.feature({type:f,coordinates:n.coordinates[v]},i),a,v))return!1})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var f,x=0,v=0,g=0;return!1!==A(n,function(y,p,m,w,u){if(void 0===f||a>x||w>v||u>g)return f=y,x=a,v=w,g=u,void(c=0);var S=k.lineString([f,y],n.properties);if(!1===r(S,a,i,u,c))return!1;c++,f=y})&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,i,0,0))return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(!1===r(k.lineString(h[f],n.properties),a,i,f))return!1}}})}z.coordEach=A,z.coordReduce=function(o,r,n,a){var i=n;return A(o,function(c,h,f,x,v){i=0===h&&void 0===n?c:r(i,c,h,f,x,v)},a),i},z.propEach=l,z.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},z.featureEach=T,z.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},z.coordAll=function(o){var r=[];return A(o,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(o,r,n){var a=n;return b(o,function(i,c,h,f,x){a=0===c&&void 0===n?i:r(a,i,c,h,f,x)}),a},z.flattenEach=d,z.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=0===c&&0===h&&void 0===n?i:r(a,i,c,h)}),a},z.segmentEach=s,z.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,x,v){a=!1===i&&void 0===n?c:r(a,c,h,f,x,v),i=!0}),a},z.lineEach=t,z.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=0===c&&void 0===n?i:r(a,i,c,h,f)}),a},z.findSegment=function(o,r){if(!k.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),k.lineString([x[h],x[h+1]],f,r);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h-1),k.lineString([x[c][h],x[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h-1),k.lineString([x[i][h],x[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),c<0&&(c=x[i].length+c),h<0&&(h=x[i][c].length-h-1),k.lineString([x[i][c][h],x[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},z.findPoint=function(o,r){if(!k.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var x=n.coordinates;switch(n.type){case"Point":return k.point(x,f,r);case"MultiPoint":return i<0&&(i=x.length+i),k.point(x[i],f,r);case"LineString":return h<0&&(h=x.length+h),k.point(x[h],f,r);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h),k.point(x[c][h],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h),k.point(x[i][h],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),c<0&&(c=x[i].length+c),h<0&&(h=x[i][c].length-h),k.point(x[i][c][h],f,r)}throw new Error("geojson is invalid")}},29261:function(Q,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var k=e(88553),A=e(64182);z.default=function(l,T){void 0===T&&(T={});var b=0,d=0,s=0;return k.coordEach(l,function(t){b+=t[0],d+=t[1],s++}),A.point([b/s,d/s],T.properties)}},64182:function(Q,z){"use strict";function e(a,i,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function k(a,i,c){return void 0===c&&(c={}),e({type:"Point",coordinates:a},i,c)}function A(a,i,c){void 0===c&&(c={});for(var h=0,f=a;h<f.length;h++){var x=f[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<x[x.length-1].length;v++)if(x[x.length-1][v]!==x[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){void 0===i&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function b(a,i,c){return void 0===c&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return void 0===c&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return void 0===c&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){void 0===i&&(i="kilometers");var c=z.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){void 0===i&&(i="kilometers");var c=z.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=6371008.8,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius/1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:.91441111923921},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,i,c){switch(void 0===c&&(c={}),a){case"Point":return k(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return A(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return b(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},z.point=k,z.points=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,i)}),c)},z.polygon=A,z.polygons=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return A(h,i)}),c)},z.lineString=l,z.lineStrings=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return l(h,i)}),c)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,i,c){return void 0===c&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},z.round=function(a,i){if(void 0===i&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},z.radiansToLength=t,z.lengthToRadians=o,z.lengthToDegrees=function(a,i){return r(o(a,i))},z.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,i,c){if(void 0===i&&(i="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},z.convertArea=function(a,i,c){if(void 0===i&&(i="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=z.areaFactors[i];if(!h)throw new Error("invalid original units");var f=z.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")},z.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},z.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},z.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},z.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},z.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},z.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},z.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(Q,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var k=e(64182);function A(o,r,n){if(null!==o)for(var a,i,c,h,f,x,v,g,y=0,p=0,m=o.type,w="FeatureCollection"===m,u="Feature"===m,S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&"GeometryCollection"===v.type)?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if(null!==(h=g?v.geometries[E]:v)){x=h.coordinates;var P=h.type;switch(y=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===r(x,p,_,L,C))return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(!1===r(x[a],p,_,L,C))return!1;p++,"MultiPoint"===P&&L++}"LineString"===P&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(i=0;i<x[a].length-y;i++){if(!1===r(x[a][i],p,_,L,C))return!1;p++}"MultiLineString"===P&&L++,"Polygon"===P&&C++}"Polygon"===P&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,i=0;i<x[a].length;i++){for(c=0;c<x[a][i].length-y;c++){if(!1===r(x[a][i][c],p,_,L,C))return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===A(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&!1!==r(o.features[n].properties,n);n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if("Feature"===o.type)r(o,0);else if("FeatureCollection"===o.type)for(var n=0;n<o.features.length&&!1!==r(o.features[n],n);n++);}function b(o,r){var n,a,i,c,h,f,x,v,g,y,p=0,m="FeatureCollection"===o.type,w="Feature"===o.type,u=m?o.features.length:1;for(n=0;n<u;n++){for(v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(x=!!(f=m?o.features[n].geometry:w?o.geometry:o)&&"GeometryCollection"===f.type)?f.geometries.length:1,i=0;i<h;i++)if(null!==(c=x?f.geometries[i]:f))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,p,v,g,y))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],p,v,g,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,p,v,g,y))return!1;p++}}function d(o,r){b(o,function(n,a,i,c,h){var f,x=null===n?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return!1!==r(k.feature(n,i,{bbox:c,id:h}),a,0)&&void 0}switch(x){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++)if(!1===r(k.feature({type:f,coordinates:n.coordinates[v]},i),a,v))return!1})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var f,x=0,v=0,g=0;return!1!==A(n,function(y,p,m,w,u){if(void 0===f||a>x||w>v||u>g)return f=y,x=a,v=w,g=u,void(c=0);var S=k.lineString([f,y],n.properties);if(!1===r(S,a,i,u,c))return!1;c++,f=y})&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,i,0,0))return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(!1===r(k.lineString(h[f],n.properties),a,i,f))return!1}}})}z.coordEach=A,z.coordReduce=function(o,r,n,a){var i=n;return A(o,function(c,h,f,x,v){i=0===h&&void 0===n?c:r(i,c,h,f,x,v)},a),i},z.propEach=l,z.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},z.featureEach=T,z.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},z.coordAll=function(o){var r=[];return A(o,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(o,r,n){var a=n;return b(o,function(i,c,h,f,x){a=0===c&&void 0===n?i:r(a,i,c,h,f,x)}),a},z.flattenEach=d,z.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=0===c&&0===h&&void 0===n?i:r(a,i,c,h)}),a},z.segmentEach=s,z.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,x,v){a=!1===i&&void 0===n?c:r(a,c,h,f,x,v),i=!0}),a},z.lineEach=t,z.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=0===c&&void 0===n?i:r(a,i,c,h,f)}),a},z.findSegment=function(o,r){if(!k.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),k.lineString([x[h],x[h+1]],f,r);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h-1),k.lineString([x[c][h],x[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h-1),k.lineString([x[i][h],x[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),c<0&&(c=x[i].length+c),h<0&&(h=x[i][c].length-h-1),k.lineString([x[i][c][h],x[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},z.findPoint=function(o,r){if(!k.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var x=n.coordinates;switch(n.type){case"Point":return k.point(x,f,r);case"MultiPoint":return i<0&&(i=x.length+i),k.point(x[i],f,r);case"LineString":return h<0&&(h=x.length+h),k.point(x[h],f,r);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h),k.point(x[c][h],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h),k.point(x[i][h],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),c<0&&(c=x[i].length+c),h<0&&(h=x[i][c].length-h),k.point(x[i][c][h],f,r)}throw new Error("geojson is invalid")}},65185:function(Q){Q.exports=function(z){var e=0,k=0,A=0,l=0;return z.map(function(T){var b=(T=T.slice())[0],d=b.toUpperCase();if(b!=d)switch(T[0]=d,b){case"a":T[6]+=A,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=A;break;default:for(var s=1;s<T.length;)T[s++]+=A,T[s++]+=l}switch(d){case"Z":A=e,l=k;break;case"H":A=T[1];break;case"V":l=T[1];break;case"M":A=e=T[1],l=k=T[2];break;default:A=T[T.length-2],l=T[T.length-1]}return T})}},21527:function(Q){"use strict";Q.exports=function(z,e){if(!z||null==z.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var k=Array(2*e),A=0;A<e;A++){for(var l=-1/0,T=1/0,b=A,d=z.length;b<d;b+=e)z[b]>l&&(l=z[b]),z[b]<T&&(T=z[b]);k[A]=T,k[e+A]=l}return k}},24696:function(Q){Q.exports=function(e,k,A){if(e.filter)return e.filter(k,A);if(null==e)throw new TypeError;if("function"!=typeof k)throw new TypeError;for(var l=[],T=0;T<e.length;T++)if(z.call(e,T)){var b=e[T];k.call(A,b,T,e)&&l.push(b)}return l};var z=Object.prototype.hasOwnProperty},6851:function(Q){"use strict";Q.exports=function(z,e,k){if("function"==typeof Array.prototype.findIndex)return z.findIndex(e,k);if("function"!=typeof e)throw new TypeError("predicate must be a function");var A=Object(z),l=A.length;if(0===l)return-1;for(var T=0;T<l;T++)if(e.call(k,A[T],T,A))return T;return-1}},54:function(Q,z,e){"use strict";var k=e(21527);Q.exports=function(A,l,T){if(!A||null==A.length)throw Error("Argument should be an array");null==l&&(l=1),null==T&&(T=k(A,l));for(var b=0;b<l;b++){var d=T[l+b],s=T[b],t=b,o=A.length;if(d===1/0&&s===-1/0)for(t=b;t<o;t+=l)A[t]=A[t]===d?1:A[t]===s?0:.5;else if(d===1/0)for(t=b;t<o;t+=l)A[t]=A[t]===d?1:0;else if(s===-1/0)for(t=b;t<o;t+=l)A[t]=A[t]===s?0:1;else{var r=d-s;for(t=b;t<o;t+=l)isNaN(A[t])||(A[t]=0===r?.5:(A[t]-s)/r)}}return A}},57471:function(Q){Q.exports=function(z,e){var k="number"==typeof z,A="number"==typeof e;k&&!A?(e=z,z=0):k||A||(z=0,e=0);var l=(e|=0)-(z|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),b=0,d=z;b<l;b++,d++)T[b]=d;return T}},32791:function(Q,z,e){"use strict";var k=e(90386);function A(H){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(H)}var l,T,b=e(79616).codes,d=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,o=b.ERR_INVALID_RETURN_VALUE,r=b.ERR_MISSING_ARGS,n=e(73894),a=e(43827).inspect,i=e(43827).types,c=i.isPromise,h=i.isRegExp,f=Object.assign?Object.assign:e(73523).assign,x=Object.is?Object.is:e(64003);function v(){var H=e(74061);l=H.isDeepEqual,T=H.isDeepStrictEqual}var g=!1,y=Q.exports=u,p={};function m(H){throw H.message instanceof Error?H.message:new n(H)}function w(H,F,U,B){if(!U){var N=!1;if(0===F)N=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var J=new n({actual:U,expected:!0,message:B,operator:"==",stackStartFn:H});throw J.generatedMessage=N,J}}function u(){for(var H=arguments.length,F=new Array(H),U=0;U<H;U++)F[U]=arguments[U];w.apply(void 0,[u,F.length].concat(F))}y.fail=function H(F,U,B,N,J){var Z,V=arguments.length;if(0===V?Z="Failed":1===V?(B=F,F=void 0):(!1===g&&(g=!0,(k.emitWarning?k.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===V&&(N="!=")),B instanceof Error)throw B;var X={actual:F,expected:U,operator:void 0===N?"fail":N,stackStartFn:J||H};void 0!==B&&(X.message=B);var K=new n(X);throw Z&&(K.message=Z,K.generatedMessage=!0),K},y.AssertionError=n,y.ok=u,y.equal=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");F!=U&&m({actual:F,expected:U,message:B,operator:"==",stackStartFn:H})},y.notEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");F==U&&m({actual:F,expected:U,message:B,operator:"!=",stackStartFn:H})},y.deepEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),l(F,U)||m({actual:F,expected:U,message:B,operator:"deepEqual",stackStartFn:H})},y.notDeepEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),l(F,U)&&m({actual:F,expected:U,message:B,operator:"notDeepEqual",stackStartFn:H})},y.deepStrictEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),T(F,U)||m({actual:F,expected:U,message:B,operator:"deepStrictEqual",stackStartFn:H})},y.notDeepStrictEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),T(F,U)&&m({actual:F,expected:U,message:B,operator:"notDeepStrictEqual",stackStartFn:H})},y.strictEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");x(F,U)||m({actual:F,expected:U,message:B,operator:"strictEqual",stackStartFn:H})},y.notStrictEqual=function H(F,U,B){if(arguments.length<2)throw new r("actual","expected");x(F,U)&&m({actual:F,expected:U,message:B,operator:"notStrictEqual",stackStartFn:H})};var S=function H(F,U,B){var N=this;(function(J,Z){if(!(J instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,H),U.forEach(function(J){J in F&&(N[J]=void 0!==B&&"string"==typeof B[J]&&h(F[J])&&F[J].test(B[J])?B[J]:F[J])})};function E(H,F,U,B){if("function"!=typeof F){if(h(F))return F.test(H);if(2===arguments.length)throw new s("expected",["Function","RegExp"],F);if("object"!==A(H)||null===H){var N=new n({actual:H,expected:F,message:U,operator:"deepStrictEqual",stackStartFn:B});throw N.operator=B.name,N}var J=Object.keys(F);if(F instanceof Error)J.push("name","message");else if(0===J.length)throw new t("error",F,"may not be an empty object");return void 0===l&&v(),J.forEach(function(Z){"string"==typeof H[Z]&&h(F[Z])&&F[Z].test(H[Z])||function _(H,F,U,B,N,J){if(!(U in H)||!T(H[U],F[U])){if(!B){var Z=new S(H,N),V=new S(F,N,H),W=new n({actual:Z,expected:V,operator:"deepStrictEqual",stackStartFn:J});throw W.actual=H,W.expected=F,W.operator=J.name,W}m({actual:H,expected:F,message:B,operator:J.name,stackStartFn:J})}}(H,F,Z,U,J,B)}),!0}return void 0!==F.prototype&&H instanceof F||!Error.isPrototypeOf(F)&&!0===F.call({},H)}function L(H){if("function"!=typeof H)throw new s("fn","Function",H);try{H()}catch(F){return F}return p}function C(H){return c(H)||null!==H&&"object"===A(H)&&"function"==typeof H.then&&"function"==typeof H.catch}function P(H){return Promise.resolve().then(function(){var F;if("function"==typeof H){if(!C(F=H()))throw new o("instance of Promise","promiseFn",F)}else{if(!C(H))throw new s("promiseFn",["Function","Promise"],H);F=H}return Promise.resolve().then(function(){return F}).then(function(){return p}).catch(function(U){return U})})}function I(H,F,U,B){if("string"==typeof U){if(4===arguments.length)throw new s("error",["Object","Error","Function","RegExp"],U);if("object"===A(F)&&null!==F){if(F.message===U)throw new d("error/message",'The error message "'.concat(F.message,'" is identical to the message.'))}else if(F===U)throw new d("error/message",'The error "'.concat(F,'" is identical to the message.'));B=U,U=void 0}else if(null!=U&&"object"!==A(U)&&"function"!=typeof U)throw new s("error",["Object","Error","Function","RegExp"],U);if(F===p){var N="";U&&U.name&&(N+=" (".concat(U.name,")")),N+=B?": ".concat(B):".",m({actual:void 0,expected:U,operator:H.name,message:"Missing expected ".concat("rejects"===H.name?"rejection":"exception").concat(N),stackStartFn:H})}if(U&&!E(F,U,B,H))throw F}function j(H,F,U,B){if(F!==p){if("string"==typeof U&&(B=U,U=void 0),!U||E(F,U)){var N=B?": ".concat(B):".";m({actual:F,expected:U,operator:H.name,message:"Got unwanted ".concat("doesNotReject"===H.name?"rejection":"exception").concat(N,"\n")+'Actual message: "'.concat(F&&F.message,'"'),stackStartFn:H})}throw F}}function R(){for(var H=arguments.length,F=new Array(H),U=0;U<H;U++)F[U]=arguments[U];w.apply(void 0,[R,F.length].concat(F))}y.throws=function H(F){for(var U=arguments.length,B=new Array(U>1?U-1:0),N=1;N<U;N++)B[N-1]=arguments[N];I.apply(void 0,[H,L(F)].concat(B))},y.rejects=function H(F){for(var U=arguments.length,B=new Array(U>1?U-1:0),N=1;N<U;N++)B[N-1]=arguments[N];return P(F).then(function(J){return I.apply(void 0,[H,J].concat(B))})},y.doesNotThrow=function H(F){for(var U=arguments.length,B=new Array(U>1?U-1:0),N=1;N<U;N++)B[N-1]=arguments[N];j.apply(void 0,[H,L(F)].concat(B))},y.doesNotReject=function H(F){for(var U=arguments.length,B=new Array(U>1?U-1:0),N=1;N<U;N++)B[N-1]=arguments[N];return P(F).then(function(J){return j.apply(void 0,[H,J].concat(B))})},y.ifError=function H(F){if(null!=F){var U="ifError got unwanted exception: ";"object"===A(F)&&"string"==typeof F.message?U+=0===F.message.length&&F.constructor?F.constructor.name:F.message:U+=a(F);var B=new n({actual:F,expected:null,operator:"ifError",message:U,stackStartFn:H}),N=F.stack;if("string"==typeof N){var J=N.split("\n");J.shift();for(var Z=B.stack.split("\n"),V=0;V<J.length;V++){var W=Z.indexOf(J[V]);if(-1!==W){Z=Z.slice(0,W);break}}B.stack="".concat(Z.join("\n"),"\n").concat(J.join("\n"))}throw B}},y.strict=f(R,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function(Q,z,e){"use strict";var k=e(90386);function A(w,u,S){return u in w?Object.defineProperty(w,u,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[u]=S,w}function T(w,u){return!u||"object"!==n(u)&&"function"!=typeof u?b(w):u}function b(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function d(w){var u="function"==typeof Map?new Map:void 0;return d=function(S){if(null===S||-1===Function.toString.call(S).indexOf("[native code]"))return S;if("function"!=typeof S)throw new TypeError("Super expression must either be null or a function");if(void 0!==u){if(u.has(S))return u.get(S);u.set(S,E)}function E(){return t(S,arguments,r(this).constructor)}return E.prototype=Object.create(S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),o(E,S)},d(w)}function t(w,u,S){return(t=function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(_,E,L){var C=[null];C.push.apply(C,E);var P=new(Function.bind.apply(_,C));return L&&o(P,L.prototype),P}).apply(null,arguments)}function o(w,u){return(o=Object.setPrototypeOf||function(S,_){return S.__proto__=_,S})(w,u)}function r(w){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(w)}function n(w){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(w)}var a=e(43827).inspect,i=e(79616).codes.ERR_INVALID_ARG_TYPE;function c(w,u,S){return(void 0===S||S>w.length)&&(S=w.length),w.substring(S-u.length,S)===u}var h="",f="",x="",v="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function y(w){var u=Object.keys(w),S=Object.create(Object.getPrototypeOf(w));return u.forEach(function(_){S[_]=w[_]}),Object.defineProperty(S,"message",{value:w.message}),S}function p(w){return a(w,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var m=function(w){function u(E){var L;if(function(Z,V){if(!(Z instanceof V))throw new TypeError("Cannot call a class as a function")}(this,u),"object"!==n(E)||null===E)throw new i("options","Object",E);var C=E.message,P=E.operator,I=E.stackStartFn,j=E.actual,R=E.expected,H=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=C)L=T(this,r(u).call(this,String(C)));else if(k.stderr&&k.stderr.isTTY&&(k.stderr&&k.stderr.getColorDepth&&1!==k.stderr.getColorDepth()?(h="\x1b[34m",f="\x1b[32m",v="\x1b[39m",x="\x1b[31m"):(h="",f="",v="",x="")),"object"===n(j)&&null!==j&&"object"===n(R)&&null!==R&&"stack"in j&&j instanceof Error&&"stack"in R&&R instanceof Error&&(j=y(j),R=y(R)),"deepStrictEqual"===P||"strictEqual"===P)L=T(this,r(u).call(this,function(Z,V,W){var X="",K="",ne=0,re="",ae=!1,le=p(Z),pe=le.split("\n"),xe=p(V).split("\n"),ye=0,se="";if("strictEqual"===W&&"object"===n(Z)&&"object"===n(V)&&null!==Z&&null!==V&&(W="strictEqualObject"),1===pe.length&&1===xe.length&&pe[0]!==xe[0]){var fe=pe[0].length+xe[0].length;if(fe<=10){if(!("object"===n(Z)&&null!==Z||"object"===n(V)&&null!==V||0===Z&&0===V))return"".concat(g[W],"\n\n")+"".concat(pe[0]," !== ").concat(xe[0],"\n")}else if("strictEqualObject"!==W&&fe<(k.stderr&&k.stderr.isTTY?k.stderr.columns:80)){for(;pe[0][ye]===xe[0][ye];)ye++;ye>2&&(se="\n  ".concat(function(Pe,ze){if(ze=Math.floor(ze),0==Pe.length||0==ze)return"";var ce=Pe.length*ze;for(ze=Math.floor(Math.log(ze)/Math.log(2));ze;)Pe+=Pe,ze--;return Pe+Pe.substring(0,ce-Pe.length)}(" ",ye),"^"),ye=0)}}for(var Ee=pe[pe.length-1],de=xe[xe.length-1];Ee===de&&(ye++<2?re="\n  ".concat(Ee).concat(re):X=Ee,pe.pop(),xe.pop(),0!==pe.length&&0!==xe.length);)Ee=pe[pe.length-1],de=xe[xe.length-1];var we=Math.max(pe.length,xe.length);if(0===we){var ke=le.split("\n");if(ke.length>30)for(ke[26]="".concat(h,"...").concat(v);ke.length>27;)ke.pop();return"".concat(g.notIdentical,"\n\n").concat(ke.join("\n"),"\n")}ye>3&&(re="\n".concat(h,"...").concat(v).concat(re),ae=!0),""!==X&&(re="\n  ".concat(X).concat(re),X="");var Te=0,$=g[W]+"\n".concat(f,"+ actual").concat(v," ").concat(x,"- expected").concat(v),oe=" ".concat(h,"...").concat(v," Lines skipped");for(ye=0;ye<we;ye++){var he=ye-ne;if(pe.length<ye+1)he>1&&ye>2&&(he>4?(K+="\n".concat(h,"...").concat(v),ae=!0):he>3&&(K+="\n  ".concat(xe[ye-2]),Te++),K+="\n  ".concat(xe[ye-1]),Te++),ne=ye,X+="\n".concat(x,"-").concat(v," ").concat(xe[ye]),Te++;else if(xe.length<ye+1)he>1&&ye>2&&(he>4?(K+="\n".concat(h,"...").concat(v),ae=!0):he>3&&(K+="\n  ".concat(pe[ye-2]),Te++),K+="\n  ".concat(pe[ye-1]),Te++),ne=ye,K+="\n".concat(f,"+").concat(v," ").concat(pe[ye]),Te++;else{var me=xe[ye],Me=pe[ye],Ie=Me!==me&&(!c(Me,",")||Me.slice(0,-1)!==me);Ie&&c(me,",")&&me.slice(0,-1)===Me&&(Ie=!1,Me+=","),Ie?(he>1&&ye>2&&(he>4?(K+="\n".concat(h,"...").concat(v),ae=!0):he>3&&(K+="\n  ".concat(pe[ye-2]),Te++),K+="\n  ".concat(pe[ye-1]),Te++),ne=ye,K+="\n".concat(f,"+").concat(v," ").concat(Me),X+="\n".concat(x,"-").concat(v," ").concat(me),Te+=2):(K+=X,X="",1!==he&&0!==ye||(K+="\n  ".concat(Me),Te++))}if(Te>20&&ye<we-2)return"".concat($).concat(oe,"\n").concat(K,"\n").concat(h,"...").concat(v).concat(X,"\n")+"".concat(h,"...").concat(v)}return"".concat($).concat(ae?oe:"","\n").concat(K).concat(X).concat(re).concat(se)}(j,R,P)));else if("notDeepStrictEqual"===P||"notStrictEqual"===P){var F=g[P],U=p(j).split("\n");if("notStrictEqual"===P&&"object"===n(j)&&null!==j&&(F=g.notStrictEqualObject),U.length>30)for(U[26]="".concat(h,"...").concat(v);U.length>27;)U.pop();L=T(this,1===U.length?r(u).call(this,"".concat(F," ").concat(U[0])):r(u).call(this,"".concat(F,"\n\n").concat(U.join("\n"),"\n")))}else{var B=p(j),N="",J=g[P];"notDeepEqual"===P||"notEqual"===P?(B="".concat(g[P],"\n\n").concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(N="".concat(p(R)),B.length>512&&(B="".concat(B.slice(0,509),"...")),N.length>512&&(N="".concat(N.slice(0,509),"...")),"deepEqual"===P||"equal"===P?B="".concat(J,"\n\n").concat(B,"\n\nshould equal\n\n"):N=" ".concat(P," ").concat(N)),L=T(this,r(u).call(this,"".concat(B).concat(N)))}return Error.stackTraceLimit=H,L.generatedMessage=!C,Object.defineProperty(b(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=j,L.expected=R,L.operator=P,Error.captureStackTrace&&Error.captureStackTrace(b(L),I),L.name="AssertionError",T(L)}var _;return function(E,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(L&&L.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),L&&o(E,L)}(u,w),_=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(E,L){return a(this,function(C){for(var P=1;P<arguments.length;P++){var I=null!=arguments[P]?arguments[P]:{},j=Object.keys(I);"function"==typeof Object.getOwnPropertySymbols&&(j=j.concat(Object.getOwnPropertySymbols(I).filter(function(R){return Object.getOwnPropertyDescriptor(I,R).enumerable}))),j.forEach(function(R){A(C,R,I[R])})}return C}({},L,{customInspect:!1,depth:0}))}}],_&&function l(w,u){for(var S=0;S<u.length;S++){var _=u[S];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}(u.prototype,_),u}(d(Error));Q.exports=m},79616:function(Q,z,e){"use strict";function k(o){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(o)}function A(o){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(o)}function l(o,r){return(l=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n})(o,r)}var T,b,d={};function s(o,r,n){n||(n=Error);var a=function(i){function c(h,f,x){var v,g,y,p;return function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,c),(v=function(g,y){return!y||"object"!==k(y)&&"function"!=typeof y?function(p){if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(g):y}(this,A(c).call(this,(g=h,y=f,p=x,"string"==typeof r?r:r(g,y,p))))).code=o,v}return function(h,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),f&&l(h,f)}(c,i),c}(n);d[o]=a}function t(o,r){if(Array.isArray(o)){var n=o.length;return o=o.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(o.slice(0,n-1).join(", "),", or ")+o[n-1]:2===n?"one of ".concat(r," ").concat(o[0]," or ").concat(o[1]):"of ".concat(r," ").concat(o[0])}return"of ".concat(r," ").concat(String(o))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(o,r,n){var a,c,h,f,v,y;if(void 0===T&&(T=e(32791)),T("string"==typeof o,"'name' must be a string"),"string"==typeof r&&"not "===r.substr(0,"not ".length)?(a="must not be",r=r.replace(/^not /,"")):a="must be",v=o,(void 0===y||y>v.length)&&(y=v.length)," argument"===v.substring(y-" argument".length,y))c="The ".concat(o," ").concat(a," ").concat(t(r,"type"));else{var x=("number"!=typeof f&&(f=0),f+1>(h=o).length||-1===h.indexOf(".",f)?"argument":"property");c='The "'.concat(o,'" ').concat(x," ").concat(a," ").concat(t(r,"type"))}return c+". Received type ".concat(k(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(o,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=e(43827));var a=b.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(o,"' ").concat(n,". Received ").concat(a)},TypeError,RangeError),s("ERR_INVALID_RETURN_VALUE",function(o,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(k(n)),"Expected ".concat(o,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];void 0===T&&(T=e(32791)),T(r.length>0,"At least one arg needs to be specified");var a="The ",i=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),i){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,i-1).join(", "),a+=", and ".concat(r[i-1]," arguments")}return"".concat(a," must be specified")},TypeError),Q.exports.codes=d},74061:function(Q,z,e){"use strict";function k(V,W){return function(X){if(Array.isArray(X))return X}(V)||function(X,K){var ne=[],re=!0,ae=!1,le=void 0;try{for(var pe,xe=X[Symbol.iterator]();!(re=(pe=xe.next()).done)&&(ne.push(pe.value),!K||ne.length!==K);re=!0);}catch(ye){ae=!0,le=ye}finally{try{re||null==xe.return||xe.return()}finally{if(ae)throw le}}return ne}(V,W)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(V){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(W){return typeof W}:function(W){return W&&"function"==typeof Symbol&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(V)}var l=void 0!==/a/g.flags,T=function(V){var W=[];return V.forEach(function(X){return W.push(X)}),W},b=function(V){var W=[];return V.forEach(function(X,K){return W.push([K,X])}),W},d=Object.is?Object.is:e(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function o(V){return V.call.bind(V)}var r=o(Object.prototype.hasOwnProperty),n=o(Object.prototype.propertyIsEnumerable),a=o(Object.prototype.toString),i=e(43827).types,c=i.isAnyArrayBuffer,h=i.isArrayBufferView,f=i.isDate,x=i.isMap,v=i.isRegExp,g=i.isSet,y=i.isNativeError,p=i.isBoxedPrimitive,m=i.isNumberObject,w=i.isStringObject,u=i.isBooleanObject,S=i.isBigIntObject,_=i.isSymbolObject,E=i.isFloat32Array,L=i.isFloat64Array;function C(V){if(0===V.length||V.length>10)return!0;for(var W=0;W<V.length;W++){var X=V.charCodeAt(W);if(X<48||X>57)return!0}return 10===V.length&&V>=Math.pow(2,32)}function P(V){return Object.keys(V).filter(C).concat(s(V).filter(Object.prototype.propertyIsEnumerable.bind(V)))}function I(V,W){if(V===W)return 0;for(var X=V.length,K=W.length,ne=0,re=Math.min(X,K);ne<re;++ne)if(V[ne]!==W[ne]){X=V[ne],K=W[ne];break}return X<K?-1:K<X?1:0}function j(V,W,X,K){if(V===W)return 0!==V||!X||d(V,W);if(X){if("object"!==A(V))return"number"==typeof V&&t(V)&&t(W);if("object"!==A(W)||null===V||null===W||Object.getPrototypeOf(V)!==Object.getPrototypeOf(W))return!1}else{if(null===V||"object"!==A(V))return(null===W||"object"!==A(W))&&V==W;if(null===W||"object"!==A(W))return!1}var ne,re,ae,le,Ee,de,pe=a(V);if(pe!==a(W))return!1;if(Array.isArray(V)){if(V.length!==W.length)return!1;var xe=P(V),ye=P(W);return xe.length===ye.length&&H(V,W,X,K,1,xe)}if("[object Object]"===pe&&(!x(V)&&x(W)||!g(V)&&g(W)))return!1;if(f(V)){if(!f(W)||Date.prototype.getTime.call(V)!==Date.prototype.getTime.call(W))return!1}else if(v(V)){if(!v(W)||(ae=V,le=W,!(l?ae.source===le.source&&ae.flags===le.flags:RegExp.prototype.toString.call(ae)===RegExp.prototype.toString.call(le))))return!1}else if(y(V)||V instanceof Error){if(V.message!==W.message||V.name!==W.name)return!1}else{if(h(V)){if(X||!E(V)&&!L(V)){if((Ee=V).byteLength!==(de=W).byteLength||0!==I(new Uint8Array(Ee.buffer,Ee.byteOffset,Ee.byteLength),new Uint8Array(de.buffer,de.byteOffset,de.byteLength)))return!1}else if(!function(Ee,de){if(Ee.byteLength!==de.byteLength)return!1;for(var we=0;we<Ee.byteLength;we++)if(Ee[we]!==de[we])return!1;return!0}(V,W))return!1;var se=P(V),fe=P(W);return se.length===fe.length&&H(V,W,X,K,0,se)}if(g(V))return!(!g(W)||V.size!==W.size)&&H(V,W,X,K,2);if(x(V))return!(!x(W)||V.size!==W.size)&&H(V,W,X,K,3);if(c(V)){if((ne=V).byteLength!==(re=W).byteLength||0!==I(new Uint8Array(ne),new Uint8Array(re)))return!1}else if(p(V)&&!function(Ee,de){return m(Ee)?m(de)&&d(Number.prototype.valueOf.call(Ee),Number.prototype.valueOf.call(de)):w(Ee)?w(de)&&String.prototype.valueOf.call(Ee)===String.prototype.valueOf.call(de):u(Ee)?u(de)&&Boolean.prototype.valueOf.call(Ee)===Boolean.prototype.valueOf.call(de):S(Ee)?S(de)&&BigInt.prototype.valueOf.call(Ee)===BigInt.prototype.valueOf.call(de):_(de)&&Symbol.prototype.valueOf.call(Ee)===Symbol.prototype.valueOf.call(de)}(V,W))return!1}return H(V,W,X,K,0)}function R(V,W){return W.filter(function(X){return n(V,X)})}function H(V,W,X,K,ne,re){if(5===arguments.length){re=Object.keys(V);var ae=Object.keys(W);if(re.length!==ae.length)return!1}for(var le=0;le<re.length;le++)if(!r(W,re[le]))return!1;if(X&&5===arguments.length){var pe=s(V);if(0!==pe.length){var xe=0;for(le=0;le<pe.length;le++){var ye=pe[le];if(n(V,ye)){if(!n(W,ye))return!1;re.push(ye),xe++}else if(n(W,ye))return!1}var se=s(W);if(pe.length!==se.length&&R(W,se).length!==xe)return!1}else{var fe=s(W);if(0!==fe.length&&0!==R(W,fe).length)return!1}}if(0===re.length&&(0===ne||1===ne&&0===V.length||0===V.size))return!0;if(void 0===K)K={val1:new Map,val2:new Map,position:0};else{var Ee=K.val1.get(V);if(void 0!==Ee){var de=K.val2.get(W);if(void 0!==de)return Ee===de}K.position++}K.val1.set(V,K.position),K.val2.set(W,K.position);var we=function Z(V,W,X,K,ne,re){var ae=0;if(2===re){if(!function(ye,se,fe,Ee){for(var de=null,we=T(ye),ke=0;ke<we.length;ke++){var Te=we[ke];if("object"===A(Te)&&null!==Te)null===de&&(de=new Set),de.add(Te);else if(!se.has(Te)){if(fe||!B(ye,se,Te))return!1;null===de&&(de=new Set),de.add(Te)}}if(null!==de){for(var $=T(se),oe=0;oe<$.length;oe++){var he=$[oe];if("object"===A(he)&&null!==he){if(!F(de,he,fe,Ee))return!1}else if(!fe&&!ye.has(he)&&!F(de,he,fe,Ee))return!1}return 0===de.size}return!0}(V,W,X,ne))return!1}else if(3===re){if(!function(ye,se,fe,Ee){for(var de=null,we=b(ye),ke=0;ke<we.length;ke++){var Te=k(we[ke],2),$=Te[0],oe=Te[1];if("object"===A($)&&null!==$)null===de&&(de=new Set),de.add($);else{var he=se.get($);if(void 0===he&&!se.has($)||!j(oe,he,fe,Ee)){if(fe||!N(ye,se,$,oe,Ee))return!1;null===de&&(de=new Set),de.add($)}}}if(null!==de){for(var me=b(se),Me=0;Me<me.length;Me++){var Ie=k(me[Me],2),Pe=($=Ie[0],Ie[1]);if("object"===A($)&&null!==$){if(!J(de,ye,$,Pe,fe,Ee))return!1}else if(!(fe||ye.has($)&&j(ye.get($),Pe,!1,Ee)||J(de,ye,$,Pe,!1,Ee)))return!1}return 0===de.size}return!0}(V,W,X,ne))return!1}else if(1===re)for(;ae<V.length;ae++){if(!r(V,ae)){if(r(W,ae))return!1;for(var le=Object.keys(V);ae<le.length;ae++){var pe=le[ae];if(!r(W,pe)||!j(V[pe],W[pe],X,ne))return!1}return le.length===Object.keys(W).length}if(!r(W,ae)||!j(V[ae],W[ae],X,ne))return!1}for(ae=0;ae<K.length;ae++){var xe=K[ae];if(!j(V[xe],W[xe],X,ne))return!1}return!0}(V,W,X,re,K,ne);return K.val1.delete(V),K.val2.delete(W),we}function F(V,W,X,K){for(var ne=T(V),re=0;re<ne.length;re++){var ae=ne[re];if(j(W,ae,X,K))return V.delete(ae),!0}return!1}function U(V){switch(A(V)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":V=+V;case"number":if(t(V))return!1}return!0}function B(V,W,X){var K=U(X);return K??(W.has(K)&&!V.has(K))}function N(V,W,X,K,ne){var re=U(X);if(null!=re)return re;var ae=W.get(re);return!(void 0===ae&&!W.has(re)||!j(K,ae,!1,ne))&&!V.has(re)&&j(K,ae,!1,ne)}function J(V,W,X,K,ne,re){for(var ae=T(V),le=0;le<ae.length;le++){var pe=ae[le];if(j(X,pe,ne,re)&&j(K,W.get(pe),ne,re))return V.delete(pe),!0}return!1}Q.exports={isDeepEqual:function(V,W){return j(V,W,!1)},isDeepStrictEqual:function(V,W){return j(V,W,!0)}}},95341:function(Q,z){"use strict";z.byteLength=function(t){var o=d(t),n=o[1];return 3*(o[0]+n)/4-n},z.toByteArray=function(t){var o,r,g,n=d(t),a=n[0],i=n[1],c=new A(3*(a+(g=i))/4-g),h=0,f=i>0?a-4:a;for(r=0;r<f;r+=4)o=k[t.charCodeAt(r)]<<18|k[t.charCodeAt(r+1)]<<12|k[t.charCodeAt(r+2)]<<6|k[t.charCodeAt(r+3)],c[h++]=o>>16&255,c[h++]=o>>8&255,c[h++]=255&o;return 2===i&&(o=k[t.charCodeAt(r)]<<2|k[t.charCodeAt(r+1)]>>4,c[h++]=255&o),1===i&&(o=k[t.charCodeAt(r)]<<10|k[t.charCodeAt(r+1)]<<4|k[t.charCodeAt(r+2)]>>2,c[h++]=o>>8&255,c[h++]=255&o),c},z.fromByteArray=function(t){for(var o,r=t.length,n=r%3,a=[],i=16383,c=0,h=r-n;c<h;c+=i)a.push(s(t,c,c+i>h?h:c+i));return 1===n?a.push(e[(o=t[r-1])>>2]+e[o<<4&63]+"=="):2===n&&a.push(e[(o=(t[r-2]<<8)+t[r-1])>>10]+e[o>>4&63]+e[o<<2&63]+"="),a.join("")};for(var e=[],k=[],A=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,b=l.length;T<b;++T)e[T]=l[T],k[l.charCodeAt(T)]=T;function d(t){var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=o),[r,r===o?0:4-r%4]}function s(t,o,r){for(var a,i=[],c=o;c<r;c+=3)i.push(e[(a=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]))>>18&63]+e[a>>12&63]+e[a>>6&63]+e[63&a]);return i.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},91358:function(Q){"use strict";function z(b,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=b[n];(void 0!==s?s(a,d):a-d)>=0?(r=n,o=n-1):t=n+1}return r}function e(b,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=b[n];(void 0!==s?s(a,d):a-d)>0?(r=n,o=n-1):t=n+1}return r}function k(b,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=b[n];(void 0!==s?s(a,d):a-d)<0?(r=n,t=n+1):o=n-1}return r}function A(b,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=b[n];(void 0!==s?s(a,d):a-d)<=0?(r=n,t=n+1):o=n-1}return r}function l(b,d,s,t,o){for(;t<=o;){var r=t+o>>>1,n=b[r],a=void 0!==s?s(n,d):n-d;if(0===a)return r;a<=0?t=r+1:o=r-1}return-1}function T(b,d,s,t,o,r){return"function"==typeof s?r(b,d,s,void 0===t?0:0|t,void 0===o?b.length-1:0|o):r(b,d,void 0,void 0===s?0:0|s,void 0===t?b.length-1:0|t)}Q.exports={ge:function(b,d,s,t,o){return T(b,d,s,t,o,z)},gt:function(b,d,s,t,o){return T(b,d,s,t,o,e)},lt:function(b,d,s,t,o){return T(b,d,s,t,o,k)},le:function(b,d,s,t,o){return T(b,d,s,t,o,A)},eq:function(b,d,s,t,o){return T(b,d,s,t,o,l)}}},13547:function(Q,z){"use strict";function e(A){var l=32;return(A&=-A)&&l--,65535&A&&(l-=16),16711935&A&&(l-=8),252645135&A&&(l-=4),858993459&A&&(l-=2),1431655765&A&&(l-=1),l}z.INT_BITS=32,z.INT_MAX=2147483647,z.INT_MIN=-2147483648,z.sign=function(A){return(A>0)-(A<0)},z.abs=function(A){var l=A>>31;return(A^l)-l},z.min=function(A,l){return l^(A^l)&-(A<l)},z.max=function(A,l){return A^(A^l)&-(A<l)},z.isPow2=function(A){return!(A&A-1||!A)},z.log2=function(A){var l,T;return l=(A>65535)<<4,l|=T=((A>>>=l)>255)<<3,l|=T=((A>>>=T)>15)<<2,(l|=T=((A>>>=T)>3)<<1)|(A>>>=T)>>1},z.log10=function(A){return A>=1e9?9:A>=1e8?8:A>=1e7?7:A>=1e6?6:A>=1e5?5:A>=1e4?4:A>=1e3?3:A>=100?2:A>=10?1:0},z.popCount=function(A){return 16843009*((A=(858993459&(A-=A>>>1&1431655765))+(A>>>2&858993459))+(A>>>4)&252645135)>>>24},z.countTrailingZeros=e,z.nextPow2=function(A){return A+=0===A,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,1+((A|=A>>>8)|A>>>16)},z.prevPow2=function(A){return A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,(A|=A>>>16)-(A>>>1)},z.parity=function(A){return A^=A>>>16,A^=A>>>8,A^=A>>>4,27030>>>(A&=15)&1};var k=new Array(256);(function(A){for(var l=0;l<256;++l){var T=l,b=l,d=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--d;A[l]=b<<d&255}})(k),z.reverse=function(A){return k[255&A]<<24|k[A>>>8&255]<<16|k[A>>>16&255]<<8|k[A>>>24&255]},z.interleave2=function(A,l){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A&=65535)|A<<8))|A<<4))|A<<2))|A<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},z.deinterleave2=function(A,l){return(A=65535&((A=16711935&((A=252645135&((A=858993459&((A=A>>>l&1431655765)|A>>>1))|A>>>2))|A>>>4))|A>>>16))<<16>>16},z.interleave3=function(A,l,T){return A=1227133513&((A=3272356035&((A=251719695&((A=4278190335&((A&=1023)|A<<16))|A<<8))|A<<4))|A<<2),(A|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},z.deinterleave3=function(A,l){return(A=1023&((A=4278190335&((A=251719695&((A=3272356035&((A=A>>>l&1227133513)|A>>>2))|A>>>4))|A>>>8))|A>>>16))<<22>>22},z.nextCombination=function(A){var l=A|A-1;return l+1|(~l&-~l)-1>>>e(A)+1}},44781:function(Q,z,e){"use strict";var k=e(53435);Q.exports=function(b,d){d||(d={});var s,t,o,r,n,a,c,f,x,v=null==d.cutoff?.25:d.cutoff,g=null==d.radius?8:d.radius,y=d.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");s=d.width,t=d.height,r=b,a=d.stride?d.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(r=(c=b).getContext("2d").getImageData(0,0,s=c.width,t=c.height).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(s=(c=b.canvas).width,r=b.getImageData(0,0,s,t=c.height).data,a=4):window.ImageData&&b instanceof window.ImageData&&(s=b.width,t=b.height,r=b.data,a=4);if(o=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),f=0,x=n.length;f<x;f++)r[f]=n[f*a+y]/255;else if(1!==a)throw Error("Raw data can have only 1 value per pixel");var p=Array(s*t),m=Array(s*t),w=Array(o),u=Array(o),S=Array(o+1),_=Array(o);for(f=0,x=s*t;f<x;f++){var E=r[f];p[f]=1===E?0:0===E?A:Math.pow(Math.max(0,.5-E),2),m[f]=1===E?A:0===E?0:Math.pow(Math.max(0,E-.5),2)}l(p,s,t,w,u,_,S),l(m,s,t,w,u,_,S);var L=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(f=0,x=s*t;f<x;f++)L[f]=k(1-((p[f]-m[f])/g+v),0,1);return L};var A=1e20;function l(b,d,s,t,o,r,n){for(var a=0;a<d;a++){for(var i=0;i<s;i++)t[i]=b[i*d+a];for(T(t,o,r,n,s),i=0;i<s;i++)b[i*d+a]=o[i]}for(i=0;i<s;i++){for(a=0;a<d;a++)t[a]=b[i*d+a];for(T(t,o,r,n,d),a=0;a<d;a++)b[i*d+a]=Math.sqrt(o[a])}}function T(b,d,s,t,o){s[0]=0,t[0]=-A,t[1]=+A;for(var r=1,n=0;r<o;r++){for(var a=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=t[n];)n--,a=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=a,t[n+1]=+A}for(r=0,n=0;r<o;r++){for(;t[n+1]<r;)n++;d[r]=(r-s[n])*(r-s[n])+b[s[n]]}}},68222:function(Q,z,e){"use strict";var k=e(77575),A=e(68318),l=A("%Function.prototype.apply%"),T=A("%Function.prototype.call%"),b=A("%Reflect.apply%",!0)||k.call(T,l),d=A("%Object.defineProperty%",!0);if(d)try{d({},"a",{value:1})}catch{d=null}Q.exports=function(){return b(k,T,arguments)};var s=function(){return b(k,l,arguments)};d?d(Q.exports,"apply",{value:s}):Q.exports.apply=s},53435:function(Q){Q.exports=function(z,e,k){return e<k?z<e?e:z>k?k:z:z<k?k:z>e?e:z}},6475:function(Q,z,e){"use strict";var k=e(53435);function A(l,T){null==T&&(T=!0);var b=l[0],d=l[1],s=l[2],t=l[3];return null==t&&(t=T?1:255),T&&(b*=255,d*=255,s*=255,t*=255),16777216*(b=255&k(b,0,255))+((d=255&k(d,0,255))<<16)+((s=255&k(s,0,255))<<8)+(255&k(t,0,255))}Q.exports=A,Q.exports.to=A,Q.exports.from=function(l,T){var b=(l=+l)>>>24,d=(16711680&l)>>>16,s=(65280&l)>>>8,t=255&l;return!1===T?[b,d,s,t]:[b/255,d/255,s/255,t/255]}},76857:function(Q){"use strict";Q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(Q,z,e){"use strict";var k=e(36652),A=e(53435),l=e(90660);Q.exports=function(T,b){"float"!==b&&b||(b="array"),"uint"===b&&(b="uint8"),"uint_clamped"===b&&(b="uint8_clamped");var t,d=new(l(b))(4),s="uint8"!==b&&"uint8_clamped"!==b;return T.length&&"string"!=typeof T||((T=k(T))[0]/=255,T[1]/=255,T[2]/=255),(t=T)instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1)?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=null!=T[3]?T[3]:255,s&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d):(s?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=null!=T[3]?T[3]:1):(d[0]=A(Math.floor(255*T[0]),0,255),d[1]=A(Math.floor(255*T[1]),0,255),d[2]=A(Math.floor(255*T[2]),0,255),d[3]=null==T[3]?255:A(Math.floor(255*T[3]),0,255)),d)}},90736:function(Q,z,e){"use strict";var k=e(76857),A=e(10973),l=e(46775);Q.exports=function(b){var d,s,t=[],o=1;if("string"==typeof b)if(k[b])t=k[b].slice(),s="rgb";else if("transparent"===b)o=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(b)){var r=(i=b.slice(1)).length;o=1,r<=4?(t=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],4===r&&(o=parseInt(i[3]+i[3],16)/255)):(t=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],8===r&&(o=parseInt(i[6]+i[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(b)){var n=d[1],a="rgb"===n,i=n.replace(/a$/,"");s=i,r="cmyk"===i?4:"gray"===i?1:3,t=d[2].trim().split(/\s*,\s*/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:"rgb"===i?255*parseFloat(h)/100:parseFloat(h);if("h"===i[f]){if(/deg$/.test(h))return parseFloat(h);if(void 0!==T[h])return T[h]}return parseFloat(h)}),n===i&&t.push(1),o=a||void 0===t[r]?1:t[r],t=t.slice(0,r)}else b.length>10&&/[0-9](?:\s|\/)/.test(b)&&(t=b.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=b.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(b))if(A(b)){var c=l(b.r,b.red,b.R,null);null!==c?(s="rgb",t=[c,l(b.g,b.green,b.G),l(b.b,b.blue,b.B)]):(s="hsl",t=[l(b.h,b.hue,b.H),l(b.s,b.saturation,b.S),l(b.l,b.lightness,b.L,b.b,b.brightness)]),o=l(b.a,b.alpha,b.opacity,1),null!=b.opacity&&(o/=100)}else(Array.isArray(b)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(b))&&(t=[b[0],b[1],b[2]],s="rgb",o=4===b.length?b[3]:1);else s="rgb",t=[b>>>16,(65280&b)>>>8,255&b];return{space:s,values:t,alpha:o}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(Q,z,e){"use strict";var k=e(90736),A=e(80009),l=e(53435);Q.exports=function(T){var b,d=k(T);return d.space?((b=Array(3))[0]=l(d.values[0],0,255),b[1]=l(d.values[1],0,255),b[2]=l(d.values[2],0,255),"h"===d.space[0]&&(b=A.rgb(b)),b.push(l(d.alpha,0,1)),b):[]}},80009:function(Q,z,e){"use strict";var k=e(6866);Q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(A){var l,T,b,d,s,t=A[0]/360,o=A[1]/100,r=A[2]/100;if(0===o)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+o):r+o-r*o),d=[0,0,0];for(var n=0;n<3;n++)(b=t+.3333333333333333*-(n-1))<0?b++:b>1&&b--,d[n]=255*(s=6*b<1?l+6*(T-l)*b:2*b<1?T:3*b<2?l+(T-l)*(.6666666666666666-b)*6:l);return d}},k.hsl=function(A){var l,T,b=A[0]/255,d=A[1]/255,s=A[2]/255,t=Math.min(b,d,s),o=Math.max(b,d,s),r=o-t;return o===t?l=0:b===o?l=(d-s)/r:d===o?l=2+(s-b)/r:s===o&&(l=4+(b-d)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(t+o)/2,[l,100*(o===t?0:T<=.5?r/(o+t):r/(2-o-t)),100*T]}},6866:function(Q){"use strict";Q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(Q){Q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(Q,z,e){"use strict";Q.exports={parse:e(41004),stringify:e(53313)}},63625:function(Q,z,e){"use strict";var k=e(40402);Q.exports={isSize:function(A){return/^[\d\.]/.test(A)||-1!==A.indexOf("/")||-1!==k.indexOf(A)}}},41004:function(Q,z,e){"use strict";var k=e(90448),A=e(38732),l=e(41901),T=e(15659),b=e(96209),d=e(83794),s=e(99011),t=e(63625).isSize;Q.exports=r;var o=r.cache={};function r(a){if("string"!=typeof a)throw new Error("Font argument must be a string.");if(o[a])return o[a];if(""===a)throw new Error("Cannot parse an empty string.");if(-1!==l.indexOf(a))return o[a]={system:a};for(var i,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);i=h.shift();){if(-1!==A.indexOf(i))return["style","variant","weight","stretch"].forEach(function(x){c[x]=i}),o[a]=c;if(-1===b.indexOf(i))if("normal"!==i&&"small-caps"!==i)if(-1===d.indexOf(i)){if(-1===T.indexOf(i)){if(t(i)){var f=s(i,"/");if(c.size=f[0],null!=f[1]?c.lineHeight=n(f[1]):"/"===h[0]&&(h.shift(),c.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=s(h.join(" "),/\s*,\s*/).map(k),o[a]=c}throw new Error("Unknown or unsupported font token: "+i)}c.weight=i}else c.stretch=i;else c.variant=i;else c.style=i}throw new Error("Missing required font-size.")}function n(a){var i=parseFloat(a);return i.toString()===a?i:a}},53313:function(Q,z,e){"use strict";var k=e(71299),A=e(63625).isSize,l=a(e(38732)),T=a(e(41901)),b=a(e(15659)),d=a(e(96209)),s=a(e(83794)),t={normal:1,"small-caps":1},o={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(i,c){if(i&&!c[i]&&!l[i])throw Error("Unknown keyword `"+i+"`");return i}function a(i){for(var c={},h=0;h<i.length;h++)c[i[h]]=1;return c}Q.exports=function(i){if((i=k(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&n(i.system,T),i.system;if(n(i.style,d),n(i.variant,t),n(i.weight,b),n(i.stretch,s),null==i.size&&(i.size="1rem"),"number"==typeof i.size&&(i.size+="px"),!A)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=r),Array.isArray(i.family)&&(i.family.length||(i.family=[r]),i.family=i.family.map(function(h){return o[h]?h:'"'+h+'"'}).join(", "));var c=[];return c.push(i.style),i.variant!==i.style&&c.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&c.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&c.push(i.stretch),c.push(i.size+(null==i.lineHeight||"normal"===i.lineHeight||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),c.push(i.family),c.filter(Boolean).join(" ")}},55174:function(Q,z,e){"use strict";var k,A=e(24582),l=e(10424),T=e(82527),b=e(19012),d=e(21780),s=e(16906),t=Function.prototype.bind,o=Object.defineProperty,r=Object.prototype.hasOwnProperty;k=function(n,a,i){var c,h=l(a)&&T(a.value);return delete(c=b(a)).writable,delete c.value,c.get=function(){return!i.overwriteDefinition&&r.call(this,n)?h:(a.value=t.call(h,i.resolveContext?i.resolveContext(this):this),o(this,n,a),this[n])},c},Q.exports=function(n){var a=d(arguments[1]);return A(a.resolveContext)&&T(a.resolveContext),s(n,function(i,c){return k(c,i,a)})}},62072:function(Q,z,e){"use strict";var k=e(24582),A=e(84985),l=e(95879),T=e(21780),b=e(66741),d=Q.exports=function(s,t){var o,r,n,a,i;return arguments.length<2||"string"!=typeof s?(a=t,t=s,s=null):a=arguments[2],k(s)?(o=b.call(s,"c"),r=b.call(s,"e"),n=b.call(s,"w")):(o=n=!0,r=!1),i={value:t,configurable:o,enumerable:r,writable:n},a?l(T(a),i):i};d.gs=function(s,t,o){var r,n,a,i;return"string"!=typeof s?(a=o,o=t,t=s,s=null):a=arguments[3],k(t)?A(t)?k(o)?A(o)||(a=o,o=void 0):o=void 0:(a=t,t=o=void 0):t=void 0,k(s)?(r=b.call(s,"c"),n=b.call(s,"e")):(r=!0,n=!1),i={get:t,set:o,configurable:r,enumerable:n},a?l(T(a),i):i}},33064:function(Q,z,e){"use strict";function k(a,i){return a<i?-1:a>i?1:a>=i?0:NaN}var A,l;function b(a,i){var c,h,f=a.length,x=-1;if(null==i){for(;++x<f;)if(null!=(c=a[x])&&c>=c)for(h=c;++x<f;)null!=(c=a[x])&&c>h&&(h=c)}else for(;++x<f;)if(null!=(c=i(a[x],x,a))&&c>=c)for(h=c;++x<f;)null!=(c=i(a[x],x,a))&&c>h&&(h=c);return h}function d(a){return null===a?NaN:+a}function s(a,i){var c,h=a.length,f=h,x=-1,v=0;if(null==i)for(;++x<h;)isNaN(c=d(a[x]))?--f:v+=c;else for(;++x<h;)isNaN(c=d(i(a[x],x,a)))?--f:v+=c;if(f)return v/f}function t(a){for(var i,c,h,f=a.length,x=-1,v=0;++x<f;)v+=a[x].length;for(c=new Array(v);--f>=0;)for(i=(h=a[f]).length;--i>=0;)c[--v]=h[i];return c}function o(a,i){var c,h,f=a.length,x=-1;if(null==i){for(;++x<f;)if(null!=(c=a[x])&&c>=c)for(h=c;++x<f;)null!=(c=a[x])&&h>c&&(h=c)}else for(;++x<f;)if(null!=(c=i(a[x],x,a))&&c>=c)for(h=c;++x<f;)null!=(c=i(a[x],x,a))&&h>c&&(h=c);return h}function r(a,i,c){a=+a,i=+i,c=(f=arguments.length)<2?(i=a,a=0,1):f<3?1:+c;for(var h=-1,f=0|Math.max(0,Math.ceil((i-a)/c)),x=new Array(f);++h<f;)x[h]=a+h*c;return x}function n(a,i){var c,h=a.length,f=-1,x=0;if(null==i)for(;++f<h;)(c=+a[f])&&(x+=c);else for(;++f<h;)(c=+i(a[f],f,a))&&(x+=c);return x}e.d(z,{j2:function(){return k},Fp:function(){return b},J6:function(){return s},TS:function(){return t},VV:function(){return o},w6:function(){return r},Sm:function(){return n}}),1===(A=k).length&&(l=A,A=function(a,i){return k(l(a),i)}),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},15140:function(Q,z,e){"use strict";e.d(z,{UI:function(){return T},b1:function(){return b}});var k="$";function A(){}function l(a,i){var c=new A;if(a instanceof A)a.each(function(g,y){c.set(y,g)});else if(Array.isArray(a)){var h,f=-1,x=a.length;if(null==i)for(;++f<x;)c.set(f,a[f]);else for(;++f<x;)c.set(i(h=a[f],f,a),h)}else if(a)for(var v in a)c.set(v,a[v]);return c}A.prototype=l.prototype={constructor:A,has:function(a){return k+a in this},get:function(a){return this[k+a]},set:function(a,i){return this[k+a]=i,this},remove:function(a){var i=k+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===k&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===k&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===k&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===k&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===k&&++a;return a},empty:function(){for(var a in this)if(a[0]===k)return!1;return!0},each:function(a){for(var i in this)i[0]===k&&a(this[i],i.slice(1),this)}};var T=l;function b(){var a,i,c,h=[],f=[];function x(g,y,p,m){if(y>=h.length)return null!=a&&g.sort(a),null!=i?i(g):g;for(var w,u,S,_=-1,E=g.length,L=h[y++],C=T(),P=p();++_<E;)(S=C.get(w=L(u=g[_])+""))?S.push(u):C.set(w,[u]);return C.each(function(I,j){m(P,j,x(I,y,p,m))}),P}function v(g,y){if(++y>h.length)return g;var p,m=f[y-1];return null!=i&&y>=h.length?p=g.entries():(p=[],g.each(function(w,u){p.push({key:u,values:v(w,y)})})),null!=m?p.sort(function(w,u){return m(w.key,u.key)}):p}return c={object:function(g){return x(g,0,d,s)},map:function(g){return x(g,0,t,o)},entries:function(g){return v(x(g,0,t,o),0)},key:function(g){return h.push(g),c},sortKeys:function(g){return f[h.length-1]=g,c},sortValues:function(g){return a=g,c},rollup:function(g){return i=g,c}}}function d(){return{}}function s(a,i,c){a[i]=c}function t(){return T()}function o(a,i,c){a.set(i,c)}function r(){}var n=T.prototype;r.prototype=function(a,i){var c=new r;if(a instanceof r)a.each(function(x){c.add(x)});else if(a){var h=-1,f=a.length;if(null==i)for(;++h<f;)c.add(a[h]);else for(;++h<f;)c.add(i(a[h],h,a))}return c}.prototype={constructor:r,has:n.has,add:function(a){return this[k+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function(Q,z,e){"use strict";function k(ye,se){var fe;function Ee(){var de,we,ke=fe.length,Te=0,$=0;for(de=0;de<ke;++de)Te+=(we=fe[de]).x,$+=we.y;for(Te=Te/ke-ye,$=$/ke-se,de=0;de<ke;++de)(we=fe[de]).x-=Te,we.y-=$}return null==ye&&(ye=0),null==se&&(se=0),Ee.initialize=function(de){fe=de},Ee.x=function(de){return arguments.length?(ye=+de,Ee):ye},Ee.y=function(de){return arguments.length?(se=+de,Ee):se},Ee}function A(ye){return function(){return ye}}function l(){return 1e-6*(Math.random()-.5)}function T(ye,se,fe,Ee){if(isNaN(se)||isNaN(fe))return ye;var de,we,ke,Te,$,oe,he,me,Me,Ie=ye._root,Pe={data:Ee},ze=ye._x0,ce=ye._y0,ge=ye._x1,_e=ye._y1;if(!Ie)return ye._root=Pe,ye;for(;Ie.length;)if((oe=se>=(we=(ze+ge)/2))?ze=we:ge=we,(he=fe>=(ke=(ce+_e)/2))?ce=ke:_e=ke,de=Ie,!(Ie=Ie[me=he<<1|oe]))return de[me]=Pe,ye;if(Te=+ye._x.call(null,Ie.data),$=+ye._y.call(null,Ie.data),se===Te&&fe===$)return Pe.next=Ie,de?de[me]=Pe:ye._root=Pe,ye;do{de=de?de[me]=new Array(4):ye._root=new Array(4),(oe=se>=(we=(ze+ge)/2))?ze=we:ge=we,(he=fe>=(ke=(ce+_e)/2))?ce=ke:_e=ke}while((me=he<<1|oe)==(Me=($>=ke)<<1|Te>=we));return de[Me]=Ie,de[me]=Pe,ye}function b(ye,se,fe,Ee,de){this.node=ye,this.x0=se,this.y0=fe,this.x1=Ee,this.y1=de}function d(ye){return ye[0]}function s(ye){return ye[1]}function t(ye,se,fe){var Ee=new o(se??d,fe??s,NaN,NaN,NaN,NaN);return null==ye?Ee:Ee.addAll(ye)}function o(ye,se,fe,Ee,de,we){this._x=ye,this._y=se,this._x0=fe,this._y0=Ee,this._x1=de,this._y1=we,this._root=void 0}function r(ye){for(var se={data:ye.data},fe=se;ye=ye.next;)fe=fe.next={data:ye.data};return se}e.r(z),e.d(z,{forceCenter:function(){return k},forceCollide:function(){return c},forceLink:function(){return v},forceManyBody:function(){return ae},forceRadial:function(){return le},forceSimulation:function(){return re},forceX:function(){return pe},forceY:function(){return xe}});var n=t.prototype=o.prototype;function a(ye){return ye.x+ye.vx}function i(ye){return ye.y+ye.vy}function c(ye){var se,fe,Ee=1,de=1;function we(){for(var $,oe,he,me,Me,Ie,Pe,ze=se.length,ce=0;ce<de;++ce)for(oe=t(se,a,i).visitAfter(ke),$=0;$<ze;++$)Pe=(Ie=fe[(he=se[$]).index])*Ie,me=he.x+he.vx,Me=he.y+he.vy,oe.visit(ge);function ge(_e,De,He,Ve,nt){var tt=_e.data,at=_e.r,dt=Ie+at;if(!tt)return De>me+dt||Ve<me-dt||He>Me+dt||nt<Me-dt;if(tt.index>he.index){var wt=me-tt.x-tt.vx,bt=Me-tt.y-tt.vy,_t=wt*wt+bt*bt;_t<dt*dt&&(0===wt&&(_t+=(wt=l())*wt),0===bt&&(_t+=(bt=l())*bt),_t=(dt-(_t=Math.sqrt(_t)))/_t*Ee,he.vx+=(wt*=_t)*(dt=(at*=at)/(Pe+at)),he.vy+=(bt*=_t)*dt,tt.vx-=wt*(dt=1-dt),tt.vy-=bt*dt)}}}function ke($){if($.data)return $.r=fe[$.data.index];for(var oe=$.r=0;oe<4;++oe)$[oe]&&$[oe].r>$.r&&($.r=$[oe].r)}function Te(){if(se){var $,oe,he=se.length;for(fe=new Array(he),$=0;$<he;++$)fe[(oe=se[$]).index]=+ye(oe,$,se)}}return"function"!=typeof ye&&(ye=A(null==ye?1:+ye)),we.initialize=function($){se=$,Te()},we.iterations=function($){return arguments.length?(de=+$,we):de},we.strength=function($){return arguments.length?(Ee=+$,we):Ee},we.radius=function($){return arguments.length?(ye="function"==typeof $?$:A(+$),Te(),we):ye},we}n.copy=function(){var ye,se,fe=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ee=this._root;if(!Ee)return fe;if(!Ee.length)return fe._root=r(Ee),fe;for(ye=[{source:Ee,target:fe._root=new Array(4)}];Ee=ye.pop();)for(var de=0;de<4;++de)(se=Ee.source[de])&&(se.length?ye.push({source:se,target:Ee.target[de]=new Array(4)}):Ee.target[de]=r(se));return fe},n.add=function(ye){var se=+this._x.call(null,ye),fe=+this._y.call(null,ye);return T(this.cover(se,fe),se,fe,ye)},n.addAll=function(ye){var se,fe,Ee,de,we=ye.length,ke=new Array(we),Te=new Array(we),$=1/0,oe=1/0,he=-1/0,me=-1/0;for(fe=0;fe<we;++fe)isNaN(Ee=+this._x.call(null,se=ye[fe]))||isNaN(de=+this._y.call(null,se))||(ke[fe]=Ee,Te[fe]=de,Ee<$&&($=Ee),Ee>he&&(he=Ee),de<oe&&(oe=de),de>me&&(me=de));if($>he||oe>me)return this;for(this.cover($,oe).cover(he,me),fe=0;fe<we;++fe)T(this,ke[fe],Te[fe],ye[fe]);return this},n.cover=function(ye,se){if(isNaN(ye=+ye)||isNaN(se=+se))return this;var fe=this._x0,Ee=this._y0,de=this._x1,we=this._y1;if(isNaN(fe))de=(fe=Math.floor(ye))+1,we=(Ee=Math.floor(se))+1;else{for(var ke,Te,$=de-fe,oe=this._root;fe>ye||ye>=de||Ee>se||se>=we;)switch(Te=(se<Ee)<<1|ye<fe,(ke=new Array(4))[Te]=oe,oe=ke,$*=2,Te){case 0:de=fe+$,we=Ee+$;break;case 1:fe=de-$,we=Ee+$;break;case 2:de=fe+$,Ee=we-$;break;case 3:fe=de-$,Ee=we-$}this._root&&this._root.length&&(this._root=oe)}return this._x0=fe,this._y0=Ee,this._x1=de,this._y1=we,this},n.data=function(){var ye=[];return this.visit(function(se){if(!se.length)do{ye.push(se.data)}while(se=se.next)}),ye},n.extent=function(ye){return arguments.length?this.cover(+ye[0][0],+ye[0][1]).cover(+ye[1][0],+ye[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ye,se,fe){var Ee,de,we,ke,Te,$,oe,he=this._x0,me=this._y0,Me=this._x1,Ie=this._y1,Pe=[],ze=this._root;for(ze&&Pe.push(new b(ze,he,me,Me,Ie)),null==fe?fe=1/0:(he=ye-fe,me=se-fe,Me=ye+fe,Ie=se+fe,fe*=fe);$=Pe.pop();)if(!(!(ze=$.node)||(de=$.x0)>Me||(we=$.y0)>Ie||(ke=$.x1)<he||(Te=$.y1)<me))if(ze.length){var ce=(de+ke)/2,ge=(we+Te)/2;Pe.push(new b(ze[3],ce,ge,ke,Te),new b(ze[2],de,ge,ce,Te),new b(ze[1],ce,we,ke,ge),new b(ze[0],de,we,ce,ge)),(oe=(se>=ge)<<1|ye>=ce)&&($=Pe[Pe.length-1],Pe[Pe.length-1]=Pe[Pe.length-1-oe],Pe[Pe.length-1-oe]=$)}else{var _e=ye-+this._x.call(null,ze.data),De=se-+this._y.call(null,ze.data),He=_e*_e+De*De;if(He<fe){var Ve=Math.sqrt(fe=He);he=ye-Ve,me=se-Ve,Me=ye+Ve,Ie=se+Ve,Ee=ze.data}}return Ee},n.remove=function(ye){if(isNaN(we=+this._x.call(null,ye))||isNaN(ke=+this._y.call(null,ye)))return this;var se,fe,Ee,de,we,ke,Te,$,oe,he,me,Me,Ie=this._root,Pe=this._x0,ze=this._y0,ce=this._x1,ge=this._y1;if(!Ie)return this;if(Ie.length)for(;;){if((oe=we>=(Te=(Pe+ce)/2))?Pe=Te:ce=Te,(he=ke>=($=(ze+ge)/2))?ze=$:ge=$,se=Ie,!(Ie=Ie[me=he<<1|oe]))return this;if(!Ie.length)break;(se[me+1&3]||se[me+2&3]||se[me+3&3])&&(fe=se,Me=me)}for(;Ie.data!==ye;)if(Ee=Ie,!(Ie=Ie.next))return this;return(de=Ie.next)&&delete Ie.next,Ee?(de?Ee.next=de:delete Ee.next,this):se?(de?se[me]=de:delete se[me],(Ie=se[0]||se[1]||se[2]||se[3])&&Ie===(se[3]||se[2]||se[1]||se[0])&&!Ie.length&&(fe?fe[Me]=Ie:this._root=Ie),this):(this._root=de,this)},n.removeAll=function(ye){for(var se=0,fe=ye.length;se<fe;++se)this.remove(ye[se]);return this},n.root=function(){return this._root},n.size=function(){var ye=0;return this.visit(function(se){if(!se.length)do{++ye}while(se=se.next)}),ye},n.visit=function(ye){var se,fe,Ee,de,we,ke,Te=[],$=this._root;for($&&Te.push(new b($,this._x0,this._y0,this._x1,this._y1));se=Te.pop();)if(!ye($=se.node,Ee=se.x0,de=se.y0,we=se.x1,ke=se.y1)&&$.length){var oe=(Ee+we)/2,he=(de+ke)/2;(fe=$[3])&&Te.push(new b(fe,oe,he,we,ke)),(fe=$[2])&&Te.push(new b(fe,Ee,he,oe,ke)),(fe=$[1])&&Te.push(new b(fe,oe,de,we,he)),(fe=$[0])&&Te.push(new b(fe,Ee,de,oe,he))}return this},n.visitAfter=function(ye){var se,fe=[],Ee=[];for(this._root&&fe.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));se=fe.pop();){var de=se.node;if(de.length){var we,ke=se.x0,Te=se.y0,$=se.x1,oe=se.y1,he=(ke+$)/2,me=(Te+oe)/2;(we=de[0])&&fe.push(new b(we,ke,Te,he,me)),(we=de[1])&&fe.push(new b(we,he,Te,$,me)),(we=de[2])&&fe.push(new b(we,ke,me,he,oe)),(we=de[3])&&fe.push(new b(we,he,me,$,oe))}Ee.push(se)}for(;se=Ee.pop();)ye(se.node,se.x0,se.y0,se.x1,se.y1);return this},n.x=function(ye){return arguments.length?(this._x=ye,this):this._x},n.y=function(ye){return arguments.length?(this._y=ye,this):this._y};var h=e(15140);function f(ye){return ye.index}function x(ye,se){var fe=ye.get(se);if(!fe)throw new Error("missing: "+se);return fe}function v(ye){var se,fe,Ee,de,we,ke=f,Te=function(Pe){return 1/Math.min(de[Pe.source.index],de[Pe.target.index])},$=A(30),oe=1;function he(Pe){for(var ze=0,ce=ye.length;ze<oe;++ze)for(var ge,_e,De,He,Ve,nt,tt,at=0;at<ce;++at)_e=(ge=ye[at]).source,He=(De=ge.target).x+De.vx-_e.x-_e.vx||l(),Ve=De.y+De.vy-_e.y-_e.vy||l(),He*=nt=((nt=Math.sqrt(He*He+Ve*Ve))-fe[at])/nt*Pe*se[at],Ve*=nt,De.vx-=He*(tt=we[at]),De.vy-=Ve*tt,_e.vx+=He*(tt=1-tt),_e.vy+=Ve*tt}function me(){if(Ee){var Pe,ze,ce=Ee.length,ge=ye.length,_e=(0,h.UI)(Ee,ke);for(Pe=0,de=new Array(ce);Pe<ge;++Pe)(ze=ye[Pe]).index=Pe,"object"!=typeof ze.source&&(ze.source=x(_e,ze.source)),"object"!=typeof ze.target&&(ze.target=x(_e,ze.target)),de[ze.source.index]=(de[ze.source.index]||0)+1,de[ze.target.index]=(de[ze.target.index]||0)+1;for(Pe=0,we=new Array(ge);Pe<ge;++Pe)we[Pe]=de[(ze=ye[Pe]).source.index]/(de[ze.source.index]+de[ze.target.index]);se=new Array(ge),Me(),fe=new Array(ge),Ie()}}function Me(){if(Ee)for(var Pe=0,ze=ye.length;Pe<ze;++Pe)se[Pe]=+Te(ye[Pe],Pe,ye)}function Ie(){if(Ee)for(var Pe=0,ze=ye.length;Pe<ze;++Pe)fe[Pe]=+$(ye[Pe],Pe,ye)}return null==ye&&(ye=[]),he.initialize=function(Pe){Ee=Pe,me()},he.links=function(Pe){return arguments.length?(ye=Pe,me(),he):ye},he.id=function(Pe){return arguments.length?(ke=Pe,he):ke},he.iterations=function(Pe){return arguments.length?(oe=+Pe,he):oe},he.strength=function(Pe){return arguments.length?(Te="function"==typeof Pe?Pe:A(+Pe),Me(),he):Te},he.distance=function(Pe){return arguments.length?($="function"==typeof Pe?Pe:A(+Pe),Ie(),he):$},he}var g={value:function(){}};function y(){for(var ye,se=0,fe=arguments.length,Ee={};se<fe;++se){if(!(ye=arguments[se]+"")||ye in Ee||/[\s.]/.test(ye))throw new Error("illegal type: "+ye);Ee[ye]=[]}return new p(Ee)}function p(ye){this._=ye}function w(ye,se){for(var fe,Ee=0,de=ye.length;Ee<de;++Ee)if((fe=ye[Ee]).name===se)return fe.value}function u(ye,se,fe){for(var Ee=0,de=ye.length;Ee<de;++Ee)if(ye[Ee].name===se){ye[Ee]=g,ye=ye.slice(0,Ee).concat(ye.slice(Ee+1));break}return null!=fe&&ye.push({name:se,value:fe}),ye}p.prototype=y.prototype={constructor:p,on:function(ye,se){var fe,Ee=this._,de=function m(ye,se){return ye.trim().split(/^|\s+/).map(function(fe){var Ee="",de=fe.indexOf(".");if(de>=0&&(Ee=fe.slice(de+1),fe=fe.slice(0,de)),fe&&!se.hasOwnProperty(fe))throw new Error("unknown type: "+fe);return{type:fe,name:Ee}})}(ye+"",Ee),we=-1,ke=de.length;if(!(arguments.length<2)){if(null!=se&&"function"!=typeof se)throw new Error("invalid callback: "+se);for(;++we<ke;)if(fe=(ye=de[we]).type)Ee[fe]=u(Ee[fe],ye.name,se);else if(null==se)for(fe in Ee)Ee[fe]=u(Ee[fe],ye.name,null);return this}for(;++we<ke;)if((fe=(ye=de[we]).type)&&(fe=w(Ee[fe],ye.name)))return fe},copy:function(){var ye={},se=this._;for(var fe in se)ye[fe]=se[fe].slice();return new p(ye)},call:function(ye,se){if((fe=arguments.length-2)>0)for(var fe,Ee,de=new Array(fe),we=0;we<fe;++we)de[we]=arguments[we+2];if(!this._.hasOwnProperty(ye))throw new Error("unknown type: "+ye);for(we=0,fe=(Ee=this._[ye]).length;we<fe;++we)Ee[we].value.apply(se,de)},apply:function(ye,se,fe){if(!this._.hasOwnProperty(ye))throw new Error("unknown type: "+ye);for(var Ee=this._[ye],de=0,we=Ee.length;de<we;++de)Ee[de].value.apply(se,fe)}};var S,_,E=y,L=0,C=0,P=0,I=0,j=0,R=0,H="object"==typeof performance&&performance.now?performance:Date,F="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ye){setTimeout(ye,17)};function U(){return j||(F(B),j=H.now()+R)}function B(){j=0}function N(){this._call=this._time=this._next=null}function J(ye,se,fe){var Ee=new N;return Ee.restart(ye,se,fe),Ee}function Z(){j=(I=H.now())+R,L=C=0;try{!function(){U(),++L;for(var ye,se=S;se;)(ye=j-se._time)>=0&&se._call.call(null,ye),se=se._next;--L}()}finally{L=0,function(){for(var ye,se,fe=S,Ee=1/0;fe;)fe._call?(Ee>fe._time&&(Ee=fe._time),ye=fe,fe=fe._next):(se=fe._next,fe._next=null,fe=ye?ye._next=se:S=se);_=ye,W(Ee)}(),j=0}}function V(){var ye=H.now(),se=ye-I;se>1e3&&(R-=se,I=ye)}function W(ye){L||(C&&(C=clearTimeout(C)),ye-j>24?(ye<1/0&&(C=setTimeout(Z,ye-H.now()-R)),P&&(P=clearInterval(P))):(P||(I=H.now(),P=setInterval(V,1e3)),L=1,F(Z)))}function X(ye){return ye.x}function K(ye){return ye.y}N.prototype=J.prototype={constructor:N,restart:function(ye,se,fe){if("function"!=typeof ye)throw new TypeError("callback is not a function");fe=(null==fe?U():+fe)+(null==se?0:+se),this._next||_===this||(_?_._next=this:S=this,_=this),this._call=ye,this._time=fe,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};var ne=Math.PI*(3-Math.sqrt(5));function re(ye){var se,fe=1,Ee=.001,de=1-Math.pow(Ee,1/300),we=0,ke=.6,Te=(0,h.UI)(),$=J(he),oe=E("tick","end");function he(){me(),oe.call("tick",se),fe<Ee&&($.stop(),oe.call("end",se))}function me(Pe){var ze,ce,ge=ye.length;void 0===Pe&&(Pe=1);for(var _e=0;_e<Pe;++_e)for(fe+=(we-fe)*de,Te.each(function(De){De(fe)}),ze=0;ze<ge;++ze)null==(ce=ye[ze]).fx?ce.x+=ce.vx*=ke:(ce.x=ce.fx,ce.vx=0),null==ce.fy?ce.y+=ce.vy*=ke:(ce.y=ce.fy,ce.vy=0);return se}function Me(){for(var Pe,ze=0,ce=ye.length;ze<ce;++ze){if((Pe=ye[ze]).index=ze,null!=Pe.fx&&(Pe.x=Pe.fx),null!=Pe.fy&&(Pe.y=Pe.fy),isNaN(Pe.x)||isNaN(Pe.y)){var ge=10*Math.sqrt(ze),_e=ze*ne;Pe.x=ge*Math.cos(_e),Pe.y=ge*Math.sin(_e)}(isNaN(Pe.vx)||isNaN(Pe.vy))&&(Pe.vx=Pe.vy=0)}}function Ie(Pe){return Pe.initialize&&Pe.initialize(ye),Pe}return null==ye&&(ye=[]),Me(),se={tick:me,restart:function(){return $.restart(he),se},stop:function(){return $.stop(),se},nodes:function(Pe){return arguments.length?(ye=Pe,Me(),Te.each(Ie),se):ye},alpha:function(Pe){return arguments.length?(fe=+Pe,se):fe},alphaMin:function(Pe){return arguments.length?(Ee=+Pe,se):Ee},alphaDecay:function(Pe){return arguments.length?(de=+Pe,se):+de},alphaTarget:function(Pe){return arguments.length?(we=+Pe,se):we},velocityDecay:function(Pe){return arguments.length?(ke=1-Pe,se):1-ke},force:function(Pe,ze){return arguments.length>1?(null==ze?Te.remove(Pe):Te.set(Pe,Ie(ze)),se):Te.get(Pe)},find:function(Pe,ze,ce){var ge,_e,De,He,Ve,nt=0,tt=ye.length;for(null==ce?ce=1/0:ce*=ce,nt=0;nt<tt;++nt)(De=(ge=Pe-(He=ye[nt]).x)*ge+(_e=ze-He.y)*_e)<ce&&(Ve=He,ce=De);return Ve},on:function(Pe,ze){return arguments.length>1?(oe.on(Pe,ze),se):oe.on(Pe)}}}function ae(){var ye,se,fe,Ee,de=A(-30),we=1,ke=1/0,Te=.81;function $(Me){var Ie,Pe=ye.length,ze=t(ye,X,K).visitAfter(he);for(fe=Me,Ie=0;Ie<Pe;++Ie)se=ye[Ie],ze.visit(me)}function oe(){if(ye){var Me,Ie,Pe=ye.length;for(Ee=new Array(Pe),Me=0;Me<Pe;++Me)Ee[(Ie=ye[Me]).index]=+de(Ie,Me,ye)}}function he(Me){var Ie,Pe,ze,ce,ge,_e=0,De=0;if(Me.length){for(ze=ce=ge=0;ge<4;++ge)(Ie=Me[ge])&&(Pe=Math.abs(Ie.value))&&(_e+=Ie.value,De+=Pe,ze+=Pe*Ie.x,ce+=Pe*Ie.y);Me.x=ze/De,Me.y=ce/De}else{(Ie=Me).x=Ie.data.x,Ie.y=Ie.data.y;do{_e+=Ee[Ie.data.index]}while(Ie=Ie.next)}Me.value=_e}function me(Me,Ie,Pe,ze){if(!Me.value)return!0;var ce=Me.x-se.x,ge=Me.y-se.y,_e=ze-Ie,De=ce*ce+ge*ge;if(_e*_e/Te<De)return De<ke&&(0===ce&&(De+=(ce=l())*ce),0===ge&&(De+=(ge=l())*ge),De<we&&(De=Math.sqrt(we*De)),se.vx+=ce*Me.value*fe/De,se.vy+=ge*Me.value*fe/De),!0;if(!(Me.length||De>=ke)){(Me.data!==se||Me.next)&&(0===ce&&(De+=(ce=l())*ce),0===ge&&(De+=(ge=l())*ge),De<we&&(De=Math.sqrt(we*De)));do{Me.data!==se&&(se.vx+=ce*(_e=Ee[Me.data.index]*fe/De),se.vy+=ge*_e)}while(Me=Me.next)}}return $.initialize=function(Me){ye=Me,oe()},$.strength=function(Me){return arguments.length?(de="function"==typeof Me?Me:A(+Me),oe(),$):de},$.distanceMin=function(Me){return arguments.length?(we=Me*Me,$):Math.sqrt(we)},$.distanceMax=function(Me){return arguments.length?(ke=Me*Me,$):Math.sqrt(ke)},$.theta=function(Me){return arguments.length?(Te=Me*Me,$):Math.sqrt(Te)},$}function le(ye,se,fe){var Ee,de,we,ke=A(.1);function Te(oe){for(var he=0,me=Ee.length;he<me;++he){var Me=Ee[he],Ie=Me.x-se||1e-6,Pe=Me.y-fe||1e-6,ze=Math.sqrt(Ie*Ie+Pe*Pe),ce=(we[he]-ze)*de[he]*oe/ze;Me.vx+=Ie*ce,Me.vy+=Pe*ce}}function $(){if(Ee){var oe,he=Ee.length;for(de=new Array(he),we=new Array(he),oe=0;oe<he;++oe)we[oe]=+ye(Ee[oe],oe,Ee),de[oe]=isNaN(we[oe])?0:+ke(Ee[oe],oe,Ee)}}return"function"!=typeof ye&&(ye=A(+ye)),null==se&&(se=0),null==fe&&(fe=0),Te.initialize=function(oe){Ee=oe,$()},Te.strength=function(oe){return arguments.length?(ke="function"==typeof oe?oe:A(+oe),$(),Te):ke},Te.radius=function(oe){return arguments.length?(ye="function"==typeof oe?oe:A(+oe),$(),Te):ye},Te.x=function(oe){return arguments.length?(se=+oe,Te):se},Te.y=function(oe){return arguments.length?(fe=+oe,Te):fe},Te}function pe(ye){var se,fe,Ee,de=A(.1);function we(Te){for(var $,oe=0,he=se.length;oe<he;++oe)($=se[oe]).vx+=(Ee[oe]-$.x)*fe[oe]*Te}function ke(){if(se){var Te,$=se.length;for(fe=new Array($),Ee=new Array($),Te=0;Te<$;++Te)fe[Te]=isNaN(Ee[Te]=+ye(se[Te],Te,se))?0:+de(se[Te],Te,se)}}return"function"!=typeof ye&&(ye=A(null==ye?0:+ye)),we.initialize=function(Te){se=Te,ke()},we.strength=function(Te){return arguments.length?(de="function"==typeof Te?Te:A(+Te),ke(),we):de},we.x=function(Te){return arguments.length?(ye="function"==typeof Te?Te:A(+Te),ke(),we):ye},we}function xe(ye){var se,fe,Ee,de=A(.1);function we(Te){for(var $,oe=0,he=se.length;oe<he;++oe)($=se[oe]).vy+=(Ee[oe]-$.y)*fe[oe]*Te}function ke(){if(se){var Te,$=se.length;for(fe=new Array($),Ee=new Array($),Te=0;Te<$;++Te)fe[Te]=isNaN(Ee[Te]=+ye(se[Te],Te,se))?0:+de(se[Te],Te,se)}}return"function"!=typeof ye&&(ye=A(null==ye?0:+ye)),we.initialize=function(Te){se=Te,ke()},we.strength=function(Te){return arguments.length?(de="function"==typeof Te?Te:A(+Te),ke(),we):de},we.y=function(Te){return arguments.length?(ye="function"==typeof Te?Te:A(+Te),ke(),we):ye},we}},60721:function(Q,z,e){"use strict";function k(c,h){if((f=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var f,x=c.slice(0,f);return[x.length>1?x[0]+x.slice(2):x,+c.slice(f+1)]}e.d(z,{WU:function(){return r},FF:function(){return i}});var A,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(c){if(!(h=l.exec(c)))throw new Error("invalid format: "+c);var h;return new b({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function b(c){this.fill=void 0===c.fill?" ":c.fill+"",this.align=void 0===c.align?">":c.align+"",this.sign=void 0===c.sign?"-":c.sign+"",this.symbol=void 0===c.symbol?"":c.symbol+"",this.zero=!!c.zero,this.width=void 0===c.width?void 0:+c.width,this.comma=!!c.comma,this.precision=void 0===c.precision?void 0:+c.precision,this.trim=!!c.trim,this.type=void 0===c.type?"":c.type+""}function d(c,h){var f=k(c,h);if(!f)return c+"";var x=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+x:x.length>v+1?x.slice(0,v+1)+"."+x.slice(v+1):x+new Array(v-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,h){return(100*c).toFixed(h)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,h){return c.toExponential(h)},f:function(c,h){return c.toFixed(h)},g:function(c,h){return c.toPrecision(h)},o:function(c){return Math.round(c).toString(8)},p:function(c,h){return d(100*c,h)},r:d,s:function(c,h){var f=k(c,h);if(!f)return c+"";var x=f[0],v=f[1],g=v-(A=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,y=x.length;return g===y?x:g>y?x+new Array(g-y+1).join("0"):g>0?x.slice(0,g)+"."+x.slice(g):"0."+new Array(1-g).join("0")+k(c,Math.max(0,h+g-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function t(c){return c}var o,r,n=Array.prototype.map,a=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function i(c){var h,f,_,x=void 0===c.grouping||void 0===c.thousands?t:(h=n.call(c.grouping,Number),f=c.thousands+"",function(_,E){for(var L=_.length,C=[],P=0,I=h[0],j=0;L>0&&I>0&&(j+I+1>E&&(I=Math.max(1,E-j)),C.push(_.substring(L-=I,L+I)),!((j+=I+1)>E));)I=h[P=(P+1)%h.length];return C.reverse().join(f)}),v=void 0===c.currency?"":c.currency[0]+"",g=void 0===c.currency?"":c.currency[1]+"",y=void 0===c.decimal?".":c.decimal+"",p=void 0===c.numerals?t:(_=n.call(c.numerals,String),function(E){return E.replace(/[0-9]/g,function(L){return _[+L]})}),m=void 0===c.percent?"%":c.percent+"",w=void 0===c.minus?"-":c.minus+"",u=void 0===c.nan?"NaN":c.nan+"";function S(_){var E=(_=T(_)).fill,L=_.align,C=_.sign,P=_.symbol,I=_.zero,j=_.width,R=_.comma,H=_.precision,F=_.trim,U=_.type;"n"===U?(R=!0,U="g"):s[U]||(void 0===H&&(H=12),F=!0,U="g"),(I||"0"===E&&"="===L)&&(I=!0,E="0",L="=");var B="$"===P?v:"#"===P&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",N="$"===P?g:/[%p]/.test(U)?m:"",J=s[U],Z=/[defgprs%]/.test(U);function V(W){var X,K,ne,re=B,ae=N;if("c"===U)ae=J(W)+ae,W="";else{var le=(W=+W)<0||1/W<0;if(W=isNaN(W)?u:J(Math.abs(W),H),F&&(W=function(ye){e:for(var se,fe=ye.length,Ee=1,de=-1;Ee<fe;++Ee)switch(ye[Ee]){case".":de=se=Ee;break;case"0":0===de&&(de=Ee),se=Ee;break;default:if(!+ye[Ee])break e;de>0&&(de=0)}return de>0?ye.slice(0,de)+ye.slice(se+1):ye}(W)),le&&0==+W&&"+"!==C&&(le=!1),re=(le?"("===C?C:w:"-"===C||"("===C?"":C)+re,ae=("s"===U?a[8+A/3]:"")+ae+(le&&"("===C?")":""),Z)for(X=-1,K=W.length;++X<K;)if(48>(ne=W.charCodeAt(X))||ne>57){ae=(46===ne?y+W.slice(X+1):W.slice(X))+ae,W=W.slice(0,X);break}}R&&!I&&(W=x(W,1/0));var pe=re.length+W.length+ae.length,xe=pe<j?new Array(j-pe+1).join(E):"";switch(R&&I&&(W=x(xe+W,xe.length?j-ae.length:1/0),xe=""),L){case"<":W=re+W+ae+xe;break;case"=":W=re+xe+W+ae;break;case"^":W=xe.slice(0,pe=xe.length>>1)+re+W+ae+xe.slice(pe);break;default:W=xe+re+W+ae}return p(W)}return H=void 0===H?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H)),V.toString=function(){return _+""},V}return{format:S,formatPrefix:function(_,E){var L,C=S(((_=T(_)).type="f",_)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=k(Math.abs(L)))?L[1]:NaN)/3)))),I=Math.pow(10,-P),j=a[8+P/3];return function(R){return C(I*R)+j}}}}o=i({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=o.format},65704:function(Q,z,e){"use strict";e.r(z),e.d(z,{geoAiry:function(){return R},geoAiryRaw:function(){return j},geoAitoff:function(){return F},geoAitoffRaw:function(){return H},geoArmadillo:function(){return B},geoArmadilloRaw:function(){return U},geoAugust:function(){return J},geoAugustRaw:function(){return N},geoBaker:function(){return X},geoBakerRaw:function(){return W},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ne},geoBertin1953:function(){return Ee},geoBertin1953Raw:function(){return fe},geoBoggs:function(){return me},geoBoggsRaw:function(){return he},geoBonne:function(){return ce},geoBonneRaw:function(){return ze},geoBottomley:function(){return _e},geoBottomleyRaw:function(){return ge},geoBromley:function(){return He},geoBromleyRaw:function(){return De},geoChamberlin:function(){return Lt},geoChamberlinAfrica:function(){return _t},geoChamberlinRaw:function(){return wt},geoCollignon:function(){return Ot},geoCollignonRaw:function(){return Ct},geoCraig:function(){return It},geoCraigRaw:function(){return Ht},geoCraster:function(){return Be},geoCrasterRaw:function(){return Ze},geoCylindricalEqualArea:function(){return rt},geoCylindricalEqualAreaRaw:function(){return Ye},geoCylindricalStereographic:function(){return Re},geoCylindricalStereographicRaw:function(){return Se},geoEckert1:function(){return st},geoEckert1Raw:function(){return Ke},geoEckert2:function(){return Tt},geoEckert2Raw:function(){return ct},geoEckert3:function(){return At},geoEckert3Raw:function(){return Et},geoEckert4:function(){return pt},geoEckert4Raw:function(){return ht},geoEckert5:function(){return Pt},geoEckert5Raw:function(){return gt},geoEckert6:function(){return Ut},geoEckert6Raw:function(){return zt},geoEisenlohr:function(){return Gt},geoEisenlohrRaw:function(){return jt},geoFahey:function(){return Qt},geoFaheyRaw:function(){return hn},geoFoucaut:function(){return Fn},geoFoucautRaw:function(){return _n},geoFoucautSinusoidal:function(){return on},geoFoucautSinusoidalRaw:function(){return yn},geoGilbert:function(){return kn},geoGingery:function(){return er},geoGingeryRaw:function(){return Rn},geoGinzburg4:function(){return lr},geoGinzburg4Raw:function(){return yr},geoGinzburg5:function(){return Gn},geoGinzburg5Raw:function(){return $n},geoGinzburg6:function(){return Jt},geoGinzburg6Raw:function(){return ir},geoGinzburg8:function(){return Sn},geoGinzburg8Raw:function(){return rn},geoGinzburg9:function(){return Ln},geoGinzburg9Raw:function(){return Tn},geoGringorten:function(){return or},geoGringortenQuincuncial:function(){return Cs},geoGringortenRaw:function(){return Hn},geoGuyou:function(){return Rt},geoGuyouRaw:function(){return An},geoHammer:function(){return xe},geoHammerRaw:function(){return le},geoHammerRetroazimuthal:function(){return Mn},geoHammerRetroazimuthalRaw:function(){return tn},geoHealpix:function(){return Zn},geoHealpixRaw:function(){return fn},geoHill:function(){return rr},geoHillRaw:function(){return Jn},geoHomolosine:function(){return Ur},geoHomolosineRaw:function(){return br},geoHufnagel:function(){return fr},geoHufnagelRaw:function(){return Sr},geoHyperelliptical:function(){return Mi},geoHyperellipticalRaw:function(){return li},geoInterrupt:function(){return vi},geoInterruptedBoggs:function(){return to},geoInterruptedHomolosine:function(){return Go},geoInterruptedMollweide:function(){return Us},geoInterruptedMollweideHemispheres:function(){return Ta},geoInterruptedQuarticAuthalic:function(){return zo},geoInterruptedSinuMollweide:function(){return Ri},geoInterruptedSinusoidal:function(){return ma},geoKavrayskiy7:function(){return vo},geoKavrayskiy7Raw:function(){return ka},geoLagrange:function(){return mo},geoLagrangeRaw:function(){return Qr},geoLarrivee:function(){return Ya},geoLarriveeRaw:function(){return Ua},geoLaskowski:function(){return al},geoLaskowskiRaw:function(){return ls},geoLittrow:function(){return ol},geoLittrowRaw:function(){return no},geoLoximuthal:function(){return ml},geoLoximuthalRaw:function(){return sl},geoMiller:function(){return ll},geoMillerRaw:function(){return Hs},geoModifiedStereographic:function(){return Po},geoModifiedStereographicAlaska:function(){return Zs},geoModifiedStereographicGs48:function(){return Co},geoModifiedStereographicGs50:function(){return Ms},geoModifiedStereographicLee:function(){return Yo},geoModifiedStereographicMiller:function(){return yo},geoModifiedStereographicRaw:function(){return qs},geoMollweide:function(){return Te},geoMollweideRaw:function(){return ke},geoMtFlatPolarParabolic:function(){return yl},geoMtFlatPolarParabolicRaw:function(){return xo},geoMtFlatPolarQuartic:function(){return us},geoMtFlatPolarQuarticRaw:function(){return Ss},geoMtFlatPolarSinusoidal:function(){return Xo},geoMtFlatPolarSinusoidalRaw:function(){return Oo},geoNaturalEarth:function(){return Pa.Z},geoNaturalEarth2:function(){return cs},geoNaturalEarth2Raw:function(){return Ws},geoNaturalEarthRaw:function(){return Pa.K},geoNellHammer:function(){return fs},geoNellHammerRaw:function(){return Jo},geoNicolosi:function(){return hs},geoNicolosiRaw:function(){return Ko},geoPatterson:function(){return Es},geoPattersonRaw:function(){return bo},geoPeirceQuincuncial:function(){return Ps},geoPierceQuincuncial:function(){return Ps},geoPolyconic:function(){return Xs},geoPolyconicRaw:function(){return vs},geoPolyhedral:function(){return _o},geoPolyhedralButterfly:function(){return Ls},geoPolyhedralCollignon:function(){return Ks},geoPolyhedralWaterman:function(){return Bo},geoProject:function(){return jo},geoQuantize:function(){return ia},geoQuincuncial:function(){return ya},geoRectangularPolyconic:function(){return Uo},geoRectangularPolyconicRaw:function(){return _r},geoRobinson:function(){return Qo},geoRobinsonRaw:function(){return Os},geoSatellite:function(){return ts},geoSatelliteRaw:function(){return es},geoSinuMollweide:function(){return cr},geoSinuMollweideRaw:function(){return ar},geoSinusoidal:function(){return Pe},geoSinusoidalRaw:function(){return Ie},geoStitch:function(){return Ho},geoTimes:function(){return Da},geoTimesRaw:function(){return Ji},geoTwoPointAzimuthal:function(){return Fa},geoTwoPointAzimuthalRaw:function(){return xs},geoTwoPointAzimuthalUsa:function(){return Aa},geoTwoPointEquidistant:function(){return ni},geoTwoPointEquidistantRaw:function(){return Ka},geoTwoPointEquidistantUsa:function(){return ua},geoVanDerGrinten:function(){return Ha},geoVanDerGrinten2:function(){return $a},geoVanDerGrinten2Raw:function(){return ca},geoVanDerGrinten3:function(){return co},geoVanDerGrinten3Raw:function(){return Ao},geoVanDerGrinten4:function(){return Ba},geoVanDerGrinten4Raw:function(){return Ki},geoVanDerGrintenRaw:function(){return Vi},geoWagner:function(){return Or},geoWagner4:function(){return zs},geoWagner4Raw:function(){return $i},geoWagner6:function(){return is},geoWagner6Raw:function(){return fa},geoWagner7:function(){return rs},geoWagnerRaw:function(){return Mr},geoWiechel:function(){return oi},geoWiechelRaw:function(){return ho},geoWinkel3:function(){return Rs},geoWinkel3Raw:function(){return fi}});var k=e(15002),A=Math.abs,l=Math.atan,T=Math.atan2,b=Math.cos,d=Math.exp,s=Math.floor,t=Math.log,o=Math.max,r=Math.min,n=Math.pow,a=Math.round,i=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},c=Math.sin,h=Math.tan,f=1e-6,x=1e-12,v=Math.PI,g=v/2,y=v/4,p=Math.SQRT1_2,m=C(2),w=C(v),u=2*v,S=180/v,_=v/180;function E(Xe){return Xe>1?g:Xe<-1?-g:Math.asin(Xe)}function L(Xe){return Xe>1?0:Xe<-1?v:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function P(Xe){return(d(Xe)-d(-Xe))/2}function I(Xe){return(d(Xe)+d(-Xe))/2}function j(Xe){var $e=h(Xe/2),ot=2*t(b(Xe/2))/($e*$e);function ft(xt,mt){var D=b(xt),Y=b(mt),q=c(mt),te=Y*D,ve=-((1-te?t((1+te)/2)/(1-te):-.5)+ot/(1+te));return[ve*Y*c(xt),ve*q]}return ft.invert=function(xt,mt){var D,Y=C(xt*xt+mt*mt),q=-Xe/2,te=50;if(!Y)return[0,0];do{var ve=q/2,Ce=b(ve),Ne=c(ve),qe=Ne/Ce,et=-t(A(Ce));q-=D=(2/qe*et-ot*qe-Y)/(-et/(Ne*Ne)+1-ot/(2*Ce*Ce))*(Ce<0?.7:1)}while(A(D)>f&&--te>0);var vt=c(q);return[T(xt*vt,Y*b(q)),E(mt*vt/Y)]},ft}function R(){var Xe=g,$e=(0,k.r)(j),ot=$e(Xe);return ot.radius=function(ft){return arguments.length?$e(Xe=ft*_):Xe*S},ot.scale(179.976).clipAngle(147)}function H(Xe,$e){var xt,ot=b($e),ft=(xt=L(ot*b(Xe/=2)))?xt/Math.sin(xt):1;return[2*ot*c(Xe)*ft,c($e)*ft]}function F(){return(0,k.Z)(H).scale(152.63)}function U(Xe){var $e=c(Xe),ot=b(Xe),ft=Xe>=0?1:-1,xt=h(ft*Xe),mt=(1+$e-ot)/2;function D(Y,q){var te=b(q),ve=b(Y/=2);return[(1+te)*c(Y),(ft*q>-T(ve,xt)-.001?0:10*-ft)+mt+c(q)*ot-(1+te)*$e*ve]}return D.invert=function(Y,q){var te=0,ve=0,Ce=50;do{var Ne=b(te),qe=c(te),et=b(ve),vt=c(ve),yt=1+et,ee=yt*qe-Y,ue=mt+vt*ot-yt*$e*Ne-q,Ae=yt*Ne/2,Oe=-qe*vt,Fe=$e*yt*qe/2,Ue=ot*et+$e*Ne*vt,We=Oe*Fe-Ue*Ae,Je=(ue*Oe-ee*Ue)/We/2,it=(ee*Fe-ue*Ae)/We;A(it)>2&&(it/=2),te-=Je,ve-=it}while((A(Je)>f||A(it)>f)&&--Ce>0);return ft*ve>-T(b(te),xt)-.001?[2*te,ve]:null},D}function B(){var Xe=20*_,$e=Xe>=0?1:-1,ot=h($e*Xe),ft=(0,k.r)(U),xt=ft(Xe),mt=xt.stream;return xt.parallel=function(D){return arguments.length?(ot=h(($e=(Xe=D*_)>=0?1:-1)*Xe),ft(Xe)):Xe*S},xt.stream=function(D){var Y=xt.rotate(),q=mt(D),te=(xt.rotate([0,0]),mt(D)),ve=xt.precision();return xt.rotate(Y),q.sphere=function(){te.polygonStart(),te.lineStart();for(var Ce=-180*$e;$e*Ce<180;Ce+=90*$e)te.point(Ce,90*$e);if(Xe)for(;$e*(Ce-=3*$e*ve)>=-180;)te.point(Ce,$e*-T(b(Ce*_/2),ot)*S);te.lineEnd(),te.polygonEnd()},q},xt.scale(218.695).center([0,28.0974])}function N(Xe,$e){var ot=h($e/2),ft=C(1-ot*ot),xt=1+ft*b(Xe/=2),mt=c(Xe)*ft/xt,D=ot/xt,Y=mt*mt,q=D*D;return[1.3333333333333333*mt*(3+Y-3*q),1.3333333333333333*D*(3+3*Y-q)]}function J(){return(0,k.Z)(N).scale(66.1603)}H.invert=function(Xe,$e){if(!(Xe*Xe+4*$e*$e>v*v+f)){var ot=Xe,ft=$e,xt=25;do{var mt,D=c(ot),Y=c(ot/2),q=b(ot/2),te=c(ft),ve=b(ft),Ce=c(2*ft),Ne=te*te,qe=ve*ve,et=Y*Y,vt=1-qe*q*q,yt=vt?L(ve*q)*C(mt=1/vt):mt=0,ee=2*yt*ve*Y-Xe,ue=yt*te-$e,Ae=mt*(qe*et+yt*ve*q*Ne),Oe=mt*(.5*D*Ce-2*yt*te*Y),Fe=.25*mt*(Ce*Y-yt*te*qe*D),Ue=mt*(Ne*q+yt*et*ve),We=Oe*Fe-Ue*Ae;if(!We)break;var Je=(ue*Oe-ee*Ue)/We,it=(ee*Fe-ue*Ae)/We;ot-=Je,ft-=it}while((A(Je)>f||A(it)>f)&&--xt>0);return[ot,ft]}},N.invert=function(Xe,$e){if($e*=.375,!(Xe*=.375)&&A($e)>1)return null;var te,ot=1+Xe*Xe+$e*$e,ft=C((ot-C(ot*ot-4*$e*$e))/2),xt=E(ft)/3,mt=ft?(te=A($e/ft),t(te+C(te*te-1))/3):function(te){return t(te+C(te*te+1))}(A(Xe))/3,D=b(xt),Y=I(mt),q=Y*Y-D*D;return[2*i(Xe)*T(P(mt)*D,.25-q),2*i($e)*T(Y*c(xt),.25+q)]};var Z=C(8),V=t(1+m);function W(Xe,$e){var ot=A($e);return ot<y?[Xe,t(h(y+$e/2))]:[Xe*b(ot)*(2*m-1/c(ot)),i($e)*(2*m*(ot-y)-t(h(ot/2)))]}function X(){return(0,k.Z)(W).scale(112.314)}W.invert=function(Xe,$e){if((ft=A($e))<V)return[Xe,2*l(d($e))-g];var ot,ft,xt=y,mt=25;do{var D=b(xt/2),Y=h(xt/2);xt-=ot=(Z*(xt-y)-t(Y)-ft)/(Z-D*D/(2*Y))}while(A(ot)>x&&--mt>0);return[Xe/(b(xt)*(Z-1/c(xt))),i($e)*xt]};var K=e(17889);function ne(Xe){var $e=2*v/Xe;function ot(ft,xt){var mt=(0,K.N)(ft,xt);if(A(ft)>g){var D=T(mt[1],mt[0]),Y=C(mt[0]*mt[0]+mt[1]*mt[1]),q=$e*a((D-g)/$e)+g,te=T(c(D-=q),2-b(D));D=q+E(v/Y*c(te))-te,mt[0]=Y*b(D),mt[1]=Y*c(D)}return mt}return ot.invert=function(ft,xt){var mt=C(ft*ft+xt*xt);if(mt>g){var D=T(xt,ft),Y=$e*a((D-g)/$e)+g,q=D>Y?-1:1,te=mt*b(Y-D),ve=1/h(q*L((te-v)/C(v*(v-2*te)+mt*mt)));D=Y+2*l((ve+q*C(ve*ve-3))/3),ft=mt*b(D),xt=mt*c(D)}return K.N.invert(ft,xt)},ot}function re(){var Xe=5,$e=(0,k.r)(ne),ot=$e(Xe),ft=ot.stream,xt=.01,mt=-b(xt*_),D=c(xt*_);return ot.lobes=function(Y){return arguments.length?$e(Xe=+Y):Xe},ot.stream=function(Y){var q=ot.rotate(),te=ft(Y),ve=(ot.rotate([0,0]),ft(Y));return ot.rotate(q),te.sphere=function(){ve.polygonStart(),ve.lineStart();for(var Ce=0,Ne=360/Xe,qe=2*v/Xe,et=90-180/Xe,vt=g;Ce<Xe;++Ce,et-=Ne,vt-=qe)ve.point(T(D*b(vt),mt)*S,E(D*c(vt))*S),et<-90?(ve.point(-90,-180-et-xt),ve.point(-90,-180-et+xt)):(ve.point(90,et+xt),ve.point(90,et-xt));ve.lineEnd(),ve.polygonEnd()},te},ot.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=e(12956);function le(Xe,$e){if(arguments.length<2&&($e=Xe),1===$e)return ae.l;if($e===1/0)return pe;function ot(ft,xt){var mt=(0,ae.l)(ft/$e,xt);return mt[0]*=Xe,mt}return ot.invert=function(ft,xt){var mt=ae.l.invert(ft/Xe,xt);return mt[0]*=$e,mt},ot}function pe(Xe,$e){return[Xe*b($e)/b($e/=2),2*c($e)]}function xe(){var Xe=2,$e=(0,k.r)(le),ot=$e(Xe);return ot.coefficient=function(ft){return arguments.length?$e(Xe=+ft):Xe},ot.scale(169.529)}function ye(Xe,$e,ot){var ft,xt,mt,D=100;ot=void 0===ot?0:+ot,$e=+$e;do{(xt=Xe(ot))===(mt=Xe(ot+f))&&(mt=xt+f),ot-=ft=-1e-6*(xt-$e)/(xt-mt)}while(D-- >0&&A(ft)>f);return D<0?NaN:ot}function se(Xe,$e,ot){return void 0===$e&&($e=40),void 0===ot&&(ot=x),function(ft,xt,mt,D){var Y,q,te;mt=void 0===mt?0:+mt,D=void 0===D?0:+D;for(var ve=0;ve<$e;ve++){var Ce=Xe(mt,D),Ne=Ce[0]-ft,qe=Ce[1]-xt;if(A(Ne)<ot&&A(qe)<ot)break;var et=Ne*Ne+qe*qe;if(et>Y)mt-=q/=2,D-=te/=2;else{Y=et;var vt=(mt>0?-1:1)*ot,yt=(D>0?-1:1)*ot,ee=Xe(mt+vt,D),ue=Xe(mt,D+yt),Ae=(ee[0]-Ce[0])/vt,Oe=(ee[1]-Ce[1])/vt,Fe=(ue[0]-Ce[0])/yt,Ue=(ue[1]-Ce[1])/yt,We=Ue*Ae-Oe*Fe,Je=(A(We)<.5?.5:1)/We;if(mt+=q=(qe*Fe-Ne*Ue)*Je,D+=te=(Ne*Oe-qe*Ae)*Je,A(q)<ot&&A(te)<ot)break}}return[mt,D]}}function fe(){var Xe=le(1.68,2);function $e(ot,ft){if(ot+ft<-1.4){var xt=(ot-ft+1.6)*(ot+ft+1.4)/8;ot+=xt,ft-=.8*xt*c(ft+v/2)}var mt=Xe(ot,ft),D=(1-b(ot*ft))/12;return mt[1]<0&&(mt[0]*=1+D),mt[1]>0&&(mt[1]*=1+D/1.5*mt[0]*mt[0]),mt}return $e.invert=se($e),$e}function Ee(){return(0,k.Z)(fe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function de(Xe,$e){var ot,ft=Xe*c($e),xt=30;do{$e-=ot=($e+c($e)-ft)/(1+b($e))}while(A(ot)>f&&--xt>0);return $e/2}function we(Xe,$e,ot){function ft(xt,mt){return[Xe*xt*b(mt=de(ot,mt)),$e*c(mt)]}return ft.invert=function(xt,mt){return mt=E(mt/$e),[xt/(Xe*b(mt)),E((2*mt+c(2*mt))/ot)]},ft}pe.invert=function(Xe,$e){var ot=2*E($e/2);return[Xe*b(ot/2)/b(ot),ot]};var ke=we(m/g,m,v);function Te(){return(0,k.Z)(ke).scale(169.529)}var $=2.00276,oe=1.11072;function he(Xe,$e){var ot=de(v,$e);return[$*Xe/(1/b($e)+oe/b(ot)),($e+m*c(ot))/$]}function me(){return(0,k.Z)(he).scale(160.857)}function Me(Xe){var $e=0,ot=(0,k.r)(Xe),ft=ot($e);return ft.parallel=function(xt){return arguments.length?ot($e=xt*_):$e*S},ft}function Ie(Xe,$e){return[Xe*b($e),$e]}function Pe(){return(0,k.Z)(Ie).scale(152.63)}function ze(Xe){if(!Xe)return Ie;var $e=1/h(Xe);function ot(ft,xt){var mt=$e+Xe-xt,D=mt&&ft*b(xt)/mt;return[mt*c(D),$e-mt*b(D)]}return ot.invert=function(ft,xt){var mt=C(ft*ft+(xt=$e-xt)*xt),D=$e+Xe-mt;return[mt/b(D)*T(ft,xt),D]},ot}function ce(){return Me(ze).scale(123.082).center([0,26.1441]).parallel(45)}function ge(Xe){function $e(ot,ft){var xt=g-ft,mt=xt&&ot*Xe*c(xt)/xt;return[xt*c(mt)/Xe,g-xt*b(mt)]}return $e.invert=function(ot,ft){var xt=ot*Xe,mt=g-ft,D=C(xt*xt+mt*mt),Y=T(xt,mt);return[(D?D/c(D):1)*Y/Xe,g-D]},$e}function _e(){var Xe=.5,$e=(0,k.r)(ge),ot=$e(Xe);return ot.fraction=function(ft){return arguments.length?$e(Xe=+ft):Xe},ot.scale(158.837)}he.invert=function(Xe,$e){var ot,ft,xt=$*$e,mt=$e<0?-y:y,D=25;do{ft=xt-m*c(mt),mt-=ot=(c(2*mt)+2*mt-v*c(ft))/(2*b(2*mt)+2+v*b(ft)*m*b(mt))}while(A(ot)>f&&--D>0);return ft=xt-m*c(mt),[Xe*(1/b(ft)+oe/b(mt))/$,ft]},Ie.invert=function(Xe,$e){return[Xe/b($e),$e]};var De=we(1,4/v,v);function He(){return(0,k.Z)(De).scale(152.63)}var Ve=e(66624),nt=e(49386);function tt(Xe,$e,ot,ft,xt,mt){var D,Y=b(mt);if(A(Xe)>1||A(mt)>1)D=L(ot*xt+$e*ft*Y);else{var q=c(Xe/2),te=c(mt/2);D=2*E(C(q*q+$e*ft*te*te))}return A(D)>f?[D,T(ft*c(mt),$e*xt-ot*ft*Y)]:[0,0]}function at(Xe,$e,ot){return L((Xe*Xe+$e*$e-ot*ot)/(2*Xe*$e))}function dt(Xe){return Xe-2*v*s((Xe+v)/(2*v))}function wt(Xe,$e,ot){for(var ft,xt=[[Xe[0],Xe[1],c(Xe[1]),b(Xe[1])],[$e[0],$e[1],c($e[1]),b($e[1])],[ot[0],ot[1],c(ot[1]),b(ot[1])]],mt=xt[2],D=0;D<3;++D,mt=ft)mt.v=tt((ft=xt[D])[1]-mt[1],mt[3],mt[2],ft[3],ft[2],ft[0]-mt[0]),mt.point=[0,0];var Y=at(xt[0].v[0],xt[2].v[0],xt[1].v[0]),q=at(xt[0].v[0],xt[1].v[0],xt[2].v[0]),te=v-Y;xt[2].point[1]=0,xt[0].point[0]=-(xt[1].point[0]=xt[0].v[0]/2);var ve=[xt[2].point[0]=xt[0].point[0]+xt[2].v[0]*b(Y),2*(xt[0].point[1]=xt[1].point[1]=xt[2].v[0]*c(Y))];return function(Ce,Ne){var qe,et=c(Ne),vt=b(Ne),yt=new Array(3);for(qe=0;qe<3;++qe){var ee=xt[qe];if(yt[qe]=tt(Ne-ee[1],ee[3],ee[2],vt,et,Ce-ee[0]),!yt[qe][0])return ee.point;yt[qe][1]=dt(yt[qe][1]-ee.v[1])}var ue=ve.slice();for(qe=0;qe<3;++qe){var Oe=at(xt[qe].v[0],yt[qe][0],yt[2==qe?0:qe+1][0]);yt[qe][1]<0&&(Oe=-Oe),qe?1==qe?(ue[0]-=yt[qe][0]*b(Oe=q-Oe),ue[1]-=yt[qe][0]*c(Oe)):(ue[0]+=yt[qe][0]*b(Oe=te-Oe),ue[1]+=yt[qe][0]*c(Oe)):(ue[0]+=yt[qe][0]*b(Oe),ue[1]-=yt[qe][0]*c(Oe))}return ue[0]/=3,ue[1]/=3,ue}}function bt(Xe){return Xe[0]*=_,Xe[1]*=_,Xe}function _t(){return Lt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Lt(Xe,$e,ot){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:[Xe,$e,ot]}),xt=[-ft[0],-ft[1]],mt=(0,nt.Z)(xt),D=wt(bt(mt(Xe)),bt(mt($e)),bt(mt(ot)));D.invert=se(D);var Y=(0,k.Z)(D).rotate(xt),q=Y.center;return delete Y.rotate,Y.center=function(te){return arguments.length?q(mt(te)):mt.invert(q())},Y.clipAngle(90)}function Ct(Xe,$e){var ot=C(1-c($e));return[2/w*Xe*ot,w*(1-ot)]}function Ot(){return(0,k.Z)(Ct).scale(95.6464).center([0,30])}function Ht(Xe){var $e=h(Xe);function ot(ft,xt){return[ft,(ft?ft/c(ft):1)*(c(xt)*b(ft)-$e*b(xt))]}return ot.invert=$e?function(ft,xt){ft&&(xt*=c(ft)/ft);var mt=b(ft);return[ft,2*T(C(mt*mt+$e*$e-xt*xt)-mt,$e-xt)]}:function(ft,xt){return[ft,E(ft?xt*h(ft)/ft:xt)]},ot}function It(){return Me(Ht).scale(249.828).clipAngle(90)}Ct.invert=function(Xe,$e){var ot=(ot=$e/w-1)*ot;return[ot>0?Xe*C(v/ot)/2:0,E(1-ot)]};var Ge=C(3);function Ze(Xe,$e){return[Ge*Xe*(2*b(2*$e/3)-1)/w,Ge*w*c($e/3)]}function Be(){return(0,k.Z)(Ze).scale(156.19)}function Ye(Xe){var $e=b(Xe);function ot(ft,xt){return[ft*$e,c(xt)/$e]}return ot.invert=function(ft,xt){return[ft/$e,E(xt*$e)]},ot}function rt(){return Me(Ye).parallel(38.58).scale(195.044)}function Se(Xe){var $e=b(Xe);function ot(ft,xt){return[ft*$e,(1+$e)*h(xt/2)]}return ot.invert=function(ft,xt){return[ft/$e,2*l(xt/(1+$e))]},ot}function Re(){return Me(Se).scale(124.75)}function Ke(Xe,$e){var ot=C(8/(3*v));return[ot*Xe*(1-A($e)/v),ot*$e]}function st(){return(0,k.Z)(Ke).scale(165.664)}function ct(Xe,$e){var ot=C(4-3*c(A($e)));return[2/C(6*v)*Xe*ot,i($e)*C(2*v/3)*(2-ot)]}function Tt(){return(0,k.Z)(ct).scale(165.664)}function Et(Xe,$e){var ot=C(v*(4+v));return[2/ot*Xe*(1+C(1-4*$e*$e/(v*v))),4/ot*$e]}function At(){return(0,k.Z)(Et).scale(180.739)}function ht(Xe,$e){var ot=(2+g)*c($e);$e/=2;for(var ft=0,xt=1/0;ft<10&&A(xt)>f;ft++){var mt=b($e);$e-=xt=($e+c($e)*(mt+2)-ot)/(2*mt*(1+mt))}return[2/C(v*(4+v))*Xe*(1+b($e)),2*C(v/(4+v))*c($e)]}function pt(){return(0,k.Z)(ht).scale(180.739)}function gt(Xe,$e){return[Xe*(1+b($e))/C(2+v),2*$e/C(2+v)]}function Pt(){return(0,k.Z)(gt).scale(173.044)}function zt(Xe,$e){for(var ot=(1+g)*c($e),ft=0,xt=1/0;ft<10&&A(xt)>f;ft++)$e-=xt=($e+c($e)-ot)/(1+b($e));return ot=C(2+v),[Xe*(1+b($e))/ot,2*$e/ot]}function Ut(){return(0,k.Z)(zt).scale(173.044)}Ze.invert=function(Xe,$e){var ot=3*E($e/(Ge*w));return[w*Xe/(Ge*(2*b(2*ot/3)-1)),ot]},Ke.invert=function(Xe,$e){var ot=C(8/(3*v)),ft=$e/ot;return[Xe/(ot*(1-A(ft)/v)),ft]},ct.invert=function(Xe,$e){var ot=2-A($e)/C(2*v/3);return[Xe*C(6*v)/(2*ot),i($e)*E((4-ot*ot)/3)]},Et.invert=function(Xe,$e){var ot=C(v*(4+v))/2;return[Xe*ot/(1+C(1-$e*$e*(4+v)/(4*v))),$e*ot/2]},ht.invert=function(Xe,$e){var ot=$e*C((4+v)/v)/2,ft=E(ot),xt=b(ft);return[Xe/(2/C(v*(4+v))*(1+xt)),E((ft+ot*(xt+2))/(2+g))]},gt.invert=function(Xe,$e){var ot=C(2+v),ft=$e*ot/2;return[ot*Xe/(1+b(ft)),ft]},zt.invert=function(Xe,$e){var ot=1+g,ft=C(ot/2);return[2*Xe*ft/(1+b($e*=ft)),E(($e+c($e))/ot)]};var Nt=3+2*m;function jt(Xe,$e){var ot=c(Xe/=2),ft=b(Xe),xt=C(b($e)),mt=b($e/=2),D=c($e)/(mt+m*ft*xt),Y=C(2/(1+D*D)),q=C((m*mt+(ft+ot)*xt)/(m*mt+(ft-ot)*xt));return[Nt*(Y*(q-1/q)-2*t(q)),Nt*(Y*D*(q+1/q)-2*l(D))]}function Gt(){return(0,k.Z)(jt).scale(62.5271)}jt.invert=function(Xe,$e){if(!(ot=N.invert(Xe/1.2,1.065*$e)))return null;var ot,ft=ot[0],xt=ot[1],mt=20;Xe/=Nt,$e/=Nt;do{var D=ft/2,Y=xt/2,q=c(D),te=b(D),ve=c(Y),Ce=b(Y),Ne=b(xt),qe=C(Ne),et=ve/(Ce+m*te*qe),vt=et*et,yt=C(2/(1+vt)),ee=(m*Ce+(te+q)*qe)/(m*Ce+(te-q)*qe),ue=C(ee),Ae=ue-1/ue,Oe=ue+1/ue,Fe=yt*Ae-2*t(ue)-Xe,Ue=yt*et*Oe-2*l(et)-$e,We=ve&&p*qe*q*vt/ve,Je=(m*te*Ce+qe)/(2*(Ce+m*te*qe)*(Ce+m*te*qe)*qe),it=-.5*et*yt*yt*yt,ut=it*We,St=it*Je,Dt=(Dt=2*Ce+m*qe*(te-q))*Dt*ue,Ft=(m*te*Ce*qe+Ne)/Dt,Wt=-m*q*ve/(qe*Dt),cn=Ae*ut-2*Ft/ue+yt*(Ft+Ft/ee),Yt=Ae*St-2*Wt/ue+yt*(Wt+Wt/ee),en=et*Oe*ut-2*We/(1+vt)+yt*Oe*We+yt*et*(Ft-Ft/ee),Xt=et*Oe*St-2*Je/(1+vt)+yt*Oe*Je+yt*et*(Wt-Wt/ee),bn=Yt*en-Xt*cn;if(!bn)break;var gn=(Ue*Yt-Fe*Xt)/bn,$t=(Fe*en-Ue*cn)/bn;ft-=gn,xt=o(-g,r(g,xt-$t))}while((A(gn)>f||A($t)>f)&&--mt>0);return A(A(xt)-g)<f?[0,xt]:mt&&[ft,xt]};var un=b(35*_);function hn(Xe,$e){var ot=h($e/2);return[Xe*un*C(1-ot*ot),(1+un)*ot]}function Qt(){return(0,k.Z)(hn).scale(137.152)}function _n(Xe,$e){var ot=$e/2,ft=b(ot);return[2*Xe/w*b($e)*ft*ft,w*h(ot)]}function Fn(){return(0,k.Z)(_n).scale(135.264)}function yn(Xe){var $e=1-Xe,ot=xt(v,0)[0]-xt(-v,0)[0],ft=C(2*(xt(0,g)[1]-xt(0,-g)[1])/ot);function xt(Y,q){var te=b(q),ve=c(q);return[te/($e+Xe*te)*Y,$e*q+Xe*ve]}function mt(Y,q){var te=xt(Y,q);return[te[0]*ft,te[1]/ft]}function D(Y){return mt(0,Y)[1]}return mt.invert=function(Y,q){var te=ye(D,q);return[Y/ft*(Xe+$e/b(te)),te]},mt}function on(){var Xe=.5,$e=(0,k.r)(yn),ot=$e(Xe);return ot.alpha=function(ft){return arguments.length?$e(Xe=+ft):Xe},ot.scale(168.725)}hn.invert=function(Xe,$e){var ot=$e/(1+un);return[Xe&&Xe/(un*C(1-ot*ot)),2*l(ot)]},_n.invert=function(Xe,$e){var ot=l($e/w),ft=b(ot),xt=2*ot;return[Xe*w/2/(b(xt)*ft*ft),xt]};var pn=e(57962),ln=e(97492);function dn(Xe){return[Xe[0]/2,E(h(Xe[1]/2*_))*S]}function Cn(Xe){return[2*Xe[0],2*l(c(Xe[1]*_))*S]}function kn(Xe){null==Xe&&(Xe=pn.Z);var $e=Xe(),ot=(0,ln.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function ft(mt){return $e(dn(mt))}function xt(mt){ft[mt]=function(){return arguments.length?($e[mt].apply($e,arguments),ft):$e[mt]()}}return $e.invert&&(ft.invert=function(mt){return Cn($e.invert(mt))}),ft.stream=function(mt){var D=$e.stream(mt),Y=ot.stream({point:function(q,te){D.point(q/2,E(h(-te/2*_))*S)},lineStart:function(){D.lineStart()},lineEnd:function(){D.lineEnd()},polygonStart:function(){D.polygonStart()},polygonEnd:function(){D.polygonEnd()}});return Y.sphere=D.sphere,Y},ft.rotate=function(mt){return arguments.length?(ot.rotate(mt),ft):ot.rotate()},ft.center=function(mt){return arguments.length?($e.center(dn(mt)),ft):Cn($e.center())},xt("angle"),xt("clipAngle"),xt("clipExtent"),xt("fitExtent"),xt("fitHeight"),xt("fitSize"),xt("fitWidth"),xt("scale"),xt("translate"),xt("precision"),ft.scale(249.5)}function Rn(Xe,$e){var ot=2*v/$e,ft=Xe*Xe;function xt(mt,D){var Y=(0,K.N)(mt,D),q=Y[0],te=Y[1],ve=q*q+te*te;if(ve>ft){var Ce=C(ve),Ne=T(te,q),qe=ot*a(Ne/ot),et=Ne-qe,vt=Xe*b(et),yt=(Xe*c(et)-et*c(vt))/(g-vt),ee=Nn(et,yt),ue=(v-Xe)/jn(ee,vt,v);q=Ce;var Ae,Oe=50;do{q-=Ae=(Xe+jn(ee,vt,q)*ue-Ce)/(ee(q)*ue)}while(A(Ae)>f&&--Oe>0);te=et*c(q),q<g&&(te-=yt*(q-g));var Fe=c(qe),Ue=b(qe);Y[0]=q*Ue-te*Fe,Y[1]=q*Fe+te*Ue}return Y}return xt.invert=function(mt,D){var Y=mt*mt+D*D;if(Y>ft){var q=C(Y),te=T(D,mt),ve=ot*a(te/ot),Ce=te-ve;mt=q*b(Ce),D=q*c(Ce);for(var Ne=mt-g,qe=c(mt),et=D/qe,vt=mt<g?1/0:0,yt=10;;){var ee=Xe*c(et),ue=Xe*b(et),Ae=c(ue),Oe=g-ue,Fe=(ee-et*Ae)/Oe,Ue=Nn(et,Fe);if(A(vt)<x||!--yt)break;et-=vt=(et*qe-Fe*Ne-D)/(qe-2*Ne*(Oe*(ue+et*ee*b(ue)-Ae)-ee*(ee-et*Ae))/(Oe*Oe))}mt=(q=Xe+jn(Ue,ue,mt)*(v-Xe)/jn(Ue,ue,v))*b(te=ve+et),D=q*c(te)}return K.N.invert(mt,D)},xt}function Nn(Xe,$e){return function(ot){var ft=Xe*b(ot);return ot<g&&(ft-=$e),C(1+ft*ft)}}function jn(Xe,$e,ot){for(var ft=(ot-$e)/50,xt=Xe($e)+Xe(ot),mt=1,D=$e;mt<50;++mt)xt+=2*Xe(D+=ft);return.5*xt*ft}function er(){var Xe=6,$e=30*_,ot=b($e),ft=c($e),xt=(0,k.r)(Rn),mt=xt($e,Xe),D=mt.stream,Y=-b(.01*_),q=c(.01*_);return mt.radius=function(te){return arguments.length?(ot=b($e=te*_),ft=c($e),xt($e,Xe)):$e*S},mt.lobes=function(te){return arguments.length?xt($e,Xe=+te):Xe},mt.stream=function(te){var ve=mt.rotate(),Ce=D(te),Ne=(mt.rotate([0,0]),D(te));return mt.rotate(ve),Ce.sphere=function(){Ne.polygonStart(),Ne.lineStart();for(var qe=0,et=2*v/Xe,vt=0;qe<Xe;++qe,vt-=et)Ne.point(T(q*b(vt),Y)*S,E(q*c(vt))*S),Ne.point(T(ft*b(vt-et/2),ot)*S,E(ft*c(vt-et/2))*S);Ne.lineEnd(),Ne.polygonEnd()},Ce},mt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Kn(Xe,$e,ot,ft,xt,mt,D,Y){function q(te,ve){if(!ve)return[Xe*te/v,0];var Ce=ve*ve,Ne=Xe+Ce*($e+Ce*(ot+Ce*ft)),qe=ve*(xt-1+Ce*(mt-Y+Ce*D)),et=(Ne*Ne+qe*qe)/(2*qe),vt=te*E(Ne/et)/v;return[et*c(vt),ve*(1+Ce*Y)+et*(1-b(vt))]}return arguments.length<8&&(Y=0),q.invert=function(te,ve){var Ce,Ne,qe=v*te/Xe,et=ve,vt=50;do{var yt=et*et,ee=Xe+yt*($e+yt*(ot+yt*ft)),ue=et*(xt-1+yt*(mt-Y+yt*D)),Ae=ee*ee+ue*ue,Oe=2*ue,Fe=Ae/Oe,Ue=Fe*Fe,We=E(ee/Fe)/v,Je=qe*We,it=ee*ee,ut=(2*$e+yt*(4*ot+6*yt*ft))*et,St=xt+yt*(3*mt+5*yt*D),Dt=(2*(ee*ut+ue*(St-1))*Oe-Ae*(2*(St-1)))/(Oe*Oe),Ft=b(Je),Wt=c(Je),cn=Fe*Ft,Yt=Fe*Wt,en=qe/v*(1/C(1-it/Ue))*(ut*Fe-ee*Dt)/Ue,Xt=Yt-te,bn=et*(1+yt*Y)+Fe-cn-ve,gn=Dt*Wt+cn*en,$t=cn*We,On=1+Dt-(Dt*Ft-Yt*en),Dn=Yt*We,Yn=gn*Dn-On*$t;if(!Yn)break;qe-=Ce=(bn*gn-Xt*On)/Yn,et-=Ne=(Xt*Dn-bn*$t)/Yn}while((A(Ce)>f||A(Ne)>f)&&--vt>0);return[qe,et]},q}var yr=Kn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function lr(){return(0,k.Z)(yr).scale(149.995)}var $n=Kn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Gn(){return(0,k.Z)($n).scale(153.93)}var ir=Kn(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Jt(){return(0,k.Z)(ir).scale(130.945)}function rn(Xe,$e){var ot=Xe*Xe,ft=$e*$e;return[Xe*(1-.162388*ft)*(.87-952426e-9*ot*ot),$e*(1+ft/12)]}function Sn(){return(0,k.Z)(rn).scale(131.747)}rn.invert=function(Xe,$e){var ot,ft=Xe,xt=$e,mt=50;do{var D=xt*xt;xt-=ot=(xt*(1+D/12)-$e)/(1+D/4)}while(A(ot)>f&&--mt>0);mt=50,Xe/=1-.162388*D;do{var Y=(Y=ft*ft)*Y;ft-=ot=(ft*(.87-952426e-9*Y)-Xe)/(.87-.00476213*Y)}while(A(ot)>f&&--mt>0);return[ft,xt]};var Tn=Kn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ln(){return(0,k.Z)(Tn).scale(131.087)}function Bn(Xe){var $e=Xe(g,0)[0]-Xe(-g,0)[0];function ot(ft,xt){var mt=ft>0?-.5:.5,D=Xe(ft+mt*v,xt);return D[0]-=mt*$e,D}return Xe.invert&&(ot.invert=function(ft,xt){var mt=ft>0?-.5:.5,D=Xe.invert(ft+mt*$e,xt),Y=D[0]-mt*v;return Y<-v?Y+=2*v:Y>v&&(Y-=2*v),D[0]=Y,D}),ot}function Hn(Xe,$e){var ot=i(Xe),ft=i($e),xt=b($e),mt=b(Xe)*xt,D=c(Xe)*xt,Y=c(ft*$e);Xe=A(T(D,Y)),$e=E(mt),A(Xe-g)>f&&(Xe%=g);var q=function(te,ve){if(ve===g)return[0,0];var Ce,Ne,qe=c(ve),et=qe*qe,vt=et*et,yt=1+vt,ee=1+3*vt,ue=1-vt,Ae=E(1/C(yt)),Oe=ue+et*yt*Ae,Fe=(1-qe)/Oe,Ue=C(Fe),We=Fe*yt,Je=C(We),it=Ue*ue;if(0===te)return[0,-(it+et*Je)];var ut,St=b(ve),Dt=1/St,Ft=2*qe*St,Wt=(-Oe*St-(-3*et+Ae*ee)*Ft*(1-qe))/(Oe*Oe),cn=-Dt*Ft,Yt=-Dt*(et*yt*Wt+Fe*ee*Ft),en=-2*Dt*(ue*(.5*Wt/Ue)-2*et*Ue*Ft),Xt=4*te/v;if(te>.222*v||ve<v/4&&te>.175*v){if(Ce=(it+et*C(We*(1+vt)-it*it))/(1+vt),te>v/4)return[Ce,Ce];var bn=Ce,gn=.5*Ce;Ce=.5*(gn+bn),Ne=50;do{var $t=Ce*(en+cn*C(We-Ce*Ce))+Yt*E(Ce/Je)-Xt;if(!$t)break;$t<0?gn=Ce:bn=Ce,Ce=.5*(gn+bn)}while(A(bn-gn)>f&&--Ne>0)}else{Ce=f,Ne=25;do{var On=Ce*Ce,Dn=C(We-On),Yn=en+cn*Dn,Xn=Ce*Yn+Yt*E(Ce/Je)-Xt;Ce-=ut=Dn?Xn/(Yn+(Yt-cn*On)/Dn):0}while(A(ut)>f&&--Ne>0)}return[Ce,-it-et*C(We-Ce*Ce)]}(Xe>v/4?g-Xe:Xe,$e);return Xe>v/4&&(Y=q[0],q[0]=-q[1],q[1]=-Y),q[0]*=ot,q[1]*=-ft,q}function or(){return(0,k.Z)(Bn(Hn)).scale(239.75)}function mr(Xe,$e){var ot,ft,xt,mt,D,Y;if($e<f)return[(mt=c(Xe))-(ot=$e*(Xe-mt*(ft=b(Xe)))/4)*ft,ft+ot*mt,1-$e*mt*mt/2,Xe-ot];if($e>=.999999)return ot=(1-$e)/4,xt=1/(ft=I(Xe)),[(mt=((Y=d(2*(Y=Xe)))-1)/(Y+1))+ot*((D=ft*P(Xe))-Xe)/(ft*ft),xt-ot*mt*xt*(D-Xe),xt+ot*mt*xt*(D+Xe),2*l(d(Xe))-g+ot*(D-Xe)/ft];var q=[1,0,0,0,0,0,0,0,0],te=[C($e),0,0,0,0,0,0,0,0],ve=0;for(ft=C(1-$e),D=1;A(te[ve]/q[ve])>f&&ve<8;)ot=q[ve++],te[ve]=(ot-ft)/2,q[ve]=(ot+ft)/2,ft=C(ot*ft),D*=2;xt=D*q[ve]*Xe;do{xt=(E(mt=te[ve]*c(ft=xt)/q[ve])+xt)/2}while(--ve);return[c(xt),mt=b(xt),mt/b(xt-ft),xt]}function Kt(Xe,$e){if(!$e)return Xe;if(1===$e)return t(h(Xe/2+y));for(var ot=1,ft=C(1-$e),xt=C($e),mt=0;A(xt)>f;mt++){if(Xe%v){var D=l(ft*h(Xe)/ot);D<0&&(D+=v),Xe+=D+~~(Xe/v)*v}else Xe+=Xe;xt=(ot+ft)/2,ft=C(ot*ft),xt=((ot=xt)-ft)/2}return Xe/(n(2,mt)*ot)}function An(Xe,$e){var te,ve,Ce,Ne,qe,ot=(m-1)/(m+1),ft=C(1-ot*ot),xt=Kt(g,ft*ft),mt=t(h(v/4+A($e)/2)),D=d(-1*mt)/C(ot),Y=(te=D*b(-1*Xe),Ne=(ve=D*c(-1*Xe))+1,[.5*((te>=0?g:-g)-T(qe=1-(Ce=te*te)-ve*ve,2*te)),-.25*t(qe*qe+4*Ce)+.5*t(Ne*Ne+Ce)]),q=function(te,ve,Ce){var Ne=A(te),qe=P(A(ve));if(Ne){var et=1/c(Ne),vt=1/(h(Ne)*h(Ne)),yt=-(vt+Ce*(qe*qe*et*et)-1+Ce),ee=(-yt+C(yt*yt-(Ce-1)*vt*4))/2;return[Kt(l(1/C(ee)),Ce)*i(te),Kt(l(C((ee/vt-1)/Ce)),1-Ce)*i(ve)]}return[0,Kt(l(qe),1-Ce)*i(ve)]}(Y[0],Y[1],ft*ft);return[-q[1],($e>=0?1:-1)*(.5*xt-q[0])]}function Rt(){return(0,k.Z)(Bn(An)).scale(151.496)}Hn.invert=function(Xe,$e){A(Xe)>1&&(Xe=2*i(Xe)-Xe),A($e)>1&&($e=2*i($e)-$e);var ot=i(Xe),ft=i($e),xt=-ot*Xe,mt=-ft*$e,D=mt/xt<1,Y=function(Ce,Ne){for(var qe=0,et=1,vt=.5,yt=50;;){var ee=vt*vt,ue=C(vt),Ae=E(1/C(1+ee)),Oe=1-ee+vt*(1+ee)*Ae,Fe=(1-ue)/Oe,Ue=C(Fe),We=Fe*(1+ee),Je=Ue*(1-ee),it=C(We-Ce*Ce),ut=Ne+Je+vt*it;if(A(et-qe)<x||0==--yt||0===ut)break;ut>0?qe=vt:et=vt,vt=.5*(qe+et)}if(!yt)return null;var St=E(ue),Dt=b(St),Ft=1/Dt,Wt=2*ue*Dt,cn=(-Oe*Dt-(-3*vt+Ae*(1+3*ee))*Wt*(1-ue))/(Oe*Oe);return[v/4*(Ce*(-2*Ft*(.5*cn/Ue*(1-ee)-2*vt*Ue*Wt)+-Ft*Wt*it)+-Ft*(vt*(1+ee)*cn+Fe*(1+3*ee)*Wt)*E(Ce/C(We))),St]}(D?mt:xt,D?xt:mt),q=Y[0],te=Y[1],ve=b(te);return D&&(q=-g-q),[ot*(T(c(q)*ve,-c(te))+v),ft*E(b(q)*ve)]},An.invert=function(Xe,$e){var ot,ft,xt,mt,D,Y,Ne,qe,et,q=(m-1)/(m+1),te=C(1-q*q),ve=(ft=-Xe,xt=te*te,(ot=.5*Kt(g,te*te)-$e)?(mt=mr(ot,xt),ft?(Y=(D=mr(ft,1-xt))[1]*D[1]+xt*mt[0]*mt[0]*D[0]*D[0],[[mt[0]*D[2]/Y,mt[1]*mt[2]*D[0]*D[1]/Y],[mt[1]*D[1]/Y,-mt[0]*mt[2]*D[0]*D[2]/Y],[mt[2]*D[1]*D[2]/Y,-xt*mt[0]*mt[1]*D[0]/Y]]):[[mt[0],0],[mt[1],0],[mt[2],0]]):[[0,(D=mr(ft,1-xt))[0]/D[1]],[1/D[1],0],[D[2]/D[1],0]]),Ce=[((Ne=ve[0])[0]*(qe=ve[1])[0]+Ne[1]*qe[1])/(et=qe[0]*qe[0]+qe[1]*qe[1]),(Ne[1]*qe[0]-Ne[0]*qe[1])/et];return[T(Ce[1],Ce[0])/-1,2*l(d(-.5*t(q*Ce[0]*Ce[0]+q*Ce[1]*Ce[1])))-g]};var Zt=e(7613);function tn(Xe){var $e=c(Xe),ot=b(Xe),ft=En(Xe);function xt(mt,D){var Y=ft(mt,D);mt=Y[0];var q=c(D=Y[1]),te=b(D),ve=b(mt),Ce=L($e*q+ot*te*ve),Ne=c(Ce),qe=A(Ne)>f?Ce/Ne:1;return[qe*ot*c(mt),(A(mt)>g?qe:-qe)*($e*te-ot*q*ve)]}return ft.invert=En(-Xe),xt.invert=function(mt,D){var Y=C(mt*mt+D*D),q=-c(Y),te=b(Y),ve=Y*te,Ce=-D*q,Ne=Y*$e,qe=C(ve*ve+Ce*Ce-Ne*Ne),et=T(ve*Ne+Ce*qe,Ce*Ne-ve*qe),vt=(Y>g?-1:1)*T(mt*q,Y*b(et)*te+D*c(et)*q);return ft.invert(vt,et)},xt}function En(Xe){var $e=c(Xe),ot=b(Xe);return function(ft,xt){var mt=b(xt),D=b(ft)*mt,Y=c(ft)*mt,q=c(xt);return[T(Y,D*ot-q*$e),E(q*ot+D*$e)]}}function Mn(){var Xe=0,$e=(0,k.r)(tn),ot=$e(Xe),ft=ot.rotate,xt=ot.stream,mt=(0,Zt.Z)();return ot.parallel=function(D){if(!arguments.length)return Xe*S;var Y=ot.rotate();return $e(Xe=D*_).rotate(Y)},ot.rotate=function(D){return arguments.length?(ft.call(ot,[D[0],D[1]-Xe*S]),mt.center([-D[0],-D[1]]),ot):((D=ft.call(ot))[1]+=Xe*S,D)},ot.stream=function(D){return(D=xt(D)).sphere=function(){D.polygonStart();var Y,q=mt.radius(89.99)().coordinates[0],te=q.length-1,ve=-1;for(D.lineStart();++ve<te;)D.point((Y=q[ve])[0],Y[1]);for(D.lineEnd(),te=(q=mt.radius(90.01)().coordinates[0]).length-1,D.lineStart();--ve>=0;)D.point((Y=q[ve])[0],Y[1]);D.lineEnd(),D.polygonEnd()},D},ot.scale(79.4187).parallel(45).clipAngle(179.999)}var wn=e(33064),an=e(72736),vn=E(1-1/3)*S,sn=Ye(0);function fn(Xe){var $e=vn*_,ot=Ct(v,$e)[0]-Ct(-v,$e)[0],ft=sn(0,$e)[1],xt=Ct(0,$e)[1],mt=w-xt,D=u/Xe,Y=4/u,q=ft+mt*mt*4/u;function te(ve,Ce){var Ne,qe=A(Ce);if(qe>$e){var et=r(Xe-1,o(0,s((ve+v)/D)));(Ne=Ct(ve+=v*(Xe-1)/Xe-et*D,qe))[0]=Ne[0]*u/ot-u*(Xe-1)/(2*Xe)+et*u/Xe,Ne[1]=ft+4*(Ne[1]-xt)*mt/u,Ce<0&&(Ne[1]=-Ne[1])}else Ne=sn(ve,Ce);return Ne[0]*=Y,Ne[1]/=q,Ne}return te.invert=function(ve,Ce){ve/=Y;var Ne=A(Ce*=q);if(Ne>ft){var qe=r(Xe-1,o(0,s((ve+v)/D))),et=Ct.invert(ve=(ve+v*(Xe-1)/Xe-qe*D)*ot/u,.25*(Ne-ft)*u/mt+xt);return et[0]-=v*(Xe-1)/Xe-qe*D,Ce<0&&(et[1]=-et[1]),et}return sn.invert(ve,Ce)},te}function mn(Xe,$e){return[Xe,1&$e?89.999999:vn]}function Pn(Xe,$e){return[Xe,1&$e?-89.999999:-vn]}function qn(Xe){return[.999999*Xe[0],Xe[1]]}function Zn(){var Xe=4,$e=(0,k.r)(fn),ot=$e(Xe),ft=ot.stream;return ot.lobes=function(xt){return arguments.length?$e(Xe=+xt):Xe},ot.stream=function(xt){var mt=ot.rotate(),D=ft(xt),Y=(ot.rotate([0,0]),ft(xt));return ot.rotate(mt),D.sphere=function(){var q,te;(0,an.Z)((te=[].concat((0,wn.w6)(-180,180+(q=180/Xe)/2,q).map(mn),(0,wn.w6)(180,-180-q/2,-q).map(Pn)),{type:"Polygon",coordinates:[180===q?te.map(qn):te]}),Y)},D},ot.scale(239.75)}function Jn(Xe){var $e,ot=1+Xe,ft=E(c(1/ot)),xt=2*C(v/($e=v+4*ft*ot)),mt=.5*xt*(ot+C(Xe*(2+Xe))),D=Xe*Xe,Y=ot*ot;function q(te,ve){var Ce,Ne,qe=1-c(ve);if(qe&&qe<2){var et,vt=g-ve,yt=25;do{var ee=c(vt),ue=b(vt),Ae=ft+T(ee,ot-ue),Oe=1+Y-2*ot*ue;vt-=et=(vt-D*ft-ot*ee+Oe*Ae-.5*qe*$e)/(2*ot*ee*Ae)}while(A(et)>x&&--yt>0);Ce=xt*C(Oe),Ne=te*Ae/v}else Ce=xt*(Xe+qe),Ne=te*ft/v;return[Ce*c(Ne),mt-Ce*b(Ne)]}return q.invert=function(te,ve){var Ce=te*te+(ve-=mt)*ve,Ne=(1+Y-Ce/(xt*xt))/(2*ot),qe=L(Ne),et=c(qe),vt=ft+T(et,ot-Ne);return[E(te/C(Ce))*v/vt,E(1-2*(qe-D*ft-ot*et+(1+Y-2*ot*Ne)*vt)/$e)]},q}function rr(){var Xe=1,$e=(0,k.r)(Jn),ot=$e(Xe);return ot.ratio=function(ft){return arguments.length?$e(Xe=+ft):Xe},ot.scale(167.774).center([0,18.67])}var tr=.7109889596207567,sr=.0528035274542;function ar(Xe,$e){return $e>-tr?((Xe=ke(Xe,$e))[1]+=sr,Xe):Ie(Xe,$e)}function cr(){return(0,k.Z)(ar).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function br(Xe,$e){return A($e)>tr?((Xe=ke(Xe,$e))[1]-=$e>0?sr:-sr,Xe):Ie(Xe,$e)}function Ur(){return(0,k.Z)(br).scale(152.63)}function Sr(Xe,$e,ot,ft){var xt=C(4*v/(2*ot+(1+Xe-$e/2)*c(2*ot)+(Xe+$e)/2*c(4*ot)+$e/2*c(6*ot))),mt=C(ft*c(ot)*C((1+Xe*b(2*ot)+$e*b(4*ot))/(1+Xe+$e))),D=ot*q(1);function Y(Ce){return C(1+Xe*b(2*Ce)+$e*b(4*Ce))}function q(Ce){var Ne=Ce*ot;return(2*Ne+(1+Xe-$e/2)*c(2*Ne)+(Xe+$e)/2*c(4*Ne)+$e/2*c(6*Ne))/ot}function te(Ce){return Y(Ce)*c(Ce)}var ve=function(Ce,Ne){var qe=ot*ye(q,D*c(Ne)/ot,Ne/v);isNaN(qe)&&(qe=ot*i(Ne));var et=xt*Y(qe);return[et*mt*Ce/v*b(qe),et/mt*c(qe)]};return ve.invert=function(Ce,Ne){var qe=ye(te,Ne*mt/xt);return[Ce*v/(b(qe)*xt*mt*Y(qe)),E(ot*q(qe/ot)/D)]},0===ot&&(xt=C(ft/v),(ve=function(Ce,Ne){return[Ce*xt,c(Ne)/xt]}).invert=function(Ce,Ne){return[Ce/xt,E(Ne*xt)]}),ve}function fr(){var Xe=1,$e=0,ot=45*_,ft=2,xt=(0,k.r)(Sr),mt=xt(Xe,$e,ot,ft);return mt.a=function(D){return arguments.length?xt(Xe=+D,$e,ot,ft):Xe},mt.b=function(D){return arguments.length?xt(Xe,$e=+D,ot,ft):$e},mt.psiMax=function(D){return arguments.length?xt(Xe,$e,ot=+D*_,ft):ot*S},mt.ratio=function(D){return arguments.length?xt(Xe,$e,ot,ft=+D):ft},mt.scale(180.739)}function Lr(Xe,$e,ot,ft,xt,mt,D,Y,q,te,ve){if(ve.nanEncountered)return NaN;var Ce,Ne,qe,et,vt,yt,ee,ue,Ae,Oe;if(Ne=Xe($e+.25*(Ce=ot-$e)),qe=Xe(ot-.25*Ce),isNaN(Ne))ve.nanEncountered=!0;else{if(!isNaN(qe))return Oe=((yt=(et=Ce*(ft+4*Ne+xt)/12)+(vt=Ce*(xt+4*qe+mt)/12))-D)/15,te>q?(ve.maxDepthCount++,yt+Oe):Math.abs(Oe)<Y?yt+Oe:(ue=Lr(Xe,$e,ee=$e+.5*Ce,ft,Ne,xt,et,.5*Y,q,te+1,ve),isNaN(ue)?(ve.nanEncountered=!0,NaN):(Ae=Lr(Xe,ee,ot,xt,qe,mt,vt,.5*Y,q,te+1,ve),isNaN(Ae)?(ve.nanEncountered=!0,NaN):ue+Ae));ve.nanEncountered=!0}}function zr(Xe,$e,ot,ft,xt){void 0===ft&&(ft=1e-8),void 0===xt&&(xt=20);var mt=Xe($e),D=Xe(.5*($e+ot)),Y=Xe(ot);return Lr(Xe,$e,ot,mt,D,Y,(mt+4*D+Y)*(ot-$e)/6,ft,xt,1,{maxDepthCount:0,nanEncountered:!1})}function li(Xe,$e,ot){function ft(qe){return Xe+(1-Xe)*n(1-n(qe,$e),1/$e)}function xt(qe){return zr(ft,0,qe,1e-4)}for(var mt=1/xt(1),D=1e3,Y=1.00000001*mt,q=[],te=0;te<=D;te++)q.push(xt(te/D)*Y);function ve(qe){var et=0,vt=D,yt=500;do{q[yt]>qe?vt=yt:et=yt,yt=et+vt>>1}while(yt>et);var ee=q[yt+1]-q[yt];return ee&&(ee=(qe-q[yt+1])/ee),(yt+1+ee)/D}var Ce=2*ve(1)/v*mt/ot,Ne=function(qe,et){var vt=ve(A(c(et))),yt=ft(vt)*qe;return vt/=Ce,[yt,et>=0?vt:-vt]};return Ne.invert=function(qe,et){var vt;return A(et*=Ce)<1&&(vt=i(et)*E(xt(A(et))*mt)),[qe/ft(A(et)),vt]},Ne}function Mi(){var Xe=0,$e=2.5,ot=1.183136,ft=(0,k.r)(li),xt=ft(Xe,$e,ot);return xt.alpha=function(mt){return arguments.length?ft(Xe=+mt,$e,ot):Xe},xt.k=function(mt){return arguments.length?ft(Xe,$e=+mt,ot):$e},xt.gamma=function(mt){return arguments.length?ft(Xe,$e,ot=+mt):ot},xt.scale(152.63)}function Pi(Xe,$e){return A(Xe[0]-$e[0])<f&&A(Xe[1]-$e[1])<f}function Ea(Xe,$e){for(var ot,ft,xt,mt=-1,D=Xe.length,Y=Xe[0],q=[];++mt<D;){ft=((ot=Xe[mt])[0]-Y[0])/$e,xt=(ot[1]-Y[1])/$e;for(var te=0;te<$e;++te)q.push([Y[0]+te*ft,Y[1]+te*xt]);Y=ot}return q.push(ot),q}function vi(Xe,$e,ot){var ft,xt;function mt(q,te){for(var ve=te<0?-1:1,Ce=$e[+(te<0)],Ne=0,qe=Ce.length-1;Ne<qe&&q>Ce[Ne][2][0];++Ne);var et=Xe(q-Ce[Ne][1][0],te);return et[0]+=Xe(Ce[Ne][1][0],ve*te>ve*Ce[Ne][0][1]?Ce[Ne][0][1]:te)[0],et}ot?mt.invert=ot(mt):Xe.invert&&(mt.invert=function(q,te){for(var ve=xt[+(te<0)],Ce=$e[+(te<0)],Ne=0,qe=ve.length;Ne<qe;++Ne){var et=ve[Ne];if(et[0][0]<=q&&q<et[1][0]&&et[0][1]<=te&&te<et[1][1]){var vt=Xe.invert(q-Xe(Ce[Ne][1][0],0)[0],te);return vt[0]+=Ce[Ne][1][0],Pi(mt(vt[0],vt[1]),[q,te])?vt:null}}});var D=(0,k.Z)(mt),Y=D.stream;return D.stream=function(q){var te=D.rotate(),ve=Y(q),Ce=(D.rotate([0,0]),Y(q));return D.rotate(te),ve.sphere=function(){(0,an.Z)(ft,Ce)},ve},D.lobes=function(q){return arguments.length?(ft=function Ui(Xe){var $e,ot,xt,mt,Y,q=[],te=Xe[0].length;for(Y=0;Y<te;++Y)ot=($e=Xe[0][Y])[0][0],q.push(Ea([[ot+f,$e[0][1]+f],[ot+f,(xt=$e[1][1])-f],[(mt=$e[2][0])-f,xt-f],[mt-f,$e[2][1]+f]],30));for(Y=Xe[1].length-1;Y>=0;--Y)ot=($e=Xe[1][Y])[0][0],q.push(Ea([[(mt=$e[2][0])-f,$e[2][1]-f],[mt-f,(xt=$e[1][1])+f],[ot+f,xt+f],[ot+f,$e[0][1]-f]],30));return{type:"Polygon",coordinates:[(0,wn.TS)(q)]}}(q),$e=q.map(function(te){return te.map(function(ve){return[[ve[0][0]*_,ve[0][1]*_],[ve[1][0]*_,ve[1][1]*_],[ve[2][0]*_,ve[2][1]*_]]})}),xt=$e.map(function(te){return te.map(function(ve){var Ce,Ne=Xe(ve[0][0],ve[0][1])[0],qe=Xe(ve[2][0],ve[2][1])[0],et=Xe(ve[1][0],ve[0][1])[1],vt=Xe(ve[1][0],ve[1][1])[1];return et>vt&&(Ce=et,et=vt,vt=Ce),[[Ne,et],[qe,vt]]})}),D):$e.map(function(te){return te.map(function(ve){return[[ve[0][0]*S,ve[0][1]*S],[ve[1][0]*S,ve[1][1]*S],[ve[2][0]*S,ve[2][1]*S]]})})},null!=$e&&D.lobes($e),D}ar.invert=function(Xe,$e){return $e>-tr?ke.invert(Xe,$e-sr):Ie.invert(Xe,$e)},br.invert=function(Xe,$e){return A($e)>tr?ke.invert(Xe,$e+($e>0?sr:-sr)):Ie.invert(Xe,$e)};var La=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function to(){return vi(he,La).scale(160.857)}var qo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Go(){return vi(br,qo).scale(152.63)}var il=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Us(){return vi(ke,il).scale(169.529)}var Zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ta(){return vi(ke,Zo).scale(169.529).rotate([20,0])}var Vs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ri(){return vi(ar,Vs,se).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ss=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function ma(){return vi(Ie,ss).scale(152.63).rotate([-20,0])}function ka(Xe,$e){return[3/u*Xe*C(v*v/3-$e*$e),$e]}function vo(){return(0,k.Z)(ka).scale(158.837)}function Qr(Xe){function $e(ot,ft){if(A(A(ft)-g)<f)return[0,ft<0?-2:2];var xt=c(ft),mt=n((1+xt)/(1-xt),Xe/2),D=.5*(mt+1/mt)+b(ot*=Xe);return[2*c(ot)/D,(mt-1/mt)/D]}return $e.invert=function(ot,ft){var xt=A(ft);if(A(xt-2)<f)return ot?null:[0,i(ft)*g];if(xt>2)return null;var mt=(ot/=2)*ot,D=(ft/=2)*ft,Y=2*ft/(1+mt+D);return Y=n((1+Y)/(1-Y),1/Xe),[T(2*ot,1-mt-D)/Xe,E((Y-1)/(Y+1))]},$e}function mo(){var Xe=.5,$e=(0,k.r)(Qr),ot=$e(Xe);return ot.spacing=function(ft){return arguments.length?$e(Xe=+ft):Xe},ot.scale(124.75)}ka.invert=function(Xe,$e){return[u/3*Xe/C(v*v/3-$e*$e),$e]};var Ca=v/m;function Ua(Xe,$e){return[Xe*(1+C(b($e)))/2,$e/(b($e/2)*b(Xe/6))]}function Ya(){return(0,k.Z)(Ua).scale(97.2672)}function ls(Xe,$e){var ot=Xe*Xe,ft=$e*$e;return[Xe*(.975534+ft*(-.0143059*ot-.119161+-.0547009*ft)),$e*(1.00384+ot*(.0802894+-.02855*ft+199025e-9*ot)+ft*(.0998909+-.0491032*ft))]}function al(){return(0,k.Z)(ls).scale(139.98)}function no(Xe,$e){return[c(Xe)/b($e),h($e)*b(Xe)]}function ol(){return(0,k.Z)(no).scale(144.049).clipAngle(89.999)}function sl(Xe){var $e=b(Xe),ot=h(y+Xe/2);function ft(xt,mt){var D=mt-Xe,Y=A(D)<f?xt*$e:A(Y=y+mt/2)<f||A(A(Y)-g)<f?0:xt*D/t(h(Y)/ot);return[Y,D]}return ft.invert=function(xt,mt){var D,Y=mt+Xe;return[A(mt)<f?xt/$e:A(D=y+Y/2)<f||A(A(D)-g)<f?0:xt*t(h(D)/ot)/mt,Y]},ft}function ml(){return Me(sl).parallel(40).scale(158.837)}function Hs(Xe,$e){return[Xe,1.25*t(h(y+.4*$e))]}function ll(){return(0,k.Z)(Hs).scale(108.318)}function qs(Xe){var $e=Xe.length-1;function ot(ft,xt){for(var mt,D=b(xt),Y=2/(1+D*b(ft)),q=Y*D*c(ft),te=Y*c(xt),ve=$e,Ce=Xe[ve],Ne=Ce[0],qe=Ce[1];--ve>=0;)Ne=(Ce=Xe[ve])[0]+q*(mt=Ne)-te*qe,qe=Ce[1]+q*qe+te*mt;return[Ne=q*(mt=Ne)-te*qe,qe=q*qe+te*mt]}return ot.invert=function(ft,xt){var mt=20,D=ft,Y=xt;do{for(var q,te=$e,ve=Xe[te],Ce=ve[0],Ne=ve[1],qe=0,et=0;--te>=0;)qe=Ce+D*(q=qe)-Y*et,et=Ne+D*et+Y*q,Ce=(ve=Xe[te])[0]+D*(q=Ce)-Y*Ne,Ne=ve[1]+D*Ne+Y*q;var vt,yt,ee=(qe=Ce+D*(q=qe)-Y*et)*qe+(et=Ne+D*et+Y*q)*et;D-=vt=((Ce=D*(q=Ce)-Y*Ne-ft)*qe+(Ne=D*Ne+Y*q-xt)*et)/ee,Y-=yt=(Ne*qe-Ce*et)/ee}while(A(vt)+A(yt)>1e-12&&--mt>0);if(mt){var ue=C(D*D+Y*Y),Ae=2*l(.5*ue),Oe=c(Ae);return[T(D*Oe,ue*b(Ae)),ue?E(Y*Oe/ue):0]}},ot}Ua.invert=function(Xe,$e){var ot=A(Xe),ft=A($e),xt=f,mt=g;ft<Ca?mt*=ft/Ca:xt+=6*L(Ca/ft);for(var D=0;D<25;D++){var Y=c(mt),q=C(b(mt)),te=c(mt/2),ve=b(mt/2),Ce=c(xt/6),Ne=b(xt/6),qe=.5*xt*(1+q)-ot,et=mt/(ve*Ne)-ft,vt=q?-.25*xt*Y/q:0,yt=.5*(1+q),ee=(1+.5*mt*te/ve)/(ve*Ne),ue=mt/ve*(Ce/6)/(Ne*Ne),Ae=vt*ue-ee*yt,Oe=(qe*ue-et*yt)/Ae,Fe=(et*vt-qe*ee)/Ae;if(mt-=Oe,xt-=Fe,A(Oe)<f&&A(Fe)<f)break}return[Xe<0?-xt:xt,$e<0?-mt:mt]},ls.invert=function(Xe,$e){var ot=i(Xe)*v,ft=$e/2,xt=50;do{var mt=ot*ot,D=ft*ft,Y=ot*ft,q=ot*(.975534+D*(-.0143059*mt-.119161+-.0547009*D))-Xe,te=ft*(1.00384+mt*(.0802894+-.02855*D+199025e-9*mt)+D*(.0998909+-.0491032*D))-$e,ve=.975534-D*(.119161+3*mt*.0143059+.0547009*D),Ce=-Y*(.238322+.2188036*D+.0286118*mt),Ne=Y*(.1605788+7961e-7*mt+-.0571*D),qe=1.00384+mt*(.0802894+199025e-9*mt)+D*(3*(.0998909-.02855*mt)-.245516*D),et=Ce*Ne-qe*ve,vt=(te*Ce-q*qe)/et,yt=(q*Ne-te*ve)/et;ot-=vt,ft-=yt}while((A(vt)>f||A(yt)>f)&&--xt>0);return xt&&[ot,ft]},no.invert=function(Xe,$e){var ot=Xe*Xe,ft=$e*$e+1,xt=ot+ft,mt=Xe?p*C((xt-C(xt*xt-4*ot))/ot):1/C(ft);return[E(Xe*mt),i($e)*L(mt)]},Hs.invert=function(Xe,$e){return[Xe,2.5*l(d(.8*$e))-.625*v]};var ro=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],io=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Wo=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ao=[[.9245,0],[0,0],[.01943,0]],Gs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Zs(){return Po(ro,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Co(){return Po(io,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ms(){return Po(Wo,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function yo(){return Po(ao,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Yo(){return Po(Gs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Po(Xe,$e){var ot=(0,k.Z)(qs(Xe)).rotate($e).clipAngle(90),ft=(0,nt.Z)($e),xt=ot.center;return delete ot.rotate,ot.center=function(mt){return arguments.length?xt(ft(mt)):ft.invert(xt())},ot}var oo=C(6),ei=C(7);function xo(Xe,$e){var ot=E(7*c($e)/(3*oo));return[oo*Xe*(2*b(2*ot/3)-1)/ei,9*c(ot/3)/ei]}function yl(){return(0,k.Z)(xo).scale(164.859)}function Ss(Xe,$e){for(var ot,ft=(1+p)*c($e),xt=$e,mt=0;mt<25&&(xt-=ot=(c(xt/2)+c(xt)-ft)/(.5*b(xt/2)+b(xt)),!(A(ot)<f));mt++);return[Xe*(1+2*b(xt)/b(xt/2))/(3*m),2*C(3)*c(xt/2)/C(2+m)]}function us(){return(0,k.Z)(Ss).scale(188.209)}function Oo(Xe,$e){for(var ot,ft=C(6/(4+v)),xt=(1+v/4)*c($e),mt=$e/2,D=0;D<25&&(mt-=ot=(mt/2+c(mt)-xt)/(.5+b(mt)),!(A(ot)<f));D++);return[ft*(.5+b(mt))*Xe/1.5,ft*mt]}function Xo(){return(0,k.Z)(Oo).scale(166.518)}xo.invert=function(Xe,$e){var ot=3*E($e*ei/9);return[Xe*ei/(oo*(2*b(2*ot/3)-1)),E(3*c(ot)*oo/7)]},Ss.invert=function(Xe,$e){var ot=$e*C(2+m)/(2*C(3)),ft=2*E(ot);return[3*m*Xe/(1+2*b(ft)/b(ft/2)),E((ot+c(ft))/(1+p))]},Oo.invert=function(Xe,$e){var ot=C(6/(4+v)),ft=$e/ot;return A(A(ft)-g)<f&&(ft=ft<0?-g:g),[1.5*Xe/(ot*(.5+b(ft))),E((ft/2+c(ft))/(1+v/4))]};var Pa=e(26867);function Ws(Xe,$e){var ot=$e*$e,ft=ot*ot,xt=ot*ft;return[Xe*(.84719-.13063*ot+xt*xt*(.05494*ot-.04515-.02326*ft+.00331*xt)),$e*(1.01183+ft*ft*(.01926*ot-.02625-.00396*ft))]}function cs(){return(0,k.Z)(Ws).scale(175.295)}function Jo(Xe,$e){return[Xe*(1+b($e))/2,2*($e-h($e/2))]}function fs(){return(0,k.Z)(Jo).scale(152.63)}Ws.invert=function(Xe,$e){var ot,ft,xt,mt,D=$e,Y=25;do{D-=ot=(D*(1.01183+(xt=(ft=D*D)*ft)*xt*(.01926*ft-.02625-.00396*xt))-$e)/(1.01183+xt*xt*(.21186*ft-.23625+-.05148*xt))}while(A(ot)>x&&--Y>0);return[Xe/(.84719-.13063*(ft=D*D)+(mt=ft*(xt=ft*ft))*mt*(.05494*ft-.04515-.02326*xt+.00331*mt)),D]},Jo.invert=function(Xe,$e){for(var ot=$e/2,ft=0,xt=1/0;ft<10&&A(xt)>f;++ft){var mt=b($e/2);$e-=xt=($e-h($e/2)-ot)/(1-.5/(mt*mt))}return[2*Xe/(1+b($e)),$e]};var Io=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function zo(){return vi(le(1/0),Io).rotate([20,0]).scale(152.63)}function Ko(Xe,$e){var ot=c($e),ft=b($e),xt=i(Xe);if(0===Xe||A($e)===g)return[0,$e];if(0===$e)return[Xe,0];if(A(Xe)===g)return[Xe*ft,g*ot];var mt=v/(2*Xe)-2*Xe/v,D=2*$e/v,Y=(1-D*D)/(ot-D),q=mt*mt,te=Y*Y,ve=1+q/te,Ce=1+te/q,Ne=(mt*ot/Y-mt/2)/ve,qe=(te*ot/q+Y/2)/Ce,et=qe*qe-(te*ot*ot/q+Y*ot-1)/Ce;return[g*(Ne+C(Ne*Ne+ft*ft/ve)*xt),g*(qe+C(et<0?0:et)*i(-$e*mt)*xt)]}function hs(){return(0,k.Z)(Ko).scale(127.267)}Ko.invert=function(Xe,$e){var ot=(Xe/=g)*Xe,ft=ot+($e/=g)*$e,xt=v*v;return[Xe?(ft-1+C((1-ft)*(1-ft)+4*ot))/(2*Xe)*g:0,ye(function(mt){return ft*(v*c(mt)-2*mt)*v+4*mt*mt*($e-c(mt))+2*v*mt-xt*$e},0)]};var ps=1.0148,Oa=.23185,ds=-.14499,gs=.02406,Ys=1.790857183;function bo(Xe,$e){var ot=$e*$e;return[Xe,$e*(ps+ot*ot*(Oa+ot*(ds+gs*ot)))]}function Es(){return(0,k.Z)(bo).scale(139.319)}function vs(Xe,$e){if(A($e)<f)return[Xe,0];var ot=h($e),ft=Xe*c($e);return[c(ft)/ot,$e+(1-b(ft))/ot]}function Xs(){return(0,k.Z)(vs).scale(103.74)}bo.invert=function(Xe,$e){$e>Ys?$e=Ys:$e<-1.790857183&&($e=-1.790857183);var ot,ft=$e;do{var xt=ft*ft;ft-=ot=(ft*(ps+xt*xt*(Oa+xt*(ds+gs*xt)))-$e)/(1.0148+xt*xt*(1.1592500000000001+xt*(.21654*xt-1.01493)))}while(A(ot)>f);return[Xe,ft]},vs.invert=function(Xe,$e){if(A($e)<f)return[Xe,0];var ot,ft=Xe*Xe+$e*$e,xt=.5*$e,mt=10;do{var D=h(xt),Y=1/b(xt),q=ft-2*$e*xt+xt*xt;xt-=ot=(D*q+2*(xt-$e))/(2+q*Y*Y+2*(xt-$e)*D)}while(A(ot)>f&&--mt>0);return D=h(xt),[(A($e)<A(xt+1/D)?E(Xe*D):i($e)*i(Xe)*(L(A(Xe*D))+g))/c(xt),xt]};var ms=e(77338),$o=e(83074);function Ro(Xe,$e){return[Xe[0]*$e[0]+Xe[1]*$e[3],Xe[0]*$e[1]+Xe[1]*$e[4],Xe[0]*$e[2]+Xe[1]*$e[5]+Xe[2],Xe[3]*$e[0]+Xe[4]*$e[3],Xe[3]*$e[1]+Xe[4]*$e[4],Xe[3]*$e[2]+Xe[4]*$e[5]+Xe[5]]}function Do(Xe,$e){return[Xe[0]-$e[0],Xe[1]-$e[1]]}function ai(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function _o(Xe,$e,ot){function ft(Y,q){var te,ve=$e(Y,q),Ce=ve.project([Y*S,q*S]);return(te=ve.transform)?[te[0]*Ce[0]+te[1]*Ce[1]+te[2],-(te[3]*Ce[0]+te[4]*Ce[1]+te[5])]:(Ce[1]=-Ce[1],Ce)}function xt(Y,q){var yt,ee,te=Y.project.invert,ve=Y.transform,Ce=q;if(ve&&(Ce=[(ve=[(ee=1/((yt=ve)[0]*yt[4]-yt[1]*yt[3]))*yt[4],-ee*yt[1],ee*(yt[1]*yt[5]-yt[2]*yt[4]),-ee*yt[3],ee*yt[0],ee*(yt[2]*yt[3]-yt[0]*yt[5])])[0]*Ce[0]+ve[1]*Ce[1]+ve[2],ve[3]*Ce[0]+ve[4]*Ce[1]+ve[5]]),te&&Y===function(yt){return $e(yt[0]*_,yt[1]*_)}(Ne=te(Ce)))return Ne;for(var Ne,qe=Y.children,et=0,vt=qe&&qe.length;et<vt;++et)if(Ne=xt(qe[et],q))return Ne}(function Y(q,te){if(q.edges=function(Fe){for(var Ue=Fe.length,We=[],Je=Fe[Ue-1],it=0;it<Ue;++it)We.push([Je,Je=Fe[it]]);return We}(q.face),te.face){var ve=q.shared=function(Fe,Ue){for(var We,Je,it=Fe.length,ut=null,St=0;St<it;++St){We=Fe[St];for(var Dt=Ue.length;--Dt>=0;)if(We[0]===(Je=Ue[Dt])[0]&&We[1]===Je[1]){if(ut)return[ut,We];ut=We}}}(q.face,te.face),Ce=(vt=ve.map(te.project),yt=ve.map(q.project),ee=Do(vt[1],vt[0]),ue=Do(yt[1],yt[0]),Ae=T((Fe=ee)[0]*(Ue=ue)[1]-Fe[1]*Ue[0],Fe[0]*Ue[0]+Fe[1]*Ue[1]),Oe=ai(ee)/ai(ue),Ro([1,0,vt[0][0],0,1,vt[0][1]],Ro([Oe,0,0,0,Oe,0],Ro([b(Ae),c(Ae),0,-c(Ae),b(Ae),0],[1,0,-yt[0][0],0,1,-yt[0][1]]))));q.transform=te.transform?Ro(te.transform,Ce):Ce;for(var Ne=te.edges,qe=0,et=Ne.length;qe<et;++qe)Zi(ve[0],Ne[qe][1])&&Zi(ve[1],Ne[qe][0])&&(Ne[qe]=q),Zi(ve[0],Ne[qe][0])&&Zi(ve[1],Ne[qe][1])&&(Ne[qe]=q);for(qe=0,et=(Ne=q.edges).length;qe<et;++qe)Zi(ve[0],Ne[qe][0])&&Zi(ve[1],Ne[qe][1])&&(Ne[qe]=te),Zi(ve[0],Ne[qe][1])&&Zi(ve[1],Ne[qe][0])&&(Ne[qe]=te)}else q.transform=te.transform;var Fe,Ue,vt,yt,ee,ue,Ae,Oe;return q.children&&q.children.forEach(function(Fe){Y(Fe,q)}),q})(Xe,{transform:null}),Xr(Xe)&&(ft.invert=function(Y,q){var te=xt(Xe,[Y,-q]);return te&&(te[0]*=_,te[1]*=_,te)});var mt=(0,k.Z)(ft),D=mt.stream;return mt.stream=function(Y){var q=mt.rotate(),te=D(Y),ve=(mt.rotate([0,0]),D(Y));return mt.rotate(q),te.sphere=function(){ve.polygonStart(),ve.lineStart(),wo(ve,Xe),ve.lineEnd(),ve.polygonEnd()},te},mt.angle(null==ot?-30:ot*S)}function wo(Xe,$e,ot){var ft,xt,mt=$e.edges,D=mt.length,Y={type:"MultiPoint",coordinates:$e.face},q=$e.face.filter(function(vt){return 90!==A(vt[1])}),te=(0,ms.Z)({type:"MultiPoint",coordinates:q}),ve=!1,Ce=-1,Ne=te[1][0]-te[0][0],qe=180===Ne||360===Ne?[(te[0][0]+te[1][0])/2,(te[0][1]+te[1][1])/2]:(0,Ve.Z)(Y);if(ot)for(;++Ce<D&&mt[Ce]!==ot;);++Ce;for(var et=0;et<D;++et)xt=mt[(et+Ce)%D],Array.isArray(xt)?(ve||(Xe.point((ft=(0,$o.Z)(xt[0],qe)(f))[0],ft[1]),ve=!0),Xe.point((ft=(0,$o.Z)(xt[1],qe)(f))[0],ft[1])):(ve=!1,xt!==ot&&wo(Xe,xt,$e))}function Zi(Xe,$e){return Xe&&$e&&Xe[0]===$e[0]&&Xe[1]===$e[1]}function Xr(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Xr)}var Kr=e(98936),so=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Xa=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function($e){return so[$e]})});function Ls(Xe){Xe=Xe||function(ot){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:ot});return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-ft[0],-ft[1]])};var $e=Xa.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,ft){var xt=$e[ot];xt&&(xt.children||(xt.children=[])).push($e[ft])}),_o($e[0],function(ot,ft){return $e[ot<-v/2?ft<0?6:4:ot<0?ft<0?2:0:ot<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Js=2/C(3);function Fo(Xe,$e){var ot=Ct(Xe,$e);return[ot[0]*Js,ot[1]]}function Ks(Xe){Xe=Xe||function(ot){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:ot});return(0,k.Z)(Fo).translate([0,0]).scale(1).rotate(ft[1]>0?[-ft[0],0]:[180-ft[0],180])};var $e=Xa.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,ft){var xt=$e[ot];xt&&(xt.children||(xt.children=[])).push($e[ft])}),_o($e[0],function(ot,ft){return $e[ot<-v/2?ft<0?6:4:ot<0?ft<0?2:0:ot<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Bo(Xe){Xe=Xe||function(mt){var D=6===mt.length?(0,Ve.Z)({type:"MultiPoint",coordinates:mt}):mt[0];return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-D[0],-D[1]])};var $e=Xa.map(function(mt){for(var D,Y=mt.map(mi),q=Y.length,te=Y[q-1],ve=[],Ce=0;Ce<q;++Ce)ve.push(No([.9486832980505138*te[0]+.31622776601683794*(D=Y[Ce])[0],.9486832980505138*te[1]+.31622776601683794*D[1],.9486832980505138*te[2]+.31622776601683794*D[2]]),No([.9486832980505138*D[0]+.31622776601683794*te[0],.9486832980505138*D[1]+.31622776601683794*te[1],.9486832980505138*D[2]+.31622776601683794*te[2]])),te=D;return ve}),ot=[],ft=[-1,0,0,1,0,1,4,5];$e.forEach(function(mt,D){for(var Y,q,te=Xa[D],ve=te.length,Ce=ot[D]=[],Ne=0;Ne<ve;++Ne)$e.push([te[Ne],mt[(2*Ne+2)%(2*ve)],mt[(2*Ne+1)%(2*ve)]]),ft.push(D),Ce.push((Y=mi(mt[(2*Ne+2)%(2*ve)]),q=mi(mt[(2*Ne+1)%(2*ve)]),[Y[1]*q[2]-Y[2]*q[1],Y[2]*q[0]-Y[0]*q[2],Y[0]*q[1]-Y[1]*q[0]]))});var xt=$e.map(function(mt){return{project:Xe(mt),face:mt}});return ft.forEach(function(mt,D){var Y=xt[mt];Y&&(Y.children||(Y.children=[])).push(xt[D])}),_o(xt[0],function(mt,D){var Y=b(D),q=[Y*b(mt),Y*c(mt),c(D)],te=mt<-v/2?D<0?6:4:mt<0?D<0?2:0:mt<v/2?D<0?3:1:D<0?7:5,ve=ot[te];return xt[lo(ve[0],q)<0?8+3*te:lo(ve[1],q)<0?8+3*te+1:lo(ve[2],q)<0?8+3*te+2:te]}).angle(-30).scale(110.625).center([0,45])}function lo(Xe,$e){for(var ot=0,ft=Xe.length,xt=0;ot<ft;++ot)xt+=Xe[ot]*$e[ot];return xt}function No(Xe){return[T(Xe[1],Xe[0])*S,E(o(-1,r(1,Xe[2])))*S]}function mi(Xe){var $e=Xe[0]*_,ot=Xe[1]*_,ft=b(ot);return[ft*b($e),ft*c($e),c(ot)]}function Ja(){}function jo(Xe,$e){var ot,ft=$e.stream;if(!ft)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":ot=Wi;break;case"FeatureCollection":ot=Ii;break;default:ot=Yi}return ot(Xe,ft)}function Ii(Xe,$e){return{type:"FeatureCollection",features:Xe.features.map(function(ot){return Wi(ot,$e)})}}function Wi(Xe,$e){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Yi(Xe.geometry,$e)}}function Yi(Xe,$e){if(!Xe)return null;if("GeometryCollection"===Xe.type)return xt=$e,{type:"GeometryCollection",geometries:Xe.geometries.map(function(mt){return Yi(mt,xt)})};var xt,ot;switch(Xe.type){case"Point":case"MultiPoint":ot=To;break;case"LineString":case"MultiLineString":ot=Ia;break;case"Polygon":case"MultiPolygon":case"Sphere":ot=Di;break;default:return null}return(0,an.Z)(Xe,$e(ot)),ot.result()}Fo.invert=function(Xe,$e){return Ct.invert(Xe/Js,$e)};var qi=[],sa=[],To={point:function(Xe,$e){qi.push([Xe,$e])},result:function(){var Xe=qi.length?qi.length<2?{type:"Point",coordinates:qi[0]}:{type:"MultiPoint",coordinates:qi}:null;return qi=[],Xe}},Ia={lineStart:Ja,point:function(Xe,$e){qi.push([Xe,$e])},lineEnd:function(){qi.length&&(sa.push(qi),qi=[])},result:function(){var Xe=sa.length?sa.length<2?{type:"LineString",coordinates:sa[0]}:{type:"MultiLineString",coordinates:sa}:null;return sa=[],Xe}},Di={polygonStart:Ja,lineStart:Ja,point:function(Xe,$e){qi.push([Xe,$e])},lineEnd:function(){var Xe=qi.length;if(Xe){do{qi.push(qi[0].slice())}while(++Xe<4);sa.push(qi),qi=[]}},polygonEnd:Ja,result:function(){if(!sa.length)return null;var Xe=[],$e=[];return sa.forEach(function(ot){!function(ft){if((xt=ft.length)<4)return!1;for(var xt,mt=0,D=ft[xt-1][1]*ft[0][0]-ft[xt-1][0]*ft[0][1];++mt<xt;)D+=ft[mt-1][1]*ft[mt][0]-ft[mt-1][0]*ft[mt][1];return D<=0}(ot)?$e.push(ot):Xe.push([ot])}),$e.forEach(function(ot){var ft=ot[0];Xe.some(function(xt){if(function(mt,D){for(var Y=D[0],q=D[1],te=!1,ve=0,Ce=mt.length,Ne=Ce-1;ve<Ce;Ne=ve++){var qe=mt[ve],et=qe[0],vt=qe[1],yt=mt[Ne],ue=yt[1];vt>q^ue>q&&Y<(yt[0]-et)*(q-vt)/(ue-vt)+et&&(te=!te)}return te}(xt[0],ft))return xt.push(ot),!0})||Xe.push([ot])}),sa=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function ya(Xe){var $e=Xe(g,0)[0]-Xe(-g,0)[0];function ot(ft,xt){var mt=A(ft)<g,D=Xe(mt?ft:ft>0?ft-v:ft+v,xt),Y=(D[0]-D[1])*p,q=(D[0]+D[1])*p;if(mt)return[Y,q];var te=$e*p,ve=Y>0^q>0?-1:1;return[ve*Y-i(q)*te,ve*q-i(Y)*te]}return Xe.invert&&(ot.invert=function(ft,xt){var mt=(ft+xt)*p,D=(xt-ft)*p,Y=A(mt)<.5*$e&&A(D)<.5*$e;if(!Y){var q=$e*p,te=mt>0^D>0?-1:1,ve=-te*ft+(D>0?1:-1)*q,Ce=-te*xt+(mt>0?1:-1)*q;mt=(-ve-Ce)*p,D=(ve-Ce)*p}var Ne=Xe.invert(mt,D);return Y||(Ne[0]+=mt>0?v:-v),Ne}),(0,k.Z)(ot).rotate([-90,-90,45]).clipAngle(179.999)}function Cs(){return ya(Hn).scale(176.423)}function Ps(){return ya(An).scale(111.48)}function ia(Xe,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function ot(te){var ve=te.length,Ce=2,Ne=new Array(ve);for(Ne[0]=+te[0].toFixed($e),Ne[1]=+te[1].toFixed($e);Ce<ve;)Ne[Ce]=te[Ce],++Ce;return Ne}function ft(te){return te.map(ot)}function xt(te){for(var ve=ot(te[0]),Ce=[ve],Ne=1;Ne<te.length;Ne++){var qe=ot(te[Ne]);(qe.length>2||qe[0]!=ve[0]||qe[1]!=ve[1])&&(Ce.push(qe),ve=qe)}return 1===Ce.length&&te.length>1&&Ce.push(ot(te[te.length-1])),Ce}function mt(te){return te.map(xt)}function D(te){if(null==te)return te;var ve;switch(te.type){case"GeometryCollection":ve={type:"GeometryCollection",geometries:te.geometries.map(D)};break;case"Point":ve={type:"Point",coordinates:ot(te.coordinates)};break;case"MultiPoint":ve={type:te.type,coordinates:ft(te.coordinates)};break;case"LineString":ve={type:te.type,coordinates:xt(te.coordinates)};break;case"MultiLineString":case"Polygon":ve={type:te.type,coordinates:mt(te.coordinates)};break;case"MultiPolygon":ve={type:"MultiPolygon",coordinates:te.coordinates.map(mt)};break;default:return te}return null!=te.bbox&&(ve.bbox=te.bbox),ve}function Y(te){var ve={type:"Feature",properties:te.properties,geometry:D(te.geometry)};return null!=te.id&&(ve.id=te.id),null!=te.bbox&&(ve.bbox=te.bbox),ve}if(null!=Xe)switch(Xe.type){case"Feature":return Y(Xe);case"FeatureCollection":var q={type:"FeatureCollection",features:Xe.features.map(Y)};return null!=Xe.bbox&&(q.bbox=Xe.bbox),q;default:return D(Xe)}return Xe}function _r(Xe){var $e=c(Xe);function ot(ft,xt){var mt=$e?h(ft*$e/2)/$e:ft/2;if(!xt)return[2*mt,-Xe];var D=2*l(mt*c(xt)),Y=1/h(xt);return[c(D)*Y,xt+(1-b(D))*Y-Xe]}return ot.invert=function(ft,xt){if(A(xt+=Xe)<f)return[$e?2*l($e*ft/2)/$e:ft,0];var mt,D=ft*ft+xt*xt,Y=0,q=10;do{var te=h(Y),ve=1/b(Y),Ce=D-2*xt*Y+Y*Y;Y-=mt=(te*Ce+2*(Y-xt))/(2+Ce*ve*ve+2*(Y-xt)*te)}while(A(mt)>f&&--q>0);var Ne=ft*(te=h(Y)),qe=h(A(xt)<A(Y+1/te)?.5*E(Ne):.5*L(Ne)+v/4)/c(Y);return[$e?2*l($e*qe)/$e:2*qe,Y]},ot}function Uo(){return Me(_r).scale(131.215)}var la=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Os(Xe,$e){var ot,ft=r(18,36*A($e)/v),xt=s(ft),mt=ft-xt,D=(ot=la[xt])[0],Y=ot[1],q=(ot=la[++xt])[0],te=ot[1],ve=(ot=la[r(19,++xt)])[0],Ce=ot[1];return[Xe*(q+mt*(ve-D)/2+mt*mt*(ve-2*q+D)/2),($e>0?g:-g)*(te+mt*(Ce-Y)/2+mt*mt*(Ce-2*te+Y)/2)]}function Qo(){return(0,k.Z)(Os).scale(152.63)}function es(Xe,$e){var ot=function(D){function Y(q,te){var ve=b(te),Ce=(D-1)/(D-ve*b(q));return[Ce*ve*c(q),Ce*c(te)]}return Y.invert=function(q,te){var ve=q*q+te*te,Ce=C(ve),Ne=(D-C(1-ve*(D+1)/(D-1)))/((D-1)/Ce+Ce/(D-1));return[T(q*Ne,Ce*C(1-Ne*Ne)),Ce?E(te*Ne/Ce):0]},Y}(Xe);if(!$e)return ot;var ft=b($e),xt=c($e);function mt(D,Y){var q=ot(D,Y),te=q[1],ve=te*xt/(Xe-1)+ft;return[q[0]*ft/ve,te/ve]}return mt.invert=function(D,Y){var q=(Xe-1)/(Xe-1-Y*xt);return ot.invert(q*D,q*Y*ft)},mt}function ts(){var Xe=2,$e=0,ot=(0,k.r)(es),ft=ot(Xe,$e);return ft.distance=function(xt){return arguments.length?ot(Xe=+xt,$e):Xe},ft.tilt=function(xt){return arguments.length?ot(Xe,$e=xt*_):$e*S},ft.scale(432.147).clipAngle(L(1/Xe)*S-1e-6)}la.forEach(function(Xe){Xe[1]*=1.0144}),Os.invert=function(Xe,$e){var ot=$e/g,ft=90*ot,xt=r(18,A(ft/5)),mt=o(0,s(xt));do{var D=la[mt][1],Y=la[mt+1][1],q=la[r(19,mt+2)][1],te=q-D,ve=q-2*Y+D,Ce=2*(A(ot)-Y)/te,Ne=ve/te,qe=Ce*(1-Ne*Ce*(1-2*Ne*Ce));if(qe>=0||1===mt){ft=($e>=0?5:-5)*(qe+xt);var et,vt=50;do{qe=(xt=r(18,A(ft)/5))-(mt=s(xt)),D=la[mt][1],Y=la[mt+1][1],q=la[r(19,mt+2)][1],ft-=(et=($e>=0?g:-g)*(Y+qe*(q-D)/2+qe*qe*(q-2*Y+D)/2)-$e)*S}while(A(et)>x&&--vt>0);break}}while(--mt>=0);var yt=la[mt][0],ee=la[mt+1][0],ue=la[r(19,mt+2)][0];return[Xe/(ee+qe*(ue-yt)/2+qe*qe*(ue-2*ee+yt)/2),ft*_]};var wr=-179.9999,ns=179.9999,za=-89.9999,Is=89.9999;function ys(Xe){return Xe.length>0}function Xi(Xe){return-90===Xe||90===Xe?[0,Xe]:[-180,($e=Xe,Math.floor(1e4*$e)/1e4)];var $e}function Vo(Xe){var $e=Xe[0],ot=Xe[1],ft=!1;return $e<=wr?($e=-180,ft=!0):$e>=ns&&($e=180,ft=!0),ot<=za?(ot=-90,ft=!0):ot>=Is&&(ot=90,ft=!0),ft?[$e,ot]:Xe}function uo(Xe){return Xe.map(Vo)}function xa(Xe,$e,ot){for(var ft=0,xt=Xe.length;ft<xt;++ft){var mt=Xe[ft].slice();ot.push({index:-1,polygon:$e,ring:mt});for(var D=0,Y=mt.length;D<Y;++D){var q=mt[D],te=q[0],ve=q[1];if(te<=wr||te>=ns||ve<=za||ve>=Is){mt[D]=Vo(q);for(var Ce=D+1;Ce<Y;++Ce){var Ne=mt[Ce],qe=Ne[0],et=Ne[1];if(qe>wr&&qe<ns&&et>za&&et<Is)break}if(Ce===D+1)continue;if(D){var vt={index:-1,polygon:$e,ring:mt.slice(0,D+1)};vt.ring[vt.ring.length-1]=Xi(ve),ot[ot.length-1]=vt}else ot.pop();if(Ce>=Y)break;ot.push({index:-1,polygon:$e,ring:mt=mt.slice(Ce-1)}),mt[0]=Xi(mt[0][1]),D=-1,Y=mt.length}}}}function ko(Xe){var $e,ot,ft,xt,mt,D,Y=Xe.length,q={},te={};for($e=0;$e<Y;++$e)(ft=(ot=Xe[$e]).ring[0])[0]!==(mt=ot.ring[ot.ring.length-1])[0]||ft[1]!==mt[1]?(ot.index=$e,q[ft]=te[mt]=ot):(ot.polygon.push(ot.ring),Xe[$e]=null);for($e=0;$e<Y;++$e)if(ot=Xe[$e]){if(xt=te[ft=ot.ring[0]],D=q[mt=ot.ring[ot.ring.length-1]],delete q[ft],delete te[mt],ft[0]===mt[0]&&ft[1]===mt[1]){ot.polygon.push(ot.ring);continue}xt?(delete te[ft],delete q[xt.ring[0]],xt.ring.pop(),Xe[xt.index]=null,ot={index:-1,polygon:xt.polygon,ring:xt.ring.concat(ot.ring)},xt===D?ot.polygon.push(ot.ring):(ot.index=Y++,Xe.push(q[ot.ring[0]]=te[ot.ring[ot.ring.length-1]]=ot))):D?(delete q[mt],delete te[D.ring[D.ring.length-1]],ot.ring.pop(),ot={index:Y++,polygon:D.polygon,ring:ot.ring.concat(D.ring)},Xe[D.index]=null,Xe.push(q[ot.ring[0]]=te[ot.ring[ot.ring.length-1]]=ot)):(ot.ring.push(ot.ring[0]),ot.polygon.push(ot.ring))}}function Va(Xe){var $e={type:"Feature",geometry:Ra(Xe.geometry)};return null!=Xe.id&&($e.id=Xe.id),null!=Xe.bbox&&($e.bbox=Xe.bbox),null!=Xe.properties&&($e.properties=Xe.properties),$e}function Ra(Xe){if(null==Xe)return Xe;var $e,ot,ft,xt;switch(Xe.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Xe.geometries.map(Ra)};break;case"Point":$e={type:"Point",coordinates:Vo(Xe.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Xe.type,coordinates:uo(Xe.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Xe.coordinates.map(uo)};break;case"Polygon":var mt=[];xa(Xe.coordinates,mt,ot=[]),ko(ot),$e={type:"Polygon",coordinates:mt};break;case"MultiPolygon":ot=[],ft=-1,xt=Xe.coordinates.length;for(var D=new Array(xt);++ft<xt;)xa(Xe.coordinates[ft],D[ft]=[],ot);ko(ot),$e={type:"MultiPolygon",coordinates:D.filter(ys)};break;default:return Xe}return null!=Xe.bbox&&($e.bbox=Xe.bbox),$e}function Ho(Xe){if(null==Xe)return Xe;switch(Xe.type){case"Feature":return Va(Xe);case"FeatureCollection":var $e={type:"FeatureCollection",features:Xe.features.map(Va)};return null!=Xe.bbox&&($e.bbox=Xe.bbox),$e;default:return Ra(Xe)}}function Ji(Xe,$e){var ot=h($e/2),ft=c(y*ot);return[Xe*(.74482-.34588*ft*ft),1.70711*ot]}function Da(){return(0,k.Z)(Ji).scale(146.153)}function ri(Xe,$e,ot){var ft=(0,$o.Z)($e,ot),xt=ft(.5),mt=(0,nt.Z)([-xt[0],-xt[1]])($e),D=ft.distance/2,Y=-E(c(mt[1]*_)/c(D)),q=[-xt[0],-xt[1],-(mt[0]>0?v-Y:Y)*S],te=(0,k.Z)(Xe(D)).rotate(q),ve=(0,nt.Z)(q),Ce=te.center;return delete te.rotate,te.center=function(Ne){return arguments.length?Ce(ve(Ne)):ve.invert(Ce())},te.clipAngle(90)}function xs(Xe){var $e=b(Xe);function ot(ft,xt){var mt=(0,Kr.M)(ft,xt);return mt[0]*=$e,mt}return ot.invert=function(ft,xt){return Kr.M.invert(ft/$e,xt)},ot}function Aa(){return Fa([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Fa(Xe,$e){return ri(xs,Xe,$e)}function Ka(Xe){if(!(Xe*=2))return K.N;var $e=-Xe/2,ot=-$e,ft=Xe*Xe,xt=h(ot),mt=.5/c(ot);function D(Y,q){var te=L(b(q)*b(Y-$e)),ve=L(b(q)*b(Y-ot));return[((te*=te)-(ve*=ve))/(2*Xe),(q<0?-1:1)*C(4*ft*ve-(ft-te+ve)*(ft-te+ve))/(2*Xe)]}return D.invert=function(Y,q){var te,ve,Ce=q*q,Ne=b(C(Ce+(te=Y+$e)*te)),qe=b(C(Ce+(te=Y+ot)*te));return[T(ve=Ne-qe,te=(Ne+qe)*xt),(q<0?-1:1)*L(C(te*te+ve*ve)*mt)]},D}function ua(){return ni([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ni(Xe,$e){return ri(Ka,Xe,$e)}function Vi(Xe,$e){if(A($e)<f)return[Xe,0];var ot=A($e/g),ft=E(ot);if(A(Xe)<f||A(A($e)-g)<f)return[0,i($e)*v*h(ft/2)];var xt=b(ft),mt=A(v/Xe-Xe/v)/2,D=mt*mt,Y=xt/(ot+xt-1),q=Y*(2/ot-1),te=q*q,ve=te+D,Ce=Y-te,Ne=D+Y;return[i(Xe)*v*(mt*Ce+C(D*Ce*Ce-ve*(Y*Y-te)))/ve,i($e)*v*(q*Ne-mt*C((D+1)*ve-Ne*Ne))/ve]}function Ha(){return(0,k.Z)(Vi).scale(79.4183)}function ca(Xe,$e){if(A($e)<f)return[Xe,0];var ot=A($e/g),ft=E(ot);if(A(Xe)<f||A(A($e)-g)<f)return[0,i($e)*v*h(ft/2)];var xt=b(ft),mt=A(v/Xe-Xe/v)/2,D=mt*mt,Y=xt*(C(1+D)-mt*xt)/(1+D*ot*ot);return[i(Xe)*v*Y,i($e)*v*C(1-Y*(2*mt+Y))]}function $a(){return(0,k.Z)(ca).scale(79.4183)}function Ao(Xe,$e){if(A($e)<f)return[Xe,0];var ot=$e/g,ft=E(ot);if(A(Xe)<f||A(A($e)-g)<f)return[0,v*h(ft/2)];var xt=(v/Xe-Xe/v)/2,mt=ot/(1+b(ft));return[v*(i(Xe)*C(xt*xt+1-mt*mt)-xt),v*mt]}function co(){return(0,k.Z)(Ao).scale(79.4183)}function Ki(Xe,$e){if(!$e)return[Xe,0];var ot=A($e);if(!Xe||ot===g)return[0,$e];var ft=ot/g,xt=ft*ft,mt=(8*ft-xt*(xt+2)-5)/(2*xt*(ft-1)),D=mt*mt,Y=ft*mt,q=xt+D+2*Y,te=ft+3*mt,ve=Xe/g,Ce=ve+1/ve,Ne=i(A(Xe)-g)*C(Ce*Ce-4),qe=Ne*Ne,et=(Ne*(q+D-1)+2*C(q*(xt+D*qe-1)+(1-xt)*(xt*(te*te+4*D)+12*Y*D+4*D*D)))/(4*q+qe);return[i(Xe)*g*et,i($e)*g*C(1+Ne*A(et)-et*et)]}function Ba(){return(0,k.Z)(Ki).scale(127.16)}function Mr(Xe,$e,ot,ft){var xt=v/3;Xe=o(Xe,f),$e=o($e,f),Xe=r(Xe,g),$e=r($e,v-f),ot=o(ot,0),ot=r(ot,99.999999);var mt=(ft=o(ft,f))/100,D=L((ot/100+1)*b(xt))/xt,Y=c(Xe)/c(D*g),q=$e/v,te=C(mt*c(Xe/2)/c($e/2));return function(ve,Ce,Ne,qe,et){function vt(yt,ee){var ue=Ne*c(qe*ee),Ae=C(1-ue*ue),Oe=C(2/(1+Ae*b(yt*=et)));return[ve*Ae*Oe*c(yt),Ce*ue*Oe]}return vt.invert=function(yt,ee){var ue=yt/ve,Ae=ee/Ce,Oe=C(ue*ue+Ae*Ae),Fe=2*E(Oe/2);return[T(yt*h(Fe),ve*Oe)/et,Oe&&E(ee*c(Fe)/(Ce*Ne*Oe))/qe]},vt}(te/C(q*Y*D),1/(te*C(q*Y*D)),Y,D,q)}function Or(){var Xe=65*_,$e=60*_,ot=20,ft=200,xt=(0,k.r)(Mr),mt=xt(Xe,$e,ot,ft);return mt.poleline=function(D){return arguments.length?xt(Xe=+D*_,$e,ot,ft):Xe*S},mt.parallels=function(D){return arguments.length?xt(Xe,$e=+D*_,ot,ft):$e*S},mt.inflation=function(D){return arguments.length?xt(Xe,$e,ot=+D,ft):ot},mt.ratio=function(D){return arguments.length?xt(Xe,$e,ot,ft=+D):ft},mt.scale(163.775)}function rs(){return Or().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ji.invert=function(Xe,$e){var ot=$e/1.70711,ft=c(y*ot);return[Xe/(.74482-.34588*ft*ft),2*l(ot)]},Vi.invert=function(Xe,$e){if(A($e)<f)return[Xe,0];if(A(Xe)<f)return[0,g*c(2*l($e/v))];var ot=(Xe/=v)*Xe,ft=($e/=v)*$e,xt=ot+ft,mt=xt*xt,D=-A($e)*(1+xt),Y=D-2*ft+ot,q=-2*D+1+2*ft+mt,te=ft/q+(2*Y*Y*Y/(q*q*q)-9*D*Y/(q*q))/27,ve=(D-Y*Y/(3*q))/q,Ce=2*C(-ve/3),Ne=L(3*te/(ve*Ce))/3;return[v*(xt-1+C(1+2*(ot-ft)+mt))/(2*Xe),i($e)*v*(-Ce*b(Ne+v/3)-Y/(3*q))]},ca.invert=function(Xe,$e){if(!Xe)return[0,g*c(2*l($e/v))];var ot=A(Xe/v),ft=(1-ot*ot-($e/=v)*$e)/(2*ot),xt=C(ft*ft+1);return[i(Xe)*v*(xt-ft),i($e)*g*c(2*T(C((1-2*ft*ot)*(ft+xt)-ot),C(xt+ft+ot)))]},Ao.invert=function(Xe,$e){if(!$e)return[Xe,0];var ot=$e/v,ft=(v*v*(1-ot*ot)-Xe*Xe)/(2*v*Xe);return[Xe?v*(i(Xe)*C(ft*ft+1)-ft):0,g*c(2*l(ot))]},Ki.invert=function(Xe,$e){var ot;if(!Xe||!$e)return[Xe,$e];$e/=v;var ft=i(Xe)*Xe/g,xt=(ft*ft-1+4*$e*$e)/A(ft),mt=xt*xt,D=2*$e,Y=50;do{var q=D*D,te=(8*D-q*(q+2)-5)/(2*q*(D-1)),ve=(3*D-q*D-10)/(2*q*D),Ce=te*te,Ne=D*te,qe=D+te,et=qe*qe,vt=D+3*te,yt=-2*qe*(4*Ne*Ce+(1-4*q+3*q*q)*(1+ve)+Ce*(14*q-6-mt+(8*q-8-2*mt)*ve)+Ne*(12*q-8+(10*q-10-mt)*ve)),ee=C(et*(q+Ce*mt-1)+(1-q)*(q*(vt*vt+4*Ce)+Ce*(12*Ne+4*Ce)));D-=ot=(xt*(et+Ce-1)+2*ee-ft*(4*et+mt))/(xt*(2*te*ve+2*qe*(1+ve))+yt/ee-8*qe*(xt*(-1+Ce+et)+2*ee)*(1+ve)/(mt+4*et))}while(ot>f&&--Y>0);return[i(Xe)*(C(xt*xt+4)+xt)*v/4,g*D]};var fo=4*v+3*C(3),qa=2*C(2*v*C(3)/fo),$i=we(qa*C(3)/v,qa,fo/6);function zs(){return(0,k.Z)($i).scale(176.84)}function fa(Xe,$e){return[Xe*C(1-3*$e*$e/(v*v)),$e]}function is(){return(0,k.Z)(fa).scale(152.63)}function ho(Xe,$e){var ot=b($e),ft=b(Xe)*ot,xt=1-ft,mt=b(Xe=T(c(Xe)*ot,-c($e))),D=c(Xe);return[D*(ot=C(1-ft*ft))-mt*xt,-mt*ot-D*xt]}function oi(){return(0,k.Z)(ho).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function fi(Xe,$e){var ot=H(Xe,$e);return[(ot[0]+Xe/g)/2,(ot[1]+$e)/2]}function Rs(){return(0,k.Z)(fi).scale(158.837)}fa.invert=function(Xe,$e){return[Xe/C(1-3*$e*$e/(v*v)),$e]},ho.invert=function(Xe,$e){var ot=(Xe*Xe+$e*$e)/-2,ft=C(-ot*(2+ot)),xt=$e*ot+Xe*ft,mt=Xe*ot-$e*ft,D=C(mt*mt+xt*xt);return[T(ft*xt,D*(1+ot)),D?-E(ft*mt/D):0]},fi.invert=function(Xe,$e){var ot=Xe,ft=$e,xt=25;do{var mt,D=b(ft),Y=c(ft),q=c(2*ft),te=Y*Y,ve=D*D,Ce=c(ot),Ne=b(ot/2),qe=c(ot/2),et=qe*qe,vt=1-ve*Ne*Ne,yt=vt?L(D*Ne)*C(mt=1/vt):mt=0,ee=.5*(2*yt*D*qe+ot/g)-Xe,ue=.5*(yt*Y+ft)-$e,Ae=.5*mt*(ve*et+yt*D*Ne*te)+.5/g,Oe=mt*(Ce*q/4-yt*Y*qe),Fe=.125*mt*(q*qe-yt*Y*ve*Ce),Ue=.5*mt*(te*Ne+yt*et*D)+.5,We=Oe*Fe-Ue*Ae,Je=(ue*Oe-ee*Ue)/We,it=(ee*Fe-ue*Ae)/We;ot-=Je,ft-=it}while((A(Je)>f||A(it)>f)&&--xt>0);return[ot,ft]}},33940:function(Q,z,e){"use strict";function k(){return new A}function A(){this.reset()}e.d(z,{Z:function(){return k}}),A.prototype={constructor:A,reset:function(){this.s=this.t=0},add:function(b){T(l,b,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new A;function T(b,d,s){var t=b.s=d+s,o=t-d;b.t=d-(t-o)+(s-o)}},97860:function(Q,z,e){"use strict";e.d(z,{L9:function(){return r},ZP:function(){return x},gL:function(){return a}});var k,A,l,T,b,d=e(33940),s=e(39695),t=e(73182),o=e(72736),r=(0,d.Z)(),n=(0,d.Z)(),a={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){r.reset(),a.lineStart=i,a.lineEnd=c},polygonEnd:function(){var v=+r;n.add(v<0?s.BZ+v:v),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){n.add(s.BZ)}};function i(){a.point=h}function c(){f(k,A)}function h(v,g){a.point=f,k=v,A=g,l=v*=s.uR,T=(0,s.mC)(g=(g*=s.uR)/2+s.pu),b=(0,s.O$)(g)}function f(v,g){g=(g*=s.uR)/2+s.pu;var y=(v*=s.uR)-l,p=y>=0?1:-1,m=p*y,w=(0,s.mC)(g),u=(0,s.O$)(g),S=b*u,_=T*w+S*(0,s.mC)(m),E=S*p*(0,s.O$)(m);r.add((0,s.fv)(E,_)),l=v,T=w,b=u}function x(v){return n.reset(),(0,o.Z)(v,a),2*n}},77338:function(Q,z,e){"use strict";e.d(z,{Z:function(){return L}});var k,A,l,T,b,d,s,t,o,r,n=e(33940),a=e(97860),i=e(7620),c=e(39695),h=e(72736),f=(0,n.Z)(),x={point:v,lineStart:y,lineEnd:p,polygonStart:function(){x.point=m,x.lineStart=w,x.lineEnd=u,f.reset(),a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd(),x.point=v,x.lineStart=y,x.lineEnd=p,a.L9<0?(k=-(l=180),A=-(T=90)):f>c.Ho?T=90:f<-c.Ho&&(A=-90),r[0]=k,r[1]=l},sphere:function(){k=-(l=180),A=-(T=90)}};function v(C,P){o.push(r=[k=C,l=C]),P<A&&(A=P),P>T&&(T=P)}function g(C,P){var I=(0,i.Og)([C*c.uR,P*c.uR]);if(t){var j=(0,i.T5)(t,I),H=(0,i.T5)([j[1],-j[0],0],j);(0,i.iJ)(H),H=(0,i.Y1)(H);var F,U=C-b,B=U>0?1:-1,N=H[0]*c.RW*B,J=(0,c.Wn)(U)>180;J^(B*b<N&&N<B*C)?(F=H[1]*c.RW)>T&&(T=F):J^(B*b<(N=(N+360)%360-180)&&N<B*C)?(F=-H[1]*c.RW)<A&&(A=F):(P<A&&(A=P),P>T&&(T=P)),J?C<b?S(k,C)>S(k,l)&&(l=C):S(C,l)>S(k,l)&&(k=C):l>=k?(C<k&&(k=C),C>l&&(l=C)):C>b?S(k,C)>S(k,l)&&(l=C):S(C,l)>S(k,l)&&(k=C)}else o.push(r=[k=C,l=C]);P<A&&(A=P),P>T&&(T=P),t=I,b=C}function y(){x.point=g}function p(){r[0]=k,r[1]=l,x.point=v,t=null}function m(C,P){if(t){var I=C-b;f.add((0,c.Wn)(I)>180?I+(I>0?360:-360):I)}else d=C,s=P;a.gL.point(C,P),g(C,P)}function w(){a.gL.lineStart()}function u(){m(d,s),a.gL.lineEnd(),(0,c.Wn)(f)>c.Ho&&(k=-(l=180)),r[0]=k,r[1]=l,t=null}function S(C,P){return(P-=C)<0?P+360:P}function _(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function L(C){var P,I,j,R,H,F,U;if(T=l=-(k=A=1/0),o=[],(0,h.Z)(C,x),I=o.length){for(o.sort(_),P=1,H=[j=o[0]];P<I;++P)E(j,(R=o[P])[0])||E(j,R[1])?(S(j[0],R[1])>S(j[0],j[1])&&(j[1]=R[1]),S(R[0],j[1])>S(j[0],j[1])&&(j[0]=R[0])):H.push(j=R);for(F=-1/0,P=0,j=H[I=H.length-1];P<=I;j=R,++P)(U=S(j[1],(R=H[P])[0]))>F&&(F=U,k=R[0],l=j[1])}return o=r=null,k===1/0||A===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,A],[l,T]]}},7620:function(Q,z,e){"use strict";e.d(z,{Og:function(){return l},T:function(){return s},T5:function(){return b},Y1:function(){return A},iJ:function(){return t},j9:function(){return T},s0:function(){return d}});var k=e(39695);function A(o){return[(0,k.fv)(o[1],o[0]),(0,k.ZR)(o[2])]}function l(o){var r=o[0],n=o[1],a=(0,k.mC)(n);return[a*(0,k.mC)(r),a*(0,k.O$)(r),(0,k.O$)(n)]}function T(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function b(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function d(o,r){o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}function s(o,r){return[o[0]*r,o[1]*r,o[2]*r]}function t(o){var r=(0,k._b)(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=r,o[1]/=r,o[2]/=r}},66624:function(Q,z,e){"use strict";e.d(z,{Z:function(){return I}});var k,A,l,T,b,d,s,t,o,r,n,a,i,c,h,f,x=e(39695),v=e(73182),g=e(72736),y={sphere:v.Z,point:p,lineStart:w,lineEnd:_,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=w,y.lineEnd=_}};function p(j,R){j*=x.uR;var H=(0,x.mC)(R*=x.uR);m(H*(0,x.mC)(j),H*(0,x.O$)(j),(0,x.O$)(R))}function m(j,R,H){++k,l+=(j-l)/k,T+=(R-T)/k,b+=(H-b)/k}function w(){y.point=u}function u(j,R){j*=x.uR;var H=(0,x.mC)(R*=x.uR);c=H*(0,x.mC)(j),h=H*(0,x.O$)(j),f=(0,x.O$)(R),y.point=S,m(c,h,f)}function S(j,R){j*=x.uR;var H=(0,x.mC)(R*=x.uR),F=H*(0,x.mC)(j),U=H*(0,x.O$)(j),B=(0,x.O$)(R),N=(0,x.fv)((0,x._b)((N=h*B-f*U)*N+(N=f*F-c*B)*N+(N=c*U-h*F)*N),c*F+h*U+f*B);A+=N,d+=N*(c+(c=F)),s+=N*(h+(h=U)),t+=N*(f+(f=B)),m(c,h,f)}function _(){y.point=p}function E(){y.point=C}function L(){P(a,i),y.point=p}function C(j,R){a=j,i=R,j*=x.uR,R*=x.uR,y.point=P;var H=(0,x.mC)(R);c=H*(0,x.mC)(j),h=H*(0,x.O$)(j),f=(0,x.O$)(R),m(c,h,f)}function P(j,R){j*=x.uR;var H=(0,x.mC)(R*=x.uR),F=H*(0,x.mC)(j),U=H*(0,x.O$)(j),B=(0,x.O$)(R),N=h*B-f*U,J=f*F-c*B,Z=c*U-h*F,V=(0,x._b)(N*N+J*J+Z*Z),W=(0,x.ZR)(V),X=V&&-W/V;o+=X*N,r+=X*J,n+=X*Z,A+=W,d+=W*(c+(c=F)),s+=W*(h+(h=U)),t+=W*(f+(f=B)),m(c,h,f)}function I(j){k=A=l=T=b=d=s=t=o=r=n=0,(0,g.Z)(j,y);var R=o,H=r,F=n,U=R*R+H*H+F*F;return U<x.aW&&(R=d,H=s,F=t,A<x.Ho&&(R=l,H=T,F=b),(U=R*R+H*H+F*F)<x.aW)?[NaN,NaN]:[(0,x.fv)(H,R)*x.RW,(0,x.ZR)(F/(0,x._b)(U))*x.RW]}},7613:function(Q,z,e){"use strict";e.d(z,{m:function(){return b},Z:function(){return s}});var k=e(7620);function A(t){return function(){return t}}var l=e(39695),T=e(49386);function b(t,o,r,n,a,i){if(r){var c=(0,l.mC)(o),h=(0,l.O$)(o),f=n*r;null==a?(a=o+n*l.BZ,i=o-f/2):(a=d(c,a),i=d(c,i),(n>0?a<i:a>i)&&(a+=n*l.BZ));for(var x,v=a;n>0?v>i:v<i;v-=f)x=(0,k.Y1)([c,-h*(0,l.mC)(v),-h*(0,l.O$)(v)]),t.point(x[0],x[1])}}function d(t,o){(o=(0,k.Og)(o))[0]-=t,(0,k.iJ)(o);var r=(0,l.Kh)(-o[1]);return((-o[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var t,o,r=A([0,0]),n=A(90),a=A(6),i={point:function(h,f){t.push(h=o(h,f)),h[0]*=l.RW,h[1]*=l.RW}};function c(){var h=r.apply(this,arguments),f=n.apply(this,arguments)*l.uR,x=a.apply(this,arguments)*l.uR;return t=[],o=(0,T.I)(-h[0]*l.uR,-h[1]*l.uR,0).invert,b(i,f,x,1),h={type:"Polygon",coordinates:[t]},t=o=null,h}return c.center=function(h){return arguments.length?(r="function"==typeof h?h:A([+h[0],+h[1]]),c):r},c.radius=function(h){return arguments.length?(n="function"==typeof h?h:A(+h),c):n},c.precision=function(h){return arguments.length?(a="function"==typeof h?h:A(+h),c):a},c}},87070:function(Q,z,e){"use strict";var k=e(97023),A=e(39695);z.Z=(0,k.Z)(function(){return!0},function(l){var T,b=NaN,d=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(t,o){var a,i,c,h,f,x,v,r=t>0?A.pi:-A.pi,n=(0,A.Wn)(t-b);(0,A.Wn)(n-A.pi)<A.Ho?(l.point(b,d=(d+o)/2>0?A.ou:-A.ou),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),l.point(t,d),T=0):s!==r&&n>=A.pi&&((0,A.Wn)(b-s)<A.Ho&&(b-=s*A.Ho),(0,A.Wn)(t-r)<A.Ho&&(t-=r*A.Ho),i=d,h=o,v=(0,A.O$)((a=b)-(c=t)),d=(0,A.Wn)(v)>A.Ho?(0,A.z4)(((0,A.O$)(i)*(x=(0,A.mC)(h))*(0,A.O$)(c)-(0,A.O$)(h)*(f=(0,A.mC)(i))*(0,A.O$)(a))/(f*x*v)):(i+h)/2,l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),T=0),l.point(b=t,d=o),s=r},lineEnd:function(){l.lineEnd(),b=d=NaN},clean:function(){return 2-T}}},function(l,T,b,d){var s;if(null==l)d.point(-A.pi,s=b*A.ou),d.point(0,s),d.point(A.pi,s),d.point(A.pi,0),d.point(A.pi,-s),d.point(0,-s),d.point(-A.pi,-s),d.point(-A.pi,0),d.point(-A.pi,s);else if((0,A.Wn)(l[0]-T[0])>A.Ho){var t=l[0]<T[0]?A.pi:-A.pi;d.point(-t,s=b*t/2),d.point(0,s),d.point(t,s)}else d.point(T[0],T[1])},[-A.pi,-A.ou])},85272:function(Q,z,e){"use strict";e.d(z,{Z:function(){return A}});var k=e(73182);function A(){var l,T=[];return{point:function(b,d,s){l.push([b,d,s])},lineStart:function(){T.push(l=[])},lineEnd:k.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],l=null,b}}}},1457:function(Q,z,e){"use strict";e.d(z,{Z:function(){return d}});var k=e(7620),A=e(7613),l=e(39695),T=e(67108),b=e(97023);function d(s){var t=(0,l.mC)(s),o=6*l.uR,r=t>0,n=(0,l.Wn)(t)>l.Ho;function a(h,f){return(0,l.mC)(h)*(0,l.mC)(f)>t}function i(h,f,x){var v=(0,k.Og)(h),g=(0,k.Og)(f),y=[1,0,0],p=(0,k.T5)(v,g),m=(0,k.j9)(p,p),w=p[0],u=m-w*w;if(!u)return!x&&h;var S=t*m/u,_=-t*w/u,E=(0,k.T5)(y,p),L=(0,k.T)(y,S),C=(0,k.T)(p,_);(0,k.s0)(L,C);var P=E,I=(0,k.j9)(L,P),j=(0,k.j9)(P,P),R=I*I-j*((0,k.j9)(L,L)-1);if(!(R<0)){var H=(0,l._b)(R),F=(0,k.T)(P,(-I-H)/j);if((0,k.s0)(F,L),F=(0,k.Y1)(F),!x)return F;var U,B=h[0],N=f[0],J=h[1],Z=f[1];N<B&&(U=B,B=N,N=U);var V=N-B,W=(0,l.Wn)(V-l.pi)<l.Ho;if(!W&&Z<J&&(U=J,J=Z,Z=U),W||V<l.Ho?W?J+Z>0^F[1]<((0,l.Wn)(F[0]-B)<l.Ho?J:Z):J<=F[1]&&F[1]<=Z:V>l.pi^(B<=F[0]&&F[0]<=N)){var X=(0,k.T)(P,(-I+H)/j);return(0,k.s0)(X,L),[F,(0,k.Y1)(X)]}}}function c(h,f){var x=r?s:l.pi-s,v=0;return h<-x?v|=1:h>x&&(v|=2),f<-x?v|=4:f>x&&(v|=8),v}return(0,b.Z)(a,function(h){var f,x,v,g,y;return{lineStart:function(){g=v=!1,y=1},point:function(p,m){var w,u=[p,m],S=a(p,m),_=r?S?0:c(p,m):S?c(p+(p<0?l.pi:-l.pi),m):0;if(!f&&(g=v=S)&&h.lineStart(),S!==v&&(!(w=i(f,u))||(0,T.Z)(f,w)||(0,T.Z)(u,w))&&(u[2]=1),S!==v)y=0,S?(h.lineStart(),w=i(u,f),h.point(w[0],w[1])):(w=i(f,u),h.point(w[0],w[1],2),h.lineEnd()),f=w;else if(n&&f&&r^S){var E;_&x||!(E=i(u,f,!0))||(y=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||f&&(0,T.Z)(f,u)||h.point(u[0],u[1]),f=u,v=S,x=_},lineEnd:function(){v&&h.lineEnd(),f=null},clean:function(){return y|(g&&v)<<1}}},function(h,f,x,v){(0,A.m)(v,s,o,x,h,f)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function(Q,z,e){"use strict";e.d(z,{Z:function(){return d}});var k=e(85272),A=e(46225),l=e(39695),T=e(23071),b=e(33064);function d(o,r,n,a){return function(i){var c,h,f,x=r(i),v=(0,k.Z)(),g=r(v),y=!1,p={point:m,lineStart:u,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=E,p.lineEnd=L,h=[],c=[]},polygonEnd:function(){p.point=m,p.lineStart=u,p.lineEnd=S,h=(0,b.TS)(h);var C=(0,T.Z)(c,a);h.length?(y||(i.polygonStart(),y=!0),(0,A.Z)(h,t,C,n,i)):C&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,P){o(C,P)&&i.point(C,P)}function w(C,P){x.point(C,P)}function u(){p.point=w,x.lineStart()}function S(){p.point=m,x.lineEnd()}function _(C,P){f.push([C,P]),g.point(C,P)}function E(){g.lineStart(),f=[]}function L(){_(f[0][0],f[0][1]),g.lineEnd();var C,P,I,j,R=g.clean(),H=v.result(),F=H.length;if(f.pop(),c.push(f),f=null,F)if(1&R){if((P=(I=H[0]).length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),C=0;C<P;++C)i.point((j=I[C])[0],j[1]);i.lineEnd()}}else F>1&&2&R&&H.push(H.pop().concat(H.shift())),h.push(H.filter(s))}return p}}function s(o){return o.length>1}function t(o,r){return((o=o.x)[0]<0?o[1]-l.ou-l.Ho:l.ou-o[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function(Q,z,e){"use strict";e.d(z,{Z:function(){return s}});var k=e(39695),A=e(85272),l=e(46225),T=e(33064),b=1e9,d=-b;function s(t,o,r,n){function a(x,v){return t<=x&&x<=r&&o<=v&&v<=n}function i(x,v,g,y){var p=0,m=0;if(null==x||(p=c(x,g))!==(m=c(v,g))||f(x,v)<0^g>0)do{y.point(0===p||3===p?t:r,p>1?n:o)}while((p=(p+g+4)%4)!==m);else y.point(v[0],v[1])}function c(x,v){return(0,k.Wn)(x[0]-t)<k.Ho?v>0?0:3:(0,k.Wn)(x[0]-r)<k.Ho?v>0?2:1:(0,k.Wn)(x[1]-o)<k.Ho?v>0?1:0:v>0?3:2}function h(x,v){return f(x.x,v.x)}function f(x,v){var g=c(x,1),y=c(v,1);return g!==y?g-y:0===g?v[1]-x[1]:1===g?x[0]-v[0]:2===g?x[1]-v[1]:v[0]-x[0]}return function(x){var v,g,y,p,m,w,u,S,_,E,L,C=x,P=(0,A.Z)(),I={point:j,lineStart:function(){I.point=R,g&&g.push(y=[]),E=!0,_=!1,u=S=NaN},lineEnd:function(){v&&(R(p,m),w&&_&&P.rejoin(),v.push(P.result())),I.point=j,_&&C.lineEnd()},polygonStart:function(){C=P,v=[],g=[],L=!0},polygonEnd:function(){var H=function(){for(var B=0,N=0,J=g.length;N<J;++N)for(var Z,V,W=g[N],X=1,K=W.length,ne=W[0],re=ne[0],ae=ne[1];X<K;++X)Z=re,V=ae,re=(ne=W[X])[0],ae=ne[1],V<=n?ae>n&&(re-Z)*(n-V)>(ae-V)*(t-Z)&&++B:ae<=n&&(re-Z)*(n-V)<(ae-V)*(t-Z)&&--B;return B}(),F=L&&H,U=(v=(0,T.TS)(v)).length;(F||U)&&(x.polygonStart(),F&&(x.lineStart(),i(null,null,1,x),x.lineEnd()),U&&(0,l.Z)(v,h,H,i,x),x.polygonEnd()),C=x,v=g=y=null}};function j(H,F){a(H,F)&&C.point(H,F)}function R(H,F){var U=a(H,F);if(g&&y.push([H,F]),E)p=H,m=F,w=U,E=!1,U&&(C.lineStart(),C.point(H,F));else if(U&&_)C.point(H,F);else{var B=[u=Math.max(d,Math.min(b,u)),S=Math.max(d,Math.min(b,S))],N=[H=Math.max(d,Math.min(b,H)),F=Math.max(d,Math.min(b,F))];!function(J,Z,V,W,X,K){var ne,re=J[0],ae=J[1],le=0,pe=1,xe=Z[0]-re,ye=Z[1]-ae;if(ne=V-re,xe||!(ne>0)){if(ne/=xe,xe<0){if(ne<le)return;ne<pe&&(pe=ne)}else if(xe>0){if(ne>pe)return;ne>le&&(le=ne)}if(ne=X-re,xe||!(ne<0)){if(ne/=xe,xe<0){if(ne>pe)return;ne>le&&(le=ne)}else if(xe>0){if(ne<le)return;ne<pe&&(pe=ne)}if(ne=W-ae,ye||!(ne>0)){if(ne/=ye,ye<0){if(ne<le)return;ne<pe&&(pe=ne)}else if(ye>0){if(ne>pe)return;ne>le&&(le=ne)}if(ne=K-ae,ye||!(ne<0)){if(ne/=ye,ye<0){if(ne>pe)return;ne>le&&(le=ne)}else if(ye>0){if(ne<le)return;ne<pe&&(pe=ne)}return le>0&&(J[0]=re+le*xe,J[1]=ae+le*ye),pe<1&&(Z[0]=re+pe*xe,Z[1]=ae+pe*ye),!0}}}}}(B,N,t,o,r,n)?U&&(C.lineStart(),C.point(H,F),L=!1):(_||(C.lineStart(),C.point(B[0],B[1])),C.point(N[0],N[1]),U||C.lineEnd(),L=!1)}u=H,S=F,_=U}return I}}},46225:function(Q,z,e){"use strict";e.d(z,{Z:function(){return T}});var k=e(67108),A=e(39695);function l(d,s,t,o){this.x=d,this.z=s,this.o=t,this.e=o,this.v=!1,this.n=this.p=null}function T(d,s,t,o,r){var n,a,i=[],c=[];if(d.forEach(function(y){if(!((p=y.length-1)<=0)){var p,m,w=y[0],u=y[p];if((0,k.Z)(w,u)){if(!w[2]&&!u[2]){for(r.lineStart(),n=0;n<p;++n)r.point((w=y[n])[0],w[1]);return void r.lineEnd()}u[0]+=2*A.Ho}i.push(m=new l(w,y,null,!0)),c.push(m.o=new l(w,null,m,!1)),i.push(m=new l(u,y,null,!1)),c.push(m.o=new l(u,null,m,!0))}}),i.length){for(c.sort(s),b(i),b(c),n=0,a=c.length;n<a;++n)c[n].e=t=!t;for(var h,f,x=i[0];;){for(var v=x,g=!0;v.v;)if((v=v.n)===x)return;h=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(n=0,a=h.length;n<a;++n)r.point((f=h[n])[0],f[1]);else o(v.x,v.n.x,1,r);v=v.n}else{if(g)for(n=(h=v.p.z).length-1;n>=0;--n)r.point((f=h[n])[0],f[1]);else o(v.x,v.p.x,-1,r);v=v.p}h=(v=v.o).z,g=!g}while(!v.v);r.lineEnd()}}}function b(d){if(s=d.length){for(var s,t,o=0,r=d[0];++o<s;)r.n=t=d[o],t.p=r,r=t;r.n=t=d[0],t.p=r}}},96059:function(Q,z,e){"use strict";function k(A,l){function T(b,d){return b=A(b,d),l(b[0],b[1])}return A.invert&&l.invert&&(T.invert=function(b,d){return(b=l.invert(b,d))&&A.invert(b[0],b[1])}),T}e.d(z,{Z:function(){return k}})},8593:function(Q,z,e){"use strict";function k(A){return A}e.d(z,{Z:function(){return k}})},27362:function(Q,z,e){"use strict";e.r(z),e.d(z,{geoAlbers:function(){return At},geoAlbersUsa:function(){return pt},geoArea:function(){return k.ZP},geoAzimuthalEqualArea:function(){return gt.Z},geoAzimuthalEqualAreaRaw:function(){return gt.l},geoAzimuthalEquidistant:function(){return Pt.Z},geoAzimuthalEquidistantRaw:function(){return Pt.N},geoBounds:function(){return A.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return b.Z},geoClipCircle:function(){return d.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return hn},geoConicConformalRaw:function(){return un},geoConicEqualArea:function(){return Et},geoConicEqualAreaRaw:function(){return Tt},geoConicEquidistant:function(){return Fn},geoConicEquidistantRaw:function(){return _n},geoContains:function(){return H},geoDistance:function(){return S},geoEqualEarth:function(){return kn},geoEqualEarthRaw:function(){return Cn},geoEquirectangular:function(){return Qt.Z},geoEquirectangularRaw:function(){return Qt.k},geoGnomonic:function(){return Rn.Z},geoGnomonicRaw:function(){return Rn.M},geoGraticule:function(){return N},geoGraticule10:function(){return J},geoIdentity:function(){return jn},geoInterpolate:function(){return K.Z},geoLength:function(){return m},geoMercator:function(){return Nt},geoMercatorRaw:function(){return Ut},geoNaturalEarth1:function(){return er.Z},geoNaturalEarth1Raw:function(){return er.K},geoOrthographic:function(){return Kn.Z},geoOrthographicRaw:function(){return Kn.I},geoPath:function(){return Ke},geoProjection:function(){return st.Z},geoProjectionMutator:function(){return st.r},geoRotation:function(){return zt.Z},geoStereographic:function(){return $n},geoStereographicRaw:function(){return lr},geoStream:function(){return f.Z},geoTransform:function(){return Nn.Z},geoTransverseMercator:function(){return ir},geoTransverseMercatorRaw:function(){return Gn}});var k=e(97860),A=e(77338),l=e(66624),T=e(7613),b=e(87070),d=e(1457),s=e(87605);function t(){var Jt,rn,Sn,Tn=0,Ln=0,Bn=960,Hn=500;return Sn={stream:function(or){return Jt&&rn===or?Jt:Jt=(0,s.Z)(Tn,Ln,Bn,Hn)(rn=or)},extent:function(or){return arguments.length?(Tn=+or[0][0],Ln=+or[0][1],Bn=+or[1][0],Hn=+or[1][1],Jt=rn=null,Sn):[[Tn,Ln],[Bn,Hn]]}}}var o,r,n,a=e(23071),i=e(33940),c=e(39695),h=e(73182),f=e(72736),x=(0,i.Z)(),v={sphere:h.Z,point:h.Z,lineStart:function(){v.point=y,v.lineEnd=g},lineEnd:h.Z,polygonStart:h.Z,polygonEnd:h.Z};function g(){v.point=v.lineEnd=h.Z}function y(Jt,rn){o=Jt*=c.uR,r=(0,c.O$)(rn*=c.uR),n=(0,c.mC)(rn),v.point=p}function p(Jt,rn){Jt*=c.uR;var Sn=(0,c.O$)(rn*=c.uR),Tn=(0,c.mC)(rn),Ln=(0,c.Wn)(Jt-o),Bn=(0,c.mC)(Ln),Hn=Tn*(0,c.O$)(Ln),or=n*Sn-r*Tn*Bn,mr=r*Sn+n*Tn*Bn;x.add((0,c.fv)((0,c._b)(Hn*Hn+or*or),mr)),o=Jt,r=Sn,n=Tn}function m(Jt){return x.reset(),(0,f.Z)(Jt,v),+x}var w=[null,null],u={type:"LineString",coordinates:w};function S(Jt,rn){return w[0]=Jt,w[1]=rn,m(u)}var _={Feature:function(Jt,rn){return L(Jt.geometry,rn)},FeatureCollection:function(Jt,rn){for(var Sn=Jt.features,Tn=-1,Ln=Sn.length;++Tn<Ln;)if(L(Sn[Tn].geometry,rn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Jt,rn){return C(Jt.coordinates,rn)},MultiPoint:function(Jt,rn){for(var Sn=Jt.coordinates,Tn=-1,Ln=Sn.length;++Tn<Ln;)if(C(Sn[Tn],rn))return!0;return!1},LineString:function(Jt,rn){return P(Jt.coordinates,rn)},MultiLineString:function(Jt,rn){for(var Sn=Jt.coordinates,Tn=-1,Ln=Sn.length;++Tn<Ln;)if(P(Sn[Tn],rn))return!0;return!1},Polygon:function(Jt,rn){return I(Jt.coordinates,rn)},MultiPolygon:function(Jt,rn){for(var Sn=Jt.coordinates,Tn=-1,Ln=Sn.length;++Tn<Ln;)if(I(Sn[Tn],rn))return!0;return!1},GeometryCollection:function(Jt,rn){for(var Sn=Jt.geometries,Tn=-1,Ln=Sn.length;++Tn<Ln;)if(L(Sn[Tn],rn))return!0;return!1}};function L(Jt,rn){return!(!Jt||!E.hasOwnProperty(Jt.type))&&E[Jt.type](Jt,rn)}function C(Jt,rn){return 0===S(Jt,rn)}function P(Jt,rn){for(var Sn,Tn,Ln,Bn=0,Hn=Jt.length;Bn<Hn;Bn++){if(0===(Tn=S(Jt[Bn],rn))||Bn>0&&(Ln=S(Jt[Bn],Jt[Bn-1]))>0&&Sn<=Ln&&Tn<=Ln&&(Sn+Tn-Ln)*(1-Math.pow((Sn-Tn)/Ln,2))<c.aW*Ln)return!0;Sn=Tn}return!1}function I(Jt,rn){return!!(0,a.Z)(Jt.map(j),R(rn))}function j(Jt){return(Jt=Jt.map(R)).pop(),Jt}function R(Jt){return[Jt[0]*c.uR,Jt[1]*c.uR]}function H(Jt,rn){return(Jt&&_.hasOwnProperty(Jt.type)?_[Jt.type]:L)(Jt,rn)}var F=e(33064);function U(Jt,rn,Sn){var Tn=(0,F.w6)(Jt,rn-c.Ho,Sn).concat(rn);return function(Ln){return Tn.map(function(Bn){return[Ln,Bn]})}}function B(Jt,rn,Sn){var Tn=(0,F.w6)(Jt,rn-c.Ho,Sn).concat(rn);return function(Ln){return Tn.map(function(Bn){return[Bn,Ln]})}}function N(){var Jt,rn,Sn,Tn,Ln,Bn,Hn,or,mr,Kt,An,Rt,Zt=10,tn=Zt,En=90,Mn=360,wn=2.5;function an(){return{type:"MultiLineString",coordinates:vn()}}function vn(){return(0,F.w6)((0,c.mD)(Tn/En)*En,Sn,En).map(An).concat((0,F.w6)((0,c.mD)(or/Mn)*Mn,Hn,Mn).map(Rt)).concat((0,F.w6)((0,c.mD)(rn/Zt)*Zt,Jt,Zt).filter(function(sn){return(0,c.Wn)(sn%En)>c.Ho}).map(mr)).concat((0,F.w6)((0,c.mD)(Bn/tn)*tn,Ln,tn).filter(function(sn){return(0,c.Wn)(sn%Mn)>c.Ho}).map(Kt))}return an.lines=function(){return vn().map(function(sn){return{type:"LineString",coordinates:sn}})},an.outline=function(){return{type:"Polygon",coordinates:[An(Tn).concat(Rt(Hn).slice(1),An(Sn).reverse().slice(1),Rt(or).reverse().slice(1))]}},an.extent=function(sn){return arguments.length?an.extentMajor(sn).extentMinor(sn):an.extentMinor()},an.extentMajor=function(sn){return arguments.length?(or=+sn[0][1],Hn=+sn[1][1],(Tn=+sn[0][0])>(Sn=+sn[1][0])&&(sn=Tn,Tn=Sn,Sn=sn),or>Hn&&(sn=or,or=Hn,Hn=sn),an.precision(wn)):[[Tn,or],[Sn,Hn]]},an.extentMinor=function(sn){return arguments.length?(Bn=+sn[0][1],Ln=+sn[1][1],(rn=+sn[0][0])>(Jt=+sn[1][0])&&(sn=rn,rn=Jt,Jt=sn),Bn>Ln&&(sn=Bn,Bn=Ln,Ln=sn),an.precision(wn)):[[rn,Bn],[Jt,Ln]]},an.step=function(sn){return arguments.length?an.stepMajor(sn).stepMinor(sn):an.stepMinor()},an.stepMajor=function(sn){return arguments.length?(En=+sn[0],Mn=+sn[1],an):[En,Mn]},an.stepMinor=function(sn){return arguments.length?(Zt=+sn[0],tn=+sn[1],an):[Zt,tn]},an.precision=function(sn){return arguments.length?(wn=+sn,mr=U(Bn,Ln,90),Kt=B(rn,Jt,wn),An=U(or,Hn,90),Rt=B(Tn,Sn,wn),an):wn},an.extentMajor([[-180,-90+c.Ho],[180,90-c.Ho]]).extentMinor([[-180,-80-c.Ho],[180,80+c.Ho]])}function J(){return N()()}var Z,V,W,X,K=e(83074),ne=e(8593),re=(0,i.Z)(),ae=(0,i.Z)(),le={point:h.Z,lineStart:h.Z,lineEnd:h.Z,polygonStart:function(){le.lineStart=pe,le.lineEnd=se},polygonEnd:function(){le.lineStart=le.lineEnd=le.point=h.Z,re.add((0,c.Wn)(ae)),ae.reset()},result:function(){var Jt=re/2;return re.reset(),Jt}};function pe(){le.point=xe}function xe(Jt,rn){le.point=ye,Z=W=Jt,V=X=rn}function ye(Jt,rn){ae.add(X*Jt-W*rn),W=Jt,X=rn}function se(){ye(Z,V)}var fe,Ee,de,we,ke=le,Te=e(3559),$=0,oe=0,he=0,me=0,Me=0,Ie=0,Pe=0,ze=0,ce=0,ge={point:_e,lineStart:De,lineEnd:nt,polygonStart:function(){ge.lineStart=tt,ge.lineEnd=at},polygonEnd:function(){ge.point=_e,ge.lineStart=De,ge.lineEnd=nt},result:function(){var Jt=ce?[Pe/ce,ze/ce]:Ie?[me/Ie,Me/Ie]:he?[$/he,oe/he]:[NaN,NaN];return $=oe=he=me=Me=Ie=Pe=ze=ce=0,Jt}};function _e(Jt,rn){$+=Jt,oe+=rn,++he}function De(){ge.point=He}function He(Jt,rn){ge.point=Ve,_e(de=Jt,we=rn)}function Ve(Jt,rn){var Sn=Jt-de,Tn=rn-we,Ln=(0,c._b)(Sn*Sn+Tn*Tn);me+=Ln*(de+Jt)/2,Me+=Ln*(we+rn)/2,Ie+=Ln,_e(de=Jt,we=rn)}function nt(){ge.point=_e}function tt(){ge.point=dt}function at(){wt(fe,Ee)}function dt(Jt,rn){ge.point=wt,_e(fe=de=Jt,Ee=we=rn)}function wt(Jt,rn){var Sn=Jt-de,Tn=rn-we,Ln=(0,c._b)(Sn*Sn+Tn*Tn);me+=Ln*(de+Jt)/2,Me+=Ln*(we+rn)/2,Ie+=Ln,Pe+=(Ln=we*Jt-de*rn)*(de+Jt),ze+=Ln*(we+rn),ce+=3*Ln,_e(de=Jt,we=rn)}var bt=ge;function _t(Jt){this._context=Jt}_t.prototype={_radius:4.5,pointRadius:function(Jt){return this._radius=Jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(Jt,rn){switch(this._point){case 0:this._context.moveTo(Jt,rn),this._point=1;break;case 1:this._context.lineTo(Jt,rn);break;default:this._context.moveTo(Jt+this._radius,rn),this._context.arc(Jt,rn,this._radius,0,c.BZ)}},result:h.Z};var Lt,Ct,Ot,Ht,It,Ge=(0,i.Z)(),Ze={point:h.Z,lineStart:function(){Ze.point=Be},lineEnd:function(){Lt&&Ye(Ct,Ot),Ze.point=h.Z},polygonStart:function(){Lt=!0},polygonEnd:function(){Lt=null},result:function(){var Jt=+Ge;return Ge.reset(),Jt}};function Be(Jt,rn){Ze.point=Ye,Ct=Ht=Jt,Ot=It=rn}function Ye(Jt,rn){Ge.add((0,c._b)((Ht-=Jt)*Ht+(It-=rn)*It)),Ht=Jt,It=rn}var rt=Ze;function Se(){this._string=[]}function Re(Jt){return"m0,"+Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+-2*Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+2*Jt+"z"}function Ke(Jt,rn){var Sn,Tn,Ln=4.5;function Bn(Hn){return Hn&&("function"==typeof Ln&&Tn.pointRadius(+Ln.apply(this,arguments)),(0,f.Z)(Hn,Sn(Tn))),Tn.result()}return Bn.area=function(Hn){return(0,f.Z)(Hn,Sn(ke)),ke.result()},Bn.measure=function(Hn){return(0,f.Z)(Hn,Sn(rt)),rt.result()},Bn.bounds=function(Hn){return(0,f.Z)(Hn,Sn(Te.Z)),Te.Z.result()},Bn.centroid=function(Hn){return(0,f.Z)(Hn,Sn(bt)),bt.result()},Bn.projection=function(Hn){return arguments.length?(Sn=null==Hn?(Jt=null,ne.Z):(Jt=Hn).stream,Bn):Jt},Bn.context=function(Hn){return arguments.length?(Tn=null==Hn?(rn=null,new Se):new _t(rn=Hn),"function"!=typeof Ln&&Tn.pointRadius(Ln),Bn):rn},Bn.pointRadius=function(Hn){return arguments.length?(Ln="function"==typeof Hn?Hn:(Tn.pointRadius(+Hn),+Hn),Bn):Ln},Bn.projection(Jt).context(rn)}Se.prototype={_radius:4.5,_circle:Re(4.5),pointRadius:function(Jt){return(Jt=+Jt)!==this._radius&&(this._radius=Jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(Jt,rn){switch(this._point){case 0:this._string.push("M",Jt,",",rn),this._point=1;break;case 1:this._string.push("L",Jt,",",rn);break;default:null==this._circle&&(this._circle=Re(this._radius)),this._string.push("M",Jt,",",rn,this._circle)}},result:function(){if(this._string.length){var Jt=this._string.join("");return this._string=[],Jt}return null}};var st=e(15002);function ct(Jt){var rn=0,Sn=c.pi/3,Tn=(0,st.r)(Jt),Ln=Tn(rn,Sn);return Ln.parallels=function(Bn){return arguments.length?Tn(rn=Bn[0]*c.uR,Sn=Bn[1]*c.uR):[rn*c.RW,Sn*c.RW]},Ln}function Tt(Jt,rn){var Sn=(0,c.O$)(Jt),Tn=(Sn+(0,c.O$)(rn))/2;if((0,c.Wn)(Tn)<c.Ho)return function(or){var mr=(0,c.mC)(or);function Kt(An,Rt){return[An*mr,(0,c.O$)(Rt)/mr]}return Kt.invert=function(An,Rt){return[An/mr,(0,c.ZR)(Rt*mr)]},Kt}(Jt);var Ln=1+Sn*(2*Tn-Sn),Bn=(0,c._b)(Ln)/Tn;function Hn(or,mr){var Kt=(0,c._b)(Ln-2*Tn*(0,c.O$)(mr))/Tn;return[Kt*(0,c.O$)(or*=Tn),Bn-Kt*(0,c.mC)(or)]}return Hn.invert=function(or,mr){var Kt=Bn-mr,An=(0,c.fv)(or,(0,c.Wn)(Kt))*(0,c.Xx)(Kt);return Kt*Tn<0&&(An-=c.pi*(0,c.Xx)(or)*(0,c.Xx)(Kt)),[An/Tn,(0,c.ZR)((Ln-(or*or+Kt*Kt)*Tn*Tn)/(2*Tn))]},Hn}function Et(){return ct(Tt).scale(155.424).center([0,33.6442])}function At(){return Et().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ht=e(47589);function pt(){var Jt,rn,Sn,Tn,Ln,Bn,Hn=At(),or=Et().rotate([154,0]).center([-2,58.5]).parallels([55,65]),mr=Et().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Kt={point:function(Zt,tn){Bn=[Zt,tn]}};function An(Zt){var tn=Zt[0],En=Zt[1];return Bn=null,Sn.point(tn,En),Bn||(Tn.point(tn,En),Bn)||(Ln.point(tn,En),Bn)}function Rt(){return Jt=rn=null,An}return An.invert=function(Zt){var tn=Hn.scale(),En=Hn.translate(),Mn=(Zt[0]-En[0])/tn,wn=(Zt[1]-En[1])/tn;return(wn>=.12&&wn<.234&&Mn>=-.425&&Mn<-.214?or:wn>=.166&&wn<.234&&Mn>=-.214&&Mn<-.115?mr:Hn).invert(Zt)},An.stream=function(Zt){return Jt&&rn===Zt?Jt:(tn=[Hn.stream(rn=Zt),or.stream(Zt),mr.stream(Zt)],En=tn.length,Jt={point:function(Mn,wn){for(var an=-1;++an<En;)tn[an].point(Mn,wn)},sphere:function(){for(var Mn=-1;++Mn<En;)tn[Mn].sphere()},lineStart:function(){for(var Mn=-1;++Mn<En;)tn[Mn].lineStart()},lineEnd:function(){for(var Mn=-1;++Mn<En;)tn[Mn].lineEnd()},polygonStart:function(){for(var Mn=-1;++Mn<En;)tn[Mn].polygonStart()},polygonEnd:function(){for(var Mn=-1;++Mn<En;)tn[Mn].polygonEnd()}});var tn,En},An.precision=function(Zt){return arguments.length?(Hn.precision(Zt),or.precision(Zt),mr.precision(Zt),Rt()):Hn.precision()},An.scale=function(Zt){return arguments.length?(Hn.scale(Zt),or.scale(.35*Zt),mr.scale(Zt),An.translate(Hn.translate())):Hn.scale()},An.translate=function(Zt){if(!arguments.length)return Hn.translate();var tn=Hn.scale(),En=+Zt[0],Mn=+Zt[1];return Sn=Hn.translate(Zt).clipExtent([[En-.455*tn,Mn-.238*tn],[En+.455*tn,Mn+.238*tn]]).stream(Kt),Tn=or.translate([En-.307*tn,Mn+.201*tn]).clipExtent([[En-.425*tn+c.Ho,Mn+.12*tn+c.Ho],[En-.214*tn-c.Ho,Mn+.234*tn-c.Ho]]).stream(Kt),Ln=mr.translate([En-.205*tn,Mn+.212*tn]).clipExtent([[En-.214*tn+c.Ho,Mn+.166*tn+c.Ho],[En-.115*tn-c.Ho,Mn+.234*tn-c.Ho]]).stream(Kt),Rt()},An.fitExtent=function(Zt,tn){return(0,ht.qg)(An,Zt,tn)},An.fitSize=function(Zt,tn){return(0,ht.mF)(An,Zt,tn)},An.fitWidth=function(Zt,tn){return(0,ht.V6)(An,Zt,tn)},An.fitHeight=function(Zt,tn){return(0,ht.rf)(An,Zt,tn)},An.scale(1070)}var gt=e(12956),Pt=e(17889),zt=e(49386);function Ut(Jt,rn){return[Jt,(0,c.cM)((0,c.OR)((c.ou+rn)/2))]}function Nt(){return jt(Ut).scale(961/c.BZ)}function jt(Jt){var rn,Sn,Tn,Ln=(0,st.Z)(Jt),Bn=Ln.center,Hn=Ln.scale,or=Ln.translate,mr=Ln.clipExtent,Kt=null;function An(){var Rt=c.pi*Hn(),Zt=Ln((0,zt.Z)(Ln.rotate()).invert([0,0]));return mr(null==Kt?[[Zt[0]-Rt,Zt[1]-Rt],[Zt[0]+Rt,Zt[1]+Rt]]:Jt===Ut?[[Math.max(Zt[0]-Rt,Kt),rn],[Math.min(Zt[0]+Rt,Sn),Tn]]:[[Kt,Math.max(Zt[1]-Rt,rn)],[Sn,Math.min(Zt[1]+Rt,Tn)]])}return Ln.scale=function(Rt){return arguments.length?(Hn(Rt),An()):Hn()},Ln.translate=function(Rt){return arguments.length?(or(Rt),An()):or()},Ln.center=function(Rt){return arguments.length?(Bn(Rt),An()):Bn()},Ln.clipExtent=function(Rt){return arguments.length?(null==Rt?Kt=rn=Sn=Tn=null:(Kt=+Rt[0][0],rn=+Rt[0][1],Sn=+Rt[1][0],Tn=+Rt[1][1]),An()):null==Kt?null:[[Kt,rn],[Sn,Tn]]},An()}function Gt(Jt){return(0,c.OR)((c.ou+Jt)/2)}function un(Jt,rn){var Sn=(0,c.mC)(Jt),Tn=Jt===rn?(0,c.O$)(Jt):(0,c.cM)(Sn/(0,c.mC)(rn))/(0,c.cM)(Gt(rn)/Gt(Jt)),Ln=Sn*(0,c.sQ)(Gt(Jt),Tn)/Tn;if(!Tn)return Ut;function Bn(Hn,or){Ln>0?or<-c.ou+c.Ho&&(or=-c.ou+c.Ho):or>c.ou-c.Ho&&(or=c.ou-c.Ho);var mr=Ln/(0,c.sQ)(Gt(or),Tn);return[mr*(0,c.O$)(Tn*Hn),Ln-mr*(0,c.mC)(Tn*Hn)]}return Bn.invert=function(Hn,or){var mr=Ln-or,Kt=(0,c.Xx)(Tn)*(0,c._b)(Hn*Hn+mr*mr),An=(0,c.fv)(Hn,(0,c.Wn)(mr))*(0,c.Xx)(mr);return mr*Tn<0&&(An-=c.pi*(0,c.Xx)(Hn)*(0,c.Xx)(mr)),[An/Tn,2*(0,c.z4)((0,c.sQ)(Ln/Kt,1/Tn))-c.ou]},Bn}function hn(){return ct(un).scale(109.5).parallels([30,30])}Ut.invert=function(Jt,rn){return[Jt,2*(0,c.z4)((0,c.Qq)(rn))-c.ou]};var Qt=e(97492);function _n(Jt,rn){var Sn=(0,c.mC)(Jt),Tn=Jt===rn?(0,c.O$)(Jt):(Sn-(0,c.mC)(rn))/(rn-Jt),Ln=Sn/Tn+Jt;if((0,c.Wn)(Tn)<c.Ho)return Qt.k;function Bn(Hn,or){var mr=Ln-or,Kt=Tn*Hn;return[mr*(0,c.O$)(Kt),Ln-mr*(0,c.mC)(Kt)]}return Bn.invert=function(Hn,or){var mr=Ln-or,Kt=(0,c.fv)(Hn,(0,c.Wn)(mr))*(0,c.Xx)(mr);return mr*Tn<0&&(Kt-=c.pi*(0,c.Xx)(Hn)*(0,c.Xx)(mr)),[Kt/Tn,Ln-(0,c.Xx)(Tn)*(0,c._b)(Hn*Hn+mr*mr)]},Bn}function Fn(){return ct(_n).scale(131.154).center([0,13.9389])}var yn=1.340264,on=-.081106,pn=893e-6,ln=.003796,dn=(0,c._b)(3)/2;function Cn(Jt,rn){var Sn=(0,c.ZR)(dn*(0,c.O$)(rn)),Tn=Sn*Sn,Ln=Tn*Tn*Tn;return[Jt*(0,c.mC)(Sn)/(dn*(yn+3*on*Tn+Ln*(7*pn+9*ln*Tn))),Sn*(yn+on*Tn+Ln*(pn+ln*Tn))]}function kn(){return(0,st.Z)(Cn).scale(177.158)}Cn.invert=function(Jt,rn){for(var Sn,Tn=rn,Ln=Tn*Tn,Bn=Ln*Ln*Ln,Hn=0;Hn<12&&(Bn=(Ln=(Tn-=Sn=(Tn*(yn+on*Ln+Bn*(pn+ln*Ln))-rn)/(yn+3*on*Ln+Bn*(7*pn+9*ln*Ln)))*Tn)*Ln*Ln,!((0,c.Wn)(Sn)<c.aW));++Hn);return[dn*Jt*(yn+3*on*Ln+Bn*(7*pn+9*ln*Ln))/(0,c.mC)(Tn),(0,c.ZR)((0,c.O$)(Tn)/dn)]};var Rn=e(98936),Nn=e(64684);function jn(){var Jt,rn,Sn,Tn,Ln,Bn,Hn,or=1,mr=0,Kt=0,An=1,Rt=1,Zt=0,tn=null,En=1,Mn=1,wn=(0,Nn.l)({point:function(fn,mn){var Pn=sn([fn,mn]);this.stream.point(Pn[0],Pn[1])}}),an=ne.Z;function vn(){return En=or*An,Mn=or*Rt,Bn=Hn=null,sn}function sn(fn){var mn=fn[0]*En,Pn=fn[1]*Mn;if(Zt){var qn=Pn*Jt-mn*rn;mn=mn*Jt+Pn*rn,Pn=qn}return[mn+mr,Pn+Kt]}return sn.invert=function(fn){var mn=fn[0]-mr,Pn=fn[1]-Kt;if(Zt){var qn=Pn*Jt+mn*rn;mn=mn*Jt-Pn*rn,Pn=qn}return[mn/En,Pn/Mn]},sn.stream=function(fn){return Bn&&Hn===fn?Bn:Bn=wn(an(Hn=fn))},sn.postclip=function(fn){return arguments.length?(an=fn,tn=Sn=Tn=Ln=null,vn()):an},sn.clipExtent=function(fn){return arguments.length?(an=null==fn?(tn=Sn=Tn=Ln=null,ne.Z):(0,s.Z)(tn=+fn[0][0],Sn=+fn[0][1],Tn=+fn[1][0],Ln=+fn[1][1]),vn()):null==tn?null:[[tn,Sn],[Tn,Ln]]},sn.scale=function(fn){return arguments.length?(or=+fn,vn()):or},sn.translate=function(fn){return arguments.length?(mr=+fn[0],Kt=+fn[1],vn()):[mr,Kt]},sn.angle=function(fn){return arguments.length?(rn=(0,c.O$)(Zt=fn%360*c.uR),Jt=(0,c.mC)(Zt),vn()):Zt*c.RW},sn.reflectX=function(fn){return arguments.length?(An=fn?-1:1,vn()):An<0},sn.reflectY=function(fn){return arguments.length?(Rt=fn?-1:1,vn()):Rt<0},sn.fitExtent=function(fn,mn){return(0,ht.qg)(sn,fn,mn)},sn.fitSize=function(fn,mn){return(0,ht.mF)(sn,fn,mn)},sn.fitWidth=function(fn,mn){return(0,ht.V6)(sn,fn,mn)},sn.fitHeight=function(fn,mn){return(0,ht.rf)(sn,fn,mn)},sn}var er=e(26867),Kn=e(57962),yr=e(25382);function lr(Jt,rn){var Sn=(0,c.mC)(rn),Tn=1+(0,c.mC)(Jt)*Sn;return[Sn*(0,c.O$)(Jt)/Tn,(0,c.O$)(rn)/Tn]}function $n(){return(0,st.Z)(lr).scale(250).clipAngle(142)}function Gn(Jt,rn){return[(0,c.cM)((0,c.OR)((c.ou+rn)/2)),-Jt]}function ir(){var Jt=jt(Gn),rn=Jt.center,Sn=Jt.rotate;return Jt.center=function(Tn){return arguments.length?rn([-Tn[1],Tn[0]]):[(Tn=rn())[1],-Tn[0]]},Jt.rotate=function(Tn){return arguments.length?Sn([Tn[0],Tn[1],Tn.length>2?Tn[2]+90:90]):[(Tn=Sn())[0],Tn[1],Tn[2]-90]},Sn([0,0,90]).scale(159.155)}lr.invert=(0,yr.O)(function(Jt){return 2*(0,c.z4)(Jt)}),Gn.invert=function(Jt,rn){return[-rn,2*(0,c.z4)((0,c.Qq)(Jt))-c.ou]}},83074:function(Q,z,e){"use strict";e.d(z,{Z:function(){return A}});var k=e(39695);function A(l,T){var b=l[0]*k.uR,d=l[1]*k.uR,s=T[0]*k.uR,t=T[1]*k.uR,o=(0,k.mC)(d),r=(0,k.O$)(d),n=(0,k.mC)(t),a=(0,k.O$)(t),i=o*(0,k.mC)(b),c=o*(0,k.O$)(b),h=n*(0,k.mC)(s),f=n*(0,k.O$)(s),x=2*(0,k.ZR)((0,k._b)((0,k.Jy)(t-d)+o*n*(0,k.Jy)(s-b))),v=(0,k.O$)(x),g=x?function(y){var p=(0,k.O$)(y*=x)/v,m=(0,k.O$)(x-y)/v,w=m*i+p*h,u=m*c+p*f,S=m*r+p*a;return[(0,k.fv)(u,w)*k.RW,(0,k.fv)(S,(0,k._b)(w*w+u*u))*k.RW]}:function(){return[b*k.RW,d*k.RW]};return g.distance=x,g}},39695:function(Q,z,e){"use strict";e.d(z,{BZ:function(){return d},Ho:function(){return k},Jy:function(){return w},Kh:function(){return p},O$:function(){return x},OR:function(){return y},Qq:function(){return c},RW:function(){return s},Wn:function(){return o},Xx:function(){return v},ZR:function(){return m},_b:function(){return g},aW:function(){return A},cM:function(){return h},fv:function(){return n},mC:function(){return a},mD:function(){return i},ou:function(){return T},pi:function(){return l},pu:function(){return b},sQ:function(){return f},uR:function(){return t},z4:function(){return r}});var k=1e-6,A=1e-12,l=Math.PI,T=l/2,b=l/4,d=2*l,s=180/l,t=l/180,o=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,i=Math.ceil,c=Math.exp,h=Math.log,f=Math.pow,x=Math.sin,v=Math.sign||function(u){return u>0?1:u<0?-1:0},g=Math.sqrt,y=Math.tan;function p(u){return u>1?0:u<-1?l:Math.acos(u)}function m(u){return u>1?T:u<-1?-T:Math.asin(u)}function w(u){return(u=x(u/2))*u}},73182:function(Q,z,e){"use strict";function k(){}e.d(z,{Z:function(){return k}})},3559:function(Q,z,e){"use strict";var k=e(73182),A=1/0,l=A,T=-A,b=T;z.Z={point:function(s,t){s<A&&(A=s),s>T&&(T=s),t<l&&(l=t),t>b&&(b=t)},lineStart:k.Z,lineEnd:k.Z,polygonStart:k.Z,polygonEnd:k.Z,result:function(){var s=[[A,l],[T,b]];return T=b=-(l=A=1/0),s}}},67108:function(Q,z,e){"use strict";e.d(z,{Z:function(){return A}});var k=e(39695);function A(l,T){return(0,k.Wn)(l[0]-T[0])<k.Ho&&(0,k.Wn)(l[1]-T[1])<k.Ho}},23071:function(Q,z,e){"use strict";e.d(z,{Z:function(){return d}});var k=e(33940),A=e(7620),l=e(39695),T=(0,k.Z)();function b(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function d(s,t){var o=b(t),r=t[1],n=(0,l.O$)(r),a=[(0,l.O$)(o),-(0,l.mC)(o),0],i=0,c=0;T.reset(),1===n?r=l.ou+l.Ho:-1===n&&(r=-l.ou-l.Ho);for(var h=0,f=s.length;h<f;++h)if(v=(x=s[h]).length)for(var x,v,g=x[v-1],y=b(g),p=g[1]/2+l.pu,m=(0,l.O$)(p),w=(0,l.mC)(p),u=0;u<v;++u,y=_,m=L,w=C,g=S){var S=x[u],_=b(S),E=S[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),P=_-y,I=P>=0?1:-1,j=I*P,R=j>l.pi,H=m*L;if(T.add((0,l.fv)(H*I*(0,l.O$)(j),w*C+H*(0,l.mC)(j))),i+=R?P+I*l.BZ:P,R^y>=o^_>=o){var F=(0,A.T5)((0,A.Og)(g),(0,A.Og)(S));(0,A.iJ)(F);var U=(0,A.T5)(a,F);(0,A.iJ)(U);var B=(R^P>=0?-1:1)*(0,l.ZR)(U[2]);(r>B||r===B&&(F[0]||F[1]))&&(c+=R^P>=0?1:-1)}}return(i<-l.Ho||i<l.Ho&&T<-l.Ho)^1&c}},25382:function(Q,z,e){"use strict";e.d(z,{O:function(){return l},W:function(){return A}});var k=e(39695);function A(T){return function(b,d){var s=(0,k.mC)(b),t=(0,k.mC)(d),o=T(s*t);return[o*t*(0,k.O$)(b),o*(0,k.O$)(d)]}}function l(T){return function(b,d){var s=(0,k._b)(b*b+d*d),t=T(s),o=(0,k.O$)(t),r=(0,k.mC)(t);return[(0,k.fv)(b*o,s*r),(0,k.ZR)(s&&d*o/s)]}}},12956:function(Q,z,e){"use strict";e.d(z,{Z:function(){return b},l:function(){return T}});var k=e(39695),A=e(25382),l=e(15002),T=(0,A.W)(function(d){return(0,k._b)(2/(1+d))});function b(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,A.O)(function(d){return 2*(0,k.ZR)(d/2)})},17889:function(Q,z,e){"use strict";e.d(z,{N:function(){return T},Z:function(){return b}});var k=e(39695),A=e(25382),l=e(15002),T=(0,A.W)(function(d){return(d=(0,k.Kh)(d))&&d/(0,k.O$)(d)});function b(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,A.O)(function(d){return d})},97492:function(Q,z,e){"use strict";e.d(z,{Z:function(){return l},k:function(){return A}});var k=e(15002);function A(T,b){return[T,b]}function l(){return(0,k.Z)(A).scale(152.63)}A.invert=A},47589:function(Q,z,e){"use strict";e.d(z,{V6:function(){return d},mF:function(){return b},qg:function(){return T},rf:function(){return s}});var k=e(72736),A=e(3559);function l(t,o,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),(0,k.Z)(r,t.stream(A.Z)),o(A.Z.result()),null!=n&&t.clipExtent(n),t}function T(t,o,r){return l(t,function(n){var a=o[1][0]-o[0][0],i=o[1][1]-o[0][1],c=Math.min(a/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),h=+o[0][0]+(a-c*(n[1][0]+n[0][0]))/2,f=+o[0][1]+(i-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([h,f])},r)}function b(t,o,r){return T(t,[[0,0],o],r)}function d(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][0]-n[0][0]),c=(a-i*(n[1][0]+n[0][0]))/2,h=-i*n[0][1];t.scale(150*i).translate([c,h])},r)}function s(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][1]-n[0][1]),c=-i*n[0][0],h=(a-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([c,h])},r)}},98936:function(Q,z,e){"use strict";e.d(z,{M:function(){return T},Z:function(){return b}});var k=e(39695),A=e(25382),l=e(15002);function T(d,s){var t=(0,k.mC)(s),o=(0,k.mC)(d)*t;return[t*(0,k.O$)(d)/o,(0,k.O$)(s)/o]}function b(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,A.O)(k.z4)},15002:function(Q,z,e){"use strict";e.d(z,{Z:function(){return f},r:function(){return x}});var k=e(87070),A=e(1457),l=e(87605),T=e(96059),b=e(8593),d=e(39695),s=e(49386),t=e(64684),o=e(47589),r=e(7620),n=(0,d.mC)(30*d.uR);function a(v,g){return+g?function(y,p){function m(w,u,S,_,E,L,C,P,I,j,R,H,F,U){var B=C-w,N=P-u,J=B*B+N*N;if(J>4*p&&F--){var Z=_+j,V=E+R,W=L+H,X=(0,d._b)(Z*Z+V*V+W*W),K=(0,d.ZR)(W/=X),ne=(0,d.Wn)((0,d.Wn)(W)-1)<d.Ho||(0,d.Wn)(S-I)<d.Ho?(S+I)/2:(0,d.fv)(V,Z),re=y(ne,K),ae=re[0],le=re[1],pe=ae-w,xe=le-u,ye=N*pe-B*xe;(ye*ye/J>p||(0,d.Wn)((B*pe+N*xe)/J-.5)>.3||_*j+E*R+L*H<n)&&(m(w,u,S,_,E,L,ae,le,ne,Z/=X,V/=X,W,F,U),U.point(ae,le),m(ae,le,ne,Z,V,W,C,P,I,j,R,H,F,U))}}return function(w){var u,S,_,E,L,C,P,I,j,R,H,F,U={point:B,lineStart:N,lineEnd:Z,polygonStart:function(){w.polygonStart(),U.lineStart=V},polygonEnd:function(){w.polygonEnd(),U.lineStart=N}};function B(K,ne){K=y(K,ne),w.point(K[0],K[1])}function N(){I=NaN,U.point=J,w.lineStart()}function J(K,ne){var re=(0,r.Og)([K,ne]),ae=y(K,ne);m(I,j,P,R,H,F,I=ae[0],j=ae[1],P=K,R=re[0],H=re[1],F=re[2],16,w),w.point(I,j)}function Z(){U.point=B,w.lineEnd()}function V(){N(),U.point=W,U.lineEnd=X}function W(K,ne){J(u=K,ne),S=I,_=j,E=R,L=H,C=F,U.point=J}function X(){m(I,j,P,R,H,F,S,_,u,E,L,C,16,w),U.lineEnd=Z,Z()}return U}}(v,g):(y=v,(0,t.l)({point:function(p,m){p=y(p,m),this.stream.point(p[0],p[1])}}));var y}var i=(0,t.l)({point:function(v,g){this.stream.point(v*d.uR,g*d.uR)}});function c(v,g,y,p,m){function w(u,S){return[g+v*(u*=p),y-v*(S*=m)]}return w.invert=function(u,S){return[(u-g)/v*p,(y-S)/v*m]},w}function h(v,g,y,p,m,w){var u=(0,d.mC)(w),S=(0,d.O$)(w),_=u*v,E=S*v,L=u/v,C=S/v,P=(S*y-u*g)/v,I=(S*g+u*y)/v;function j(R,H){return[_*(R*=p)-E*(H*=m)+g,y-E*R-_*H]}return j.invert=function(R,H){return[p*(L*R-C*H+P),m*(I-C*R-L*H)]},j}function f(v){return x(function(){return v})()}function x(v){var g,y,p,m,w,u,S,_,E,L,C=150,P=480,I=250,j=0,R=0,H=0,F=0,U=0,B=0,N=1,J=1,Z=null,V=k.Z,W=null,X=b.Z,K=.5;function ne(pe){return _(pe[0]*d.uR,pe[1]*d.uR)}function re(pe){return(pe=_.invert(pe[0],pe[1]))&&[pe[0]*d.RW,pe[1]*d.RW]}function ae(){var pe=h(C,0,0,N,J,B).apply(null,g(j,R)),xe=(B?h:c)(C,P-pe[0],I-pe[1],N,J,B);return y=(0,s.I)(H,F,U),S=(0,T.Z)(g,xe),_=(0,T.Z)(y,S),u=a(S,K),le()}function le(){return E=L=null,ne}return ne.stream=function(pe){return E&&L===pe?E:E=i((xe=y,(0,t.l)({point:function(ye,se){var fe=xe(ye,se);return this.stream.point(fe[0],fe[1])}}))(V(u(X(L=pe)))));var xe},ne.preclip=function(pe){return arguments.length?(V=pe,Z=void 0,le()):V},ne.postclip=function(pe){return arguments.length?(X=pe,W=p=m=w=null,le()):X},ne.clipAngle=function(pe){return arguments.length?(V=+pe?(0,A.Z)(Z=pe*d.uR):(Z=null,k.Z),le()):Z*d.RW},ne.clipExtent=function(pe){return arguments.length?(X=null==pe?(W=p=m=w=null,b.Z):(0,l.Z)(W=+pe[0][0],p=+pe[0][1],m=+pe[1][0],w=+pe[1][1]),le()):null==W?null:[[W,p],[m,w]]},ne.scale=function(pe){return arguments.length?(C=+pe,ae()):C},ne.translate=function(pe){return arguments.length?(P=+pe[0],I=+pe[1],ae()):[P,I]},ne.center=function(pe){return arguments.length?(j=pe[0]%360*d.uR,R=pe[1]%360*d.uR,ae()):[j*d.RW,R*d.RW]},ne.rotate=function(pe){return arguments.length?(H=pe[0]%360*d.uR,F=pe[1]%360*d.uR,U=pe.length>2?pe[2]%360*d.uR:0,ae()):[H*d.RW,F*d.RW,U*d.RW]},ne.angle=function(pe){return arguments.length?(B=pe%360*d.uR,ae()):B*d.RW},ne.reflectX=function(pe){return arguments.length?(N=pe?-1:1,ae()):N<0},ne.reflectY=function(pe){return arguments.length?(J=pe?-1:1,ae()):J<0},ne.precision=function(pe){return arguments.length?(u=a(S,K=pe*pe),le()):(0,d._b)(K)},ne.fitExtent=function(pe,xe){return(0,o.qg)(ne,pe,xe)},ne.fitSize=function(pe,xe){return(0,o.mF)(ne,pe,xe)},ne.fitWidth=function(pe,xe){return(0,o.V6)(ne,pe,xe)},ne.fitHeight=function(pe,xe){return(0,o.rf)(ne,pe,xe)},function(){return g=v.apply(this,arguments),ne.invert=g.invert&&re,ae()}}},26867:function(Q,z,e){"use strict";e.d(z,{K:function(){return l},Z:function(){return T}});var k=e(15002),A=e(39695);function l(b,d){var s=d*d,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),d*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,k.Z)(l).scale(175.295)}l.invert=function(b,d){var s,t=d,o=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-d)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,A.Wn)(s)>A.Ho&&--o>0);return[b/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},57962:function(Q,z,e){"use strict";e.d(z,{I:function(){return T},Z:function(){return b}});var k=e(39695),A=e(25382),l=e(15002);function T(d,s){return[(0,k.mC)(s)*(0,k.O$)(d),(0,k.O$)(s)]}function b(){return(0,l.Z)(T).scale(249.5).clipAngle(90+k.Ho)}T.invert=(0,A.O)(k.ZR)},49386:function(Q,z,e){"use strict";e.d(z,{I:function(){return T},Z:function(){return t}});var k=e(96059),A=e(39695);function l(o,r){return[(0,A.Wn)(o)>A.pi?o+Math.round(-o/A.BZ)*A.BZ:o,r]}function T(o,r,n){return(o%=A.BZ)?r||n?(0,k.Z)(d(o),s(r,n)):d(o):r||n?s(r,n):l}function b(o){return function(r,n){return[(r+=o)>A.pi?r-A.BZ:r<-A.pi?r+A.BZ:r,n]}}function d(o){var r=b(o);return r.invert=b(-o),r}function s(o,r){var n=(0,A.mC)(o),a=(0,A.O$)(o),i=(0,A.mC)(r),c=(0,A.O$)(r);function h(f,x){var v=(0,A.mC)(x),g=(0,A.mC)(f)*v,y=(0,A.O$)(f)*v,p=(0,A.O$)(x),m=p*n+g*a;return[(0,A.fv)(y*i-m*c,g*n-p*a),(0,A.ZR)(m*i+y*c)]}return h.invert=function(f,x){var v=(0,A.mC)(x),g=(0,A.mC)(f)*v,y=(0,A.O$)(f)*v,p=(0,A.O$)(x),m=p*i-y*c;return[(0,A.fv)(y*i+p*c,g*n+m*a),(0,A.ZR)(m*n-g*a)]},h}function t(o){function r(n){return(n=o(n[0]*A.uR,n[1]*A.uR))[0]*=A.RW,n[1]*=A.RW,n}return o=T(o[0]*A.uR,o[1]*A.uR,o.length>2?o[2]*A.uR:0),r.invert=function(n){return(n=o.invert(n[0]*A.uR,n[1]*A.uR))[0]*=A.RW,n[1]*=A.RW,n},r}l.invert=l},72736:function(Q,z,e){"use strict";function k(s,t){s&&l.hasOwnProperty(s.type)&&l[s.type](s,t)}e.d(z,{Z:function(){return d}});var A={Feature:function(s,t){k(s.geometry,t)},FeatureCollection:function(s,t){for(var o=s.features,r=-1,n=o.length;++r<n;)k(o[r].geometry,t)}},l={Sphere:function(s,t){t.sphere()},Point:function(s,t){t.point((s=s.coordinates)[0],s[1],s[2])},MultiPoint:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)t.point((s=o[r])[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)T(o[r],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)b(o[r],t)},GeometryCollection:function(s,t){for(var o=s.geometries,r=-1,n=o.length;++r<n;)k(o[r],t)}};function T(s,t,o){var r,n=-1,a=s.length-o;for(t.lineStart();++n<a;)t.point((r=s[n])[0],r[1],r[2]);t.lineEnd()}function b(s,t){var o=-1,r=s.length;for(t.polygonStart();++o<r;)T(s[o],t,1);t.polygonEnd()}function d(s,t){s&&A.hasOwnProperty(s.type)?A[s.type](s,t):k(s,t)}},64684:function(Q,z,e){"use strict";function k(T){return{stream:A(T)}}function A(T){return function(b){var d=new l;for(var s in T)d[s]=T[s];return d.stream=b,d}}function l(){}e.d(z,{Z:function(){return k},l:function(){return A}}),l.prototype={constructor:l,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(Q,z,e){"use strict";function k(Te,$){return Te.parent===$.parent?1:2}function A(Te,$){return Te+$.x}function l(Te,$){return Math.max(Te,$.y)}function T(){var Te=k,$=1,oe=1,he=!1;function me(Me){var Ie,Pe=0;Me.eachAfter(function(De){var Ve,He=De.children;He?(De.x=(Ve=He).reduce(A,0)/Ve.length,De.y=function(Ve){return 1+Ve.reduce(l,0)}(He)):(De.x=Ie?Pe+=Te(De,Ie):0,De.y=0,Ie=De)});var ze=function(De){for(var He;He=De.children;)De=He[0];return De}(Me),ce=function(De){for(var He;He=De.children;)De=He[He.length-1];return De}(Me),ge=ze.x-Te(ze,ce)/2,_e=ce.x+Te(ce,ze)/2;return Me.eachAfter(he?function(De){De.x=(De.x-Me.x)*$,De.y=(Me.y-De.y)*oe}:function(De){De.x=(De.x-ge)/(_e-ge)*$,De.y=(1-(Me.y?De.y/Me.y:1))*oe})}return me.separation=function(Me){return arguments.length?(Te=Me,me):Te},me.size=function(Me){return arguments.length?(he=!1,$=+Me[0],oe=+Me[1],me):he?null:[$,oe]},me.nodeSize=function(Me){return arguments.length?(he=!0,$=+Me[0],oe=+Me[1],me):he?[$,oe]:null},me}function b(Te){var $=0,oe=Te.children,he=oe&&oe.length;if(he)for(;--he>=0;)$+=oe[he].value;else $=1;Te.value=$}function d(Te,$){var oe,he,me,Me,Ie,Pe=new r(Te),ze=+Te.value&&(Pe.value=Te.value),ce=[Pe];for(null==$&&($=s);oe=ce.pop();)if(ze&&(oe.value=+oe.data.value),(me=$(oe.data))&&(Ie=me.length))for(oe.children=new Array(Ie),Me=Ie-1;Me>=0;--Me)ce.push(he=oe.children[Me]=new r(me[Me])),he.parent=oe,he.depth=oe.depth+1;return Pe.eachBefore(o)}function s(Te){return Te.children}function t(Te){Te.data=Te.data.data}function o(Te){var $=0;do{Te.height=$}while((Te=Te.parent)&&Te.height<++$)}function r(Te){this.data=Te,this.depth=this.height=0,this.parent=null}e.r(z),e.d(z,{cluster:function(){return T},hierarchy:function(){return d},pack:function(){return I},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return W},tree:function(){return pe},treemap:function(){return Ee},treemapBinary:function(){return de},treemapDice:function(){return U},treemapResquarify:function(){return ke},treemapSlice:function(){return xe},treemapSliceDice:function(){return we},treemapSquarify:function(){return fe}}),r.prototype=d.prototype={constructor:r,count:function(){return this.eachAfter(b)},each:function(Te){var $,oe,he,me,Me=this,Ie=[Me];do{for($=Ie.reverse(),Ie=[];Me=$.pop();)if(Te(Me),oe=Me.children)for(he=0,me=oe.length;he<me;++he)Ie.push(oe[he])}while(Ie.length);return this},eachAfter:function(Te){for(var $,oe,he,me=this,Me=[me],Ie=[];me=Me.pop();)if(Ie.push(me),$=me.children)for(oe=0,he=$.length;oe<he;++oe)Me.push($[oe]);for(;me=Ie.pop();)Te(me);return this},eachBefore:function(Te){for(var $,oe,he=this,me=[he];he=me.pop();)if(Te(he),$=he.children)for(oe=$.length-1;oe>=0;--oe)me.push($[oe]);return this},sum:function(Te){return this.eachAfter(function($){for(var oe=+Te($.data)||0,he=$.children,me=he&&he.length;--me>=0;)oe+=he[me].value;$.value=oe})},sort:function(Te){return this.eachBefore(function($){$.children&&$.children.sort(Te)})},path:function(Te){for(var $=this,oe=function(Me,Ie){if(Me===Ie)return Me;var Pe=Me.ancestors(),ze=Ie.ancestors(),ce=null;for(Me=Pe.pop(),Ie=ze.pop();Me===Ie;)ce=Me,Me=Pe.pop(),Ie=ze.pop();return ce}($,Te),he=[$];$!==oe;)he.push($=$.parent);for(var me=he.length;Te!==oe;)he.splice(me,0,Te),Te=Te.parent;return he},ancestors:function(){for(var Te=this,$=[Te];Te=Te.parent;)$.push(Te);return $},descendants:function(){var Te=[];return this.each(function($){Te.push($)}),Te},leaves:function(){var Te=[];return this.eachBefore(function($){$.children||Te.push($)}),Te},links:function(){var Te=this,$=[];return Te.each(function(oe){oe!==Te&&$.push({source:oe.parent,target:oe})}),$},copy:function(){return d(this).eachBefore(t)}};var n=Array.prototype.slice;function a(Te){for(var $,oe,he=0,me=(Te=function(Ie){for(var Pe,ze,ce=Ie.length;ce;)ze=Math.random()*ce--|0,Pe=Ie[ce],Ie[ce]=Ie[ze],Ie[ze]=Pe;return Ie}(n.call(Te))).length,Me=[];he<me;)$=Te[he],oe&&h(oe,$)?++he:(oe=x(Me=i(Me,$)),he=0);return oe}function i(Te,$){var oe,he;if(f($,Te))return[$];for(oe=0;oe<Te.length;++oe)if(c($,Te[oe])&&f(v(Te[oe],$),Te))return[Te[oe],$];for(oe=0;oe<Te.length-1;++oe)for(he=oe+1;he<Te.length;++he)if(c(v(Te[oe],Te[he]),$)&&c(v(Te[oe],$),Te[he])&&c(v(Te[he],$),Te[oe])&&f(g(Te[oe],Te[he],$),Te))return[Te[oe],Te[he],$];throw new Error}function c(Te,$){var oe=Te.r-$.r,he=$.x-Te.x,me=$.y-Te.y;return oe<0||oe*oe<he*he+me*me}function h(Te,$){var oe=Te.r-$.r+1e-6,he=$.x-Te.x,me=$.y-Te.y;return oe>0&&oe*oe>he*he+me*me}function f(Te,$){for(var oe=0;oe<$.length;++oe)if(!h(Te,$[oe]))return!1;return!0}function x(Te){switch(Te.length){case 1:return{x:($=Te[0]).x,y:$.y,r:$.r};case 2:return v(Te[0],Te[1]);case 3:return g(Te[0],Te[1],Te[2])}var $}function v(Te,$){var oe=Te.x,he=Te.y,me=Te.r,Me=$.x,Ie=$.y,Pe=$.r,ze=Me-oe,ce=Ie-he,ge=Pe-me,_e=Math.sqrt(ze*ze+ce*ce);return{x:(oe+Me+ze/_e*ge)/2,y:(he+Ie+ce/_e*ge)/2,r:(_e+me+Pe)/2}}function g(Te,$,oe){var he=Te.x,me=Te.y,Me=Te.r,Ie=$.x,Pe=$.y,ze=$.r,ce=oe.x,ge=oe.y,_e=oe.r,De=he-Ie,He=he-ce,Ve=me-Pe,nt=me-ge,tt=ze-Me,at=_e-Me,dt=he*he+me*me-Me*Me,wt=dt-Ie*Ie-Pe*Pe+ze*ze,bt=dt-ce*ce-ge*ge+_e*_e,_t=He*Ve-De*nt,Lt=(Ve*bt-nt*wt)/(2*_t)-he,Ct=(nt*tt-Ve*at)/_t,Ot=(He*wt-De*bt)/(2*_t)-me,Ht=(De*at-He*tt)/_t,It=Ct*Ct+Ht*Ht-1,Ge=2*(Me+Lt*Ct+Ot*Ht),Ze=Lt*Lt+Ot*Ot-Me*Me,Be=-(It?(Ge+Math.sqrt(Ge*Ge-4*It*Ze))/(2*It):Ze/Ge);return{x:he+Lt+Ct*Be,y:me+Ot+Ht*Be,r:Be}}function y(Te,$,oe){var he,me,Me,Ie,Pe=Te.x-$.x,ze=Te.y-$.y,ce=Pe*Pe+ze*ze;ce?(me=$.r+oe.r,Ie=Te.r+oe.r,(me*=me)>(Ie*=Ie)?(he=(ce+Ie-me)/(2*ce),Me=Math.sqrt(Math.max(0,Ie/ce-he*he)),oe.x=Te.x-he*Pe-Me*ze,oe.y=Te.y-he*ze+Me*Pe):(he=(ce+me-Ie)/(2*ce),Me=Math.sqrt(Math.max(0,me/ce-he*he)),oe.x=$.x+he*Pe-Me*ze,oe.y=$.y+he*ze+Me*Pe)):(oe.x=$.x+oe.r,oe.y=$.y)}function p(Te,$){var oe=Te.r+$.r-1e-6,he=$.x-Te.x,me=$.y-Te.y;return oe>0&&oe*oe>he*he+me*me}function m(Te){var $=Te._,oe=Te.next._,he=$.r+oe.r,me=($.x*oe.r+oe.x*$.r)/he,Me=($.y*oe.r+oe.y*$.r)/he;return me*me+Me*Me}function w(Te){this._=Te,this.next=null,this.previous=null}function u(Te){if(!(me=Te.length))return 0;var $,oe,he,me,Me,Ie,Pe,ze,ce,ge,_e;if(($=Te[0]).x=0,$.y=0,!(me>1))return $.r;if($.x=-(oe=Te[1]).r,oe.x=$.r,oe.y=0,!(me>2))return $.r+oe.r;y(oe,$,he=Te[2]),$=new w($),oe=new w(oe),he=new w(he),$.next=he.previous=oe,oe.next=$.previous=he,he.next=oe.previous=$;e:for(Pe=3;Pe<me;++Pe){y($._,oe._,he=Te[Pe]),he=new w(he),ze=oe.next,ce=$.previous,ge=oe._.r,_e=$._.r;do{if(ge<=_e){if(p(ze._,he._)){$.next=oe=ze,oe.previous=$,--Pe;continue e}ge+=ze._.r,ze=ze.next}else{if(p(ce._,he._)){($=ce).next=oe,oe.previous=$,--Pe;continue e}_e+=ce._.r,ce=ce.previous}}while(ze!==ce.next);for(he.previous=$,he.next=oe,$.next=oe.previous=oe=he,Me=m($);(he=he.next)!==oe;)(Ie=m(he))<Me&&($=he,Me=Ie);oe=$.next}for($=[oe._],he=oe;(he=he.next)!==oe;)$.push(he._);for(he=a($),Pe=0;Pe<me;++Pe)($=Te[Pe]).x-=he.x,$.y-=he.y;return he.r}function S(Te){return u(Te),Te}function E(Te){if("function"!=typeof Te)throw new Error;return Te}function L(){return 0}function C(Te){return function(){return Te}}function P(Te){return Math.sqrt(Te.value)}function I(){var Te=null,$=1,oe=1,he=L;function me(Me){return Me.x=$/2,Me.y=oe/2,Te?Me.eachBefore(j(Te)).eachAfter(R(he,.5)).eachBefore(H(1)):Me.eachBefore(j(P)).eachAfter(R(L,1)).eachAfter(R(he,Me.r/Math.min($,oe))).eachBefore(H(Math.min($,oe)/(2*Me.r))),Me}return me.radius=function(Me){return arguments.length?(Te=function _(Te){return null==Te?null:E(Te)}(Me),me):Te},me.size=function(Me){return arguments.length?($=+Me[0],oe=+Me[1],me):[$,oe]},me.padding=function(Me){return arguments.length?(he="function"==typeof Me?Me:C(+Me),me):he},me}function j(Te){return function($){$.children||($.r=Math.max(0,+Te($)||0))}}function R(Te,$){return function(oe){if(he=oe.children){var he,me,Me,Ie=he.length,Pe=Te(oe)*$||0;if(Pe)for(me=0;me<Ie;++me)he[me].r+=Pe;if(Me=u(he),Pe)for(me=0;me<Ie;++me)he[me].r-=Pe;oe.r=Me+Pe}}}function H(Te){return function($){var oe=$.parent;$.r*=Te,oe&&($.x=oe.x+Te*$.x,$.y=oe.y+Te*$.y)}}function F(Te){Te.x0=Math.round(Te.x0),Te.y0=Math.round(Te.y0),Te.x1=Math.round(Te.x1),Te.y1=Math.round(Te.y1)}function U(Te,$,oe,he,me){for(var Me,Ie=Te.children,Pe=-1,ze=Ie.length,ce=Te.value&&(he-$)/Te.value;++Pe<ze;)(Me=Ie[Pe]).y0=oe,Me.y1=me,Me.x0=$,Me.x1=$+=Me.value*ce}function B(){var Te=1,$=1,oe=0,he=!1;function me(Me){var Pe,ze,Ie=Me.height+1;return Me.x0=Me.y0=oe,Me.x1=Te,Me.y1=$/Ie,Me.eachBefore((Pe=$,ze=Ie,function(ce){ce.children&&U(ce,ce.x0,Pe*(ce.depth+1)/ze,ce.x1,Pe*(ce.depth+2)/ze);var ge=ce.x0,_e=ce.y0,De=ce.x1-oe,He=ce.y1-oe;De<ge&&(ge=De=(ge+De)/2),He<_e&&(_e=He=(_e+He)/2),ce.x0=ge,ce.y0=_e,ce.x1=De,ce.y1=He})),he&&Me.eachBefore(F),Me}return me.round=function(Me){return arguments.length?(he=!!Me,me):he},me.size=function(Me){return arguments.length?(Te=+Me[0],$=+Me[1],me):[Te,$]},me.padding=function(Me){return arguments.length?(oe=+Me,me):oe},me}var N={depth:-1},J={};function Z(Te){return Te.id}function V(Te){return Te.parentId}function W(){var Te=Z,$=V;function oe(he){var me,Me,Ie,Pe,ze,ce,ge,_e=he.length,De=new Array(_e),He={};for(Me=0;Me<_e;++Me)ze=De[Me]=new r(me=he[Me]),null!=(ce=Te(me,Me,he))&&(ce+="")&&(He[ge="$"+(ze.id=ce)]=ge in He?J:ze);for(Me=0;Me<_e;++Me)if(ze=De[Me],null!=(ce=$(he[Me],Me,he))&&(ce+="")){if(!(Pe=He["$"+ce]))throw new Error("missing: "+ce);if(Pe===J)throw new Error("ambiguous: "+ce);Pe.children?Pe.children.push(ze):Pe.children=[ze],ze.parent=Pe}else{if(Ie)throw new Error("multiple roots");Ie=ze}if(!Ie)throw new Error("no root");if(Ie.parent=N,Ie.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--_e}).eachBefore(o),Ie.parent=null,_e>0)throw new Error("cycle");return Ie}return oe.id=function(he){return arguments.length?(Te=E(he),oe):Te},oe.parentId=function(he){return arguments.length?($=E(he),oe):$},oe}function X(Te,$){return Te.parent===$.parent?1:2}function K(Te){var $=Te.children;return $?$[0]:Te.t}function ne(Te){var $=Te.children;return $?$[$.length-1]:Te.t}function re(Te,$,oe){var he=oe/($.i-Te.i);$.c-=he,$.s+=oe,Te.c+=he,$.z+=oe,$.m+=oe}function ae(Te,$,oe){return Te.a.parent===$.parent?Te.a:oe}function le(Te,$){this._=Te,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=$}function pe(){var Te=X,$=1,oe=1,he=null;function me(ze){var ce=function(at){for(var dt,wt,bt,_t,Lt,Ct=new le(at,0),Ot=[Ct];dt=Ot.pop();)if(bt=dt._.children)for(dt.children=new Array(Lt=bt.length),_t=Lt-1;_t>=0;--_t)Ot.push(wt=dt.children[_t]=new le(bt[_t],_t)),wt.parent=dt;return(Ct.parent=new le(null,0)).children=[Ct],Ct}(ze);if(ce.eachAfter(Me),ce.parent.m=-ce.z,ce.eachBefore(Ie),he)ze.eachBefore(Pe);else{var ge=ze,_e=ze,De=ze;ze.eachBefore(function(at){at.x<ge.x&&(ge=at),at.x>_e.x&&(_e=at),at.depth>De.depth&&(De=at)});var He=ge===_e?1:Te(ge,_e)/2,Ve=He-ge.x,nt=$/(_e.x+He+Ve),tt=oe/(De.depth||1);ze.eachBefore(function(at){at.x=(at.x+Ve)*nt,at.y=at.depth*tt})}return ze}function Me(ze){var ce=ze.children,ge=ze.parent.children,_e=ze.i?ge[ze.i-1]:null;if(ce){!function(He){for(var Ve,nt=0,tt=0,at=He.children,dt=at.length;--dt>=0;)(Ve=at[dt]).z+=nt,Ve.m+=nt,nt+=Ve.s+(tt+=Ve.c)}(ze);var De=(ce[0].z+ce[ce.length-1].z)/2;_e?(ze.z=_e.z+Te(ze._,_e._),ze.m=ze.z-De):ze.z=De}else _e&&(ze.z=_e.z+Te(ze._,_e._));ze.parent.A=function(He,Ve,nt){if(Ve){for(var tt,at=He,dt=He,wt=Ve,bt=at.parent.children[0],_t=at.m,Lt=dt.m,Ct=wt.m,Ot=bt.m;wt=ne(wt),at=K(at),wt&&at;)bt=K(bt),(dt=ne(dt)).a=He,(tt=wt.z+Ct-at.z-_t+Te(wt._,at._))>0&&(re(ae(wt,He,nt),He,tt),_t+=tt,Lt+=tt),Ct+=wt.m,_t+=at.m,Ot+=bt.m,Lt+=dt.m;wt&&!ne(dt)&&(dt.t=wt,dt.m+=Ct-Lt),at&&!K(bt)&&(bt.t=at,bt.m+=_t-Ot,nt=He)}return nt}(ze,_e,ze.parent.A||ge[0])}function Ie(ze){ze._.x=ze.z+ze.parent.m,ze.m+=ze.parent.m}function Pe(ze){ze.x*=$,ze.y=ze.depth*oe}return me.separation=function(ze){return arguments.length?(Te=ze,me):Te},me.size=function(ze){return arguments.length?(he=!1,$=+ze[0],oe=+ze[1],me):he?null:[$,oe]},me.nodeSize=function(ze){return arguments.length?(he=!0,$=+ze[0],oe=+ze[1],me):he?[$,oe]:null},me}function xe(Te,$,oe,he,me){for(var Me,Ie=Te.children,Pe=-1,ze=Ie.length,ce=Te.value&&(me-oe)/Te.value;++Pe<ze;)(Me=Ie[Pe]).x0=$,Me.x1=he,Me.y0=oe,Me.y1=oe+=Me.value*ce}le.prototype=Object.create(r.prototype);var ye=(1+Math.sqrt(5))/2;function se(Te,$,oe,he,me,Me){for(var Ie,Pe,ze,ce,ge,_e,De,He,Ve,nt,tt,at=[],dt=$.children,wt=0,bt=0,_t=dt.length,Lt=$.value;wt<_t;){ze=me-oe,ce=Me-he;do{ge=dt[bt++].value}while(!ge&&bt<_t);for(_e=De=ge,tt=ge*ge*(nt=Math.max(ce/ze,ze/ce)/(Lt*Te)),Ve=Math.max(De/tt,tt/_e);bt<_t;++bt){if(ge+=Pe=dt[bt].value,Pe<_e&&(_e=Pe),Pe>De&&(De=Pe),tt=ge*ge*nt,(He=Math.max(De/tt,tt/_e))>Ve){ge-=Pe;break}Ve=He}at.push(Ie={value:ge,dice:ze<ce,children:dt.slice(wt,bt)}),Ie.dice?U(Ie,oe,he,me,Lt?he+=ce*ge/Lt:Me):xe(Ie,oe,he,Lt?oe+=ze*ge/Lt:me,Me),Lt-=ge,wt=bt}return at}var fe=function Te($){function oe(he,me,Me,Ie,Pe){se($,he,me,Me,Ie,Pe)}return oe.ratio=function(he){return Te((he=+he)>1?he:1)},oe}(ye);function Ee(){var Te=fe,$=!1,oe=1,he=1,me=[0],Me=L,Ie=L,Pe=L,ze=L,ce=L;function ge(De){return De.x0=De.y0=0,De.x1=oe,De.y1=he,De.eachBefore(_e),me=[0],$&&De.eachBefore(F),De}function _e(De){var He=me[De.depth],Ve=De.x0+He,nt=De.y0+He,tt=De.x1-He,at=De.y1-He;tt<Ve&&(Ve=tt=(Ve+tt)/2),at<nt&&(nt=at=(nt+at)/2),De.x0=Ve,De.y0=nt,De.x1=tt,De.y1=at,De.children&&(He=me[De.depth+1]=Me(De)/2,Ve+=ce(De)-He,nt+=Ie(De)-He,(tt-=Pe(De)-He)<Ve&&(Ve=tt=(Ve+tt)/2),(at-=ze(De)-He)<nt&&(nt=at=(nt+at)/2),Te(De,Ve,nt,tt,at))}return ge.round=function(De){return arguments.length?($=!!De,ge):$},ge.size=function(De){return arguments.length?(oe=+De[0],he=+De[1],ge):[oe,he]},ge.tile=function(De){return arguments.length?(Te=E(De),ge):Te},ge.padding=function(De){return arguments.length?ge.paddingInner(De).paddingOuter(De):ge.paddingInner()},ge.paddingInner=function(De){return arguments.length?(Me="function"==typeof De?De:C(+De),ge):Me},ge.paddingOuter=function(De){return arguments.length?ge.paddingTop(De).paddingRight(De).paddingBottom(De).paddingLeft(De):ge.paddingTop()},ge.paddingTop=function(De){return arguments.length?(Ie="function"==typeof De?De:C(+De),ge):Ie},ge.paddingRight=function(De){return arguments.length?(Pe="function"==typeof De?De:C(+De),ge):Pe},ge.paddingBottom=function(De){return arguments.length?(ze="function"==typeof De?De:C(+De),ge):ze},ge.paddingLeft=function(De){return arguments.length?(ce="function"==typeof De?De:C(+De),ge):ce},ge}function de(Te,$,oe,he,me){var Me,Ie,Pe=Te.children,ze=Pe.length,ce=new Array(ze+1);for(ce[0]=Ie=Me=0;Me<ze;++Me)ce[Me+1]=Ie+=Pe[Me].value;!function ge(_e,De,He,Ve,nt,tt,at){if(_e>=De-1){var dt=Pe[_e];return dt.x0=Ve,dt.y0=nt,dt.x1=tt,void(dt.y1=at)}for(var wt=ce[_e],bt=He/2+wt,_t=_e+1,Lt=De-1;_t<Lt;){var Ct=_t+Lt>>>1;ce[Ct]<bt?_t=Ct+1:Lt=Ct}bt-ce[_t-1]<ce[_t]-bt&&_e+1<_t&&--_t;var Ot=ce[_t]-wt,Ht=He-Ot;if(tt-Ve>at-nt){var It=(Ve*Ht+tt*Ot)/He;ge(_e,_t,Ot,Ve,nt,It,at),ge(_t,De,Ht,It,nt,tt,at)}else{var Ge=(nt*Ht+at*Ot)/He;ge(_e,_t,Ot,Ve,nt,tt,Ge),ge(_t,De,Ht,Ve,Ge,tt,at)}}(0,ze,Te.value,$,oe,he,me)}function we(Te,$,oe,he,me){(1&Te.depth?xe:U)(Te,$,oe,he,me)}var ke=function Te($){function oe(he,me,Me,Ie,Pe){if((ze=he._squarify)&&ze.ratio===$)for(var ze,ce,ge,_e,De,He=-1,Ve=ze.length,nt=he.value;++He<Ve;){for(ge=(ce=ze[He]).children,_e=ce.value=0,De=ge.length;_e<De;++_e)ce.value+=ge[_e].value;ce.dice?U(ce,me,Me,Ie,Me+=(Pe-Me)*ce.value/nt):xe(ce,me,Me,me+=(Ie-me)*ce.value/nt,Pe),nt-=ce.value}else he._squarify=ze=se($,he,me,Me,Ie,Pe),ze.ratio=$}return oe.ratio=function(he){return Te((he=+he)>1?he:1)},oe}(ye)},45879:function(Q,z,e){"use strict";e.d(z,{h5:function(){return h}});var k=Math.PI,A=2*k,l=1e-6,T=A-l;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new b}b.prototype=d.prototype={constructor:b,moveTo:function(f,x){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+x)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,x){this._+="L"+(this._x1=+f)+","+(this._y1=+x)},quadraticCurveTo:function(f,x,v,g){this._+="Q"+ +f+","+ +x+","+(this._x1=+v)+","+(this._y1=+g)},bezierCurveTo:function(f,x,v,g,y,p){this._+="C"+ +f+","+ +x+","+ +v+","+ +g+","+(this._x1=+y)+","+(this._y1=+p)},arcTo:function(f,x,v,g,y){var p=this._x1,m=this._y1,w=(v=+v)-(f=+f),u=(g=+g)-(x=+x),S=p-f,_=m-x,E=S*S+_*_;if((y=+y)<0)throw new Error("negative radius: "+y);if(null===this._x1)this._+="M"+(this._x1=f)+","+(this._y1=x);else if(E>l)if(Math.abs(_*w-u*S)>l&&y){var L=v-p,C=g-m,P=w*w+u*u,I=L*L+C*C,j=Math.sqrt(P),R=Math.sqrt(E),H=y*Math.tan((k-Math.acos((P+E-I)/(2*j*R)))/2),F=H/R,U=H/j;Math.abs(F-1)>l&&(this._+="L"+(f+F*S)+","+(x+F*_)),this._+="A"+y+","+y+",0,0,"+ +(_*L>S*C)+","+(this._x1=f+U*w)+","+(this._y1=x+U*u)}else this._+="L"+(this._x1=f)+","+(this._y1=x)},arc:function(f,x,v,g,y,p){f=+f,x=+x,p=!!p;var m=(v=+v)*Math.cos(g),w=v*Math.sin(g),u=f+m,S=x+w,_=1^p,E=p?g-y:y-g;if(v<0)throw new Error("negative radius: "+v);null===this._x1?this._+="M"+u+","+S:(Math.abs(this._x1-u)>l||Math.abs(this._y1-S)>l)&&(this._+="L"+u+","+S),v&&(E<0&&(E=E%A+A),E>T?this._+="A"+v+","+v+",0,1,"+_+","+(f-m)+","+(x-w)+"A"+v+","+v+",0,1,"+_+","+(this._x1=u)+","+(this._y1=S):E>l&&(this._+="A"+v+","+v+",0,"+ +(E>=k)+","+_+","+(this._x1=f+v*Math.cos(y))+","+(this._y1=x+v*Math.sin(y))))},rect:function(f,x,v,g){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+x)+"h"+ +v+"v"+ +g+"h"+-v+"Z"},toString:function(){return this._}};var s=d,t=Array.prototype.slice;function o(f){return function(){return f}}function r(f){return f[0]}function n(f){return f[1]}function a(f){return f.source}function i(f){return f.target}function c(f,x,v,g,y){f.moveTo(x,v),f.bezierCurveTo(x=(x+g)/2,v,x,y,g,y)}function h(){return function(f){var x=a,v=i,g=r,y=n,p=null;function m(){var w,u=t.call(arguments),S=x.apply(this,u),_=v.apply(this,u);if(p||(p=w=s()),f(p,+g.apply(this,(u[0]=S,u)),+y.apply(this,u),+g.apply(this,(u[0]=_,u)),+y.apply(this,u)),w)return p=null,w+""||null}return m.source=function(w){return arguments.length?(x=w,m):x},m.target=function(w){return arguments.length?(v=w,m):v},m.x=function(w){return arguments.length?(g="function"==typeof w?w:o(+w),m):g},m.y=function(w){return arguments.length?(y="function"==typeof w?w:o(+w),m):y},m.context=function(w){return arguments.length?(p=w??null,m):p},m}(c)}},84096:function(Q,z,e){"use strict";e.d(z,{i$:function(){return a},Dq:function(){return r},g0:function(){return i}});var k=e(58176),A=e(48480),l=e(59879),T=e(82301),b=e(34823),d=e(79791);function s(_t){if(0<=_t.y&&_t.y<100){var Lt=new Date(-1,_t.m,_t.d,_t.H,_t.M,_t.S,_t.L);return Lt.setFullYear(_t.y),Lt}return new Date(_t.y,_t.m,_t.d,_t.H,_t.M,_t.S,_t.L)}function t(_t){if(0<=_t.y&&_t.y<100){var Lt=new Date(Date.UTC(-1,_t.m,_t.d,_t.H,_t.M,_t.S,_t.L));return Lt.setUTCFullYear(_t.y),Lt}return new Date(Date.UTC(_t.y,_t.m,_t.d,_t.H,_t.M,_t.S,_t.L))}function o(_t,Lt,Ct){return{y:_t,m:Lt,d:Ct,H:0,M:0,S:0,L:0}}function r(_t){var Lt=_t.dateTime,Ct=_t.date,Ot=_t.time,Ht=_t.periods,It=_t.days,Ge=_t.shortDays,Ze=_t.months,Be=_t.shortMonths,Ye=y(Ht),rt=p(Ht),Se=y(It),Re=p(It),Ke=y(Ge),st=p(Ge),ct=y(Ze),Tt=p(Ze),Et=y(Be),At=p(Be),ht={a:function(Nt){return Ge[Nt.getDay()]},A:function(Nt){return It[Nt.getDay()]},b:function(Nt){return Be[Nt.getMonth()]},B:function(Nt){return Ze[Nt.getMonth()]},c:null,d:W,e:W,f:ae,H:X,I:K,j:ne,L:re,m:le,M:pe,p:function(Nt){return Ht[+(Nt.getHours()>=12)]},q:function(Nt){return 1+~~(Nt.getMonth()/3)},Q:wt,s:bt,S:xe,u:ye,U:se,V:fe,w:Ee,W:de,x:null,X:null,y:we,Y:ke,Z:Te,"%":dt},pt={a:function(Nt){return Ge[Nt.getUTCDay()]},A:function(Nt){return It[Nt.getUTCDay()]},b:function(Nt){return Be[Nt.getUTCMonth()]},B:function(Nt){return Ze[Nt.getUTCMonth()]},c:null,d:$,e:$,f:Ie,H:oe,I:he,j:me,L:Me,m:Pe,M:ze,p:function(Nt){return Ht[+(Nt.getUTCHours()>=12)]},q:function(Nt){return 1+~~(Nt.getUTCMonth()/3)},Q:wt,s:bt,S:ce,u:ge,U:_e,V:De,w:He,W:Ve,x:null,X:null,y:nt,Y:tt,Z:at,"%":dt},gt={a:function(Nt,jt,Gt){var un=Ke.exec(jt.slice(Gt));return un?(Nt.w=st[un[0].toLowerCase()],Gt+un[0].length):-1},A:function(Nt,jt,Gt){var un=Se.exec(jt.slice(Gt));return un?(Nt.w=Re[un[0].toLowerCase()],Gt+un[0].length):-1},b:function(Nt,jt,Gt){var un=Et.exec(jt.slice(Gt));return un?(Nt.m=At[un[0].toLowerCase()],Gt+un[0].length):-1},B:function(Nt,jt,Gt){var un=ct.exec(jt.slice(Gt));return un?(Nt.m=Tt[un[0].toLowerCase()],Gt+un[0].length):-1},c:function(Nt,jt,Gt){return Ut(Nt,Lt,jt,Gt)},d:j,e:j,f:N,H,I:H,j:R,L:B,m:I,M:F,p:function(Nt,jt,Gt){var un=Ye.exec(jt.slice(Gt));return un?(Nt.p=rt[un[0].toLowerCase()],Gt+un[0].length):-1},q:P,Q:Z,s:V,S:U,u:w,U:u,V:S,w:m,W:_,x:function(Nt,jt,Gt){return Ut(Nt,Ct,jt,Gt)},X:function(Nt,jt,Gt){return Ut(Nt,Ot,jt,Gt)},y:L,Y:E,Z:C,"%":J};function Pt(Nt,jt){return function(Gt){var un,hn,Qt,_n=[],Fn=-1,yn=0,on=Nt.length;for(Gt instanceof Date||(Gt=new Date(+Gt));++Fn<on;)37===Nt.charCodeAt(Fn)&&(_n.push(Nt.slice(yn,Fn)),null!=(hn=c[un=Nt.charAt(++Fn)])?un=Nt.charAt(++Fn):hn="e"===un?" ":"0",(Qt=jt[un])&&(un=Qt(Gt,hn)),_n.push(un),yn=Fn+1);return _n.push(Nt.slice(yn,Fn)),_n.join("")}}function zt(Nt,jt){return function(Gt){var un,hn,Qt=o(1900,void 0,1);if(Ut(Qt,Nt,Gt+="",0)!=Gt.length)return null;if("Q"in Qt)return new Date(Qt.Q);if("s"in Qt)return new Date(1e3*Qt.s+("L"in Qt?Qt.L:0));if(jt&&!("Z"in Qt)&&(Qt.Z=0),"p"in Qt&&(Qt.H=Qt.H%12+12*Qt.p),void 0===Qt.m&&(Qt.m="q"in Qt?Qt.q:0),"V"in Qt){if(Qt.V<1||Qt.V>53)return null;"w"in Qt||(Qt.w=1),"Z"in Qt?(hn=(un=t(o(Qt.y,0,1))).getUTCDay(),un=hn>4||0===hn?k.l6.ceil(un):(0,k.l6)(un),un=A.Z.offset(un,7*(Qt.V-1)),Qt.y=un.getUTCFullYear(),Qt.m=un.getUTCMonth(),Qt.d=un.getUTCDate()+(Qt.w+6)%7):(hn=(un=s(o(Qt.y,0,1))).getDay(),un=hn>4||0===hn?l.wA.ceil(un):(0,l.wA)(un),un=T.Z.offset(un,7*(Qt.V-1)),Qt.y=un.getFullYear(),Qt.m=un.getMonth(),Qt.d=un.getDate()+(Qt.w+6)%7)}else("W"in Qt||"U"in Qt)&&("w"in Qt||(Qt.w="u"in Qt?Qt.u%7:"W"in Qt?1:0),hn="Z"in Qt?t(o(Qt.y,0,1)).getUTCDay():s(o(Qt.y,0,1)).getDay(),Qt.m=0,Qt.d="W"in Qt?(Qt.w+6)%7+7*Qt.W-(hn+5)%7:Qt.w+7*Qt.U-(hn+6)%7);return"Z"in Qt?(Qt.H+=Qt.Z/100|0,Qt.M+=Qt.Z%100,t(Qt)):s(Qt)}}function Ut(Nt,jt,Gt,un){for(var hn,Qt,_n=0,Fn=jt.length,yn=Gt.length;_n<Fn;){if(un>=yn)return-1;if(37===(hn=jt.charCodeAt(_n++))){if(hn=jt.charAt(_n++),!(Qt=gt[hn in c?jt.charAt(_n++):hn])||(un=Qt(Nt,Gt,un))<0)return-1}else if(hn!=Gt.charCodeAt(un++))return-1}return un}return ht.x=Pt(Ct,ht),ht.X=Pt(Ot,ht),ht.c=Pt(Lt,ht),pt.x=Pt(Ct,pt),pt.X=Pt(Ot,pt),pt.c=Pt(Lt,pt),{format:function(Nt){var jt=Pt(Nt+="",ht);return jt.toString=function(){return Nt},jt},parse:function(Nt){var jt=zt(Nt+="",!1);return jt.toString=function(){return Nt},jt},utcFormat:function(Nt){var jt=Pt(Nt+="",pt);return jt.toString=function(){return Nt},jt},utcParse:function(Nt){var jt=zt(Nt+="",!0);return jt.toString=function(){return Nt},jt}}}var n,a,i,c={"-":"",_:" ",0:"0"},h=/^\s*\d+/,f=/^%/,x=/[\\^$*+?|[\]().{}]/g;function v(_t,Lt,Ct){var Ot=_t<0?"-":"",Ht=(Ot?-_t:_t)+"",It=Ht.length;return Ot+(It<Ct?new Array(Ct-It+1).join(Lt)+Ht:Ht)}function g(_t){return _t.replace(x,"\\$&")}function y(_t){return new RegExp("^(?:"+_t.map(g).join("|")+")","i")}function p(_t){for(var Lt={},Ct=-1,Ot=_t.length;++Ct<Ot;)Lt[_t[Ct].toLowerCase()]=Ct;return Lt}function m(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+1));return Ot?(_t.w=+Ot[0],Ct+Ot[0].length):-1}function w(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+1));return Ot?(_t.u=+Ot[0],Ct+Ot[0].length):-1}function u(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.U=+Ot[0],Ct+Ot[0].length):-1}function S(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.V=+Ot[0],Ct+Ot[0].length):-1}function _(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.W=+Ot[0],Ct+Ot[0].length):-1}function E(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+4));return Ot?(_t.y=+Ot[0],Ct+Ot[0].length):-1}function L(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.y=+Ot[0]+(+Ot[0]>68?1900:2e3),Ct+Ot[0].length):-1}function C(_t,Lt,Ct){var Ot=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Lt.slice(Ct,Ct+6));return Ot?(_t.Z=Ot[1]?0:-(Ot[2]+(Ot[3]||"00")),Ct+Ot[0].length):-1}function P(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+1));return Ot?(_t.q=3*Ot[0]-3,Ct+Ot[0].length):-1}function I(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.m=Ot[0]-1,Ct+Ot[0].length):-1}function j(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.d=+Ot[0],Ct+Ot[0].length):-1}function R(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+3));return Ot?(_t.m=0,_t.d=+Ot[0],Ct+Ot[0].length):-1}function H(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.H=+Ot[0],Ct+Ot[0].length):-1}function F(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.M=+Ot[0],Ct+Ot[0].length):-1}function U(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+2));return Ot?(_t.S=+Ot[0],Ct+Ot[0].length):-1}function B(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+3));return Ot?(_t.L=+Ot[0],Ct+Ot[0].length):-1}function N(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct,Ct+6));return Ot?(_t.L=Math.floor(Ot[0]/1e3),Ct+Ot[0].length):-1}function J(_t,Lt,Ct){var Ot=f.exec(Lt.slice(Ct,Ct+1));return Ot?Ct+Ot[0].length:-1}function Z(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct));return Ot?(_t.Q=+Ot[0],Ct+Ot[0].length):-1}function V(_t,Lt,Ct){var Ot=h.exec(Lt.slice(Ct));return Ot?(_t.s=+Ot[0],Ct+Ot[0].length):-1}function W(_t,Lt){return v(_t.getDate(),Lt,2)}function X(_t,Lt){return v(_t.getHours(),Lt,2)}function K(_t,Lt){return v(_t.getHours()%12||12,Lt,2)}function ne(_t,Lt){return v(1+T.Z.count((0,b.Z)(_t),_t),Lt,3)}function re(_t,Lt){return v(_t.getMilliseconds(),Lt,3)}function ae(_t,Lt){return re(_t,Lt)+"000"}function le(_t,Lt){return v(_t.getMonth()+1,Lt,2)}function pe(_t,Lt){return v(_t.getMinutes(),Lt,2)}function xe(_t,Lt){return v(_t.getSeconds(),Lt,2)}function ye(_t){var Lt=_t.getDay();return 0===Lt?7:Lt}function se(_t,Lt){return v(l.OM.count((0,b.Z)(_t)-1,_t),Lt,2)}function fe(_t,Lt){var Ct=_t.getDay();return _t=Ct>=4||0===Ct?(0,l.bL)(_t):l.bL.ceil(_t),v(l.bL.count((0,b.Z)(_t),_t)+(4===(0,b.Z)(_t).getDay()),Lt,2)}function Ee(_t){return _t.getDay()}function de(_t,Lt){return v(l.wA.count((0,b.Z)(_t)-1,_t),Lt,2)}function we(_t,Lt){return v(_t.getFullYear()%100,Lt,2)}function ke(_t,Lt){return v(_t.getFullYear()%1e4,Lt,4)}function Te(_t){var Lt=_t.getTimezoneOffset();return(Lt>0?"-":(Lt*=-1,"+"))+v(Lt/60|0,"0",2)+v(Lt%60,"0",2)}function $(_t,Lt){return v(_t.getUTCDate(),Lt,2)}function oe(_t,Lt){return v(_t.getUTCHours(),Lt,2)}function he(_t,Lt){return v(_t.getUTCHours()%12||12,Lt,2)}function me(_t,Lt){return v(1+A.Z.count((0,d.Z)(_t),_t),Lt,3)}function Me(_t,Lt){return v(_t.getUTCMilliseconds(),Lt,3)}function Ie(_t,Lt){return Me(_t,Lt)+"000"}function Pe(_t,Lt){return v(_t.getUTCMonth()+1,Lt,2)}function ze(_t,Lt){return v(_t.getUTCMinutes(),Lt,2)}function ce(_t,Lt){return v(_t.getUTCSeconds(),Lt,2)}function ge(_t){var Lt=_t.getUTCDay();return 0===Lt?7:Lt}function _e(_t,Lt){return v(k.Ox.count((0,d.Z)(_t)-1,_t),Lt,2)}function De(_t,Lt){var Ct=_t.getUTCDay();return _t=Ct>=4||0===Ct?(0,k.hB)(_t):k.hB.ceil(_t),v(k.hB.count((0,d.Z)(_t),_t)+(4===(0,d.Z)(_t).getUTCDay()),Lt,2)}function He(_t){return _t.getUTCDay()}function Ve(_t,Lt){return v(k.l6.count((0,d.Z)(_t)-1,_t),Lt,2)}function nt(_t,Lt){return v(_t.getUTCFullYear()%100,Lt,2)}function tt(_t,Lt){return v(_t.getUTCFullYear()%1e4,Lt,4)}function at(){return"+0000"}function dt(){return"%"}function wt(_t){return+_t}function bt(_t){return Math.floor(+_t/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,i=n.utcFormat},82301:function(Q,z,e){"use strict";e.d(z,{a:function(){return T}});var k=e(30052),A=e(54263),l=(0,k.Z)(function(b){b.setHours(0,0,0,0)},function(b,d){b.setDate(b.getDate()+d)},function(b,d){return(d-b-(d.getTimezoneOffset()-b.getTimezoneOffset())*A.yB)/A.UD},function(b){return b.getDate()-1});z.Z=l;var T=l.range},54263:function(Q,z,e){"use strict";e.d(z,{UD:function(){return T},Y2:function(){return l},Ym:function(){return k},iM:function(){return b},yB:function(){return A}});var k=1e3,A=6e4,l=36e5,T=864e5,b=6048e5},81041:function(Q,z,e){"use strict";e.r(z),e.d(z,{timeDay:function(){return h.Z},timeDays:function(){return h.a},timeFriday:function(){return f.mC},timeFridays:function(){return f.b$},timeHour:function(){return i},timeHours:function(){return c},timeInterval:function(){return k.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return f.wA},timeMondays:function(){return f.bJ},timeMonth:function(){return v},timeMonths:function(){return g},timeSaturday:function(){return f.EY},timeSaturdays:function(){return f.Ff},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return f.OM},timeSundays:function(){return f.vm},timeThursday:function(){return f.bL},timeThursdays:function(){return f.$t},timeTuesday:function(){return f.sy},timeTuesdays:function(){return f.aU},timeWednesday:function(){return f.zg},timeWednesdays:function(){return f.Ld},timeWeek:function(){return f.OM},timeWeeks:function(){return f.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return S},utcHours:function(){return _},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return w},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return P},utcMonths:function(){return I},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return j.Z},utcYears:function(){return j.D}});var k=e(30052),A=(0,k.Z)(function(){},function(R,H){R.setTime(+R+H)},function(R,H){return H-R});A.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,k.Z)(function(H){H.setTime(Math.floor(H/R)*R)},function(H,F){H.setTime(+H+F*R)},function(H,F){return(F-H)/R}):A:null};var l=A,T=A.range,b=e(54263),d=(0,k.Z)(function(R){R.setTime(R-R.getMilliseconds())},function(R,H){R.setTime(+R+H*b.Ym)},function(R,H){return(H-R)/b.Ym},function(R){return R.getUTCSeconds()}),s=d,t=d.range,o=(0,k.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*b.Ym)},function(R,H){R.setTime(+R+H*b.yB)},function(R,H){return(H-R)/b.yB},function(R){return R.getMinutes()}),r=o,n=o.range,a=(0,k.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*b.Ym-R.getMinutes()*b.yB)},function(R,H){R.setTime(+R+H*b.Y2)},function(R,H){return(H-R)/b.Y2},function(R){return R.getHours()}),i=a,c=a.range,h=e(82301),f=e(59879),x=(0,k.Z)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,H){R.setMonth(R.getMonth()+H)},function(R,H){return H.getMonth()-R.getMonth()+12*(H.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),v=x,g=x.range,y=e(34823),p=(0,k.Z)(function(R){R.setUTCSeconds(0,0)},function(R,H){R.setTime(+R+H*b.yB)},function(R,H){return(H-R)/b.yB},function(R){return R.getUTCMinutes()}),m=p,w=p.range,u=(0,k.Z)(function(R){R.setUTCMinutes(0,0,0)},function(R,H){R.setTime(+R+H*b.Y2)},function(R,H){return(H-R)/b.Y2},function(R){return R.getUTCHours()}),S=u,_=u.range,E=e(48480),L=e(58176),C=(0,k.Z)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,H){R.setUTCMonth(R.getUTCMonth()+H)},function(R,H){return H.getUTCMonth()-R.getUTCMonth()+12*(H.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),P=C,I=C.range,j=e(79791)},30052:function(Q,z,e){"use strict";e.d(z,{Z:function(){return l}});var k=new Date,A=new Date;function l(T,b,d,s){function t(o){return T(o=0===arguments.length?new Date:new Date(+o)),o}return t.floor=function(o){return T(o=new Date(+o)),o},t.ceil=function(o){return T(o=new Date(o-1)),b(o,1),T(o),o},t.round=function(o){var r=t(o),n=t.ceil(o);return o-r<n-o?r:n},t.offset=function(o,r){return b(o=new Date(+o),null==r?1:Math.floor(r)),o},t.range=function(o,r,n){var a,i=[];if(o=t.ceil(o),n=null==n?1:Math.floor(n),!(o<r&&n>0))return i;do{i.push(a=new Date(+o)),b(o,n),T(o)}while(a<o&&o<r);return i},t.filter=function(o){return l(function(r){if(r>=r)for(;T(r),!o(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;b(r,-1),!o(r););else for(;--n>=0;)for(;b(r,1),!o(r););})},d&&(t.count=function(o,r){return k.setTime(+o),A.setTime(+r),T(k),T(A),Math.floor(d(k,A))},t.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?t.filter(s?function(r){return s(r)%o==0}:function(r){return t.count(0,r)%o==0}):t:null}),t}},48480:function(Q,z,e){"use strict";e.d(z,{y:function(){return T}});var k=e(30052),A=e(54263),l=(0,k.Z)(function(b){b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCDate(b.getUTCDate()+d)},function(b,d){return(d-b)/A.UD},function(b){return b.getUTCDate()-1});z.Z=l;var T=l.range},58176:function(Q,z,e){"use strict";e.d(z,{$3:function(){return a},DK:function(){return i},J1:function(){return d},Ox:function(){return T},QQ:function(){return o},Q_:function(){return x},SU:function(){return n},b3:function(){return s},fz:function(){return f},g4:function(){return r},hB:function(){return t},l6:function(){return b},uy:function(){return c},xj:function(){return h}});var k=e(30052),A=e(54263);function l(v){return(0,k.Z)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-v)%7),g.setUTCHours(0,0,0,0)},function(g,y){g.setUTCDate(g.getUTCDate()+7*y)},function(g,y){return(y-g)/A.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=b.range,i=d.range,c=s.range,h=t.range,f=o.range,x=r.range},79791:function(Q,z,e){"use strict";e.d(z,{D:function(){return l}});var k=e(30052),A=(0,k.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});A.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,k.Z)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCFullYear(b.getUTCFullYear()+d*T)}):null},z.Z=A;var l=A.range},59879:function(Q,z,e){"use strict";e.d(z,{$t:function(){return h},EY:function(){return r},Ff:function(){return x},Ld:function(){return c},OM:function(){return T},aU:function(){return i},b$:function(){return f},bJ:function(){return a},bL:function(){return t},mC:function(){return o},sy:function(){return d},vm:function(){return n},wA:function(){return b},zg:function(){return s}});var k=e(30052),A=e(54263);function l(v){return(0,k.Z)(function(g){g.setDate(g.getDate()-(g.getDay()+7-v)%7),g.setHours(0,0,0,0)},function(g,y){g.setDate(g.getDate()+7*y)},function(g,y){return(y-g-(y.getTimezoneOffset()-g.getTimezoneOffset())*A.yB)/A.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=b.range,i=d.range,c=s.range,h=t.range,f=o.range,x=r.range},34823:function(Q,z,e){"use strict";e.d(z,{g:function(){return l}});var k=e(30052),A=(0,k.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});A.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,k.Z)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,d){b.setFullYear(b.getFullYear()+d*T)}):null},z.Z=A;var l=A.range},17045:function(Q,z,e){"use strict";var k=e(8709),A="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),l=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,d=b&&function(){var o={};try{for(var r in b(o,"x",{enumerable:!1,value:o}),o)return!1;return o.x===o}catch{return!1}}(),s=function(o,r,n,a){var i;(!(r in o)||"function"==typeof(i=a)&&"[object Function]"===l.call(i)&&a())&&(d?b(o,r,{configurable:!0,enumerable:!1,value:n,writable:!0}):o[r]=n)},t=function(o,r){var n=arguments.length>2?arguments[2]:{},a=k(r);A&&(a=T.call(a,Object.getOwnPropertySymbols(r)));for(var i=0;i<a.length;i+=1)s(o,a[i],r[a[i]],n[a[i]])};t.supportsDescriptors=!!d,Q.exports=t},46775:function(Q){Q.exports=function(){for(var z=0;z<arguments.length;z++)if(void 0!==arguments[z])return arguments[z]}},53545:function(Q){"use strict";Q.exports=k;var z=(k.canvas=document.createElement("canvas")).getContext("2d"),e=A([32,126]);function k(l,T){Array.isArray(l)&&(l=l.join(", "));var b,d={},s=16,t=.05;T&&(2===T.length&&"number"==typeof T[0]?b=A(T):Array.isArray(T)?b=T:(T.o?b=A(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),null!=T.threshold&&(t=T.threshold))),b||(b=e),z.font=s+"px "+l;for(var o=0;o<b.length;o++){var r=b[o],n=z.measureText(r[0]).width+z.measureText(r[1]).width,a=z.measureText(r).width;Math.abs(n-a)>s*t&&(d[r]=(a-n)/s*1e3)}return d}function A(l){for(var T=[],b=l[0];b<=l[1];b++)for(var d=String.fromCharCode(b),s=l[0];s<l[1];s++){var t=d+String.fromCharCode(s);T.push(t)}return T}k.createPairs=A,k.ascii=e},31457:function(Q,z,e){var k=e(65185),A=e(18625),l={M:"moveTo",C:"bezierCurveTo"};Q.exports=function(T,b){T.beginPath(),A(k(b)).forEach(function(d){var s=d[0],t=d.slice(1);T[l[s]].apply(T,t)}),T.closePath()}},90660:function(Q){Q.exports=function(z){switch(z){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(Q){"use strict";function z(e,k,A){var l=0|e[A];if(l<=0)return[];var T,b=new Array(l);if(A===e.length-1)for(T=0;T<l;++T)b[T]=k;else for(T=0;T<l;++T)b[T]=z(e,k,A+1);return b}Q.exports=function(e,k){switch(void 0===k&&(k=0),typeof e){case"number":if(e>0)return function(A,l){var T,b;for(T=new Array(A),b=0;b<A;++b)T[b]=l;return T}(0|e,k);break;case"object":if("number"==typeof e.length)return z(e,k,0)}return[]}},11474:function(Q){"use strict";function z(S,_,E){E=E||2;var L,C,P,I,j,R,H,F=_&&_.length,U=F?_[0]*E:S.length,B=e(S,0,U,E,!0),N=[];if(!B||B.next===B.prev)return N;if(F&&(B=function(Z,V,W,X){var K,ne,re,ae=[];for(K=0,ne=V.length;K<ne;K++)(re=e(Z,V[K]*X,K<ne-1?V[K+1]*X:Z.length,X,!1))===re.next&&(re.steiner=!0),ae.push(n(re));for(ae.sort(s),K=0;K<ae.length;K++)t(ae[K],W),W=k(W,W.next);return W}(S,_,B,E)),S.length>80*E){L=P=S[0],C=I=S[1];for(var J=E;J<U;J+=E)(j=S[J])<L&&(L=j),(R=S[J+1])<C&&(C=R),j>P&&(P=j),R>I&&(I=R);H=0!==(H=Math.max(P-L,I-C))?1/H:0}return A(B,N,E,L,C,H),N}function e(S,_,E,L,C){var P,I;if(C===u(S,_,E,L)>0)for(P=_;P<E;P+=L)I=p(P,S[P],S[P+1],I);else for(P=E-L;P>=_;P-=L)I=p(P,S[P],S[P+1],I);return I&&h(I,I.next)&&(m(I),I=I.next),I}function k(S,_){if(!S)return S;_||(_=S);var E,L=S;do{if(E=!1,L.steiner||!h(L,L.next)&&0!==c(L.prev,L,L.next))L=L.next;else{if(m(L),(L=_=L.prev)===L.next)break;E=!0}}while(E||L!==_);return _}function A(S,_,E,L,C,P,I){if(S){!I&&P&&function(F,U,B,N){var J=F;do{null===J.z&&(J.z=r(J.x,J.y,U,B,N)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next}while(J!==F);J.prevZ.nextZ=null,J.prevZ=null,function(Z){var V,W,X,K,ne,re,ae,le,pe=1;do{for(W=Z,Z=null,ne=null,re=0;W;){for(re++,X=W,ae=0,V=0;V<pe&&(ae++,X=X.nextZ);V++);for(le=pe;ae>0||le>0&&X;)0!==ae&&(0===le||!X||W.z<=X.z)?(K=W,W=W.nextZ,ae--):(K=X,X=X.nextZ,le--),ne?ne.nextZ=K:Z=K,K.prevZ=ne,ne=K;W=X}ne.nextZ=null,pe*=2}while(re>1)}(J)}(S,L,C,P);for(var j,R,H=S;S.prev!==S.next;)if(j=S.prev,R=S.next,P?T(S,L,C,P):l(S))_.push(j.i/E),_.push(S.i/E),_.push(R.i/E),m(S),S=R.next,H=R.next;else if((S=R)===H){I?1===I?A(S=b(k(S),_,E),_,E,L,C,P,2):2===I&&d(S,_,E,L,C,P):A(k(S),_,E,L,C,P,1);break}}}function l(S){var _=S.prev,E=S,L=S.next;if(c(_,E,L)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(_.x,_.y,E.x,E.y,L.x,L.y,C.x,C.y)&&c(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,_,E,L){var C=S.prev,P=S,I=S.next;if(c(C,P,I)>=0)return!1;for(var H=C.x>P.x?C.x>I.x?C.x:I.x:P.x>I.x?P.x:I.x,F=C.y>P.y?C.y>I.y?C.y:I.y:P.y>I.y?P.y:I.y,U=r(C.x<P.x?C.x<I.x?C.x:I.x:P.x<I.x?P.x:I.x,C.y<P.y?C.y<I.y?C.y:I.y:P.y<I.y?P.y:I.y,_,E,L),B=r(H,F,_,E,L),N=S.prevZ,J=S.nextZ;N&&N.z>=U&&J&&J.z<=B;){if(N!==S.prev&&N!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,N.x,N.y)&&c(N.prev,N,N.next)>=0||(N=N.prevZ,J!==S.prev&&J!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,J.x,J.y)&&c(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;N&&N.z>=U;){if(N!==S.prev&&N!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,N.x,N.y)&&c(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;J&&J.z<=B;){if(J!==S.prev&&J!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,J.x,J.y)&&c(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function b(S,_,E){var L=S;do{var C=L.prev,P=L.next.next;!h(C,P)&&f(C,L,L.next,P)&&g(C,P)&&g(P,C)&&(_.push(C.i/E),_.push(L.i/E),_.push(P.i/E),m(L),m(L.next),L=S=P),L=L.next}while(L!==S);return k(L)}function d(S,_,E,L,C,P){var I=S;do{for(var j=I.next.next;j!==I.prev;){if(I.i!==j.i&&i(I,j)){var R=y(I,j);return I=k(I,I.next),R=k(R,R.next),A(I,_,E,L,C,P),void A(R,_,E,L,C,P)}j=j.next}I=I.next}while(I!==S)}function s(S,_){return S.x-_.x}function t(S,_){if(_=function(L,C){var P,I=C,j=L.x,R=L.y,H=-1/0;do{if(R<=I.y&&R>=I.next.y&&I.next.y!==I.y){var F=I.x+(R-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(F<=j&&F>H){if(H=F,F===j){if(R===I.y)return I;if(R===I.next.y)return I.next}P=I.x<I.next.x?I:I.next}}I=I.next}while(I!==C);if(!P)return null;if(j===H)return P;var U,B=P,N=P.x,J=P.y,Z=1/0;I=P;do{j>=I.x&&I.x>=N&&j!==I.x&&a(R<J?j:H,R,N,J,R<J?H:j,R,I.x,I.y)&&(U=Math.abs(R-I.y)/(j-I.x),g(I,L)&&(U<Z||U===Z&&(I.x>P.x||I.x===P.x&&o(P,I)))&&(P=I,Z=U)),I=I.next}while(I!==B);return P}(S,_)){var E=y(_,S);k(_,_.next),k(E,E.next)}}function o(S,_){return c(S.prev,S,_.prev)<0&&c(_.next,S,S.next)<0}function r(S,_,E,L,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-L)*C)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function n(S){var _=S,E=S;do{(_.x<E.x||_.x===E.x&&_.y<E.y)&&(E=_),_=_.next}while(_!==S);return E}function a(S,_,E,L,C,P,I,j){return(C-I)*(_-j)-(S-I)*(P-j)>=0&&(S-I)*(L-j)-(E-I)*(_-j)>=0&&(E-I)*(P-j)-(C-I)*(L-j)>=0}function i(S,_){return S.next.i!==_.i&&S.prev.i!==_.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&f(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(S,_)&&(g(S,_)&&g(_,S)&&function(E,L){var C=E,P=!1,I=(E.x+L.x)/2,j=(E.y+L.y)/2;do{C.y>j!=C.next.y>j&&C.next.y!==C.y&&I<(C.next.x-C.x)*(j-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next}while(C!==E);return P}(S,_)&&(c(S.prev,S,_.prev)||c(S,_.prev,_))||h(S,_)&&c(S.prev,S,S.next)>0&&c(_.prev,_,_.next)>0)}function c(S,_,E){return(_.y-S.y)*(E.x-_.x)-(_.x-S.x)*(E.y-_.y)}function h(S,_){return S.x===_.x&&S.y===_.y}function f(S,_,E,L){var C=v(c(S,_,E)),P=v(c(S,_,L)),I=v(c(E,L,S)),j=v(c(E,L,_));return C!==P&&I!==j||!(0!==C||!x(S,E,_))||!(0!==P||!x(S,L,_))||!(0!==I||!x(E,S,L))||!(0!==j||!x(E,_,L))}function x(S,_,E){return _.x<=Math.max(S.x,E.x)&&_.x>=Math.min(S.x,E.x)&&_.y<=Math.max(S.y,E.y)&&_.y>=Math.min(S.y,E.y)}function v(S){return S>0?1:S<0?-1:0}function g(S,_){return c(S.prev,S,S.next)<0?c(S,_,S.next)>=0&&c(S,S.prev,_)>=0:c(S,_,S.prev)<0||c(S,S.next,_)<0}function y(S,_){var E=new w(S.i,S.x,S.y),L=new w(_.i,_.x,_.y),C=S.next,P=_.prev;return S.next=_,_.prev=S,E.next=C,C.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function p(S,_,E,L){var C=new w(S,_,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function w(S,_,E){this.i=S,this.x=_,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u(S,_,E,L){for(var C=0,P=_,I=E-L;P<E;P+=L)C+=(S[I]-S[P])*(S[P+1]+S[I+1]),I=P;return C}Q.exports=z,Q.exports.default=z,z.deviation=function(S,_,E,L){var C=_&&_.length,I=Math.abs(u(S,0,C?_[0]*E:S.length,E));if(C)for(var j=0,R=_.length;j<R;j++)I-=Math.abs(u(S,_[j]*E,j<R-1?_[j+1]*E:S.length,E));var U=0;for(j=0;j<L.length;j+=3){var B=L[j]*E,N=L[j+1]*E,J=L[j+2]*E;U+=Math.abs((S[B]-S[J])*(S[N+1]-S[B+1])-(S[B]-S[N])*(S[J+1]-S[B+1]))}return 0===I&&0===U?0:Math.abs((U-I)/I)},z.flatten=function(S){for(var _=S[0][0].length,E={vertices:[],holes:[],dimensions:_},L=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var I=0;I<_;I++)E.vertices.push(S[C][P][I]);C>0&&E.holes.push(L+=S[C-1].length)}return E}},2502:function(Q,z,e){var k=e(68664);Q.exports=function(A,l){var T,b=[],d=[],s=[],t={},o=[];function r(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(y){delete t[g][y],s[y]&&r(y)})}function n(g){var y,p,m=!1;for(d.push(g),s[g]=!0,y=0;y<o[g].length;y++)(p=o[g][y])===T?(a(T,d),m=!0):s[p]||(m=n(p));if(m)r(g);else for(y=0;y<o[g].length;y++){var w=t[p=o[g][y]];w||(t[p]=w={}),w[p]=!0}return d.pop(),m}function a(g,y){var p=[].concat(y).concat(g);l?l(n):b.push(p)}function i(g){!function(E){for(var L=0;L<A.length;L++)L<E&&(A[L]=[]),A[L]=A[L].filter(function(C){return C>=E})}(g);for(var y,p=k(A).components.filter(function(E){return E.length>1}),m=1/0,w=0;w<p.length;w++)for(var u=0;u<p[w].length;u++)p[w][u]<m&&(m=p[w][u],y=w);var S=p[y];return!!S&&{leastVertex:m,adjList:A.map(function(E,L){return-1===S.indexOf(L)?[]:E.filter(function(C){return-1!==S.indexOf(C)})})}}T=0;for(var c=A.length;T<c;){var h=i(T);if(T=h.leastVertex,o=h.adjList){for(var f=0;f<o.length;f++)for(var x=0;x<o[f].length;x++){var v=o[f][x];s[+v]=!1,t[v]={}}n(T),T+=1}else T=c}return l?void 0:b}},72943:function(Q,z,e){"use strict";var k,A=TypeError,l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch{l=null}var T=function(){throw new A},b=l?function(){try{return T}catch{try{return l(arguments,"callee").get}catch{return T}}}():T,d=e(57877)(),s=Object.getPrototypeOf||function(f){return f.__proto__},t=k,o=typeof Uint8Array>"u"?k:s(Uint8Array),r={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?k:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?k:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":d?s([][Symbol.iterator]()):k,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":k,"%AsyncGenerator%":k,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":k,"%AsyncIteratorPrototype%":t&&d&&Symbol.asyncIterator?t[Symbol.asyncIterator]():k,"%Atomics%":typeof Atomics>"u"?k:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?k:DataView,"%DataViewPrototype%":typeof DataView>"u"?k:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?k:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?k:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?k:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?k:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":k,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":k,"%Int8Array%":typeof Int8Array>"u"?k:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?k:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?k:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?k:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?k:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?k:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?s(s([][Symbol.iterator]())):k,"%JSON%":"object"==typeof JSON?JSON:k,"%JSONParse%":"object"==typeof JSON?JSON.parse:k,"%Map%":typeof Map>"u"?k:Map,"%MapIteratorPrototype%":typeof Map<"u"&&d?s((new Map)[Symbol.iterator]()):k,"%MapPrototype%":typeof Map>"u"?k:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?k:Promise,"%PromisePrototype%":typeof Promise>"u"?k:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?k:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?k:Promise.all,"%Promise_reject%":typeof Promise>"u"?k:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?k:Promise.resolve,"%Proxy%":typeof Proxy>"u"?k:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?k:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?k:Set,"%SetIteratorPrototype%":typeof Set<"u"&&d?s((new Set)[Symbol.iterator]()):k,"%SetPrototype%":typeof Set>"u"?k:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":d?s(""[Symbol.iterator]()):k,"%StringPrototype%":String.prototype,"%Symbol%":d?Symbol:k,"%SymbolPrototype%":d?Symbol.prototype:k,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":b,"%TypedArray%":o,"%TypedArrayPrototype%":o?o.prototype:k,"%TypeError%":A,"%TypeErrorPrototype%":A.prototype,"%Uint8Array%":typeof Uint8Array>"u"?k:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?k:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?k:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?k:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?k:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?k:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?k:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?k:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?k:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?k:WeakSet.prototype},n=e(77575).call(Function.call,String.prototype.replace),a=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,i=/\\(\\)?/g,c=function(f){var x=[];return n(f,a,function(v,g,y,p){x[x.length]=y?n(p,i,"$1"):g||v}),x},h=function(f,x){if(!(f in r))throw new SyntaxError("intrinsic "+f+" does not exist!");if(void 0===r[f]&&!x)throw new A("intrinsic "+f+" exists, but is not available. Please file an issue!");return r[f]};Q.exports=function(f,x){if("string"!=typeof f||0===f.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof x)throw new TypeError('"allowMissing" argument must be a boolean');for(var v=c(f),g=h("%"+(v.length>0?v[0]:"")+"%",x),y=1;y<v.length;y+=1)if(null!=g)if(l&&y+1>=v.length){var p=l(g,v[y]);if(!x&&!(v[y]in g))throw new A("base intrinsic for "+f+" exists, but the property is not available.");g=p?p.get||p.value:g[v[y]]}else g=g[v[y]];return g}},84671:function(Q,z,e){"use strict";var k=e(77575),A=e(72943)("%Function%"),l=A.apply,T=A.call;Q.exports=function(){return k.apply(T,arguments)},Q.exports.apply=function(){return k.apply(l,arguments)}},92978:function(Q,z,e){"use strict";var k=e(72943),A=e(84671),l=A(k("String.prototype.indexOf"));Q.exports=function(T,b){var d=k(T,!!b);return"function"==typeof d&&l(T,".prototype.")?A(d):d}},67295:function(Q,z,e){"use strict";var k=e(72943)("%Object.getOwnPropertyDescriptor%");if(k)try{k([],"length")}catch{k=null}Q.exports=k},16134:function(Q,z,e){"use strict";var k=e(36672);Q.exports=function(){return k(this).length=0,this}},4892:function(Q,z,e){"use strict";Q.exports=e(64404)()?Array.from:e(49441)},64404:function(Q){"use strict";Q.exports=function(){var z,e,k=Array.from;return"function"==typeof k&&(e=k(z=["raz","dwa"]),Boolean(e&&e!==z&&"dwa"===e[1]))}},49441:function(Q,z,e){"use strict";var k=e(8260).iterator,A=e(73051),l=e(33717),T=e(35976),b=e(78513),d=e(36672),s=e(95296),t=e(87963),o=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;Q.exports=function(i){var c,h,f,x,v,g,y,p,m,w,u=arguments[1],S=arguments[2];if(i=Object(d(i)),s(u)&&b(u),this&&this!==Array&&l(this))c=this;else{if(!u){if(A(i))return 1!==(v=i.length)?Array.apply(null,i):((x=new Array(1))[0]=i[0],x);if(o(i)){for(x=new Array(v=i.length),h=0;h<v;++h)x[h]=i[h];return x}}x=[]}if(!o(i))if(void 0!==(m=i[k])){for(y=b(m).call(i),c&&(x=new c),p=y.next(),h=0;!p.done;)w=u?r.call(u,S,p.value,h):p.value,c?(n.value=w,a(x,h,n)):x[h]=w,p=y.next(),++h;v=h}else if(t(i)){for(v=i.length,c&&(x=new c),h=0,f=0;h<v;++h)w=i[h],h+1<v&&(g=w.charCodeAt(0))>=55296&&g<=56319&&(w+=i[++h]),w=u?r.call(u,S,w,f):w,c?(n.value=w,a(x,f,n)):x[f]=w,++f;v=f}if(void 0===v)for(v=T(i.length),c&&(x=new c(v)),h=0;h<v;++h)w=u?r.call(u,S,i[h],h):i[h],c?(n.value=w,a(x,h,n)):x[h]=w;return c&&(n.value=null,x.length=v),x}},73051:function(Q){"use strict";var z=Object.prototype.toString,e=z.call(function(){return arguments}());Q.exports=function(k){return z.call(k)===e}},33717:function(Q){"use strict";var z=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Q.exports=function(k){return"function"==typeof k&&e(z.call(k))}},52345:function(Q){"use strict";Q.exports=function(){}},9953:function(Q,z,e){"use strict";Q.exports=e(90436)()?Math.sign:e(6069)},90436:function(Q){"use strict";Q.exports=function(){var z=Math.sign;return"function"==typeof z&&1===z(10)&&-1===z(-20)}},6069:function(Q){"use strict";Q.exports=function(z){return z=Number(z),isNaN(z)||0===z?z:z>0?1:-1}},56247:function(Q,z,e){"use strict";var k=e(9953),A=Math.abs,l=Math.floor;Q.exports=function(T){return isNaN(T)?0:0!==(T=Number(T))&&isFinite(T)?k(T)*l(A(T)):T}},35976:function(Q,z,e){"use strict";var k=e(56247),A=Math.max;Q.exports=function(l){return A(0,k(l))}},67260:function(Q,z,e){"use strict";var k=e(78513),A=e(36672),l=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,d=Object.prototype.propertyIsEnumerable;Q.exports=function(s,t){return function(o,r){var n,a=arguments[2],i=arguments[3];return o=Object(A(o)),k(r),n=b(o),i&&n.sort("function"==typeof i?l.call(i,o):void 0),"function"!=typeof s&&(s=n[s]),T.call(s,n,function(c,h){return d.call(o,c)?T.call(r,a,o[c],c,o,h):t})}}},95879:function(Q,z,e){"use strict";Q.exports=e(73583)()?Object.assign:e(34205)},73583:function(Q){"use strict";Q.exports=function(){var z,e=Object.assign;return"function"==typeof e&&(e(z={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),z.foo+z.bar+z.trzy==="razdwatrzy")}},34205:function(Q,z,e){"use strict";var k=e(68700),A=e(36672),l=Math.max;Q.exports=function(T,b){var d,s,t,o=l(arguments.length,2);for(T=Object(A(T)),t=function(r){try{T[r]=b[r]}catch(n){d||(d=n)}},s=1;s<o;++s)k(b=arguments[s]).forEach(t);if(void 0!==d)throw d;return T}},19012:function(Q,z,e){"use strict";var k=e(4892),A=e(95879),l=e(36672);Q.exports=function(T){var b=Object(l(T)),d=arguments[1],s=Object(arguments[2]);if(b!==T&&!d)return b;var t={};return d?k(d,function(o){(s.ensure||o in T)&&(t[o]=T[o])}):A(t,T),t}},52818:function(Q,z,e){"use strict";var k,A,l,T,b=Object.create;e(33247)()||(k=e(51882)),Q.exports=k?1!==k.level?b:(A={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(d){l[d]="__proto__"!==d?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(A,l),Object.defineProperty(k,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:A}),function(d,s){return b(null===d?A:d,s)}):b},96437:function(Q,z,e){"use strict";Q.exports=e(67260)("forEach")},99611:function(Q,z,e){"use strict";var k=e(95296),A={function:!0,object:!0};Q.exports=function(l){return k(l)&&A[typeof l]||!1}},95296:function(Q,z,e){"use strict";var k=e(52345)();Q.exports=function(A){return A!==k&&null!==A}},68700:function(Q,z,e){"use strict";Q.exports=e(13895)()?Object.keys:e(25217)},13895:function(Q){"use strict";Q.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(Q,z,e){"use strict";var k=e(95296),A=Object.keys;Q.exports=function(l){return A(k(l)?Object(l):l)}},16906:function(Q,z,e){"use strict";var k=e(78513),A=e(96437),l=Function.prototype.call;Q.exports=function(T,b){var d={},s=arguments[2];return k(b),A(T,function(t,o,r,n){d[o]=l.call(b,s,t,o,r,n)}),d}},21780:function(Q,z,e){"use strict";var k=e(95296),A=Array.prototype.forEach,l=Object.create,T=function(b,d){var s;for(s in b)d[s]=b[s]};Q.exports=function(b){var d=l(null);return A.call(arguments,function(s){k(s)&&T(Object(s),d)}),d}},1496:function(Q,z,e){"use strict";Q.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function(Q){"use strict";var z=Object.create,e=Object.getPrototypeOf,k={};Q.exports=function(){var A=Object.setPrototypeOf;return"function"==typeof A&&e(A((arguments[0]||z)(null),k))===k}},51882:function(Q,z,e){"use strict";var k,A,l,T,b=e(99611),d=e(36672),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};k=function(r,n){if(d(r),null===n||b(n))return r;throw new TypeError("Prototype must be null or an object")},Q.exports=(A=function(){var r,n=Object.create(null),a={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(r=i.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}())?(2===A.level?A.set?(T=A.set,l=function(r,n){return T.call(k(r,n),n),r}):l=function(r,n){return k(r,n).__proto__=n,r}:l=function r(n,a){var i;return k(n,a),(i=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,null===a&&(a=r.nullPolyfill),n.__proto__=a,i&&t(r.nullPolyfill,"__proto__",o),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:A.level})):null,e(52818)},78513:function(Q){"use strict";Q.exports=function(z){if("function"!=typeof z)throw new TypeError(z+" is not a function");return z}},98976:function(Q,z,e){"use strict";var k=e(99611);Q.exports=function(A){if(!k(A))throw new TypeError(A+" is not an Object");return A}},36672:function(Q,z,e){"use strict";var k=e(95296);Q.exports=function(A){if(!k(A))throw new TypeError("Cannot use null or undefined");return A}},66741:function(Q,z,e){"use strict";Q.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function(Q){"use strict";var z="razdwatrzy";Q.exports=function(){return"function"==typeof z.contains&&!0===z.contains("dwa")&&!1===z.contains("foo")}},60381:function(Q){"use strict";var z=String.prototype.indexOf;Q.exports=function(e){return z.call(this,e,arguments[1])>-1}},87963:function(Q){"use strict";var z=Object.prototype.toString,e=z.call("");Q.exports=function(k){return"string"==typeof k||k&&"object"==typeof k&&(k instanceof String||z.call(k)===e)||!1}},43043:function(Q){"use strict";var z=Object.create(null),e=Math.random;Q.exports=function(){var k;do{k=e().toString(36).slice(2)}while(z[k]);return k}},32411:function(Q,z,e){"use strict";var k,A=e(1496),l=e(66741),T=e(62072),b=e(8260),d=e(95426),s=Object.defineProperty;k=Q.exports=function(t,o){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");d.call(this,t),o=o?l.call(o,"key+value")?"key+value":l.call(o,"key")?"key":"value":"value",s(this,"__kind__",T("",o))},A&&A(k,d),delete k.prototype.constructor,k.prototype=Object.create(d.prototype,{_resolve:T(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),s(k.prototype,b.toStringTag,T("c","Array Iterator"))},27515:function(Q,z,e){"use strict";var k=e(73051),A=e(78513),l=e(87963),T=e(66661),b=Array.isArray,d=Function.prototype.call,s=Array.prototype.some;Q.exports=function(t,o){var r,n,a,i,c,h,f,x,v=arguments[2];if(b(t)||k(t)?r="array":l(t)?r="string":t=T(t),A(o),a=function(){i=!0},"array"!==r)if("string"!==r)for(n=t.next();!n.done;){if(d.call(o,v,n.value,a),i)return;n=t.next()}else for(h=t.length,c=0;c<h&&(f=t[c],c+1<h&&(x=f.charCodeAt(0))>=55296&&x<=56319&&(f+=t[++c]),d.call(o,v,f,a),!i);++c);else s.call(t,function(g){return d.call(o,v,g,a),i})}},66661:function(Q,z,e){"use strict";var k=e(73051),A=e(87963),l=e(32411),T=e(259),b=e(58095),d=e(8260).iterator;Q.exports=function(s){return"function"==typeof b(s)[d]?s[d]():k(s)?new l(s):A(s)?new T(s):new l(s)}},95426:function(Q,z,e){"use strict";var k,A=e(16134),l=e(95879),T=e(78513),b=e(36672),d=e(62072),s=e(55174),t=e(8260),o=Object.defineProperty,r=Object.defineProperties;Q.exports=k=function(n,a){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");r(this,{__list__:d("w",b(n)),__context__:d("w",a),__nextIndex__:d("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete k.prototype.constructor,r(k.prototype,l({_next:d(function(){var n;if(this.__list__)return this.__redo__&&void 0!==(n=this.__redo__.shift())?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(n){return void 0===n?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:d(function(n){return this.__list__[n]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:d(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,i){a>=n&&(this.__redo__[i]=++a)},this),this.__redo__.push(n)):o(this,"__redo__",d("c",[n])))}),_onDelete:d(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(a=this.__redo__.indexOf(n))&&this.__redo__.splice(a,1),this.__redo__.forEach(function(i,c){i>n&&(this.__redo__[c]=--i)},this)))}),_onClear:d(function(){this.__redo__&&A.call(this.__redo__),this.__nextIndex__=0})}))),o(k.prototype,t.iterator,d(function(){return this}))},35940:function(Q,z,e){"use strict";var k=e(73051),A=e(95296),l=e(87963),T=e(8260).iterator,b=Array.isArray;Q.exports=function(d){return!(!A(d)||!b(d)&&!l(d)&&!k(d)&&"function"!=typeof d[T])}},259:function(Q,z,e){"use strict";var k,A=e(1496),l=e(62072),T=e(8260),b=e(95426),d=Object.defineProperty;k=Q.exports=function(s){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),d(this,"__length__",l("",s.length))},A&&A(k,b),delete k.prototype.constructor,k.prototype=Object.create(b.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var t,o=this.__list__[s];return this.__nextIndex__===this.__length__?o:(t=o.charCodeAt(0))>=55296&&t<=56319?o+this.__list__[this.__nextIndex__++]:o})}),d(k.prototype,T.toStringTag,l("c","String Iterator"))},58095:function(Q,z,e){"use strict";var k=e(35940);Q.exports=function(A){if(!k(A))throw new TypeError(A+" is not iterable");return A}},73523:function(Q){"use strict";function z(e,k){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var A=Object(e),l=1;l<arguments.length;l++){var T=arguments[l];if(null!=T)for(var b=Object.keys(Object(T)),d=0,s=b.length;d<s;d++){var t=b[d],o=Object.getOwnPropertyDescriptor(T,t);void 0!==o&&o.enumerable&&(A[t]=T[t])}}return A}Q.exports={assign:z,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:z})}}},8260:function(Q,z,e){"use strict";Q.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function(Q,z,e){"use strict";var k=e(94908),A={object:!0,symbol:!0};Q.exports=function(){var l,T=k.Symbol;if("function"!=typeof T)return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!A[typeof T.iterator]&&!!A[typeof T.toPrimitive]&&!!A[typeof T.toStringTag]}},82276:function(Q){"use strict";Q.exports=function(z){return!!z&&("symbol"==typeof z||!!z.constructor&&"Symbol"===z.constructor.name&&"Symbol"===z[z.constructor.toStringTag])}},29366:function(Q,z,e){"use strict";var k=e(62072),l=Object.defineProperty,T=Object.prototype,b=(0,Object.create)(null);Q.exports=function(d){for(var s,t,o=0;b[d+(o||"")];)++o;return b[d+=o||""]=!0,l(T,s="@@"+d,k.gs(null,function(r){t||(t=!0,l(this,s,k(r)),t=!1)})),s}},92842:function(Q,z,e){"use strict";var k=e(62072),A=e(94908).Symbol;Q.exports=function(l){return Object.defineProperties(l,{hasInstance:k("",A&&A.hasInstance||l("hasInstance")),isConcatSpreadable:k("",A&&A.isConcatSpreadable||l("isConcatSpreadable")),iterator:k("",A&&A.iterator||l("iterator")),match:k("",A&&A.match||l("match")),replace:k("",A&&A.replace||l("replace")),search:k("",A&&A.search||l("search")),species:k("",A&&A.species||l("species")),split:k("",A&&A.split||l("split")),toPrimitive:k("",A&&A.toPrimitive||l("toPrimitive")),toStringTag:k("",A&&A.toStringTag||l("toStringTag")),unscopables:k("",A&&A.unscopables||l("unscopables"))})}},13304:function(Q,z,e){"use strict";var k=e(62072),A=e(53308),l=Object.create(null);Q.exports=function(T){return Object.defineProperties(T,{for:k(function(b){return l[b]?l[b]:l[b]=T(String(b))}),keyFor:k(function(b){var d;for(d in A(b),l)if(l[d]===b)return d})})}},18415:function(Q,z,e){"use strict";var k,A,l,T=e(62072),b=e(53308),d=e(94908).Symbol,s=e(29366),t=e(92842),o=e(13304),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if("function"==typeof d)try{String(d()),l=!0}catch{}else d=null;A=function(i){if(this instanceof A)throw new TypeError("Symbol is not a constructor");return k(i)},Q.exports=k=function i(c){var h;if(this instanceof i)throw new TypeError("Symbol is not a constructor");return l?d(c):(h=r(A.prototype),c=void 0===c?"":String(c),n(h,{__description__:T("",c),__name__:T("",s(c))}))},t(k),o(k),n(A.prototype,{constructor:T(k),toString:T("",function(){return this.__name__})}),n(k.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(k.prototype,k.toPrimitive,T("",function(){var i=b(this);return"symbol"==typeof i?i:i.toString()})),a(k.prototype,k.toStringTag,T("c","Symbol")),a(A.prototype,k.toStringTag,T("c",k.prototype[k.toStringTag])),a(A.prototype,k.toPrimitive,T("c",k.prototype[k.toPrimitive]))},53308:function(Q,z,e){"use strict";var k=e(82276);Q.exports=function(A){if(!k(A))throw new TypeError(A+" is not a symbol");return A}},83522:function(Q,z,e){"use strict";Q.exports=e(96402)()?WeakMap:e(329)},96402:function(Q){"use strict";Q.exports=function(){var z,e;if("function"!=typeof WeakMap)return!1;try{z=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(z)&&"function"==typeof z.set&&z.set({},1)===z&&"function"==typeof z.delete&&"function"==typeof z.has&&"one"===z.get(e)}},96416:function(Q){"use strict";Q.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function(Q,z,e){"use strict";var k,A=e(95296),l=e(1496),T=e(98976),b=e(36672),d=e(43043),s=e(62072),t=e(66661),o=e(27515),r=e(8260).toStringTag,n=e(96416),a=Array.isArray,i=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;Q.exports=k=function(){var f,x=arguments[0];if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");return f=n&&l&&WeakMap!==k?l(new WeakMap,h(this)):this,A(x)&&(a(x)||(x=t(x))),i(f,"__weakMapData__",s("c","$weakMap$"+d())),x&&o(x,function(v){b(v),f.set(v[0],v[1])}),f},n&&(l&&l(k,WeakMap),k.prototype=Object.create(WeakMap.prototype,{constructor:s(k)})),Object.defineProperties(k.prototype,{delete:s(function(f){return!!c.call(T(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:s(function(f){if(c.call(T(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:s(function(f){return c.call(T(f),this.__weakMapData__)}),set:s(function(f,x){return i(T(f),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),i(k.prototype,r,s("c","WeakMap"))},15398:function(Q){"use strict";var z,e="object"==typeof Reflect?Reflect:null,k=e&&"function"==typeof e.apply?e.apply:function(c,h,f){return Function.prototype.apply.call(c,h,f)};z=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var A=Number.isNaN||function(c){return c!=c};function l(){l.init.call(this)}Q.exports=l,Q.exports.once=function(c,h){return new Promise(function(f,x){function v(y){c.removeListener(h,g),x(y)}function g(){"function"==typeof c.removeListener&&c.removeListener("error",v),f([].slice.call(arguments))}var y;i(c,h,g,{once:!0}),"error"!==h&&("function"==typeof(y=c).on&&i(y,"error",v,{once:!0}))})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function b(c){if("function"!=typeof c)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function d(c){return void 0===c._maxListeners?l.defaultMaxListeners:c._maxListeners}function s(c,h,f,x){var v,g,y;if(b(f),void 0===(g=c._events)?(g=c._events=Object.create(null),c._eventsCount=0):(void 0!==g.newListener&&(c.emit("newListener",h,f.listener?f.listener:f),g=c._events),y=g[h]),void 0===y)y=g[h]=f,++c._eventsCount;else if("function"==typeof y?y=g[h]=x?[f,y]:[y,f]:x?y.unshift(f):y.push(f),(v=d(c))>0&&y.length>v&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=c,m.type=h,m.count=y.length,console&&console.warn&&console.warn(m)}return c}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(c,h,f){var x={fired:!1,wrapFn:void 0,target:c,type:h,listener:f},v=t.bind(x);return v.listener=f,x.wrapFn=v,v}function r(c,h,f){var x=c._events;if(void 0===x)return[];var v=x[h];return void 0===v?[]:"function"==typeof v?f?[v.listener||v]:[v]:f?function(g){for(var y=new Array(g.length),p=0;p<y.length;++p)y[p]=g[p].listener||g[p];return y}(v):a(v,v.length)}function n(c){var h=this._events;if(void 0!==h){var f=h[c];if("function"==typeof f)return 1;if(void 0!==f)return f.length}return 0}function a(c,h){for(var f=new Array(h),x=0;x<h;++x)f[x]=c[x];return f}function i(c,h,f,x){if("function"==typeof c.on)x.once?c.once(h,f):c.on(h,f);else{if("function"!=typeof c.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(h,function v(g){x.once&&c.removeEventListener(h,v),f(g)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if("number"!=typeof c||c<0||A(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(c){if("number"!=typeof c||c<0||A(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(c){for(var h=[],f=1;f<arguments.length;f++)h.push(arguments[f]);var x="error"===c,v=this._events;if(void 0!==v)x=x&&void 0===v.error;else if(!x)return!1;if(x){var g;if(h.length>0&&(g=h[0]),g instanceof Error)throw g;var y=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw y.context=g,y}var p=v[c];if(void 0===p)return!1;if("function"==typeof p)k(p,this,h);else{var m=p.length,w=a(p,m);for(f=0;f<m;++f)k(w[f],this,h)}return!0},l.prototype.on=l.prototype.addListener=function(c,h){return s(this,c,h,!1)},l.prototype.prependListener=function(c,h){return s(this,c,h,!0)},l.prototype.once=function(c,h){return b(h),this.on(c,o(this,c,h)),this},l.prototype.prependOnceListener=function(c,h){return b(h),this.prependListener(c,o(this,c,h)),this},l.prototype.off=l.prototype.removeListener=function(c,h){var f,x,v,g,y;if(b(h),void 0===(x=this._events))return this;if(void 0===(f=x[c]))return this;if(f===h||f.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete x[c],x.removeListener&&this.emit("removeListener",c,f.listener||h));else if("function"!=typeof f){for(v=-1,g=f.length-1;g>=0;g--)if(f[g]===h||f[g].listener===h){y=f[g].listener,v=g;break}if(v<0)return this;0===v?f.shift():function(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}(f,v),1===f.length&&(x[c]=f[0]),void 0!==x.removeListener&&this.emit("removeListener",c,y||h)}return this},l.prototype.removeAllListeners=function(c){var h,f,x;if(void 0===(f=this._events))return this;if(void 0===f.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==f[c]&&(0==--this._eventsCount?this._events=Object.create(null):delete f[c]),this;if(0===arguments.length){var v,g=Object.keys(f);for(x=0;x<g.length;++x)"removeListener"!==(v=g[x])&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=f[c]))this.removeListener(c,h);else if(void 0!==h)for(x=h.length-1;x>=0;x--)this.removeListener(c,h[x]);return this},l.prototype.listeners=function(c){return r(this,c,!0)},l.prototype.rawListeners=function(c){return r(this,c,!1)},l.listenerCount=function(c,h){return"function"==typeof c.listenerCount?c.listenerCount(h):n.call(c,h)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?z(this._events):[]}},60774:function(Q){var z=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};Q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return z()}try{return __global__||z()}finally{delete Object.prototype.__global__}}()},94908:function(Q,z,e){"use strict";Q.exports=e(51152)()?globalThis:e(60774)},51152:function(Q){"use strict";Q.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},92770:function(Q,z,e){"use strict";var k=e(18546);Q.exports=function(A){var l=typeof A;if("string"===l){var T=A;if(0==(A=+A)&&k(T))return!1}else if("number"!==l)return!1;return A-A<1}},30120:function(Q,z,e){var k=e(90660);Q.exports=function(A,l,T){if(!A)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(A)&&A[0]&&"number"==typeof A[0][0]){var b,d,s,t,o=A[0].length,r=A.length*o;l&&"string"!=typeof l||(l=new(k(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+o+"x"+A.length+") does not match destination length "+n);for(b=0,s=T;b<A.length;b++)for(d=0;d<o;d++)l[s++]=null===A[b][d]?NaN:A[b][d]}else if(l&&"string"!=typeof l)l.set(A,T);else{var a=k(l||"float32");if(Array.isArray(A)||"array"===l)for(b=0,s=T,t=(l=new a(A.length+T)).length;s<t;s++,b++)l[s]=null===A[b]?NaN:A[b];else 0===T?l=new a(A):(l=new a(A.length+T)).set(A,T)}return l}},68016:function(Q,z,e){"use strict";var k=e(53313),A=[32,126];Q.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],b=l.canvas||document.createElement("canvas"),d=l.font,s="number"==typeof l.step?[l.step,l.step]:l.step||[32,32],t=l.chars||A;if(d&&"string"!=typeof d&&(d=k(d)),Array.isArray(t)){if(2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]){for(var o=[],r=t[0],n=0;r<=t[1];r++)o[n++]=String.fromCharCode(r);t=o}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=d,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var i=s[0]/2,c=s[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],i,c),(i+=s[0])>T[0]-s[0]/2&&(i=s[0]/2,c+=s[1]);return b}},32879:function(Q){"use strict";function z(l,T){T||(T={}),("string"==typeof l||Array.isArray(l))&&(T.family=l);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var d=T.size||T.fontSize||T.em||48,t=(l=[T.style||T.fontStyle||"",T.weight||T.fontWeight||"",d].join(" ")+"px "+b,T.origin||"top");if(z.cache[b]&&d<=z.cache[b].em)return e(z.cache[b],t);var o=T.canvas||z.canvas,r=o.getContext("2d"),n={upper:void 0!==T.upper?T.upper:"H",lower:void 0!==T.lower?T.lower:"x",descent:void 0!==T.descent?T.descent:"p",ascent:void 0!==T.ascent?T.ascent:"h",tittle:void 0!==T.tittle?T.tittle:"i",overshoot:void 0!==T.overshoot?T.overshoot:"O"},a=Math.ceil(1.5*d);o.height=a,o.width=.5*a,r.font=l;var i="H",c={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(i,0,0);var h=k(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(i,0,a);var f=k(r.getImageData(0,0,a,a));c.lineHeight=c.bottom=a-f+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(i,0,a);var x=a-k(r.getImageData(0,0,a,a))-1+h;c.baseline=c.alphabetic=x,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(i,0,.5*a);var v=k(r.getImageData(0,0,a,a));c.median=c.middle=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(i,0,.5*a);var g=k(r.getImageData(0,0,a,a));c.hanging=a-g-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(i,0,a);var y=k(r.getImageData(0,0,a,a));if(c.ideographic=a-y-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),c.upper=k(r.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),c.lower=k(r.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),c.tittle=k(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),c.ascent=k(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),c.descent=A(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var p=A(r.getImageData(0,0,a,a));c.overshoot=p-x}for(var m in c)c[m]/=d;return c.em=d,z.cache[b]=c,e(c,t)}function e(l,T){var b={};for(var d in"string"==typeof T&&(T=l[T]),l)"em"!==d&&(b[d]=l[d]-T);return b}function k(l){for(var T=l.height,b=l.data,d=3;d<b.length;d+=4)if(0!==b[d])return Math.floor(.25*(d-3)/T)}function A(l){for(var T=l.height,b=l.data,d=b.length-1;d>0;d-=4)if(0!==b[d])return Math.floor(.25*(d-3)/T)}Q.exports=z,z.canvas=document.createElement("canvas"),z.cache={}},86165:function(Q){var z=Object.prototype.hasOwnProperty,e=Object.prototype.toString;Q.exports=function(k,A,l){if("[object Function]"!==e.call(A))throw new TypeError("iterator must be a function");var T=k.length;if(T===+T)for(var b=0;b<T;b++)A.call(l,k[b],b,k);else for(var d in k)z.call(k,d)&&A.call(l,k[d],d,k)}},73047:function(Q){"use strict";var z="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,k=Object.prototype.toString,A="[object Function]";Q.exports=function(l){var T=this;if("function"!=typeof T||k.call(T)!==A)throw new TypeError(z+T);for(var b,d=e.call(arguments,1),t=Math.max(0,T.length-d.length),o=[],r=0;r<t;r++)o.push("$"+r);if(b=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof b){var a=T.apply(this,d.concat(e.call(arguments)));return Object(a)===a?a:this}return T.apply(l,d.concat(e.call(arguments)))}),T.prototype){var n=function(){};n.prototype=T.prototype,b.prototype=new n,n.prototype=null}return b}},77575:function(Q,z,e){"use strict";var k=e(73047);Q.exports=Function.prototype.bind||k},86249:function(Q){Q.exports=function(z,e){if("string"!=typeof z)throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var k=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(k.width=e.width),"number"==typeof e.height&&(k.height=e.height);var A,l=e;try{var T=[z];0===z.indexOf("webgl")&&T.push("experimental-"+z);for(var b=0;b<T.length;b++)if(A=k.getContext(T[b],l))return A}catch{A=null}return A||null}},68318:function(Q,z,e){"use strict";var k,A=SyntaxError,l=Function,T=TypeError,b=function(E){try{return Function('"use strict"; return ('+E+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var s=function(){throw new T},t=d?function(){try{return s}catch{try{return d(arguments,"callee").get}catch{return s}}}():s,o=e(57877)(),r=Object.getPrototypeOf||function(E){return E.__proto__},n=b("async function* () {}"),a=n?n.prototype:k,i=a?a.prototype:k,c=typeof Uint8Array>"u"?k:r(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?k:ArrayBuffer,"%ArrayIteratorPrototype%":o?r([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":b("async function () {}"),"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":i?r(i):k,"%Atomics%":typeof Atomics>"u"?k:Atomics,"%BigInt%":typeof BigInt>"u"?k:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?k:Float32Array,"%Float64Array%":typeof Float64Array>"u"?k:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?k:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":b("function* () {}"),"%Int8Array%":typeof Int8Array>"u"?k:Int8Array,"%Int16Array%":typeof Int16Array>"u"?k:Int16Array,"%Int32Array%":typeof Int32Array>"u"?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o?r(r([][Symbol.iterator]())):k,"%JSON%":"object"==typeof JSON?JSON:k,"%Map%":typeof Map>"u"?k:Map,"%MapIteratorPrototype%":typeof Map<"u"&&o?r((new Map)[Symbol.iterator]()):k,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?k:Promise,"%Proxy%":typeof Proxy>"u"?k:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?k:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?k:Set,"%SetIteratorPrototype%":typeof Set<"u"&&o?r((new Set)[Symbol.iterator]()):k,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o?r(""[Symbol.iterator]()):k,"%Symbol%":o?Symbol:k,"%SyntaxError%":A,"%ThrowTypeError%":t,"%TypedArray%":c,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?k:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?k:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?k:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?k:WeakMap,"%WeakRef%":typeof WeakRef>"u"?k:WeakRef,"%WeakSet%":typeof WeakSet>"u"?k:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=e(77575),v=e(35065),g=x.call(Function.call,Array.prototype.concat),y=x.call(Function.apply,Array.prototype.splice),p=x.call(Function.call,String.prototype.replace),m=x.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,u=/\\(\\)?/g,S=function(E){var L=m(E,0,1),C=m(E,-1);if("%"===L&&"%"!==C)throw new A("invalid intrinsic syntax, expected closing `%`");if("%"===C&&"%"!==L)throw new A("invalid intrinsic syntax, expected opening `%`");var P=[];return p(E,w,function(I,j,R,H){P[P.length]=R?p(H,u,"$1"):j||I}),P},_=function(E,L){var C,P=E;if(v(f,P)&&(P="%"+(C=f[P])[0]+"%"),v(h,P)){var I=h[P];if(void 0===I&&!L)throw new T("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:C,name:P,value:I}}throw new A("intrinsic "+E+" does not exist!")};Q.exports=function(E,L){if("string"!=typeof E||0===E.length)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof L)throw new T('"allowMissing" argument must be a boolean');var C=S(E),P=C.length>0?C[0]:"",I=_("%"+P+"%",L),j=I.name,R=I.value,H=!1,F=I.alias;F&&(P=F[0],y(C,g([0,1],F)));for(var U=1,B=!0;U<C.length;U+=1){var N=C[U],J=m(N,0,1),Z=m(N,-1);if(('"'===J||"'"===J||"`"===J||'"'===Z||"'"===Z||"`"===Z)&&J!==Z)throw new A("property names with quotes must have matching quotes");if("constructor"!==N&&B||(H=!0),v(h,j="%"+(P+="."+N)+"%"))R=h[j];else if(null!=R){if(!(N in R)){if(!L)throw new T("base intrinsic for "+E+" exists, but the property is not available.");return}if(d&&U+1>=C.length){var V=d(R,N);R=(B=!!V)&&"get"in V&&!("originalValue"in V.get)?V.get:R[N]}else B=v(R,N),R=R[N];B&&!H&&(h[j]=R)}}return R}},85400:function(Q){Q.exports=function(z,e){var k=e[0],A=e[1],l=e[2],T=e[3],b=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],c=e[13],h=e[14],f=e[15];return z[0]=d*(n*f-a*h)-r*(s*f-t*h)+c*(s*a-t*n),z[1]=-(A*(n*f-a*h)-r*(l*f-T*h)+c*(l*a-T*n)),z[2]=A*(s*f-t*h)-d*(l*f-T*h)+c*(l*t-T*s),z[3]=-(A*(s*a-t*n)-d*(l*a-T*n)+r*(l*t-T*s)),z[4]=-(b*(n*f-a*h)-o*(s*f-t*h)+i*(s*a-t*n)),z[5]=k*(n*f-a*h)-o*(l*f-T*h)+i*(l*a-T*n),z[6]=-(k*(s*f-t*h)-b*(l*f-T*h)+i*(l*t-T*s)),z[7]=k*(s*a-t*n)-b*(l*a-T*n)+o*(l*t-T*s),z[8]=b*(r*f-a*c)-o*(d*f-t*c)+i*(d*a-t*r),z[9]=-(k*(r*f-a*c)-o*(A*f-T*c)+i*(A*a-T*r)),z[10]=k*(d*f-t*c)-b*(A*f-T*c)+i*(A*t-T*d),z[11]=-(k*(d*a-t*r)-b*(A*a-T*r)+o*(A*t-T*d)),z[12]=-(b*(r*h-n*c)-o*(d*h-s*c)+i*(d*n-s*r)),z[13]=k*(r*h-n*c)-o*(A*h-l*c)+i*(A*n-l*r),z[14]=-(k*(d*h-s*c)-b*(A*h-l*c)+i*(A*s-l*d)),z[15]=k*(d*n-s*r)-b*(A*n-l*r)+o*(A*s-l*d),z}},42331:function(Q){Q.exports=function(z){var e=new Float32Array(16);return e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=z[3],e[4]=z[4],e[5]=z[5],e[6]=z[6],e[7]=z[7],e[8]=z[8],e[9]=z[9],e[10]=z[10],e[11]=z[11],e[12]=z[12],e[13]=z[13],e[14]=z[14],e[15]=z[15],e}},31042:function(Q){Q.exports=function(z,e){return z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},11902:function(Q){Q.exports=function(){var z=new Float32Array(16);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},89887:function(Q){Q.exports=function(z){var e=z[0],k=z[1],A=z[2],l=z[3],T=z[4],b=z[5],d=z[6],s=z[7],t=z[8],o=z[9],r=z[10],n=z[11],a=z[12],i=z[13],c=z[14],h=z[15];return(e*b-k*T)*(r*h-n*c)-(e*d-A*T)*(o*h-n*i)+(e*s-l*T)*(o*c-r*i)+(k*d-A*b)*(t*h-n*a)-(k*s-l*b)*(t*c-r*a)+(A*s-l*d)*(t*i-o*a)}},27812:function(Q){Q.exports=function(z,e){var k=e[0],A=e[1],l=e[2],T=e[3],b=k+k,d=A+A,s=l+l,t=k*b,o=A*b,r=A*d,n=l*b,a=l*d,i=l*s,c=T*b,h=T*d,f=T*s;return z[0]=1-r-i,z[1]=o+f,z[2]=n-h,z[3]=0,z[4]=o-f,z[5]=1-t-i,z[6]=a+c,z[7]=0,z[8]=n+h,z[9]=a-c,z[10]=1-t-r,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},34045:function(Q){Q.exports=function(z,e,k){var A,l,T,b=k[0],d=k[1],s=k[2],t=Math.sqrt(b*b+d*d+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,d*=t,s*=t,A=Math.sin(e),T=1-(l=Math.cos(e)),z[0]=b*b*T+l,z[1]=d*b*T+s*A,z[2]=s*b*T-d*A,z[3]=0,z[4]=b*d*T-s*A,z[5]=d*d*T+l,z[6]=s*d*T+b*A,z[7]=0,z[8]=b*s*T+d*A,z[9]=d*s*T-b*A,z[10]=s*s*T+l,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}},45973:function(Q){Q.exports=function(z,e,k){var A=e[0],l=e[1],T=e[2],b=e[3],d=A+A,s=l+l,t=T+T,o=A*d,r=A*s,n=A*t,a=l*s,i=l*t,c=T*t,h=b*d,f=b*s,x=b*t;return z[0]=1-(a+c),z[1]=r+x,z[2]=n-f,z[3]=0,z[4]=r-x,z[5]=1-(o+c),z[6]=i+h,z[7]=0,z[8]=n+f,z[9]=i-h,z[10]=1-(o+a),z[11]=0,z[12]=k[0],z[13]=k[1],z[14]=k[2],z[15]=1,z}},81472:function(Q){Q.exports=function(z,e){return z[0]=e[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=e[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=e[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},14669:function(Q){Q.exports=function(z,e){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=e[0],z[13]=e[1],z[14]=e[2],z[15]=1,z}},75262:function(Q){Q.exports=function(z,e){var k=Math.sin(e),A=Math.cos(e);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=A,z[6]=k,z[7]=0,z[8]=0,z[9]=-k,z[10]=A,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},331:function(Q){Q.exports=function(z,e){var k=Math.sin(e),A=Math.cos(e);return z[0]=A,z[1]=0,z[2]=-k,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=k,z[9]=0,z[10]=A,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},11049:function(Q){Q.exports=function(z,e){var k=Math.sin(e),A=Math.cos(e);return z[0]=A,z[1]=k,z[2]=0,z[3]=0,z[4]=-k,z[5]=A,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},75195:function(Q){Q.exports=function(z,e,k,A,l,T,b){var d=1/(k-e),s=1/(l-A),t=1/(T-b);return z[0]=2*T*d,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=2*T*s,z[6]=0,z[7]=0,z[8]=(k+e)*d,z[9]=(l+A)*s,z[10]=(b+T)*t,z[11]=-1,z[12]=0,z[13]=0,z[14]=b*T*2*t,z[15]=0,z}},71551:function(Q){Q.exports=function(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},79576:function(Q,z,e){Q.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function(Q){Q.exports=function(z,e){var k=e[0],A=e[1],l=e[2],T=e[3],b=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],c=e[13],h=e[14],f=e[15],x=k*d-A*b,v=k*s-l*b,g=k*t-T*b,y=A*s-l*d,p=A*t-T*d,m=l*t-T*s,w=o*c-r*i,u=o*h-n*i,S=o*f-a*i,_=r*h-n*c,E=r*f-a*c,L=n*f-a*h,C=x*L-v*E+g*_+y*S-p*u+m*w;return C?(z[0]=(d*L-s*E+t*_)*(C=1/C),z[1]=(l*E-A*L-T*_)*C,z[2]=(c*m-h*p+f*y)*C,z[3]=(n*p-r*m-a*y)*C,z[4]=(s*S-b*L-t*u)*C,z[5]=(k*L-l*S+T*u)*C,z[6]=(h*g-i*m-f*v)*C,z[7]=(o*m-n*g+a*v)*C,z[8]=(b*E-d*S+t*w)*C,z[9]=(A*S-k*E-T*w)*C,z[10]=(i*p-c*g+f*x)*C,z[11]=(r*g-o*p-a*x)*C,z[12]=(d*u-b*_-s*w)*C,z[13]=(k*_-A*u+l*w)*C,z[14]=(c*v-i*y-h*x)*C,z[15]=(o*y-r*v+n*x)*C,z):null}},65551:function(Q,z,e){var k=e(71551);Q.exports=function(A,l,T,b){var d,s,t,o,r,n,a,i,c,h,f=l[0],x=l[1],v=l[2],g=b[0],y=b[1],p=b[2],m=T[0],w=T[1],u=T[2];return Math.abs(f-m)<1e-6&&Math.abs(x-w)<1e-6&&Math.abs(v-u)<1e-6?k(A):(a=f-m,i=x-w,c=v-u,d=y*(c*=h=1/Math.sqrt(a*a+i*i+c*c))-p*(i*=h),s=p*(a*=h)-g*c,t=g*i-y*a,(h=Math.sqrt(d*d+s*s+t*t))?(d*=h=1/h,s*=h,t*=h):(d=0,s=0,t=0),o=i*t-c*s,r=c*d-a*t,n=a*s-i*d,(h=Math.sqrt(o*o+r*r+n*n))?(o*=h=1/h,r*=h,n*=h):(o=0,r=0,n=0),A[0]=d,A[1]=o,A[2]=a,A[3]=0,A[4]=s,A[5]=r,A[6]=i,A[7]=0,A[8]=t,A[9]=n,A[10]=c,A[11]=0,A[12]=-(d*f+s*x+t*v),A[13]=-(o*f+r*x+n*v),A[14]=-(a*f+i*x+c*v),A[15]=1,A)}},91362:function(Q){Q.exports=function(z,e,k){var A=e[0],l=e[1],T=e[2],b=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],c=e[12],h=e[13],f=e[14],x=e[15],v=k[0],g=k[1],y=k[2],p=k[3];return z[0]=v*A+g*d+y*r+p*c,z[1]=v*l+g*s+y*n+p*h,z[2]=v*T+g*t+y*a+p*f,z[3]=v*b+g*o+y*i+p*x,z[4]=(v=k[4])*A+(g=k[5])*d+(y=k[6])*r+(p=k[7])*c,z[5]=v*l+g*s+y*n+p*h,z[6]=v*T+g*t+y*a+p*f,z[7]=v*b+g*o+y*i+p*x,z[8]=(v=k[8])*A+(g=k[9])*d+(y=k[10])*r+(p=k[11])*c,z[9]=v*l+g*s+y*n+p*h,z[10]=v*T+g*t+y*a+p*f,z[11]=v*b+g*o+y*i+p*x,z[12]=(v=k[12])*A+(g=k[13])*d+(y=k[14])*r+(p=k[15])*c,z[13]=v*l+g*s+y*n+p*h,z[14]=v*T+g*t+y*a+p*f,z[15]=v*b+g*o+y*i+p*x,z}},60378:function(Q){Q.exports=function(z,e,k,A,l,T,b){var d=1/(e-k),s=1/(A-l),t=1/(T-b);return z[0]=-2*d,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*s,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*t,z[11]=0,z[12]=(e+k)*d,z[13]=(l+A)*s,z[14]=(b+T)*t,z[15]=1,z}},7864:function(Q){Q.exports=function(z,e,k,A,l){var T=1/Math.tan(e/2),b=1/(A-l);return z[0]=T/k,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=T,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=(l+A)*b,z[11]=-1,z[12]=0,z[13]=0,z[14]=2*l*A*b,z[15]=0,z}},35279:function(Q){Q.exports=function(z,e,k,A){var l=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),d=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+d),t=2/(l+T);return z[0]=s,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=t,z[6]=0,z[7]=0,z[8]=-(b-d)*s*.5,z[9]=(l-T)*t*.5,z[10]=A/(k-A),z[11]=-1,z[12]=0,z[13]=0,z[14]=A*k/(k-A),z[15]=0,z}},65074:function(Q){Q.exports=function(z,e,k,A){var l,T,b,d,s,t,o,r,n,a,i,c,h,f,x,v,g,y,p,m,w,u,S,_,E=A[0],L=A[1],C=A[2],P=Math.sqrt(E*E+L*L+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,C*=P,l=Math.sin(k),b=1-(T=Math.cos(k)),s=e[1],t=e[2],o=e[3],n=e[5],a=e[6],i=e[7],h=e[9],f=e[10],x=e[11],p=E*L*b-C*l,m=L*L*b+T,w=C*L*b+E*l,u=E*C*b+L*l,S=L*C*b-E*l,_=C*C*b+T,z[0]=(d=e[0])*(v=E*E*b+T)+(r=e[4])*(g=L*E*b+C*l)+(c=e[8])*(y=C*E*b-L*l),z[1]=s*v+n*g+h*y,z[2]=t*v+a*g+f*y,z[3]=o*v+i*g+x*y,z[4]=d*p+r*m+c*w,z[5]=s*p+n*m+h*w,z[6]=t*p+a*m+f*w,z[7]=o*p+i*m+x*w,z[8]=d*u+r*S+c*_,z[9]=s*u+n*S+h*_,z[10]=t*u+a*S+f*_,z[11]=o*u+i*S+x*_,e!==z&&(z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z)}},35545:function(Q){Q.exports=function(z,e,k){var A=Math.sin(k),l=Math.cos(k),T=e[4],b=e[5],d=e[6],s=e[7],t=e[8],o=e[9],r=e[10],n=e[11];return e!==z&&(z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[4]=T*l+t*A,z[5]=b*l+o*A,z[6]=d*l+r*A,z[7]=s*l+n*A,z[8]=t*l-T*A,z[9]=o*l-b*A,z[10]=r*l-d*A,z[11]=n*l-s*A,z}},94918:function(Q){Q.exports=function(z,e,k){var A=Math.sin(k),l=Math.cos(k),T=e[0],b=e[1],d=e[2],s=e[3],t=e[8],o=e[9],r=e[10],n=e[11];return e!==z&&(z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*l-t*A,z[1]=b*l-o*A,z[2]=d*l-r*A,z[3]=s*l-n*A,z[8]=T*A+t*l,z[9]=b*A+o*l,z[10]=d*A+r*l,z[11]=s*A+n*l,z}},15692:function(Q){Q.exports=function(z,e,k){var A=Math.sin(k),l=Math.cos(k),T=e[0],b=e[1],d=e[2],s=e[3],t=e[4],o=e[5],r=e[6],n=e[7];return e!==z&&(z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*l+t*A,z[1]=b*l+o*A,z[2]=d*l+r*A,z[3]=s*l+n*A,z[4]=t*l-T*A,z[5]=o*l-b*A,z[6]=r*l-d*A,z[7]=n*l-s*A,z}},10789:function(Q){Q.exports=function(z,e,k){var A=k[0],l=k[1],T=k[2];return z[0]=e[0]*A,z[1]=e[1]*A,z[2]=e[2]*A,z[3]=e[3]*A,z[4]=e[4]*l,z[5]=e[5]*l,z[6]=e[6]*l,z[7]=e[7]*l,z[8]=e[8]*T,z[9]=e[9]*T,z[10]=e[10]*T,z[11]=e[11]*T,z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},6726:function(Q){Q.exports=function(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}},31283:function(Q){Q.exports=function(z,e,k){var A,l,T,b,d,s,t,o,r,n,a,i,c=k[0],h=k[1],f=k[2];return e===z?(z[12]=e[0]*c+e[4]*h+e[8]*f+e[12],z[13]=e[1]*c+e[5]*h+e[9]*f+e[13],z[14]=e[2]*c+e[6]*h+e[10]*f+e[14],z[15]=e[3]*c+e[7]*h+e[11]*f+e[15]):(l=e[1],T=e[2],b=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],z[0]=A=e[0],z[1]=l,z[2]=T,z[3]=b,z[4]=d,z[5]=s,z[6]=t,z[7]=o,z[8]=r,z[9]=n,z[10]=a,z[11]=i,z[12]=A*c+d*h+r*f+e[12],z[13]=l*c+s*h+n*f+e[13],z[14]=T*c+t*h+a*f+e[14],z[15]=b*c+o*h+i*f+e[15]),z}},88654:function(Q){Q.exports=function(z,e){if(z===e){var k=e[1],A=e[2],l=e[3],T=e[6],b=e[7],d=e[11];z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=k,z[6]=e[9],z[7]=e[13],z[8]=A,z[9]=T,z[11]=e[14],z[12]=l,z[13]=b,z[14]=d}else z[0]=e[0],z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=e[1],z[5]=e[5],z[6]=e[9],z[7]=e[13],z[8]=e[2],z[9]=e[6],z[10]=e[10],z[11]=e[14],z[12]=e[3],z[13]=e[7],z[14]=e[11],z[15]=e[15];return z}},42505:function(Q,z,e){"use strict";var k=e(72791),A=e(71299),l=e(98580),T=e(12018),b=e(83522),d=e(25075),s=e(68016),t=e(58404),o=e(18863),r=e(10973),n=e(25677),a=e(75686),i=e(53545),c=e(56131),h=e(32879),f=e(30120),x=e(13547).nextPow2,v=new b,g=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(g=!0),document.body.removeChild(y)}var p=function(m){var w;this.gl="function"==typeof(w=m)&&w._gl&&w.prop&&w.texture&&w.buffer?(m={regl:m}).regl._gl:T(m),this.shader=v.get(this.gl),this.regl=this.shader?this.shader.regl:m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};p.prototype.createShader=function(){var m=this.regl,w=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(u,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(u,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(u,S){return S.atlas.texture},charStep:function(u,S){return S.atlas.step},em:function(u,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:m,draw:w,atlas:{}}},p.prototype.update=function(m){var w=this;if("string"==typeof m)m={text:m};else if(!m)return;null!=(m=A(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(m.opacity)?m.opacity.map(function($){return parseFloat($)}):parseFloat(m.opacity)),null!=m.viewport&&(this.viewport=o(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=m.kerning&&(this.kerning=m.kerning),null!=m.offset&&("number"==typeof m.offset&&(m.offset=[m.offset,0]),this.positionOffset=f(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=p.baseFontSize+"px sans-serif");var u,S=!1,_=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function($,oe){if("string"==typeof $)try{$=k.parse($)}catch{$=k.parse(p.baseFontSize+"px "+$)}else $=k.parse(k.stringify($));var he=k.stringify({size:p.baseFontSize,family:$.family,stretch:g?$.stretch:void 0,variant:$.variant,weight:$.weight,style:$.style}),me=n($.size),Me=Math.round(me[0]*a(me[1]));if(Me!==w.fontSize[oe]&&(_=!0,w.fontSize[oe]=Me),!(w.font[oe]&&he==w.font[oe].baseString||(S=!0,w.font[oe]=p.fonts[he],w.font[oe]))){var Ie=$.family.join(", "),Pe=[$.style];$.style!=$.variant&&Pe.push($.variant),$.variant!=$.weight&&Pe.push($.weight),g&&$.weight!=$.stretch&&Pe.push($.stretch),w.font[oe]={baseString:he,family:Ie,weight:$.weight,stretch:$.stretch,style:$.style,variant:$.variant,width:{},kerning:{},metrics:h(Ie,{origin:"top",fontSize:p.baseFontSize,fontStyle:Pe.join(" ")})},p.fonts[he]=w.font[oe]}}),(S||_)&&this.font.forEach(function($,oe){var he=k.stringify({size:w.fontSize[oe],family:$.family,stretch:g?$.stretch:void 0,variant:$.variant,weight:$.weight,style:$.style});w.fontAtlas[oe]=w.shader.atlas[he],w.fontAtlas[oe]||(w.shader.atlas[he]=w.fontAtlas[oe]={fontString:he,step:2*Math.ceil(w.fontSize[oe]*$.metrics.bottom*.5),em:w.fontSize[oe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}),null==m.text&&(m.text=w.text)}),"string"==typeof m.text&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(null!=m.text||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];u=[],this.font.forEach(function($,oe){p.atlasContext.font=$.baseString;for(var he=w.fontAtlas[oe],me=0;me<w.text.length;me++){var Me=w.text.charAt(me);if(null==he.ids[Me]&&(he.ids[Me]=he.chars.length,he.chars.push(Me),u.push(Me)),null==$.width[Me]&&($.width[Me]=p.atlasContext.measureText(Me).width/p.baseFontSize,w.kerning)){var Ie=[];for(var Pe in $.width)Ie.push(Pe+Me,Me+Pe);c($.kerning,i($.family,{pairs:Ie}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,I=t.mallocFloat(2*this.count),j=0,R=0;j<this.counts.length;j++){var H=this.counts[j];if(P)for(var F=0;F<H;F++)I[R++]=m.position[2*j],I[R++]=m.position[2*j+1];else for(var U=0;U<H;U++)I[R++]=m.position[j][0],I[R++]=m.position[j][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",data:I}),t.freeFloat(I)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var B=t.mallocUint8(this.count),N=t.mallocFloat(2*this.count);this.textWidth=[];for(var J=0,Z=0;J<this.counts.length;J++){for(var V=this.counts[J],W=this.font[J]||this.font[0],X=this.fontAtlas[J]||this.fontAtlas[0],K=0;K<V;K++){var ne=this.text.charAt(Z),re=this.text.charAt(Z-1);if(B[Z]=X.ids[ne],N[2*Z]=W.width[ne],K){var pe=N[2*Z-1]+.5*N[2*Z-2]+.5*N[2*Z];if(this.kerning){var xe=W.kerning[re+ne];xe&&(pe+=.001*xe)}N[2*Z+1]=pe}else N[2*Z+1]=.5*N[2*Z];Z++}this.textWidth.push(N.length?.5*N[2*Z-2]+N[2*Z-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:B,type:"uint8",usage:"stream"}),this.sizeBuffer({data:N,type:"float",usage:"stream"}),t.freeUint8(B),t.freeFloat(N),u.length&&this.font.forEach(function($,oe){var he=w.fontAtlas[oe],me=he.step,Me=Math.floor(p.maxAtlasSize/me),Ie=Math.min(Me,he.chars.length),Pe=Math.ceil(he.chars.length/Ie),ze=x(Ie*me),ce=x(Pe*me);he.width=ze,he.height=ce,he.rows=Pe,he.cols=Ie,he.em&&he.texture({data:s({canvas:p.atlasCanvas,font:he.fontString,chars:he.chars,shape:[ze,ce],step:[me,me]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function($,oe){var he=Array.isArray(w.align)?w.align.length>1?w.align[oe]:w.align[0]:w.align;if("number"==typeof he)return he;switch(he){case"right":case"end":return-$;case"center":case"centre":case"middle":return.5*-$}return 0})),null==this.baseline&&null==m.baseline&&(m.baseline=0),null!=m.baseline&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function($,oe){var he=(w.font[oe]||w.font[0]).metrics,me=0;return-1*((me+=.5*he.bottom)+("number"==typeof $?$-he.baseline:-he[$]))})),null!=m.color)if(m.color||(m.color="transparent"),"string"!=typeof m.color&&isNaN(m.color)){var ye;if("number"==typeof m.color[0]&&m.color.length>this.counts.length){var se=m.color.length;ye=t.mallocUint8(se);for(var fe=(m.color.subarray||m.color.slice).bind(m.color),Ee=0;Ee<se;Ee+=4)ye.set(d(fe(Ee,Ee+4),"uint8"),Ee)}else{var de=m.color.length;ye=t.mallocUint8(4*de);for(var we=0;we<de;we++)ye.set(d(m.color[we]||0,"uint8"),4*we)}this.color=ye}else this.color=d(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ke=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ke);for(var Te=0;Te<this.batch.length;Te++)this.batch[Te]={count:this.counts.length>1?this.counts[Te]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Te]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Te,4*Te+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Te]:this.opacity,baseline:null!=this.baselineOffset[Te]?this.baselineOffset[Te]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[Te]?this.alignOffset[Te]:this.alignOffset[0]:0,atlas:this.fontAtlas[Te]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Te,2*Te+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},p.prototype.destroy=function(){},p.prototype.kerning=!0,p.prototype.position={constant:new Float32Array(2)},p.prototype.translate=null,p.prototype.scale=null,p.prototype.font=null,p.prototype.text="",p.prototype.positionOffset=[0,0],p.prototype.opacity=1,p.prototype.color=new Uint8Array([0,0,0,255]),p.prototype.alignOffset=[0,0],p.maxAtlasSize=1024,p.atlasCanvas=document.createElement("canvas"),p.atlasContext=p.atlasCanvas.getContext("2d",{alpha:!1}),p.baseFontSize=64,p.fonts={},Q.exports=p},12018:function(Q,z,e){"use strict";var k=e(71299);function A(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var d=b.container.getBoundingClientRect();b.canvas.width=b.width||d.right-d.left,b.canvas.height=b.height||d.bottom-d.top}}function l(b){return"function"==typeof b.getContext&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}Q.exports=function(b){var d,t;if(b?"string"==typeof b&&(b={container:b}):b={},(b=l(b)||"string"==typeof(d=b).nodeName&&"function"==typeof d.appendChild&&"function"==typeof d.getBoundingClientRect?{container:b}:(t=b,"function"==typeof t.drawArrays||"function"==typeof t.drawElements?{gl:b}:k(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0))).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if("string"==typeof b.container){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}l(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),A(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),A(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},56068:function(Q){Q.exports=function(z){"string"==typeof z&&(z=[z]);for(var e=[].slice.call(arguments,1),k=[],A=0;A<z.length-1;A++)k.push(z[A],e[A]||"");return k.push(z[A]),k.join("")}},57035:function(Q,z,e){"use strict";var k,A=e(54404);k="function"==typeof e.g.matchMedia?!e.g.matchMedia("(hover: none)").matches:A,Q.exports=k},38520:function(Q,z,e){"use strict";var k=e(54404);Q.exports=k&&function(){var A=!1;try{var l=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{A=!1}return A}()},57877:function(Q,z,e){"use strict";var k=typeof Symbol<"u"&&Symbol,A=e(35638);Q.exports=function(){return"function"==typeof k&&"function"==typeof Symbol&&"symbol"==typeof k("foo")&&"symbol"==typeof Symbol("bar")&&A()}},35638:function(Q){"use strict";Q.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var z={},e=Symbol("test"),k=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(k))return!1;for(e in z[e]=42,z)return!1;if("function"==typeof Object.keys&&0!==Object.keys(z).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(z).length)return!1;var A=Object.getOwnPropertySymbols(z);if(1!==A.length||A[0]!==e||!Object.prototype.propertyIsEnumerable.call(z,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(z,e);if(42!==l.value||!0!==l.enumerable)return!1}return!0}},84543:function(Q,z,e){"use strict";var k=e(35638);Q.exports=function(){return k()&&!!Symbol.toStringTag}},35065:function(Q,z,e){"use strict";var k=e(77575);Q.exports=k.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(Q,z){z.read=function(e,k,A,l,T){var b,d,s=8*T-l-1,t=(1<<s)-1,o=t>>1,r=-7,n=A?T-1:0,a=A?-1:1,i=e[k+n];for(n+=a,b=i&(1<<-r)-1,i>>=-r,r+=s;r>0;b=256*b+e[k+n],n+=a,r-=8);for(d=b&(1<<-r)-1,b>>=-r,r+=l;r>0;d=256*d+e[k+n],n+=a,r-=8);if(0===b)b=1-o;else{if(b===t)return d?NaN:1/0*(i?-1:1);d+=Math.pow(2,l),b-=o}return(i?-1:1)*d*Math.pow(2,b-l)},z.write=function(e,k,A,l,T,b){var d,s,t,o=8*b-T-1,r=(1<<o)-1,n=r>>1,a=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,i=l?0:b-1,c=l?1:-1,h=k<0||0===k&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(s=isNaN(k)?1:0,d=r):(d=Math.floor(Math.log(k)/Math.LN2),k*(t=Math.pow(2,-d))<1&&(d--,t*=2),(k+=d+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(d++,t/=2),d+n>=r?(s=0,d=r):d+n>=1?(s=(k*t-1)*Math.pow(2,T),d+=n):(s=k*Math.pow(2,n-1)*Math.pow(2,T),d=0));T>=8;e[A+i]=255&s,i+=c,s/=256,T-=8);for(d=d<<T|s,o+=T;o>0;e[A+i]=255&d,i+=c,d/=256,o-=8);e[A+i-c]|=128*h}},42018:function(Q){Q.exports="function"==typeof Object.create?function(z,e){e&&(z.super_=e,z.prototype=Object.create(e.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:function(z,e){if(e){z.super_=e;var k=function(){};k.prototype=e.prototype,z.prototype=new k,z.prototype.constructor=z}}},47216:function(Q){"use strict";var z="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,e=Object.prototype.toString,k=function(T){return!(z&&T&&"object"==typeof T&&Symbol.toStringTag in T)&&"[object Arguments]"===e.call(T)},A=function(T){return!!k(T)||null!==T&&"object"==typeof T&&"number"==typeof T.length&&T.length>=0&&"[object Array]"!==e.call(T)&&"[object Function]"===e.call(T.callee)},l=function(){return k(arguments)}();k.isLegacyArguments=A,Q.exports=l?k:A},54404:function(Q){Q.exports=!0},65481:function(Q,z,e){"use strict";var k,A=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(84543)(),d=Object.getPrototypeOf;Q.exports=function(s){if("function"!=typeof s)return!1;if(T.test(l.call(s)))return!0;if(!b)return"[object GeneratorFunction]"===A.call(s);if(!d)return!1;if(void 0===k){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();k=!!t&&d(t)}return d(s)===k}},62683:function(Q){"use strict";Q.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(Q){"use strict";Q.exports=function(z){return z!=z}},15567:function(Q,z,e){"use strict";var k=e(68222),A=e(17045),l=e(64274),T=e(14922),b=e(22442),d=k(T(),Number);A(d,{getPolyfill:T,implementation:l,shim:b}),Q.exports=d},14922:function(Q,z,e){"use strict";var k=e(64274);Q.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:k}},22442:function(Q,z,e){"use strict";var k=e(17045),A=e(14922);Q.exports=function(){var l=A();return k(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function(Q){"use strict";Q.exports=function(z){var e=typeof z;return null!==z&&("object"===e||"function"===e)}},10973:function(Q){"use strict";var z=Object.prototype.toString;Q.exports=function(e){var k;return"[object Object]"===z.call(e)&&(null===(k=Object.getPrototypeOf(e))||k===Object.getPrototypeOf({}))}},18546:function(Q){"use strict";Q.exports=function(z){for(var e,k=z.length,A=0;A<k;A++)if(((e=z.charCodeAt(A))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},89546:function(Q){"use strict";Q.exports=function(z){return"string"==typeof z&&(z=z.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(z)&&/[\dz]$/i.test(z)&&z.length>4))}},9187:function(Q,z,e){"use strict";var k=e(86165),A=e(72077),l=e(92978),T=l("Object.prototype.toString"),b=e(57877)()&&"symbol"==typeof Symbol.toStringTag,d=A(),s=l("Array.prototype.indexOf",!0)||function(a,i){for(var c=0;c<a.length;c+=1)if(a[c]===i)return c;return-1},t=l("String.prototype.slice"),o={},r=e(67295),n=Object.getPrototypeOf;b&&r&&n&&k(d,function(a){var i=new e.g[a];if(!(Symbol.toStringTag in i))throw new EvalError("this engine has support for Symbol.toStringTag, but "+a+" does not have the property! Please report this.");var c=n(i),h=r(c,Symbol.toStringTag);if(!h){var f=n(c);h=r(f,Symbol.toStringTag)}o[a]=h.get}),Q.exports=function(a){if(!a||"object"!=typeof a)return!1;if(!b){var i=t(T(a),8,-1);return s(d,i)>-1}return!!r&&(c=a,h=!1,k(o,function(f,x){if(!h)try{h=f.call(c)===x}catch{}}),h);var c,h}},44517:function(Q){Q.exports=function(){"use strict";var z,e,k;function A(l,T){if(z)if(e){var b="var sharedChunk = {}; ("+z+")(sharedChunk); ("+e+")(sharedChunk);",d={};z(d),(k=T(d)).workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else e=T;else z=T}return A(0,function(l){function T(M,O){return M(O={exports:{}},O.exports),O.exports}var b="1.10.1",d=s;function s(M,O,G,ie){this.cx=3*M,this.bx=3*(G-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ie-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=ie,this.p2x=G,this.p2y=ie}s.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},s.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},s.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},s.prototype.solveCurveX=function(M,O){var G,ie,be,Le,je;for(void 0===O&&(O=1e-6),be=M,je=0;je<8;je++){if(Le=this.sampleCurveX(be)-M,Math.abs(Le)<O)return be;var Qe=this.sampleCurveDerivativeX(be);if(Math.abs(Qe)<1e-6)break;be-=Le/Qe}if((be=M)<(G=0))return G;if(be>(ie=1))return ie;for(;G<ie;){if(Le=this.sampleCurveX(be),Math.abs(Le-M)<O)return be;M>Le?G=be:ie=be,be=.5*(ie-G)+G}return be},s.prototype.solve=function(M,O){return this.sampleCurveY(this.solveCurveX(M,O))};var t=o;function o(M,O){this.x=M,this.y=O}function r(M,O,G,ie){var be=new d(M,O,G,ie);return function(Le){return be.solve(Le)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,O){return this.clone()._rotateAround(M,O)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var O=M.x-this.x,G=M.y-this.y;return O*O+G*G},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,O){return Math.atan2(this.x*O-this.y*M,this.x*M+this.y*O)},_matMult:function(M){var G=M[2]*this.x+M[3]*this.y;return this.x=M[0]*this.x+M[1]*this.y,this.y=G,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var O=Math.cos(M),G=Math.sin(M),be=G*this.x+O*this.y;return this.x=O*this.x-G*this.y,this.y=be,this},_rotateAround:function(M,O){var G=Math.cos(M),ie=Math.sin(M),Le=O.y+ie*(this.x-O.x)+G*(this.y-O.y);return this.x=O.x+G*(this.x-O.x)-ie*(this.y-O.y),this.y=Le,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(M){return M instanceof o?M:Array.isArray(M)?new o(M[0],M[1]):M};var n=r(.25,.1,.25,1);function a(M,O,G){return Math.min(G,Math.max(O,M))}function i(M,O,G){var ie=G-O,be=((M-O)%ie+ie)%ie+O;return be===O?G:be}function c(M){for(var O=[],G=arguments.length-1;G-- >0;)O[G]=arguments[G+1];for(var ie=0,be=O;ie<be.length;ie+=1){var Le=be[ie];for(var je in Le)M[je]=Le[je]}return M}var h=1;function f(){return h++}function x(){return function M(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function v(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function g(M,O){M.forEach(function(G){O[G]&&(O[G]=O[G].bind(O))})}function y(M,O){return-1!==M.indexOf(O,M.length-O.length)}function p(M,O,G){var ie={};for(var be in M)ie[be]=O.call(G||this,M[be],be,M);return ie}function m(M,O,G){var ie={};for(var be in M)O.call(G||this,M[be],be,M)&&(ie[be]=M[be]);return ie}function w(M){return Array.isArray(M)?M.map(w):"object"==typeof M&&M?p(M,w):M}var u={};function S(M){u[M]||(typeof console<"u"&&console.warn(M),u[M]=!0)}function _(M,O,G){return(G.y-M.y)*(O.x-M.x)>(O.y-M.y)*(G.x-M.x)}function E(M){for(var O=0,G=0,ie=M.length,be=ie-1,Le=void 0,je=void 0;G<ie;be=G++)O+=((je=M[be]).x-(Le=M[G]).x)*(Le.y+je.y);return O}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(M){var O={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ie,be,Le,je){var Qe=Le||je;return O[be]=!Qe||Qe.toLowerCase(),""}),O["max-age"]){var G=parseInt(O["max-age"],10);isNaN(G)?delete O["max-age"]:O["max-age"]=G}return O}var P=null;function I(M){if(null==P){var O=M.navigator?M.navigator.userAgent:null;P=!!M.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return P}function j(M){try{var O=self[M];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var R,H,F,U,B=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),N=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,J=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Z={now:B,frame:function(M){var O=N(M);return{cancel:function(){return J(O)}}},getImageData:function(M,O){void 0===O&&(O=0);var G=self.document.createElement("canvas"),ie=G.getContext("2d");if(!ie)throw new Error("failed to create canvas 2d context");return G.width=M.width,G.height=M.height,ie.drawImage(M,0,0,M.width,M.height),ie.getImageData(-O,-O,M.width+2*O,M.height+2*O)},resolveURL:function(M){return R||(R=self.document.createElement("a")),R.href=M,R.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==H&&(H=self.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},W={supported:!1,testSupport:function(M){!X&&U&&(K?ne(M):F=M)}},X=!1,K=!1;function ne(M){var O=M.createTexture();M.bindTexture(M.TEXTURE_2D,O);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,U),M.isContextLost())return;W.supported=!0}catch{}M.deleteTexture(O),X=!0}self.document&&((U=self.document.createElement("img")).onload=function(){F&&ne(F),F=null,K=!0},U.onerror=function(){X=!0,F=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ae=function(M,O){this._transformRequestFn=M,this._customAccessToken=O,this._createSkuToken()};function le(M){return 0===M.indexOf("mapbox:")}ae.prototype._createSkuToken=function(){var M=function(){for(var O="",G=0;G<10;G++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ae.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ae.prototype.transformRequest=function(M,O){return this._transformRequestFn&&this._transformRequestFn(M,O)||{url:M}},ae.prototype.normalizeStyleURL=function(M,O){if(!le(M))return M;var G=se(M);return G.path="/styles/v1"+G.path,this._makeAPIURL(G,this._customAccessToken||O)},ae.prototype.normalizeGlyphsURL=function(M,O){if(!le(M))return M;var G=se(M);return G.path="/fonts/v1"+G.path,this._makeAPIURL(G,this._customAccessToken||O)},ae.prototype.normalizeSourceURL=function(M,O){if(!le(M))return M;var G=se(M);return G.path="/v4/"+G.authority+".json",G.params.push("secure"),this._makeAPIURL(G,this._customAccessToken||O)},ae.prototype.normalizeSpriteURL=function(M,O,G,ie){var be=se(M);return le(M)?(be.path="/styles/v1"+be.path+"/sprite"+O+G,this._makeAPIURL(be,this._customAccessToken||ie)):(be.path+=""+O+G,fe(be))},ae.prototype.normalizeTileURL=function(M,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!le(M))return M;var G=se(M);G.path=G.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Z.devicePixelRatio>=2||512===O?"@2x":"")+(W.supported?".webp":"$1")),G.path=G.path.replace(/^.+\/v4\//,"/"),G.path="/v4"+G.path;var Le=this._customAccessToken||function(je){for(var Qe=0,lt=je;Qe<lt.length;Qe+=1){var kt=lt[Qe].match(/^access_token=(.*)$/);if(kt)return kt[1]}return null}(G.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&Le&&this._skuToken&&G.params.push("sku="+this._skuToken),this._makeAPIURL(G,Le)},ae.prototype.canonicalizeTileURL=function(M,O){var G=se(M);if(!G.path.match(/(^\/v4\/)/)||!G.path.match(/\.[\w]+$/))return M;var ie="mapbox://tiles/";ie+=G.path.replace("/v4/","");var be=G.params;return O&&(be=be.filter(function(Le){return!Le.match(/^access_token=/)})),be.length&&(ie+="?"+be.join("&")),ie},ae.prototype.canonicalizeTileset=function(M,O){for(var G=!!O&&le(O),ie=[],be=0,Le=M.tiles||[];be<Le.length;be+=1){var je=Le[be];xe(je)?ie.push(this.canonicalizeTileURL(je,G)):ie.push(je)}return ie},ae.prototype._makeAPIURL=function(M,O){var G="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ie=se(V.API_URL);if(M.protocol=ie.protocol,M.authority=ie.authority,"/"!==ie.path&&(M.path=""+ie.path+M.path),!V.REQUIRE_ACCESS_TOKEN)return fe(M);if(!(O=O||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+G);if("s"===O[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+G);return M.params=M.params.filter(function(be){return-1===be.indexOf("access_token")}),M.params.push("access_token="+O),fe(M)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function xe(M){return pe.test(M)}var ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function se(M){var O=M.match(ye);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function fe(M){var O=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+O}var Ee="mapbox.eventData";function de(M){if(!M)return null;var G=M.split(".");if(!G||3!==G.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(G[1]).split("").map(function(ie){return"%"+("00"+ie.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var we=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};we.prototype.getStorageKey=function(M){var O,ie=de(V.ACCESS_TOKEN);return O=ie&&ie.u?self.btoa(encodeURIComponent(ie.u).replace(/%([0-9A-F]{2})/g,function(be,Le){return String.fromCharCode(Number("0x"+Le))})):V.ACCESS_TOKEN||"",M?Ee+"."+M+":"+O:Ee+":"+O},we.prototype.fetchEventData=function(){var M=j("localStorage"),O=this.getStorageKey(),G=this.getStorageKey("uuid");if(M)try{var ie=self.localStorage.getItem(O);ie&&(this.eventData=JSON.parse(ie));var be=self.localStorage.getItem(G);be&&(this.anonId=be)}catch{S("Unable to read from LocalStorage")}},we.prototype.saveEventData=function(){var M=j("localStorage"),O=this.getStorageKey(),G=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(G,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},we.prototype.processRequests=function(M){},we.prototype.postEvent=function(M,O,G,ie){var be=this;if(V.EVENTS_URL){var Le=se(V.EVENTS_URL);Le.params.push("access_token="+(ie||V.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:re,userId:this.anonId},Qe=O?c(je,O):je,lt={url:fe(Le),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Qe])};this.pendingRequest=Ct(lt,function(kt){be.pendingRequest=null,G(kt),be.saveEventData(),be.processRequests(ie)})}},we.prototype.queueRequest=function(M,O){this.queue.push(M),this.processRequests(O)};var ke,Te,$=function(M){function O(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.postMapLoadEvent=function(G,ie,be,Le){this.skuToken=be,(V.EVENTS_URL&&Le||V.ACCESS_TOKEN&&Array.isArray(G)&&G.some(function(je){return le(je)||xe(je)}))&&this.queueRequest({id:ie,timestamp:Date.now()},Le)},O.prototype.processRequests=function(G){var ie=this;if(!this.pendingRequest&&0!==this.queue.length){var be=this.queue.shift(),Le=be.id,je=be.timestamp;Le&&this.success[Le]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=x()),this.postEvent(je,{skuToken:this.skuToken},function(Qe){Qe||Le&&(ie.success[Le]=!0)},G))}},O}(we),oe=function(M){function O(G){M.call(this,"appUserTurnstile"),this._customAccessToken=G}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.postTurnstileEvent=function(G,ie){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(G)&&G.some(function(be){return le(be)||xe(be)})&&this.queueRequest(Date.now(),ie)},O.prototype.processRequests=function(G){var ie=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var be=de(V.ACCESS_TOKEN),Le=be?be.u:V.ACCESS_TOKEN,je=Le!==this.eventData.tokenU;v(this.anonId)||(this.anonId=x(),je=!0);var Qe=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),kt=new Date(Qe),Mt=(Qe-this.eventData.lastSuccess)/864e5;je=je||Mt>=1||Mt<-1||lt.getDate()!==kt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Qe,{"enabled.telemetry":!1},function(Bt){Bt||(ie.eventData.lastSuccess=Qe,ie.eventData.tokenU=Le)},G)}},O}(we),he=new oe,me=he.postTurnstileEvent.bind(he),Me=new $,Ie=Me.postMapLoadEvent.bind(Me),Pe="mapbox-tiles",ze=500,ce=50;function ge(){self.caches&&!ke&&(ke=self.caches.open(Pe))}function De(M){var O=M.indexOf("?");return O<0?M:M.slice(0,O)}var Ve,nt=1/0;function tt(){return null==Ve&&(Ve=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ve}var at={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(at);var dt=function(M){function O(G,ie,be){401===ie&&xe(be)&&(G+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,G),this.status=ie,this.url=be,this.name=this.constructor.name,this.message=G}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),wt=L()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};var Ot,Ht,_t=function(M,O){if(!(/^file:/.test(G=M.url)||/^file:/.test(wt())&&!/^\w+:/.test(G))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function bt(M,O){var G,ie=new self.AbortController,be=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:wt(),signal:ie.signal}),Le=!1,je=!1,Qe=(G=be.url).indexOf("sku=")>0&&xe(G);"json"===M.type&&be.headers.set("Accept","application/json");var lt=function(Mt,Bt,qt){if(!je){if(Mt&&"SecurityError"!==Mt.message&&S(Mt),Bt&&qt)return kt(Bt);var Vt=Date.now();self.fetch(be).then(function(nn){if(nn.ok){var xn=Qe?nn.clone():null;return kt(nn,xn,Vt)}return O(new dt(nn.statusText,nn.status,M.url))}).catch(function(nn){20!==nn.code&&O(new Error(nn.message))})}},kt=function(Mt,Bt,qt){("arrayBuffer"===M.type?Mt.arrayBuffer():"json"===M.type?Mt.json():Mt.text()).then(function(Vt){je||(Bt&&qt&&function _e(M,O,G){if(ge(),ke){var ie={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(Le,je){return ie.headers.set(je,Le)});var be=C(O.headers.get("Cache-Control")||"");be["no-store"]||(be["max-age"]&&ie.headers.set("Expires",new Date(G+1e3*be["max-age"]).toUTCString()),new Date(ie.headers.get("Expires")).getTime()-G<42e4||function(Le,je){if(void 0===Te)try{new Response(new ReadableStream),Te=!0}catch{Te=!1}Te?je(Le.body):Le.blob().then(je)}(O,function(Le){var je=new self.Response(Le,ie);ge(),ke&&ke.then(function(Qe){return Qe.put(De(M.url),je)}).catch(function(Qe){return S(Qe.message)})}))}}(be,Bt,qt),Le=!0,O(null,Vt,Mt.headers.get("Cache-Control"),Mt.headers.get("Expires")))}).catch(function(Vt){je||O(new Error(Vt.message))})};return Qe?function He(M,O){if(ge(),!ke)return O(null);var G=De(M.url);ke.then(function(ie){ie.match(G).then(function(be){var Le=function(je){if(!je)return!1;var Qe=new Date(je.headers.get("Expires")||0),lt=C(je.headers.get("Cache-Control")||"");return Qe>Date.now()&&!lt["no-cache"]}(be);ie.delete(G),Le&&ie.put(G,be.clone()),O(null,be,Le)}).catch(O)}).catch(O)}(be,lt):lt(null,null),{cancel:function(){je=!0,Le||ie.abort()}}}(M,O);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,O,void 0,!0)}var G;return function(ie,be){var Le=new self.XMLHttpRequest;for(var je in Le.open(ie.method||"GET",ie.url,!0),"arrayBuffer"===ie.type&&(Le.responseType="arraybuffer"),ie.headers)Le.setRequestHeader(je,ie.headers[je]);return"json"===ie.type&&(Le.responseType="text",Le.setRequestHeader("Accept","application/json")),Le.withCredentials="include"===ie.credentials,Le.onerror=function(){be(new Error(Le.statusText))},Le.onload=function(){if((Le.status>=200&&Le.status<300||0===Le.status)&&null!==Le.response){var Qe=Le.response;if("json"===ie.type)try{Qe=JSON.parse(Le.response)}catch(lt){return be(lt)}be(null,Qe,Le.getResponseHeader("Cache-Control"),Le.getResponseHeader("Expires"))}else be(new dt(Le.statusText,Le.status,ie.url))},Le.send(ie.body),{cancel:function(){return Le.abort()}}}(M,O)},Lt=function(M,O){return _t(c(M,{type:"arrayBuffer"}),O)},Ct=function(M,O){return _t(c(M,{method:"POST"}),O)};Ot=[],Ht=0;var It=function(M,O){if(W.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ht>=V.MAX_PARALLEL_IMAGE_REQUESTS){var G={requestParameters:M,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(G),G}Ht++;var ie=!1,be=function(){if(!ie)for(ie=!0,Ht--;Ot.length&&Ht<V.MAX_PARALLEL_IMAGE_REQUESTS;){var je=Ot.shift();je.cancelled||(je.cancel=It(je.requestParameters,je.callback).cancel)}},Le=Lt(M,function(je,Qe,lt,kt){var Bt,qt;be(),je?O(je):Qe&&(tt()?(Bt=O,qt=new self.Blob([new Uint8Array(Qe)],{type:"image/png"}),self.createImageBitmap(qt).then(function(Vt){Bt(null,Vt)}).catch(function(Vt){Bt(new Error("Could not load image because of "+Vt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Mt,Bt,qt,Vt){var nn=new self.Image,xn=self.URL;nn.onload=function(){Bt(null,nn),xn.revokeObjectURL(nn.src)},nn.onerror=function(){return Bt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var zn=new self.Blob([new Uint8Array(Mt)],{type:"image/png"});nn.cacheControl=qt,nn.expires=Vt,nn.src=Mt.byteLength?xn.createObjectURL(zn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Qe,O,lt,kt))});return{cancel:function(){Le.cancel(),be()}}};function Ge(M,O,G){G[M]&&-1!==G[M].indexOf(O)||(G[M]=G[M]||[],G[M].push(O))}function Ze(M,O,G){if(G&&G[M]){var ie=G[M].indexOf(O);-1!==ie&&G[M].splice(ie,1)}}var Be=function(M,O){void 0===O&&(O={}),c(this,O),this.type=M},Ye=function(M){function O(G,ie){void 0===ie&&(ie={}),M.call(this,"error",c({error:G},ie))}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O}(Be),rt=function(){};rt.prototype.on=function(M,O){return this._listeners=this._listeners||{},Ge(M,O,this._listeners),this},rt.prototype.off=function(M,O){return Ze(M,O,this._listeners),Ze(M,O,this._oneTimeListeners),this},rt.prototype.once=function(M,O){return this._oneTimeListeners=this._oneTimeListeners||{},Ge(M,O,this._oneTimeListeners),this},rt.prototype.fire=function(M,O){"string"==typeof M&&(M=new Be(M,O||{}));var G=M.type;if(this.listens(G)){M.target=this;for(var ie=0,be=this._listeners&&this._listeners[G]?this._listeners[G].slice():[];ie<be.length;ie+=1)be[ie].call(this,M);for(var Le=0,je=this._oneTimeListeners&&this._oneTimeListeners[G]?this._oneTimeListeners[G].slice():[];Le<je.length;Le+=1){var Qe=je[Le];Ze(G,Qe,this._oneTimeListeners),Qe.call(this,M)}var lt=this._eventedParent;lt&&(c(M,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),lt.fire(M))}else M instanceof Ye&&console.error(M.error);return this},rt.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},rt.prototype.setEventedParent=function(M,O){return this._eventedParent=M,this._eventedParentData=O,this};var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Re=function(M,O,G,ie){this.message=(M?M+": ":"")+G,ie&&(this.identifier=ie),null!=O&&O.__line__&&(this.line=O.__line__)};function Ke(M){var G=M.value;return G?[new Re(M.key,G,"constants have been deprecated as of v8")]:[]}function st(M){for(var O=[],G=arguments.length-1;G-- >0;)O[G]=arguments[G+1];for(var ie=0,be=O;ie<be.length;ie+=1){var Le=be[ie];for(var je in Le)M[je]=Le[je]}return M}function ct(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Tt(M){if(Array.isArray(M))return M.map(Tt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var O={};for(var G in M)O[G]=Tt(M[G]);return O}return ct(M)}var Et=function(M){function O(G,ie){M.call(this,ie),this.message=ie,this.key=G}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O}(Error),At=function(M,O){void 0===O&&(O=[]),this.parent=M,this.bindings={};for(var G=0,ie=O;G<ie.length;G+=1){var be=ie[G];this.bindings[be[0]]=be[1]}};At.prototype.concat=function(M){return new At(this,M)},At.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},At.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var ht={kind:"null"},pt={kind:"number"},gt={kind:"string"},Pt={kind:"boolean"},zt={kind:"color"},Ut={kind:"object"},Nt={kind:"value"},jt={kind:"collator"},Gt={kind:"formatted"},un={kind:"resolvedImage"};function hn(M,O){return{kind:"array",itemType:M,N:O}}function Qt(M){if("array"===M.kind){var O=Qt(M.itemType);return"number"==typeof M.N?"array<"+O+", "+M.N+">":"value"===M.itemType.kind?"array":"array<"+O+">"}return M.kind}var _n=[ht,pt,gt,Pt,zt,Gt,Ut,hn(Nt),un];function Fn(M,O){if("error"===O.kind)return null;if("array"===M.kind){if("array"===O.kind&&(0===O.N&&"value"===O.itemType.kind||!Fn(M.itemType,O.itemType))&&("number"!=typeof M.N||M.N===O.N))return null}else{if(M.kind===O.kind)return null;if("value"===M.kind)for(var G=0,ie=_n;G<ie.length;G+=1)if(!Fn(ie[G],O))return null}return"Expected "+Qt(M)+" but found "+Qt(O)+" instead."}function yn(M,O){return O.some(function(G){return G.kind===M.kind})}function on(M,O){return O.some(function(G){return"null"===G?null===M:"array"===G?Array.isArray(M):"object"===G?M&&!Array.isArray(M)&&"object"==typeof M:G===typeof M})}var ln=T(function(M,O){var G={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ie(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function Le(lt){return ie("%"===lt[lt.length-1]?parseFloat(lt)/100*255:parseInt(lt))}function je(lt){return function be(lt){return lt<0?0:lt>1?1:lt}("%"===lt[lt.length-1]?parseFloat(lt)/100:parseFloat(lt))}function Qe(lt,kt,Mt){return Mt<0?Mt+=1:Mt>1&&(Mt-=1),6*Mt<1?lt+(kt-lt)*Mt*6:2*Mt<1?kt:3*Mt<2?lt+(kt-lt)*(2/3-Mt)*6:lt}try{O.parseCSSColor=function(lt){var kt,Mt=lt.replace(/ /g,"").toLowerCase();if(Mt in G)return G[Mt].slice();if("#"===Mt[0])return 4===Mt.length?(kt=parseInt(Mt.substr(1),16))>=0&&kt<=4095?[(3840&kt)>>4|(3840&kt)>>8,240&kt|(240&kt)>>4,15&kt|(15&kt)<<4,1]:null:7===Mt.length&&(kt=parseInt(Mt.substr(1),16))>=0&&kt<=16777215?[(16711680&kt)>>16,(65280&kt)>>8,255&kt,1]:null;var Bt=Mt.indexOf("("),qt=Mt.indexOf(")");if(-1!==Bt&&qt+1===Mt.length){var Vt=Mt.substr(0,Bt),nn=Mt.substr(Bt+1,qt-(Bt+1)).split(","),xn=1;switch(Vt){case"rgba":if(4!==nn.length)return null;xn=je(nn.pop());case"rgb":return 3!==nn.length?null:[Le(nn[0]),Le(nn[1]),Le(nn[2]),xn];case"hsla":if(4!==nn.length)return null;xn=je(nn.pop());case"hsl":if(3!==nn.length)return null;var zn=(parseFloat(nn[0])%360+360)%360/360,In=je(nn[1]),Un=je(nn[2]),Vn=Un<=.5?Un*(In+1):Un+In-Un*In,Wn=2*Un-Vn;return[ie(255*Qe(Wn,Vn,zn+1/3)),ie(255*Qe(Wn,Vn,zn)),ie(255*Qe(Wn,Vn,zn-1/3)),xn];default:return null}}return null}}catch{}}).parseCSSColor,dn=function(M,O,G,ie){void 0===ie&&(ie=1),this.r=M,this.g=O,this.b=G,this.a=ie};dn.parse=function(M){if(M){if(M instanceof dn)return M;if("string"==typeof M){var O=ln(M);if(O)return new dn(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},dn.prototype.toString=function(){var M=this.toArray(),G=M[1],ie=M[2],be=M[3];return"rgba("+Math.round(M[0])+","+Math.round(G)+","+Math.round(ie)+","+be+")"},dn.prototype.toArray=function(){var M=this,be=M.a;return 0===be?[0,0,0,0]:[255*M.r/be,255*M.g/be,255*M.b/be,be]},dn.black=new dn(0,0,0,1),dn.white=new dn(1,1,1,1),dn.transparent=new dn(0,0,0,0),dn.red=new dn(1,0,0,1);var Cn=function(M,O,G){this.sensitivity=M?O?"variant":"case":O?"accent":"base",this.locale=G,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Cn.prototype.compare=function(M,O){return this.collator.compare(M,O)},Cn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kn=function(M,O,G,ie,be){this.text=M,this.image=O,this.scale=G,this.fontStack=ie,this.textColor=be},Rn=function(M){this.sections=M};Rn.fromString=function(M){return new Rn([new kn(M,null,null,null,null)])},Rn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(M){return 0!==M.text.length||M.image&&0!==M.image.name.length})},Rn.factory=function(M){return M instanceof Rn?M:Rn.fromString(M)},Rn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(M){return M.text}).join("")},Rn.prototype.serialize=function(){for(var M=["format"],O=0,G=this.sections;O<G.length;O+=1){var ie=G[O];if(ie.image)M.push(["image",ie.image.name]);else{M.push(ie.text);var be={};ie.fontStack&&(be["text-font"]=["literal",ie.fontStack.split(",")]),ie.scale&&(be["font-scale"]=ie.scale),ie.textColor&&(be["text-color"]=["rgba"].concat(ie.textColor.toArray())),M.push(be)}}return M};var Nn=function(M){this.name=M.name,this.available=M.available};function jn(M,O,G,ie){return"number"==typeof M&&M>=0&&M<=255&&"number"==typeof O&&O>=0&&O<=255&&"number"==typeof G&&G>=0&&G<=255?void 0===ie||"number"==typeof ie&&ie>=0&&ie<=1?null:"Invalid rgba value ["+[M,O,G,ie].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ie?[M,O,G,ie]:[M,O,G]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(M){if(null===M||"string"==typeof M||"boolean"==typeof M||"number"==typeof M||M instanceof dn||M instanceof Cn||M instanceof Rn||M instanceof Nn)return!0;if(Array.isArray(M)){for(var O=0,G=M;O<G.length;O+=1)if(!er(G[O]))return!1;return!0}if("object"==typeof M){for(var ie in M)if(!er(M[ie]))return!1;return!0}return!1}function Kn(M){if(null===M)return ht;if("string"==typeof M)return gt;if("boolean"==typeof M)return Pt;if("number"==typeof M)return pt;if(M instanceof dn)return zt;if(M instanceof Cn)return jt;if(M instanceof Rn)return Gt;if(M instanceof Nn)return un;if(Array.isArray(M)){for(var O,G=M.length,ie=0,be=M;ie<be.length;ie+=1){var Le=Kn(be[ie]);if(O){if(O===Le)continue;O=Nt;break}O=Le}return hn(O||Nt,G)}return Ut}function yr(M){var O=typeof M;return null===M?"":"string"===O||"number"===O||"boolean"===O?String(M):M instanceof dn||M instanceof Rn||M instanceof Nn?M.toString():JSON.stringify(M)}Nn.prototype.toString=function(){return this.name},Nn.fromString=function(M){return M?new Nn({name:M,available:!1}):null},Nn.prototype.serialize=function(){return["image",this.name]};var lr=function(M,O){this.type=M,this.value=O};lr.parse=function(M,O){if(2!==M.length)return O.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!er(M[1]))return O.error("invalid value");var G=M[1],ie=Kn(G),be=O.expectedType;return"array"!==ie.kind||0!==ie.N||!be||"array"!==be.kind||"number"==typeof be.N&&0!==be.N||(ie=be),new lr(ie,G)},lr.prototype.evaluate=function(){return this.value},lr.prototype.eachChild=function(){},lr.prototype.outputDefined=function(){return!0},lr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof dn?["rgba"].concat(this.value.toArray()):this.value instanceof Rn?this.value.serialize():this.value};var $n=function(M){this.name="ExpressionEvaluationError",this.message=M};$n.prototype.toJSON=function(){return this.message};var Gn={string:gt,number:pt,boolean:Pt,object:Ut},ir=function(M,O){this.type=M,this.args=O};ir.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var G,ie=1,be=M[0];if("array"===be){var Le,je;if(M.length>2){var Qe=M[1];if("string"!=typeof Qe||!(Qe in Gn)||"object"===Qe)return O.error('The item type argument of "array" must be one of string, number, boolean',1);Le=Gn[Qe],ie++}else Le=Nt;if(M.length>3){if(null!==M[2]&&("number"!=typeof M[2]||M[2]<0||M[2]!==Math.floor(M[2])))return O.error('The length argument to "array" must be a positive integer literal',2);je=M[2],ie++}G=hn(Le,je)}else G=Gn[be];for(var lt=[];ie<M.length;ie++){var kt=O.parse(M[ie],ie,Nt);if(!kt)return null;lt.push(kt)}return new ir(G,lt)},ir.prototype.evaluate=function(M){for(var O=0;O<this.args.length;O++){var G=this.args[O].evaluate(M);if(!Fn(this.type,Kn(G)))return G;if(O===this.args.length-1)throw new $n("Expected value to be of type "+Qt(this.type)+", but found "+Qt(Kn(G))+" instead.")}return null},ir.prototype.eachChild=function(M){this.args.forEach(M)},ir.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ir.prototype.serialize=function(){var M=this.type,O=[M.kind];if("array"===M.kind){var G=M.itemType;if("string"===G.kind||"number"===G.kind||"boolean"===G.kind){O.push(G.kind);var ie=M.N;("number"==typeof ie||this.args.length>1)&&O.push(ie)}}return O.concat(this.args.map(function(be){return be.serialize()}))};var Jt=function(M){this.type=Gt,this.sections=M};Jt.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var G=M[1];if(!Array.isArray(G)&&"object"==typeof G)return O.error("First argument must be an image or text section.");for(var ie=[],be=!1,Le=1;Le<=M.length-1;++Le){var je=M[Le];if(be&&"object"==typeof je&&!Array.isArray(je)){be=!1;var Qe=null;if(je["font-scale"]&&!(Qe=O.parse(je["font-scale"],1,pt)))return null;var lt=null;if(je["text-font"]&&!(lt=O.parse(je["text-font"],1,hn(gt))))return null;var kt=null;if(je["text-color"]&&!(kt=O.parse(je["text-color"],1,zt)))return null;var Mt=ie[ie.length-1];Mt.scale=Qe,Mt.font=lt,Mt.textColor=kt}else{var Bt=O.parse(M[Le],1,Nt);if(!Bt)return null;var qt=Bt.type.kind;if("string"!==qt&&"value"!==qt&&"null"!==qt&&"resolvedImage"!==qt)return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,ie.push({content:Bt,scale:null,font:null,textColor:null})}}return new Jt(ie)},Jt.prototype.evaluate=function(M){return new Rn(this.sections.map(function(O){var G=O.content.evaluate(M);return Kn(G)===un?new kn("",G,null,null,null):new kn(yr(G),null,O.scale?O.scale.evaluate(M):null,O.font?O.font.evaluate(M).join(","):null,O.textColor?O.textColor.evaluate(M):null)}))},Jt.prototype.eachChild=function(M){for(var O=0,G=this.sections;O<G.length;O+=1){var ie=G[O];M(ie.content),ie.scale&&M(ie.scale),ie.font&&M(ie.font),ie.textColor&&M(ie.textColor)}},Jt.prototype.outputDefined=function(){return!1},Jt.prototype.serialize=function(){for(var M=["format"],O=0,G=this.sections;O<G.length;O+=1){var ie=G[O];M.push(ie.content.serialize());var be={};ie.scale&&(be["font-scale"]=ie.scale.serialize()),ie.font&&(be["text-font"]=ie.font.serialize()),ie.textColor&&(be["text-color"]=ie.textColor.serialize()),M.push(be)}return M};var rn=function(M){this.type=un,this.input=M};rn.parse=function(M,O){if(2!==M.length)return O.error("Expected two arguments.");var G=O.parse(M[1],1,gt);return G?new rn(G):O.error("No image name provided.")},rn.prototype.evaluate=function(M){var O=this.input.evaluate(M),G=Nn.fromString(O);return G&&M.availableImages&&(G.available=M.availableImages.indexOf(O)>-1),G},rn.prototype.eachChild=function(M){M(this.input)},rn.prototype.outputDefined=function(){return!1},rn.prototype.serialize=function(){return["image",this.input.serialize()]};var Sn={"to-boolean":Pt,"to-color":zt,"to-number":pt,"to-string":gt},Tn=function(M,O){this.type=M,this.args=O};Tn.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var G=M[0];if(("to-boolean"===G||"to-string"===G)&&2!==M.length)return O.error("Expected one argument.");for(var ie=Sn[G],be=[],Le=1;Le<M.length;Le++){var je=O.parse(M[Le],Le,Nt);if(!je)return null;be.push(je)}return new Tn(ie,be)},Tn.prototype.evaluate=function(M){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(M));if("color"===this.type.kind){for(var O,G,ie=0,be=this.args;ie<be.length;ie+=1){if(G=null,(O=be[ie].evaluate(M))instanceof dn)return O;if("string"==typeof O){var Le=M.parseColor(O);if(Le)return Le}else if(Array.isArray(O)&&!(G=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":jn(O[0],O[1],O[2],O[3])))return new dn(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new $n(G||"Could not parse color from value '"+("string"==typeof O?O:String(JSON.stringify(O)))+"'")}if("number"===this.type.kind){for(var je=null,Qe=0,lt=this.args;Qe<lt.length;Qe+=1){if(null===(je=lt[Qe].evaluate(M)))return 0;var kt=Number(je);if(!isNaN(kt))return kt}throw new $n("Could not convert "+JSON.stringify(je)+" to number.")}return"formatted"===this.type.kind?Rn.fromString(yr(this.args[0].evaluate(M))):"resolvedImage"===this.type.kind?Nn.fromString(yr(this.args[0].evaluate(M))):yr(this.args[0].evaluate(M))},Tn.prototype.eachChild=function(M){this.args.forEach(M)},Tn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Tn.prototype.serialize=function(){if("formatted"===this.type.kind)return new Jt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new rn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(O){M.push(O.serialize())}),M};var Ln=["Unknown","Point","LineString","Polygon"],Bn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Bn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Bn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ln[this.feature.type]:this.feature.type:null},Bn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Bn.prototype.canonicalID=function(){return this.canonical},Bn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Bn.prototype.parseColor=function(M){var O=this._parseColorCache[M];return O||(O=this._parseColorCache[M]=dn.parse(M)),O};var Hn=function(M,O,G,ie){this.name=M,this.type=O,this._evaluate=G,this.args=ie};Hn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},Hn.prototype.eachChild=function(M){this.args.forEach(M)},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},Hn.parse=function(M,O){var G,ie=M[0],be=Hn.definitions[ie];if(!be)return O.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Le=Array.isArray(be)?be[0]:be.type,je=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,Qe=je.filter(function(jr){var Pr=jr[0];return!Array.isArray(Pr)||Pr.length===M.length-1}),lt=null,kt=0,Mt=Qe;kt<Mt.length;kt+=1){var Bt=Mt[kt],qt=Bt[0],Vt=Bt[1];lt=new ar(O.registry,O.path,null,O.scope);for(var nn=[],xn=!1,zn=1;zn<M.length;zn++){var In=M[zn],Un=Array.isArray(qt)?qt[zn-1]:qt.type,Vn=lt.parse(In,1+nn.length,Un);if(!Vn){xn=!0;break}nn.push(Vn)}if(!xn)if(Array.isArray(qt)&&qt.length!==nn.length)lt.error("Expected "+qt.length+" arguments, but found "+nn.length+" instead.");else{for(var Wn=0;Wn<nn.length;Wn++){var Qn=Array.isArray(qt)?qt[Wn]:qt.type,nr=nn[Wn];lt.concat(Wn+1).checkSubtype(Qn,nr.type)}if(0===lt.errors.length)return new Hn(ie,Le,Vt,nn)}}if(1===Qe.length)(G=O.errors).push.apply(G,lt.errors);else{for(var xr=(Qe.length?Qe:je).map(function(jr){return Pr=jr[0],Array.isArray(Pr)?"("+Pr.map(Qt).join(", ")+")":"("+Qt(Pr.type)+"...)";var Pr}).join(" | "),pr=[],Tr=1;Tr<M.length;Tr++){var Er=O.parse(M[Tr],1+pr.length);if(!Er)return null;pr.push(Qt(Er.type))}O.error("Expected arguments of type "+xr+", but found ("+pr.join(", ")+") instead.")}return null},Hn.register=function(M,O){for(var G in Hn.definitions=O,O)M[G]=Hn};var or=function(M,O,G){this.type=jt,this.locale=G,this.caseSensitive=M,this.diacriticSensitive=O};or.parse=function(M,O){if(2!==M.length)return O.error("Expected one argument.");var G=M[1];if("object"!=typeof G||Array.isArray(G))return O.error("Collator options argument must be an object.");var ie=O.parse(void 0!==G["case-sensitive"]&&G["case-sensitive"],1,Pt);if(!ie)return null;var be=O.parse(void 0!==G["diacritic-sensitive"]&&G["diacritic-sensitive"],1,Pt);if(!be)return null;var Le=null;return G.locale&&!(Le=O.parse(G.locale,1,gt))?null:new or(ie,be,Le)},or.prototype.evaluate=function(M){return new Cn(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},or.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},or.prototype.outputDefined=function(){return!1},or.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var mr=8192;function Kt(M,O){M[0]=Math.min(M[0],O[0]),M[1]=Math.min(M[1],O[1]),M[2]=Math.max(M[2],O[0]),M[3]=Math.max(M[3],O[1])}function An(M,O){return!(M[0]<=O[0]||M[2]>=O[2]||M[1]<=O[1]||M[3]>=O[3])}function Rt(M,O){var ie=(180+M[0])/360,be=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,Le=Math.pow(2,O.z);return[Math.round(ie*Le*mr),Math.round(be*Le*mr)]}function Zt(M,O,G){return O[1]>M[1]!=G[1]>M[1]&&M[0]<(G[0]-O[0])*(M[1]-O[1])/(G[1]-O[1])+O[0]}function tn(M,O){for(var G=!1,ie=0,be=O.length;ie<be;ie++)for(var Le=O[ie],je=0,Qe=Le.length;je<Qe-1;je++){if((Bt=(lt=M)[0]-(kt=Le[je])[0])*(nn=lt[1]-(Mt=Le[je+1])[1])-(Vt=lt[0]-Mt[0])*(qt=lt[1]-kt[1])==0&&Bt*Vt<=0&&qt*nn<=0)return!1;Zt(M,Le[je],Le[je+1])&&(G=!G)}var lt,kt,Mt,Bt,qt,Vt,nn;return G}function En(M,O){for(var G=0;G<O.length;G++)if(tn(M,O[G]))return!0;return!1}function Mn(M,O,G,ie){var lt=ie[0]-G[0],kt=ie[1]-G[1],Mt=(M[0]-G[0])*kt-lt*(M[1]-G[1]),Bt=(O[0]-G[0])*kt-lt*(O[1]-G[1]);return Mt>0&&Bt<0||Mt<0&&Bt>0}function wn(M,O,G){for(var ie=0,be=G;ie<be.length;ie+=1)for(var Le=be[ie],je=0;je<Le.length-1;++je)if((Bt=[(Mt=Le[je+1])[0]-(kt=Le[je])[0],Mt[1]-kt[1]])[0]*(qt=[(lt=O)[0]-(Qe=M)[0],lt[1]-Qe[1]])[1]-Bt[1]*qt[0]!=0&&Mn(Qe,lt,kt,Mt)&&Mn(kt,Mt,Qe,lt))return!0;var Qe,lt,kt,Mt,Bt,qt;return!1}function an(M,O){for(var G=0;G<M.length;++G)if(!tn(M[G],O))return!1;for(var ie=0;ie<M.length-1;++ie)if(wn(M[ie],M[ie+1],O))return!1;return!0}function vn(M,O){for(var G=0;G<O.length;G++)if(an(M,O[G]))return!0;return!1}function sn(M,O,G){for(var ie=[],be=0;be<M.length;be++){for(var Le=[],je=0;je<M[be].length;je++){var Qe=Rt(M[be][je],G);Kt(O,Qe),Le.push(Qe)}ie.push(Le)}return ie}function fn(M,O,G){for(var ie=[],be=0;be<M.length;be++){var Le=sn(M[be],O,G);ie.push(Le)}return ie}function mn(M,O,G,ie){if(M[0]<G[0]||M[0]>G[2]){var be=.5*ie,Le=M[0]-G[0]>be?-ie:G[0]-M[0]>be?ie:0;0===Le&&(Le=M[0]-G[2]>be?-ie:G[2]-M[0]>be?ie:0),M[0]+=Le}Kt(O,M)}function Pn(M,O,G,ie){for(var be=Math.pow(2,ie.z)*mr,Le=[ie.x*mr,ie.y*mr],je=[],Qe=0,lt=M;Qe<lt.length;Qe+=1)for(var kt=0,Mt=lt[Qe];kt<Mt.length;kt+=1){var Bt=Mt[kt],qt=[Bt.x+Le[0],Bt.y+Le[1]];mn(qt,O,G,be),je.push(qt)}return je}function qn(M,O,G,ie){for(var be=Math.pow(2,ie.z)*mr,Le=[ie.x*mr,ie.y*mr],je=[],Qe=0,lt=M;Qe<lt.length;Qe+=1){for(var kt=[],Mt=0,Bt=lt[Qe];Mt<Bt.length;Mt+=1){var qt=Bt[Mt],Vt=[qt.x+Le[0],qt.y+Le[1]];Kt(O,Vt),kt.push(Vt)}je.push(kt)}if(O[2]-O[0]<=be/2){(Un=O)[0]=Un[1]=1/0,Un[2]=Un[3]=-1/0;for(var nn=0,xn=je;nn<xn.length;nn+=1)for(var zn=0,In=xn[nn];zn<In.length;zn+=1)mn(In[zn],O,G,be)}var Un;return je}var Zn=function(M,O){this.type=Pt,this.geojson=M,this.geometries=O};function Jn(M){if(M instanceof Hn&&("get"===M.name&&1===M.args.length||"feature-state"===M.name||"has"===M.name&&1===M.args.length||"properties"===M.name||"geometry-type"===M.name||"id"===M.name||/^filter-/.test(M.name))||M instanceof Zn)return!1;var O=!0;return M.eachChild(function(G){O&&!Jn(G)&&(O=!1)}),O}function rr(M){if(M instanceof Hn&&"feature-state"===M.name)return!1;var O=!0;return M.eachChild(function(G){O&&!rr(G)&&(O=!1)}),O}function tr(M,O){if(M instanceof Hn&&O.indexOf(M.name)>=0)return!1;var G=!0;return M.eachChild(function(ie){G&&!tr(ie,O)&&(G=!1)}),G}Zn.parse=function(M,O){if(2!==M.length)return O.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(er(M[1])){var G=M[1];if("FeatureCollection"===G.type)for(var ie=0;ie<G.features.length;++ie){var be=G.features[ie].geometry.type;if("Polygon"===be||"MultiPolygon"===be)return new Zn(G,G.features[ie].geometry)}else if("Feature"===G.type){var Le=G.geometry.type;if("Polygon"===Le||"MultiPolygon"===Le)return new Zn(G,G.geometry)}else if("Polygon"===G.type||"MultiPolygon"===G.type)return new Zn(G,G)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Zn.prototype.evaluate=function(M){if(null!=M.geometry()&&null!=M.canonicalID()){if("Point"===M.geometryType())return function(O,G){var ie=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Le=O.canonicalID();if("Polygon"===G.type){var je=sn(G.coordinates,be,Le),Qe=Pn(O.geometry(),ie,be,Le);if(!An(ie,be))return!1;for(var lt=0,kt=Qe;lt<kt.length;lt+=1)if(!tn(kt[lt],je))return!1}if("MultiPolygon"===G.type){var Mt=fn(G.coordinates,be,Le),Bt=Pn(O.geometry(),ie,be,Le);if(!An(ie,be))return!1;for(var qt=0,Vt=Bt;qt<Vt.length;qt+=1)if(!En(Vt[qt],Mt))return!1}return!0}(M,this.geometries);if("LineString"===M.geometryType())return function(O,G){var ie=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Le=O.canonicalID();if("Polygon"===G.type){var je=sn(G.coordinates,be,Le),Qe=qn(O.geometry(),ie,be,Le);if(!An(ie,be))return!1;for(var lt=0,kt=Qe;lt<kt.length;lt+=1)if(!an(kt[lt],je))return!1}if("MultiPolygon"===G.type){var Mt=fn(G.coordinates,be,Le),Bt=qn(O.geometry(),ie,be,Le);if(!An(ie,be))return!1;for(var qt=0,Vt=Bt;qt<Vt.length;qt+=1)if(!vn(Vt[qt],Mt))return!1}return!0}(M,this.geometries)}return!1},Zn.prototype.eachChild=function(){},Zn.prototype.outputDefined=function(){return!0},Zn.prototype.serialize=function(){return["within",this.geojson]};var sr=function(M,O){this.type=O.type,this.name=M,this.boundExpression=O};sr.parse=function(M,O){if(2!==M.length||"string"!=typeof M[1])return O.error("'var' expression requires exactly one string literal argument.");var G=M[1];return O.scope.has(G)?new sr(G,O.scope.get(G)):O.error('Unknown variable "'+G+'". Make sure "'+G+'" has been bound in an enclosing "let" expression before using it.',1)},sr.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},sr.prototype.eachChild=function(){},sr.prototype.outputDefined=function(){return!1},sr.prototype.serialize=function(){return["var",this.name]};var ar=function(M,O,G,ie,be){void 0===O&&(O=[]),void 0===ie&&(ie=new At),void 0===be&&(be=[]),this.registry=M,this.path=O,this.key=O.map(function(Le){return"["+Le+"]"}).join(""),this.scope=ie,this.errors=be,this.expectedType=G};function cr(M){if(M instanceof sr)return cr(M.boundExpression);if(M instanceof Hn&&"error"===M.name||M instanceof or||M instanceof Zn)return!1;var O=M instanceof Tn||M instanceof ir,G=!0;return M.eachChild(function(ie){G=O?G&&cr(ie):G&&ie instanceof lr}),!!G&&Jn(M)&&tr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function br(M,O){for(var G,be=M.length-1,Le=0,je=be,Qe=0;Le<=je;)if((G=M[Qe=Math.floor((Le+je)/2)])<=O){if(Qe===be||O<M[Qe+1])return Qe;Le=Qe+1}else{if(!(G>O))throw new $n("Input is not a number.");je=Qe-1}return 0}ar.prototype.parse=function(M,O,G,ie,be){return void 0===be&&(be={}),O?this.concat(O,G,ie)._parse(M,be):this._parse(M,be)},ar.prototype._parse=function(M,O){function G(kt,Mt,Bt){return"assert"===Bt?new ir(Mt,[kt]):"coerce"===Bt?new Tn(Mt,[kt]):kt}if(null!==M&&"string"!=typeof M&&"boolean"!=typeof M&&"number"!=typeof M||(M=["literal",M]),Array.isArray(M)){if(0===M.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ie=M[0];if("string"!=typeof ie)return this.error("Expression name must be a string, but found "+typeof ie+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[ie];if(be){var Le=be.parse(M,this);if(!Le)return null;if(this.expectedType){var je=this.expectedType,Qe=Le.type;if("string"!==je.kind&&"number"!==je.kind&&"boolean"!==je.kind&&"object"!==je.kind&&"array"!==je.kind||"value"!==Qe.kind)if("color"!==je.kind&&"formatted"!==je.kind&&"resolvedImage"!==je.kind||"value"!==Qe.kind&&"string"!==Qe.kind){if(this.checkSubtype(je,Qe))return null}else Le=G(Le,je,O.typeAnnotation||"coerce");else Le=G(Le,je,O.typeAnnotation||"assert")}if(!(Le instanceof lr)&&"resolvedImage"!==Le.type.kind&&cr(Le)){var lt=new Bn;try{Le=new lr(Le.type,Le.evaluate(lt))}catch(kt){return this.error(kt.message),null}}return Le}return this.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===M?"'undefined' value invalid. Use null instead.":"object"==typeof M?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof M+" instead.")},ar.prototype.concat=function(M,O,G){var ie="number"==typeof M?this.path.concat(M):this.path,be=G?this.scope.concat(G):this.scope;return new ar(this.registry,ie,O||null,be,this.errors)},ar.prototype.error=function(M){for(var O=[],G=arguments.length-1;G-- >0;)O[G]=arguments[G+1];var ie=""+this.key+O.map(function(be){return"["+be+"]"}).join("");this.errors.push(new Et(ie,M))},ar.prototype.checkSubtype=function(M,O){var G=Fn(M,O);return G&&this.error(G),G};var Ur=function(M,O,G){this.type=M,this.input=O,this.labels=[],this.outputs=[];for(var ie=0,be=G;ie<be.length;ie+=1){var Le=be[ie],Qe=Le[1];this.labels.push(Le[0]),this.outputs.push(Qe)}};function Sr(M,O,G){return M*(1-G)+O*G}Ur.parse=function(M,O){if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");var G=O.parse(M[1],1,pt);if(!G)return null;var ie=[],be=null;O.expectedType&&"value"!==O.expectedType.kind&&(be=O.expectedType);for(var Le=1;Le<M.length;Le+=2){var je=1===Le?-1/0:M[Le],Qe=M[Le+1],lt=Le,kt=Le+1;if("number"!=typeof je)return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(ie.length&&ie[ie.length-1][0]>=je)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var Mt=O.parse(Qe,kt,be);if(!Mt)return null;be=be||Mt.type,ie.push([je,Mt])}return new Ur(be,G,ie)},Ur.prototype.evaluate=function(M){var O=this.labels,G=this.outputs;if(1===O.length)return G[0].evaluate(M);var ie=this.input.evaluate(M);if(ie<=O[0])return G[0].evaluate(M);var be=O.length;return ie>=O[be-1]?G[be-1].evaluate(M):G[br(O,ie)].evaluate(M)},Ur.prototype.eachChild=function(M){M(this.input);for(var O=0,G=this.outputs;O<G.length;O+=1)M(G[O])},Ur.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Ur.prototype.serialize=function(){for(var M=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&M.push(this.labels[O]),M.push(this.outputs[O].serialize());return M};var fr=Object.freeze({__proto__:null,number:Sr,color:function(M,O,G){return new dn(Sr(M.r,O.r,G),Sr(M.g,O.g,G),Sr(M.b,O.b,G),Sr(M.a,O.a,G))},array:function(M,O,G){return M.map(function(ie,be){return Sr(ie,O[be],G)})}}),Lr=.95047,zr=1.08883,li=4/29,Mi=6/29,Pi=3*Mi*Mi,Ea=Math.PI/180,Ui=180/Math.PI;function vi(M){return M>.008856451679035631?Math.pow(M,.3333333333333333):M/Pi+li}function La(M){return M>Mi?M*M*M:Pi*(M-li)}function to(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function qo(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Go(M){var O=qo(M.r),G=qo(M.g),ie=qo(M.b),be=vi((.4124564*O+.3575761*G+.1804375*ie)/Lr),Le=vi((.2126729*O+.7151522*G+.072175*ie)/1);return{l:116*Le-16,a:500*(be-Le),b:200*(Le-vi((.0193339*O+.119192*G+.9503041*ie)/zr)),alpha:M.a}}function il(M){var O=(M.l+16)/116,G=isNaN(M.a)?O:O+M.a/500,ie=isNaN(M.b)?O:O-M.b/200;return O=1*La(O),G=Lr*La(G),ie=zr*La(ie),new dn(to(3.2404542*G-1.5371385*O-.4985314*ie),to(-.969266*G+1.8760108*O+.041556*ie),to(.0556434*G-.2040259*O+1.0572252*ie),M.alpha)}function Us(M,O,G){var ie=O-M;return M+G*(ie>180||ie<-180?ie-360*Math.round(ie/360):ie)}var Zo={forward:Go,reverse:il,interpolate:function(M,O,G){return{l:Sr(M.l,O.l,G),a:Sr(M.a,O.a,G),b:Sr(M.b,O.b,G),alpha:Sr(M.alpha,O.alpha,G)}}},Ta={forward:function(M){var O=Go(M),G=O.l,ie=O.a,be=O.b,Le=Math.atan2(be,ie)*Ui;return{h:Le<0?Le+360:Le,c:Math.sqrt(ie*ie+be*be),l:G,alpha:M.a}},reverse:function(M){var O=M.h*Ea,G=M.c;return il({l:M.l,a:Math.cos(O)*G,b:Math.sin(O)*G,alpha:M.alpha})},interpolate:function(M,O,G){return{h:Us(M.h,O.h,G),c:Sr(M.c,O.c,G),l:Sr(M.l,O.l,G),alpha:Sr(M.alpha,O.alpha,G)}}},Vs=Object.freeze({__proto__:null,lab:Zo,hcl:Ta}),Ri=function(M,O,G,ie,be){this.type=M,this.operator=O,this.interpolation=G,this.input=ie,this.labels=[],this.outputs=[];for(var Le=0,je=be;Le<je.length;Le+=1){var Qe=je[Le],kt=Qe[1];this.labels.push(Qe[0]),this.outputs.push(kt)}};function ss(M,O,G,ie){var be=ie-G,Le=M-G;return 0===be?0:1===O?Le/be:(Math.pow(O,Le)-1)/(Math.pow(O,be)-1)}Ri.interpolationFactor=function(M,O,G,ie){var be=0;if("exponential"===M.name)be=ss(O,M.base,G,ie);else if("linear"===M.name)be=ss(O,1,G,ie);else if("cubic-bezier"===M.name){var Le=M.controlPoints;be=new d(Le[0],Le[1],Le[2],Le[3]).solve(ss(O,1,G,ie))}return be},Ri.parse=function(M,O){var G=M[0],ie=M[1],be=M[2],Le=M.slice(3);if(!Array.isArray(ie)||0===ie.length)return O.error("Expected an interpolation type expression.",1);if("linear"===ie[0])ie={name:"linear"};else if("exponential"===ie[0]){var je=ie[1];if("number"!=typeof je)return O.error("Exponential interpolation requires a numeric base.",1,1);ie={name:"exponential",base:je}}else{if("cubic-bezier"!==ie[0])return O.error("Unknown interpolation type "+String(ie[0]),1,0);var Qe=ie.slice(1);if(4!==Qe.length||Qe.some(function(zn){return"number"!=typeof zn||zn<0||zn>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ie={name:"cubic-bezier",controlPoints:Qe}}if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(be=O.parse(be,2,pt)))return null;var lt=[],kt=null;"interpolate-hcl"===G||"interpolate-lab"===G?kt=zt:O.expectedType&&"value"!==O.expectedType.kind&&(kt=O.expectedType);for(var Mt=0;Mt<Le.length;Mt+=2){var Bt=Le[Mt],qt=Le[Mt+1],Vt=Mt+3,nn=Mt+4;if("number"!=typeof Bt)return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Vt);if(lt.length&&lt[lt.length-1][0]>=Bt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Vt);var xn=O.parse(qt,nn,kt);if(!xn)return null;kt=kt||xn.type,lt.push([Bt,xn])}return"number"===kt.kind||"color"===kt.kind||"array"===kt.kind&&"number"===kt.itemType.kind&&"number"==typeof kt.N?new Ri(kt,G,ie,be,lt):O.error("Type "+Qt(kt)+" is not interpolatable.")},Ri.prototype.evaluate=function(M){var O=this.labels,G=this.outputs;if(1===O.length)return G[0].evaluate(M);var ie=this.input.evaluate(M);if(ie<=O[0])return G[0].evaluate(M);var be=O.length;if(ie>=O[be-1])return G[be-1].evaluate(M);var Le=br(O,ie),lt=Ri.interpolationFactor(this.interpolation,ie,O[Le],O[Le+1]),kt=G[Le].evaluate(M),Mt=G[Le+1].evaluate(M);return"interpolate"===this.operator?fr[this.type.kind.toLowerCase()](kt,Mt,lt):"interpolate-hcl"===this.operator?Ta.reverse(Ta.interpolate(Ta.forward(kt),Ta.forward(Mt),lt)):Zo.reverse(Zo.interpolate(Zo.forward(kt),Zo.forward(Mt),lt))},Ri.prototype.eachChild=function(M){M(this.input);for(var O=0,G=this.outputs;O<G.length;O+=1)M(G[O])},Ri.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Ri.prototype.serialize=function(){var M;M="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,M,this.input.serialize()],G=0;G<this.labels.length;G++)O.push(this.labels[G],this.outputs[G].serialize());return O};var ma=function(M,O){this.type=M,this.args=O};ma.parse=function(M,O){if(M.length<2)return O.error("Expectected at least one argument.");var G=null,ie=O.expectedType;ie&&"value"!==ie.kind&&(G=ie);for(var be=[],Le=0,je=M.slice(1);Le<je.length;Le+=1){var lt=O.parse(je[Le],1+be.length,G,void 0,{typeAnnotation:"omit"});if(!lt)return null;G=G||lt.type,be.push(lt)}var kt=ie&&be.some(function(Mt){return Fn(ie,Mt.type)});return new ma(kt?Nt:G,be)},ma.prototype.evaluate=function(M){for(var O,G=null,ie=0,be=0,Le=this.args;be<Le.length&&(ie++,(G=Le[be].evaluate(M))&&G instanceof Nn&&!G.available&&(O||(O=G.name),G=null,ie===this.args.length&&(G=O)),null===G);be+=1);return G},ma.prototype.eachChild=function(M){this.args.forEach(M)},ma.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ma.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(O){M.push(O.serialize())}),M};var ka=function(M,O){this.type=O.type,this.bindings=[].concat(M),this.result=O};ka.prototype.evaluate=function(M){return this.result.evaluate(M)},ka.prototype.eachChild=function(M){for(var O=0,G=this.bindings;O<G.length;O+=1)M(G[O][1]);M(this.result)},ka.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var G=[],ie=1;ie<M.length-1;ie+=2){var be=M[ie];if("string"!=typeof be)return O.error("Expected string, but found "+typeof be+" instead.",ie);if(/[^a-zA-Z0-9_]/.test(be))return O.error("Variable names must contain only alphanumeric characters or '_'.",ie);var Le=O.parse(M[ie+1],ie+1);if(!Le)return null;G.push([be,Le])}var je=O.parse(M[M.length-1],M.length-1,O.expectedType,G);return je?new ka(G,je):null},ka.prototype.outputDefined=function(){return this.result.outputDefined()},ka.prototype.serialize=function(){for(var M=["let"],O=0,G=this.bindings;O<G.length;O+=1){var ie=G[O];M.push(ie[0],ie[1].serialize())}return M.push(this.result.serialize()),M};var vo=function(M,O,G){this.type=M,this.index=O,this.input=G};vo.parse=function(M,O){if(3!==M.length)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,pt),ie=O.parse(M[2],2,hn(O.expectedType||Nt));return G&&ie?new vo(ie.type.itemType,G,ie):null},vo.prototype.evaluate=function(M){var O=this.index.evaluate(M),G=this.input.evaluate(M);if(O<0)throw new $n("Array index out of bounds: "+O+" < 0.");if(O>=G.length)throw new $n("Array index out of bounds: "+O+" > "+(G.length-1)+".");if(O!==Math.floor(O))throw new $n("Array index must be an integer, but found "+O+" instead.");return G[O]},vo.prototype.eachChild=function(M){M(this.index),M(this.input)},vo.prototype.outputDefined=function(){return!1},vo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qr=function(M,O){this.type=Pt,this.needle=M,this.haystack=O};Qr.parse=function(M,O){if(3!==M.length)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,Nt),ie=O.parse(M[2],2,Nt);return G&&ie?yn(G.type,[Pt,gt,pt,ht,Nt])?new Qr(G,ie):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(G.type)+" instead"):null},Qr.prototype.evaluate=function(M){var O=this.needle.evaluate(M),G=this.haystack.evaluate(M);if(!G)return!1;if(!on(O,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Kn(O))+" instead.");if(!on(G,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+Qt(Kn(G))+" instead.");return G.indexOf(O)>=0},Qr.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},Qr.prototype.outputDefined=function(){return!0},Qr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var mo=function(M,O,G){this.type=pt,this.needle=M,this.haystack=O,this.fromIndex=G};mo.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,Nt),ie=O.parse(M[2],2,Nt);if(!G||!ie)return null;if(!yn(G.type,[Pt,gt,pt,ht,Nt]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(G.type)+" instead");if(4===M.length){var be=O.parse(M[3],3,pt);return be?new mo(G,ie,be):null}return new mo(G,ie)},mo.prototype.evaluate=function(M){var O=this.needle.evaluate(M),G=this.haystack.evaluate(M);if(!on(O,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Kn(O))+" instead.");if(!on(G,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+Qt(Kn(G))+" instead.");if(this.fromIndex){var ie=this.fromIndex.evaluate(M);return G.indexOf(O,ie)}return G.indexOf(O)},mo.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ca=function(M,O,G,ie,be,Le){this.inputType=M,this.type=O,this.input=G,this.cases=ie,this.outputs=be,this.otherwise=Le};Ca.parse=function(M,O){if(M.length<5)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return O.error("Expected an even number of arguments.");var G,ie;O.expectedType&&"value"!==O.expectedType.kind&&(ie=O.expectedType);for(var be={},Le=[],je=2;je<M.length-1;je+=2){var Qe=M[je],lt=M[je+1];Array.isArray(Qe)||(Qe=[Qe]);var kt=O.concat(je);if(0===Qe.length)return kt.error("Expected at least one branch label.");for(var Mt=0,Bt=Qe;Mt<Bt.length;Mt+=1){var qt=Bt[Mt];if("number"!=typeof qt&&"string"!=typeof qt)return kt.error("Branch labels must be numbers or strings.");if("number"==typeof qt&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return kt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof qt&&Math.floor(qt)!==qt)return kt.error("Numeric branch labels must be integer values.");if(G){if(kt.checkSubtype(G,Kn(qt)))return null}else G=Kn(qt);if(void 0!==be[String(qt)])return kt.error("Branch labels must be unique.");be[String(qt)]=Le.length}var Vt=O.parse(lt,je,ie);if(!Vt)return null;ie=ie||Vt.type,Le.push(Vt)}var nn=O.parse(M[1],1,Nt);if(!nn)return null;var xn=O.parse(M[M.length-1],M.length-1,ie);return xn?"value"!==nn.type.kind&&O.concat(1).checkSubtype(G,nn.type)?null:new Ca(G,ie,nn,be,Le,xn):null},Ca.prototype.evaluate=function(M){var O=this.input.evaluate(M);return(Kn(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(M)},Ca.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Ca.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Ca.prototype.serialize=function(){for(var M=this,O=["match",this.input.serialize()],G=[],ie={},be=0,Le=Object.keys(this.cases).sort();be<Le.length;be+=1){var je=Le[be];void 0===(Bt=ie[this.cases[je]])?(ie[this.cases[je]]=G.length,G.push([this.cases[je],[je]])):G[Bt][1].push(je)}for(var Qe=function(Vt){return"number"===M.inputType.kind?Number(Vt):Vt},lt=0,kt=G;lt<kt.length;lt+=1){var Mt=kt[lt],Bt=Mt[0],qt=Mt[1];O.push(1===qt.length?Qe(qt[0]):qt.map(Qe)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var Ua=function(M,O,G){this.type=M,this.branches=O,this.otherwise=G};Ua.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return O.error("Expected an odd number of arguments.");var G;O.expectedType&&"value"!==O.expectedType.kind&&(G=O.expectedType);for(var ie=[],be=1;be<M.length-1;be+=2){var Le=O.parse(M[be],be,Pt);if(!Le)return null;var je=O.parse(M[be+1],be+1,G);if(!je)return null;ie.push([Le,je]),G=G||je.type}var Qe=O.parse(M[M.length-1],M.length-1,G);return Qe?new Ua(G,ie,Qe):null},Ua.prototype.evaluate=function(M){for(var O=0,G=this.branches;O<G.length;O+=1){var ie=G[O],Le=ie[1];if(ie[0].evaluate(M))return Le.evaluate(M)}return this.otherwise.evaluate(M)},Ua.prototype.eachChild=function(M){for(var O=0,G=this.branches;O<G.length;O+=1){var ie=G[O],Le=ie[1];M(ie[0]),M(Le)}M(this.otherwise)},Ua.prototype.outputDefined=function(){return this.branches.every(function(M){return M[1].outputDefined()})&&this.otherwise.outputDefined()},Ua.prototype.serialize=function(){var M=["case"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Ya=function(M,O,G,ie){this.type=M,this.input=O,this.beginIndex=G,this.endIndex=ie};function ls(M,O){return"=="===M||"!="===M?"boolean"===O.kind||"string"===O.kind||"number"===O.kind||"null"===O.kind||"value"===O.kind:"string"===O.kind||"number"===O.kind||"value"===O.kind}function al(M,O,G,ie){return 0===ie.compare(O,G)}function no(M,O,G){var ie="=="!==M&&"!="!==M;return function(){function be(Le,je,Qe){this.type=Pt,this.lhs=Le,this.rhs=je,this.collator=Qe,this.hasUntypedArgument="value"===Le.type.kind||"value"===je.type.kind}return be.parse=function(Le,je){if(3!==Le.length&&4!==Le.length)return je.error("Expected two or three arguments.");var Qe=Le[0],lt=je.parse(Le[1],1,Nt);if(!lt)return null;if(!ls(Qe,lt.type))return je.concat(1).error('"'+Qe+"\" comparisons are not supported for type '"+Qt(lt.type)+"'.");var kt=je.parse(Le[2],2,Nt);if(!kt)return null;if(!ls(Qe,kt.type))return je.concat(2).error('"'+Qe+"\" comparisons are not supported for type '"+Qt(kt.type)+"'.");if(lt.type.kind!==kt.type.kind&&"value"!==lt.type.kind&&"value"!==kt.type.kind)return je.error("Cannot compare types '"+Qt(lt.type)+"' and '"+Qt(kt.type)+"'.");ie&&("value"===lt.type.kind&&"value"!==kt.type.kind?lt=new ir(kt.type,[lt]):"value"!==lt.type.kind&&"value"===kt.type.kind&&(kt=new ir(lt.type,[kt])));var Mt=null;if(4===Le.length){if("string"!==lt.type.kind&&"string"!==kt.type.kind&&"value"!==lt.type.kind&&"value"!==kt.type.kind)return je.error("Cannot use collator to compare non-string types.");if(!(Mt=je.parse(Le[3],3,jt)))return null}return new be(lt,kt,Mt)},be.prototype.evaluate=function(Le){var je=this.lhs.evaluate(Le),Qe=this.rhs.evaluate(Le);if(ie&&this.hasUntypedArgument){var lt=Kn(je),kt=Kn(Qe);if(lt.kind!==kt.kind||"string"!==lt.kind&&"number"!==lt.kind)throw new $n('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+kt.kind+") instead.")}if(this.collator&&!ie&&this.hasUntypedArgument){var Mt=Kn(je),Bt=Kn(Qe);if("string"!==Mt.kind||"string"!==Bt.kind)return O(Le,je,Qe)}return this.collator?G(Le,je,Qe,this.collator.evaluate(Le)):O(Le,je,Qe)},be.prototype.eachChild=function(Le){Le(this.lhs),Le(this.rhs),this.collator&&Le(this.collator)},be.prototype.outputDefined=function(){return!0},be.prototype.serialize=function(){var Le=[M];return this.eachChild(function(je){Le.push(je.serialize())}),Le},be}()}Ya.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,Nt),ie=O.parse(M[2],2,pt);if(!G||!ie)return null;if(!yn(G.type,[hn(Nt),gt,Nt]))return O.error("Expected first argument to be of type array or string, but found "+Qt(G.type)+" instead");if(4===M.length){var be=O.parse(M[3],3,pt);return be?new Ya(G.type,G,ie,be):null}return new Ya(G.type,G,ie)},Ya.prototype.evaluate=function(M){var O=this.input.evaluate(M),G=this.beginIndex.evaluate(M);if(!on(O,["string","array"]))throw new $n("Expected first argument to be of type array or string, but found "+Qt(Kn(O))+" instead.");if(this.endIndex){var ie=this.endIndex.evaluate(M);return O.slice(G,ie)}return O.slice(G)},Ya.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Ya.prototype.outputDefined=function(){return!1},Ya.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ol=no("==",function(M,O,G){return O===G},al),sl=no("!=",function(M,O,G){return O!==G},function(M,O,G,ie){return!al(0,O,G,ie)}),ml=no("<",function(M,O,G){return O<G},function(M,O,G,ie){return ie.compare(O,G)<0}),Hs=no(">",function(M,O,G){return O>G},function(M,O,G,ie){return ie.compare(O,G)>0}),ll=no("<=",function(M,O,G){return O<=G},function(M,O,G,ie){return ie.compare(O,G)<=0}),qs=no(">=",function(M,O,G){return O>=G},function(M,O,G,ie){return ie.compare(O,G)>=0}),ro=function(M,O,G,ie,be){this.type=gt,this.number=M,this.locale=O,this.currency=G,this.minFractionDigits=ie,this.maxFractionDigits=be};ro.parse=function(M,O){if(3!==M.length)return O.error("Expected two arguments.");var G=O.parse(M[1],1,pt);if(!G)return null;var ie=M[2];if("object"!=typeof ie||Array.isArray(ie))return O.error("NumberFormat options argument must be an object.");var be=null;if(ie.locale&&!(be=O.parse(ie.locale,1,gt)))return null;var Le=null;if(ie.currency&&!(Le=O.parse(ie.currency,1,gt)))return null;var je=null;if(ie["min-fraction-digits"]&&!(je=O.parse(ie["min-fraction-digits"],1,pt)))return null;var Qe=null;return ie["max-fraction-digits"]&&!(Qe=O.parse(ie["max-fraction-digits"],1,pt))?null:new ro(G,be,Le,je,Qe)},ro.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},ro.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var io=function(M){this.type=pt,this.input=M};io.parse=function(M,O){if(2!==M.length)return O.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1);return G?"array"!==G.type.kind&&"string"!==G.type.kind&&"value"!==G.type.kind?O.error("Expected argument of type string or array, but found "+Qt(G.type)+" instead."):new io(G):null},io.prototype.evaluate=function(M){var O=this.input.evaluate(M);if("string"==typeof O||Array.isArray(O))return O.length;throw new $n("Expected value to be of type string or array, but found "+Qt(Kn(O))+" instead.")},io.prototype.eachChild=function(M){M(this.input)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){var M=["length"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Wo={"==":ol,"!=":sl,">":Hs,"<":ml,">=":qs,"<=":ll,array:ir,at:vo,boolean:ir,case:Ua,coalesce:ma,collator:or,format:Jt,image:rn,in:Qr,"index-of":mo,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:io,let:ka,literal:lr,match:Ca,number:ir,"number-format":ro,object:ir,slice:Ya,step:Ur,string:ir,"to-boolean":Tn,"to-color":Tn,"to-number":Tn,"to-string":Tn,var:sr,within:Zn};function ao(M,O){var G=O[0],ie=O[1],be=O[2],Le=O[3];G=G.evaluate(M),ie=ie.evaluate(M),be=be.evaluate(M);var je=Le?Le.evaluate(M):1,Qe=jn(G,ie,be,je);if(Qe)throw new $n(Qe);return new dn(G/255*je,ie/255*je,be/255*je,je)}function Gs(M,O){return M in O}function Zs(M,O){var G=O[M];return void 0===G?null:G}function Co(M){return{type:M}}function Ms(M){return{result:"success",value:M}}function yo(M){return{result:"error",value:M}}function Yo(M){return"data-driven"===M["property-type"]||"cross-faded-data-driven"===M["property-type"]}function Po(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function oo(M){return!!M.expression&&M.expression.interpolated}function ei(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":null===M?"null":typeof M}function xo(M){return"object"==typeof M&&null!==M&&!Array.isArray(M)}function yl(M){return M}function Ss(M,O){var G,ie,be,Le="color"===O.type,je=M.stops&&"object"==typeof M.stops[0][0],lt=je||!(je||void 0!==M.property),kt=M.type||(oo(O)?"exponential":"interval");if(Le&&((M=st({},M)).stops&&(M.stops=M.stops.map(function(pr){return[pr[0],dn.parse(pr[1])]})),M.default=dn.parse(M.default?M.default:O.default)),M.colorSpace&&"rgb"!==M.colorSpace&&!Vs[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if("exponential"===kt)G=Pa;else if("interval"===kt)G=Xo;else if("categorical"===kt){G=Oo,ie=Object.create(null);for(var Mt=0,Bt=M.stops;Mt<Bt.length;Mt+=1){var qt=Bt[Mt];ie[qt[0]]=qt[1]}be=typeof M.stops[0][0]}else{if("identity"!==kt)throw new Error('Unknown function type "'+kt+'"');G=Ws}if(je){for(var Vt={},nn=[],xn=0;xn<M.stops.length;xn++){var zn=M.stops[xn],In=zn[0].zoom;void 0===Vt[In]&&(Vt[In]={zoom:In,type:M.type,property:M.property,default:M.default,stops:[]},nn.push(In)),Vt[In].stops.push([zn[0].value,zn[1]])}for(var Un=[],Vn=0,Wn=nn;Vn<Wn.length;Vn+=1){var Qn=Wn[Vn];Un.push([Vt[Qn].zoom,Ss(Vt[Qn],O)])}var nr={name:"linear"};return{kind:"composite",interpolationType:nr,interpolationFactor:Ri.interpolationFactor.bind(void 0,nr),zoomStops:Un.map(function(pr){return pr[0]}),evaluate:function(pr,Tr){var Er=pr.zoom;return Pa({stops:Un,base:M.base},O,Er).evaluate(Er,Tr)}}}if(lt){var xr="exponential"===kt?{name:"exponential",base:void 0!==M.base?M.base:1}:null;return{kind:"camera",interpolationType:xr,interpolationFactor:Ri.interpolationFactor.bind(void 0,xr),zoomStops:M.stops.map(function(pr){return pr[0]}),evaluate:function(pr){return G(M,O,pr.zoom,ie,be)}}}return{kind:"source",evaluate:function(pr,Tr){var Er=Tr&&Tr.properties?Tr.properties[M.property]:void 0;return void 0===Er?us(M.default,O.default):G(M,O,Er,ie,be)}}}function us(M,O,G){return void 0!==M?M:void 0!==O?O:void 0!==G?G:void 0}function Oo(M,O,G,ie,be){return us(typeof G===be?ie[G]:void 0,M.default,O.default)}function Xo(M,O,G){if("number"!==ei(G))return us(M.default,O.default);var ie=M.stops.length;if(1===ie||G<=M.stops[0][0])return M.stops[0][1];if(G>=M.stops[ie-1][0])return M.stops[ie-1][1];var be=br(M.stops.map(function(Le){return Le[0]}),G);return M.stops[be][1]}function Pa(M,O,G){var ie=void 0!==M.base?M.base:1;if("number"!==ei(G))return us(M.default,O.default);var be=M.stops.length;if(1===be||G<=M.stops[0][0])return M.stops[0][1];if(G>=M.stops[be-1][0])return M.stops[be-1][1];var qt,Vt,xn,zn,Le=br(M.stops.map(function(Bt){return Bt[0]}),G),je=(qt=ie,zn=G-(Vt=M.stops[Le][0]),0==(xn=M.stops[Le+1][0]-Vt)?0:1===qt?zn/xn:(Math.pow(qt,zn)-1)/(Math.pow(qt,xn)-1)),Qe=M.stops[Le][1],lt=M.stops[Le+1][1],kt=fr[O.type]||yl;if(M.colorSpace&&"rgb"!==M.colorSpace){var Mt=Vs[M.colorSpace];kt=function(Bt,qt){return Mt.reverse(Mt.interpolate(Mt.forward(Bt),Mt.forward(qt),je))}}return"function"==typeof Qe.evaluate?{evaluate:function(){for(var Bt=[],qt=arguments.length;qt--;)Bt[qt]=arguments[qt];var Vt=Qe.evaluate.apply(void 0,Bt),nn=lt.evaluate.apply(void 0,Bt);if(void 0!==Vt&&void 0!==nn)return kt(Vt,nn,je)}}:kt(Qe,lt,je)}function Ws(M,O,G){return"color"===O.type?G=dn.parse(G):"formatted"===O.type?G=Rn.fromString(G.toString()):"resolvedImage"===O.type?G=Nn.fromString(G.toString()):ei(G)===O.type||"enum"===O.type&&O.values[G]||(G=void 0),us(G,M.default,O.default)}Hn.register(Wo,{error:[{kind:"error"},[gt],function(M,O){throw new $n(O[0].evaluate(M))}],typeof:[gt,[Nt],function(M,O){return Qt(Kn(O[0].evaluate(M)))}],"to-rgba":[hn(pt,4),[zt],function(M,O){return O[0].evaluate(M).toArray()}],rgb:[zt,[pt,pt,pt],ao],rgba:[zt,[pt,pt,pt,pt],ao],has:{type:Pt,overloads:[[[gt],function(M,O){return Gs(O[0].evaluate(M),M.properties())}],[[gt,Ut],function(M,O){var ie=O[1];return Gs(O[0].evaluate(M),ie.evaluate(M))}]]},get:{type:Nt,overloads:[[[gt],function(M,O){return Zs(O[0].evaluate(M),M.properties())}],[[gt,Ut],function(M,O){var ie=O[1];return Zs(O[0].evaluate(M),ie.evaluate(M))}]]},"feature-state":[Nt,[gt],function(M,O){return Zs(O[0].evaluate(M),M.featureState||{})}],properties:[Ut,[],function(M){return M.properties()}],"geometry-type":[gt,[],function(M){return M.geometryType()}],id:[Nt,[],function(M){return M.id()}],zoom:[pt,[],function(M){return M.globals.zoom}],"heatmap-density":[pt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[pt,[],function(M){return M.globals.lineProgress||0}],accumulated:[Nt,[],function(M){return void 0===M.globals.accumulated?null:M.globals.accumulated}],"+":[pt,Co(pt),function(M,O){for(var G=0,ie=0,be=O;ie<be.length;ie+=1)G+=be[ie].evaluate(M);return G}],"*":[pt,Co(pt),function(M,O){for(var G=1,ie=0,be=O;ie<be.length;ie+=1)G*=be[ie].evaluate(M);return G}],"-":{type:pt,overloads:[[[pt,pt],function(M,O){var ie=O[1];return O[0].evaluate(M)-ie.evaluate(M)}],[[pt],function(M,O){return-O[0].evaluate(M)}]]},"/":[pt,[pt,pt],function(M,O){var ie=O[1];return O[0].evaluate(M)/ie.evaluate(M)}],"%":[pt,[pt,pt],function(M,O){var ie=O[1];return O[0].evaluate(M)%ie.evaluate(M)}],ln2:[pt,[],function(){return Math.LN2}],pi:[pt,[],function(){return Math.PI}],e:[pt,[],function(){return Math.E}],"^":[pt,[pt,pt],function(M,O){var ie=O[1];return Math.pow(O[0].evaluate(M),ie.evaluate(M))}],sqrt:[pt,[pt],function(M,O){return Math.sqrt(O[0].evaluate(M))}],log10:[pt,[pt],function(M,O){return Math.log(O[0].evaluate(M))/Math.LN10}],ln:[pt,[pt],function(M,O){return Math.log(O[0].evaluate(M))}],log2:[pt,[pt],function(M,O){return Math.log(O[0].evaluate(M))/Math.LN2}],sin:[pt,[pt],function(M,O){return Math.sin(O[0].evaluate(M))}],cos:[pt,[pt],function(M,O){return Math.cos(O[0].evaluate(M))}],tan:[pt,[pt],function(M,O){return Math.tan(O[0].evaluate(M))}],asin:[pt,[pt],function(M,O){return Math.asin(O[0].evaluate(M))}],acos:[pt,[pt],function(M,O){return Math.acos(O[0].evaluate(M))}],atan:[pt,[pt],function(M,O){return Math.atan(O[0].evaluate(M))}],min:[pt,Co(pt),function(M,O){return Math.min.apply(Math,O.map(function(G){return G.evaluate(M)}))}],max:[pt,Co(pt),function(M,O){return Math.max.apply(Math,O.map(function(G){return G.evaluate(M)}))}],abs:[pt,[pt],function(M,O){return Math.abs(O[0].evaluate(M))}],round:[pt,[pt],function(M,O){var G=O[0].evaluate(M);return G<0?-Math.round(-G):Math.round(G)}],floor:[pt,[pt],function(M,O){return Math.floor(O[0].evaluate(M))}],ceil:[pt,[pt],function(M,O){return Math.ceil(O[0].evaluate(M))}],"filter-==":[Pt,[gt,Nt],function(M,O){var G=O[0],ie=O[1];return M.properties()[G.value]===ie.value}],"filter-id-==":[Pt,[Nt],function(M,O){var G=O[0];return M.id()===G.value}],"filter-type-==":[Pt,[gt],function(M,O){var G=O[0];return M.geometryType()===G.value}],"filter-<":[Pt,[gt,Nt],function(M,O){var G=O[0],ie=O[1],be=M.properties()[G.value],Le=ie.value;return typeof be==typeof Le&&be<Le}],"filter-id-<":[Pt,[Nt],function(M,O){var G=O[0],ie=M.id(),be=G.value;return typeof ie==typeof be&&ie<be}],"filter->":[Pt,[gt,Nt],function(M,O){var G=O[0],ie=O[1],be=M.properties()[G.value],Le=ie.value;return typeof be==typeof Le&&be>Le}],"filter-id->":[Pt,[Nt],function(M,O){var G=O[0],ie=M.id(),be=G.value;return typeof ie==typeof be&&ie>be}],"filter-<=":[Pt,[gt,Nt],function(M,O){var G=O[0],ie=O[1],be=M.properties()[G.value],Le=ie.value;return typeof be==typeof Le&&be<=Le}],"filter-id-<=":[Pt,[Nt],function(M,O){var G=O[0],ie=M.id(),be=G.value;return typeof ie==typeof be&&ie<=be}],"filter->=":[Pt,[gt,Nt],function(M,O){var G=O[0],ie=O[1],be=M.properties()[G.value],Le=ie.value;return typeof be==typeof Le&&be>=Le}],"filter-id->=":[Pt,[Nt],function(M,O){var G=O[0],ie=M.id(),be=G.value;return typeof ie==typeof be&&ie>=be}],"filter-has":[Pt,[Nt],function(M,O){return O[0].value in M.properties()}],"filter-has-id":[Pt,[],function(M){return null!==M.id()&&void 0!==M.id()}],"filter-type-in":[Pt,[hn(gt)],function(M,O){return O[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Pt,[hn(Nt)],function(M,O){return O[0].value.indexOf(M.id())>=0}],"filter-in-small":[Pt,[gt,hn(Nt)],function(M,O){var G=O[0];return O[1].value.indexOf(M.properties()[G.value])>=0}],"filter-in-large":[Pt,[gt,hn(Nt)],function(M,O){var G=O[0],ie=O[1];return function(be,Le,je,Qe){for(;je<=Qe;){var lt=je+Qe>>1;if(Le[lt]===be)return!0;Le[lt]>be?Qe=lt-1:je=lt+1}return!1}(M.properties()[G.value],ie.value,0,ie.value.length-1)}],all:{type:Pt,overloads:[[[Pt,Pt],function(M,O){var ie=O[1];return O[0].evaluate(M)&&ie.evaluate(M)}],[Co(Pt),function(M,O){for(var G=0,ie=O;G<ie.length;G+=1)if(!ie[G].evaluate(M))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],function(M,O){var ie=O[1];return O[0].evaluate(M)||ie.evaluate(M)}],[Co(Pt),function(M,O){for(var G=0,ie=O;G<ie.length;G+=1)if(ie[G].evaluate(M))return!0;return!1}]]},"!":[Pt,[Pt],function(M,O){return!O[0].evaluate(M)}],"is-supported-script":[Pt,[gt],function(M,O){var ie=M.globals&&M.globals.isSupportedScript;return!ie||ie(O[0].evaluate(M))}],upcase:[gt,[gt],function(M,O){return O[0].evaluate(M).toUpperCase()}],downcase:[gt,[gt],function(M,O){return O[0].evaluate(M).toLowerCase()}],concat:[gt,Co(Nt),function(M,O){return O.map(function(G){return yr(G.evaluate(M))}).join("")}],"resolved-locale":[gt,[jt],function(M,O){return O[0].evaluate(M).resolvedLocale()}]});var cs=function(M,O){var G;this.expression=M,this._warningHistory={},this._evaluator=new Bn,this._defaultValue=O?"color"===(G=O).type&&xo(G.default)?new dn(0,0,0,0):"color"===G.type?dn.parse(G.default)||null:void 0===G.default?null:G.default:null,this._enumValues=O&&"enum"===O.type?O.values:null};function Jo(M){return Array.isArray(M)&&M.length>0&&"string"==typeof M[0]&&M[0]in Wo}function fs(M,O){var be,Le,G=new ar(Wo,[],O?(Le={color:zt,string:gt,number:pt,enum:gt,boolean:Pt,formatted:Gt,resolvedImage:un},"array"===(be=O).type?hn(Le[be.value]||Nt,be.length):Le[be.type]):void 0),ie=G.parse(M,void 0,void 0,void 0,O&&"string"===O.type?{typeAnnotation:"coerce"}:void 0);return ie?Ms(new cs(ie,O)):yo(G.errors)}cs.prototype.evaluateWithoutErrorHandling=function(M,O,G,ie,be,Le){return this._evaluator.globals=M,this._evaluator.feature=O,this._evaluator.featureState=G,this._evaluator.canonical=ie,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Le,this.expression.evaluate(this._evaluator)},cs.prototype.evaluate=function(M,O,G,ie,be,Le){this._evaluator.globals=M,this._evaluator.feature=O||null,this._evaluator.featureState=G||null,this._evaluator.canonical=ie,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Le||null;try{var je=this.expression.evaluate(this._evaluator);if(null==je||"number"==typeof je&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new $n("Expected value to be one of "+Object.keys(this._enumValues).map(function(Qe){return JSON.stringify(Qe)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}};var Io=function(M,O){this.kind=M,this._styleExpression=O,this.isStateDependent="constant"!==M&&!rr(O.expression)};Io.prototype.evaluateWithoutErrorHandling=function(M,O,G,ie,be,Le){return this._styleExpression.evaluateWithoutErrorHandling(M,O,G,ie,be,Le)},Io.prototype.evaluate=function(M,O,G,ie,be,Le){return this._styleExpression.evaluate(M,O,G,ie,be,Le)};var zo=function(M,O,G,ie){this.kind=M,this.zoomStops=G,this._styleExpression=O,this.isStateDependent="camera"!==M&&!rr(O.expression),this.interpolationType=ie};function Ko(M,O){if("error"===(M=fs(M,O)).result)return M;var G=M.value.expression,ie=Jn(G);if(!ie&&!Yo(O))return yo([new Et("","data expressions not supported")]);var be=tr(G,["zoom"]);if(!be&&!Po(O))return yo([new Et("","zoom expressions not supported")]);var Le=ps(G);return Le||be?Le instanceof Et?yo([Le]):Le instanceof Ri&&!oo(O)?yo([new Et("",'"interpolate" expressions cannot be used with this property')]):Ms(Le?new zo(ie?"camera":"composite",M.value,Le.labels,Le instanceof Ri?Le.interpolation:void 0):new Io(ie?"constant":"source",M.value)):yo([new Et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}zo.prototype.evaluateWithoutErrorHandling=function(M,O,G,ie,be,Le){return this._styleExpression.evaluateWithoutErrorHandling(M,O,G,ie,be,Le)},zo.prototype.evaluate=function(M,O,G,ie,be,Le){return this._styleExpression.evaluate(M,O,G,ie,be,Le)},zo.prototype.interpolationFactor=function(M,O,G){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,M,O,G):0};var hs=function(M,O){this._parameters=M,this._specification=O,st(this,Ss(this._parameters,this._specification))};function ps(M){var O=null;if(M instanceof ka)O=ps(M.result);else if(M instanceof ma)for(var G=0,ie=M.args;G<ie.length&&!(O=ps(ie[G]));G+=1);else(M instanceof Ur||M instanceof Ri)&&M.input instanceof Hn&&"zoom"===M.input.name&&(O=M);return O instanceof Et||M.eachChild(function(Le){var je=ps(Le);je instanceof Et?O=je:!O&&je?O=new Et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):O&&je&&O!==je&&(O=new Et("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),O}function Oa(M){var O=M.key,G=M.value,ie=M.valueSpec||{},be=M.objectElementValidators||{},Le=M.style,je=M.styleSpec,Qe=[],lt=ei(G);if("object"!==lt)return[new Re(O,G,"object expected, "+lt+" found")];for(var kt in G){var Mt=kt.split(".")[0],Bt=ie[Mt]||ie["*"],qt=void 0;if(be[Mt])qt=be[Mt];else if(ie[Mt])qt=mi;else if(be["*"])qt=be["*"];else{if(!ie["*"]){Qe.push(new Re(O,G[kt],'unknown property "'+kt+'"'));continue}qt=mi}Qe=Qe.concat(qt({key:(O&&O+".")+kt,value:G[kt],valueSpec:Bt,style:Le,styleSpec:je,object:G,objectKey:kt},G))}for(var Vt in ie)be[Vt]||ie[Vt].required&&void 0===ie[Vt].default&&void 0===G[Vt]&&Qe.push(new Re(O,G,'missing required property "'+Vt+'"'));return Qe}function ds(M){var O=M.value,G=M.valueSpec,ie=M.style,be=M.styleSpec,Le=M.key,je=M.arrayElementValidator||mi;if("array"!==ei(O))return[new Re(Le,O,"array expected, "+ei(O)+" found")];if(G.length&&O.length!==G.length)return[new Re(Le,O,"array length "+G.length+" expected, length "+O.length+" found")];if(G["min-length"]&&O.length<G["min-length"])return[new Re(Le,O,"array length at least "+G["min-length"]+" expected, length "+O.length+" found")];var Qe={type:G.value,values:G.values};be.$version<7&&(Qe.function=G.function),"object"===ei(G.value)&&(Qe=G.value);for(var lt=[],kt=0;kt<O.length;kt++)lt=lt.concat(je({array:O,arrayIndex:kt,value:O[kt],valueSpec:Qe,style:ie,styleSpec:be,key:Le+"["+kt+"]"}));return lt}function gs(M){var O=M.key,G=M.value,ie=M.valueSpec,be=ei(G);return"number"===be&&G!=G&&(be="NaN"),"number"!==be?[new Re(O,G,"number expected, "+be+" found")]:"minimum"in ie&&G<ie.minimum?[new Re(O,G,G+" is less than the minimum value "+ie.minimum)]:"maximum"in ie&&G>ie.maximum?[new Re(O,G,G+" is greater than the maximum value "+ie.maximum)]:[]}function Ys(M){var O,G,ie,be=M.valueSpec,Le=ct(M.value.type),je={},Qe="categorical"!==Le&&void 0===M.value.property,lt=!Qe,kt="array"===ei(M.value.stops)&&"array"===ei(M.value.stops[0])&&"object"===ei(M.value.stops[0][0]),Mt=Oa({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Vt){if("identity"===Le)return[new Re(Vt.key,Vt.value,'identity function may not have a "stops" property')];var nn=[],xn=Vt.value;return nn=nn.concat(ds({key:Vt.key,value:xn,valueSpec:Vt.valueSpec,style:Vt.style,styleSpec:Vt.styleSpec,arrayElementValidator:Bt})),"array"===ei(xn)&&0===xn.length&&nn.push(new Re(Vt.key,xn,"array must have at least one stop")),nn},default:function(Vt){return mi({key:Vt.key,value:Vt.value,valueSpec:be,style:Vt.style,styleSpec:Vt.styleSpec})}}});return"identity"===Le&&Qe&&Mt.push(new Re(M.key,M.value,'missing required property "property"')),"identity"===Le||M.value.stops||Mt.push(new Re(M.key,M.value,'missing required property "stops"')),"exponential"===Le&&M.valueSpec.expression&&!oo(M.valueSpec)&&Mt.push(new Re(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(lt&&!Yo(M.valueSpec)?Mt.push(new Re(M.key,M.value,"property functions not supported")):Qe&&!Po(M.valueSpec)&&Mt.push(new Re(M.key,M.value,"zoom functions not supported"))),"categorical"!==Le&&!kt||void 0!==M.value.property||Mt.push(new Re(M.key,M.value,'"property" property is required')),Mt;function Bt(Vt){var nn=[],xn=Vt.value,zn=Vt.key;if("array"!==ei(xn))return[new Re(zn,xn,"array expected, "+ei(xn)+" found")];if(2!==xn.length)return[new Re(zn,xn,"array length 2 expected, length "+xn.length+" found")];if(kt){if("object"!==ei(xn[0]))return[new Re(zn,xn,"object expected, "+ei(xn[0])+" found")];if(void 0===xn[0].zoom)return[new Re(zn,xn,"object stop key must have zoom")];if(void 0===xn[0].value)return[new Re(zn,xn,"object stop key must have value")];if(ie&&ie>ct(xn[0].zoom))return[new Re(zn,xn[0].zoom,"stop zoom values must appear in ascending order")];ct(xn[0].zoom)!==ie&&(ie=ct(xn[0].zoom),G=void 0,je={}),nn=nn.concat(Oa({key:zn+"[0]",value:xn[0],valueSpec:{zoom:{}},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{zoom:gs,value:qt}}))}else nn=nn.concat(qt({key:zn+"[0]",value:xn[0],valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec},xn));return Jo(Tt(xn[1]))?nn.concat([new Re(zn+"[1]",xn[1],"expressions are not allowed in function stops.")]):nn.concat(mi({key:zn+"[1]",value:xn[1],valueSpec:be,style:Vt.style,styleSpec:Vt.styleSpec}))}function qt(Vt,nn){var xn=ei(Vt.value),zn=ct(Vt.value),In=null!==Vt.value?Vt.value:nn;if(O){if(xn!==O)return[new Re(Vt.key,In,xn+" stop domain type must match previous stop domain type "+O)]}else O=xn;if("number"!==xn&&"string"!==xn&&"boolean"!==xn)return[new Re(Vt.key,In,"stop domain value must be a number, string, or boolean")];if("number"!==xn&&"categorical"!==Le){var Un="number expected, "+xn+" found";return Yo(be)&&void 0===Le&&(Un+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Re(Vt.key,In,Un)]}return"categorical"!==Le||"number"!==xn||isFinite(zn)&&Math.floor(zn)===zn?"categorical"!==Le&&"number"===xn&&void 0!==G&&zn<G?[new Re(Vt.key,In,"stop domain values must appear in ascending order")]:(G=zn,"categorical"===Le&&zn in je?[new Re(Vt.key,In,"stop domain values must be unique")]:(je[zn]=!0,[])):[new Re(Vt.key,In,"integer expected, found "+zn)]}}function bo(M){var O=("property"===M.expressionContext?Ko:fs)(Tt(M.value),M.valueSpec);if("error"===O.result)return O.value.map(function(ie){return new Re(""+M.key+ie.key,M.value,ie.message)});var G=O.value.expression||O.value._styleExpression.expression;if("property"===M.expressionContext&&"text-font"===M.propertyKey&&!G.outputDefined())return[new Re(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===M.expressionContext&&"layout"===M.propertyType&&!rr(G))return[new Re(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===M.expressionContext&&!rr(G))return[new Re(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&0===M.expressionContext.indexOf("cluster")){if(!tr(G,["zoom","feature-state"]))return[new Re(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===M.expressionContext&&!Jn(G))return[new Re(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Es(M){var O=M.key,G=M.value,ie=M.valueSpec,be=[];return Array.isArray(ie.values)?-1===ie.values.indexOf(ct(G))&&be.push(new Re(O,G,"expected one of ["+ie.values.join(", ")+"], "+JSON.stringify(G)+" found")):-1===Object.keys(ie.values).indexOf(ct(G))&&be.push(new Re(O,G,"expected one of ["+Object.keys(ie.values).join(", ")+"], "+JSON.stringify(G)+" found")),be}function vs(M){if(!0===M||!1===M)return!0;if(!Array.isArray(M)||0===M.length)return!1;switch(M[0]){case"has":return M.length>=2&&"$id"!==M[1]&&"$type"!==M[1];case"in":return M.length>=3&&("string"!=typeof M[1]||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==M.length||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var O=0,G=M.slice(1);O<G.length;O+=1){var ie=G[O];if(!vs(ie)&&"boolean"!=typeof ie)return!1}return!0;default:return!0}}hs.deserialize=function(M){return new hs(M._parameters,M._specification)},hs.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Xs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ms(M){if(null==M)return{filter:function(){return!0},needGeometry:!1};vs(M)||(M=Do(M));var O=fs(M,Xs);if("error"===O.result)throw new Error(O.value.map(function(G){return G.key+": "+G.message}).join(", "));return{filter:function(G,ie,be){return O.value.evaluate(G,ie,{},be)},needGeometry:Ro(M)}}function $o(M,O){return M<O?-1:M>O?1:0}function Ro(M){if(!Array.isArray(M))return!1;if("within"===M[0])return!0;for(var O=1;O<M.length;O++)if(Ro(M[O]))return!0;return!1}function Do(M){if(!M)return!0;var O,G=M[0];return M.length<=1?"any"!==G:"=="===G?ai(M[1],M[2],"=="):"!="===G?Zi(ai(M[1],M[2],"==")):"<"===G||">"===G||"<="===G||">="===G?ai(M[1],M[2],G):"any"===G?(O=M.slice(1),["any"].concat(O.map(Do))):"all"===G?["all"].concat(M.slice(1).map(Do)):"none"===G?["all"].concat(M.slice(1).map(Do).map(Zi)):"in"===G?_o(M[1],M.slice(2)):"!in"===G?Zi(_o(M[1],M.slice(2))):"has"===G?wo(M[1]):"!has"===G?Zi(wo(M[1])):"within"!==G||M}function ai(M,O,G){switch(M){case"$type":return["filter-type-"+G,O];case"$id":return["filter-id-"+G,O];default:return["filter-"+G,M,O]}}function _o(M,O){if(0===O.length)return!1;switch(M){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(G){return typeof G!=typeof O[0]})?["filter-in-large",M,["literal",O.sort($o)]]:["filter-in-small",M,["literal",O]]}}function wo(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function Zi(M){return["!",M]}function Xr(M){return vs(Tt(M.value))?bo(st({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kr(M)}function Kr(M){var O=M.value,G=M.key;if("array"!==ei(O))return[new Re(G,O,"array expected, "+ei(O)+" found")];var ie,be=M.styleSpec,Le=[];if(O.length<1)return[new Re(G,O,"filter array must have at least 1 element")];switch(Le=Le.concat(Es({key:G+"[0]",value:O[0],valueSpec:be.filter_operator,style:M.style,styleSpec:M.styleSpec})),ct(O[0])){case"<":case"<=":case">":case">=":O.length>=2&&"$type"===ct(O[1])&&Le.push(new Re(G,O,'"$type" cannot be use with operator "'+O[0]+'"'));case"==":case"!=":3!==O.length&&Le.push(new Re(G,O,'filter array for operator "'+O[0]+'" must have 3 elements'));case"in":case"!in":O.length>=2&&"string"!==(ie=ei(O[1]))&&Le.push(new Re(G+"[1]",O[1],"string expected, "+ie+" found"));for(var je=2;je<O.length;je++)ie=ei(O[je]),"$type"===ct(O[1])?Le=Le.concat(Es({key:G+"["+je+"]",value:O[je],valueSpec:be.geometry_type,style:M.style,styleSpec:M.styleSpec})):"string"!==ie&&"number"!==ie&&"boolean"!==ie&&Le.push(new Re(G+"["+je+"]",O[je],"string, number, or boolean expected, "+ie+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<O.length;Qe++)Le=Le.concat(Kr({key:G+"["+Qe+"]",value:O[Qe],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":ie=ei(O[1]),2!==O.length?Le.push(new Re(G,O,'filter array for "'+O[0]+'" operator must have 2 elements')):"string"!==ie&&Le.push(new Re(G+"[1]",O[1],"string expected, "+ie+" found"));break;case"within":ie=ei(O[1]),2!==O.length?Le.push(new Re(G,O,'filter array for "'+O[0]+'" operator must have 2 elements')):"object"!==ie&&Le.push(new Re(G+"[1]",O[1],"object expected, "+ie+" found"))}return Le}function so(M,O){var G=M.key,ie=M.style,be=M.styleSpec,Le=M.value,je=M.objectKey,Qe=be[O+"_"+M.layerType];if(!Qe)return[];var lt=je.match(/^(.*)-transition$/);if("paint"===O&&lt&&Qe[lt[1]]&&Qe[lt[1]].transition)return mi({key:G,value:Le,valueSpec:be.transition,style:ie,styleSpec:be});var kt,Mt=M.valueSpec||Qe[je];if(!Mt)return[new Re(G,Le,'unknown property "'+je+'"')];if("string"===ei(Le)&&Yo(Mt)&&!Mt.tokens&&(kt=/^{([^}]+)}$/.exec(Le)))return[new Re(G,Le,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(kt[1])+" }`.")];var Bt=[];return"symbol"===M.layerType&&("text-field"===je&&ie&&!ie.glyphs&&Bt.push(new Re(G,Le,'use of "text-field" requires a style "glyphs" property')),"text-font"===je&&xo(Tt(Le))&&"identity"===ct(Le.type)&&Bt.push(new Re(G,Le,'"text-font" does not support identity functions'))),Bt.concat(mi({key:M.key,value:Le,valueSpec:Mt,style:ie,styleSpec:be,expressionContext:"property",propertyType:O,propertyKey:je}))}function Xa(M){return so(M,"paint")}function Ls(M){return so(M,"layout")}function Js(M){var O=[],G=M.value,ie=M.key,be=M.style,Le=M.styleSpec;G.type||G.ref||O.push(new Re(ie,G,'either "type" or "ref" is required'));var je,Qe=ct(G.type),lt=ct(G.ref);if(G.id)for(var kt=ct(G.id),Mt=0;Mt<M.arrayIndex;Mt++){var Bt=be.layers[Mt];ct(Bt.id)===kt&&O.push(new Re(ie,G.id,'duplicate layer id "'+G.id+'", previously used at line '+Bt.id.__line__))}if("ref"in G)["type","source","source-layer","filter","layout"].forEach(function(nn){nn in G&&O.push(new Re(ie,G[nn],'"'+nn+'" is prohibited for ref layers'))}),be.layers.forEach(function(nn){ct(nn.id)===lt&&(je=nn)}),je?je.ref?O.push(new Re(ie,G.ref,"ref cannot reference another ref layer")):Qe=ct(je.type):O.push(new Re(ie,G.ref,'ref layer "'+lt+'" not found'));else if("background"!==Qe)if(G.source){var qt=be.sources&&be.sources[G.source],Vt=qt&&ct(qt.type);qt?"vector"===Vt&&"raster"===Qe?O.push(new Re(ie,G.source,'layer "'+G.id+'" requires a raster source')):"raster"===Vt&&"raster"!==Qe?O.push(new Re(ie,G.source,'layer "'+G.id+'" requires a vector source')):"vector"!==Vt||G["source-layer"]?"raster-dem"===Vt&&"hillshade"!==Qe?O.push(new Re(ie,G.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Qe||!G.paint||!G.paint["line-gradient"]||"geojson"===Vt&&qt.lineMetrics||O.push(new Re(ie,G,'layer "'+G.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new Re(ie,G,'layer "'+G.id+'" must specify a "source-layer"')):O.push(new Re(ie,G.source,'source "'+G.source+'" not found'))}else O.push(new Re(ie,G,'missing required property "source"'));return O=O.concat(Oa({key:ie,value:G,valueSpec:Le.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mi({key:ie+".type",value:G.type,valueSpec:Le.layer.type,style:M.style,styleSpec:M.styleSpec,object:G,objectKey:"type"})},filter:Xr,layout:function(nn){return Oa({layer:G,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(xn){return Ls(st({layerType:Qe},xn))}}})},paint:function(nn){return Oa({layer:G,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(xn){return Xa(st({layerType:Qe},xn))}}})}}}))}function Fo(M){var O=M.value,G=M.key,ie=ei(O);return"string"!==ie?[new Re(G,O,"string expected, "+ie+" found")]:[]}var Ks={promoteId:function(M){var O=M.key,G=M.value;if("string"===ei(G))return Fo({key:O,value:G});var ie=[];for(var be in G)ie.push.apply(ie,Fo({key:O+"."+be,value:G[be]}));return ie}};function Bo(M){var O=M.value,G=M.key,ie=M.styleSpec,be=M.style;if(!O.type)return[new Re(G,O,'"type" is required')];var Le,je=ct(O.type);switch(je){case"vector":case"raster":case"raster-dem":return Oa({key:G,value:O,valueSpec:ie["source_"+je.replace("-","_")],style:M.style,styleSpec:ie,objectElementValidators:Ks});case"geojson":if(Le=Oa({key:G,value:O,valueSpec:ie.source_geojson,style:be,styleSpec:ie,objectElementValidators:Ks}),O.cluster)for(var Qe in O.clusterProperties){var lt=O.clusterProperties[Qe],kt=lt[0],Bt="string"==typeof kt?[kt,["accumulated"],["get",Qe]]:kt;Le.push.apply(Le,bo({key:G+"."+Qe+".map",value:lt[1],expressionContext:"cluster-map"})),Le.push.apply(Le,bo({key:G+"."+Qe+".reduce",value:Bt,expressionContext:"cluster-reduce"}))}return Le;case"video":return Oa({key:G,value:O,valueSpec:ie.source_video,style:be,styleSpec:ie});case"image":return Oa({key:G,value:O,valueSpec:ie.source_image,style:be,styleSpec:ie});case"canvas":return[new Re(G,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Es({key:G+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:be,styleSpec:ie})}}function lo(M){var O=M.value,G=M.styleSpec,ie=G.light,be=M.style,Le=[],je=ei(O);if(void 0===O)return Le;if("object"!==je)return Le.concat([new Re("light",O,"object expected, "+je+" found")]);for(var Qe in O){var lt=Qe.match(/^(.*)-transition$/);Le=Le.concat(lt&&ie[lt[1]]&&ie[lt[1]].transition?mi({key:Qe,value:O[Qe],valueSpec:G.transition,style:be,styleSpec:G}):ie[Qe]?mi({key:Qe,value:O[Qe],valueSpec:ie[Qe],style:be,styleSpec:G}):[new Re(Qe,O[Qe],'unknown property "'+Qe+'"')])}return Le}var No={"*":function(){return[]},array:ds,boolean:function(M){var O=M.value,G=M.key,ie=ei(O);return"boolean"!==ie?[new Re(G,O,"boolean expected, "+ie+" found")]:[]},number:gs,color:function(M){var O=M.key,G=M.value,ie=ei(G);return"string"!==ie?[new Re(O,G,"color expected, "+ie+" found")]:null===ln(G)?[new Re(O,G,'color expected, "'+G+'" found')]:[]},constants:Ke,enum:Es,filter:Xr,function:Ys,layer:Js,object:Oa,source:Bo,light:lo,string:Fo,formatted:function(M){return 0===Fo(M).length?[]:bo(M)},resolvedImage:function(M){return 0===Fo(M).length?[]:bo(M)}};function mi(M){var O=M.value,G=M.valueSpec,ie=M.styleSpec;return G.expression&&xo(ct(O))?Ys(M):G.expression&&Jo(Tt(O))?bo(M):G.type&&No[G.type]?No[G.type](M):Oa(st({},M,{valueSpec:G.type?ie[G.type]:G}))}function Ja(M){var O=M.value,G=M.key,ie=Fo(M);return ie.length||(-1===O.indexOf("{fontstack}")&&ie.push(new Re(G,O,'"glyphs" url must include a "{fontstack}" token')),-1===O.indexOf("{range}")&&ie.push(new Re(G,O,'"glyphs" url must include a "{range}" token'))),ie}function jo(M,O){void 0===O&&(O=Se);var G=[];return G=G.concat(mi({key:"",value:M,valueSpec:O.$root,styleSpec:O,style:M,objectElementValidators:{glyphs:Ja,"*":function(){return[]}}})),M.constants&&(G=G.concat(Ke({key:"constants",value:M.constants,style:M,styleSpec:O}))),Ii(G)}function Ii(M){return[].concat(M).sort(function(O,G){return O.line-G.line})}function Wi(M){return function(){for(var O=[],G=arguments.length;G--;)O[G]=arguments[G];return Ii(M.apply(this,O))}}jo.source=Wi(Bo),jo.light=Wi(lo),jo.layer=Wi(Js),jo.filter=Wi(Xr),jo.paintProperty=Wi(Xa),jo.layoutProperty=Wi(Ls);var Yi=jo,qi=Yi.light,sa=Yi.paintProperty,To=Yi.layoutProperty;function Ia(M,O){var G=!1;if(O&&O.length)for(var ie=0,be=O;ie<be.length;ie+=1)M.fire(new Ye(new Error(be[ie].message))),G=!0;return G}var Di=ya;function ya(M,O,G){var ie=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var be=new Int32Array(this.arrayBuffer);M=be[0],this.d=(O=be[1])+2*(G=be[2]);for(var Le=0;Le<this.d*this.d;Le++){var je=be[3+Le],Qe=be[3+Le+1];ie.push(je===Qe?null:be.subarray(je,Qe))}var kt=be[3+ie.length+1];this.keys=be.subarray(be[3+ie.length],kt),this.bboxes=be.subarray(kt),this.insert=this._insertReadonly}else{this.d=O+2*G;for(var Mt=0;Mt<this.d*this.d;Mt++)ie.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=M,this.padding=G,this.scale=O/M,this.uid=0;var Bt=G/O*M;this.min=-Bt,this.max=M+Bt}ya.prototype.insert=function(M,O,G,ie,be){this._forEachCell(O,G,ie,be,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(O),this.bboxes.push(G),this.bboxes.push(ie),this.bboxes.push(be)},ya.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ya.prototype._insertCell=function(M,O,G,ie,be,Le){this.cells[be].push(Le)},ya.prototype.query=function(M,O,G,ie,be){var Le=this.min,je=this.max;if(M<=Le&&O<=Le&&je<=G&&je<=ie&&!be)return Array.prototype.slice.call(this.keys);var Qe=[];return this._forEachCell(M,O,G,ie,this._queryCell,Qe,{},be),Qe},ya.prototype._queryCell=function(M,O,G,ie,be,Le,je,Qe){var lt=this.cells[be];if(null!==lt)for(var kt=this.keys,Mt=this.bboxes,Bt=0;Bt<lt.length;Bt++){var qt=lt[Bt];if(void 0===je[qt]){var Vt=4*qt;(Qe?Qe(Mt[Vt+0],Mt[Vt+1],Mt[Vt+2],Mt[Vt+3]):M<=Mt[Vt+2]&&O<=Mt[Vt+3]&&G>=Mt[Vt+0]&&ie>=Mt[Vt+1])?(je[qt]=!0,Le.push(kt[qt])):je[qt]=!1}}},ya.prototype._forEachCell=function(M,O,G,ie,be,Le,je,Qe){for(var lt=this._convertToCellCoord(M),kt=this._convertToCellCoord(O),Mt=this._convertToCellCoord(G),Bt=this._convertToCellCoord(ie),qt=lt;qt<=Mt;qt++)for(var Vt=kt;Vt<=Bt;Vt++){var nn=this.d*Vt+qt;if((!Qe||Qe(this._convertFromCellCoord(qt),this._convertFromCellCoord(Vt),this._convertFromCellCoord(qt+1),this._convertFromCellCoord(Vt+1)))&&be.call(this,M,O,G,ie,nn,Le,je,Qe))return}},ya.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},ya.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},ya.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,O=3+this.cells.length+1+1,G=0,ie=0;ie<this.cells.length;ie++)G+=this.cells[ie].length;var be=new Int32Array(O+G+this.keys.length+this.bboxes.length);be[0]=this.extent,be[1]=this.n,be[2]=this.padding;for(var Le=O,je=0;je<M.length;je++){var Qe=M[je];be[3+je]=Le,be.set(Qe,Le),Le+=Qe.length}return be[3+M.length]=Le,be.set(this.keys,Le),be[3+M.length+1]=Le+=this.keys.length,be.set(this.bboxes,Le),Le+=this.bboxes.length,be.buffer};var Cs=self.ImageData,Ps=self.ImageBitmap,ia={};function _r(M,O,G){void 0===G&&(G={}),Object.defineProperty(O,"_classRegistryKey",{value:M,writeable:!1}),ia[M]={klass:O,omit:G.omit||[],shallow:G.shallow||[]}}for(var Uo in _r("Object",Object),Di.serialize=function(M,O){var G=M.toArrayBuffer();return O&&O.push(G),{buffer:G}},Di.deserialize=function(M){return new Di(M.buffer)},_r("Grid",Di),_r("Color",dn),_r("Error",Error),_r("ResolvedImage",Nn),_r("StylePropertyFunction",hs),_r("StyleExpression",cs,{omit:["_evaluator"]}),_r("ZoomDependentExpression",zo),_r("ZoomConstantExpression",Io),_r("CompoundExpression",Hn,{omit:["_evaluate"]}),Wo)Wo[Uo]._classRegistryKey||_r("Expression_"+Uo,Wo[Uo]);function la(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&"ArrayBuffer"===M.constructor.name)}function Os(M){return Ps&&M instanceof Ps}function Qo(M,O){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(la(M)||Os(M))return O&&O.push(M),M;if(ArrayBuffer.isView(M)){var G=M;return O&&O.push(G.buffer),G}if(M instanceof Cs)return O&&O.push(M.data.buffer),M;if(Array.isArray(M)){for(var ie=[],be=0,Le=M;be<Le.length;be+=1)ie.push(Qo(Le[be],O));return ie}if("object"==typeof M){var Qe=M.constructor,lt=Qe._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var kt=Qe.serialize?Qe.serialize(M,O):{};if(!Qe.serialize){for(var Mt in M)if(M.hasOwnProperty(Mt)&&!(ia[lt].omit.indexOf(Mt)>=0)){var Bt=M[Mt];kt[Mt]=ia[lt].shallow.indexOf(Mt)>=0?Bt:Qo(Bt,O)}M instanceof Error&&(kt.message=M.message)}if(kt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==lt&&(kt.$name=lt),kt}throw new Error("can't serialize object of type "+typeof M)}function es(M){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||la(M)||Os(M)||ArrayBuffer.isView(M)||M instanceof Cs)return M;if(Array.isArray(M))return M.map(es);if("object"==typeof M){var O=M.$name||"Object",G=ia[O].klass;if(!G)throw new Error("can't deserialize unregistered class "+O);if(G.deserialize)return G.deserialize(M);for(var ie=Object.create(G.prototype),be=0,Le=Object.keys(M);be<Le.length;be+=1){var je=Le[be];if("$name"!==je){var Qe=M[je];ie[je]=ia[O].shallow.indexOf(je)>=0?Qe:es(Qe)}}return ie}throw new Error("can't deserialize object of type "+typeof M)}var ts=function(){this.first=!0};ts.prototype.update=function(M,O){var G=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=G,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=G,!0):(this.lastFloorZoom>G?(this.lastIntegerZoom=G+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<G&&(this.lastIntegerZoom=G,this.lastIntegerZoomTime=O),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=G,!0))};var wr={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function ns(M){for(var O=0,G=M;O<G.length;O+=1)if(za(G[O].charCodeAt(0)))return!0;return!1}function za(M){return!(746!==M&&747!==M&&(M<4352||!(wr["Bopomofo Extended"](M)||wr.Bopomofo(M)||wr["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||wr["CJK Compatibility Ideographs"](M)||wr["CJK Compatibility"](M)||wr["CJK Radicals Supplement"](M)||wr["CJK Strokes"](M)||!(!wr["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||12336===M)||wr["CJK Unified Ideographs Extension A"](M)||wr["CJK Unified Ideographs"](M)||wr["Enclosed CJK Letters and Months"](M)||wr["Hangul Compatibility Jamo"](M)||wr["Hangul Jamo Extended-A"](M)||wr["Hangul Jamo Extended-B"](M)||wr["Hangul Jamo"](M)||wr["Hangul Syllables"](M)||wr.Hiragana(M)||wr["Ideographic Description Characters"](M)||wr.Kanbun(M)||wr["Kangxi Radicals"](M)||wr["Katakana Phonetic Extensions"](M)||wr.Katakana(M)&&12540!==M||!(!wr["Halfwidth and Fullwidth Forms"](M)||65288===M||65289===M||65293===M||M>=65306&&M<=65310||65339===M||65341===M||65343===M||M>=65371&&M<=65503||65507===M||M>=65512&&M<=65519)||!(!wr["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||wr["Unified Canadian Aboriginal Syllabics"](M)||wr["Unified Canadian Aboriginal Syllabics Extended"](M)||wr["Vertical Forms"](M)||wr["Yijing Hexagram Symbols"](M)||wr["Yi Syllables"](M)||wr["Yi Radicals"](M))))}function Is(M){return!(za(M)||(O=M,wr["Latin-1 Supplement"](O)&&(167===O||169===O||174===O||177===O||188===O||189===O||190===O||215===O||247===O)||wr["General Punctuation"](O)&&(8214===O||8224===O||8225===O||8240===O||8241===O||8251===O||8252===O||8258===O||8263===O||8264===O||8265===O||8273===O)||wr["Letterlike Symbols"](O)||wr["Number Forms"](O)||wr["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||9003===O||O>=9085&&O<=9114||O>=9150&&O<=9165||9167===O||O>=9169&&O<=9179||O>=9186&&O<=9215)||wr["Control Pictures"](O)&&9251!==O||wr["Optical Character Recognition"](O)||wr["Enclosed Alphanumerics"](O)||wr["Geometric Shapes"](O)||wr["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||wr["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||wr["CJK Symbols and Punctuation"](O)||wr.Katakana(O)||wr["Private Use Area"](O)||wr["CJK Compatibility Forms"](O)||wr["Small Form Variants"](O)||wr["Halfwidth and Fullwidth Forms"](O)||8734===O||8756===O||8757===O||O>=9984&&O<=10087||O>=10102&&O<=10131||65532===O||65533===O));var O}function ys(M){return wr.Arabic(M)||wr["Arabic Supplement"](M)||wr["Arabic Extended-A"](M)||wr["Arabic Presentation Forms-A"](M)||wr["Arabic Presentation Forms-B"](M)}function Xi(M){return M>=1424&&M<=2303||wr["Arabic Presentation Forms-A"](M)||wr["Arabic Presentation Forms-B"](M)}function Vo(M,O){return!(!O&&Xi(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||wr.Khmer(M))}function uo(M){for(var O=0,G=M;O<G.length;O+=1)if(Xi(G[O].charCodeAt(0)))return!0;return!1}var xa="deferred",ko="loading",Va="loaded",Ho=null,Ji="unavailable",Da=null,ri=function(M){M&&"string"==typeof M&&M.indexOf("NetworkError")>-1&&(Ji="error"),Ho&&Ho(M)};function xs(){Aa.fire(new Be("pluginStateChange",{pluginStatus:Ji,pluginURL:Da}))}var Aa=new rt,Fa=function(){return Ji},Ka=function(){if(Ji!==xa||!Da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji=ko,xs(),Da&&Lt({url:Da},function(M){M?ri(M):(Ji=Va,xs())})},ua={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ji===Va||null!=ua.applyArabicShaping},isLoading:function(){return Ji===ko},setState:function(M){Ji=M.pluginStatus,Da=M.pluginURL},isParsed:function(){return null!=ua.applyArabicShaping&&null!=ua.processBidirectionalText&&null!=ua.processStyledBidirectionalText},getPluginURL:function(){return Da}},ni=function(M,O){this.zoom=M,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ts,this.transition={})};ni.prototype.isSupportedScript=function(M){return function(O,G){for(var ie=0,be=O;ie<be.length;ie+=1)if(!Vo(be[ie].charCodeAt(0),G))return!1;return!0}(M,ua.isLoaded())},ni.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ni.prototype.getCrossfadeParameters=function(){var M=this.zoom,O=M-Math.floor(M),G=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*G}:{fromScale:.5,toScale:1,t:1-(1-G)*O}};var Vi=function(M,O){this.property=M,this.value=O,this.expression=function(G,ie){if(xo(G))return new hs(G,ie);if(Jo(G)){var be=Ko(G,ie);if("error"===be.result)throw new Error(be.value.map(function(je){return je.key+": "+je.message}).join(", "));return be.value}var Le=G;return"string"==typeof G&&"color"===ie.type&&(Le=dn.parse(G)),{kind:"constant",evaluate:function(){return Le}}}(void 0===O?M.specification.default:O,M.specification)};Vi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Vi.prototype.possiblyEvaluate=function(M,O,G){return this.property.possiblyEvaluate(this,M,O,G)};var Ha=function(M){this.property=M,this.value=new Vi(M,void 0)};Ha.prototype.transitioned=function(M,O){return new $a(this.property,this.value,O,c({},M.transition,this.transition),M.now)},Ha.prototype.untransitioned=function(){return new $a(this.property,this.value,null,{},0)};var ca=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};ca.prototype.getValue=function(M){return w(this._values[M].value.value)},ca.prototype.setValue=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new Ha(this._values[M].property)),this._values[M].value=new Vi(this._values[M].property,null===O?void 0:w(O))},ca.prototype.getTransition=function(M){return w(this._values[M].transition)},ca.prototype.setTransition=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new Ha(this._values[M].property)),this._values[M].transition=w(O)||void 0},ca.prototype.serialize=function(){for(var M={},O=0,G=Object.keys(this._values);O<G.length;O+=1){var ie=G[O],be=this.getValue(ie);void 0!==be&&(M[ie]=be);var Le=this.getTransition(ie);void 0!==Le&&(M[ie+"-transition"]=Le)}return M},ca.prototype.transitioned=function(M,O){for(var G=new Ao(this._properties),ie=0,be=Object.keys(this._values);ie<be.length;ie+=1){var Le=be[ie];G._values[Le]=this._values[Le].transitioned(M,O._values[Le])}return G},ca.prototype.untransitioned=function(){for(var M=new Ao(this._properties),O=0,G=Object.keys(this._values);O<G.length;O+=1){var ie=G[O];M._values[ie]=this._values[ie].untransitioned()}return M};var $a=function(M,O,G,ie,be){this.property=M,this.value=O,this.begin=be+ie.delay||0,this.end=this.begin+ie.duration||0,M.specification.transition&&(ie.delay||ie.duration)&&(this.prior=G)};$a.prototype.possiblyEvaluate=function(M,O,G){var ie=M.now||0,be=this.value.possiblyEvaluate(M,O,G),Le=this.prior;if(Le){if(ie>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(ie<this.begin)return Le.possiblyEvaluate(M,O,G);var je=(ie-this.begin)/(this.end-this.begin);return this.property.interpolate(Le.possiblyEvaluate(M,O,G),be,function(Qe){if(Qe<=0)return 0;if(Qe>=1)return 1;var lt=Qe*Qe,kt=lt*Qe;return 4*(Qe<.5?kt:3*(Qe-lt)+kt-.75)}(je))}return be};var Ao=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Ao.prototype.possiblyEvaluate=function(M,O,G){for(var ie=new Ba(this._properties),be=0,Le=Object.keys(this._values);be<Le.length;be+=1){var je=Le[be];ie._values[je]=this._values[je].possiblyEvaluate(M,O,G)}return ie},Ao.prototype.hasTransition=function(){for(var M=0,O=Object.keys(this._values);M<O.length;M+=1)if(this._values[O[M]].prior)return!0;return!1};var co=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};co.prototype.getValue=function(M){return w(this._values[M].value)},co.prototype.setValue=function(M,O){this._values[M]=new Vi(this._values[M].property,null===O?void 0:w(O))},co.prototype.serialize=function(){for(var M={},O=0,G=Object.keys(this._values);O<G.length;O+=1){var ie=G[O],be=this.getValue(ie);void 0!==be&&(M[ie]=be)}return M},co.prototype.possiblyEvaluate=function(M,O,G){for(var ie=new Ba(this._properties),be=0,Le=Object.keys(this._values);be<Le.length;be+=1){var je=Le[be];ie._values[je]=this._values[je].possiblyEvaluate(M,O,G)}return ie};var Ki=function(M,O,G){this.property=M,this.value=O,this.parameters=G};Ki.prototype.isConstant=function(){return"constant"===this.value.kind},Ki.prototype.constantOr=function(M){return"constant"===this.value.kind?this.value.value:M},Ki.prototype.evaluate=function(M,O,G,ie){return this.property.evaluate(this.value,this.parameters,M,O,G,ie)};var Ba=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};Ba.prototype.get=function(M){return this._values[M]};var Mr=function(M){this.specification=M};Mr.prototype.possiblyEvaluate=function(M,O){return M.expression.evaluate(O)},Mr.prototype.interpolate=function(M,O,G){var ie=fr[this.specification.type];return ie?ie(M,O,G):M};var Or=function(M,O){this.specification=M,this.overrides=O};Or.prototype.possiblyEvaluate=function(M,O,G,ie){return new Ki(this,"constant"===M.expression.kind||"camera"===M.expression.kind?{kind:"constant",value:M.expression.evaluate(O,null,{},G,ie)}:M.expression,O)},Or.prototype.interpolate=function(M,O,G){if("constant"!==M.value.kind||"constant"!==O.value.kind)return M;if(void 0===M.value.value||void 0===O.value.value)return new Ki(this,{kind:"constant",value:void 0},M.parameters);var ie=fr[this.specification.type];return ie?new Ki(this,{kind:"constant",value:ie(M.value.value,O.value.value,G)},M.parameters):M},Or.prototype.evaluate=function(M,O,G,ie,be,Le){return"constant"===M.kind?M.value:M.evaluate(O,G,ie,be,Le)};var rs=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(G,ie,be,Le){if(void 0===G.value)return new Ki(this,{kind:"constant",value:void 0},ie);if("constant"===G.expression.kind){var je=G.expression.evaluate(ie,null,{},be,Le),Qe="resolvedImage"===G.property.specification.type&&"string"!=typeof je?je.name:je,lt=this._calculate(Qe,Qe,Qe,ie);return new Ki(this,{kind:"constant",value:lt},ie)}if("camera"===G.expression.kind){var kt=this._calculate(G.expression.evaluate({zoom:ie.zoom-1}),G.expression.evaluate({zoom:ie.zoom}),G.expression.evaluate({zoom:ie.zoom+1}),ie);return new Ki(this,{kind:"constant",value:kt},ie)}return new Ki(this,G.expression,ie)},O.prototype.evaluate=function(G,ie,be,Le,je,Qe){if("source"===G.kind){var lt=G.evaluate(ie,be,Le,je,Qe);return this._calculate(lt,lt,lt,ie)}return"composite"===G.kind?this._calculate(G.evaluate({zoom:Math.floor(ie.zoom)-1},be,Le),G.evaluate({zoom:Math.floor(ie.zoom)},be,Le),G.evaluate({zoom:Math.floor(ie.zoom)+1},be,Le),ie):G.value},O.prototype._calculate=function(G,ie,be,Le){return Le.zoom>Le.zoomHistory.lastIntegerZoom?{from:G,to:ie}:{from:be,to:ie}},O.prototype.interpolate=function(G){return G},O}(Or),fo=function(M){this.specification=M};fo.prototype.possiblyEvaluate=function(M,O,G,ie){if(void 0!==M.value){if("constant"===M.expression.kind){var be=M.expression.evaluate(O,null,{},G,ie);return this._calculate(be,be,be,O)}return this._calculate(M.expression.evaluate(new ni(Math.floor(O.zoom-1),O)),M.expression.evaluate(new ni(Math.floor(O.zoom),O)),M.expression.evaluate(new ni(Math.floor(O.zoom+1),O)),O)}},fo.prototype._calculate=function(M,O,G,ie){return ie.zoom>ie.zoomHistory.lastIntegerZoom?{from:M,to:O}:{from:G,to:O}},fo.prototype.interpolate=function(M){return M};var qa=function(M){this.specification=M};qa.prototype.possiblyEvaluate=function(M,O,G,ie){return!!M.expression.evaluate(O,null,{},G,ie)},qa.prototype.interpolate=function(){return!1};var $i=function(M){for(var O in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var G=M[O];G.specification.overridable&&this.overridableProperties.push(O);var ie=this.defaultPropertyValues[O]=new Vi(G,void 0),be=this.defaultTransitionablePropertyValues[O]=new Ha(G);this.defaultTransitioningPropertyValues[O]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ie.possiblyEvaluate({})}};_r("DataDrivenProperty",Or),_r("DataConstantProperty",Mr),_r("CrossFadedDataDrivenProperty",rs),_r("CrossFadedProperty",fo),_r("ColorRampProperty",qa);var zs="-transition",fa=function(M){function O(G,ie){if(M.call(this),this.id=G.id,this.type=G.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==G.type&&(this.metadata=G.metadata,this.minzoom=G.minzoom,this.maxzoom=G.maxzoom,"background"!==G.type&&(this.source=G.source,this.sourceLayer=G["source-layer"],this.filter=G.filter),ie.layout&&(this._unevaluatedLayout=new co(ie.layout)),ie.paint)){for(var be in this._transitionablePaint=new ca(ie.paint),G.paint)this.setPaintProperty(be,G.paint[be],{validate:!1});for(var Le in G.layout)this.setLayoutProperty(Le,G.layout[Le],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ba(ie.paint)}}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(G){return"visibility"===G?this.visibility:this._unevaluatedLayout.getValue(G)},O.prototype.setLayoutProperty=function(G,ie,be){void 0===be&&(be={}),null!=ie&&this._validate(To,"layers."+this.id+".layout."+G,G,ie,be)||("visibility"!==G?this._unevaluatedLayout.setValue(G,ie):this.visibility=ie)},O.prototype.getPaintProperty=function(G){return y(G,zs)?this._transitionablePaint.getTransition(G.slice(0,-zs.length)):this._transitionablePaint.getValue(G)},O.prototype.setPaintProperty=function(G,ie,be){if(void 0===be&&(be={}),null!=ie&&this._validate(sa,"layers."+this.id+".paint."+G,G,ie,be))return!1;if(y(G,zs))return this._transitionablePaint.setTransition(G.slice(0,-zs.length),ie||void 0),!1;var je=this._transitionablePaint._values[G],Qe="cross-faded-data-driven"===je.property.specification["property-type"],lt=je.value.isDataDriven(),kt=je.value;this._transitionablePaint.setValue(G,ie),this._handleSpecialPaintPropertyUpdate(G);var Mt=this._transitionablePaint._values[G].value;return Mt.isDataDriven()||lt||Qe||this._handleOverridablePaintPropertyUpdate(G,kt,Mt)},O.prototype._handleSpecialPaintPropertyUpdate=function(G){},O.prototype._handleOverridablePaintPropertyUpdate=function(G,ie,be){return!1},O.prototype.isHidden=function(G){return!!(this.minzoom&&G<this.minzoom)||!!(this.maxzoom&&G>=this.maxzoom)||"none"===this.visibility},O.prototype.updateTransitions=function(G){this._transitioningPaint=this._transitionablePaint.transitioned(G,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(G,ie){G.getCrossfadeParameters&&(this._crossfadeParameters=G.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(G,void 0,ie)),this.paint=this._transitioningPaint.possiblyEvaluate(G,void 0,ie)},O.prototype.serialize=function(){var G={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(G.layout=G.layout||{},G.layout.visibility=this.visibility),m(G,function(ie,be){return!(void 0===ie||"layout"===be&&!Object.keys(ie).length||"paint"===be&&!Object.keys(ie).length)})},O.prototype._validate=function(G,ie,be,Le,je){return void 0===je&&(je={}),(!je||!1!==je.validate)&&Ia(this,G.call(Yi,{key:ie,layerType:this.type,objectKey:be,value:Le,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var G in this.paint._values){var ie=this.paint.get(G);if(ie instanceof Ki&&Yo(ie.property.specification)&&("source"===ie.value.kind||"composite"===ie.value.kind)&&ie.value.isStateDependent)return!0}return!1},O}(rt),is={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ho=function(M,O){this._structArray=M,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},oi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function fi(M,O){void 0===O&&(O=1);var G=0,ie=0;return{members:M.map(function(be){var je=is[be.type].BYTES_PER_ELEMENT,Qe=G=Rs(G,Math.max(O,je)),lt=be.components||1;return ie=Math.max(ie,je),G+=je*lt,{name:be.name,type:be.type,components:lt,offset:Qe}}),size:Rs(G,Math.max(ie,O)),alignment:O}}function Rs(M,O){return Math.ceil(M/O)*O}oi.serialize=function(M,O){return M._trim(),O&&(M.isTransferred=!0,O.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},oi.deserialize=function(M){var O=Object.create(this.prototype);return O.arrayBuffer=M.arrayBuffer,O.length=M.length,O.capacity=M.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},oi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},oi.prototype.clear=function(){this.length=0},oi.prototype.resize=function(M){this.reserve(M),this.length=M},oi.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},oi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Xe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie){var be=this.length;return this.resize(be+1),this.emplace(be,G,ie)},O.prototype.emplace=function(G,ie,be){var Le=2*G;return this.int16[Le+0]=ie,this.int16[Le+1]=be,G},O}(oi);Xe.prototype.bytesPerElement=4,_r("StructArrayLayout2i4",Xe);var $e=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le){var je=this.length;return this.resize(je+1),this.emplace(je,G,ie,be,Le)},O.prototype.emplace=function(G,ie,be,Le,je){var Qe=4*G;return this.int16[Qe+0]=ie,this.int16[Qe+1]=be,this.int16[Qe+2]=Le,this.int16[Qe+3]=je,G},O}(oi);$e.prototype.bytesPerElement=8,_r("StructArrayLayout4i8",$e);var ot=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,G,ie,be,Le,je,Qe)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt){var kt=6*G;return this.int16[kt+0]=ie,this.int16[kt+1]=be,this.int16[kt+2]=Le,this.int16[kt+3]=je,this.int16[kt+4]=Qe,this.int16[kt+5]=lt,G},O}(oi);ot.prototype.bytesPerElement=12,_r("StructArrayLayout2i4i12",ot);var ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,G,ie,be,Le,je,Qe)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt){var kt=4*G,Mt=8*G;return this.int16[kt+0]=ie,this.int16[kt+1]=be,this.uint8[Mt+4]=Le,this.uint8[Mt+5]=je,this.uint8[Mt+6]=Qe,this.uint8[Mt+7]=lt,G},O}(oi);ft.prototype.bytesPerElement=8,_r("StructArrayLayout2i4ub8",ft);var xt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt){var Vt=9*G,nn=18*G;return this.uint16[Vt+0]=ie,this.uint16[Vt+1]=be,this.uint16[Vt+2]=Le,this.uint16[Vt+3]=je,this.uint16[Vt+4]=Qe,this.uint16[Vt+5]=lt,this.uint16[Vt+6]=kt,this.uint16[Vt+7]=Mt,this.uint8[nn+16]=Bt,this.uint8[nn+17]=qt,G},O}(oi);xt.prototype.bytesPerElement=18,_r("StructArrayLayout8ui2ub18",xt);var mt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt){var nn=this.length;return this.resize(nn+1),this.emplace(nn,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn){var xn=12*G;return this.int16[xn+0]=ie,this.int16[xn+1]=be,this.int16[xn+2]=Le,this.int16[xn+3]=je,this.uint16[xn+4]=Qe,this.uint16[xn+5]=lt,this.uint16[xn+6]=kt,this.uint16[xn+7]=Mt,this.int16[xn+8]=Bt,this.int16[xn+9]=qt,this.int16[xn+10]=Vt,this.int16[xn+11]=nn,G},O}(oi);mt.prototype.bytesPerElement=24,_r("StructArrayLayout4i4ui4i24",mt);var D=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be){var Le=this.length;return this.resize(Le+1),this.emplace(Le,G,ie,be)},O.prototype.emplace=function(G,ie,be,Le){var je=3*G;return this.float32[je+0]=ie,this.float32[je+1]=be,this.float32[je+2]=Le,G},O}(oi);D.prototype.bytesPerElement=12,_r("StructArrayLayout3f12",D);var Y=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G){var ie=this.length;return this.resize(ie+1),this.emplace(ie,G)},O.prototype.emplace=function(G,ie){return this.uint32[1*G+0]=ie,G},O}(oi);Y.prototype.bytesPerElement=4,_r("StructArrayLayout1ul4",Y);var q=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe,lt,kt,Mt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,G,ie,be,Le,je,Qe,lt,kt,Mt)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt){var qt=10*G,Vt=5*G;return this.int16[qt+0]=ie,this.int16[qt+1]=be,this.int16[qt+2]=Le,this.int16[qt+3]=je,this.int16[qt+4]=Qe,this.int16[qt+5]=lt,this.uint32[Vt+3]=kt,this.uint16[qt+8]=Mt,this.uint16[qt+9]=Bt,G},O}(oi);q.prototype.bytesPerElement=20,_r("StructArrayLayout6i1ul2ui20",q);var te=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,G,ie,be,Le,je,Qe)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt){var kt=6*G;return this.int16[kt+0]=ie,this.int16[kt+1]=be,this.int16[kt+2]=Le,this.int16[kt+3]=je,this.int16[kt+4]=Qe,this.int16[kt+5]=lt,G},O}(oi);te.prototype.bytesPerElement=12,_r("StructArrayLayout2i2i2i12",te);var ve=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,G,ie,be,Le,je)},O.prototype.emplace=function(G,ie,be,Le,je,Qe){var lt=4*G,kt=8*G;return this.float32[lt+0]=ie,this.float32[lt+1]=be,this.float32[lt+2]=Le,this.int16[kt+6]=je,this.int16[kt+7]=Qe,G},O}(oi);ve.prototype.bytesPerElement=16,_r("StructArrayLayout2f1f2i16",ve);var Ce=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le){var je=this.length;return this.resize(je+1),this.emplace(je,G,ie,be,Le)},O.prototype.emplace=function(G,ie,be,Le,je){var Qe=12*G,lt=3*G;return this.uint8[Qe+0]=ie,this.uint8[Qe+1]=be,this.float32[lt+1]=Le,this.float32[lt+2]=je,G},O}(oi);Ce.prototype.bytesPerElement=12,_r("StructArrayLayout2ub2f12",Ce);var Ne=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be){var Le=this.length;return this.resize(Le+1),this.emplace(Le,G,ie,be)},O.prototype.emplace=function(G,ie,be,Le){var je=3*G;return this.uint16[je+0]=ie,this.uint16[je+1]=be,this.uint16[je+2]=Le,G},O}(oi);Ne.prototype.bytesPerElement=6,_r("StructArrayLayout3ui6",Ne);var qe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn,zn,In,Un){var Vn=this.length;return this.resize(Vn+1),this.emplace(Vn,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn,zn,In,Un)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn,zn,In,Un,Vn){var Wn=24*G,Qn=12*G,nr=48*G;return this.int16[Wn+0]=ie,this.int16[Wn+1]=be,this.uint16[Wn+2]=Le,this.uint16[Wn+3]=je,this.uint32[Qn+2]=Qe,this.uint32[Qn+3]=lt,this.uint32[Qn+4]=kt,this.uint16[Wn+10]=Mt,this.uint16[Wn+11]=Bt,this.uint16[Wn+12]=qt,this.float32[Qn+7]=Vt,this.float32[Qn+8]=nn,this.uint8[nr+36]=xn,this.uint8[nr+37]=zn,this.uint8[nr+38]=In,this.uint32[Qn+10]=Un,this.int16[Wn+22]=Vn,G},O}(oi);qe.prototype.bytesPerElement=48,_r("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);var et=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn,zn,In,Un,Vn,Wn,Qn,nr,xr,pr,Tr,Er,jr,Pr,Nr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn,zn,In,Un,Vn,Wn,Qn,nr,xr,pr,Tr,Er,jr,Pr,Nr)},O.prototype.emplace=function(G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn,zn,In,Un,Vn,Wn,Qn,nr,xr,pr,Tr,Er,jr,Pr,Nr,Ir){var Cr=34*G,Jr=17*G;return this.int16[Cr+0]=ie,this.int16[Cr+1]=be,this.int16[Cr+2]=Le,this.int16[Cr+3]=je,this.int16[Cr+4]=Qe,this.int16[Cr+5]=lt,this.int16[Cr+6]=kt,this.int16[Cr+7]=Mt,this.uint16[Cr+8]=Bt,this.uint16[Cr+9]=qt,this.uint16[Cr+10]=Vt,this.uint16[Cr+11]=nn,this.uint16[Cr+12]=xn,this.uint16[Cr+13]=zn,this.uint16[Cr+14]=In,this.uint16[Cr+15]=Un,this.uint16[Cr+16]=Vn,this.uint16[Cr+17]=Wn,this.uint16[Cr+18]=Qn,this.uint16[Cr+19]=nr,this.uint16[Cr+20]=xr,this.uint16[Cr+21]=pr,this.uint16[Cr+22]=Tr,this.uint32[Jr+12]=Er,this.float32[Jr+13]=jr,this.float32[Jr+14]=Pr,this.float32[Jr+15]=Nr,this.float32[Jr+16]=Ir,G},O}(oi);et.prototype.bytesPerElement=68,_r("StructArrayLayout8i15ui1ul4f68",et);var vt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G){var ie=this.length;return this.resize(ie+1),this.emplace(ie,G)},O.prototype.emplace=function(G,ie){return this.float32[1*G+0]=ie,G},O}(oi);vt.prototype.bytesPerElement=4,_r("StructArrayLayout1f4",vt);var yt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be){var Le=this.length;return this.resize(Le+1),this.emplace(Le,G,ie,be)},O.prototype.emplace=function(G,ie,be,Le){var je=3*G;return this.int16[je+0]=ie,this.int16[je+1]=be,this.int16[je+2]=Le,G},O}(oi);yt.prototype.bytesPerElement=6,_r("StructArrayLayout3i6",yt);var ee=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be){var Le=this.length;return this.resize(Le+1),this.emplace(Le,G,ie,be)},O.prototype.emplace=function(G,ie,be,Le){var Qe=4*G;return this.uint32[2*G+0]=ie,this.uint16[Qe+2]=be,this.uint16[Qe+3]=Le,G},O}(oi);ee.prototype.bytesPerElement=8,_r("StructArrayLayout1ul2ui8",ee);var ue=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie){var be=this.length;return this.resize(be+1),this.emplace(be,G,ie)},O.prototype.emplace=function(G,ie,be){var Le=2*G;return this.uint16[Le+0]=ie,this.uint16[Le+1]=be,G},O}(oi);ue.prototype.bytesPerElement=4,_r("StructArrayLayout2ui4",ue);var Ae=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G){var ie=this.length;return this.resize(ie+1),this.emplace(ie,G)},O.prototype.emplace=function(G,ie){return this.uint16[1*G+0]=ie,G},O}(oi);Ae.prototype.bytesPerElement=2,_r("StructArrayLayout1ui2",Ae);var Oe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie){var be=this.length;return this.resize(be+1),this.emplace(be,G,ie)},O.prototype.emplace=function(G,ie,be){var Le=2*G;return this.float32[Le+0]=ie,this.float32[Le+1]=be,G},O}(oi);Oe.prototype.bytesPerElement=8,_r("StructArrayLayout2f8",Oe);var Fe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ie,be,Le){var je=this.length;return this.resize(je+1),this.emplace(je,G,ie,be,Le)},O.prototype.emplace=function(G,ie,be,Le,je){var Qe=4*G;return this.float32[Qe+0]=ie,this.float32[Qe+1]=be,this.float32[Qe+2]=Le,this.float32[Qe+3]=je,G},O}(oi);Fe.prototype.bytesPerElement=16,_r("StructArrayLayout4f16",Fe);var Ue=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O;var G={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return G.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},G.x1.get=function(){return this._structArray.int16[this._pos2+2]},G.y1.get=function(){return this._structArray.int16[this._pos2+3]},G.x2.get=function(){return this._structArray.int16[this._pos2+4]},G.y2.get=function(){return this._structArray.int16[this._pos2+5]},G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,G),O}(ho);Ue.prototype.size=20;var We=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.get=function(G){return new Ue(this,G)},O}(q);_r("CollisionBoxArray",We);var Je=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},G.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},G.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},G.segment.get=function(){return this._structArray.uint16[this._pos2+10]},G.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},G.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},G.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},G.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},G.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},G.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},G.placedOrientation.set=function(ie){this._structArray.uint8[this._pos1+37]=ie},G.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},G.hidden.set=function(ie){this._structArray.uint8[this._pos1+38]=ie},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},G.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+10]=ie},G.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,G),O}(ho);Je.prototype.size=48;var it=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.get=function(G){return new Je(this,G)},O}(qe);_r("PlacedSymbolArray",it);var ut=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},G.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},G.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},G.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},G.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},G.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},G.key.get=function(){return this._structArray.uint16[this._pos2+8]},G.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},G.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},G.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},G.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},G.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},G.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},G.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},G.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},G.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},G.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},G.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},G.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},G.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},G.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+12]=ie},G.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},G.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},G.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},G.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,G),O}(ho);ut.prototype.size=68;var St=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.get=function(G){return new ut(this,G)},O}(et);_r("SymbolInstanceArray",St);var Dt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.getoffsetX=function(G){return this.float32[1*G+0]},O}(vt);_r("GlyphOffsetArray",Dt);var Ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.getx=function(G){return this.int16[3*G+0]},O.prototype.gety=function(G){return this.int16[3*G+1]},O.prototype.gettileUnitDistanceFromAnchor=function(G){return this.int16[3*G+2]},O}(yt);_r("SymbolLineVertexArray",Ft);var Wt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O;var G={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,G),O}(ho);Wt.prototype.size=8;var cn=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.get=function(G){return new Wt(this,G)},O}(ee);_r("FeatureIndexArray",cn);var Yt=fi([{name:"a_pos",components:2,type:"Int16"}],4).members,en=function(M){void 0===M&&(M=[]),this.segments=M};function Xt(M,O){return 256*(M=a(Math.floor(M),0,255))+a(Math.floor(O),0,255)}en.prototype.prepareSegment=function(M,O,G,ie){var be=this.segments[this.segments.length-1];return M>en.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+en.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!be||be.vertexLength+M>en.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==ie)&&(be={vertexOffset:O.length,primitiveOffset:G.length,vertexLength:0,primitiveLength:0},void 0!==ie&&(be.sortKey=ie),this.segments.push(be)),be},en.prototype.get=function(){return this.segments},en.prototype.destroy=function(){for(var M=0,O=this.segments;M<O.length;M+=1){var G=O[M];for(var ie in G.vaos)G.vaos[ie].destroy()}},en.simpleSegment=function(M,O,G,ie){return new en([{vertexOffset:M,primitiveOffset:O,vertexLength:G,primitiveLength:ie,vaos:{},sortKey:0}])},en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_r("SegmentVector",en);var bn=fi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),gn=T(function(M){M.exports=function(O,G){var ie,be,Le,je,Qe,lt,kt,Mt;for(be=O.length-(ie=3&O.length),Le=G,Qe=3432918353,lt=461845907,Mt=0;Mt<be;)kt=255&O.charCodeAt(Mt)|(255&O.charCodeAt(++Mt))<<8|(255&O.charCodeAt(++Mt))<<16|(255&O.charCodeAt(++Mt))<<24,++Mt,Le=27492+(65535&(je=5*(65535&(Le=(Le^=kt=(65535&(kt=(kt=(65535&kt)*Qe+(((kt>>>16)*Qe&65535)<<16)&4294967295)<<15|kt>>>17))*lt+(((kt>>>16)*lt&65535)<<16)&4294967295)<<13|Le>>>19))+((5*(Le>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(kt=0,ie){case 3:kt^=(255&O.charCodeAt(Mt+2))<<16;case 2:kt^=(255&O.charCodeAt(Mt+1))<<8;case 1:Le^=kt=(65535&(kt=(kt=(65535&(kt^=255&O.charCodeAt(Mt)))*Qe+(((kt>>>16)*Qe&65535)<<16)&4294967295)<<15|kt>>>17))*lt+(((kt>>>16)*lt&65535)<<16)&4294967295}return Le^=O.length,Le=2246822507*(65535&(Le^=Le>>>16))+((2246822507*(Le>>>16)&65535)<<16)&4294967295,Le=3266489909*(65535&(Le^=Le>>>13))+((3266489909*(Le>>>16)&65535)<<16)&4294967295,(Le^=Le>>>16)>>>0}}),$t=T(function(M){M.exports=function(O,G){for(var ie,be=O.length,Le=G^be,je=0;be>=4;)ie=1540483477*(65535&(ie=255&O.charCodeAt(je)|(255&O.charCodeAt(++je))<<8|(255&O.charCodeAt(++je))<<16|(255&O.charCodeAt(++je))<<24))+((1540483477*(ie>>>16)&65535)<<16),Le=1540483477*(65535&Le)+((1540483477*(Le>>>16)&65535)<<16)^(ie=1540483477*(65535&(ie^=ie>>>24))+((1540483477*(ie>>>16)&65535)<<16)),be-=4,++je;switch(be){case 3:Le^=(255&O.charCodeAt(je+2))<<16;case 2:Le^=(255&O.charCodeAt(je+1))<<8;case 1:Le=1540483477*(65535&(Le^=255&O.charCodeAt(je)))+((1540483477*(Le>>>16)&65535)<<16)}return Le=1540483477*(65535&(Le^=Le>>>13))+((1540483477*(Le>>>16)&65535)<<16),(Le^=Le>>>15)>>>0}}),On=gn,Yn=$t;On.murmur3=gn,On.murmur2=Yn;var Xn=function(){this.ids=[],this.positions=[],this.indexed=!1};Xn.prototype.add=function(M,O,G,ie){this.ids.push(vr(M)),this.positions.push(O,G,ie)},Xn.prototype.getPositions=function(M){for(var O=vr(M),G=0,ie=this.ids.length-1;G<ie;){var be=G+ie>>1;this.ids[be]>=O?ie=be:G=be+1}for(var Le=[];this.ids[G]===O;)Le.push({index:this.positions[3*G],start:this.positions[3*G+1],end:this.positions[3*G+2]}),G++;return Le},Xn.serialize=function(M,O){var G=new Float64Array(M.ids),ie=new Uint32Array(M.positions);return ur(G,ie,0,G.length-1),O&&O.push(G.buffer,ie.buffer),{ids:G,positions:ie}},Xn.deserialize=function(M){var O=new Xn;return O.ids=M.ids,O.positions=M.positions,O.indexed=!0,O};var gr=Math.pow(2,53)-1;function vr(M){var O=+M;return!isNaN(O)&&O<=gr?O:On(String(M))}function ur(M,O,G,ie){for(;G<ie;){for(var be=M[G+ie>>1],Le=G-1,je=ie+1;;){do{Le++}while(M[Le]<be);do{je--}while(M[je]>be);if(Le>=je)break;dr(M,Le,je),dr(O,3*Le,3*je),dr(O,3*Le+1,3*je+1),dr(O,3*Le+2,3*je+2)}je-G<ie-je?(ur(M,O,G,je),G=je+1):(ur(M,O,je+1,ie),ie=je)}}function dr(M,O,G){var ie=M[O];M[O]=M[G],M[G]=ie}_r("FeaturePositionMap",Xn);var kr=function(M,O){this.gl=M.gl,this.location=O},Vr=function(M){function O(G,ie){M.call(this,G,ie),this.current=0}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){this.current!==G&&(this.current=G,this.gl.uniform1i(this.location,G))},O}(kr),Hr=function(M){function O(G,ie){M.call(this,G,ie),this.current=0}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){this.current!==G&&(this.current=G,this.gl.uniform1f(this.location,G))},O}(kr),hr=function(M){function O(G,ie){M.call(this,G,ie),this.current=[0,0]}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]||(this.current=G,this.gl.uniform2f(this.location,G[0],G[1]))},O}(kr),Ar=function(M){function O(G,ie){M.call(this,G,ie),this.current=[0,0,0]}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]&&G[2]===this.current[2]||(this.current=G,this.gl.uniform3f(this.location,G[0],G[1],G[2]))},O}(kr),Dr=function(M){function O(G,ie){M.call(this,G,ie),this.current=[0,0,0,0]}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]&&G[2]===this.current[2]&&G[3]===this.current[3]||(this.current=G,this.gl.uniform4f(this.location,G[0],G[1],G[2],G[3]))},O}(kr),Rr=function(M){function O(G,ie){M.call(this,G,ie),this.current=dn.transparent}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){G.r===this.current.r&&G.g===this.current.g&&G.b===this.current.b&&G.a===this.current.a||(this.current=G,this.gl.uniform4f(this.location,G.r,G.g,G.b,G.a))},O}(kr),Wr=new Float32Array(16),Zr=function(M){function O(G,ie){M.call(this,G,ie),this.current=Wr}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.set=function(G){if(G[12]!==this.current[12]||G[0]!==this.current[0])return this.current=G,void this.gl.uniformMatrix4fv(this.location,!1,G);for(var ie=1;ie<16;ie++)if(G[ie]!==this.current[ie]){this.current=G,this.gl.uniformMatrix4fv(this.location,!1,G);break}},O}(kr);function $r(M){return[Xt(255*M.r,255*M.g),Xt(255*M.b,255*M.a)]}var ui=function(M,O,G){this.value=M,this.uniformNames=O.map(function(ie){return"u_"+ie}),this.type=G};ui.prototype.setUniform=function(M,O,G){M.set(G.constantOr(this.value))},ui.prototype.getBinding=function(M,O,G){return"color"===this.type?new Rr(M,O):new Hr(M,O)};var yi=function(M,O){this.uniformNames=O.map(function(G){return"u_"+G}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};yi.prototype.setConstantPatternPositions=function(M,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=M.tlbr},yi.prototype.setUniform=function(M,O,G,ie){var be="u_pattern_to"===ie?this.patternTo:"u_pattern_from"===ie?this.patternFrom:"u_pixel_ratio_to"===ie?this.pixelRatioTo:"u_pixel_ratio_from"===ie?this.pixelRatioFrom:null;be&&M.set(be)},yi.prototype.getBinding=function(M,O,G){return"u_pattern"===G.substr(0,9)?new Dr(M,O):new Hr(M,O)};var hi=function(M,O,G,ie){this.expression=M,this.type=G,this.maxValue=0,this.paintVertexAttributes=O.map(function(be){return{name:"a_"+be,type:"Float32",components:"color"===G?2:1,offset:0}}),this.paintVertexArray=new ie};hi.prototype.populatePaintArray=function(M,O,G,ie,be){var Le=this.paintVertexArray.length,je=this.expression.evaluate(new ni(0),O,{},ie,[],be);this.paintVertexArray.resize(M),this._setPaintValue(Le,M,je)},hi.prototype.updatePaintArray=function(M,O,G,ie){var be=this.expression.evaluate({zoom:0},G,ie);this._setPaintValue(M,O,be)},hi.prototype._setPaintValue=function(M,O,G){if("color"===this.type)for(var ie=$r(G),be=M;be<O;be++)this.paintVertexArray.emplace(be,ie[0],ie[1]);else{for(var Le=M;Le<O;Le++)this.paintVertexArray.emplace(Le,G);this.maxValue=Math.max(this.maxValue,Math.abs(G))}},hi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var si=function(M,O,G,ie,be,Le){this.expression=M,this.uniformNames=O.map(function(je){return"u_"+je+"_t"}),this.type=G,this.useIntegerZoom=ie,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=O.map(function(je){return{name:"a_"+je,type:"Float32",components:"color"===G?4:2,offset:0}}),this.paintVertexArray=new Le};si.prototype.populatePaintArray=function(M,O,G,ie,be){var Le=this.expression.evaluate(new ni(this.zoom),O,{},ie,[],be),je=this.expression.evaluate(new ni(this.zoom+1),O,{},ie,[],be),Qe=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Qe,M,Le,je)},si.prototype.updatePaintArray=function(M,O,G,ie){var be=this.expression.evaluate({zoom:this.zoom},G,ie),Le=this.expression.evaluate({zoom:this.zoom+1},G,ie);this._setPaintValue(M,O,be,Le)},si.prototype._setPaintValue=function(M,O,G,ie){if("color"===this.type)for(var be=$r(G),Le=$r(ie),je=M;je<O;je++)this.paintVertexArray.emplace(je,be[0],be[1],Le[0],Le[1]);else{for(var Qe=M;Qe<O;Qe++)this.paintVertexArray.emplace(Qe,G,ie);this.maxValue=Math.max(this.maxValue,Math.abs(G),Math.abs(ie))}},si.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},si.prototype.setUniform=function(M,O){var G=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ie=a(this.expression.interpolationFactor(G,this.zoom,this.zoom+1),0,1);M.set(ie)},si.prototype.getBinding=function(M,O,G){return new Hr(M,O)};var ci=function(M,O,G,ie,be,Le){this.expression=M,this.type=O,this.useIntegerZoom=G,this.zoom=ie,this.layerId=Le,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};ci.prototype.populatePaintArray=function(M,O,G){var ie=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(ie,M,O.patterns&&O.patterns[this.layerId],G)},ci.prototype.updatePaintArray=function(M,O,G,ie,be){this._setPaintValues(M,O,G.patterns&&G.patterns[this.layerId],be)},ci.prototype._setPaintValues=function(M,O,G,ie){if(ie&&G){var Qe=ie[G.min],lt=ie[G.mid],kt=ie[G.max];if(Qe&&lt&&kt)for(var Mt=M;Mt<O;Mt++)this.zoomInPaintVertexArray.emplace(Mt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],lt.pixelRatio,Qe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Mt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],kt.tl[0],kt.tl[1],kt.br[0],kt.br[1],lt.pixelRatio,kt.pixelRatio)}},ci.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,bn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,bn.members,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var pi=function(M,O,G,ie){this.binders={},this.layoutAttributes=ie,this._buffers=[];var be=[];for(var Le in M.paint._values)if(G(Le)){var je=M.paint.get(Le);if(je instanceof Ki&&Yo(je.property.specification)){var Qe=Mo(Le,M.type),lt=je.value,kt=je.property.specification.type,Mt=je.property.useIntegerZoom,Bt=je.property.specification["property-type"],qt="cross-faded"===Bt||"cross-faded-data-driven"===Bt;if("constant"===lt.kind)this.binders[Le]=qt?new yi(lt.value,Qe):new ui(lt.value,Qe,kt),be.push("/u_"+Le);else if("source"===lt.kind||qt){var Vt=Fi(Le,kt,"source");this.binders[Le]=qt?new ci(lt,kt,Mt,O,Vt,M.id):new hi(lt,Qe,kt,Vt),be.push("/a_"+Le)}else{var nn=Fi(Le,kt,"composite");this.binders[Le]=new si(lt,Qe,kt,Mt,O,nn),be.push("/z_"+Le)}}}this.cacheKey=be.sort().join("")};pi.prototype.getMaxValue=function(M){var O=this.binders[M];return O instanceof hi||O instanceof si?O.maxValue:0},pi.prototype.populatePaintArrays=function(M,O,G,ie,be){for(var Le in this.binders){var je=this.binders[Le];(je instanceof hi||je instanceof si||je instanceof ci)&&je.populatePaintArray(M,O,G,ie,be)}},pi.prototype.setConstantPatternPositions=function(M,O){for(var G in this.binders){var ie=this.binders[G];ie instanceof yi&&ie.setConstantPatternPositions(M,O)}},pi.prototype.updatePaintArrays=function(M,O,G,ie,be){var Le=!1;for(var je in M)for(var Qe=0,lt=O.getPositions(je);Qe<lt.length;Qe+=1){var kt=lt[Qe],Mt=G.feature(kt.index);for(var Bt in this.binders){var qt=this.binders[Bt];if((qt instanceof hi||qt instanceof si||qt instanceof ci)&&!0===qt.expression.isStateDependent){var Vt=ie.paint.get(Bt);qt.expression=Vt.value,qt.updatePaintArray(kt.start,kt.end,Mt,M[je],be),Le=!0}}}return Le},pi.prototype.defines=function(){var M=[];for(var O in this.binders){var G=this.binders[O];(G instanceof ui||G instanceof yi)&&M.push.apply(M,G.uniformNames.map(function(ie){return"#define HAS_UNIFORM_"+ie}))}return M},pi.prototype.getPaintVertexBuffers=function(){return this._buffers},pi.prototype.getUniforms=function(M,O){var G=[];for(var ie in this.binders){var be=this.binders[ie];if(be instanceof ui||be instanceof yi||be instanceof si)for(var Le=0,je=be.uniformNames;Le<je.length;Le+=1){var Qe=je[Le];if(O[Qe]){var lt=be.getBinding(M,O[Qe],Qe);G.push({name:Qe,property:ie,binding:lt})}}}return G},pi.prototype.setUniforms=function(M,O,G,ie){for(var be=0,Le=O;be<Le.length;be+=1){var je=Le[be],Qe=je.name,lt=je.property;this.binders[lt].setUniform(je.binding,ie,G.get(lt),Qe)}},pi.prototype.updatePaintBuffers=function(M){for(var O in this._buffers=[],this.binders){var G=this.binders[O];if(M&&G instanceof ci){var ie=2===M.fromScale?G.zoomInPaintVertexBuffer:G.zoomOutPaintVertexBuffer;ie&&this._buffers.push(ie)}else(G instanceof hi||G instanceof si)&&G.paintVertexBuffer&&this._buffers.push(G.paintVertexBuffer)}},pi.prototype.upload=function(M){for(var O in this.binders){var G=this.binders[O];(G instanceof hi||G instanceof si||G instanceof ci)&&G.upload(M)}this.updatePaintBuffers()},pi.prototype.destroy=function(){for(var M in this.binders){var O=this.binders[M];(O instanceof hi||O instanceof si||O instanceof ci)&&O.destroy()}};var Si=function(M,O,G,ie){void 0===ie&&(ie=function(){return!0}),this.programConfigurations={};for(var be=0,Le=O;be<Le.length;be+=1){var je=Le[be];this.programConfigurations[je.id]=new pi(je,G,ie,M)}this.needsUpload=!1,this._featureMap=new Xn,this._bufferOffset=0};function Mo(M,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(O+"-","").replace(/-/g,"_")]}function Fi(M,O,G){var be={"line-pattern":{source:xt,composite:xt},"fill-pattern":{source:xt,composite:xt},"fill-extrusion-pattern":{source:xt,composite:xt}}[M];return be&&be[G]||{color:{source:Oe,composite:Fe},number:{source:vt,composite:Oe}}[O][G]}Si.prototype.populatePaintArrays=function(M,O,G,ie,be,Le){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(M,O,ie,be,Le);void 0!==O.id&&this._featureMap.add(O.id,G,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},Si.prototype.updatePaintArrays=function(M,O,G,ie){for(var be=0,Le=G;be<Le.length;be+=1){var je=Le[be];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(M,this._featureMap,O,je,ie)||this.needsUpload}},Si.prototype.get=function(M){return this.programConfigurations[M]},Si.prototype.upload=function(M){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(M);this.needsUpload=!1}},Si.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},_r("ConstantBinder",ui),_r("CrossFadedConstantBinder",yi),_r("SourceExpressionBinder",hi),_r("CrossFadedCompositeBinder",ci),_r("CompositeExpressionBinder",si),_r("ProgramConfiguration",pi,{omit:["_buffers"]}),_r("ProgramConfigurationSet",Si);var Br=8192,Qi={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function ki(M){for(var O=Br/M.extent,G=M.loadGeometry(),ie=0;ie<G.length;ie++)for(var be=G[ie],Le=0;Le<be.length;Le++){var je=be[Le];je.x=Math.round(je.x*O),je.y=Math.round(je.y*O),(je.x<Qi.min||je.x>Qi.max||je.y<Qi.min||je.y>Qi.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),je.x=a(je.x,Qi.min,Qi.max),je.y=a(je.y,Qi.min,Qi.max))}return G}function Ga(M,O,G,ie,be){M.emplaceBack(2*O+(ie+1)/2,2*G+(be+1)/2)}var Yr=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new Ne,this.segments=new en,this.programConfigurations=new Si(Yt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Bi(M,O){for(var G=0;G<M.length;G++)if(cl(O,M[G]))return!0;for(var ie=0;ie<O.length;ie++)if(cl(M,O[ie]))return!0;return!!Jl(M,O)}function ha(M,O,G){return!!cl(M,O)||!!ul(O,M,G)}function Ds(M,O){if(1===M.length)return xl(O,M[0]);for(var G=0;G<O.length;G++)for(var ie=O[G],be=0;be<ie.length;be++)if(cl(M,ie[be]))return!0;for(var Le=0;Le<M.length;Le++)if(xl(O,M[Le]))return!0;for(var je=0;je<O.length;je++)if(Jl(M,O[je]))return!0;return!1}function sc(M,O,G){if(M.length>1){if(Jl(M,O))return!0;for(var ie=0;ie<O.length;ie++)if(ul(O[ie],M,G))return!0}for(var be=0;be<M.length;be++)if(ul(M[be],O,G))return!0;return!1}function Jl(M,O){if(0===M.length||0===O.length)return!1;for(var G=0;G<M.length-1;G++)for(var ie=M[G],be=M[G+1],Le=0;Le<O.length-1;Le++)if(lc(ie,be,O[Le],O[Le+1]))return!0;return!1}function lc(M,O,G,ie){return _(M,G,ie)!==_(O,G,ie)&&_(M,O,G)!==_(M,O,ie)}function ul(M,O,G){var ie=G*G;if(1===O.length)return M.distSqr(O[0])<ie;for(var be=1;be<O.length;be++)if(_u(M,O[be-1],O[be])<ie)return!0;return!1}function _u(M,O,G){var ie=O.distSqr(G);if(0===ie)return M.distSqr(O);var be=((M.x-O.x)*(G.x-O.x)+(M.y-O.y)*(G.y-O.y))/ie;return M.distSqr(be<0?O:be>1?G:G.sub(O)._mult(be)._add(O))}function xl(M,O){for(var G,ie,be,Le=!1,je=0;je<M.length;je++)for(var Qe=0,lt=(G=M[je]).length-1;Qe<G.length;lt=Qe++)(ie=G[Qe]).y>O.y!=(be=G[lt]).y>O.y&&O.x<(be.x-ie.x)*(O.y-ie.y)/(be.y-ie.y)+ie.x&&(Le=!Le);return Le}function cl(M,O){for(var G=!1,ie=0,be=M.length-1;ie<M.length;be=ie++){var Le=M[ie],je=M[be];Le.y>O.y!=je.y>O.y&&O.x<(je.x-Le.x)*(O.y-Le.y)/(je.y-Le.y)+Le.x&&(G=!G)}return G}function uc(M,O,G){var ie=G[0],be=G[2];if(M.x<ie.x&&O.x<ie.x||M.x>be.x&&O.x>be.x||M.y<ie.y&&O.y<ie.y||M.y>be.y&&O.y>be.y)return!1;var Le=_(M,O,G[0]);return Le!==_(M,O,G[1])||Le!==_(M,O,G[2])||Le!==_(M,O,G[3])}function $s(M,O,G){var ie=O.paint.get(M).value;return"constant"===ie.kind?ie.value:G.programConfigurations.get(O.id).getMaxValue(M)}function wu(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Tu(M,O,G,ie,be){if(!O[0]&&!O[1])return M;var Le=t.convert(O)._mult(be);"viewport"===G&&Le._rotate(-ie);for(var je=[],Qe=0;Qe<M.length;Qe++)je.push(M[Qe].sub(Le));return je}Yr.prototype.populate=function(M,O,G){var ie=this.layers[0],be=[],Le=null;"circle"===ie.type&&(Le=ie.layout.get("circle-sort-key"));for(var je=0,Qe=M;je<Qe.length;je+=1){var lt=Qe[je],kt=lt.feature,Mt=lt.id,Bt=lt.index,qt=lt.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,nn={type:kt.type,id:Mt,properties:kt.properties,geometry:Vt?ki(kt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),nn,G)){Vt||(nn.geometry=ki(kt));var xn=Le?Le.evaluate(nn,{},G):void 0;be.push({id:Mt,properties:kt.properties,type:kt.type,sourceLayerIndex:qt,index:Bt,geometry:nn.geometry,patterns:{},sortKey:xn})}}Le&&be.sort(function(Tr,Er){return Tr.sortKey-Er.sortKey});for(var In=0,Un=be;In<Un.length;In+=1){var Vn=Un[In],Qn=Vn.geometry,nr=Vn.index,xr=Vn.sourceLayerIndex,pr=M[nr].feature;this.addFeature(Vn,Qn,nr,G),O.featureIndex.insert(pr,Qn,nr,xr,this.index)}},Yr.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},Yr.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Yr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yr.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Yt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Yr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yr.prototype.addFeature=function(M,O,G,ie){for(var be=0,Le=O;be<Le.length;be+=1)for(var je=0,Qe=Le[be];je<Qe.length;je+=1){var lt=Qe[je],kt=lt.x,Mt=lt.y;if(!(kt<0||kt>=Br||Mt<0||Mt>=Br)){var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),qt=Bt.vertexLength;Ga(this.layoutVertexArray,kt,Mt,-1,-1),Ga(this.layoutVertexArray,kt,Mt,1,-1),Ga(this.layoutVertexArray,kt,Mt,1,1),Ga(this.layoutVertexArray,kt,Mt,-1,1),this.indexArray.emplaceBack(qt,qt+1,qt+2),this.indexArray.emplaceBack(qt,qt+3,qt+2),Bt.vertexLength+=4,Bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,{},ie)},_r("CircleBucket",Yr,{omit:["layers"]});var Lh=new $i({"circle-sort-key":new Or(Se.layout_circle["circle-sort-key"])}),Ch={paint:new $i({"circle-radius":new Or(Se.paint_circle["circle-radius"]),"circle-color":new Or(Se.paint_circle["circle-color"]),"circle-blur":new Or(Se.paint_circle["circle-blur"]),"circle-opacity":new Or(Se.paint_circle["circle-opacity"]),"circle-translate":new Mr(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new Mr(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mr(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mr(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(Se.paint_circle["circle-stroke-opacity"])}),layout:Lh},So=typeof Float32Array<"u"?Float32Array:Array;function cc(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Yc(M,O,G){var ie=O[0],be=O[1],Le=O[2],je=O[3],Qe=O[4],lt=O[5],kt=O[6],Mt=O[7],Bt=O[8],qt=O[9],Vt=O[10],nn=O[11],xn=O[12],zn=O[13],In=O[14],Un=O[15],Vn=G[0],Wn=G[1],Qn=G[2],nr=G[3];return M[0]=Vn*ie+Wn*Qe+Qn*Bt+nr*xn,M[1]=Vn*be+Wn*lt+Qn*qt+nr*zn,M[2]=Vn*Le+Wn*kt+Qn*Vt+nr*In,M[3]=Vn*je+Wn*Mt+Qn*nn+nr*Un,M[4]=(Vn=G[4])*ie+(Wn=G[5])*Qe+(Qn=G[6])*Bt+(nr=G[7])*xn,M[5]=Vn*be+Wn*lt+Qn*qt+nr*zn,M[6]=Vn*Le+Wn*kt+Qn*Vt+nr*In,M[7]=Vn*je+Wn*Mt+Qn*nn+nr*Un,M[8]=(Vn=G[8])*ie+(Wn=G[9])*Qe+(Qn=G[10])*Bt+(nr=G[11])*xn,M[9]=Vn*be+Wn*lt+Qn*qt+nr*zn,M[10]=Vn*Le+Wn*kt+Qn*Vt+nr*In,M[11]=Vn*je+Wn*Mt+Qn*nn+nr*Un,M[12]=(Vn=G[12])*ie+(Wn=G[13])*Qe+(Qn=G[14])*Bt+(nr=G[15])*xn,M[13]=Vn*be+Wn*lt+Qn*qt+nr*zn,M[14]=Vn*Le+Wn*kt+Qn*Vt+nr*In,M[15]=Vn*je+Wn*Mt+Qn*nn+nr*Un,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,O=0,G=arguments.length;G--;)O+=M[G]*M[G];return Math.sqrt(O)});var ku,M,Ph=Yc;function Au(M,O,G){var ie=O[0],be=O[1],Le=O[2],je=O[3];return M[0]=G[0]*ie+G[4]*be+G[8]*Le+G[12]*je,M[1]=G[1]*ie+G[5]*be+G[9]*Le+G[13]*je,M[2]=G[2]*ie+G[6]*be+G[10]*Le+G[14]*je,M[3]=G[3]*ie+G[7]*be+G[11]*Le+G[15]*je,M}ku=new So(3),So!=Float32Array&&(ku[0]=0,ku[1]=0,ku[2]=0),M=new So(4),So!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0);var zh=(function(){var M=new So(2);So!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function O(G){M.call(this,G,Ch)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.createBucket=function(G){return new Yr(G)},O.prototype.queryRadius=function(G){var ie=G;return $s("circle-radius",this,ie)+$s("circle-stroke-width",this,ie)+wu(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(G,ie,be,Le,je,Qe,lt,kt){for(var Mt=Tu(G,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Qe.angle,lt),Bt=this.paint.get("circle-radius").evaluate(ie,be)+this.paint.get("circle-stroke-width").evaluate(ie,be),qt="map"===this.paint.get("circle-pitch-alignment"),Vt=qt?Mt:function(xr,pr){return xr.map(function(Tr){return Xc(Tr,pr)})}(Mt,kt),nn=qt?Bt*lt:Bt,xn=0,zn=Le;xn<zn.length;xn+=1)for(var In=0,Un=zn[xn];In<Un.length;In+=1){var Vn=Un[In],Wn=qt?Vn:Xc(Vn,kt),Qn=nn,nr=Au([],[Vn.x,Vn.y,0,1],kt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Qn*=nr[3]/Qe.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Qn*=Qe.cameraToCenterDistance/nr[3]),ha(Vt,Wn,Qn))return!0}return!1},O}(fa));function Xc(M,O){var G=Au([],[M.x,M.y,0,1],O);return new t(G[0]/G[3],G[1]/G[3])}var Jc=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O}(Yr);function fc(M,O,G,ie){var be=O.width,Le=O.height;if(ie){if(ie instanceof Uint8ClampedArray)ie=new Uint8Array(ie.buffer);else if(ie.length!==be*Le*G)throw new RangeError("mismatched image size")}else ie=new Uint8Array(be*Le*G);return M.width=be,M.height=Le,M.data=ie,M}function Kc(M,O,G){var ie=O.width,be=O.height;if(ie!==M.width||be!==M.height){var Le=fc({},{width:ie,height:be},G);hc(M,Le,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,ie),height:Math.min(M.height,be)},G),M.width=ie,M.height=be,M.data=Le.data}}function hc(M,O,G,ie,be,Le){if(0===be.width||0===be.height)return O;if(be.width>M.width||be.height>M.height||G.x>M.width-be.width||G.y>M.height-be.height)throw new RangeError("out of range source coordinates for image copy");if(be.width>O.width||be.height>O.height||ie.x>O.width-be.width||ie.y>O.height-be.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=M.data,Qe=O.data,lt=0;lt<be.height;lt++)for(var kt=((G.y+lt)*M.width+G.x)*Le,Mt=((ie.y+lt)*O.width+ie.x)*Le,Bt=0;Bt<be.width*Le;Bt++)Qe[Mt+Bt]=je[kt+Bt];return O}_r("HeatmapBucket",Jc,{omit:["layers"]});var bl=function(M,O){fc(this,M,1,O)};bl.prototype.resize=function(M){Kc(this,M,1)},bl.prototype.clone=function(){return new bl({width:this.width,height:this.height},new Uint8Array(this.data))},bl.copy=function(M,O,G,ie,be){hc(M,O,G,ie,be,1)};var Qa=function(M,O){fc(this,M,4,O)};Qa.prototype.resize=function(M){Kc(this,M,4)},Qa.prototype.replace=function(M,O){O?this.data.set(M):this.data=M instanceof Uint8ClampedArray?new Uint8Array(M.buffer):M},Qa.prototype.clone=function(){return new Qa({width:this.width,height:this.height},new Uint8Array(this.data))},Qa.copy=function(M,O,G,ie,be){hc(M,O,G,ie,be,4)},_r("AlphaImage",bl),_r("RGBAImage",Qa);var Rh={paint:new $i({"heatmap-radius":new Or(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mr(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qa(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mr(Se.paint_heatmap["heatmap-opacity"])})};function $c(M,O){for(var G=new Uint8Array(1024),ie={},be=0,Le=0;be<256;be++,Le+=4){ie[O]=be/255;var je=M.evaluate(ie);G[Le+0]=Math.floor(255*je.r/je.a),G[Le+1]=Math.floor(255*je.g/je.a),G[Le+2]=Math.floor(255*je.b/je.a),G[Le+3]=Math.floor(255*je.a)}return new Qa({width:256,height:1},G)}var Dh=function(M){function O(G){M.call(this,G,Rh),this._updateColorRamp()}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.createBucket=function(G){return new Jc(G)},O.prototype._handleSpecialPaintPropertyUpdate=function(G){"heatmap-color"===G&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){this.colorRamp=$c(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},O}(fa),Fh={paint:new $i({"hillshade-illumination-direction":new Mr(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mr(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mr(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mr(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mr(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mr(Se.paint_hillshade["hillshade-accent-color"])})},Bh=function(M){function O(G){M.call(this,G,Fh)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},O}(fa),Qc=fi([{name:"a_pos",components:2,type:"Int16"}],4).members,pc=Mu,Nh=Mu;function Mu(M,O,G){G=G||2;var ie,be,Le,je,Qe,lt,kt,Mt=O&&O.length,Bt=Mt?O[0]*G:M.length,qt=ef(M,0,Bt,G,!0),Vt=[];if(!qt||qt.next===qt.prev)return Vt;if(Mt&&(qt=function(xn,zn,In,Un){var Vn,Wn,Qn,nr=[];for(Vn=0,Wn=zn.length;Vn<Wn;Vn++)(Qn=ef(xn,zn[Vn]*Un,Vn<Wn-1?zn[Vn+1]*Un:xn.length,Un,!1))===Qn.next&&(Qn.steiner=!0),nr.push(Wh(Qn));for(nr.sort(qh),Vn=0;Vn<nr.length;Vn++)Gh(nr[Vn],In),In=fl(In,In.next);return In}(M,O,qt,G)),M.length>80*G){ie=Le=M[0],be=je=M[1];for(var nn=G;nn<Bt;nn+=G)(Qe=M[nn])<ie&&(ie=Qe),(lt=M[nn+1])<be&&(be=lt),Qe>Le&&(Le=Qe),lt>je&&(je=lt);kt=0!==(kt=Math.max(Le-ie,je-be))?1/kt:0}return Kl(qt,Vt,G,ie,be,kt),Vt}function ef(M,O,G,ie,be){var Le,je;if(be===vc(M,O,G,ie)>0)for(Le=O;Le<G;Le+=ie)je=rf(Le,M[Le],M[Le+1],je);else for(Le=G-ie;Le>=O;Le-=ie)je=rf(Le,M[Le],M[Le+1],je);return je&&Su(je,je.next)&&(Ql(je),je=je.next),je}function fl(M,O){if(!M)return M;O||(O=M);var G,ie=M;do{if(G=!1,ie.steiner||!Su(ie,ie.next)&&0!==ea(ie.prev,ie,ie.next))ie=ie.next;else{if(Ql(ie),(ie=O=ie.prev)===ie.next)break;G=!0}}while(G||ie!==O);return O}function Kl(M,O,G,ie,be,Le,je){if(M){!je&&Le&&function(Mt,Bt,qt,Vt){var nn=Mt;do{null===nn.z&&(nn.z=dc(nn.x,nn.y,Bt,qt,Vt)),nn.prevZ=nn.prev,nn.nextZ=nn.next,nn=nn.next}while(nn!==Mt);nn.prevZ.nextZ=null,nn.prevZ=null,function(xn){var zn,In,Un,Vn,Wn,Qn,nr,xr,pr=1;do{for(In=xn,xn=null,Wn=null,Qn=0;In;){for(Qn++,Un=In,nr=0,zn=0;zn<pr&&(nr++,Un=Un.nextZ);zn++);for(xr=pr;nr>0||xr>0&&Un;)0!==nr&&(0===xr||!Un||In.z<=Un.z)?(Vn=In,In=In.nextZ,nr--):(Vn=Un,Un=Un.nextZ,xr--),Wn?Wn.nextZ=Vn:xn=Vn,Vn.prevZ=Wn,Wn=Vn;In=Un}Wn.nextZ=null,pr*=2}while(Qn>1)}(nn)}(M,ie,be,Le);for(var Qe,lt,kt=M;M.prev!==M.next;)if(Qe=M.prev,lt=M.next,Le?Uh(M,ie,be,Le):jh(M))O.push(Qe.i/G),O.push(M.i/G),O.push(lt.i/G),Ql(M),M=lt.next,kt=lt.next;else if((M=lt)===kt){je?1===je?Kl(M=Vh(fl(M),O,G),O,G,ie,be,Le,2):2===je&&Hh(M,O,G,ie,be,Le):Kl(fl(M),O,G,ie,be,Le,1);break}}}function jh(M){var O=M.prev,G=M,ie=M.next;if(ea(O,G,ie)>=0)return!1;for(var be=M.next.next;be!==M.prev;){if(Cl(O.x,O.y,G.x,G.y,ie.x,ie.y,be.x,be.y)&&ea(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function Uh(M,O,G,ie){var be=M.prev,Le=M,je=M.next;if(ea(be,Le,je)>=0)return!1;for(var kt=be.x>Le.x?be.x>je.x?be.x:je.x:Le.x>je.x?Le.x:je.x,Mt=be.y>Le.y?be.y>je.y?be.y:je.y:Le.y>je.y?Le.y:je.y,Bt=dc(be.x<Le.x?be.x<je.x?be.x:je.x:Le.x<je.x?Le.x:je.x,be.y<Le.y?be.y<je.y?be.y:je.y:Le.y<je.y?Le.y:je.y,O,G,ie),qt=dc(kt,Mt,O,G,ie),Vt=M.prevZ,nn=M.nextZ;Vt&&Vt.z>=Bt&&nn&&nn.z<=qt;){if(Vt!==M.prev&&Vt!==M.next&&Cl(be.x,be.y,Le.x,Le.y,je.x,je.y,Vt.x,Vt.y)&&ea(Vt.prev,Vt,Vt.next)>=0||(Vt=Vt.prevZ,nn!==M.prev&&nn!==M.next&&Cl(be.x,be.y,Le.x,Le.y,je.x,je.y,nn.x,nn.y)&&ea(nn.prev,nn,nn.next)>=0))return!1;nn=nn.nextZ}for(;Vt&&Vt.z>=Bt;){if(Vt!==M.prev&&Vt!==M.next&&Cl(be.x,be.y,Le.x,Le.y,je.x,je.y,Vt.x,Vt.y)&&ea(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.prevZ}for(;nn&&nn.z<=qt;){if(nn!==M.prev&&nn!==M.next&&Cl(be.x,be.y,Le.x,Le.y,je.x,je.y,nn.x,nn.y)&&ea(nn.prev,nn,nn.next)>=0)return!1;nn=nn.nextZ}return!0}function Vh(M,O,G){var ie=M;do{var be=ie.prev,Le=ie.next.next;!Su(be,Le)&&tf(be,ie,ie.next,Le)&&$l(be,Le)&&$l(Le,be)&&(O.push(be.i/G),O.push(ie.i/G),O.push(Le.i/G),Ql(ie),Ql(ie.next),ie=M=Le),ie=ie.next}while(ie!==M);return fl(ie)}function Hh(M,O,G,ie,be,Le){var je=M;do{for(var Qe=je.next.next;Qe!==je.prev;){if(je.i!==Qe.i&&Yh(je,Qe)){var lt=nf(je,Qe);return je=fl(je,je.next),lt=fl(lt,lt.next),Kl(je,O,G,ie,be,Le),void Kl(lt,O,G,ie,be,Le)}Qe=Qe.next}je=je.next}while(je!==M)}function qh(M,O){return M.x-O.x}function Gh(M,O){if(O=function(ie,be){var Le,je=be,Qe=ie.x,lt=ie.y,kt=-1/0;do{if(lt<=je.y&&lt>=je.next.y&&je.next.y!==je.y){var Mt=je.x+(lt-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Mt<=Qe&&Mt>kt){if(kt=Mt,Mt===Qe){if(lt===je.y)return je;if(lt===je.next.y)return je.next}Le=je.x<je.next.x?je:je.next}}je=je.next}while(je!==be);if(!Le)return null;if(Qe===kt)return Le;var Bt,qt=Le,Vt=Le.x,nn=Le.y,xn=1/0;je=Le;do{Qe>=je.x&&je.x>=Vt&&Qe!==je.x&&Cl(lt<nn?Qe:kt,lt,Vt,nn,lt<nn?kt:Qe,lt,je.x,je.y)&&(Bt=Math.abs(lt-je.y)/(Qe-je.x),$l(je,ie)&&(Bt<xn||Bt===xn&&(je.x>Le.x||je.x===Le.x&&Zh(Le,je)))&&(Le=je,xn=Bt)),je=je.next}while(je!==qt);return Le}(M,O)){var G=nf(O,M);fl(O,O.next),fl(G,G.next)}}function Zh(M,O){return ea(M.prev,M,O.prev)<0&&ea(O.next,M,M.next)<0}function dc(M,O,G,ie,be){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-G)*be)|M<<8))|M<<4))|M<<2))|M<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ie)*be)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function Wh(M){var O=M,G=M;do{(O.x<G.x||O.x===G.x&&O.y<G.y)&&(G=O),O=O.next}while(O!==M);return G}function Cl(M,O,G,ie,be,Le,je,Qe){return(be-je)*(O-Qe)-(M-je)*(Le-Qe)>=0&&(M-je)*(ie-Qe)-(G-je)*(O-Qe)>=0&&(G-je)*(Le-Qe)-(be-je)*(ie-Qe)>=0}function Yh(M,O){return M.next.i!==O.i&&M.prev.i!==O.i&&!function(G,ie){var be=G;do{if(be.i!==G.i&&be.next.i!==G.i&&be.i!==ie.i&&be.next.i!==ie.i&&tf(be,be.next,G,ie))return!0;be=be.next}while(be!==G);return!1}(M,O)&&($l(M,O)&&$l(O,M)&&function(G,ie){var be=G,Le=!1,je=(G.x+ie.x)/2,Qe=(G.y+ie.y)/2;do{be.y>Qe!=be.next.y>Qe&&be.next.y!==be.y&&je<(be.next.x-be.x)*(Qe-be.y)/(be.next.y-be.y)+be.x&&(Le=!Le),be=be.next}while(be!==G);return Le}(M,O)&&(ea(M.prev,M,O.prev)||ea(M,O.prev,O))||Su(M,O)&&ea(M.prev,M,M.next)>0&&ea(O.prev,O,O.next)>0)}function ea(M,O,G){return(O.y-M.y)*(G.x-O.x)-(O.x-M.x)*(G.y-O.y)}function Su(M,O){return M.x===O.x&&M.y===O.y}function tf(M,O,G,ie){var be=Lu(ea(M,O,G)),Le=Lu(ea(M,O,ie)),je=Lu(ea(G,ie,M)),Qe=Lu(ea(G,ie,O));return be!==Le&&je!==Qe||!(0!==be||!Eu(M,G,O))||!(0!==Le||!Eu(M,ie,O))||!(0!==je||!Eu(G,M,ie))||!(0!==Qe||!Eu(G,O,ie))}function Eu(M,O,G){return O.x<=Math.max(M.x,G.x)&&O.x>=Math.min(M.x,G.x)&&O.y<=Math.max(M.y,G.y)&&O.y>=Math.min(M.y,G.y)}function Lu(M){return M>0?1:M<0?-1:0}function $l(M,O){return ea(M.prev,M,M.next)<0?ea(M,O,M.next)>=0&&ea(M,M.prev,O)>=0:ea(M,O,M.prev)<0||ea(M,M.next,O)<0}function nf(M,O){var G=new gc(M.i,M.x,M.y),ie=new gc(O.i,O.x,O.y),be=M.next,Le=O.prev;return M.next=O,O.prev=M,G.next=be,be.prev=G,ie.next=G,G.prev=ie,Le.next=ie,ie.prev=Le,ie}function rf(M,O,G,ie){var be=new gc(M,O,G);return ie?(be.next=ie.next,be.prev=ie,ie.next.prev=be,ie.next=be):(be.prev=be,be.next=be),be}function Ql(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function gc(M,O,G){this.i=M,this.x=O,this.y=G,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vc(M,O,G,ie){for(var be=0,Le=O,je=G-ie;Le<G;Le+=ie)be+=(M[je]-M[Le])*(M[Le+1]+M[je+1]),je=Le;return be}function Xh(M,O,G,ie,be){af(M,O,G||0,ie||M.length-1,be||Jh)}function af(M,O,G,ie,be){for(;ie>G;){if(ie-G>600){var Le=ie-G+1,je=O-G+1,Qe=Math.log(Le),lt=.5*Math.exp(2*Qe/3),kt=.5*Math.sqrt(Qe*lt*(Le-lt)/Le)*(je-Le/2<0?-1:1);af(M,O,Math.max(G,Math.floor(O-je*lt/Le+kt)),Math.min(ie,Math.floor(O+(Le-je)*lt/Le+kt)),be)}var Mt=M[O],Bt=G,qt=ie;for(eu(M,G,O),be(M[ie],Mt)>0&&eu(M,G,ie);Bt<qt;){for(eu(M,Bt,qt),Bt++,qt--;be(M[Bt],Mt)<0;)Bt++;for(;be(M[qt],Mt)>0;)qt--}0===be(M[G],Mt)?eu(M,G,qt):eu(M,++qt,ie),qt<=O&&(G=qt+1),O<=qt&&(ie=qt-1)}}function eu(M,O,G){var ie=M[O];M[O]=M[G],M[G]=ie}function Jh(M,O){return M<O?-1:M>O?1:0}function mc(M,O){var G=M.length;if(G<=1)return[M];for(var ie,be,Le=[],je=0;je<G;je++){var Qe=E(M[je]);0!==Qe&&(M[je].area=Math.abs(Qe),void 0===be&&(be=Qe<0),be===Qe<0?(ie&&Le.push(ie),ie=[M[je]]):ie.push(M[je]))}if(ie&&Le.push(ie),O>1)for(var lt=0;lt<Le.length;lt++)Le[lt].length<=O||(Xh(Le[lt],O,1,Le[lt].length-1,Kh),Le[lt]=Le[lt].slice(0,O));return Le}function Kh(M,O){return O.area-M.area}function yc(M,O,G){for(var ie=G.patternDependencies,be=!1,Le=0,je=O;Le<je.length;Le+=1){var Qe=je[Le].paint.get(M+"-pattern");Qe.isConstant()||(be=!0);var lt=Qe.constantOr(null);lt&&(be=!0,ie[lt.to]=!0,ie[lt.from]=!0)}return be}function xc(M,O,G,ie,be){for(var Le=be.patternDependencies,je=0,Qe=O;je<Qe.length;je+=1){var lt=Qe[je],kt=lt.paint.get(M+"-pattern").value;if("constant"!==kt.kind){var Mt=kt.evaluate({zoom:ie-1},G,{},be.availableImages),Bt=kt.evaluate({zoom:ie},G,{},be.availableImages),qt=kt.evaluate({zoom:ie+1},G,{},be.availableImages);Bt=Bt&&Bt.name?Bt.name:Bt,qt=qt&&qt.name?qt.name:qt,Le[Mt=Mt&&Mt.name?Mt.name:Mt]=!0,Le[Bt]=!0,Le[qt]=!0,G.patterns[lt.id]={min:Mt,mid:Bt,max:qt}}}return G}Mu.deviation=function(M,O,G,ie){var be=O&&O.length,je=Math.abs(vc(M,0,be?O[0]*G:M.length,G));if(be)for(var Qe=0,lt=O.length;Qe<lt;Qe++)je-=Math.abs(vc(M,O[Qe]*G,Qe<lt-1?O[Qe+1]*G:M.length,G));var Bt=0;for(Qe=0;Qe<ie.length;Qe+=3){var qt=ie[Qe]*G,Vt=ie[Qe+1]*G,nn=ie[Qe+2]*G;Bt+=Math.abs((M[qt]-M[nn])*(M[Vt+1]-M[qt+1])-(M[qt]-M[Vt])*(M[nn+1]-M[qt+1]))}return 0===je&&0===Bt?0:Math.abs((Bt-je)/je)},Mu.flatten=function(M){for(var O=M[0][0].length,G={vertices:[],holes:[],dimensions:O},ie=0,be=0;be<M.length;be++){for(var Le=0;Le<M[be].length;Le++)for(var je=0;je<O;je++)G.vertices.push(M[be][Le][je]);be>0&&G.holes.push(ie+=M[be-1].length)}return G},pc.default=Nh;var bs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xe,this.indexArray=new Ne,this.indexArray2=new ue,this.programConfigurations=new Si(Qc,M.layers,M.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};bs.prototype.populate=function(M,O,G){this.hasPattern=yc("fill",this.layers,O);for(var ie=this.layers[0].layout.get("fill-sort-key"),be=[],Le=0,je=M;Le<je.length;Le+=1){var Qe=je[Le],lt=Qe.feature,kt=Qe.id,Mt=Qe.index,Bt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,Vt={type:lt.type,id:kt,properties:lt.properties,geometry:qt?ki(lt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Vt,G)){qt||(Vt.geometry=ki(lt));var nn=ie?ie.evaluate(Vt,{},G,O.availableImages):void 0;be.push({id:kt,properties:lt.properties,type:lt.type,sourceLayerIndex:Bt,index:Mt,geometry:Vt.geometry,patterns:{},sortKey:nn})}}ie&&be.sort(function(Tr,Er){return Tr.sortKey-Er.sortKey});for(var zn=0,In=be;zn<In.length;zn+=1){var Un=In[zn],Wn=Un.geometry,Qn=Un.index,nr=Un.sourceLayerIndex;if(this.hasPattern){var xr=xc("fill",this.layers,Un,this.zoom,O);this.patternFeatures.push(xr)}else this.addFeature(Un,Wn,Qn,G,{});O.featureIndex.insert(M[Qn].feature,Wn,Qn,nr,this.index)}},bs.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},bs.prototype.addFeatures=function(M,O,G){for(var ie=0,be=this.patternFeatures;ie<be.length;ie+=1){var Le=be[ie];this.addFeature(Le,Le.geometry,Le.index,O,G)}},bs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Qc),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},bs.prototype.addFeature=function(M,O,G,ie,be){for(var Le=0,je=mc(O,500);Le<je.length;Le+=1){for(var Qe=je[Le],lt=0,kt=0,Mt=Qe;kt<Mt.length;kt+=1)lt+=Mt[kt].length;for(var Bt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),qt=Bt.vertexLength,Vt=[],nn=[],xn=0,zn=Qe;xn<zn.length;xn+=1){var In=zn[xn];if(0!==In.length){In!==Qe[0]&&nn.push(Vt.length/2);var Un=this.segments2.prepareSegment(In.length,this.layoutVertexArray,this.indexArray2),Vn=Un.vertexLength;this.layoutVertexArray.emplaceBack(In[0].x,In[0].y),this.indexArray2.emplaceBack(Vn+In.length-1,Vn),Vt.push(In[0].x),Vt.push(In[0].y);for(var Wn=1;Wn<In.length;Wn++)this.layoutVertexArray.emplaceBack(In[Wn].x,In[Wn].y),this.indexArray2.emplaceBack(Vn+Wn-1,Vn+Wn),Vt.push(In[Wn].x),Vt.push(In[Wn].y);Un.vertexLength+=In.length,Un.primitiveLength+=In.length}}for(var Qn=pc(Vt,nn),nr=0;nr<Qn.length;nr+=3)this.indexArray.emplaceBack(qt+Qn[nr],qt+Qn[nr+1],qt+Qn[nr+2]);Bt.vertexLength+=lt,Bt.primitiveLength+=Qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,be,ie)},_r("FillBucket",bs,{omit:["layers","patternFeatures"]});var $h=new $i({"fill-sort-key":new Or(Se.layout_fill["fill-sort-key"])}),Qh={paint:new $i({"fill-antialias":new Mr(Se.paint_fill["fill-antialias"]),"fill-opacity":new Or(Se.paint_fill["fill-opacity"]),"fill-color":new Or(Se.paint_fill["fill-color"]),"fill-outline-color":new Or(Se.paint_fill["fill-outline-color"]),"fill-translate":new Mr(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new Mr(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new rs(Se.paint_fill["fill-pattern"])}),layout:$h},ep=function(M){function O(G){M.call(this,G,Qh)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.recalculate=function(G,ie){M.prototype.recalculate.call(this,G,ie);var be=this.paint._values["fill-outline-color"];"constant"===be.value.kind&&void 0===be.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(G){return new bs(G)},O.prototype.queryRadius=function(){return wu(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(G,ie,be,Le,je,Qe,lt){return Ds(Tu(G,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Qe.angle,lt),Le)},O.prototype.isTileClipped=function(){return!0},O}(fa),of=fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,sf=Pl;function Pl(M,O,G,ie,be){this.properties={},this.extent=G,this.type=0,this._pbf=M,this._geometry=-1,this._keys=ie,this._values=be,M.readFields(tp,this,O)}function tp(M,O,G){1==M?O.id=G.readVarint():2==M?function(ie,be){for(var Le=ie.readVarint()+ie.pos;ie.pos<Le;){var je=be._keys[ie.readVarint()],Qe=be._values[ie.readVarint()];be.properties[je]=Qe}}(G,O):3==M?O.type=G.readVarint():4==M&&(O._geometry=G.pos)}function np(M){for(var O,G,ie=0,be=0,Le=M.length,je=Le-1;be<Le;je=be++)ie+=((G=M[je]).x-(O=M[be]).x)*(O.y+G.y);return ie}Pl.types=["Unknown","Point","LineString","Polygon"],Pl.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var O,G=M.readVarint()+M.pos,ie=1,be=0,Le=0,je=0,Qe=[];M.pos<G;){if(be<=0){var lt=M.readVarint();ie=7&lt,be=lt>>3}if(be--,1===ie||2===ie)Le+=M.readSVarint(),je+=M.readSVarint(),1===ie&&(O&&Qe.push(O),O=[]),O.push(new t(Le,je));else{if(7!==ie)throw new Error("unknown command "+ie);O&&O.push(O[0].clone())}}return O&&Qe.push(O),Qe},Pl.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var O=M.readVarint()+M.pos,G=1,ie=0,be=0,Le=0,je=1/0,Qe=-1/0,lt=1/0,kt=-1/0;M.pos<O;){if(ie<=0){var Mt=M.readVarint();G=7&Mt,ie=Mt>>3}if(ie--,1===G||2===G)(be+=M.readSVarint())<je&&(je=be),be>Qe&&(Qe=be),(Le+=M.readSVarint())<lt&&(lt=Le),Le>kt&&(kt=Le);else if(7!==G)throw new Error("unknown command "+G)}return[je,lt,Qe,kt]},Pl.prototype.toGeoJSON=function(M,O,G){var ie,be,Le=this.extent*Math.pow(2,G),je=this.extent*M,Qe=this.extent*O,lt=this.loadGeometry(),kt=Pl.types[this.type];function Mt(Vt){for(var nn=0;nn<Vt.length;nn++){var xn=Vt[nn];Vt[nn]=[360*(xn.x+je)/Le-180,360/Math.PI*Math.atan(Math.exp((180-360*(xn.y+Qe)/Le)*Math.PI/180))-90]}}switch(this.type){case 1:var Bt=[];for(ie=0;ie<lt.length;ie++)Bt[ie]=lt[ie][0];Mt(lt=Bt);break;case 2:for(ie=0;ie<lt.length;ie++)Mt(lt[ie]);break;case 3:for(lt=function(Vt){var nn=Vt.length;if(nn<=1)return[Vt];for(var xn,zn,In=[],Un=0;Un<nn;Un++){var Vn=np(Vt[Un]);0!==Vn&&(void 0===zn&&(zn=Vn<0),zn===Vn<0?(xn&&In.push(xn),xn=[Vt[Un]]):xn.push(Vt[Un]))}return xn&&In.push(xn),In}(lt),ie=0;ie<lt.length;ie++)for(be=0;be<lt[ie].length;be++)Mt(lt[ie][be])}1===lt.length?lt=lt[0]:kt="Multi"+kt;var qt={type:"Feature",geometry:{type:kt,coordinates:lt},properties:this.properties};return"id"in this&&(qt.id=this.id),qt};var lf=uf;function uf(M,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(rp,this,O),this.length=this._features.length}function rp(M,O,G){15===M?O.version=G.readVarint():1===M?O.name=G.readString():5===M?O.extent=G.readVarint():2===M?O._features.push(G.pos):3===M?O._keys.push(G.readString()):4===M&&O._values.push(function(ie){for(var be=null,Le=ie.readVarint()+ie.pos;ie.pos<Le;){var je=ie.readVarint()>>3;be=1===je?ie.readString():2===je?ie.readFloat():3===je?ie.readDouble():4===je?ie.readVarint64():5===je?ie.readVarint():6===je?ie.readSVarint():7===je?ie.readBoolean():null}return be}(G))}function ip(M,O,G){if(3===M){var ie=new lf(G,G.readVarint()+G.pos);ie.length&&(O[ie.name]=ie)}}uf.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var O=this._pbf.readVarint()+this._pbf.pos;return new sf(this._pbf,O,this.extent,this._keys,this._values)};var Ol={VectorTile:function(M,O){this.layers=M.readFields(ip,{},O)},VectorTileFeature:sf,VectorTileLayer:lf},ap=Ol.VectorTileFeature.types,bc=Math.pow(2,13);function tu(M,O,G,ie,be,Le,je,Qe){M.emplaceBack(O,G,2*Math.floor(ie*bc)+je,be*bc*2,Le*bc*2,Math.round(Qe))}var _s=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new ot,this.indexArray=new Ne,this.programConfigurations=new Si(of,M.layers,M.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function op(M,O){return M.x===O.x&&(M.x<0||M.x>Br)||M.y===O.y&&(M.y<0||M.y>Br)}_s.prototype.populate=function(M,O,G){this.features=[],this.hasPattern=yc("fill-extrusion",this.layers,O);for(var ie=0,be=M;ie<be.length;ie+=1){var Le=be[ie],je=Le.feature,Qe=Le.id,lt=Le.index,kt=Le.sourceLayerIndex,Mt=this.layers[0]._featureFilter.needGeometry,Bt={type:je.type,id:Qe,properties:je.properties,geometry:Mt?ki(je):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Bt,G)){var qt={id:Qe,sourceLayerIndex:kt,index:lt,geometry:Mt?Bt.geometry:ki(je),properties:je.properties,type:je.type,patterns:{}};void 0!==je.id&&(qt.id=je.id),this.hasPattern?this.features.push(xc("fill-extrusion",this.layers,qt,this.zoom,O)):this.addFeature(qt,qt.geometry,lt,G,{}),O.featureIndex.insert(je,qt.geometry,lt,kt,this.index,!0)}}},_s.prototype.addFeatures=function(M,O,G){for(var ie=0,be=this.features;ie<be.length;ie+=1){var Le=be[ie];this.addFeature(Le,Le.geometry,Le.index,O,G)}},_s.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},_s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},_s.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_s.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,of),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},_s.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_s.prototype.addFeature=function(M,O,G,ie,be){for(var Le=0,je=mc(O,500);Le<je.length;Le+=1){for(var Qe=je[Le],lt=0,kt=0,Mt=Qe;kt<Mt.length;kt+=1)lt+=Mt[kt].length;for(var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),qt=0,Vt=Qe;qt<Vt.length;qt+=1){var nn=Vt[qt];if(0!==nn.length&&!((Jr=nn).every(function(qr){return qr.x<0})||Jr.every(function(qr){return qr.x>Br})||Jr.every(function(qr){return qr.y<0})||Jr.every(function(qr){return qr.y>Br})))for(var xn=0,zn=0;zn<nn.length;zn++){var In=nn[zn];if(zn>=1){var Un=nn[zn-1];if(!op(In,Un)){Bt.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=In.sub(Un)._perp()._unit(),Wn=Un.dist(In);xn+Wn>32768&&(xn=0),tu(this.layoutVertexArray,In.x,In.y,Vn.x,Vn.y,0,0,xn),tu(this.layoutVertexArray,In.x,In.y,Vn.x,Vn.y,0,1,xn),tu(this.layoutVertexArray,Un.x,Un.y,Vn.x,Vn.y,0,0,xn+=Wn),tu(this.layoutVertexArray,Un.x,Un.y,Vn.x,Vn.y,0,1,xn);var Qn=Bt.vertexLength;this.indexArray.emplaceBack(Qn,Qn+2,Qn+1),this.indexArray.emplaceBack(Qn+1,Qn+2,Qn+3),Bt.vertexLength+=4,Bt.primitiveLength+=2}}}}if(Bt.vertexLength+lt>en.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),"Polygon"===ap[M.type]){for(var nr=[],xr=[],pr=Bt.vertexLength,Tr=0,Er=Qe;Tr<Er.length;Tr+=1){var jr=Er[Tr];if(0!==jr.length){jr!==Qe[0]&&xr.push(nr.length/2);for(var Pr=0;Pr<jr.length;Pr++){var Nr=jr[Pr];tu(this.layoutVertexArray,Nr.x,Nr.y,0,0,1,1,0),nr.push(Nr.x),nr.push(Nr.y)}}}for(var Ir=pc(nr,xr),Cr=0;Cr<Ir.length;Cr+=3)this.indexArray.emplaceBack(pr+Ir[Cr],pr+Ir[Cr+2],pr+Ir[Cr+1]);Bt.primitiveLength+=Ir.length/3,Bt.vertexLength+=lt}}var Jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,be,ie)},_r("FillExtrusionBucket",_s,{omit:["layers","features"]});var sp={paint:new $i({"fill-extrusion-opacity":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rs(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},lp=function(M){function O(G){M.call(this,G,sp)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.createBucket=function(G){return new _s(G)},O.prototype.queryRadius=function(){return wu(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(G,ie,be,Le,je,Qe,lt,kt){var Mt=Tu(G,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Qe.angle,lt),Bt=this.paint.get("fill-extrusion-height").evaluate(ie,be),qt=this.paint.get("fill-extrusion-base").evaluate(ie,be),Vt=function(xn,zn,In,Un){for(var Vn=[],Wn=0,Qn=xn;Wn<Qn.length;Wn+=1){var nr=Qn[Wn],xr=[nr.x,nr.y,0,1];Au(xr,xr,zn),Vn.push(new t(xr[0]/xr[3],xr[1]/xr[3]))}return Vn}(Mt,kt),nn=function(xn,zn,In,Un){for(var Vn=[],Wn=[],Qn=Un[8]*zn,nr=Un[9]*zn,xr=Un[10]*zn,pr=Un[11]*zn,Tr=Un[8]*In,Er=Un[9]*In,jr=Un[10]*In,Pr=Un[11]*In,Nr=0,Ir=xn;Nr<Ir.length;Nr+=1){for(var Cr=[],Jr=[],qr=0,bi=Ir[Nr];qr<bi.length;qr+=1){var Fr=bi[qr],gi=Fr.x,Ti=Fr.y,Ai=Un[0]*gi+Un[4]*Ti+Un[12],Li=Un[1]*gi+Un[5]*Ti+Un[13],_i=Un[2]*gi+Un[6]*Ti+Un[14],ra=Un[3]*gi+Un[7]*Ti+Un[15],Oi=_i+xr,da=ra+pr,Sa=Ai+Tr,ba=Li+Er,Za=_i+jr,_a=ra+Pr,aa=new t((Ai+Qn)/da,(Li+nr)/da);aa.z=Oi/da,Cr.push(aa);var wa=new t(Sa/_a,ba/_a);wa.z=Za/_a,Jr.push(wa)}Vn.push(Cr),Wn.push(Jr)}return[Vn,Wn]}(Le,qt,Bt,kt);return function(xn,zn,In){var Un=1/0;Ds(In,zn)&&(Un=cf(In,zn[0]));for(var Vn=0;Vn<zn.length;Vn++)for(var Wn=zn[Vn],Qn=xn[Vn],nr=0;nr<Wn.length-1;nr++){var xr=Wn[nr],Er=[xr,Wn[nr+1],Qn[nr+1],Qn[nr],xr];Bi(In,Er)&&(Un=Math.min(Un,cf(In,Er)))}return Un!==1/0&&Un}(nn[0],nn[1],Vt)},O}(fa);function nu(M,O){return M.x*O.x+M.y*O.y}function cf(M,O){if(1===M.length){for(var G,ie=0,be=O[ie++];!G||be.equals(G);)if(!(G=O[ie++]))return 1/0;for(;ie<O.length;ie++){var Le=O[ie],je=M[0],Qe=G.sub(be),lt=Le.sub(be),kt=je.sub(be),Mt=nu(Qe,Qe),Bt=nu(Qe,lt),qt=nu(lt,lt),Vt=nu(kt,Qe),nn=nu(kt,lt),xn=Mt*qt-Bt*Bt,zn=(qt*Vt-Bt*nn)/xn,In=(Mt*nn-Bt*Vt)/xn,Vn=be.z*(1-zn-In)+G.z*zn+Le.z*In;if(isFinite(Vn))return Vn}return 1/0}for(var Wn=1/0,Qn=0,nr=O;Qn<nr.length;Qn+=1)Wn=Math.min(Wn,nr[Qn].z);return Wn}var ff=fi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,up=Ol.VectorTileFeature.types,cp=Math.cos(Math.PI/180*37.5),hf=Math.pow(2,14)/.5,eo=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ft,this.indexArray=new Ne,this.programConfigurations=new Si(ff,M.layers,M.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};eo.prototype.populate=function(M,O,G){this.hasPattern=yc("line",this.layers,O);for(var ie=this.layers[0].layout.get("line-sort-key"),be=[],Le=0,je=M;Le<je.length;Le+=1){var Qe=je[Le],lt=Qe.feature,kt=Qe.id,Mt=Qe.index,Bt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,Vt={type:lt.type,id:kt,properties:lt.properties,geometry:qt?ki(lt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Vt,G)){qt||(Vt.geometry=ki(lt));var nn=ie?ie.evaluate(Vt,{},G):void 0;be.push({id:kt,properties:lt.properties,type:lt.type,sourceLayerIndex:Bt,index:Mt,geometry:Vt.geometry,patterns:{},sortKey:nn})}}ie&&be.sort(function(Tr,Er){return Tr.sortKey-Er.sortKey});for(var zn=0,In=be;zn<In.length;zn+=1){var Un=In[zn],Wn=Un.geometry,Qn=Un.index,nr=Un.sourceLayerIndex;if(this.hasPattern){var xr=xc("line",this.layers,Un,this.zoom,O);this.patternFeatures.push(xr)}else this.addFeature(Un,Wn,Qn,G,{});O.featureIndex.insert(M[Qn].feature,Wn,Qn,nr,this.index)}},eo.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},eo.prototype.addFeatures=function(M,O,G){for(var ie=0,be=this.patternFeatures;ie<be.length;ie+=1){var Le=be[ie];this.addFeature(Le,Le.geometry,Le.index,O,G)}},eo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},eo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},eo.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,ff),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},eo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},eo.prototype.addFeature=function(M,O,G,ie,be){for(var Le=this.layers[0].layout,je=Le.get("line-join").evaluate(M,{}),Qe=Le.get("line-cap"),lt=Le.get("line-miter-limit"),kt=Le.get("line-round-limit"),Mt=0,Bt=O;Mt<Bt.length;Mt+=1)this.addLine(Bt[Mt],M,je,Qe,lt,kt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,be,ie)},eo.prototype.addLine=function(M,O,G,ie,be,Le){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var je=0;je<M.length-1;je++)this.totalDistance+=M[je].dist(M[je+1]);this.updateScaledDistance()}for(var Qe="Polygon"===up[O.type],lt=M.length;lt>=2&&M[lt-1].equals(M[lt-2]);)lt--;for(var kt=0;kt<lt-1&&M[kt].equals(M[kt+1]);)kt++;if(!(lt<(Qe?3:2))){"bevel"===G&&(be=1.05);var Mt,Bt=this.overscaling<=16?122880/(512*this.overscaling):0,qt=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),Vt=void 0,nn=void 0,xn=void 0,zn=void 0;this.e1=this.e2=-1,Qe&&(zn=M[kt].sub(Mt=M[lt-2])._unit()._perp());for(var In=kt;In<lt;In++)if(!(nn=In===lt-1?Qe?M[kt+1]:void 0:M[In+1])||!M[In].equals(nn)){zn&&(xn=zn),Mt&&(Vt=Mt),Mt=M[In],zn=nn?nn.sub(Mt)._unit()._perp():xn;var Un=(xn=xn||zn).add(zn);0===Un.x&&0===Un.y||Un._unit();var Vn=xn.x*zn.x+xn.y*zn.y,Wn=Un.x*zn.x+Un.y*zn.y,Qn=0!==Wn?1/Wn:1/0,nr=2*Math.sqrt(2-2*Wn),xr=Wn<cp&&Vt&&nn,pr=xn.x*zn.y-xn.y*zn.x>0;if(xr&&In>kt){var Tr=Mt.dist(Vt);if(Tr>2*Bt){var Er=Mt.sub(Mt.sub(Vt)._mult(Bt/Tr)._round());this.updateDistance(Vt,Er),this.addCurrentVertex(Er,xn,0,0,qt),Vt=Er}}var jr=Vt&&nn,Pr=jr?G:Qe?"butt":ie;if(jr&&"round"===Pr&&(Qn<Le?Pr="miter":Qn<=2&&(Pr="fakeround")),"miter"===Pr&&Qn>be&&(Pr="bevel"),"bevel"===Pr&&(Qn>2&&(Pr="flipbevel"),Qn<be&&(Pr="miter")),Vt&&this.updateDistance(Vt,Mt),"miter"===Pr)Un._mult(Qn),this.addCurrentVertex(Mt,Un,0,0,qt);else if("flipbevel"===Pr){if(Qn>100)Un=zn.mult(-1);else{var Nr=Qn*xn.add(zn).mag()/xn.sub(zn).mag();Un._perp()._mult(Nr*(pr?-1:1))}this.addCurrentVertex(Mt,Un,0,0,qt),this.addCurrentVertex(Mt,Un.mult(-1),0,0,qt)}else if("bevel"===Pr||"fakeround"===Pr){var Ir=-Math.sqrt(Qn*Qn-1),Cr=pr?Ir:0,Jr=pr?0:Ir;if(Vt&&this.addCurrentVertex(Mt,xn,Cr,Jr,qt),"fakeround"===Pr)for(var qr=Math.round(180*nr/Math.PI/20),bi=1;bi<qr;bi++){var Fr=bi/qr;if(.5!==Fr){var gi=Fr-.5;Fr+=Fr*gi*(Fr-1)*((1.0904+Vn*(Vn*(3.55645-1.43519*Vn)-3.2452))*gi*gi+(.848013+Vn*(.215638*Vn-1.06021)))}var Ti=zn.sub(xn)._mult(Fr)._add(xn)._unit()._mult(pr?-1:1);this.addHalfVertex(Mt,Ti.x,Ti.y,!1,pr,0,qt)}nn&&this.addCurrentVertex(Mt,zn,-Cr,-Jr,qt)}else if("butt"===Pr)this.addCurrentVertex(Mt,Un,0,0,qt);else if("square"===Pr){var Ai=Vt?1:-1;this.addCurrentVertex(Mt,Un,Ai,Ai,qt)}else"round"===Pr&&(Vt&&(this.addCurrentVertex(Mt,xn,0,0,qt),this.addCurrentVertex(Mt,xn,1,1,qt,!0)),nn&&(this.addCurrentVertex(Mt,zn,-1,-1,qt,!0),this.addCurrentVertex(Mt,zn,0,0,qt)));if(xr&&In<lt-1){var Li=Mt.dist(nn);if(Li>2*Bt){var _i=Mt.add(nn.sub(Mt)._mult(Bt/Li)._round());this.updateDistance(Mt,_i),this.addCurrentVertex(_i,zn,0,0,qt),Mt=_i}}}}},eo.prototype.addCurrentVertex=function(M,O,G,ie,be,Le){void 0===Le&&(Le=!1);var lt=O.y*ie-O.x,kt=-O.y-O.x*ie;this.addHalfVertex(M,O.x+O.y*G,O.y-O.x*G,Le,!1,G,be),this.addHalfVertex(M,lt,kt,Le,!0,-ie,be),this.distance>hf/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(M,O,G,ie,be,Le))},eo.prototype.addHalfVertex=function(M,O,G,ie,be,Le,je){var kt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((M.x<<1)+(ie?1:0),(M.y<<1)+(be?1:0),Math.round(63*O)+128,Math.round(63*G)+128,1+(0===Le?0:Le<0?-1:1)|(63&kt)<<2,kt>>6);var Mt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Mt),je.primitiveLength++),be?this.e2=Mt:this.e1=Mt},eo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(hf-1):this.distance},eo.prototype.updateDistance=function(M,O){this.distance+=M.dist(O),this.updateScaledDistance()},_r("LineBucket",eo,{omit:["layers","patternFeatures"]});var fp=new $i({"line-cap":new Mr(Se.layout_line["line-cap"]),"line-join":new Or(Se.layout_line["line-join"]),"line-miter-limit":new Mr(Se.layout_line["line-miter-limit"]),"line-round-limit":new Mr(Se.layout_line["line-round-limit"]),"line-sort-key":new Or(Se.layout_line["line-sort-key"])}),pf={paint:new $i({"line-opacity":new Or(Se.paint_line["line-opacity"]),"line-color":new Or(Se.paint_line["line-color"]),"line-translate":new Mr(Se.paint_line["line-translate"]),"line-translate-anchor":new Mr(Se.paint_line["line-translate-anchor"]),"line-width":new Or(Se.paint_line["line-width"]),"line-gap-width":new Or(Se.paint_line["line-gap-width"]),"line-offset":new Or(Se.paint_line["line-offset"]),"line-blur":new Or(Se.paint_line["line-blur"]),"line-dasharray":new fo(Se.paint_line["line-dasharray"]),"line-pattern":new rs(Se.paint_line["line-pattern"]),"line-gradient":new qa(Se.paint_line["line-gradient"])}),layout:fp},hp=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(G,ie){return ie=new ni(Math.floor(ie.zoom),{now:ie.now,fadeDuration:ie.fadeDuration,zoomHistory:ie.zoomHistory,transition:ie.transition}),M.prototype.possiblyEvaluate.call(this,G,ie)},O.prototype.evaluate=function(G,ie,be,Le){return ie=c({},ie,{zoom:Math.floor(ie.zoom)}),M.prototype.evaluate.call(this,G,ie,be,Le)},O}(Or),df=new hp(pf.paint.properties["line-width"].specification);df.useIntegerZoom=!0;var pp=function(M){function O(G){M.call(this,G,pf)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(G){"line-gradient"===G&&this._updateGradient()},O.prototype._updateGradient=function(){this.gradient=$c(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(G,ie){M.prototype.recalculate.call(this,G,ie),this.paint._values["line-floorwidth"]=df.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,G)},O.prototype.createBucket=function(G){return new eo(G)},O.prototype.queryRadius=function(G){var ie=G,be=gf($s("line-width",this,ie),$s("line-gap-width",this,ie)),Le=$s("line-offset",this,ie);return be/2+Math.abs(Le)+wu(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(G,ie,be,Le,je,Qe,lt){var kt=Tu(G,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Qe.angle,lt),Mt=lt/2*gf(this.paint.get("line-width").evaluate(ie,be),this.paint.get("line-gap-width").evaluate(ie,be)),Bt=this.paint.get("line-offset").evaluate(ie,be);return Bt&&(Le=function(qt,Vt){for(var nn=[],xn=new t(0,0),zn=0;zn<qt.length;zn++){for(var In=qt[zn],Un=[],Vn=0;Vn<In.length;Vn++){var Qn=In[Vn],nr=In[Vn+1],xr=0===Vn?xn:Qn.sub(In[Vn-1])._unit()._perp(),pr=Vn===In.length-1?xn:nr.sub(Qn)._unit()._perp(),Tr=xr._add(pr)._unit();Tr._mult(1/(Tr.x*pr.x+Tr.y*pr.y)),Un.push(Tr._mult(Vt)._add(Qn))}nn.push(Un)}return nn}(Le,Bt*lt)),function(qt,Vt,nn){for(var xn=0;xn<Vt.length;xn++){var zn=Vt[xn];if(qt.length>=3)for(var In=0;In<zn.length;In++)if(cl(qt,zn[In]))return!0;if(sc(qt,zn,nn))return!0}return!1}(kt,Le,Mt)},O.prototype.isTileClipped=function(){return!0},O}(fa);function gf(M,O){return O>0?O+2*M:M}var _c=fi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dp=fi([{name:"a_projected_pos",components:3,type:"Float32"}],4),gp=(fi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),fi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vf=(fi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),vp=fi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mp(M,O,G){return M.sections.forEach(function(ie){var be,je,Qe;ie.text=(be=ie.text,je=G,"uppercase"===(Qe=O.layout.get("text-transform").evaluate(je,{}))?be=be.toLocaleUpperCase():"lowercase"===Qe&&(be=be.toLocaleLowerCase()),ua.applyArabicShaping&&(be=ua.applyArabicShaping(be)),be)}),M}fi([{name:"triangle",components:3,type:"Uint16"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fi([{type:"Float32",name:"offsetX"}]),fi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ru={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Ma=24,mf=function(M,O,G,ie,be){var Le,je,Qe=8*be-ie-1,lt=(1<<Qe)-1,kt=lt>>1,Mt=-7,Bt=G?be-1:0,qt=G?-1:1,Vt=M[O+Bt];for(Bt+=qt,Le=Vt&(1<<-Mt)-1,Vt>>=-Mt,Mt+=Qe;Mt>0;Le=256*Le+M[O+Bt],Bt+=qt,Mt-=8);for(je=Le&(1<<-Mt)-1,Le>>=-Mt,Mt+=ie;Mt>0;je=256*je+M[O+Bt],Bt+=qt,Mt-=8);if(0===Le)Le=1-kt;else{if(Le===lt)return je?NaN:1/0*(Vt?-1:1);je+=Math.pow(2,ie),Le-=kt}return(Vt?-1:1)*je*Math.pow(2,Le-ie)},yf=function(M,O,G,ie,be,Le){var je,Qe,lt,kt=8*Le-be-1,Mt=(1<<kt)-1,Bt=Mt>>1,qt=23===be?Math.pow(2,-24)-Math.pow(2,-77):0,Vt=ie?0:Le-1,nn=ie?1:-1,xn=O<0||0===O&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Qe=isNaN(O)?1:0,je=Mt):(je=Math.floor(Math.log(O)/Math.LN2),O*(lt=Math.pow(2,-je))<1&&(je--,lt*=2),(O+=je+Bt>=1?qt/lt:qt*Math.pow(2,1-Bt))*lt>=2&&(je++,lt/=2),je+Bt>=Mt?(Qe=0,je=Mt):je+Bt>=1?(Qe=(O*lt-1)*Math.pow(2,be),je+=Bt):(Qe=O*Math.pow(2,Bt-1)*Math.pow(2,be),je=0));be>=8;M[G+Vt]=255&Qe,Vt+=nn,Qe/=256,be-=8);for(je=je<<be|Qe,kt+=be;kt>0;M[G+Vt]=255&je,Vt+=nn,je/=256,kt-=8);M[G+Vt-nn]|=128*xn},Cu=wi;function wi(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}wi.Varint=0,wi.Fixed64=1,wi.Bytes=2,wi.Fixed32=5;var wc=4294967296,xf=1/wc,bf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Qs(M){return M.type===wi.Bytes?M.readVarint()+M.pos:M.pos+1}function _f(M,O,G){var ie=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));G.realloc(ie);for(var be=G.pos-1;be>=M;be--)G.buf[be+ie]=G.buf[be]}function yp(M,O){for(var G=0;G<M.length;G++)O.writeVarint(M[G])}function xp(M,O){for(var G=0;G<M.length;G++)O.writeSVarint(M[G])}function bp(M,O){for(var G=0;G<M.length;G++)O.writeFloat(M[G])}function _p(M,O){for(var G=0;G<M.length;G++)O.writeDouble(M[G])}function wp(M,O){for(var G=0;G<M.length;G++)O.writeBoolean(M[G])}function Tp(M,O){for(var G=0;G<M.length;G++)O.writeFixed32(M[G])}function kp(M,O){for(var G=0;G<M.length;G++)O.writeSFixed32(M[G])}function Ap(M,O){for(var G=0;G<M.length;G++)O.writeFixed64(M[G])}function Mp(M,O){for(var G=0;G<M.length;G++)O.writeSFixed64(M[G])}function Pu(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+16777216*M[O+3]}function zl(M,O,G){M[G]=O,M[G+1]=O>>>8,M[G+2]=O>>>16,M[G+3]=O>>>24}function wf(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+(M[O+3]<<24)}function Sp(M,O,G){1===M&&G.readMessage(Ep,O)}function Ep(M,O,G){if(3===M){var ie=G.readMessage(Lp,{}),je=ie.width,Qe=ie.height,lt=ie.left,kt=ie.top,Mt=ie.advance;O.push({id:ie.id,bitmap:new bl({width:je+6,height:Qe+6},ie.bitmap),metrics:{width:je,height:Qe,left:lt,top:kt,advance:Mt}})}}function Lp(M,O,G){1===M?O.id=G.readVarint():2===M?O.bitmap=G.readBytes():3===M?O.width=G.readVarint():4===M?O.height=G.readVarint():5===M?O.left=G.readSVarint():6===M?O.top=G.readSVarint():7===M&&(O.advance=G.readVarint())}function Tf(M){for(var O=0,G=0,ie=0,be=M;ie<be.length;ie+=1){var Le=be[ie];O+=Le.w*Le.h,G=Math.max(G,Le.w)}M.sort(function(xn,zn){return zn.h-xn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),G),h:1/0}],Qe=0,lt=0,kt=0,Mt=M;kt<Mt.length;kt+=1)for(var Bt=Mt[kt],qt=je.length-1;qt>=0;qt--){var Vt=je[qt];if(!(Bt.w>Vt.w||Bt.h>Vt.h)){if(Bt.x=Vt.x,Bt.y=Vt.y,lt=Math.max(lt,Bt.y+Bt.h),Qe=Math.max(Qe,Bt.x+Bt.w),Bt.w===Vt.w&&Bt.h===Vt.h){var nn=je.pop();qt<je.length&&(je[qt]=nn)}else Bt.h===Vt.h?(Vt.x+=Bt.w,Vt.w-=Bt.w):Bt.w===Vt.w?(Vt.y+=Bt.h,Vt.h-=Bt.h):(je.push({x:Vt.x+Bt.w,y:Vt.y,w:Vt.w-Bt.w,h:Bt.h}),Vt.y+=Bt.h,Vt.h-=Bt.h);break}}return{w:Qe,h:lt,fill:O/(Qe*lt)||0}}wi.prototype={destroy:function(){this.buf=null},readFields:function(M,O,G){for(G=G||this.length;this.pos<G;){var ie=this.readVarint(),be=ie>>3,Le=this.pos;this.type=7&ie,M(be,O,this),this.pos===Le&&this.skip(ie)}return O},readMessage:function(M,O){return this.readFields(M,O,this.readVarint()+this.pos)},readFixed32:function(){var M=Pu(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=wf(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Pu(this.buf,this.pos)+Pu(this.buf,this.pos+4)*wc;return this.pos+=8,M},readSFixed64:function(){var M=Pu(this.buf,this.pos)+wf(this.buf,this.pos+4)*wc;return this.pos+=8,M},readFloat:function(){var M=mf(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=mf(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var O,G,ie=this.buf;return O=127&(G=ie[this.pos++]),G<128?O:(O|=(127&(G=ie[this.pos++]))<<7,G<128?O:(O|=(127&(G=ie[this.pos++]))<<14,G<128?O:(O|=(127&(G=ie[this.pos++]))<<21,G<128?O:function(be,Le,je){var Qe,lt,kt=je.buf;if(Qe=(112&(lt=kt[je.pos++]))>>4,lt<128||(Qe|=(127&(lt=kt[je.pos++]))<<3,lt<128)||(Qe|=(127&(lt=kt[je.pos++]))<<10,lt<128)||(Qe|=(127&(lt=kt[je.pos++]))<<17,lt<128)||(Qe|=(127&(lt=kt[je.pos++]))<<24,lt<128)||(Qe|=(1&(lt=kt[je.pos++]))<<31,lt<128))return function Il(M,O,G){return G?4294967296*O+(M>>>0):4294967296*(O>>>0)+(M>>>0)}(be,Qe,Le);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(G=ie[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,O=this.pos;return this.pos=M,M-O>=12&&bf?bf.decode(this.buf.subarray(O,M)):function(G,ie,be){for(var Le="",je=ie;je<be;){var Qe,lt,kt,Mt=G[je],Bt=null,qt=Mt>239?4:Mt>223?3:Mt>191?2:1;if(je+qt>be)break;1===qt?Mt<128&&(Bt=Mt):2===qt?128==(192&(Qe=G[je+1]))&&(Bt=(31&Mt)<<6|63&Qe)<=127&&(Bt=null):3===qt?(lt=G[je+2],128==(192&(Qe=G[je+1]))&&128==(192&lt)&&((Bt=(15&Mt)<<12|(63&Qe)<<6|63&lt)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):4===qt&&(lt=G[je+2],kt=G[je+3],128==(192&(Qe=G[je+1]))&&128==(192&lt)&&128==(192&kt)&&((Bt=(15&Mt)<<18|(63&Qe)<<12|(63&lt)<<6|63&kt)<=65535||Bt>=1114112)&&(Bt=null)),null===Bt?(Bt=65533,qt=1):Bt>65535&&(Bt-=65536,Le+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),Le+=String.fromCharCode(Bt),je+=qt}return Le}(this.buf,O,M)},readBytes:function(){var M=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,M);return this.pos=M,O},readPackedVarint:function(M,O){if(this.type!==wi.Bytes)return M.push(this.readVarint(O));var G=Qs(this);for(M=M||[];this.pos<G;)M.push(this.readVarint(O));return M},readPackedSVarint:function(M){if(this.type!==wi.Bytes)return M.push(this.readSVarint());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==wi.Bytes)return M.push(this.readBoolean());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==wi.Bytes)return M.push(this.readFloat());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==wi.Bytes)return M.push(this.readDouble());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==wi.Bytes)return M.push(this.readFixed32());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==wi.Bytes)return M.push(this.readSFixed32());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==wi.Bytes)return M.push(this.readFixed64());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==wi.Bytes)return M.push(this.readSFixed64());var O=Qs(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed64());return M},skip:function(M){var O=7&M;if(O===wi.Varint)for(;this.buf[this.pos++]>127;);else if(O===wi.Bytes)this.pos=this.readVarint()+this.pos;else if(O===wi.Fixed32)this.pos+=4;else{if(O!==wi.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(M,O){this.writeVarint(M<<3|O)},realloc:function(M){for(var O=this.length||16;O<this.pos+M;)O*=2;if(O!==this.length){var G=new Uint8Array(O);G.set(this.buf),this.buf=G,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),zl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),zl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),zl(this.buf,-1&M,this.pos),zl(this.buf,Math.floor(M*xf),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),zl(this.buf,-1&M,this.pos),zl(this.buf,Math.floor(M*xf),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(O,G){var ie,be,Le,Qe;if(O>=0?(ie=O%4294967296|0,be=O/4294967296|0):(be=~(-O/4294967296),4294967295^(ie=~(-O%4294967296))?ie=ie+1|0:(ie=0,be=be+1|0)),O>=0x10000000000000000||O<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");G.realloc(10),Le=ie,(Qe=G).buf[Qe.pos++]=127&Le|128,Le>>>=7,Qe.buf[Qe.pos++]=127&Le|128,Le>>>=7,Qe.buf[Qe.pos++]=127&Le|128,Le>>>=7,Qe.buf[Qe.pos++]=127&Le|128,Qe.buf[Qe.pos]=127&(Le>>>=7),function(Le,je){var Qe=(7&Le)<<4;je.buf[je.pos++]|=Qe|((Le>>>=3)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le)))))}(be,G)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var O=this.pos;this.pos=function(ie,be,Le){for(var je,Qe,lt=0;lt<be.length;lt++){if((je=be.charCodeAt(lt))>55295&&je<57344){if(!Qe){je>56319||lt+1===be.length?(ie[Le++]=239,ie[Le++]=191,ie[Le++]=189):Qe=je;continue}if(je<56320){ie[Le++]=239,ie[Le++]=191,ie[Le++]=189,Qe=je;continue}je=Qe-55296<<10|je-56320|65536,Qe=null}else Qe&&(ie[Le++]=239,ie[Le++]=191,ie[Le++]=189,Qe=null);je<128?ie[Le++]=je:(je<2048?ie[Le++]=je>>6|192:(je<65536?ie[Le++]=je>>12|224:(ie[Le++]=je>>18|240,ie[Le++]=je>>12&63|128),ie[Le++]=je>>6&63|128),ie[Le++]=63&je|128)}return Le}(this.buf,M,this.pos);var G=this.pos-O;G>=128&&_f(O,G,this),this.pos=O-1,this.writeVarint(G),this.pos+=G},writeFloat:function(M){this.realloc(4),yf(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),yf(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var O=M.length;this.writeVarint(O),this.realloc(O);for(var G=0;G<O;G++)this.buf[this.pos++]=M[G]},writeRawMessage:function(M,O){this.pos++;var G=this.pos;M(O,this);var ie=this.pos-G;ie>=128&&_f(G,ie,this),this.pos=G-1,this.writeVarint(ie),this.pos+=ie},writeMessage:function(M,O,G){this.writeTag(M,wi.Bytes),this.writeRawMessage(O,G)},writePackedVarint:function(M,O){O.length&&this.writeMessage(M,yp,O)},writePackedSVarint:function(M,O){O.length&&this.writeMessage(M,xp,O)},writePackedBoolean:function(M,O){O.length&&this.writeMessage(M,wp,O)},writePackedFloat:function(M,O){O.length&&this.writeMessage(M,bp,O)},writePackedDouble:function(M,O){O.length&&this.writeMessage(M,_p,O)},writePackedFixed32:function(M,O){O.length&&this.writeMessage(M,Tp,O)},writePackedSFixed32:function(M,O){O.length&&this.writeMessage(M,kp,O)},writePackedFixed64:function(M,O){O.length&&this.writeMessage(M,Ap,O)},writePackedSFixed64:function(M,O){O.length&&this.writeMessage(M,Mp,O)},writeBytesField:function(M,O){this.writeTag(M,wi.Bytes),this.writeBytes(O)},writeFixed32Field:function(M,O){this.writeTag(M,wi.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(M,O){this.writeTag(M,wi.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(M,O){this.writeTag(M,wi.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(M,O){this.writeTag(M,wi.Fixed64),this.writeSFixed64(O)},writeVarintField:function(M,O){this.writeTag(M,wi.Varint),this.writeVarint(O)},writeSVarintField:function(M,O){this.writeTag(M,wi.Varint),this.writeSVarint(O)},writeStringField:function(M,O){this.writeTag(M,wi.Bytes),this.writeString(O)},writeFloatField:function(M,O){this.writeTag(M,wi.Fixed32),this.writeFloat(O)},writeDoubleField:function(M,O){this.writeTag(M,wi.Fixed64),this.writeDouble(O)},writeBooleanField:function(M,O){this.writeVarintField(M,Boolean(O))}};var Ou=function(M,O){var G=O.pixelRatio,ie=O.version,be=O.stretchX,Le=O.stretchY,je=O.content;this.paddedRect=M,this.pixelRatio=G,this.stretchX=be,this.stretchY=Le,this.content=je,this.version=ie},iu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};iu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},iu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},iu.tlbr.get=function(){return this.tl.concat(this.br)},iu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ou.prototype,iu);var au=function(M,O){var G={},ie={};this.haveRenderCallbacks=[];var be=[];this.addImages(M,G,be),this.addImages(O,ie,be);var Le=Tf(be),lt=new Qa({width:Le.w||1,height:Le.h||1});for(var kt in M){var Mt=M[kt],Bt=G[kt].paddedRect;Qa.copy(Mt.data,lt,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Mt.data)}for(var qt in O){var Vt=O[qt],nn=ie[qt].paddedRect,xn=nn.x+1,zn=nn.y+1,In=Vt.data.width,Un=Vt.data.height;Qa.copy(Vt.data,lt,{x:0,y:0},{x:xn,y:zn},Vt.data),Qa.copy(Vt.data,lt,{x:0,y:Un-1},{x:xn,y:zn-1},{width:In,height:1}),Qa.copy(Vt.data,lt,{x:0,y:0},{x:xn,y:zn+Un},{width:In,height:1}),Qa.copy(Vt.data,lt,{x:In-1,y:0},{x:xn-1,y:zn},{width:1,height:Un}),Qa.copy(Vt.data,lt,{x:0,y:0},{x:xn+In,y:zn},{width:1,height:Un})}this.image=lt,this.iconPositions=G,this.patternPositions=ie};au.prototype.addImages=function(M,O,G){for(var ie in M){var be=M[ie],Le={x:0,y:0,w:be.data.width+2,h:be.data.height+2};G.push(Le),O[ie]=new Ou(Le,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(ie)}},au.prototype.patchUpdatedImages=function(M,O){for(var G in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[G],M.getImage(G),O),this.patchUpdatedImage(this.patternPositions[G],M.getImage(G),O)},au.prototype.patchUpdatedImage=function(M,O,G){if(M&&O&&M.version!==O.version){M.version=O.version;var ie=M.tl;G.update(O.data,void 0,{x:ie[0],y:ie[1]})}},_r("ImagePosition",Ou),_r("ImageAtlas",au);var Eo={horizontal:1,vertical:2,horizontalOnly:3},Iu=-17,Rl=function(){this.scale=1,this.fontStack="",this.imageName=null};Rl.forText=function(M,O){var G=new Rl;return G.scale=M||1,G.fontStack=O,G},Rl.forImage=function(M){var O=new Rl;return O.imageName=M,O};var Na=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function zu(M,O,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn){var zn,In=Na.fromFeature(M,be);Bt===Eo.vertical&&In.verticalizePunctuation();var Un=ua.processBidirectionalText,Vn=ua.processStyledBidirectionalText;if(Un&&1===In.sections.length){zn=[];for(var Wn=0,Qn=Un(In.toString(),Tc(In,kt,Le,O,ie,Vt,nn));Wn<Qn.length;Wn+=1){var nr=Qn[Wn],xr=new Na;xr.text=nr,xr.sections=In.sections;for(var pr=0;pr<nr.length;pr++)xr.sectionIndex.push(0);zn.push(xr)}}else if(Vn){zn=[];for(var Tr=0,Er=Vn(In.text,In.sectionIndex,Tc(In,kt,Le,O,ie,Vt,nn));Tr<Er.length;Tr+=1){var jr=Er[Tr],Pr=new Na;Pr.text=jr[0],Pr.sectionIndex=jr[1],Pr.sections=In.sections,zn.push(Pr)}}else zn=function(Cr,Jr){for(var qr=[],bi=Cr.text,Fr=0,gi=0,Ti=Jr;gi<Ti.length;gi+=1){var Ai=Ti[gi];qr.push(Cr.substring(Fr,Ai)),Fr=Ai}return Fr<bi.length&&qr.push(Cr.substring(Fr,bi.length)),qr}(In,Tc(In,kt,Le,O,ie,Vt,nn));var Nr=[],Ir={positionedLines:Nr,text:In.toString(),top:Mt[1],bottom:Mt[1],left:Mt[0],right:Mt[0],writingMode:Bt,iconsInText:!1,verticalizable:!1};return function(Cr,Jr,qr,bi,Fr,gi,Ti,Ai,Li,_i,ra,Oi){for(var da=0,Sa=Iu,ba=0,Za=0,_a="right"===Ai?1:"left"===Ai?0:.5,aa=0,wa=0,ga=Fr;wa<ga.length;wa+=1){var oa=ga[wa];oa.trim();var Gr=oa.getMaxScale(),ti=(Gr-1)*Ma,Ni={positionedGlyphs:[],lineOffset:0};Cr.positionedLines[aa]=Ni;var xi=Ni.positionedGlyphs,zi=0;if(oa.length()){for(var Ci=0;Ci<oa.length();Ci++){var ii=oa.getSection(Ci),ji=oa.getSectionIndex(Ci),Wa=oa.getCharCode(Ci),go=0,ja=null,ws=null,nl=null,va=Ma,Ts=!(Li===Eo.horizontal||!ra&&!za(Wa)||ra&&(Ru[Wa]||ys(Wa)));if(ii.imageName){var as=bi[ii.imageName];if(!as)continue;nl=ii.imageName,Cr.iconsInText=Cr.iconsInText||!0,ws=as.paddedRect;var os=as.displaySize;ii.scale=ii.scale*Ma/Oi,go=ti+(Ma-os[1]*ii.scale),va=(ja={width:os[0],height:os[1],left:1,top:-3,advance:Ts?os[1]:os[0]}).advance;var kl=Ts?os[0]*ii.scale-Ma*Gr:os[1]*ii.scale-Ma*Gr;kl>0&&kl>zi&&(zi=kl)}else{var qu=qr[ii.fontStack],Al=qu&&qu[Wa];if(Al&&Al.rect)ws=Al.rect,ja=Al.metrics;else{var Gu=Jr[ii.fontStack],lu=Gu&&Gu[Wa];if(!lu)continue;ja=lu.metrics}go=(Gr-ii.scale)*Ma}Ts?(Cr.verticalizable=!0,xi.push({glyph:Wa,imageName:nl,x:da,y:Sa+go,vertical:Ts,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:ji,metrics:ja,rect:ws}),da+=va*ii.scale+_i):(xi.push({glyph:Wa,imageName:nl,x:da,y:Sa+go,vertical:Ts,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:ji,metrics:ja,rect:ws}),da+=ja.advance*ii.scale+_i)}0!==xi.length&&(ba=Math.max(da-_i,ba),Pp(xi,0,xi.length-1,_a,zi)),da=0;var Zu=gi*Gr+zi;Ni.lineOffset=Math.max(zi,ti),Sa+=Zu,Za=Math.max(Zu,Za),++aa}else Sa+=gi,++aa}var Hl=Sa-Iu,Wu=kc(Ti),Yu=Wu.horizontalAlign,uu=Wu.verticalAlign;(function(zc,cu,Ml,ql,Xu,Ju,Gl,Ku,$u){var hu,fu=(cu-Ml)*Xu;hu=Ju!==Gl?-Ku*ql-Iu:(-ql*$u+.5)*Gl;for(var Sl=0,pu=zc;Sl<pu.length;Sl+=1)for(var El=0,du=pu[Sl].positionedGlyphs;El<du.length;El+=1){var gu=du[El];gu.x+=fu,gu.y+=hu}})(Cr.positionedLines,_a,Yu,uu,ba,Za,gi,Hl,Fr.length),Cr.top+=-uu*Hl,Cr.bottom=Cr.top+Hl,Cr.left+=-Yu*ba,Cr.right=Cr.left+ba}(Ir,O,G,ie,zn,je,Qe,lt,Bt,kt,qt,xn),!function(Cr){for(var Jr=0,qr=Cr;Jr<qr.length;Jr+=1)if(0!==qr[Jr].positionedGlyphs.length)return!1;return!0}(Nr)&&Ir}Na.fromFeature=function(M,O){for(var G=new Na,ie=0;ie<M.sections.length;ie++){var be=M.sections[ie];be.image?G.addImageSection(be):G.addTextSection(be,O)}return G},Na.prototype.length=function(){return this.text.length},Na.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},Na.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},Na.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},Na.prototype.verticalizePunctuation=function(){this.text=function(M){for(var O="",G=0;G<M.length;G++){var ie=M.charCodeAt(G+1)||null,be=M.charCodeAt(G-1)||null;ie&&Is(ie)&&!ru[M[G+1]]||be&&Is(be)&&!ru[M[G-1]]||!ru[M[G]]?O+=M[G]:O+=ru[M[G]]}return O}(this.text)},Na.prototype.trim=function(){for(var M=0,O=0;O<this.text.length&&Ru[this.text.charCodeAt(O)];O++)M++;for(var G=this.text.length,ie=this.text.length-1;ie>=0&&ie>=M&&Ru[this.text.charCodeAt(ie)];ie--)G--;this.text=this.text.substring(M,G),this.sectionIndex=this.sectionIndex.slice(M,G)},Na.prototype.substring=function(M,O){var G=new Na;return G.text=this.text.substring(M,O),G.sectionIndex=this.sectionIndex.slice(M,O),G.sections=this.sections,G},Na.prototype.toString=function(){return this.text},Na.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(O,G){return Math.max(O,M.sections[G].scale)},0)},Na.prototype.addTextSection=function(M,O){this.text+=M.text,this.sections.push(Rl.forText(M.scale,M.fontStack||O));for(var G=this.sections.length-1,ie=0;ie<M.text.length;++ie)this.sectionIndex.push(G)},Na.prototype.addImageSection=function(M){var O=M.image?M.image.name:"";if(0!==O.length){var G=this.getNextImageSectionCharCode();G?(this.text+=String.fromCharCode(G),this.sections.push(Rl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Na.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ru={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},po={};function kf(M,O,G,ie,be,Le){if(O.imageName){var je=ie[O.imageName];return je?je.displaySize[0]*O.scale*Ma/Le+be:0}var Qe=G[O.fontStack],lt=Qe&&Qe[M];return lt?lt.metrics.advance*O.scale+be:0}function Af(M,O,G,ie){var be=Math.pow(M-O,2);return ie?M<O?be/2:2*be:be+Math.abs(G)*G}function Cp(M,O,G){var ie=0;return 10===M&&(ie-=1e4),G&&(ie+=150),40!==M&&65288!==M||(ie+=50),41!==O&&65289!==O||(ie+=50),ie}function Mf(M,O,G,ie,be,Le){for(var je=null,Qe=Af(O,G,be,Le),lt=0,kt=ie;lt<kt.length;lt+=1){var Mt=kt[lt],Bt=Af(O-Mt.x,G,be,Le)+Mt.badness;Bt<=Qe&&(je=Mt,Qe=Bt)}return{index:M,x:O,priorBreak:je,badness:Qe}}function Sf(M){return M?Sf(M.priorBreak).concat(M.index):[]}function Tc(M,O,G,ie,be,Le,je){if("point"!==Le)return[];if(!M)return[];for(var Qe=[],lt=function(zn,In,Un,Vn,Wn,Qn){for(var nr=0,xr=0;xr<zn.length();xr++){var pr=zn.getSection(xr);nr+=kf(zn.getCharCode(xr),pr,Vn,Wn,In,Qn)}return nr/Math.max(1,Math.ceil(nr/Un))}(M,O,G,ie,be,je),kt=M.text.indexOf("\u200b")>=0,Mt=0,Bt=0;Bt<M.length();Bt++){var qt=M.getSection(Bt),Vt=M.getCharCode(Bt);if(Ru[Vt]||(Mt+=kf(Vt,qt,ie,be,O,je)),Bt<M.length()-1){var nn=!((xn=Vt)<11904||!(wr["Bopomofo Extended"](xn)||wr.Bopomofo(xn)||wr["CJK Compatibility Forms"](xn)||wr["CJK Compatibility Ideographs"](xn)||wr["CJK Compatibility"](xn)||wr["CJK Radicals Supplement"](xn)||wr["CJK Strokes"](xn)||wr["CJK Symbols and Punctuation"](xn)||wr["CJK Unified Ideographs Extension A"](xn)||wr["CJK Unified Ideographs"](xn)||wr["Enclosed CJK Letters and Months"](xn)||wr["Halfwidth and Fullwidth Forms"](xn)||wr.Hiragana(xn)||wr["Ideographic Description Characters"](xn)||wr["Kangxi Radicals"](xn)||wr["Katakana Phonetic Extensions"](xn)||wr.Katakana(xn)||wr["Vertical Forms"](xn)||wr["Yi Radicals"](xn)||wr["Yi Syllables"](xn)));(po[Vt]||nn||qt.imageName)&&Qe.push(Mf(Bt+1,Mt,lt,Qe,Cp(Vt,M.getCharCode(Bt+1),nn&&kt),!1))}}var xn;return Sf(Mf(M.length(),Mt,lt,Qe,0,!0))}function kc(M){var O=.5,G=.5;switch(M){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":G=1;break;case"top":case"top-right":case"top-left":G=0}return{horizontalAlign:O,verticalAlign:G}}function Pp(M,O,G,ie,be){if(ie||be)for(var Le=M[G],Qe=(M[G].x+Le.metrics.advance*Le.scale)*ie,lt=O;lt<=G;lt++)M[lt].x-=Qe,M[lt].y+=be}function Ef(M,O,G,ie,be,Le){var je,Qe=M.image;if(Qe.content){var lt=Qe.content,kt=Qe.pixelRatio||1;je=[lt[0]/kt,lt[1]/kt,Qe.displaySize[0]-lt[2]/kt,Qe.displaySize[1]-lt[3]/kt]}var Mt,Bt,qt,Vt,nn=O.left*Le,xn=O.right*Le;"width"===G||"both"===G?(Vt=be[0]+nn-ie[3],Bt=be[0]+xn+ie[1]):Bt=(Vt=be[0]+(nn+xn-Qe.displaySize[0])/2)+Qe.displaySize[0];var zn=O.top*Le,In=O.bottom*Le;return"height"===G||"both"===G?(Mt=be[1]+zn-ie[0],qt=be[1]+In+ie[2]):qt=(Mt=be[1]+(zn+In-Qe.displaySize[1])/2)+Qe.displaySize[1],{image:Qe,top:Mt,right:Bt,bottom:qt,left:Vt,collisionPadding:je}}po[10]=!0,po[32]=!0,po[38]=!0,po[40]=!0,po[41]=!0,po[43]=!0,po[45]=!0,po[47]=!0,po[173]=!0,po[183]=!0,po[8203]=!0,po[8208]=!0,po[8211]=!0,po[8231]=!0;var Dl=function(M){function O(G,ie,be,Le){M.call(this,G,ie),this.angle=be,void 0!==Le&&(this.segment=Le)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(t);_r("Anchor",Dl);var Fs=128;function Ac(M,O){var G=O.expression;if("constant"===G.kind)return{kind:"constant",layoutSize:G.evaluate(new ni(M+1))};if("source"===G.kind)return{kind:"source"};for(var ie=G.zoomStops,be=G.interpolationType,Le=0;Le<ie.length&&ie[Le]<=M;)Le++;for(var je=Le=Math.max(0,Le-1);je<ie.length&&ie[je]<M+1;)je++;je=Math.min(ie.length-1,je);var Qe=ie[Le],lt=ie[je];return"composite"===G.kind?{kind:"composite",minZoom:Qe,maxZoom:lt,interpolationType:be}:{kind:"camera",minZoom:Qe,maxZoom:lt,minSize:G.evaluate(new ni(Qe)),maxSize:G.evaluate(new ni(lt)),interpolationType:be}}function Lf(M,O,G){var ie=O.uSize,Le=G.lowerSize;return"source"===M.kind?Le/Fs:"composite"===M.kind?Sr(Le/Fs,G.upperSize/Fs,O.uSizeT):ie}function Cf(M,O){var G=0,ie=0;if("constant"===M.kind)ie=M.layoutSize;else if("source"!==M.kind){var be=M.interpolationType,Qe=be?a(Ri.interpolationFactor(be,O,M.minZoom,M.maxZoom),0,1):0;"camera"===M.kind?ie=Sr(M.minSize,M.maxSize,Qe):G=Qe}return{uSizeT:G,uSize:ie}}var Op=Object.freeze({__proto__:null,getSizeData:Ac,evaluateSizeForFeature:Lf,evaluateSizeForZoom:Cf,SIZE_PACK_FACTOR:Fs});function Pf(M,O,G,ie,be){if(void 0===O.segment)return!0;for(var Le=O,je=O.segment+1,Qe=0;Qe>-G/2;){if(--je<0)return!1;Qe-=M[je].dist(Le),Le=M[je]}Qe+=M[je].dist(M[je+1]),je++;for(var lt=[],kt=0;Qe<G/2;){var Bt=M[je],qt=M[je+1];if(!qt)return!1;var Vt=M[je-1].angleTo(Bt)-Bt.angleTo(qt);for(Vt=Math.abs((Vt+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Qe,angleDelta:Vt}),kt+=Vt;Qe-lt[0].distance>ie;)kt-=lt.shift().angleDelta;if(kt>be)return!1;je++,Qe+=Bt.dist(qt)}return!0}function Of(M){for(var O=0,G=0;G<M.length-1;G++)O+=M[G].dist(M[G+1]);return O}function If(M,O,G){return M?.6*O*G:0}function zf(M,O){return Math.max(M?M.right-M.left:0,O?O.right-O.left:0)}function Ip(M,O,G,ie,be,Le){for(var je=If(G,be,Le),Qe=zf(G,ie)*Le,lt=0,kt=Of(M)/2,Mt=0;Mt<M.length-1;Mt++){var Bt=M[Mt],qt=M[Mt+1],Vt=Bt.dist(qt);if(lt+Vt>kt){var nn=(kt-lt)/Vt,xn=Sr(Bt.x,qt.x,nn),zn=Sr(Bt.y,qt.y,nn),In=new Dl(xn,zn,qt.angleTo(Bt),Mt);return In._round(),!je||Pf(M,In,Qe,je,O)?In:void 0}lt+=Vt}}function zp(M,O,G,ie,be,Le,je,Qe,lt){var kt=If(ie,Le,je),Mt=zf(ie,be),Bt=Mt*je,qt=0===M[0].x||M[0].x===lt||0===M[0].y||M[0].y===lt;return O-Bt<O/4&&(O=Bt+O/4),Rf(M,qt?O/2*Qe%O:(Mt/2+2*Le)*je*Qe%O,O,kt,G,Bt,qt,!1,lt)}function Rf(M,O,G,ie,be,Le,je,Qe,lt){for(var kt=Le/2,Mt=Of(M),Bt=0,qt=O-G,Vt=[],nn=0;nn<M.length-1;nn++){for(var xn=M[nn],zn=M[nn+1],In=xn.dist(zn),Un=zn.angleTo(xn);qt+G<Bt+In;){var Vn=((qt+=G)-Bt)/In,Wn=Sr(xn.x,zn.x,Vn),Qn=Sr(xn.y,zn.y,Vn);if(Wn>=0&&Wn<lt&&Qn>=0&&Qn<lt&&qt-kt>=0&&qt+kt<=Mt){var nr=new Dl(Wn,Qn,Un,nn);nr._round(),ie&&!Pf(M,nr,Le,ie,be)||Vt.push(nr)}}Bt+=In}return Qe||Vt.length||je||(Vt=Rf(M,Bt/2,G,ie,be,Le,je,!0,lt)),Vt}function Df(M,O,G,ie,be){for(var Le=[],je=0;je<M.length;je++)for(var Qe=M[je],lt=void 0,kt=0;kt<Qe.length-1;kt++){var Mt=Qe[kt],Bt=Qe[kt+1];Mt.x<O&&Bt.x<O||(Mt.x<O?Mt=new t(O,Mt.y+(O-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round():Bt.x<O&&(Bt=new t(O,Mt.y+(O-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round()),Mt.y<G&&Bt.y<G||(Mt.y<G?Mt=new t(Mt.x+(G-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),G)._round():Bt.y<G&&(Bt=new t(Mt.x+(G-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),G)._round()),Mt.x>=ie&&Bt.x>=ie||(Mt.x>=ie?Mt=new t(ie,Mt.y+(ie-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round():Bt.x>=ie&&(Bt=new t(ie,Mt.y+(ie-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round()),Mt.y>=be&&Bt.y>=be||(Mt.y>=be?Mt=new t(Mt.x+(be-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),be)._round():Bt.y>=be&&(Bt=new t(Mt.x+(be-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),be)._round()),lt&&Mt.equals(lt[lt.length-1])||Le.push(lt=[Mt]),lt.push(Bt)))))}return Le}function Ff(M,O,G,ie){var be=[],Le=M.image,je=Le.pixelRatio,Qe=Le.paddedRect.w-2,lt=Le.paddedRect.h-2,kt=M.right-M.left,Mt=M.bottom-M.top,Bt=Le.stretchX||[[0,Qe]],qt=Le.stretchY||[[0,lt]],Vt=function(gi,Ti){return gi+Ti[1]-Ti[0]},nn=Bt.reduce(Vt,0),xn=qt.reduce(Vt,0),zn=Qe-nn,In=lt-xn,Un=0,Vn=nn,Wn=0,Qn=xn,nr=0,xr=zn,pr=0,Tr=In;if(Le.content&&ie){var Er=Le.content;Un=Du(Bt,0,Er[0]),Wn=Du(qt,0,Er[1]),Vn=Du(Bt,Er[0],Er[2]),Qn=Du(qt,Er[1],Er[3]),nr=Er[0]-Un,pr=Er[1]-Wn,xr=Er[2]-Er[0]-Vn,Tr=Er[3]-Er[1]-Qn}var jr=function(gi,Ti,Ai,Li){var _i=Fu(gi.stretch-Un,Vn,kt,M.left),ra=Bu(gi.fixed-nr,xr,gi.stretch,nn),Oi=Fu(Ti.stretch-Wn,Qn,Mt,M.top),da=Bu(Ti.fixed-pr,Tr,Ti.stretch,xn),Sa=Fu(Ai.stretch-Un,Vn,kt,M.left),ba=Bu(Ai.fixed-nr,xr,Ai.stretch,nn),Za=Fu(Li.stretch-Wn,Qn,Mt,M.top),_a=Bu(Li.fixed-pr,Tr,Li.stretch,xn),aa=new t(_i,Oi),wa=new t(Sa,Oi),ga=new t(Sa,Za),oa=new t(_i,Za),Gr=new t(ra/je,da/je),ti=new t(ba/je,_a/je),Ni=O*Math.PI/180;if(Ni){var xi=Math.sin(Ni),zi=Math.cos(Ni),Ci=[zi,-xi,xi,zi];aa._matMult(Ci),wa._matMult(Ci),oa._matMult(Ci),ga._matMult(Ci)}var ii=gi.stretch+gi.fixed,Wa=Ti.stretch+Ti.fixed;return{tl:aa,tr:wa,bl:oa,br:ga,tex:{x:Le.paddedRect.x+1+ii,y:Le.paddedRect.y+1+Wa,w:Ai.stretch+Ai.fixed-ii,h:Li.stretch+Li.fixed-Wa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gr,pixelOffsetBR:ti,minFontScaleX:xr/je/kt,minFontScaleY:Tr/je/Mt,isSDF:G}};if(ie&&(Le.stretchX||Le.stretchY))for(var Pr=Bf(Bt,zn,nn),Nr=Bf(qt,In,xn),Ir=0;Ir<Pr.length-1;Ir++)for(var Cr=Pr[Ir],Jr=Pr[Ir+1],qr=0;qr<Nr.length-1;qr++)be.push(jr(Cr,Nr[qr],Jr,Nr[qr+1]));else be.push(jr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:lt+1}));return be}function Du(M,O,G){for(var ie=0,be=0,Le=M;be<Le.length;be+=1){var je=Le[be];ie+=Math.max(O,Math.min(G,je[1]))-Math.max(O,Math.min(G,je[0]))}return ie}function Bf(M,O,G){for(var ie=[{fixed:-1,stretch:0}],be=0,Le=M;be<Le.length;be+=1){var je=Le[be],Qe=je[0],lt=je[1],kt=ie[ie.length-1];ie.push({fixed:Qe-kt.stretch,stretch:kt.stretch}),ie.push({fixed:Qe-kt.stretch,stretch:kt.stretch+(lt-Qe)})}return ie.push({fixed:O+1,stretch:G}),ie}function Fu(M,O,G,ie){return M/O*G+ie}function Bu(M,O,G,ie){return M-O*G/ie}var Nu=function(M,O,G,ie,be,Le,je,Qe,lt,kt){if(this.boxStartIndex=M.length,lt){var Mt=Le.top,Bt=Le.bottom,qt=Le.collisionPadding;qt&&(Mt-=qt[1],Bt+=qt[3]);var Vt=Bt-Mt;Vt>0&&(Vt=Math.max(10,Vt),this.circleDiameter=Vt)}else{var nn=Le.top*je-Qe,xn=Le.bottom*je+Qe,zn=Le.left*je-Qe,In=Le.right*je+Qe,Un=Le.collisionPadding;if(Un&&(zn-=Un[0]*je,nn-=Un[1]*je,In+=Un[2]*je,xn+=Un[3]*je),kt){var Vn=new t(zn,nn),Wn=new t(In,nn),Qn=new t(zn,xn),nr=new t(In,xn),xr=kt*Math.PI/180;Vn._rotate(xr),Wn._rotate(xr),Qn._rotate(xr),nr._rotate(xr),zn=Math.min(Vn.x,Wn.x,Qn.x,nr.x),In=Math.max(Vn.x,Wn.x,Qn.x,nr.x),nn=Math.min(Vn.y,Wn.y,Qn.y,nr.y),xn=Math.max(Vn.y,Wn.y,Qn.y,nr.y)}M.emplaceBack(O.x,O.y,zn,nn,In,xn,G,ie,be)}this.boxEndIndex=M.length},Fl=function(M,O){if(void 0===M&&(M=[]),void 0===O&&(O=Rp),this.data=M,this.length=this.data.length,this.compare=O,this.length>0)for(var G=(this.length>>1)-1;G>=0;G--)this._down(G)};function Rp(M,O){return M<O?-1:M>O?1:0}function Dp(M,O,G){void 0===O&&(O=1),void 0===G&&(G=!1);for(var ie=1/0,be=1/0,Le=-1/0,je=-1/0,Qe=M[0],lt=0;lt<Qe.length;lt++){var kt=Qe[lt];(!lt||kt.x<ie)&&(ie=kt.x),(!lt||kt.y<be)&&(be=kt.y),(!lt||kt.x>Le)&&(Le=kt.x),(!lt||kt.y>je)&&(je=kt.y)}var qt=Math.min(Le-ie,je-be),Vt=qt/2,nn=new Fl([],Fp);if(0===qt)return new t(ie,be);for(var xn=ie;xn<Le;xn+=qt)for(var zn=be;zn<je;zn+=qt)nn.push(new Bl(xn+Vt,zn+Vt,Vt,M));for(var In=function(Wn){for(var Qn=0,nr=0,xr=0,pr=Wn[0],Tr=0,Er=pr.length,jr=Er-1;Tr<Er;jr=Tr++){var Pr=pr[Tr],Nr=pr[jr],Ir=Pr.x*Nr.y-Nr.x*Pr.y;nr+=(Pr.x+Nr.x)*Ir,xr+=(Pr.y+Nr.y)*Ir,Qn+=3*Ir}return new Bl(nr/Qn,xr/Qn,0,Wn)}(M),Un=nn.length;nn.length;){var Vn=nn.pop();(Vn.d>In.d||!In.d)&&(In=Vn,G&&console.log("found best %d after %d probes",Math.round(1e4*Vn.d)/1e4,Un)),Vn.max-In.d<=O||(nn.push(new Bl(Vn.p.x-(Vt=Vn.h/2),Vn.p.y-Vt,Vt,M)),nn.push(new Bl(Vn.p.x+Vt,Vn.p.y-Vt,Vt,M)),nn.push(new Bl(Vn.p.x-Vt,Vn.p.y+Vt,Vt,M)),nn.push(new Bl(Vn.p.x+Vt,Vn.p.y+Vt,Vt,M)),Un+=4)}return G&&(console.log("num probes: "+Un),console.log("best distance: "+In.d)),In.p}function Fp(M,O){return O.max-M.max}function Bl(M,O,G,ie){this.p=new t(M,O),this.h=G,this.d=function(be,Le){for(var je=!1,Qe=1/0,lt=0;lt<Le.length;lt++)for(var kt=Le[lt],Mt=0,Bt=kt.length,qt=Bt-1;Mt<Bt;qt=Mt++){var Vt=kt[Mt],nn=kt[qt];Vt.y>be.y!=nn.y>be.y&&be.x<(nn.x-Vt.x)*(be.y-Vt.y)/(nn.y-Vt.y)+Vt.x&&(je=!je),Qe=Math.min(Qe,_u(be,Vt,nn))}return(je?1:-1)*Math.sqrt(Qe)}(this.p,ie),this.max=this.d+this.h*Math.SQRT2}Fl.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Fl.prototype.pop=function(){if(0!==this.length){var M=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),M}},Fl.prototype.peek=function(){return this.data[0]},Fl.prototype._up=function(M){for(var O=this.data,G=this.compare,ie=O[M];M>0;){var be=M-1>>1,Le=O[be];if(G(ie,Le)>=0)break;O[M]=Le,M=be}O[M]=ie},Fl.prototype._down=function(M){for(var O=this.data,G=this.compare,ie=this.length>>1,be=O[M];M<ie;){var Le=1+(M<<1),je=O[Le],Qe=Le+1;if(Qe<this.length&&G(O[Qe],je)<0&&(Le=Qe,je=O[Qe]),G(je,be)>=0)break;O[M]=je,M=Le}O[M]=be};var Mc=Number.POSITIVE_INFINITY;function Nf(M,O){return O[1]!==Mc?function(G,ie,be){var Le=0,je=0;switch(ie=Math.abs(ie),be=Math.abs(be),G){case"top-right":case"top-left":case"top":je=be-7;break;case"bottom-right":case"bottom-left":case"bottom":je=7-be}switch(G){case"top-right":case"bottom-right":case"right":Le=-ie;break;case"top-left":case"bottom-left":case"left":Le=ie}return[Le,je]}(M,O[0],O[1]):function(G,ie){var be=0,Le=0;ie<0&&(ie=0);var je=ie/Math.sqrt(2);switch(G){case"top-right":case"top-left":Le=je-7;break;case"bottom-right":case"bottom-left":Le=7-je;break;case"bottom":Le=7-ie;break;case"top":Le=ie-7}switch(G){case"top-right":case"bottom-right":be=-je;break;case"top-left":case"bottom-left":be=je;break;case"left":be=ie;break;case"right":be=-ie}return[be,Le]}(M,O[0])}function Sc(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var hl=32640;function jf(M,O,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn){var xn=function(Wn,Qn,nr,xr,pr,Tr,Er,jr){for(var Pr=xr.layout.get("text-rotate").evaluate(Tr,{})*Math.PI/180,Nr=[],Ir=0,Cr=Qn.positionedLines;Ir<Cr.length;Ir+=1)for(var Jr=Cr[Ir],qr=0,bi=Jr.positionedGlyphs;qr<bi.length;qr+=1){var Fr=bi[qr];if(Fr.rect){var gi=Fr.rect||{},Ti=4,Ai=!0,Li=1,_i=0,ra=(pr||jr)&&Fr.vertical,Oi=Fr.metrics.advance*Fr.scale/2;if(jr&&Qn.verticalizable&&(_i=Jr.lineOffset/2-(Fr.imageName?-(Ma-Fr.metrics.width*Fr.scale)/2:(Fr.scale-1)*Ma)),Fr.imageName){var ba=Er[Fr.imageName];Ai=ba.sdf,Ti=1/(Li=ba.pixelRatio)}var Za=pr?[Fr.x+Oi,Fr.y]:[0,0],_a=pr?[0,0]:[Fr.x+Oi+nr[0],Fr.y+nr[1]-_i],aa=[0,0];ra&&(aa=_a,_a=[0,0]);var wa=(Fr.metrics.left-Ti)*Fr.scale-Oi+_a[0],ga=(-Fr.metrics.top-Ti)*Fr.scale+_a[1],oa=wa+gi.w*Fr.scale/Li,Gr=ga+gi.h*Fr.scale/Li,ti=new t(wa,ga),Ni=new t(oa,ga),xi=new t(wa,Gr),zi=new t(oa,Gr);if(ra){var Ci=new t(-Oi,Oi-Iu),ii=-Math.PI/2,ji=12-Oi,go=new t(22-ji,-(Fr.imageName?ji:0)),ja=new(Function.prototype.bind.apply(t,[null].concat(aa)));ti._rotateAround(ii,Ci)._add(go)._add(ja),Ni._rotateAround(ii,Ci)._add(go)._add(ja),xi._rotateAround(ii,Ci)._add(go)._add(ja),zi._rotateAround(ii,Ci)._add(go)._add(ja)}if(Pr){var ws=Math.sin(Pr),nl=Math.cos(Pr),va=[nl,-ws,ws,nl];ti._matMult(va),Ni._matMult(va),xi._matMult(va),zi._matMult(va)}var Ts=new t(0,0),as=new t(0,0);Nr.push({tl:ti,tr:Ni,bl:xi,br:zi,tex:gi,writingMode:Qn.writingMode,glyphOffset:Za,sectionIndex:Fr.sectionIndex,isSDF:Ai,pixelOffsetTL:Ts,pixelOffsetBR:as,minFontScaleX:0,minFontScaleY:0})}}return Nr}(0,G,Qe,be,Le,je,ie,M.allowVerticalPlacement),zn=M.textSizeData,In=null;"source"===zn.kind?(In=[Fs*be.layout.get("text-size").evaluate(je,{})])[0]>hl&&S(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===zn.kind&&((In=[Fs*Vt.compositeTextSizes[0].evaluate(je,{},nn),Fs*Vt.compositeTextSizes[1].evaluate(je,{},nn)])[0]>hl||In[1]>hl)&&S(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,xn,In,Qe,Le,je,kt,O,lt.lineStartIndex,lt.lineLength,qt,nn);for(var Un=0,Vn=Mt;Un<Vn.length;Un+=1)Bt[Vn[Un]]=M.text.placedSymbolArray.length-1;return 4*xn.length}function Uf(M){for(var O in M)return M[O];return null}function Bp(M,O,G,ie){var be=M.compareText;if(O in be){for(var Le=be[O],je=Le.length-1;je>=0;je--)if(ie.dist(Le[je])<G)return!0}else be[O]=[];return be[O].push(ie),!1}var Np=Ol.VectorTileFeature.types,jp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ju(M,O,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt){var Vt=Qe?Math.min(hl,Math.round(Qe[0])):0,nn=Qe?Math.min(hl,Math.round(Qe[1])):0;M.emplaceBack(O,G,Math.round(32*ie),Math.round(32*be),Le,je,(Vt<<1)+(lt?1:0),nn,16*kt,16*Mt,256*Bt,256*qt)}function Ec(M,O,G){M.emplaceBack(O.x,O.y,G),M.emplaceBack(O.x,O.y,G),M.emplaceBack(O.x,O.y,G),M.emplaceBack(O.x,O.y,G)}function Up(M){for(var O=0,G=M.sections;O<G.length;O+=1)if(uo(G[O].text))return!0;return!1}var Nl=function(M){this.layoutVertexArray=new mt,this.indexArray=new Ne,this.programConfigurations=M,this.segments=new en,this.dynamicLayoutVertexArray=new D,this.opacityVertexArray=new Y,this.placedSymbolArray=new it};Nl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Nl.prototype.upload=function(M,O,G,ie){this.isEmpty()||(G&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,_c.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,dp.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,jp,!0),this.opacityVertexBuffer.itemSize=1),(G||ie)&&this.programConfigurations.upload(M))},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_r("SymbolBuffers",Nl);var ou=function(M,O,G){this.layoutVertexArray=new M,this.layoutAttributes=O,this.indexArray=new G,this.segments=new en,this.collisionVertexArray=new Ce};ou.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,gp.members,!0)},ou.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_r("CollisionBuffers",ou);var di=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cc([]),this.placementViewportMatrix=cc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ac(this.zoom,O["text-size"]),this.iconSizeData=Ac(this.zoom,O["icon-size"]);var G=this.layers[0].layout,ie=G.get("symbol-sort-key"),be=G.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==be&&void 0!==ie.constantOr(1),this.sortFeaturesByY=("viewport-y"===be||"auto"===be&&!this.sortFeaturesByKey)&&(G.get("text-allow-overlap")||G.get("icon-allow-overlap")||G.get("text-ignore-placement")||G.get("icon-ignore-placement")),"point"===G.get("symbol-placement")&&(this.writingModes=G.get("text-writing-mode").map(function(je){return Eo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=M.sourceID};di.prototype.createArrays=function(){this.text=new Nl(new Si(_c.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Nl(new Si(_c.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new Ft,this.symbolInstances=new St},di.prototype.calculateGlyphDependencies=function(M,O,G,ie,be){for(var Le=0;Le<M.length;Le++)if(O[M.charCodeAt(Le)]=!0,(G||ie)&&be){var je=ru[M.charAt(Le)];je&&(O[je.charCodeAt(0)]=!0)}},di.prototype.populate=function(M,O,G){var ie=this.layers[0],be=ie.layout,Le=be.get("text-font"),je=be.get("text-field"),Qe=be.get("icon-image"),lt=("constant"!==je.value.kind||je.value.value instanceof Rn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&("constant"!==Le.value.kind||Le.value.value.length>0),kt="constant"!==Qe.value.kind||!!Qe.value.value||Object.keys(Qe.parameters).length>0,Mt=be.get("symbol-sort-key");if(this.features=[],lt||kt){for(var Bt=O.iconDependencies,qt=O.glyphDependencies,Vt=O.availableImages,nn=new ni(this.zoom),xn=0,zn=M;xn<zn.length;xn+=1){var In=zn[xn],Un=In.feature,Vn=In.id,Wn=In.index,Qn=In.sourceLayerIndex,nr=ie._featureFilter.needGeometry,xr={type:Un.type,id:Vn,properties:Un.properties,geometry:nr?ki(Un):[]};if(ie._featureFilter.filter(nn,xr,G)){nr||(xr.geometry=ki(Un));var pr=void 0;if(lt){var Tr=ie.getValueAndResolveTokens("text-field",xr,G,Vt),Er=Rn.factory(Tr);Up(Er)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Fa()||this.hasRTLText&&ua.isParsed())&&(pr=mp(Er,ie,xr))}var jr=void 0;if(kt){var Pr=ie.getValueAndResolveTokens("icon-image",xr,G,Vt);jr=Pr instanceof Nn?Pr:Nn.fromString(Pr)}if(pr||jr){var Nr=this.sortFeaturesByKey?Mt.evaluate(xr,{},G):void 0,Ir={id:Vn,text:pr,icon:jr,index:Wn,sourceLayerIndex:Qn,geometry:ki(Un),properties:Un.properties,type:Np[Un.type],sortKey:Nr};if(this.features.push(Ir),jr&&(Bt[jr.name]=!0),pr){var Cr=Le.evaluate(xr,{},G).join(","),Jr="map"===be.get("text-rotation-alignment")&&"point"!==be.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Eo.vertical)>=0;for(var qr=0,bi=pr.sections;qr<bi.length;qr+=1){var Fr=bi[qr];if(Fr.image)Bt[Fr.image.name]=!0;else{var gi=ns(pr.toString()),Ti=Fr.fontStack||Cr,Ai=qt[Ti]=qt[Ti]||{};this.calculateGlyphDependencies(Fr.text,Ai,Jr,this.allowVerticalPlacement,gi)}}}}}}"line"===be.get("symbol-placement")&&(this.features=function(Li){var _i={},ra={},Oi=[],da=0;function Sa(zi){Oi.push(Li[zi]),da++}function ba(zi,Ci,ii){var ji=ra[zi];return delete ra[zi],ra[Ci]=ji,Oi[ji].geometry[0].pop(),Oi[ji].geometry[0]=Oi[ji].geometry[0].concat(ii[0]),ji}function Za(zi,Ci,ii){var ji=_i[Ci];return delete _i[Ci],_i[zi]=ji,Oi[ji].geometry[0].shift(),Oi[ji].geometry[0]=ii[0].concat(Oi[ji].geometry[0]),ji}function _a(zi,Ci,ii){var ji=ii?Ci[0][Ci[0].length-1]:Ci[0][0];return zi+":"+ji.x+":"+ji.y}for(var aa=0;aa<Li.length;aa++){var wa=Li[aa],ga=wa.geometry,oa=wa.text?wa.text.toString():null;if(oa){var Gr=_a(oa,ga),ti=_a(oa,ga,!0);if(Gr in ra&&ti in _i&&ra[Gr]!==_i[ti]){var Ni=Za(Gr,ti,ga),xi=ba(Gr,ti,Oi[Ni].geometry);delete _i[Gr],delete ra[ti],ra[_a(oa,Oi[xi].geometry,!0)]=xi,Oi[Ni].geometry=null}else Gr in ra?ba(Gr,ti,ga):ti in _i?Za(Gr,ti,ga):(Sa(aa),_i[Gr]=da-1,ra[ti]=da-1)}else Sa(aa)}return Oi.filter(function(zi){return zi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Li,_i){return Li.sortKey-_i.sortKey})}},di.prototype.update=function(M,O,G){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,O,this.layers,G),this.icon.programConfigurations.updatePaintArrays(M,O,this.layers,G))},di.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},di.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},di.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},di.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},di.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},di.prototype.addToLineVertexArray=function(M,O){var G=this.lineVertexArray.length;if(void 0!==M.segment){for(var ie=M.dist(O[M.segment+1]),be=M.dist(O[M.segment]),Le={},je=M.segment+1;je<O.length;je++)Le[je]={x:O[je].x,y:O[je].y,tileUnitDistanceFromAnchor:ie},je<O.length-1&&(ie+=O[je+1].dist(O[je]));for(var Qe=M.segment||0;Qe>=0;Qe--)Le[Qe]={x:O[Qe].x,y:O[Qe].y,tileUnitDistanceFromAnchor:be},Qe>0&&(be+=O[Qe-1].dist(O[Qe]));for(var lt=0;lt<O.length;lt++){var kt=Le[lt];this.lineVertexArray.emplaceBack(kt.x,kt.y,kt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:G,lineLength:this.lineVertexArray.length-G}},di.prototype.addSymbols=function(M,O,G,ie,be,Le,je,Qe,lt,kt,Mt,Bt){for(var qt=M.indexArray,Vt=M.layoutVertexArray,nn=M.segments.prepareSegment(4*O.length,Vt,qt,Le.sortKey),xn=this.glyphOffsetArray.length,zn=nn.vertexLength,In=this.allowVerticalPlacement&&je===Eo.vertical?Math.PI/2:0,Un=Le.text&&Le.text.sections,Vn=0;Vn<O.length;Vn++){var Wn=O[Vn],Qn=Wn.tl,nr=Wn.tr,xr=Wn.bl,pr=Wn.br,Tr=Wn.tex,Er=Wn.pixelOffsetTL,jr=Wn.pixelOffsetBR,Pr=Wn.minFontScaleX,Nr=Wn.minFontScaleY,Ir=Wn.glyphOffset,Cr=Wn.isSDF,Jr=Wn.sectionIndex,qr=nn.vertexLength,bi=Ir[1];ju(Vt,Qe.x,Qe.y,Qn.x,bi+Qn.y,Tr.x,Tr.y,G,Cr,Er.x,Er.y,Pr,Nr),ju(Vt,Qe.x,Qe.y,nr.x,bi+nr.y,Tr.x+Tr.w,Tr.y,G,Cr,jr.x,Er.y,Pr,Nr),ju(Vt,Qe.x,Qe.y,xr.x,bi+xr.y,Tr.x,Tr.y+Tr.h,G,Cr,Er.x,jr.y,Pr,Nr),ju(Vt,Qe.x,Qe.y,pr.x,bi+pr.y,Tr.x+Tr.w,Tr.y+Tr.h,G,Cr,jr.x,jr.y,Pr,Nr),Ec(M.dynamicLayoutVertexArray,Qe,In),qt.emplaceBack(qr,qr+1,qr+2),qt.emplaceBack(qr+1,qr+2,qr+3),nn.vertexLength+=4,nn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ir[0]),Vn!==O.length-1&&Jr===O[Vn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Vt.length,Le,Le.index,{},Bt,Un&&Un[Jr])}M.placedSymbolArray.emplaceBack(Qe.x,Qe.y,xn,this.glyphOffsetArray.length-xn,zn,lt,kt,Qe.segment,G?G[0]:0,G?G[1]:0,ie[0],ie[1],je,0,!1,0,Mt)},di.prototype._addCollisionDebugVertex=function(M,O,G,ie,be,Le){return O.emplaceBack(0,0),M.emplaceBack(G.x,G.y,ie,be,Math.round(Le.x),Math.round(Le.y))},di.prototype.addCollisionDebugVertices=function(M,O,G,ie,be,Le,je){var Qe=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),lt=Qe.vertexLength,kt=be.layoutVertexArray,Mt=be.collisionVertexArray,Bt=je.anchorX,qt=je.anchorY;this._addCollisionDebugVertex(kt,Mt,Le,Bt,qt,new t(M,O)),this._addCollisionDebugVertex(kt,Mt,Le,Bt,qt,new t(G,O)),this._addCollisionDebugVertex(kt,Mt,Le,Bt,qt,new t(G,ie)),this._addCollisionDebugVertex(kt,Mt,Le,Bt,qt,new t(M,ie)),Qe.vertexLength+=4;var Vt=be.indexArray;Vt.emplaceBack(lt,lt+1),Vt.emplaceBack(lt+1,lt+2),Vt.emplaceBack(lt+2,lt+3),Vt.emplaceBack(lt+3,lt),Qe.primitiveLength+=4},di.prototype.addDebugCollisionBoxes=function(M,O,G,ie){for(var be=M;be<O;be++){var Le=this.collisionBoxArray.get(be);this.addCollisionDebugVertices(Le.x1,Le.y1,Le.x2,Le.y2,ie?this.textCollisionBox:this.iconCollisionBox,Le.anchorPoint,G)}},di.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ou(te,vf.members,ue),this.iconCollisionBox=new ou(te,vf.members,ue);for(var M=0;M<this.symbolInstances.length;M++){var O=this.symbolInstances.get(M);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},di.prototype._deserializeCollisionBoxesForSymbol=function(M,O,G,ie,be,Le,je,Qe,lt){for(var kt={},Mt=O;Mt<G;Mt++){var Bt=M.get(Mt);kt.textBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},kt.textFeatureIndex=Bt.featureIndex;break}for(var qt=ie;qt<be;qt++){var Vt=M.get(qt);kt.verticalTextBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},kt.verticalTextFeatureIndex=Vt.featureIndex;break}for(var nn=Le;nn<je;nn++){var xn=M.get(nn);kt.iconBox={x1:xn.x1,y1:xn.y1,x2:xn.x2,y2:xn.y2,anchorPointX:xn.anchorPointX,anchorPointY:xn.anchorPointY},kt.iconFeatureIndex=xn.featureIndex;break}for(var zn=Qe;zn<lt;zn++){var In=M.get(zn);kt.verticalIconBox={x1:In.x1,y1:In.y1,x2:In.x2,y2:In.y2,anchorPointX:In.anchorPointX,anchorPointY:In.anchorPointY},kt.verticalIconFeatureIndex=In.featureIndex;break}return kt},di.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var G=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,G.textBoxStartIndex,G.textBoxEndIndex,G.verticalTextBoxStartIndex,G.verticalTextBoxEndIndex,G.iconBoxStartIndex,G.iconBoxEndIndex,G.verticalIconBoxStartIndex,G.verticalIconBoxEndIndex))}},di.prototype.hasTextData=function(){return this.text.segments.get().length>0},di.prototype.hasIconData=function(){return this.icon.segments.get().length>0},di.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},di.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},di.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},di.prototype.addIndicesForPlacedSymbol=function(M,O){for(var G=M.placedSymbolArray.get(O),ie=G.vertexStartIndex+4*G.numGlyphs,be=G.vertexStartIndex;be<ie;be+=4)M.indexArray.emplaceBack(be,be+1,be+2),M.indexArray.emplaceBack(be+1,be+2,be+3)},di.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var O=Math.sin(M),G=Math.cos(M),ie=[],be=[],Le=[],je=0;je<this.symbolInstances.length;++je){Le.push(je);var Qe=this.symbolInstances.get(je);ie.push(0|Math.round(O*Qe.anchorX+G*Qe.anchorY)),be.push(Qe.featureIndex)}return Le.sort(function(lt,kt){return ie[lt]-ie[kt]||be[kt]-be[lt]}),Le},di.prototype.addToSortKeyRanges=function(M,O){var G=this.sortKeyRanges[this.sortKeyRanges.length-1];G&&G.sortKey===O?G.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:M,symbolInstanceEnd:M+1})},di.prototype.sortFeatures=function(M){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var G=0,ie=this.symbolInstanceIndexes;G<ie.length;G+=1){var Le=this.symbolInstances.get(ie[G]);this.featureSortOrder.push(Le.featureIndex),[Le.rightJustifiedTextSymbolIndex,Le.centerJustifiedTextSymbolIndex,Le.leftJustifiedTextSymbolIndex].forEach(function(je,Qe,lt){je>=0&&lt.indexOf(je)===Qe&&O.addIndicesForPlacedSymbol(O.text,je)}),Le.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Le.verticalPlacedTextSymbolIndex),Le.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Le.placedIconSymbolIndex),Le.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Le.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_r("SymbolBucket",di,{omit:["layers","collisionBoxArray","features","compareText"]}),di.MAX_GLYPHS=65535,di.addDynamicAttributes=Ec;var Vp=new $i({"symbol-placement":new Mr(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new Mr(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mr(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mr(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mr(Se.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mr(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mr(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mr(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(Se.layout_symbol["icon-size"]),"icon-text-fit":new Mr(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mr(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(Se.layout_symbol["icon-image"]),"icon-rotate":new Or(Se.layout_symbol["icon-rotate"]),"icon-padding":new Mr(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new Mr(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(Se.layout_symbol["icon-offset"]),"icon-anchor":new Or(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mr(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mr(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mr(Se.layout_symbol["text-rotation-alignment"]),"text-field":new Or(Se.layout_symbol["text-field"]),"text-font":new Or(Se.layout_symbol["text-font"]),"text-size":new Or(Se.layout_symbol["text-size"]),"text-max-width":new Or(Se.layout_symbol["text-max-width"]),"text-line-height":new Mr(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(Se.layout_symbol["text-letter-spacing"]),"text-justify":new Or(Se.layout_symbol["text-justify"]),"text-radial-offset":new Or(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mr(Se.layout_symbol["text-variable-anchor"]),"text-anchor":new Or(Se.layout_symbol["text-anchor"]),"text-max-angle":new Mr(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new Mr(Se.layout_symbol["text-writing-mode"]),"text-rotate":new Or(Se.layout_symbol["text-rotate"]),"text-padding":new Mr(Se.layout_symbol["text-padding"]),"text-keep-upright":new Mr(Se.layout_symbol["text-keep-upright"]),"text-transform":new Or(Se.layout_symbol["text-transform"]),"text-offset":new Or(Se.layout_symbol["text-offset"]),"text-allow-overlap":new Mr(Se.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mr(Se.layout_symbol["text-ignore-placement"]),"text-optional":new Mr(Se.layout_symbol["text-optional"])}),Lc={paint:new $i({"icon-opacity":new Or(Se.paint_symbol["icon-opacity"]),"icon-color":new Or(Se.paint_symbol["icon-color"]),"icon-halo-color":new Or(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new Mr(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mr(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(Se.paint_symbol["text-opacity"]),"text-color":new Or(Se.paint_symbol["text-color"],{runtimeType:zt,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Or(Se.paint_symbol["text-halo-color"]),"text-halo-width":new Or(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(Se.paint_symbol["text-halo-blur"]),"text-translate":new Mr(Se.paint_symbol["text-translate"]),"text-translate-anchor":new Mr(Se.paint_symbol["text-translate-anchor"])}),layout:Vp},jl=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:ht,this.defaultValue=M};jl.prototype.evaluate=function(M){if(M.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(M.formattedSection))return O.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},jl.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},jl.prototype.outputDefined=function(){return!1},jl.prototype.serialize=function(){return null},_r("FormatSectionOverride",jl,{omit:["defaultValue"]});var Hp=function(M){function O(G){M.call(this,G,Lc)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.recalculate=function(G,ie){if(M.prototype.recalculate.call(this,G,ie),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var be=this.layout.get("text-writing-mode");if(be){for(var Le=[],je=0,Qe=be;je<Qe.length;je+=1){var lt=Qe[je];Le.indexOf(lt)<0&&Le.push(lt)}this.layout._values["text-writing-mode"]=Le}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(G,ie,be,Le){var lt,je=this.layout.get(G).evaluate(ie,{},be,Le),Qe=this._unevaluatedLayout._values[G];return Qe.isDataDriven()||Jo(Qe.value)||!je?je:(lt=ie.properties,je.replace(/{([^{}]+)}/g,function(Mt,Bt){return Bt in lt?String(lt[Bt]):""}))},O.prototype.createBucket=function(G){return new di(G)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var G=0,ie=Lc.paint.overridableProperties;G<ie.length;G+=1){var be=ie[G];if(O.hasPaintOverride(this.layout,be)){var Le,je=this.paint.get(be),Qe=new jl(je),lt=new cs(Qe,je.property.specification);Le="constant"===je.value.kind||"source"===je.value.kind?new Io("source",lt):new zo("composite",lt,je.value.zoomStops,je.value._interpolationType),this.paint._values[be]=new Ki(je.property,Le,je.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(G,ie,be){return!(!this.layout||ie.isDataDriven()||be.isDataDriven())&&O.hasPaintOverride(this.layout,G)},O.hasPaintOverride=function(G,ie){var be=G.get("text-field"),Le=Lc.paint.properties[ie],je=!1,Qe=function(Mt){for(var Bt=0,qt=Mt;Bt<qt.length;Bt+=1)if(Le.overrides&&Le.overrides.hasOverride(qt[Bt]))return void(je=!0)};if("constant"===be.value.kind&&be.value.value instanceof Rn)Qe(be.value.value.sections);else if("source"===be.value.kind){var lt=function(Mt){je||(Mt instanceof lr&&Kn(Mt.value)===Gt?Qe(Mt.value.sections):Mt instanceof Jt?Qe(Mt.sections):Mt.eachChild(lt))},kt=be.value;kt._styleExpression&&lt(kt._styleExpression.expression)}return je},O}(fa),qp={paint:new $i({"background-color":new Mr(Se.paint_background["background-color"]),"background-pattern":new fo(Se.paint_background["background-pattern"]),"background-opacity":new Mr(Se.paint_background["background-opacity"])})},Gp=function(M){function O(G){M.call(this,G,qp)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O}(fa),Zp={paint:new $i({"raster-opacity":new Mr(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mr(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mr(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mr(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new Mr(Se.paint_raster["raster-saturation"]),"raster-contrast":new Mr(Se.paint_raster["raster-contrast"]),"raster-resampling":new Mr(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new Mr(Se.paint_raster["raster-fade-duration"])})},Wp=function(M){function O(G){M.call(this,G,Zp)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O}(fa),Yp=function(M){function O(G){M.call(this,G,{}),this.implementation=G}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},O.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(G){this.implementation.onAdd&&this.implementation.onAdd(G,G.painter.context.gl)},O.prototype.onRemove=function(G){this.implementation.onRemove&&this.implementation.onRemove(G,G.painter.context.gl)},O}(fa),Xp={circle:zh,heatmap:Dh,hillshade:Bh,fill:ep,"fill-extrusion":lp,line:pp,symbol:Hp,background:Gp,raster:Wp},Vf=self.HTMLImageElement,Hf=self.HTMLCanvasElement,qf=self.HTMLVideoElement,Gf=self.ImageData,Uu=self.ImageBitmap,_l=function(M,O,G,ie){this.context=M,this.format=G,this.texture=M.gl.createTexture(),this.update(O,ie)};_l.prototype.update=function(M,O,G){var ie=M.width,be=M.height,Le=!(this.size&&this.size[0]===ie&&this.size[1]===be||G),je=this.context,Qe=je.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Qe.bindTexture(Qe.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Qe.RGBA&&(!O||!1!==O.premultiply)),Le)this.size=[ie,be],M instanceof Vf||M instanceof Hf||M instanceof qf||M instanceof Gf||Uu&&M instanceof Uu?Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,this.format,Qe.UNSIGNED_BYTE,M):Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,ie,be,0,this.format,Qe.UNSIGNED_BYTE,M.data);else{var lt=G||{x:0,y:0},kt=lt.x,Mt=lt.y;M instanceof Vf||M instanceof Hf||M instanceof qf||M instanceof Gf||Uu&&M instanceof Uu?Qe.texSubImage2D(Qe.TEXTURE_2D,0,kt,Mt,Qe.RGBA,Qe.UNSIGNED_BYTE,M):Qe.texSubImage2D(Qe.TEXTURE_2D,0,kt,Mt,ie,be,Qe.RGBA,Qe.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Qe.generateMipmap(Qe.TEXTURE_2D)},_l.prototype.bind=function(M,O,G){var ie=this.context.gl;ie.bindTexture(ie.TEXTURE_2D,this.texture),G!==ie.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(G=ie.LINEAR),M!==this.filter&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,M),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,G||M),this.filter=M),O!==this.wrap&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,O),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,O),this.wrap=O)},_l.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},_l.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Cc=function(M){var O=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Cc.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Cc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ul=function(M,O,G){this.target=M,this.parent=O,this.mapId=G,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Cc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?M:self};function Zf(M,O,G){var ie=2*Math.PI*6378137/256/Math.pow(2,G);return[M*ie-2*Math.PI*6378137/2,O*ie-2*Math.PI*6378137/2]}Ul.prototype.send=function(M,O,G,ie,be){var Le=this;void 0===be&&(be=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);G&&(this.callbacks[je]=G);var Qe=I(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:M,hasCallback:!!G,targetMapId:ie,mustQueue:be,sourceMapId:this.mapId,data:Qo(O,Qe)},Qe),{cancel:function(){G&&delete Le.callbacks[je],Le.target.postMessage({id:je,type:"<cancel>",targetMapId:ie,sourceMapId:Le.mapId})}}},Ul.prototype.receive=function(M){var O=M.data,G=O.id;if(G&&(!O.targetMapId||this.mapId===O.targetMapId))if("<cancel>"===O.type){delete this.tasks[G];var ie=this.cancelCallbacks[G];delete this.cancelCallbacks[G],ie&&ie()}else L()||O.mustQueue?(this.tasks[G]=O,this.taskQueue.push(G),this.invoker.trigger()):this.processTask(G,O)},Ul.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),O=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(M,O)}},Ul.prototype.processTask=function(M,O){var G=this;if("<response>"===O.type){var ie=this.callbacks[M];delete this.callbacks[M],ie&&(O.error?ie(es(O.error)):ie(null,es(O.data)))}else{var be=!1,Le=I(this.globalScope)?void 0:[],je=O.hasCallback?function(Mt,Bt){be=!0,delete G.cancelCallbacks[M],G.target.postMessage({id:M,type:"<response>",sourceMapId:G.mapId,error:Mt?Qo(Mt):null,data:Qo(Bt,Le)},Le)}:function(Mt){be=!0},Qe=null,lt=es(O.data);if(this.parent[O.type])Qe=this.parent[O.type](O.sourceMapId,lt,je);else if(this.parent.getWorkerSource){var kt=O.type.split(".");Qe=this.parent.getWorkerSource(O.sourceMapId,kt[0],lt.source)[kt[1]](lt,je)}else je(new Error("Could not find function "+O.type));!be&&Qe&&Qe.cancel&&(this.cancelCallbacks[M]=Qe.cancel)}},Ul.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ta=function(M,O){M&&(O?this.setSouthWest(M).setNorthEast(O):4===M.length?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};ta.prototype.setNorthEast=function(M){return this._ne=M instanceof Ei?new Ei(M.lng,M.lat):Ei.convert(M),this},ta.prototype.setSouthWest=function(M){return this._sw=M instanceof Ei?new Ei(M.lng,M.lat):Ei.convert(M),this},ta.prototype.extend=function(M){var O,G,ie=this._sw,be=this._ne;if(M instanceof Ei)O=M,G=M;else{if(!(M instanceof ta))return Array.isArray(M)?4===M.length||M.every(Array.isArray)?this.extend(ta.convert(M)):this.extend(Ei.convert(M)):this;if(G=M._ne,!(O=M._sw)||!G)return this}return ie||be?(ie.lng=Math.min(O.lng,ie.lng),ie.lat=Math.min(O.lat,ie.lat),be.lng=Math.max(G.lng,be.lng),be.lat=Math.max(G.lat,be.lat)):(this._sw=new Ei(O.lng,O.lat),this._ne=new Ei(G.lng,G.lat)),this},ta.prototype.getCenter=function(){return new Ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ta.prototype.getSouthWest=function(){return this._sw},ta.prototype.getNorthEast=function(){return this._ne},ta.prototype.getNorthWest=function(){return new Ei(this.getWest(),this.getNorth())},ta.prototype.getSouthEast=function(){return new Ei(this.getEast(),this.getSouth())},ta.prototype.getWest=function(){return this._sw.lng},ta.prototype.getSouth=function(){return this._sw.lat},ta.prototype.getEast=function(){return this._ne.lng},ta.prototype.getNorth=function(){return this._ne.lat},ta.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ta.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ta.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ta.prototype.contains=function(M){var O=Ei.convert(M),G=O.lng,ie=O.lat,Le=this._sw.lng<=G&&G<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Le=this._sw.lng>=G&&G>=this._ne.lng),this._sw.lat<=ie&&ie<=this._ne.lat&&Le},ta.convert=function(M){return!M||M instanceof ta?M:new ta(M)};var Wf=6371008.8,Ei=function(M,O){if(isNaN(M)||isNaN(O))throw new Error("Invalid LngLat object: ("+M+", "+O+")");if(this.lng=+M,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ei.prototype.wrap=function(){return new Ei(i(this.lng,-180,180),this.lat)},Ei.prototype.toArray=function(){return[this.lng,this.lat]},Ei.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ei.prototype.distanceTo=function(M){var O=Math.PI/180,G=this.lat*O,ie=M.lat*O,be=Math.sin(G)*Math.sin(ie)+Math.cos(G)*Math.cos(ie)*Math.cos((M.lng-this.lng)*O);return Wf*Math.acos(Math.min(be,1))},Ei.prototype.toBounds=function(M){void 0===M&&(M=0);var O=360*M/40075017,G=O/Math.cos(Math.PI/180*this.lat);return new ta(new Ei(this.lng-G,this.lat-O),new Ei(this.lng+G,this.lat+O))},Ei.convert=function(M){if(M instanceof Ei)return M;if(Array.isArray(M)&&(2===M.length||3===M.length))return new Ei(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&"object"==typeof M&&null!==M)return new Ei(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Yf=2*Math.PI*Wf;function Xf(M){return Yf*Math.cos(M*Math.PI/180)}function Jf(M){return(180+M)/360}function Kf(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function $f(M,O){return M/Xf(O)}function Pc(M){return 360/Math.PI*Math.atan(Math.exp((180-360*M)*Math.PI/180))-90}var wl=function(M,O,G){void 0===G&&(G=0),this.x=+M,this.y=+O,this.z=+G};wl.fromLngLat=function(M,O){void 0===O&&(O=0);var G=Ei.convert(M);return new wl(Jf(G.lng),Kf(G.lat),$f(O,G.lat))},wl.prototype.toLngLat=function(){return new Ei(360*this.x-180,Pc(this.y))},wl.prototype.toAltitude=function(){return this.z*Xf(Pc(this.y))},wl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Yf*(M=Pc(this.y),1/Math.cos(M*Math.PI/180));var M};var Tl=function(M,O,G){this.z=M,this.x=O,this.y=G,this.key=su(0,M,M,O,G)};Tl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Tl.prototype.url=function(M,O){var G,ie,be,Le,je,Qe=(ie=this.y,be=this.z,Le=Zf(256*(G=this.x),256*(ie=Math.pow(2,be)-ie-1),be),je=Zf(256*(G+1),256*(ie+1),be),Le[0]+","+Le[1]+","+je[0]+","+je[1]),lt=function(kt,Mt,Bt){for(var qt,Vt="",nn=kt;nn>0;nn--)Vt+=(Mt&(qt=1<<nn-1)?1:0)+(Bt&qt?2:0);return Vt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===O?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Qe)},Tl.prototype.getTilePoint=function(M){var O=Math.pow(2,this.z);return new t((M.x*O-this.x)*Br,(M.y*O-this.y)*Br)},Tl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Qf=function(M,O){this.wrap=M,this.canonical=O,this.key=su(M,O.z,O.z,O.x,O.y)},na=function(M,O,G,ie,be){this.overscaledZ=M,this.wrap=O,this.canonical=new Tl(G,+ie,+be),this.key=su(O,M,G,ie,be)};function su(M,O,G,ie,be){(M*=2)<0&&(M=-1*M-1);var Le=1<<G;return(Le*Le*M+Le*be+ie).toString(36)+G.toString(36)+O.toString(36)}na.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},na.prototype.scaledTo=function(M){var O=this.canonical.z-M;return M>this.canonical.z?new na(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new na(M,this.wrap,M,this.canonical.x>>O,this.canonical.y>>O)},na.prototype.calculateScaledKey=function(M,O){var G=this.canonical.z-M;return M>this.canonical.z?su(this.wrap*+O,M,this.canonical.z,this.canonical.x,this.canonical.y):su(this.wrap*+O,M,M,this.canonical.x>>G,this.canonical.y>>G)},na.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var O=this.canonical.z-M.canonical.z;return 0===M.overscaledZ||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>O&&M.canonical.y===this.canonical.y>>O},na.prototype.children=function(M){if(this.overscaledZ>=M)return[new na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,G=2*this.canonical.x,ie=2*this.canonical.y;return[new na(O,this.wrap,O,G,ie),new na(O,this.wrap,O,G+1,ie),new na(O,this.wrap,O,G,ie+1),new na(O,this.wrap,O,G+1,ie+1)]},na.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},na.prototype.wrapped=function(){return new na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},na.prototype.unwrapTo=function(M){return new na(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},na.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},na.prototype.toUnwrapped=function(){return new Qf(this.wrap,this.canonical)},na.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},na.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new wl(M.x-this.wrap,M.y))},_r("CanonicalTileID",Tl),_r("OverscaledTileID",na,{omit:["posMatrix"]});var el=function(M,O,G){if(this.uid=M,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(G&&"mapbox"!==G&&"terrarium"!==G)return S('"'+G+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ie=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=G||"mapbox";for(var be=0;be<ie;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(ie,be)]=this.data[this._idx(ie-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,ie)]=this.data[this._idx(be,ie-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie-1,0)],this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie-1)],this.data[this._idx(ie,ie)]=this.data[this._idx(ie-1,ie-1)]};el.prototype.get=function(M,O){var G=new Uint8Array(this.data.buffer),ie=4*this._idx(M,O);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(G[ie],G[ie+1],G[ie+2])},el.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},el.prototype._idx=function(M,O){if(M<-1||M>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(M+1)},el.prototype._unpackMapbox=function(M,O,G){return(256*M*256+256*O+G)/10-1e4},el.prototype._unpackTerrarium=function(M,O,G){return 256*M+O+G/256-32768},el.prototype.getPixels=function(){return new Qa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},el.prototype.backfillBorder=function(M,O,G){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var ie=O*this.dim,be=O*this.dim+this.dim,Le=G*this.dim,je=G*this.dim+this.dim;switch(O){case-1:ie=be-1;break;case 1:be=ie+1}switch(G){case-1:Le=je-1;break;case 1:je=Le+1}for(var Qe=-O*this.dim,lt=-G*this.dim,kt=Le;kt<je;kt++)for(var Mt=ie;Mt<be;Mt++)this.data[this._idx(Mt,kt)]=M.data[this._idx(Mt+Qe,kt+lt)]},_r("DEMData",el);var Vu=function(M){this._stringToNumber={},this._numberToString=[];for(var O=0;O<M.length;O++){var G=M[O];this._stringToNumber[G]=O,this._numberToString[O]=G}};Vu.prototype.encode=function(M){return this._stringToNumber[M]},Vu.prototype.decode=function(M){return this._numberToString[M]};var Hu=function(M,O,G,ie,be){this.type="Feature",this._vectorTileFeature=M,M._z=O,M._x=G,M._y=ie,this.properties=M.properties,this.id=be},Oc={geometry:{configurable:!0}};Oc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Oc.geometry.set=function(M){this._geometry=M},Hu.prototype.toJSON=function(){var M={geometry:this.geometry};for(var O in this)"_geometry"!==O&&"_vectorTileFeature"!==O&&(M[O]=this[O]);return M},Object.defineProperties(Hu.prototype,Oc);var Vl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Vl.prototype.updateState=function(M,O,G){var ie=String(O);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][ie]=this.stateChanges[M][ie]||{},c(this.stateChanges[M][ie],G),null===this.deletedStates[M])for(var be in this.deletedStates[M]={},this.state[M])be!==ie&&(this.deletedStates[M][be]=null);else if(this.deletedStates[M]&&null===this.deletedStates[M][ie])for(var Le in this.deletedStates[M][ie]={},this.state[M][ie])G[Le]||(this.deletedStates[M][ie][Le]=null);else for(var je in G)this.deletedStates[M]&&this.deletedStates[M][ie]&&null===this.deletedStates[M][ie][je]&&delete this.deletedStates[M][ie][je]},Vl.prototype.removeFeatureState=function(M,O,G){if(null!==this.deletedStates[M]){var ie=String(O);if(this.deletedStates[M]=this.deletedStates[M]||{},G&&void 0!==O)null!==this.deletedStates[M][ie]&&(this.deletedStates[M][ie]=this.deletedStates[M][ie]||{},this.deletedStates[M][ie][G]=null);else if(void 0!==O)if(this.stateChanges[M]&&this.stateChanges[M][ie])for(G in this.deletedStates[M][ie]={},this.stateChanges[M][ie])this.deletedStates[M][ie][G]=null;else this.deletedStates[M][ie]=null;else this.deletedStates[M]=null}},Vl.prototype.getState=function(M,O){var G=String(O),Le=c({},(this.state[M]||{})[G],(this.stateChanges[M]||{})[G]);if(null===this.deletedStates[M])return{};if(this.deletedStates[M]){var je=this.deletedStates[M][O];if(null===je)return{};for(var Qe in je)delete Le[Qe]}return Le},Vl.prototype.initializeTileState=function(M,O){M.setFeatureState(this.state,O)},Vl.prototype.coalesceChanges=function(M,O){var G={};for(var ie in this.stateChanges){this.state[ie]=this.state[ie]||{};var be={};for(var Le in this.stateChanges[ie])this.state[ie][Le]||(this.state[ie][Le]={}),c(this.state[ie][Le],this.stateChanges[ie][Le]),be[Le]=this.state[ie][Le];G[ie]=be}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Qe={};if(null===this.deletedStates[je])for(var lt in this.state[je])Qe[lt]={},this.state[je][lt]={};else for(var kt in this.deletedStates[je]){if(null===this.deletedStates[je][kt])this.state[je][kt]={};else for(var Mt=0,Bt=Object.keys(this.deletedStates[je][kt]);Mt<Bt.length;Mt+=1)delete this.state[je][kt][Bt[Mt]];Qe[kt]=this.state[je][kt]}G[je]=G[je]||{},c(G[je],Qe)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(G).length)for(var Vt in M)M[Vt].setFeatureState(G,O)};var tl=function(M,O){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new Di(Br,16,0),this.grid3D=new Di(Br,16,0),this.featureIndexArray=new cn,this.promoteId=O};function eh(M,O,G,ie,be){return p(M,function(Le,je){var Qe=O instanceof Ba?O.get(je):null;return Qe&&Qe.evaluate?Qe.evaluate(G,ie,be):Qe})}function th(M){for(var O=1/0,G=1/0,ie=-1/0,be=-1/0,Le=0,je=M;Le<je.length;Le+=1){var Qe=je[Le];O=Math.min(O,Qe.x),G=Math.min(G,Qe.y),ie=Math.max(ie,Qe.x),be=Math.max(be,Qe.y)}return{minX:O,minY:G,maxX:ie,maxY:be}}function Jp(M,O){return O-M}tl.prototype.insert=function(M,O,G,ie,be,Le){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(G,ie,be);for(var Qe=Le?this.grid3D:this.grid,lt=0;lt<O.length;lt++){for(var kt=O[lt],Mt=[1/0,1/0,-1/0,-1/0],Bt=0;Bt<kt.length;Bt++){var qt=kt[Bt];Mt[0]=Math.min(Mt[0],qt.x),Mt[1]=Math.min(Mt[1],qt.y),Mt[2]=Math.max(Mt[2],qt.x),Mt[3]=Math.max(Mt[3],qt.y)}Mt[0]<Br&&Mt[1]<Br&&Mt[2]>=0&&Mt[3]>=0&&Qe.insert(je,Mt[0],Mt[1],Mt[2],Mt[3])}},tl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ol.VectorTile(new Cu(this.rawTileData)).layers,this.sourceLayerCoder=new Vu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},tl.prototype.query=function(M,O,G,ie){var be=this;this.loadVTLayers();for(var Le=M.params||{},je=Br/M.tileSize/M.scale,Qe=ms(Le.filter),lt=M.queryGeometry,kt=M.queryPadding*je,Mt=th(lt),Bt=this.grid.query(Mt.minX-kt,Mt.minY-kt,Mt.maxX+kt,Mt.maxY+kt),qt=th(M.cameraQueryGeometry),Vt=0,nn=this.grid3D.query(qt.minX-kt,qt.minY-kt,qt.maxX+kt,qt.maxY+kt,function(Wn,Qn,nr,xr){return function(pr,Tr,Er,jr,Pr){for(var Nr=0,Ir=pr;Nr<Ir.length;Nr+=1){var Cr=Ir[Nr];if(Tr<=Cr.x&&Er<=Cr.y&&jr>=Cr.x&&Pr>=Cr.y)return!0}var Jr=[new t(Tr,Er),new t(Tr,Pr),new t(jr,Pr),new t(jr,Er)];if(pr.length>2)for(var qr=0,bi=Jr;qr<bi.length;qr+=1)if(cl(pr,bi[qr]))return!0;for(var Fr=0;Fr<pr.length-1;Fr++)if(uc(pr[Fr],pr[Fr+1],Jr))return!0;return!1}(M.cameraQueryGeometry,Wn-kt,Qn-kt,nr+kt,xr+kt)});Vt<nn.length;Vt+=1)Bt.push(nn[Vt]);Bt.sort(Jp);for(var zn,In={},Un=function(Wn){var Qn=Bt[Wn];if(Qn!==zn){zn=Qn;var nr=be.featureIndexArray.get(Qn),xr=null;be.loadMatchingFeature(In,nr.bucketIndex,nr.sourceLayerIndex,nr.featureIndex,Qe,Le.layers,Le.availableImages,O,G,ie,function(pr,Tr,Er){return xr||(xr=ki(pr)),Tr.queryIntersectsFeature(lt,pr,Er,xr,be.z,M.transform,je,M.pixelPosMatrix)})}},Vn=0;Vn<Bt.length;Vn++)Un(Vn);return In},tl.prototype.loadMatchingFeature=function(M,O,G,ie,be,Le,je,Qe,lt,kt,Mt){var Bt=this.bucketLayerIDs[O];if(!Le||function(xr,pr){for(var Tr=0;Tr<xr.length;Tr++)if(pr.indexOf(xr[Tr])>=0)return!0;return!1}(Le,Bt)){var qt=this.sourceLayerCoder.decode(G),Vt=this.vtLayers[qt].feature(ie);if(be.filter(new ni(this.tileID.overscaledZ),Vt))for(var nn=this.getId(Vt,qt),xn=0;xn<Bt.length;xn++){var zn=Bt[xn];if(!(Le&&Le.indexOf(zn)<0)){var In=Qe[zn];if(In){var Un={};void 0!==nn&&kt&&(Un=kt.getState(In.sourceLayer||"_geojsonTileLayer",nn));var Vn=lt[zn];Vn.paint=eh(Vn.paint,In.paint,Vt,Un,je),Vn.layout=eh(Vn.layout,In.layout,Vt,Un,je);var Wn=!Mt||Mt(Vt,In,Un);if(Wn){var Qn=new Hu(Vt,this.z,this.x,this.y,nn);Qn.layer=Vn;var nr=M[zn];void 0===nr&&(nr=M[zn]=[]),nr.push({featureIndex:ie,feature:Qn,intersectionZ:Wn})}}}}}},tl.prototype.lookupSymbolFeatures=function(M,O,G,ie,be,Le,je,Qe){var lt={};this.loadVTLayers();for(var kt=ms(be),Mt=0,Bt=M;Mt<Bt.length;Mt+=1)this.loadMatchingFeature(lt,G,ie,Bt[Mt],kt,Le,je,Qe,O);return lt},tl.prototype.hasLayer=function(M){for(var O=0,G=this.bucketLayerIDs;O<G.length;O+=1)for(var ie=0,be=G[O];ie<be.length;ie+=1)if(M===be[ie])return!0;return!1},tl.prototype.getId=function(M,O){var G=M.id;return this.promoteId&&"boolean"==typeof(G=M.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[O]])&&(G=Number(G)),G},_r("FeatureIndex",tl,{omit:["rawTileData","sourceLayerCoder"]});var pa=function(M,O){this.tileID=M,this.uid=f(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};pa.prototype.registerFadeDuration=function(M){var O=M+this.timeAdded;O<Z.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},pa.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},pa.prototype.loadVectorData=function(M,O,G){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var ie in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(kt,Mt){var Bt={};if(!Mt)return Bt;for(var qt=function(){var xn=nn[Vt],zn=xn.layerIds.map(function(Wn){return Mt.getLayer(Wn)}).filter(Boolean);if(0!==zn.length){xn.layers=zn,xn.stateDependentLayerIds&&(xn.stateDependentLayers=xn.stateDependentLayerIds.map(function(Wn){return zn.filter(function(Qn){return Qn.id===Wn})[0]}));for(var In=0,Un=zn;In<Un.length;In+=1)Bt[Un[In].id]=xn}},Vt=0,nn=kt;Vt<nn.length;Vt+=1)qt();return Bt}(M.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var be=this.buckets[ie];if(be instanceof di){if(this.hasSymbolBuckets=!0,!G)break;be.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Le in this.buckets){var je=this.buckets[Le];if(je instanceof di&&je.hasRTLText){this.hasRTLText=!0,ua.isLoading()||ua.isLoaded()||"deferred"!==Fa()||Ka();break}}for(var Qe in this.queryPadding=0,this.buckets){var lt=this.buckets[Qe];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Qe).queryRadius(lt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new We},pa.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},pa.prototype.getBucket=function(M){return this.buckets[M.id]},pa.prototype.upload=function(M){for(var O in this.buckets){var G=this.buckets[O];G.uploadPending()&&G.upload(M)}var ie=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _l(M,this.imageAtlas.image,ie.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _l(M,this.glyphAtlasImage,ie.ALPHA),this.glyphAtlasImage=null)},pa.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},pa.prototype.queryRenderedFeatures=function(M,O,G,ie,be,Le,je,Qe,lt,kt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ie,cameraQueryGeometry:be,scale:Le,tileSize:this.tileSize,pixelPosMatrix:kt,transform:Qe,params:je,queryPadding:this.queryPadding*lt},M,O,G):{}},pa.prototype.querySourceFeatures=function(M,O){var G=this.latestFeatureIndex;if(G&&G.rawTileData){var ie=G.loadVTLayers(),be=O?O.sourceLayer:"",Le=ie._geojsonTileLayer||ie[be];if(Le)for(var je=ms(O&&O.filter),Qe=this.tileID.canonical,lt=Qe.z,kt=Qe.x,Mt=Qe.y,Bt={z:lt,x:kt,y:Mt},qt=0;qt<Le.length;qt++){var Vt=Le.feature(qt);if(je.filter(new ni(this.tileID.overscaledZ),Vt)){var nn=G.getId(Vt,be),xn=new Hu(Vt,lt,kt,Mt,nn);xn.tile=Bt,M.push(xn)}}}},pa.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},pa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},pa.prototype.setExpiryData=function(M){var O=this.expirationTime;if(M.cacheControl){var G=C(M.cacheControl);G["max-age"]&&(this.expirationTime=Date.now()+1e3*G["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var ie=Date.now(),be=!1;if(this.expirationTime>ie)be=!1;else if(O)if(this.expirationTime<O)be=!0;else{var Le=this.expirationTime-O;Le?this.expirationTime=ie+Math.max(Le,3e4):be=!0}else be=!0;be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},pa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},pa.prototype.setFeatureState=function(M,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(M).length){var G=this.latestFeatureIndex.loadVTLayers();for(var ie in this.buckets)if(O.style.hasLayer(ie)){var be=this.buckets[ie],Le=be.layers[0].sourceLayer||"_geojsonTileLayer",je=G[Le],Qe=M[Le];if(je&&Qe&&0!==Object.keys(Qe).length){be.update(Qe,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=O&&O.style&&O.style.getLayer(ie);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(be)))}}}},pa.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},pa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Z.now()},pa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},pa.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=Z.now()+M},pa.prototype.setDependencies=function(M,O){for(var G={},ie=0,be=O;ie<be.length;ie+=1)G[be[ie]]=!0;this.dependencies[M]=G},pa.prototype.hasDependency=function(M,O){for(var G=0,ie=M;G<ie.length;G+=1){var Le=this.dependencies[ie[G]];if(Le)for(var je=0,Qe=O;je<Qe.length;je+=1)if(Le[Qe[je]])return!0}return!1};var pl=self.performance,nh=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},pl.mark(this._marks.start)};nh.prototype.finish=function(){pl.mark(this._marks.end);var M=pl.getEntriesByName(this._marks.measure);return 0===M.length&&(pl.measure(this._marks.measure,this._marks.start,this._marks.end),M=pl.getEntriesByName(this._marks.measure),pl.clearMarks(this._marks.start),pl.clearMarks(this._marks.end),pl.clearMeasures(this._marks.measure)),M},l.Actor=Ul,l.AlphaImage=bl,l.CanonicalTileID=Tl,l.CollisionBoxArray=We,l.Color=dn,l.DEMData=el,l.DataConstantProperty=Mr,l.DictionaryCoder=Vu,l.EXTENT=Br,l.ErrorEvent=Ye,l.EvaluationParameters=ni,l.Event=Be,l.Evented=rt,l.FeatureIndex=tl,l.FillBucket=bs,l.FillExtrusionBucket=_s,l.ImageAtlas=au,l.ImagePosition=Ou,l.LineBucket=eo,l.LngLat=Ei,l.LngLatBounds=ta,l.MercatorCoordinate=wl,l.ONE_EM=Ma,l.OverscaledTileID=na,l.Point=t,l.Point$1=t,l.Properties=$i,l.Protobuf=Cu,l.RGBAImage=Qa,l.RequestManager=ae,l.RequestPerformance=nh,l.ResourceType=at,l.SegmentVector=en,l.SourceFeatureState=Vl,l.StructArrayLayout1ui2=Ae,l.StructArrayLayout2f1f2i16=ve,l.StructArrayLayout2i4=Xe,l.StructArrayLayout3ui6=Ne,l.StructArrayLayout4i8=$e,l.SymbolBucket=di,l.Texture=_l,l.Tile=pa,l.Transitionable=ca,l.Uniform1f=Hr,l.Uniform1i=Vr,l.Uniform2f=hr,l.Uniform3f=Ar,l.Uniform4f=Dr,l.UniformColor=Rr,l.UniformMatrix4f=Zr,l.UnwrappedTileID=Qf,l.ValidationError=Re,l.WritingMode=Eo,l.ZoomHistory=ts,l.add=function(M,O,G){return M[0]=O[0]+G[0],M[1]=O[1]+G[1],M[2]=O[2]+G[2],M},l.addDynamicAttributes=Ec,l.asyncAll=function(M,O,G){if(!M.length)return G(null,[]);var ie=M.length,be=new Array(M.length),Le=null;M.forEach(function(je,Qe){O(je,function(lt,kt){lt&&(Le=lt),be[Qe]=kt,0==--ie&&G(Le,be)})})},l.bezier=r,l.bindAll=g,l.browser=Z,l.cacheEntryPossiblyAdded=function(M){++nt>ce&&(M.getActor().send("enforceCacheSizeLimit",ze),nt=0)},l.clamp=a,l.clearTileCache=function(M){var O=self.caches.delete(Pe);M&&O.catch(M).then(function(){return M()})},l.clipLine=Df,l.clone=function(M){var O=new So(16);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O[4]=M[4],O[5]=M[5],O[6]=M[6],O[7]=M[7],O[8]=M[8],O[9]=M[9],O[10]=M[10],O[11]=M[11],O[12]=M[12],O[13]=M[13],O[14]=M[14],O[15]=M[15],O},l.clone$1=w,l.clone$2=function(M){var O=new So(3);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O},l.collisionCircleLayout=vp,l.config=V,l.create=function(){var M=new So(16);return So!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},l.create$1=function(){var M=new So(9);return So!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},l.create$2=function(){var M=new So(4);return So!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},l.createCommonjsModule=T,l.createExpression=fs,l.createLayout=fi,l.createStyleLayer=function(M){return"custom"===M.type?new Yp(M):new Xp[M.type](M)},l.cross=function(M,O,G){var ie=O[0],be=O[1],Le=O[2],je=G[0],Qe=G[1],lt=G[2];return M[0]=be*lt-Le*Qe,M[1]=Le*je-ie*lt,M[2]=ie*Qe-be*je,M},l.deepEqual=function M(O,G){if(Array.isArray(O)){if(!Array.isArray(G)||O.length!==G.length)return!1;for(var ie=0;ie<O.length;ie++)if(!M(O[ie],G[ie]))return!1;return!0}if("object"==typeof O&&null!==O&&null!==G){if("object"!=typeof G||Object.keys(O).length!==Object.keys(G).length)return!1;for(var be in O)if(!M(O[be],G[be]))return!1;return!0}return O===G},l.dot=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]},l.dot$1=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]+M[3]*O[3]},l.ease=n,l.emitValidationErrors=Ia,l.endsWith=y,l.enforceCacheSizeLimit=function(M){ge(),ke&&ke.then(function(O){O.keys().then(function(G){for(var ie=0;ie<G.length-M;ie++)O.delete(G[ie])})})},l.evaluateSizeForFeature=Lf,l.evaluateSizeForZoom=Cf,l.evaluateVariableOffset=Nf,l.evented=Aa,l.extend=c,l.featureFilter=ms,l.filterObject=m,l.fromRotation=function(M,O){var G=Math.sin(O),ie=Math.cos(O);return M[0]=ie,M[1]=G,M[2]=0,M[3]=-G,M[4]=ie,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},l.getAnchorAlignment=kc,l.getAnchorJustification=Sc,l.getArrayBuffer=Lt,l.getImage=It,l.getJSON=function(M,O){return _t(c(M,{type:"json"}),O)},l.getRTLTextPluginStatus=Fa,l.getReferrer=wt,l.getVideo=function(M,O){var G,ie,be=self.document.createElement("video");be.muted=!0,be.onloadstart=function(){O(null,be)};for(var Le=0;Le<M.length;Le++){var je=self.document.createElement("source");G=M[Le],ie=void 0,(ie=self.document.createElement("a")).href=G,ie.protocol===self.document.location.protocol&&ie.host===self.document.location.host||(be.crossOrigin="Anonymous"),je.src=M[Le],be.appendChild(je)}return{cancel:function(){}}},l.identity=cc,l.invert=function(M,O){var G=O[0],ie=O[1],be=O[2],Le=O[3],je=O[4],Qe=O[5],lt=O[6],kt=O[7],Mt=O[8],Bt=O[9],qt=O[10],Vt=O[11],nn=O[12],xn=O[13],zn=O[14],In=O[15],Un=G*Qe-ie*je,Vn=G*lt-be*je,Wn=G*kt-Le*je,Qn=ie*lt-be*Qe,nr=ie*kt-Le*Qe,xr=be*kt-Le*lt,pr=Mt*xn-Bt*nn,Tr=Mt*zn-qt*nn,Er=Mt*In-Vt*nn,jr=Bt*zn-qt*xn,Pr=Bt*In-Vt*xn,Nr=qt*In-Vt*zn,Ir=Un*Nr-Vn*Pr+Wn*jr+Qn*Er-nr*Tr+xr*pr;return Ir?(M[0]=(Qe*Nr-lt*Pr+kt*jr)*(Ir=1/Ir),M[1]=(be*Pr-ie*Nr-Le*jr)*Ir,M[2]=(xn*xr-zn*nr+In*Qn)*Ir,M[3]=(qt*nr-Bt*xr-Vt*Qn)*Ir,M[4]=(lt*Er-je*Nr-kt*Tr)*Ir,M[5]=(G*Nr-be*Er+Le*Tr)*Ir,M[6]=(zn*Wn-nn*xr-In*Vn)*Ir,M[7]=(Mt*xr-qt*Wn+Vt*Vn)*Ir,M[8]=(je*Pr-Qe*Er+kt*pr)*Ir,M[9]=(ie*Er-G*Pr-Le*pr)*Ir,M[10]=(nn*nr-xn*Wn+In*Un)*Ir,M[11]=(Bt*Wn-Mt*nr-Vt*Un)*Ir,M[12]=(Qe*Tr-je*jr-lt*pr)*Ir,M[13]=(G*jr-ie*Tr+be*pr)*Ir,M[14]=(xn*Vn-nn*Qn-zn*Un)*Ir,M[15]=(Mt*Qn-Bt*Vn+qt*Un)*Ir,M):null},l.isChar=wr,l.isMapboxURL=le,l.keysDifference=function(M,O){var G=[];for(var ie in M)ie in O||G.push(ie);return G},l.makeRequest=_t,l.mapObject=p,l.mercatorXfromLng=Jf,l.mercatorYfromLat=Kf,l.mercatorZfromAltitude=$f,l.mul=Ph,l.multiply=Yc,l.mvt=Ol,l.normalize=function(M,O){var G=O[0],ie=O[1],be=O[2],Le=G*G+ie*ie+be*be;return Le>0&&(Le=1/Math.sqrt(Le)),M[0]=O[0]*Le,M[1]=O[1]*Le,M[2]=O[2]*Le,M},l.number=Sr,l.offscreenCanvasSupported=tt,l.ortho=function(M,O,G,ie,be,Le,je){var Qe=1/(O-G),lt=1/(ie-be),kt=1/(Le-je);return M[0]=-2*Qe,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*lt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*kt,M[11]=0,M[12]=(O+G)*Qe,M[13]=(be+ie)*lt,M[14]=(je+Le)*kt,M[15]=1,M},l.parseGlyphPBF=function(M){return new Cu(M).readFields(Sp,[])},l.pbf=Cu,l.performSymbolLayout=function(M,O,G,ie,be,Le,je){M.createArrays(),M.tilePixelRatio=Br/(512*M.overscaling),M.compareText={},M.iconsNeedLinear=!1;var lt=M.layers[0].layout,kt=M.layers[0]._unevaluatedLayout._values,Mt={};if("composite"===M.textSizeData.kind){var Bt=M.textSizeData,Vt=Bt.maxZoom;Mt.compositeTextSizes=[kt["text-size"].possiblyEvaluate(new ni(Bt.minZoom),je),kt["text-size"].possiblyEvaluate(new ni(Vt),je)]}if("composite"===M.iconSizeData.kind){var nn=M.iconSizeData,zn=nn.maxZoom;Mt.compositeIconSizes=[kt["icon-size"].possiblyEvaluate(new ni(nn.minZoom),je),kt["icon-size"].possiblyEvaluate(new ni(zn),je)]}Mt.layoutTextSize=kt["text-size"].possiblyEvaluate(new ni(M.zoom+1),je),Mt.layoutIconSize=kt["icon-size"].possiblyEvaluate(new ni(M.zoom+1),je),Mt.textMaxSize=kt["text-size"].possiblyEvaluate(new ni(18));for(var In=lt.get("text-line-height")*Ma,Un="map"===lt.get("text-rotation-alignment")&&"point"!==lt.get("symbol-placement"),Vn=lt.get("text-keep-upright"),Wn=lt.get("text-size"),Qn=function(){var pr=xr[nr],Tr=lt.get("text-font").evaluate(pr,{},je).join(","),Er=Wn.evaluate(pr,{},je),jr=Mt.layoutTextSize.evaluate(pr,{},je),Pr=Mt.layoutIconSize.evaluate(pr,{},je),Nr={horizontal:{},vertical:void 0},Ir=pr.text,Cr=[0,0];if(Ir){var Jr=Ir.toString(),qr=lt.get("text-letter-spacing").evaluate(pr,{},je)*Ma,bi=function(Gr){for(var ti=0,Ni=Gr;ti<Ni.length;ti+=1)if(xi=Ni[ti].charCodeAt(0),wr.Arabic(xi)||wr["Arabic Supplement"](xi)||wr["Arabic Extended-A"](xi)||wr["Arabic Presentation Forms-A"](xi)||wr["Arabic Presentation Forms-B"](xi))return!1;var xi;return!0}(Jr)?qr:0,Fr=lt.get("text-anchor").evaluate(pr,{},je),gi=lt.get("text-variable-anchor");if(!gi){var Ti=lt.get("text-radial-offset").evaluate(pr,{},je);Cr=Ti?Nf(Fr,[Ti*Ma,Mc]):lt.get("text-offset").evaluate(pr,{},je).map(function(Gr){return Gr*Ma})}var Ai=Un?"center":lt.get("text-justify").evaluate(pr,{},je),Li=lt.get("symbol-placement"),_i="point"===Li?lt.get("text-max-width").evaluate(pr,{},je)*Ma:0,ra=function(){M.allowVerticalPlacement&&ns(Jr)&&(Nr.vertical=zu(Ir,O,G,be,Tr,_i,In,Fr,"left",bi,Cr,Eo.vertical,!0,Li,jr,Er))};if(!Un&&gi){for(var Oi="auto"===Ai?gi.map(function(Gr){return Sc(Gr)}):[Ai],da=!1,Sa=0;Sa<Oi.length;Sa++){var ba=Oi[Sa];if(!Nr.horizontal[ba])if(da)Nr.horizontal[ba]=Nr.horizontal[0];else{var Za=zu(Ir,O,G,be,Tr,_i,In,"center",ba,bi,Cr,Eo.horizontal,!1,Li,jr,Er);Za&&(Nr.horizontal[ba]=Za,da=1===Za.positionedLines.length)}}ra()}else{"auto"===Ai&&(Ai=Sc(Fr));var _a=zu(Ir,O,G,be,Tr,_i,In,Fr,Ai,bi,Cr,Eo.horizontal,!1,Li,jr,Er);_a&&(Nr.horizontal[Ai]=_a),ra(),ns(Jr)&&Un&&Vn&&(Nr.vertical=zu(Ir,O,G,be,Tr,_i,In,Fr,Ai,bi,Cr,Eo.vertical,!1,Li,jr,Er))}}var Gr,ti,xi,Wa,ja,aa=void 0,wa=!1;if(pr.icon&&pr.icon.name){var ga=ie[pr.icon.name];ga&&(Gr=be[pr.icon.name],ti=lt.get("icon-offset").evaluate(pr,{},je),xi=kc(lt.get("icon-anchor").evaluate(pr,{},je)),aa={image:Gr,top:ja=ti[1]-Gr.displaySize[1]*xi.verticalAlign,bottom:ja+Gr.displaySize[1],left:Wa=ti[0]-Gr.displaySize[0]*xi.horizontalAlign,right:Wa+Gr.displaySize[0]},wa=ga.sdf,void 0===M.sdfIcons?M.sdfIcons=ga.sdf:M.sdfIcons!==ga.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ga.pixelRatio!==M.pixelRatio||0!==lt.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0))}var oa=Uf(Nr.horizontal)||Nr.vertical;M.iconsInText=!!oa&&oa.iconsInText,(oa||aa)&&function(Gr,ti,Ni,xi,zi,Ci,ii,ji,Wa,go,ja){var ws=Ci.textMaxSize.evaluate(ti,{});void 0===ws&&(ws=ii);var nl,va=Gr.layers[0].layout,Ts=va.get("icon-offset").evaluate(ti,{},ja),as=Uf(Ni.horizontal),kl=ii/24,qu=Gr.tilePixelRatio*kl,Al=Gr.tilePixelRatio*ws/24,Gu=Gr.tilePixelRatio*ji,lu=Gr.tilePixelRatio*va.get("symbol-spacing"),Ic=va.get("text-padding")*Gr.tilePixelRatio,Zu=va.get("icon-padding")*Gr.tilePixelRatio,Hl=va.get("text-max-angle")/180*Math.PI,Wu="map"===va.get("text-rotation-alignment")&&"point"!==va.get("symbol-placement"),Yu="map"===va.get("icon-rotation-alignment")&&"point"!==va.get("symbol-placement"),uu=va.get("symbol-placement"),zc=lu/2,cu=va.get("icon-text-fit");xi&&"none"!==cu&&(Gr.allowVerticalPlacement&&Ni.vertical&&(nl=Ef(xi,Ni.vertical,cu,va.get("icon-text-fit-padding"),Ts,kl)),as&&(xi=Ef(xi,as,cu,va.get("icon-text-fit-padding"),Ts,kl)));var Ml=function(Kp,vu){vu.x<0||vu.x>=Br||vu.y<0||vu.y>=Br||function(Hi,ks,$p,dl,jc,sh,Qu,Bs,ec,mu,tc,nc,Uc,lh,yu,uh,ch,fh,hh,ph,Lo,rc,dh,Ns,Qp){var gh,Ll,Zl,Wl,Yl,Xl=Hi.addToLineVertexArray(ks,$p),vh=0,mh=0,yh=0,xh=0,Vc=-1,Hc=-1,rl={},bh=On(""),qc=0,Gc=0;if(void 0===Bs._unevaluatedLayout.getValue("text-radial-offset")?(qc=(gh=Bs.layout.get("text-offset").evaluate(Lo,{},Ns).map(function(bu){return bu*Ma}))[0],Gc=gh[1]):(qc=Bs.layout.get("text-radial-offset").evaluate(Lo,{},Ns)*Ma,Gc=Mc),Hi.allowVerticalPlacement&&dl.vertical){var _h=Bs.layout.get("text-rotate").evaluate(Lo,{},Ns)+90;Wl=new Nu(ec,ks,mu,tc,nc,dl.vertical,Uc,lh,yu,_h),Qu&&(Yl=new Nu(ec,ks,mu,tc,nc,Qu,ch,fh,yu,_h))}if(jc){var Zc=Bs.layout.get("icon-rotate").evaluate(Lo,{}),wh="none"!==Bs.layout.get("icon-text-fit"),Th=Ff(jc,Zc,dh,wh),Wc=Qu?Ff(Qu,Zc,dh,wh):void 0;Zl=new Nu(ec,ks,mu,tc,nc,jc,ch,fh,!1,Zc),vh=4*Th.length;var kh=Hi.iconSizeData,xu=null;"source"===kh.kind?(xu=[Fs*Bs.layout.get("icon-size").evaluate(Lo,{})])[0]>hl&&S(Hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===kh.kind&&((xu=[Fs*rc.compositeIconSizes[0].evaluate(Lo,{},Ns),Fs*rc.compositeIconSizes[1].evaluate(Lo,{},Ns)])[0]>hl||xu[1]>hl)&&S(Hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Hi.addSymbols(Hi.icon,Th,xu,ph,hh,Lo,!1,ks,Xl.lineStartIndex,Xl.lineLength,-1,Ns),Vc=Hi.icon.placedSymbolArray.length-1,Wc&&(mh=4*Wc.length,Hi.addSymbols(Hi.icon,Wc,xu,ph,hh,Lo,Eo.vertical,ks,Xl.lineStartIndex,Xl.lineLength,-1,Ns),Hc=Hi.icon.placedSymbolArray.length-1)}for(var Ah in dl.horizontal){var ic=dl.horizontal[Ah];if(!Ll){bh=On(ic.text);var td=Bs.layout.get("text-rotate").evaluate(Lo,{},Ns);Ll=new Nu(ec,ks,mu,tc,nc,ic,Uc,lh,yu,td)}var Mh=1===ic.positionedLines.length;if(yh+=jf(Hi,ks,ic,sh,Bs,yu,Lo,uh,Xl,dl.vertical?Eo.horizontal:Eo.horizontalOnly,Mh?Object.keys(dl.horizontal):[Ah],rl,Vc,rc,Ns),Mh)break}dl.vertical&&(xh+=jf(Hi,ks,dl.vertical,sh,Bs,yu,Lo,uh,Xl,Eo.vertical,["vertical"],rl,Hc,rc,Ns));var nd=Ll?Ll.boxStartIndex:Hi.collisionBoxArray.length,rd=Ll?Ll.boxEndIndex:Hi.collisionBoxArray.length,id=Wl?Wl.boxStartIndex:Hi.collisionBoxArray.length,ad=Wl?Wl.boxEndIndex:Hi.collisionBoxArray.length,od=Zl?Zl.boxStartIndex:Hi.collisionBoxArray.length,sd=Zl?Zl.boxEndIndex:Hi.collisionBoxArray.length,ld=Yl?Yl.boxStartIndex:Hi.collisionBoxArray.length,ud=Yl?Yl.boxEndIndex:Hi.collisionBoxArray.length,js=-1,ac=function(bu,Eh){return bu&&bu.circleDiameter?Math.max(bu.circleDiameter,Eh):Eh};js=ac(Ll,js),js=ac(Wl,js),js=ac(Zl,js);var Sh=(js=ac(Yl,js))>-1?1:0;Sh&&(js*=Qp/Ma),Hi.glyphOffsetArray.length>=di.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Lo.sortKey&&Hi.addToSortKeyRanges(Hi.symbolInstances.length,Lo.sortKey),Hi.symbolInstances.emplaceBack(ks.x,ks.y,rl.right>=0?rl.right:-1,rl.center>=0?rl.center:-1,rl.left>=0?rl.left:-1,rl.vertical||-1,Vc,Hc,bh,nd,rd,id,ad,od,sd,ld,ud,mu,yh,xh,vh,mh,Sh,0,Uc,qc,Gc,js)}(Gr,vu,Kp,Ni,xi,zi,nl,Gr.layers[0],Gr.collisionBoxArray,ti.index,ti.sourceLayerIndex,Gr.index,qu,Ic,Wu,Wa,Gu,Zu,Yu,Ts,ti,Ci,go,ja,ii)};if("line"===uu)for(var ql=0,Xu=Df(ti.geometry,0,0,Br,Br);ql<Xu.length;ql+=1)for(var Ju=Xu[ql],Gl=0,Ku=zp(Ju,lu,Hl,Ni.vertical||as,xi,24,Al,Gr.overscaling,Br);Gl<Ku.length;Gl+=1){var $u=Ku[Gl];as&&Bp(Gr,as.text,zc,$u)||Ml(Ju,$u)}else if("line-center"===uu)for(var fu=0,hu=ti.geometry;fu<hu.length;fu+=1){var Sl=hu[fu];if(Sl.length>1){var pu=Ip(Sl,Hl,Ni.vertical||as,xi,24,Al);pu&&Ml(Sl,pu)}}else if("Polygon"===ti.type)for(var El=0,du=mc(ti.geometry,0);El<du.length;El+=1){var gu=du[El],rh=Dp(gu,16);Ml(gu[0],new Dl(rh.x,rh.y,0))}else if("LineString"===ti.type)for(var Rc=0,ih=ti.geometry;Rc<ih.length;Rc+=1){var Dc=ih[Rc];Ml(Dc,new Dl(Dc[0].x,Dc[0].y,0))}else if("Point"===ti.type)for(var Fc=0,ah=ti.geometry;Fc<ah.length;Fc+=1)for(var Bc=0,oh=ah[Fc];Bc<oh.length;Bc+=1){var Nc=oh[Bc];Ml([Nc],new Dl(Nc.x,Nc.y,0))}}(M,pr,Nr,aa,ie,Mt,jr,Pr,Cr,wa,je)},nr=0,xr=M.features;nr<xr.length;nr+=1)Qn();Le&&M.generateCollisionDebugBuffers()},l.perspective=function(M,O,G,ie,be){var Le,je=1/Math.tan(O/2);return M[0]=je/G,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=je,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=be&&be!==1/0?(M[10]=(be+ie)*(Le=1/(ie-be)),M[14]=2*be*ie*Le):(M[10]=-1,M[14]=-2*ie),M},l.pick=function(M,O){for(var G={},ie=0;ie<O.length;ie++){var be=O[ie];be in M&&(G[be]=M[be])}return G},l.plugin=ua,l.polygonIntersectsPolygon=Bi,l.postMapLoadEvent=Ie,l.postTurnstileEvent=me,l.potpack=Tf,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=_r,l.registerForPluginStateChange=function(M){return M({pluginStatus:Ji,pluginURL:Da}),Aa.on("pluginStateChange",M),M},l.rotate=function(M,O,G){var ie=O[0],be=O[1],Le=O[2],je=O[3],Qe=Math.sin(G),lt=Math.cos(G);return M[0]=ie*lt+Le*Qe,M[1]=be*lt+je*Qe,M[2]=ie*-Qe+Le*lt,M[3]=be*-Qe+je*lt,M},l.rotateX=function(M,O,G){var ie=Math.sin(G),be=Math.cos(G),Le=O[4],je=O[5],Qe=O[6],lt=O[7],kt=O[8],Mt=O[9],Bt=O[10],qt=O[11];return O!==M&&(M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[4]=Le*be+kt*ie,M[5]=je*be+Mt*ie,M[6]=Qe*be+Bt*ie,M[7]=lt*be+qt*ie,M[8]=kt*be-Le*ie,M[9]=Mt*be-je*ie,M[10]=Bt*be-Qe*ie,M[11]=qt*be-lt*ie,M},l.rotateZ=function(M,O,G){var ie=Math.sin(G),be=Math.cos(G),Le=O[0],je=O[1],Qe=O[2],lt=O[3],kt=O[4],Mt=O[5],Bt=O[6],qt=O[7];return O!==M&&(M[8]=O[8],M[9]=O[9],M[10]=O[10],M[11]=O[11],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[0]=Le*be+kt*ie,M[1]=je*be+Mt*ie,M[2]=Qe*be+Bt*ie,M[3]=lt*be+qt*ie,M[4]=kt*be-Le*ie,M[5]=Mt*be-je*ie,M[6]=Bt*be-Qe*ie,M[7]=qt*be-lt*ie,M},l.scale=function(M,O,G){var ie=G[0],be=G[1],Le=G[2];return M[0]=O[0]*ie,M[1]=O[1]*ie,M[2]=O[2]*ie,M[3]=O[3]*ie,M[4]=O[4]*be,M[5]=O[5]*be,M[6]=O[6]*be,M[7]=O[7]*be,M[8]=O[8]*Le,M[9]=O[9]*Le,M[10]=O[10]*Le,M[11]=O[11]*Le,M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15],M},l.scale$1=function(M,O,G){return M[0]=O[0]*G,M[1]=O[1]*G,M[2]=O[2]*G,M[3]=O[3]*G,M},l.scale$2=function(M,O,G){return M[0]=O[0]*G,M[1]=O[1]*G,M[2]=O[2]*G,M},l.setCacheLimits=function(M,O){ze=M,ce=O},l.setRTLTextPlugin=function(M,O,G){if(void 0===G&&(G=!1),Ji===xa||Ji===ko||Ji===Va)throw new Error("setRTLTextPlugin cannot be called multiple times.");Da=Z.resolveURL(M),Ji=xa,Ho=O,xs(),G||Ka()},l.sphericalToCartesian=function(M){var O=M[0],G=M[1],ie=M[2];return G+=90,G*=Math.PI/180,ie*=Math.PI/180,{x:O*Math.cos(G)*Math.sin(ie),y:O*Math.sin(G)*Math.sin(ie),z:O*Math.cos(ie)}},l.sqrLen=function(M){var O=M[0],G=M[1];return O*O+G*G},l.styleSpec=Se,l.sub=function(M,O,G){return M[0]=O[0]-G[0],M[1]=O[1]-G[1],M[2]=O[2]-G[2],M},l.symbolSize=Op,l.transformMat3=function(M,O,G){var ie=O[0],be=O[1],Le=O[2];return M[0]=ie*G[0]+be*G[3]+Le*G[6],M[1]=ie*G[1]+be*G[4]+Le*G[7],M[2]=ie*G[2]+be*G[5]+Le*G[8],M},l.transformMat4=Au,l.translate=function(M,O,G){var ie,be,Le,je,Qe,lt,kt,Mt,Bt,qt,Vt,nn,xn=G[0],zn=G[1],In=G[2];return O===M?(M[12]=O[0]*xn+O[4]*zn+O[8]*In+O[12],M[13]=O[1]*xn+O[5]*zn+O[9]*In+O[13],M[14]=O[2]*xn+O[6]*zn+O[10]*In+O[14],M[15]=O[3]*xn+O[7]*zn+O[11]*In+O[15]):(be=O[1],Le=O[2],je=O[3],Qe=O[4],lt=O[5],kt=O[6],Mt=O[7],Bt=O[8],qt=O[9],Vt=O[10],nn=O[11],M[0]=ie=O[0],M[1]=be,M[2]=Le,M[3]=je,M[4]=Qe,M[5]=lt,M[6]=kt,M[7]=Mt,M[8]=Bt,M[9]=qt,M[10]=Vt,M[11]=nn,M[12]=ie*xn+Qe*zn+Bt*In+O[12],M[13]=be*xn+lt*zn+qt*In+O[13],M[14]=Le*xn+kt*zn+Vt*In+O[14],M[15]=je*xn+Mt*zn+nn*In+O[15]),M},l.triggerPluginCompletionEvent=ri,l.uniqueId=f,l.validateCustomStyleLayer=function(M){var O=[],G=M.id;return void 0===G&&O.push({message:"layers."+G+': missing required property "id"'}),void 0===M.render&&O.push({message:"layers."+G+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==M.renderingMode&&O.push({message:"layers."+G+': property "renderingMode" must be either "2d" or "3d"'}),O},l.validateLight=qi,l.validateStyle=Yi,l.values=function(M){var O=[];for(var G in M)O.push(M[G]);return O},l.vectorTile=Ol,l.version=b,l.warnOnce=S,l.webpSupported=W,l.window=self,l.wrap=i}),A(0,function(l){function T(Ge){var Ze=typeof Ge;if("number"===Ze||"boolean"===Ze||"string"===Ze||null==Ge)return JSON.stringify(Ge);if(Array.isArray(Ge)){for(var Be="[",Ye=0,rt=Ge;Ye<rt.length;Ye+=1)Be+=T(rt[Ye])+",";return Be+"]"}for(var Se=Object.keys(Ge).sort(),Re="{",Ke=0;Ke<Se.length;Ke++)Re+=JSON.stringify(Se[Ke])+":"+T(Ge[Se[Ke]])+",";return Re+"}"}function b(Ge){for(var Ze="",Be=0,Ye=l.refProperties;Be<Ye.length;Be+=1)Ze+="/"+T(Ge[Ye[Be]]);return Ze}var d=function(Ge){this.keyCache={},Ge&&this.replace(Ge)};d.prototype.replace=function(Ge){this._layerConfigs={},this._layers={},this.update(Ge,[])},d.prototype.update=function(Ge,Ze){for(var Be=this,Ye=0,rt=Ge;Ye<rt.length;Ye+=1){var Se=rt[Ye];this._layerConfigs[Se.id]=Se;var Re=this._layers[Se.id]=l.createStyleLayer(Se);Re._featureFilter=l.featureFilter(Re.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(var Ke=0,st=Ze;Ke<st.length;Ke+=1){var ct=st[Ke];delete this.keyCache[ct],delete this._layerConfigs[ct],delete this._layers[ct]}this.familiesBySource={};for(var Tt=0,Et=function(Ut,Nt){for(var jt={},Gt=0;Gt<Ut.length;Gt++){var un=Nt&&Nt[Ut[Gt].id]||b(Ut[Gt]);Nt&&(Nt[Ut[Gt].id]=un);var hn=jt[un];hn||(hn=jt[un]=[]),hn.push(Ut[Gt])}var Qt=[];for(var _n in jt)Qt.push(jt[_n]);return Qt}(l.values(this._layerConfigs),this.keyCache);Tt<Et.length;Tt+=1){var At=Et[Tt].map(function(Ut){return Be._layers[Ut.id]}),ht=At[0];if("none"!==ht.visibility){var pt=ht.source||"",gt=this.familiesBySource[pt];gt||(gt=this.familiesBySource[pt]={});var Pt=ht.sourceLayer||"_geojsonTileLayer",zt=gt[Pt];zt||(zt=gt[Pt]=[]),zt.push(At)}}};var s=function(Ge){var Ze={},Be=[];for(var Ye in Ge){var rt=Ge[Ye],Se=Ze[Ye]={};for(var Re in rt){var Ke=rt[+Re];if(Ke&&0!==Ke.bitmap.width&&0!==Ke.bitmap.height){var st={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};Be.push(st),Se[Re]={rect:st,metrics:Ke.metrics}}}}var ct=l.potpack(Be),At=new l.AlphaImage({width:ct.w||1,height:ct.h||1});for(var ht in Ge){var pt=Ge[ht];for(var gt in pt){var Pt=pt[+gt];if(Pt&&0!==Pt.bitmap.width&&0!==Pt.bitmap.height){var zt=Ze[ht][gt].rect;l.AlphaImage.copy(Pt.bitmap,At,{x:0,y:0},{x:zt.x+1,y:zt.y+1},Pt.bitmap)}}}this.image=At,this.positions=Ze};l.register("GlyphAtlas",s);var t=function(Ge){this.tileID=new l.OverscaledTileID(Ge.tileID.overscaledZ,Ge.tileID.wrap,Ge.tileID.canonical.z,Ge.tileID.canonical.x,Ge.tileID.canonical.y),this.uid=Ge.uid,this.zoom=Ge.zoom,this.pixelRatio=Ge.pixelRatio,this.tileSize=Ge.tileSize,this.source=Ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ge.showCollisionBoxes,this.collectResourceTiming=!!Ge.collectResourceTiming,this.returnDependencies=!!Ge.returnDependencies,this.promoteId=Ge.promoteId};function o(Ge,Ze,Be){for(var Ye=new l.EvaluationParameters(Ze),rt=0,Se=Ge;rt<Se.length;rt+=1)Se[rt].recalculate(Ye,Be)}function r(Ge,Ze){var Be=l.getArrayBuffer(Ge.request,function(Ye,rt,Se,Re){Ye?Ze(Ye):rt&&Ze(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(rt)),rawData:rt,cacheControl:Se,expires:Re})});return function(){Be.cancel(),Ze()}}t.prototype.parse=function(Ge,Ze,Be,Ye,rt){var Se=this;this.status="parsing",this.data=Ge,this.collisionBoxArray=new l.CollisionBoxArray;var Re=new l.DictionaryCoder(Object.keys(Ge.layers).sort()),Ke=new l.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var st,ct,Tt,Et,At={},ht={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},pt=Ze.familiesBySource[this.source];for(var gt in pt){var Pt=Ge.layers[gt];if(Pt){1===Pt.version&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+gt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var zt=Re.encode(gt),Ut=[],Nt=0;Nt<Pt.length;Nt++){var jt=Pt.feature(Nt),Gt=Ke.getId(jt,gt);Ut.push({feature:jt,id:Gt,index:Nt,sourceLayerIndex:zt})}for(var un=0,hn=pt[gt];un<hn.length;un+=1){var Qt=hn[un],_n=Qt[0];_n.minzoom&&this.zoom<Math.floor(_n.minzoom)||_n.maxzoom&&this.zoom>=_n.maxzoom||"none"!==_n.visibility&&(o(Qt,this.zoom,Be),(At[_n.id]=_n.createBucket({index:Ke.bucketLayerIDs.length,layers:Qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zt,sourceID:this.source})).populate(Ut,ht,this.tileID.canonical),Ke.bucketLayerIDs.push(Qt.map(function(ln){return ln.id})))}}}var Fn=l.mapObject(ht.glyphDependencies,function(ln){return Object.keys(ln).map(Number)});Object.keys(Fn).length?Ye.send("getGlyphs",{uid:this.uid,stacks:Fn},function(ln,dn){st||(st=ln,ct=dn,pn.call(Se))}):ct={};var yn=Object.keys(ht.iconDependencies);yn.length?Ye.send("getImages",{icons:yn,source:this.source,tileID:this.tileID,type:"icons"},function(ln,dn){st||(st=ln,Tt=dn,pn.call(Se))}):Tt={};var on=Object.keys(ht.patternDependencies);function pn(){if(st)return rt(st);if(ct&&Tt&&Et){var ln=new s(ct),dn=new l.ImageAtlas(Tt,Et);for(var Cn in At){var kn=At[Cn];kn instanceof l.SymbolBucket?(o(kn.layers,this.zoom,Be),l.performSymbolLayout(kn,ct,ln.positions,Tt,dn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):kn.hasPattern&&(kn instanceof l.LineBucket||kn instanceof l.FillBucket||kn instanceof l.FillExtrusionBucket)&&(o(kn.layers,this.zoom,Be),kn.addFeatures(ht,this.tileID.canonical,dn.patternPositions))}this.status="done",rt(null,{buckets:l.values(At).filter(function(Rn){return!Rn.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ln.image,imageAtlas:dn,glyphMap:this.returnDependencies?ct:null,iconMap:this.returnDependencies?Tt:null,glyphPositions:this.returnDependencies?ln.positions:null})}}on.length?Ye.send("getImages",{icons:on,source:this.source,tileID:this.tileID,type:"patterns"},function(ln,dn){st||(st=ln,Et=dn,pn.call(Se))}):Et={},pn.call(this)};var n=function(Ge,Ze,Be,Ye){this.actor=Ge,this.layerIndex=Ze,this.availableImages=Be,this.loadVectorData=Ye||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ge,Ze){var Be=this,Ye=Ge.uid;this.loading||(this.loading={});var rt=!!(Ge&&Ge.request&&Ge.request.collectResourceTiming)&&new l.RequestPerformance(Ge.request),Se=this.loading[Ye]=new t(Ge);Se.abort=this.loadVectorData(Ge,function(Re,Ke){if(delete Be.loading[Ye],Re||!Ke)return Se.status="done",Be.loaded[Ye]=Se,Ze(Re);var st=Ke.rawData,ct={};Ke.expires&&(ct.expires=Ke.expires),Ke.cacheControl&&(ct.cacheControl=Ke.cacheControl);var Tt={};if(rt){var Et=rt.finish();Et&&(Tt.resourceTiming=JSON.parse(JSON.stringify(Et)))}Se.vectorTile=Ke.vectorTile,Se.parse(Ke.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(At,ht){if(At||!ht)return Ze(At);Ze(null,l.extend({rawTileData:st.slice(0)},ht,ct,Tt))}),Be.loaded=Be.loaded||{},Be.loaded[Ye]=Se})},n.prototype.reloadTile=function(Ge,Ze){var Be=this,Ye=this.loaded,rt=Ge.uid,Se=this;if(Ye&&Ye[rt]){var Re=Ye[rt];Re.showCollisionBoxes=Ge.showCollisionBoxes;var Ke=function(st,ct){var Tt=Re.reloadCallback;Tt&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,Se.layerIndex,Be.availableImages,Se.actor,Tt)),Ze(st,ct)};"parsing"===Re.status?Re.reloadCallback=Ke:"done"===Re.status&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},n.prototype.abortTile=function(Ge,Ze){var Be=this.loading,Ye=Ge.uid;Be&&Be[Ye]&&Be[Ye].abort&&(Be[Ye].abort(),delete Be[Ye]),Ze()},n.prototype.removeTile=function(Ge,Ze){var Be=this.loaded,Ye=Ge.uid;Be&&Be[Ye]&&delete Be[Ye],Ze()};var a=l.window.ImageBitmap,i=function(){this.loaded={}};i.prototype.loadTile=function(Ge,Ze){var Be=Ge.uid,Ye=Ge.encoding,rt=Ge.rawImageData,Se=a&&rt instanceof a?this.getImageData(rt):rt,Re=new l.DEMData(Be,Se,Ye);this.loaded=this.loaded||{},this.loaded[Be]=Re,Ze(null,Re)},i.prototype.getImageData=function(Ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ge.width,Ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ge.width,this.offscreenCanvas.height=Ge.height,this.offscreenCanvasContext.drawImage(Ge,0,0,Ge.width,Ge.height);var Ze=this.offscreenCanvasContext.getImageData(-1,-1,Ge.width+2,Ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Ze.width,height:Ze.height},Ze.data)},i.prototype.removeTile=function(Ge){var Ze=this.loaded,Be=Ge.uid;Ze&&Ze[Be]&&delete Ze[Be]};var c=function Ge(Ze,Be){var Ye,rt=Ze&&Ze.type;if("FeatureCollection"===rt)for(Ye=0;Ye<Ze.features.length;Ye++)Ge(Ze.features[Ye],Be);else if("GeometryCollection"===rt)for(Ye=0;Ye<Ze.geometries.length;Ye++)Ge(Ze.geometries[Ye],Be);else if("Feature"===rt)Ge(Ze.geometry,Be);else if("Polygon"===rt)h(Ze.coordinates,Be);else if("MultiPolygon"===rt)for(Ye=0;Ye<Ze.coordinates.length;Ye++)h(Ze.coordinates[Ye],Be);return Ze};function h(Ge,Ze){if(0!==Ge.length){f(Ge[0],Ze);for(var Be=1;Be<Ge.length;Be++)f(Ge[Be],!Ze)}}function f(Ge,Ze){for(var Be=0,Ye=0,rt=Ge.length,Se=rt-1;Ye<rt;Se=Ye++)Be+=(Ge[Ye][0]-Ge[Se][0])*(Ge[Se][1]+Ge[Ye][1]);Be>=0!=!!Ze&&Ge.reverse()}var x=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Ge){this._feature=Ge,this.extent=l.EXTENT,this.type=Ge.type,this.properties=Ge.tags,"id"in Ge&&!isNaN(Ge.id)&&(this.id=parseInt(Ge.id,10))};v.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ge=[],Ze=0,Be=this._feature.geometry;Ze<Be.length;Ze+=1){var Ye=Be[Ze];Ge.push([new l.Point$1(Ye[0],Ye[1])])}return Ge}for(var rt=[],Se=0,Re=this._feature.geometry;Se<Re.length;Se+=1){for(var Ke=[],st=0,ct=Re[Se];st<ct.length;st+=1){var Tt=ct[st];Ke.push(new l.Point$1(Tt[0],Tt[1]))}rt.push(Ke)}return rt},v.prototype.toGeoJSON=function(Ge,Ze,Be){return x.call(this,Ge,Ze,Be)};var g=function(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ge.length,this._features=Ge};g.prototype.feature=function(Ge){return new v(this._features[Ge])};var y=l.vectorTile.VectorTileFeature,p=m;function m(Ge,Ze){this.options=Ze||{},this.features=Ge,this.length=Ge.length}function w(Ge,Ze){this.id="number"==typeof Ge.id?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=1===Ge.type?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=Ze||4096}m.prototype.feature=function(Ge){return new w(this.features[Ge],this.options.extent)},w.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var Ze=0;Ze<Ge.length;Ze++){for(var Be=Ge[Ze],Ye=[],rt=0;rt<Be.length;rt++)Ye.push(new l.Point$1(Be[rt][0],Be[rt][1]));this.geometry.push(Ye)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,Ze=1/0,Be=-1/0,Ye=1/0,rt=-1/0,Se=0;Se<Ge.length;Se++)for(var Re=Ge[Se],Ke=0;Ke<Re.length;Ke++){var st=Re[Ke];Ze=Math.min(Ze,st.x),Be=Math.max(Be,st.x),Ye=Math.min(Ye,st.y),rt=Math.max(rt,st.y)}return[Ze,Ye,Be,rt]},w.prototype.toGeoJSON=y.prototype.toGeoJSON;var u=L,E=p;function L(Ge){var Ze=new l.pbf;return function(Be,Ye){for(var rt in Be.layers)Ye.writeMessage(3,C,Be.layers[rt])}(Ge,Ze),Ze.finish()}function C(Ge,Ze){var Be;Ze.writeVarintField(15,Ge.version||1),Ze.writeStringField(1,Ge.name||""),Ze.writeVarintField(5,Ge.extent||4096);var Ye={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<Ge.length;Be++)Ye.feature=Ge.feature(Be),Ze.writeMessage(2,P,Ye);var rt=Ye.keys;for(Be=0;Be<rt.length;Be++)Ze.writeStringField(3,rt[Be]);var Se=Ye.values;for(Be=0;Be<Se.length;Be++)Ze.writeMessage(4,F,Se[Be])}function P(Ge,Ze){var Be=Ge.feature;void 0!==Be.id&&Ze.writeVarintField(1,Be.id),Ze.writeMessage(2,I,Ge),Ze.writeVarintField(3,Be.type),Ze.writeMessage(4,H,Be)}function I(Ge,Ze){var Be=Ge.feature,Ye=Ge.keys,rt=Ge.values,Se=Ge.keycache,Re=Ge.valuecache;for(var Ke in Be.properties){var st=Se[Ke];void 0===st&&(Ye.push(Ke),Se[Ke]=st=Ye.length-1),Ze.writeVarint(st);var ct=Be.properties[Ke],Tt=typeof ct;"string"!==Tt&&"boolean"!==Tt&&"number"!==Tt&&(ct=JSON.stringify(ct));var Et=Tt+":"+ct,At=Re[Et];void 0===At&&(rt.push(ct),Re[Et]=At=rt.length-1),Ze.writeVarint(At)}}function j(Ge,Ze){return(Ze<<3)+(7&Ge)}function R(Ge){return Ge<<1^Ge>>31}function H(Ge,Ze){for(var Be=Ge.loadGeometry(),Ye=Ge.type,rt=0,Se=0,Re=Be.length,Ke=0;Ke<Re;Ke++){var st=Be[Ke],ct=1;1===Ye&&(ct=st.length),Ze.writeVarint(j(1,ct));for(var Tt=3===Ye?st.length-1:st.length,Et=0;Et<Tt;Et++){1===Et&&1!==Ye&&Ze.writeVarint(j(2,Tt-1));var At=st[Et].x-rt,ht=st[Et].y-Se;Ze.writeVarint(R(At)),Ze.writeVarint(R(ht)),rt+=At,Se+=ht}3===Ye&&Ze.writeVarint(j(7,1))}}function F(Ge,Ze){var Be=typeof Ge;"string"===Be?Ze.writeStringField(1,Ge):"boolean"===Be?Ze.writeBooleanField(7,Ge):"number"===Be&&(Ge%1!=0?Ze.writeDoubleField(3,Ge):Ge<0?Ze.writeSVarintField(6,Ge):Ze.writeVarintField(5,Ge))}function U(Ge,Ze,Be,Ye,rt,Se){if(!(rt-Ye<=Be)){var Re=Ye+rt>>1;B(Ge,Ze,Re,Ye,rt,Se%2),U(Ge,Ze,Be,Ye,Re-1,Se+1),U(Ge,Ze,Be,Re+1,rt,Se+1)}}function B(Ge,Ze,Be,Ye,rt,Se){for(;rt>Ye;){if(rt-Ye>600){var Re=rt-Ye+1,Ke=Be-Ye+1,st=Math.log(Re),ct=.5*Math.exp(2*st/3),Tt=.5*Math.sqrt(st*ct*(Re-ct)/Re)*(Ke-Re/2<0?-1:1);B(Ge,Ze,Be,Math.max(Ye,Math.floor(Be-Ke*ct/Re+Tt)),Math.min(rt,Math.floor(Be+(Re-Ke)*ct/Re+Tt)),Se)}var Et=Ze[2*Be+Se],At=Ye,ht=rt;for(N(Ge,Ze,Ye,Be),Ze[2*rt+Se]>Et&&N(Ge,Ze,Ye,rt);At<ht;){for(N(Ge,Ze,At,ht),At++,ht--;Ze[2*At+Se]<Et;)At++;for(;Ze[2*ht+Se]>Et;)ht--}Ze[2*Ye+Se]===Et?N(Ge,Ze,Ye,ht):N(Ge,Ze,++ht,rt),ht<=Be&&(Ye=ht+1),Be<=ht&&(rt=ht-1)}}function N(Ge,Ze,Be,Ye){J(Ge,Be,Ye),J(Ze,2*Be,2*Ye),J(Ze,2*Be+1,2*Ye+1)}function J(Ge,Ze,Be){var Ye=Ge[Ze];Ge[Ze]=Ge[Be],Ge[Be]=Ye}function Z(Ge,Ze,Be,Ye){var rt=Ge-Be,Se=Ze-Ye;return rt*rt+Se*Se}u.fromVectorTileJs=L,u.fromGeojsonVt=function(Ge,Ze){Ze=Ze||{};var Be={};for(var Ye in Ge)Be[Ye]=new p(Ge[Ye].features,Ze),Be[Ye].name=Ye,Be[Ye].version=Ze.version,Be[Ye].extent=Ze.extent;return L({layers:Be})},u.GeoJSONWrapper=E;var V=function(Ge){return Ge[0]},W=function(Ge){return Ge[1]},X=function(Ge,Ze,Be,Ye,rt){void 0===Ze&&(Ze=V),void 0===Be&&(Be=W),void 0===Ye&&(Ye=64),void 0===rt&&(rt=Float64Array),this.nodeSize=Ye,this.points=Ge;for(var Se=Ge.length<65536?Uint16Array:Uint32Array,Re=this.ids=new Se(Ge.length),Ke=this.coords=new rt(2*Ge.length),st=0;st<Ge.length;st++)Re[st]=st,Ke[2*st]=Ze(Ge[st]),Ke[2*st+1]=Be(Ge[st]);U(Re,Ke,Ye,0,Re.length-1,0)};X.prototype.range=function(Ge,Ze,Be,Ye){return function(rt,Se,Re,Ke,st,ct,Tt){for(var Et,At,ht=[0,rt.length-1,0],pt=[];ht.length;){var gt=ht.pop(),Pt=ht.pop(),zt=ht.pop();if(Pt-zt<=Tt)for(var Ut=zt;Ut<=Pt;Ut++)At=Se[2*Ut+1],(Et=Se[2*Ut])>=Re&&Et<=st&&At>=Ke&&At<=ct&&pt.push(rt[Ut]);else{var Nt=Math.floor((zt+Pt)/2);At=Se[2*Nt+1],(Et=Se[2*Nt])>=Re&&Et<=st&&At>=Ke&&At<=ct&&pt.push(rt[Nt]);var jt=(gt+1)%2;(0===gt?Re<=Et:Ke<=At)&&(ht.push(zt),ht.push(Nt-1),ht.push(jt)),(0===gt?st>=Et:ct>=At)&&(ht.push(Nt+1),ht.push(Pt),ht.push(jt))}}return pt}(this.ids,this.coords,Ge,Ze,Be,Ye,this.nodeSize)},X.prototype.within=function(Ge,Ze,Be){return function(Ye,rt,Se,Re,Ke,st){for(var ct=[0,Ye.length-1,0],Tt=[],Et=Ke*Ke;ct.length;){var At=ct.pop(),ht=ct.pop(),pt=ct.pop();if(ht-pt<=st)for(var gt=pt;gt<=ht;gt++)Z(rt[2*gt],rt[2*gt+1],Se,Re)<=Et&&Tt.push(Ye[gt]);else{var Pt=Math.floor((pt+ht)/2),zt=rt[2*Pt],Ut=rt[2*Pt+1];Z(zt,Ut,Se,Re)<=Et&&Tt.push(Ye[Pt]);var Nt=(At+1)%2;(0===At?Se-Ke<=zt:Re-Ke<=Ut)&&(ct.push(pt),ct.push(Pt-1),ct.push(Nt)),(0===At?Se+Ke>=zt:Re+Ke>=Ut)&&(ct.push(Pt+1),ct.push(ht),ct.push(Nt))}}return Tt}(this.ids,this.coords,Ge,Ze,Be,this.nodeSize)};var K={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ge){return Ge}},ne=function(Ge){this.options=se(Object.create(K),Ge),this.trees=new Array(this.options.maxZoom+1)};function re(Ge,Ze,Be,Ye,rt){return{x:Ge,y:Ze,zoom:1/0,id:Be,parentId:-1,numPoints:Ye,properties:rt}}function ae(Ge,Ze){var Be=Ge.geometry.coordinates,rt=Be[1];return{x:xe(Be[0]),y:ye(rt),zoom:1/0,index:Ze,parentId:-1}}function le(Ge){return{type:"Feature",id:Ge.id,properties:pe(Ge),geometry:{type:"Point",coordinates:[(Ye=Ge.x,360*(Ye-.5)),(Ze=Ge.y,Be=(180-360*Ze)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var Ze,Be,Ye}function pe(Ge){var Ze=Ge.numPoints,Be=Ze>=1e4?Math.round(Ze/1e3)+"k":Ze>=1e3?Math.round(Ze/100)/10+"k":Ze;return se(se({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:Ze,point_count_abbreviated:Be})}function xe(Ge){return Ge/360+.5}function ye(Ge){var Ze=Math.sin(Ge*Math.PI/180),Be=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Be<0?0:Be>1?1:Be}function se(Ge,Ze){for(var Be in Ze)Ge[Be]=Ze[Be];return Ge}function fe(Ge){return Ge.x}function Ee(Ge){return Ge.y}function de(Ge,Ze,Be,Ye){for(var rt,Se=Ye,Re=Be-Ze>>1,Ke=Be-Ze,st=Ge[Ze],ct=Ge[Ze+1],Tt=Ge[Be],Et=Ge[Be+1],At=Ze+3;At<Be;At+=3){var ht=we(Ge[At],Ge[At+1],st,ct,Tt,Et);if(ht>Se)rt=At,Se=ht;else if(ht===Se){var pt=Math.abs(At-Re);pt<Ke&&(rt=At,Ke=pt)}}Se>Ye&&(rt-Ze>3&&de(Ge,Ze,rt,Ye),Ge[rt+2]=Se,Be-rt>3&&de(Ge,rt,Be,Ye))}function we(Ge,Ze,Be,Ye,rt,Se){var Re=rt-Be,Ke=Se-Ye;if(0!==Re||0!==Ke){var st=((Ge-Be)*Re+(Ze-Ye)*Ke)/(Re*Re+Ke*Ke);st>1?(Be=rt,Ye=Se):st>0&&(Be+=Re*st,Ye+=Ke*st)}return(Re=Ge-Be)*Re+(Ke=Ze-Ye)*Ke}function ke(Ge,Ze,Be,Ye){var rt={id:void 0===Ge?null:Ge,type:Ze,geometry:Be,tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var Re=Se.geometry,Ke=Se.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)Te(Se,Re);else if("Polygon"===Ke||"MultiLineString"===Ke)for(var st=0;st<Re.length;st++)Te(Se,Re[st]);else if("MultiPolygon"===Ke)for(st=0;st<Re.length;st++)for(var ct=0;ct<Re[st].length;ct++)Te(Se,Re[st][ct])}(rt),rt}function Te(Ge,Ze){for(var Be=0;Be<Ze.length;Be+=3)Ge.minX=Math.min(Ge.minX,Ze[Be]),Ge.minY=Math.min(Ge.minY,Ze[Be+1]),Ge.maxX=Math.max(Ge.maxX,Ze[Be]),Ge.maxY=Math.max(Ge.maxY,Ze[Be+1])}function $(Ge,Ze,Be,Ye){if(Ze.geometry){var rt=Ze.geometry.coordinates,Se=Ze.geometry.type,Re=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),Ke=[],st=Ze.id;if(Be.promoteId?st=Ze.properties[Be.promoteId]:Be.generateId&&(st=Ye||0),"Point"===Se)oe(rt,Ke);else if("MultiPoint"===Se)for(var ct=0;ct<rt.length;ct++)oe(rt[ct],Ke);else if("LineString"===Se)he(rt,Ke,Re,!1);else if("MultiLineString"===Se){if(Be.lineMetrics){for(ct=0;ct<rt.length;ct++)he(rt[ct],Ke=[],Re,!1),Ge.push(ke(st,"LineString",Ke,Ze.properties));return}me(rt,Ke,Re,!1)}else if("Polygon"===Se)me(rt,Ke,Re,!0);else{if("MultiPolygon"!==Se){if("GeometryCollection"===Se){for(ct=0;ct<Ze.geometry.geometries.length;ct++)$(Ge,{id:st,geometry:Ze.geometry.geometries[ct],properties:Ze.properties},Be,Ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ct=0;ct<rt.length;ct++){var Tt=[];me(rt[ct],Tt,Re,!0),Ke.push(Tt)}}Ge.push(ke(st,Se,Ke,Ze.properties))}}function oe(Ge,Ze){Ze.push(Me(Ge[0])),Ze.push(Ie(Ge[1])),Ze.push(0)}function he(Ge,Ze,Be,Ye){for(var rt,Se,Re=0,Ke=0;Ke<Ge.length;Ke++){var st=Me(Ge[Ke][0]),ct=Ie(Ge[Ke][1]);Ze.push(st),Ze.push(ct),Ze.push(0),Ke>0&&(Re+=Ye?(rt*ct-st*Se)/2:Math.sqrt(Math.pow(st-rt,2)+Math.pow(ct-Se,2))),rt=st,Se=ct}var Tt=Ze.length-3;Ze[2]=1,de(Ze,0,Tt,Be),Ze[Tt+2]=1,Ze.size=Math.abs(Re),Ze.start=0,Ze.end=Ze.size}function me(Ge,Ze,Be,Ye){for(var rt=0;rt<Ge.length;rt++){var Se=[];he(Ge[rt],Se,Be,Ye),Ze.push(Se)}}function Me(Ge){return Ge/360+.5}function Ie(Ge){var Ze=Math.sin(Ge*Math.PI/180),Be=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Be<0?0:Be>1?1:Be}function Pe(Ge,Ze,Be,Ye,rt,Se,Re,Ke){if(Ye/=Ze,Se>=(Be/=Ze)&&Re<Ye)return Ge;if(Re<Be||Se>=Ye)return null;for(var st=[],ct=0;ct<Ge.length;ct++){var Tt=Ge[ct],Et=Tt.geometry,At=Tt.type,ht=0===rt?Tt.minX:Tt.minY,pt=0===rt?Tt.maxX:Tt.maxY;if(ht>=Be&&pt<Ye)st.push(Tt);else if(!(pt<Be||ht>=Ye)){var gt=[];if("Point"===At||"MultiPoint"===At)ze(Et,gt,Be,Ye,rt);else if("LineString"===At)ce(Et,gt,Be,Ye,rt,!1,Ke.lineMetrics);else if("MultiLineString"===At)_e(Et,gt,Be,Ye,rt,!1);else if("Polygon"===At)_e(Et,gt,Be,Ye,rt,!0);else if("MultiPolygon"===At)for(var Pt=0;Pt<Et.length;Pt++){var zt=[];_e(Et[Pt],zt,Be,Ye,rt,!0),zt.length&&gt.push(zt)}if(gt.length){if(Ke.lineMetrics&&"LineString"===At){for(Pt=0;Pt<gt.length;Pt++)st.push(ke(Tt.id,At,gt[Pt],Tt.tags));continue}"LineString"!==At&&"MultiLineString"!==At||(1===gt.length?(At="LineString",gt=gt[0]):At="MultiLineString"),"Point"!==At&&"MultiPoint"!==At||(At=3===gt.length?"Point":"MultiPoint"),st.push(ke(Tt.id,At,gt,Tt.tags))}}}return st.length?st:null}function ze(Ge,Ze,Be,Ye,rt){for(var Se=0;Se<Ge.length;Se+=3){var Re=Ge[Se+rt];Re>=Be&&Re<=Ye&&(Ze.push(Ge[Se]),Ze.push(Ge[Se+1]),Ze.push(Ge[Se+2]))}}function ce(Ge,Ze,Be,Ye,rt,Se,Re){for(var Ke,st,ct=ge(Ge),Tt=0===rt?He:Ve,Et=Ge.start,At=0;At<Ge.length-3;At+=3){var ht=Ge[At],pt=Ge[At+1],gt=Ge[At+2],Pt=Ge[At+3],zt=Ge[At+4],Ut=0===rt?ht:pt,Nt=0===rt?Pt:zt,jt=!1;Re&&(Ke=Math.sqrt(Math.pow(ht-Pt,2)+Math.pow(pt-zt,2))),Ut<Be?Nt>Be&&(st=Tt(ct,ht,pt,Pt,zt,Be),Re&&(ct.start=Et+Ke*st)):Ut>Ye?Nt<Ye&&(st=Tt(ct,ht,pt,Pt,zt,Ye),Re&&(ct.start=Et+Ke*st)):De(ct,ht,pt,gt),Nt<Be&&Ut>=Be&&(st=Tt(ct,ht,pt,Pt,zt,Be),jt=!0),Nt>Ye&&Ut<=Ye&&(st=Tt(ct,ht,pt,Pt,zt,Ye),jt=!0),!Se&&jt&&(Re&&(ct.end=Et+Ke*st),Ze.push(ct),ct=ge(Ge)),Re&&(Et+=Ke)}var Gt=Ge.length-3;ht=Ge[Gt],pt=Ge[Gt+1],gt=Ge[Gt+2],(Ut=0===rt?ht:pt)>=Be&&Ut<=Ye&&De(ct,ht,pt,gt),Gt=ct.length-3,Se&&Gt>=3&&(ct[Gt]!==ct[0]||ct[Gt+1]!==ct[1])&&De(ct,ct[0],ct[1],ct[2]),ct.length&&Ze.push(ct)}function ge(Ge){var Ze=[];return Ze.size=Ge.size,Ze.start=Ge.start,Ze.end=Ge.end,Ze}function _e(Ge,Ze,Be,Ye,rt,Se){for(var Re=0;Re<Ge.length;Re++)ce(Ge[Re],Ze,Be,Ye,rt,Se,!1)}function De(Ge,Ze,Be,Ye){Ge.push(Ze),Ge.push(Be),Ge.push(Ye)}function He(Ge,Ze,Be,Ye,rt,Se){var Re=(Se-Ze)/(Ye-Ze);return Ge.push(Se),Ge.push(Be+(rt-Be)*Re),Ge.push(1),Re}function Ve(Ge,Ze,Be,Ye,rt,Se){var Re=(Se-Be)/(rt-Be);return Ge.push(Ze+(Ye-Ze)*Re),Ge.push(Se),Ge.push(1),Re}function nt(Ge,Ze){for(var Be=[],Ye=0;Ye<Ge.length;Ye++){var rt,Se=Ge[Ye],Re=Se.type;if("Point"===Re||"MultiPoint"===Re||"LineString"===Re)rt=tt(Se.geometry,Ze);else if("MultiLineString"===Re||"Polygon"===Re){rt=[];for(var Ke=0;Ke<Se.geometry.length;Ke++)rt.push(tt(Se.geometry[Ke],Ze))}else if("MultiPolygon"===Re)for(rt=[],Ke=0;Ke<Se.geometry.length;Ke++){for(var st=[],ct=0;ct<Se.geometry[Ke].length;ct++)st.push(tt(Se.geometry[Ke][ct],Ze));rt.push(st)}Be.push(ke(Se.id,Re,rt,Se.tags))}return Be}function tt(Ge,Ze){var Be=[];Be.size=Ge.size,void 0!==Ge.start&&(Be.start=Ge.start,Be.end=Ge.end);for(var Ye=0;Ye<Ge.length;Ye+=3)Be.push(Ge[Ye]+Ze,Ge[Ye+1],Ge[Ye+2]);return Be}function at(Ge,Ze){if(Ge.transformed)return Ge;var Be,Ye,rt,Se=1<<Ge.z,Re=Ge.x,Ke=Ge.y;for(Be=0;Be<Ge.features.length;Be++){var st=Ge.features[Be],ct=st.geometry,Tt=st.type;if(st.geometry=[],1===Tt)for(Ye=0;Ye<ct.length;Ye+=2)st.geometry.push(dt(ct[Ye],ct[Ye+1],Ze,Se,Re,Ke));else for(Ye=0;Ye<ct.length;Ye++){var Et=[];for(rt=0;rt<ct[Ye].length;rt+=2)Et.push(dt(ct[Ye][rt],ct[Ye][rt+1],Ze,Se,Re,Ke));st.geometry.push(Et)}}return Ge.transformed=!0,Ge}function dt(Ge,Ze,Be,Ye,rt,Se){return[Math.round(Be*(Ge*Ye-rt)),Math.round(Be*(Ze*Ye-Se))]}function wt(Ge,Ze,Be,Ye,rt){for(var Se=Ze===rt.maxZoom?0:rt.tolerance/((1<<Ze)*rt.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:Ye,z:Ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<Ge.length;Ke++){Re.numFeatures++,bt(Re,Ge[Ke],Se,rt);var st=Ge[Ke].minX,ct=Ge[Ke].minY,Tt=Ge[Ke].maxX,Et=Ge[Ke].maxY;st<Re.minX&&(Re.minX=st),ct<Re.minY&&(Re.minY=ct),Tt>Re.maxX&&(Re.maxX=Tt),Et>Re.maxY&&(Re.maxY=Et)}return Re}function bt(Ge,Ze,Be,Ye){var rt=Ze.geometry,Se=Ze.type,Re=[];if("Point"===Se||"MultiPoint"===Se)for(var Ke=0;Ke<rt.length;Ke+=3)Re.push(rt[Ke]),Re.push(rt[Ke+1]),Ge.numPoints++,Ge.numSimplified++;else if("LineString"===Se)_t(Re,rt,Ge,Be,!1,!1);else if("MultiLineString"===Se||"Polygon"===Se)for(Ke=0;Ke<rt.length;Ke++)_t(Re,rt[Ke],Ge,Be,"Polygon"===Se,0===Ke);else if("MultiPolygon"===Se)for(var st=0;st<rt.length;st++){var ct=rt[st];for(Ke=0;Ke<ct.length;Ke++)_t(Re,ct[Ke],Ge,Be,!0,0===Ke)}if(Re.length){var Tt=Ze.tags||null;if("LineString"===Se&&Ye.lineMetrics){for(var Et in Tt={},Ze.tags)Tt[Et]=Ze.tags[Et];Tt.mapbox_clip_start=rt.start/rt.size,Tt.mapbox_clip_end=rt.end/rt.size}var At={geometry:Re,type:"Polygon"===Se||"MultiPolygon"===Se?3:"LineString"===Se||"MultiLineString"===Se?2:1,tags:Tt};null!==Ze.id&&(At.id=Ze.id),Ge.features.push(At)}}function _t(Ge,Ze,Be,Ye,rt,Se){var Re=Ye*Ye;if(Ye>0&&Ze.size<(rt?Re:Ye))Be.numPoints+=Ze.length/3;else{for(var Ke=[],st=0;st<Ze.length;st+=3)(0===Ye||Ze[st+2]>Re)&&(Be.numSimplified++,Ke.push(Ze[st]),Ke.push(Ze[st+1])),Be.numPoints++;rt&&function(ct,Tt){for(var Et=0,At=0,ht=ct.length,pt=ht-2;At<ht;pt=At,At+=2)Et+=(ct[At]-ct[pt])*(ct[At+1]+ct[pt+1]);if(Et>0===Tt)for(At=0,ht=ct.length;At<ht/2;At+=2){var gt=ct[At],Pt=ct[At+1];ct[At]=ct[ht-2-At],ct[At+1]=ct[ht-1-At],ct[ht-2-At]=gt,ct[ht-1-At]=Pt}}(Ke,Se),Ge.push(Ke)}}function Lt(Ge,Ze){var Be=(Ze=this.options=function(rt,Se){for(var Re in Se)rt[Re]=Se[Re];return rt}(Object.create(this.options),Ze)).debug;if(Be&&console.time("preprocess data"),Ze.maxZoom<0||Ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ze.promoteId&&Ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var rt,Se,Re,Ke,st,ct,Ye=function(rt,Se){var Re=[];if("FeatureCollection"===rt.type)for(var Ke=0;Ke<rt.features.length;Ke++)$(Re,rt.features[Ke],Se,Ke);else $(Re,"Feature"===rt.type?rt:{geometry:rt},Se);return Re}(Ge,Ze);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ze.indexMaxZoom,Ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(rt=Ye,Se=Ze,Re=Se.buffer/Se.extent,Ke=rt,st=Pe(rt,1,-1-Re,Re,0,-1,2,Se),ct=Pe(rt,1,1-Re,2+Re,0,-1,2,Se),(st||ct)&&(Ke=Pe(rt,1,-Re,1+Re,0,-1,2,Se)||[],st&&(Ke=nt(st,1).concat(Ke)),ct&&(Ke=Ke.concat(nt(ct,-1)))),Ye=Ke).length&&this.splitTile(Ye,0,0,0),Be&&(Ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ct(Ge,Ze,Be){return 32*((1<<Ge)*Be+Ze)+Ge}function Ot(Ge,Ze){var Be=Ge.tileID.canonical;if(!this._geoJSONIndex)return Ze(null,null);var Ye=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!Ye)return Ze(null,null);var rt=new g(Ye.features),Se=u(rt);0===Se.byteOffset&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),Ze(null,{vectorTile:rt,rawData:Se.buffer})}ne.prototype.load=function(Ge){var Ze=this.options,Be=Ze.log,Ye=Ze.minZoom,rt=Ze.maxZoom,Se=Ze.nodeSize;Be&&console.time("total time");var Re="prepare "+Ge.length+" points";Be&&console.time(Re),this.points=Ge;for(var Ke=[],st=0;st<Ge.length;st++)Ge[st].geometry&&Ke.push(ae(Ge[st],st));this.trees[rt+1]=new X(Ke,fe,Ee,Se,Float32Array),Be&&console.timeEnd(Re);for(var ct=rt;ct>=Ye;ct--){var Tt=+Date.now();Ke=this._cluster(Ke,ct),this.trees[ct]=new X(Ke,fe,Ee,Se,Float32Array),Be&&console.log("z%d: %d clusters in %dms",ct,Ke.length,+Date.now()-Tt)}return Be&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Ge,Ze){var Be=((Ge[0]+180)%360+360)%360-180,Ye=Math.max(-90,Math.min(90,Ge[1])),rt=180===Ge[2]?180:((Ge[2]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,Ge[3]));if(Ge[2]-Ge[0]>=360)Be=-180,rt=180;else if(Be>rt){var Re=this.getClusters([Be,Ye,180,Se],Ze),Ke=this.getClusters([-180,Ye,rt,Se],Ze);return Re.concat(Ke)}for(var st=this.trees[this._limitZoom(Ze)],ct=[],Tt=0,Et=st.range(xe(Be),ye(Se),xe(rt),ye(Ye));Tt<Et.length;Tt+=1){var ht=st.points[Et[Tt]];ct.push(ht.numPoints?le(ht):this.points[ht.index])}return ct},ne.prototype.getChildren=function(Ge){var Ze=this._getOriginId(Ge),Be=this._getOriginZoom(Ge),Ye="No cluster with the specified id.",rt=this.trees[Be];if(!rt)throw new Error(Ye);var Se=rt.points[Ze];if(!Se)throw new Error(Ye);for(var Re=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),Ke=[],st=0,ct=rt.within(Se.x,Se.y,Re);st<ct.length;st+=1){var Et=rt.points[ct[st]];Et.parentId===Ge&&Ke.push(Et.numPoints?le(Et):this.points[Et.index])}if(0===Ke.length)throw new Error(Ye);return Ke},ne.prototype.getLeaves=function(Ge,Ze,Be){var Ye=[];return this._appendLeaves(Ye,Ge,Ze=Ze||10,Be=Be||0,0),Ye},ne.prototype.getTile=function(Ge,Ze,Be){var Ye=this.trees[this._limitZoom(Ge)],rt=Math.pow(2,Ge),Se=this.options,Ke=Se.radius/Se.extent,st=(Be-Ke)/rt,ct=(Be+1+Ke)/rt,Tt={features:[]};return this._addTileFeatures(Ye.range((Ze-Ke)/rt,st,(Ze+1+Ke)/rt,ct),Ye.points,Ze,Be,rt,Tt),0===Ze&&this._addTileFeatures(Ye.range(1-Ke/rt,st,1,ct),Ye.points,rt,Be,rt,Tt),Ze===rt-1&&this._addTileFeatures(Ye.range(0,st,Ke/rt,ct),Ye.points,-1,Be,rt,Tt),Tt.features.length?Tt:null},ne.prototype.getClusterExpansionZoom=function(Ge){for(var Ze=this._getOriginZoom(Ge)-1;Ze<=this.options.maxZoom;){var Be=this.getChildren(Ge);if(Ze++,1!==Be.length)break;Ge=Be[0].properties.cluster_id}return Ze},ne.prototype._appendLeaves=function(Ge,Ze,Be,Ye,rt){for(var Se=0,Re=this.getChildren(Ze);Se<Re.length;Se+=1){var Ke=Re[Se],st=Ke.properties;if(st&&st.cluster?rt+st.point_count<=Ye?rt+=st.point_count:rt=this._appendLeaves(Ge,st.cluster_id,Be,Ye,rt):rt<Ye?rt++:Ge.push(Ke),Ge.length===Be)break}return rt},ne.prototype._addTileFeatures=function(Ge,Ze,Be,Ye,rt,Se){for(var Re=0,Ke=Ge;Re<Ke.length;Re+=1){var st=Ze[Ke[Re]],ct=st.numPoints,Tt={type:1,geometry:[[Math.round(this.options.extent*(st.x*rt-Be)),Math.round(this.options.extent*(st.y*rt-Ye))]],tags:ct?pe(st):this.points[st.index].properties},Et=void 0;ct?Et=st.id:this.options.generateId?Et=st.index:this.points[st.index].id&&(Et=this.points[st.index].id),void 0!==Et&&(Tt.id=Et),Se.features.push(Tt)}},ne.prototype._limitZoom=function(Ge){return Math.max(this.options.minZoom,Math.min(Ge,this.options.maxZoom+1))},ne.prototype._cluster=function(Ge,Ze){for(var Be=[],Ye=this.options,Re=Ye.reduce,Ke=Ye.radius/(Ye.extent*Math.pow(2,Ze)),st=0;st<Ge.length;st++){var ct=Ge[st];if(!(ct.zoom<=Ze)){ct.zoom=Ze;for(var Tt=this.trees[Ze+1],Et=Tt.within(ct.x,ct.y,Ke),At=ct.numPoints||1,ht=ct.x*At,pt=ct.y*At,gt=Re&&At>1?this._map(ct,!0):null,Pt=(st<<5)+(Ze+1)+this.points.length,zt=0,Ut=Et;zt<Ut.length;zt+=1){var jt=Tt.points[Ut[zt]];if(!(jt.zoom<=Ze)){jt.zoom=Ze;var Gt=jt.numPoints||1;ht+=jt.x*Gt,pt+=jt.y*Gt,At+=Gt,jt.parentId=Pt,Re&&(gt||(gt=this._map(ct,!0)),Re(gt,this._map(jt)))}}1===At?Be.push(ct):(ct.parentId=Pt,Be.push(re(ht/At,pt/At,Pt,At,gt)))}}return Be},ne.prototype._getOriginId=function(Ge){return Ge-this.points.length>>5},ne.prototype._getOriginZoom=function(Ge){return(Ge-this.points.length)%32},ne.prototype._map=function(Ge,Ze){if(Ge.numPoints)return Ze?se({},Ge.properties):Ge.properties;var Be=this.points[Ge.index].properties,Ye=this.options.map(Be);return Ze&&Ye===Be?se({},Ye):Ye},Lt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Lt.prototype.splitTile=function(Ge,Ze,Be,Ye,rt,Se,Re){for(var Ke=[Ge,Ze,Be,Ye],st=this.options,ct=st.debug;Ke.length;){Ye=Ke.pop(),Be=Ke.pop(),Ze=Ke.pop(),Ge=Ke.pop();var Tt=1<<Ze,Et=Ct(Ze,Be,Ye),At=this.tiles[Et];if(!At&&(ct>1&&console.time("creation"),At=this.tiles[Et]=wt(Ge,Ze,Be,Ye,st),this.tileCoords.push({z:Ze,x:Be,y:Ye}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ze,Be,Ye,At.numFeatures,At.numPoints,At.numSimplified),console.timeEnd("creation"));var ht="z"+Ze;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(At.source=Ge,rt){if(Ze===st.maxZoom||Ze===rt)continue;var pt=1<<rt-Ze;if(Be!==Math.floor(Se/pt)||Ye!==Math.floor(Re/pt))continue}else if(Ze===st.indexMaxZoom||At.numPoints<=st.indexMaxPoints)continue;if(At.source=null,0!==Ge.length){ct>1&&console.time("clipping");var gt,Pt,zt,Ut,Nt,jt,Gt=.5*st.buffer/st.extent,un=.5-Gt,hn=.5+Gt,Qt=1+Gt;gt=Pt=zt=Ut=null,Nt=Pe(Ge,Tt,Be-Gt,Be+hn,0,At.minX,At.maxX,st),jt=Pe(Ge,Tt,Be+un,Be+Qt,0,At.minX,At.maxX,st),Ge=null,Nt&&(gt=Pe(Nt,Tt,Ye-Gt,Ye+hn,1,At.minY,At.maxY,st),Pt=Pe(Nt,Tt,Ye+un,Ye+Qt,1,At.minY,At.maxY,st),Nt=null),jt&&(zt=Pe(jt,Tt,Ye-Gt,Ye+hn,1,At.minY,At.maxY,st),Ut=Pe(jt,Tt,Ye+un,Ye+Qt,1,At.minY,At.maxY,st),jt=null),ct>1&&console.timeEnd("clipping"),Ke.push(gt||[],Ze+1,2*Be,2*Ye),Ke.push(Pt||[],Ze+1,2*Be,2*Ye+1),Ke.push(zt||[],Ze+1,2*Be+1,2*Ye),Ke.push(Ut||[],Ze+1,2*Be+1,2*Ye+1)}}},Lt.prototype.getTile=function(Ge,Ze,Be){var Ye=this.options,rt=Ye.extent,Se=Ye.debug;if(Ge<0||Ge>24)return null;var Re=1<<Ge,Ke=Ct(Ge,Ze=(Ze%Re+Re)%Re,Be);if(this.tiles[Ke])return at(this.tiles[Ke],rt);Se>1&&console.log("drilling down to z%d-%d-%d",Ge,Ze,Be);for(var st,ct=Ge,Tt=Ze,Et=Be;!st&&ct>0;)ct--,Tt=Math.floor(Tt/2),Et=Math.floor(Et/2),st=this.tiles[Ct(ct,Tt,Et)];return st&&st.source?(Se>1&&console.log("found parent tile z%d-%d-%d",ct,Tt,Et),Se>1&&console.time("drilling down"),this.splitTile(st.source,ct,Tt,Et,Ge,Ze,Be),Se>1&&console.timeEnd("drilling down"),this.tiles[Ke]?at(this.tiles[Ke],rt):null):null};var Ht=function(Ge){function Ze(Be,Ye,rt,Se){Ge.call(this,Be,Ye,rt,Ot),Se&&(this.loadGeoJSON=Se)}return Ge&&(Ze.__proto__=Ge),(Ze.prototype=Object.create(Ge&&Ge.prototype)).constructor=Ze,Ze.prototype.loadData=function(Be,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ye,this._pendingLoadDataParams=Be,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ze.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ye=this._pendingCallback,rt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Se=!!(rt&&rt.request&&rt.request.collectResourceTiming)&&new l.RequestPerformance(rt.request);this.loadGeoJSON(rt,function(Re,Ke){if(Re||!Ke)return Ye(Re);if("object"!=typeof Ke)return Ye(new Error("Input data given to '"+rt.source+"' is not a valid GeoJSON object."));c(Ke,!0);try{Be._geoJSONIndex=rt.cluster?new ne(function(Tt){var Et=Tt.superclusterOptions,At=Tt.clusterProperties;if(!At||!Et)return Et;for(var ht={},pt={},gt={accumulated:null,zoom:0},Pt={properties:null},zt=Object.keys(At),Ut=0,Nt=zt;Ut<Nt.length;Ut+=1){var jt=Nt[Ut],Gt=At[jt],un=Gt[0],Qt=l.createExpression(Gt[1]),_n=l.createExpression("string"==typeof un?[un,["accumulated"],["get",jt]]:un);ht[jt]=Qt.value,pt[jt]=_n.value}return Et.map=function(Fn){Pt.properties=Fn;for(var yn={},on=0,pn=zt;on<pn.length;on+=1){var ln=pn[on];yn[ln]=ht[ln].evaluate(gt,Pt)}return yn},Et.reduce=function(Fn,yn){Pt.properties=yn;for(var on=0,pn=zt;on<pn.length;on+=1){var ln=pn[on];gt.accumulated=Fn[ln],Fn[ln]=pt[ln].evaluate(gt,Pt)}},Et}(rt)).load(Ke.features):new Lt(Tt=Ke,rt.geojsonVtOptions)}catch(Tt){return Ye(Tt)}var Tt;Be.loaded={};var st={};if(Se){var ct=Se.finish();ct&&(st.resourceTiming={},st.resourceTiming[rt.source]=JSON.parse(JSON.stringify(ct)))}Ye(null,st)})}},Ze.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ze.prototype.reloadTile=function(Be,Ye){var rt=this.loaded;return rt&&rt[Be.uid]?Ge.prototype.reloadTile.call(this,Be,Ye):this.loadTile(Be,Ye)},Ze.prototype.loadGeoJSON=function(Be,Ye){if(Be.request)l.getJSON(Be.request,Ye);else{if("string"!=typeof Be.data)return Ye(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return Ye(null,JSON.parse(Be.data))}catch{return Ye(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},Ze.prototype.removeSource=function(Be,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ye()},Ze.prototype.getClusterExpansionZoom=function(Be,Ye){try{Ye(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(rt){Ye(rt)}},Ze.prototype.getClusterChildren=function(Be,Ye){try{Ye(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(rt){Ye(rt)}},Ze.prototype.getClusterLeaves=function(Be,Ye){try{Ye(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(rt){Ye(rt)}},Ze}(n),It=function(Ge){var Ze=this;this.self=Ge,this.actor=new l.Actor(Ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ht},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,Ye){if(Ze.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');Ze.workerSourceTypes[Be]=Ye},this.self.registerRTLTextPlugin=function(Be){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Be.applyArabicShaping,l.plugin.processBidirectionalText=Be.processBidirectionalText,l.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return It.prototype.setReferrer=function(Ge,Ze){this.referrer=Ze},It.prototype.setImages=function(Ge,Ze,Be){for(var Ye in this.availableImages[Ge]=Ze,this.workerSources[Ge]){var rt=this.workerSources[Ge][Ye];for(var Se in rt)rt[Se].availableImages=Ze}Be()},It.prototype.setLayers=function(Ge,Ze,Be){this.getLayerIndex(Ge).replace(Ze),Be()},It.prototype.updateLayers=function(Ge,Ze,Be){this.getLayerIndex(Ge).update(Ze.layers,Ze.removedIds),Be()},It.prototype.loadTile=function(Ge,Ze,Be){this.getWorkerSource(Ge,Ze.type,Ze.source).loadTile(Ze,Be)},It.prototype.loadDEMTile=function(Ge,Ze,Be){this.getDEMWorkerSource(Ge,Ze.source).loadTile(Ze,Be)},It.prototype.reloadTile=function(Ge,Ze,Be){this.getWorkerSource(Ge,Ze.type,Ze.source).reloadTile(Ze,Be)},It.prototype.abortTile=function(Ge,Ze,Be){this.getWorkerSource(Ge,Ze.type,Ze.source).abortTile(Ze,Be)},It.prototype.removeTile=function(Ge,Ze,Be){this.getWorkerSource(Ge,Ze.type,Ze.source).removeTile(Ze,Be)},It.prototype.removeDEMTile=function(Ge,Ze){this.getDEMWorkerSource(Ge,Ze.source).removeTile(Ze)},It.prototype.removeSource=function(Ge,Ze,Be){if(this.workerSources[Ge]&&this.workerSources[Ge][Ze.type]&&this.workerSources[Ge][Ze.type][Ze.source]){var Ye=this.workerSources[Ge][Ze.type][Ze.source];delete this.workerSources[Ge][Ze.type][Ze.source],void 0!==Ye.removeSource?Ye.removeSource(Ze,Be):Be()}},It.prototype.loadWorkerSource=function(Ge,Ze,Be){try{this.self.importScripts(Ze.url),Be()}catch(Ye){Be(Ye.toString())}},It.prototype.syncRTLPluginState=function(Ge,Ze,Be){try{l.plugin.setState(Ze);var Ye=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&null!=Ye){this.self.importScripts(Ye);var rt=l.plugin.isParsed();Be(rt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ye),rt)}}catch(Se){Be(Se.toString())}},It.prototype.getAvailableImages=function(Ge){var Ze=this.availableImages[Ge];return Ze||(Ze=[]),Ze},It.prototype.getLayerIndex=function(Ge){var Ze=this.layerIndexes[Ge];return Ze||(Ze=this.layerIndexes[Ge]=new d),Ze},It.prototype.getWorkerSource=function(Ge,Ze,Be){var Ye=this;return this.workerSources[Ge]||(this.workerSources[Ge]={}),this.workerSources[Ge][Ze]||(this.workerSources[Ge][Ze]={}),this.workerSources[Ge][Ze][Be]||(this.workerSources[Ge][Ze][Be]=new this.workerSourceTypes[Ze]({send:function(Se,Re,Ke){Ye.actor.send(Se,Re,Ke,Ge)}},this.getLayerIndex(Ge),this.getAvailableImages(Ge))),this.workerSources[Ge][Ze][Be]},It.prototype.getDEMWorkerSource=function(Ge,Ze){return this.demWorkerSources[Ge]||(this.demWorkerSources[Ge]={}),this.demWorkerSources[Ge][Ze]||(this.demWorkerSources[Ge][Ze]=new i),this.demWorkerSources[Ge][Ze]},It.prototype.enforceCacheSizeLimit=function(Ge,Ze){l.enforceCacheSizeLimit(Ze)},typeof WorkerGlobalScope<"u"&&void 0!==l.window&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new It(l.window)),It}),A(0,function(l){var T=l.createCommonjsModule(function(D){function Y(ve){return!q(ve)}function q(ve){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Ne,qe,et=new Blob([""],{type:"text/javascript"}),vt=URL.createObjectURL(et);try{qe=new Worker(vt),Ne=!0}catch{Ne=!1}return qe&&qe.terminate(),URL.revokeObjectURL(vt),Ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Ne=document.createElement("canvas");Ne.width=Ne.height=1;var qe=Ne.getContext("2d");if(!qe)return!1;var et=qe.getImageData(0,0,1,1);return et&&et.width===Ne.width}()?(void 0===te[Ce=ve&&ve.failIfMajorPerformanceCaveat]&&(te[Ce]=function(Ne){var vt,yt,ee,qe=(vt=Ne,yt=document.createElement("canvas"),(ee=Object.create(Y.webGLContextAttributes)).failIfMajorPerformanceCaveat=vt,yt.probablySupportsContext?yt.probablySupportsContext("webgl",ee)||yt.probablySupportsContext("experimental-webgl",ee):yt.supportsContext?yt.supportsContext("webgl",ee)||yt.supportsContext("experimental-webgl",ee):yt.getContext("webgl",ee)||yt.getContext("experimental-webgl",ee));if(!qe)return!1;var et=qe.createShader(qe.VERTEX_SHADER);return!(!et||qe.isContextLost())&&(qe.shaderSource(et,"void main() {}"),qe.compileShader(et),!0===qe.getShaderParameter(et,qe.COMPILE_STATUS))}(Ce)),te[Ce]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Ce}D.exports?D.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=q);var te={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(D,Y,q){var te=l.window.document.createElement(D);return void 0!==Y&&(te.className=Y),q&&q.appendChild(te),te},createNS:function(D,Y){return l.window.document.createElementNS(D,Y)}},d=l.window.document.documentElement.style;function s(D){if(!d)return D[0];for(var Y=0;Y<D.length;Y++)if(D[Y]in d)return D[Y];return D[0]}var t,o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){d&&o&&(t=d[o],d[o]="none")},b.enableDrag=function(){d&&o&&(d[o]=t)};var r=s(["transform","WebkitTransform"]);b.setTransform=function(D,Y){D.style[r]=Y};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",a,a),l.window.removeEventListener("test",a,a)}catch{n=!1}b.addEventListener=function(D,Y,q,te){void 0===te&&(te={}),D.addEventListener(Y,q,"passive"in te&&n?te:te.capture)},b.removeEventListener=function(D,Y,q,te){void 0===te&&(te={}),D.removeEventListener(Y,q,"passive"in te&&n?te:te.capture)};var i=function(D){D.preventDefault(),D.stopPropagation(),l.window.removeEventListener("click",i,!0)};function c(D){var Y=D.userImage;return!!(Y&&Y.render&&Y.render())&&(D.data.replace(new Uint8Array(Y.data.buffer)),!0)}b.suppressClick=function(){l.window.addEventListener("click",i,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",i,!0)},0)},b.mousePos=function(D,Y){var q=D.getBoundingClientRect();return new l.Point(Y.clientX-q.left-D.clientLeft,Y.clientY-q.top-D.clientTop)},b.touchPos=function(D,Y){for(var q=D.getBoundingClientRect(),te=[],ve=0;ve<Y.length;ve++)te.push(new l.Point(Y[ve].clientX-q.left-D.clientLeft,Y[ve].clientY-q.top-D.clientTop));return te},b.mouseButton=function(D){return void 0!==l.window.InstallTrigger&&2===D.button&&D.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:D.button},b.remove=function(D){D.parentNode&&D.parentNode.removeChild(D)};var h=function(D){function Y(){D.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var te=0,ve=this.requestors;te<ve.length;te+=1){var Ce=ve[te];this._notify(Ce.ids,Ce.callback)}this.requestors=[]}},Y.prototype.getImage=function(q){return this.images[q]},Y.prototype.addImage=function(q,te){this._validate(q,te)&&(this.images[q]=te)},Y.prototype._validate=function(q,te){var ve=!0;return this._validateStretch(te.stretchX,te.data&&te.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),ve=!1),this._validateStretch(te.stretchY,te.data&&te.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),ve=!1),this._validateContent(te.content,te)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),ve=!1),ve},Y.prototype._validateStretch=function(q,te){if(!q)return!0;for(var ve=0,Ce=0,Ne=q;Ce<Ne.length;Ce+=1){var qe=Ne[Ce];if(qe[0]<ve||qe[1]<qe[0]||te<qe[1])return!1;ve=qe[1]}return!0},Y.prototype._validateContent=function(q,te){return!(q&&(4!==q.length||q[0]<0||te.data.width<q[0]||q[1]<0||te.data.height<q[1]||q[2]<0||te.data.width<q[2]||q[3]<0||te.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},Y.prototype.updateImage=function(q,te){te.version=this.images[q].version+1,this.images[q]=te,this.updatedImages[q]=!0},Y.prototype.removeImage=function(q){var te=this.images[q];delete this.images[q],delete this.patterns[q],te.userImage&&te.userImage.onRemove&&te.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(q,te){var ve=!0;if(!this.isLoaded())for(var Ce=0,Ne=q;Ce<Ne.length;Ce+=1)this.images[Ne[Ce]]||(ve=!1);this.isLoaded()||ve?this._notify(q,te):this.requestors.push({ids:q,callback:te})},Y.prototype._notify=function(q,te){for(var ve={},Ce=0,Ne=q;Ce<Ne.length;Ce+=1){var qe=Ne[Ce];this.images[qe]||this.fire(new l.Event("styleimagemissing",{id:qe}));var et=this.images[qe];et?ve[qe]={data:et.data.clone(),pixelRatio:et.pixelRatio,sdf:et.sdf,version:et.version,stretchX:et.stretchX,stretchY:et.stretchY,content:et.content,hasRenderCallback:Boolean(et.userImage&&et.userImage.render)}:l.warnOnce('Image "'+qe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}te(null,ve)},Y.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},Y.prototype.getPattern=function(q){var te=this.patterns[q],ve=this.getImage(q);if(!ve)return null;if(te&&te.position.version===ve.version)return te.position;if(te)te.position.version=ve.version;else{var Ce={w:ve.data.width+2,h:ve.data.height+2,x:0,y:0},Ne=new l.ImagePosition(Ce,ve);this.patterns[q]={bin:Ce,position:Ne}}return this._updatePatternAtlas(),this.patterns[q].position},Y.prototype.bind=function(q){var te=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(q,this.atlasImage,te.RGBA),this.atlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var q=[];for(var te in this.patterns)q.push(this.patterns[te].bin);var ve=l.potpack(q),Ce=ve.w,Ne=ve.h,qe=this.atlasImage;for(var et in qe.resize({width:Ce||1,height:Ne||1}),this.patterns){var vt=this.patterns[et].bin,yt=vt.x+1,ee=vt.y+1,ue=this.images[et].data,Ae=ue.width,Oe=ue.height;l.RGBAImage.copy(ue,qe,{x:0,y:0},{x:yt,y:ee},{width:Ae,height:Oe}),l.RGBAImage.copy(ue,qe,{x:0,y:Oe-1},{x:yt,y:ee-1},{width:Ae,height:1}),l.RGBAImage.copy(ue,qe,{x:0,y:0},{x:yt,y:ee+Oe},{width:Ae,height:1}),l.RGBAImage.copy(ue,qe,{x:Ae-1,y:0},{x:yt-1,y:ee},{width:1,height:Oe}),l.RGBAImage.copy(ue,qe,{x:0,y:0},{x:yt+Ae,y:ee},{width:1,height:Oe})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(q){for(var te=0,ve=q;te<ve.length;te+=1){var Ce=ve[te];if(!this.callbackDispatchedThisFrame[Ce]){this.callbackDispatchedThisFrame[Ce]=!0;var Ne=this.images[Ce];c(Ne)&&this.updateImage(Ce,Ne)}}},Y}(l.Evented),f=g,x=g,v=1e20;function g(D,Y,q,te,ve,Ce){this.fontSize=D||24,this.buffer=void 0===Y?3:Y,this.cutoff=te||.25,this.fontFamily=ve||"sans-serif",this.fontWeight=Ce||"normal",this.radius=q||8;var Ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ne*Ne),this.gridInner=new Float64Array(Ne*Ne),this.f=new Float64Array(Ne),this.d=new Float64Array(Ne),this.z=new Float64Array(Ne+1),this.v=new Int16Array(Ne),this.middle=Math.round(Ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(D,Y,q,te,ve,Ce,Ne){for(var qe=0;qe<Y;qe++){for(var et=0;et<q;et++)te[et]=D[et*Y+qe];for(p(te,ve,Ce,Ne,q),et=0;et<q;et++)D[et*Y+qe]=ve[et]}for(et=0;et<q;et++){for(qe=0;qe<Y;qe++)te[qe]=D[et*Y+qe];for(p(te,ve,Ce,Ne,Y),qe=0;qe<Y;qe++)D[et*Y+qe]=Math.sqrt(ve[qe])}}function p(D,Y,q,te,ve){q[0]=0,te[0]=-v,te[1]=+v;for(var Ce=1,Ne=0;Ce<ve;Ce++){for(var qe=(D[Ce]+Ce*Ce-(D[q[Ne]]+q[Ne]*q[Ne]))/(2*Ce-2*q[Ne]);qe<=te[Ne];)Ne--,qe=(D[Ce]+Ce*Ce-(D[q[Ne]]+q[Ne]*q[Ne]))/(2*Ce-2*q[Ne]);q[++Ne]=Ce,te[Ne]=qe,te[Ne+1]=+v}for(Ce=0,Ne=0;Ce<ve;Ce++){for(;te[Ne+1]<Ce;)Ne++;Y[Ce]=(Ce-q[Ne])*(Ce-q[Ne])+D[q[Ne]]}}g.prototype.draw=function(D){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(D,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),te=0;te<this.size*this.size;te++){var ve=Y.data[4*te+3]/255;this.gridOuter[te]=1===ve?0:0===ve?v:Math.pow(Math.max(0,.5-ve),2),this.gridInner[te]=1===ve?v:0===ve?0:Math.pow(Math.max(0,ve-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),te=0;te<this.size*this.size;te++)q[te]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[te]-this.gridInner[te])/this.radius+this.cutoff))));return q},f.default=x;var m=function(D,Y){this.requestManager=D,this.localIdeographFontFamily=Y,this.entries={}};m.prototype.setURL=function(D){this.url=D},m.prototype.getGlyphs=function(D,Y){var q=this,te=[];for(var ve in D)for(var Ce=0,Ne=D[ve];Ce<Ne.length;Ce+=1)te.push({stack:ve,id:Ne[Ce]});l.asyncAll(te,function(et,vt){var yt=et.stack,ee=et.id,ue=q.entries[yt];ue||(ue=q.entries[yt]={glyphs:{},requests:{},ranges:{}});var Ae=ue.glyphs[ee];if(void 0===Ae){if(Ae=q._tinySDF(ue,yt,ee))return ue.glyphs[ee]=Ae,void vt(null,{stack:yt,id:ee,glyph:Ae});var Oe=Math.floor(ee/256);if(256*Oe>65535)vt(new Error("glyphs > 65535 not supported"));else if(ue.ranges[Oe])vt(null,{stack:yt,id:ee,glyph:Ae});else{var Fe=ue.requests[Oe];Fe||(Fe=ue.requests[Oe]=[],m.loadGlyphRange(yt,Oe,q.url,q.requestManager,function(Ue,We){if(We){for(var Je in We)q._doesCharSupportLocalGlyph(+Je)||(ue.glyphs[+Je]=We[+Je]);ue.ranges[Oe]=!0}for(var it=0,ut=Fe;it<ut.length;it+=1)(0,ut[it])(Ue,We);delete ue.requests[Oe]})),Fe.push(function(Ue,We){Ue?vt(Ue):We&&vt(null,{stack:yt,id:ee,glyph:We[ee]||null})})}}else vt(null,{stack:yt,id:ee,glyph:Ae})},function(et,vt){if(et)Y(et);else if(vt){for(var yt={},ee=0,ue=vt;ee<ue.length;ee+=1){var Ae=ue[ee],Oe=Ae.stack,Fe=Ae.id,Ue=Ae.glyph;(yt[Oe]||(yt[Oe]={}))[Fe]=Ue&&{id:Ue.id,bitmap:Ue.bitmap.clone(),metrics:Ue.metrics}}Y(null,yt)}})},m.prototype._doesCharSupportLocalGlyph=function(D){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](D)||l.isChar["Hangul Syllables"](D)||l.isChar.Hiragana(D)||l.isChar.Katakana(D))},m.prototype._tinySDF=function(D,Y,q){var te=this.localIdeographFontFamily;if(te&&this._doesCharSupportLocalGlyph(q)){var ve=D.tinySDF;if(!ve){var Ce="400";/bold/i.test(Y)?Ce="900":/medium/i.test(Y)?Ce="500":/light/i.test(Y)&&(Ce="200"),ve=D.tinySDF=new m.TinySDF(24,3,8,.25,te,Ce)}return{id:q,bitmap:new l.AlphaImage({width:30,height:30},ve.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(D,Y,q,te,ve){var Ce=256*Y,Ne=Ce+255,qe=te.transformRequest(te.normalizeGlyphsURL(q).replace("{fontstack}",D).replace("{range}",Ce+"-"+Ne),l.ResourceType.Glyphs);l.getArrayBuffer(qe,function(et,vt){if(et)ve(et);else if(vt){for(var yt={},ee=0,ue=l.parseGlyphPBF(vt);ee<ue.length;ee+=1){var Ae=ue[ee];yt[Ae.id]=Ae}ve(null,yt)}})},m.TinySDF=f;var w=function(){this.specification=l.styleSpec.light.position};w.prototype.possiblyEvaluate=function(D,Y){return l.sphericalToCartesian(D.expression.evaluate(Y))},w.prototype.interpolate=function(D,Y,q){return{x:l.number(D.x,Y.x,q),y:l.number(D.y,Y.y,q),z:l.number(D.z,Y.z,q)}};var u=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new w,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),S="-transition",_=function(D){function Y(q){D.call(this),this._transitionable=new l.Transitionable(u),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(q,te){if(void 0===te&&(te={}),!this._validate(l.validateLight,q,te))for(var ve in q){var Ce=q[ve];l.endsWith(ve,S)?this._transitionable.setTransition(ve.slice(0,-S.length),Ce):this._transitionable.setValue(ve,Ce)}},Y.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},Y.prototype._validate=function(q,te,ve){return(!ve||!1!==ve.validate)&&l.emitValidationErrors(this,q.call(l.validateStyle,l.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},Y}(l.Evented),E=function(D,Y){this.width=D,this.height=Y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(D,Y){var q=D.join(",")+String(Y);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(D,Y)),this.dashEntry[q]},E.prototype.getDashRanges=function(D,Y,q){var te=[],ve=D.length%2==1?-D[D.length-1]*q:0,Ce=D[0]*q,Ne=!0;te.push({left:ve,right:Ce,isDash:Ne,zeroLength:0===D[0]});for(var qe=D[0],et=1;et<D.length;et++){var vt=D[et];ve=qe*q,Ce=(qe+=vt)*q,te.push({left:ve,right:Ce,isDash:Ne=!Ne,zeroLength:0===vt})}return te},E.prototype.addRoundDash=function(D,Y,q){for(var te=Y/2,ve=-q;ve<=q;ve++)for(var Ne=this.width*(this.nextRow+q+ve),qe=0,et=D[qe],vt=0;vt<this.width;vt++){vt/et.right>1&&(et=D[++qe]);var yt=Math.abs(vt-et.left),ee=Math.abs(vt-et.right),ue=Math.min(yt,ee),Ae=void 0,Oe=ve/q*(te+1);if(et.isDash){var Fe=te-Math.abs(Oe);Ae=Math.sqrt(ue*ue+Fe*Fe)}else Ae=te-Math.sqrt(ue*ue+Oe*Oe);this.data[Ne+vt]=Math.max(0,Math.min(255,Ae+128))}},E.prototype.addRegularDash=function(D){for(var Y=D.length-1;Y>=0;--Y){var q=D[Y],te=D[Y+1];q.zeroLength?D.splice(Y,1):te&&te.isDash===q.isDash&&(te.left=q.left,D.splice(Y,1))}var ve=D[0],Ce=D[D.length-1];ve.isDash===Ce.isDash&&(ve.left=Ce.left-this.width,Ce.right=ve.right+this.width);for(var Ne=this.width*this.nextRow,qe=0,et=D[qe],vt=0;vt<this.width;vt++){vt/et.right>1&&(et=D[++qe]);var yt=Math.abs(vt-et.left),ee=Math.abs(vt-et.right),ue=Math.min(yt,ee);this.data[Ne+vt]=Math.max(0,Math.min(255,(et.isDash?ue:-ue)+128))}},E.prototype.addDash=function(D,Y){var q=Y?7:0,te=2*q+1;if(this.nextRow+te>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var ve=0,Ce=0;Ce<D.length;Ce++)ve+=D[Ce];if(0!==ve){var Ne=this.width/ve,qe=this.getDashRanges(D,this.width,Ne);Y?this.addRoundDash(qe,Ne,q):this.addRegularDash(qe)}var et={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:ve};return this.nextRow+=te,this.dirty=!0,et},E.prototype.bind=function(D){var Y=D.gl;this.texture?(Y.bindTexture(Y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,this.width,this.height,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))):(this.texture=Y.createTexture(),Y.bindTexture(Y.TEXTURE_2D,this.texture),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Y.texImage2D(Y.TEXTURE_2D,0,Y.ALPHA,this.width,this.height,0,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))};var L=function D(Y,q){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var te=this.workerPool.acquire(this.id),ve=0;ve<te.length;ve++){var Ne=new D.Actor(te[ve],q,this.id);Ne.name="Worker "+ve,this.actors.push(Ne)}};function C(D,Y,q){var te=function(ve,Ce){if(ve)return q(ve);if(Ce){var Ne=l.pick(l.extend(Ce,D),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(Ne.vectorLayers=Ce.vector_layers,Ne.vectorLayerIds=Ne.vectorLayers.map(function(qe){return qe.id})),Ne.tiles=Y.canonicalizeTileset(Ne,D.url),q(null,Ne)}};return D.url?l.getJSON(Y.transformRequest(Y.normalizeSourceURL(D.url),l.ResourceType.Source),te):l.browser.frame(function(){return te(null,D)})}L.prototype.broadcast=function(D,Y,q){l.asyncAll(this.actors,function(te,ve){te.send(D,Y,ve)},q=q||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(D){D.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var P=function(D,Y,q){this.bounds=l.LngLatBounds.convert(this.validateBounds(D)),this.minzoom=Y||0,this.maxzoom=q||24};P.prototype.validateBounds=function(D){return Array.isArray(D)&&4===D.length?[Math.max(-180,D[0]),Math.max(-90,D[1]),Math.min(180,D[2]),Math.min(90,D[3])]:[-180,-90,180,90]},P.prototype.contains=function(D){var Y=Math.pow(2,D.z),q=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*Y),te=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*Y),ve=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*Y),Ce=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*Y);return D.x>=q&&D.x<ve&&D.y>=te&&D.y<Ce};var I=function(D){function Y(q,te,ve,Ce){if(D.call(this),this.id=q,this.dispatcher=ve,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(te,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},te),this._collectResourceTiming=te.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(te,ve){q._tileJSONRequest=null,q._loaded=!0,te?q.fire(new l.ErrorEvent(te)):ve&&(l.extend(q,ve),ve.bounds&&(q.tileBounds=new P(ve.bounds,q.minzoom,q.maxzoom)),l.postTurnstileEvent(ve.tiles,q.map._requestManager._customAccessToken),l.postMapLoadEvent(ve.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return l.extend({},this._options)},Y.prototype.loadTile=function(q,te){var ve=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Ce={request:this.map._requestManager.transformRequest(ve,l.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ne(qe,et){return delete q.request,q.aborted?te(null):qe&&404!==qe.status?te(qe):(et&&et.resourceTiming&&(q.resourceTiming=et.resourceTiming),this.map._refreshExpiredTiles&&et&&q.setExpiryData(et),q.loadVectorData(et,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),te(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}Ce.request.collectResourceTiming=this._collectResourceTiming,q.actor&&"expired"!==q.state?"loading"===q.state?q.reloadCallback=te:q.request=q.actor.send("reloadTile",Ce,Ne.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Ce,Ne.bind(this)))},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),j=function(D){function Y(q,te,ve,Ce){D.call(this),this.id=q,this.dispatcher=ve,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},te),l.extend(this,l.pick(te,["url","scheme","tileSize"]))}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(te,ve){q._tileJSONRequest=null,q._loaded=!0,te?q.fire(new l.ErrorEvent(te)):ve&&(l.extend(q,ve),ve.bounds&&(q.tileBounds=new P(ve.bounds,q.minzoom,q.maxzoom)),l.postTurnstileEvent(ve.tiles),l.postMapLoadEvent(ve.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return l.extend({},this._options)},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.loadTile=function(q,te){var ve=this,Ce=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=l.getImage(this.map._requestManager.transformRequest(Ce,l.ResourceType.Tile),function(Ne,qe){if(delete q.request,q.aborted)q.state="unloaded",te(null);else if(Ne)q.state="errored",te(Ne);else if(qe){ve.map._refreshExpiredTiles&&q.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=ve.map.painter.context,vt=et.gl;q.texture=ve.map.painter.getTileTexture(qe.width),q.texture?q.texture.update(qe,{useMipmap:!0}):(q.texture=new l.Texture(et,qe,vt.RGBA,{useMipmap:!0}),q.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE,vt.LINEAR_MIPMAP_NEAREST),et.extTextureFilterAnisotropic&&vt.texParameterf(vt.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax)),q.state="loaded",l.cacheEntryPossiblyAdded(ve.dispatcher),te(null)}})},Y.prototype.abortTile=function(q,te){q.request&&(q.request.cancel(),delete q.request),te()},Y.prototype.unloadTile=function(q,te){q.texture&&this.map.painter.saveTileTexture(q.texture),te()},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),R=function(D){function Y(q,te,ve,Ce){D.call(this,q,te,ve,Ce),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},te),this.encoding=te.encoding||"mapbox"}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(q,te){var ve=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Ce(Ne,qe){Ne&&(q.state="errored",te(Ne)),qe&&(q.dem=qe,q.needsHillshadePrepare=!0,q.state="loaded",te(null))}q.request=l.getImage(this.map._requestManager.transformRequest(ve,l.ResourceType.Tile),function(Ne,qe){if(delete q.request,q.aborted)q.state="unloaded",te(null);else if(Ne)q.state="errored",te(Ne);else if(qe){this.map._refreshExpiredTiles&&q.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=l.window.ImageBitmap&&qe instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?qe:l.browser.getImageData(qe,1),vt={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:et,encoding:this.encoding};q.actor&&"expired"!==q.state||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",vt,Ce.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},Y.prototype._getNeighboringTiles=function(q){var te=q.canonical,ve=Math.pow(2,te.z),Ce=(te.x-1+ve)%ve,Ne=0===te.x?q.wrap-1:q.wrap,qe=(te.x+1+ve)%ve,et=te.x+1===ve?q.wrap+1:q.wrap,vt={};return vt[new l.OverscaledTileID(q.overscaledZ,Ne,te.z,Ce,te.y).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,et,te.z,qe,te.y).key]={backfilled:!1},te.y>0&&(vt[new l.OverscaledTileID(q.overscaledZ,Ne,te.z,Ce,te.y-1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,q.wrap,te.z,te.x,te.y-1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,et,te.z,qe,te.y-1).key]={backfilled:!1}),te.y+1<ve&&(vt[new l.OverscaledTileID(q.overscaledZ,Ne,te.z,Ce,te.y+1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,q.wrap,te.z,te.x,te.y+1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,et,te.z,qe,te.y+1).key]={backfilled:!1}),vt},Y.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},Y}(j),H=function(D){function Y(q,te,ve,Ce){D.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ve.getActor(),this.setEventedParent(Ce),this._data=te.data,this._options=l.extend({},te),this._collectResourceTiming=te.collectResourceTiming,this._resourceTiming=[],void 0!==te.maxzoom&&(this.maxzoom=te.maxzoom),te.type&&(this.type=te.type),te.attribution&&(this.attribution=te.attribution),this.promoteId=te.promoteId;var Ne=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:te.cluster||!1,geojsonVtOptions:{buffer:(void 0!==te.buffer?te.buffer:128)*Ne,tolerance:(void 0!==te.tolerance?te.tolerance:.375)*Ne,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:te.lineMetrics||!1,generateId:te.generateId||!1},superclusterOptions:{maxZoom:void 0!==te.clusterMaxZoom?Math.min(te.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(te.clusterRadius||50)*Ne,log:!1,generateId:te.generateId||!1},clusterProperties:te.clusterProperties},te.workerOptions)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(te){if(te)q.fire(new l.ErrorEvent(te));else{var ve={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(ve.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new l.Event("data",ve))}})},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setData=function(q){var te=this;return this._data=q,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ve){if(ve)te.fire(new l.ErrorEvent(ve));else{var Ce={dataType:"source",sourceDataType:"content"};te._collectResourceTiming&&te._resourceTiming&&te._resourceTiming.length>0&&(Ce.resourceTiming=te._resourceTiming,te._resourceTiming=[]),te.fire(new l.Event("data",Ce))}}),this},Y.prototype.getClusterExpansionZoom=function(q,te){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},te),this},Y.prototype.getClusterChildren=function(q,te){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},te),this},Y.prototype.getClusterLeaves=function(q,te,ve,Ce){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:te,offset:ve},Ce),this},Y.prototype._updateWorkerData=function(q){var te=this;this._loaded=!1;var ve=l.extend({},this.workerOptions),Ce=this._data;"string"==typeof Ce?(ve.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Ce),l.ResourceType.Source),ve.request.collectResourceTiming=this._collectResourceTiming):ve.data=JSON.stringify(Ce),this.actor.send(this.type+".loadData",ve,function(Ne,qe){te._removed||qe&&qe.abandoned||(te._loaded=!0,qe&&qe.resourceTiming&&qe.resourceTiming[te.id]&&(te._resourceTiming=qe.resourceTiming[te.id].slice(0)),te.actor.send(te.type+".coalesce",{source:ve.source},null),q(Ne))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(q,te){var ve=this,Ce=q.actor?"reloadTile":"loadTile";q.actor=this.actor,q.request=this.actor.send(Ce,{type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(qe,et){return delete q.request,q.unloadVectorData(),q.aborted?te(null):qe?te(qe):(q.loadVectorData(et,ve.map.painter,"reloadTile"===Ce),te(null))})},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},Y.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),F=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),U=function(D){function Y(q,te,ve,Ce){D.call(this),this.id=q,this.dispatcher=ve,this.coordinates=te.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=te}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.load=function(q,te){var ve=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Ce,Ne){ve._loaded=!0,Ce?ve.fire(new l.ErrorEvent(Ce)):Ne&&(ve.image=Ne,q&&(ve.coordinates=q),te&&te(),ve._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(q){var te=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){te.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setCoordinates=function(q){var te=this;this.coordinates=q;var ve=q.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(Ne){for(var qe=1/0,et=1/0,vt=-1/0,yt=-1/0,ee=0,ue=Ne;ee<ue.length;ee+=1){var Ae=ue[ee];qe=Math.min(qe,Ae.x),et=Math.min(et,Ae.y),vt=Math.max(vt,Ae.x),yt=Math.max(yt,Ae.y)}var Ue=Math.max(vt-qe,yt-et),We=Math.max(0,Math.floor(-Math.log(Ue)/Math.LN2)),Je=Math.pow(2,We);return new l.CanonicalTileID(We,Math.floor((qe+vt)/2*Je),Math.floor((et+yt)/2*Je))}(ve),this.minzoom=this.maxzoom=this.tileID.z;var Ce=ve.map(function(Ne){return te.tileID.getTilePoint(Ne)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ce[0].x,Ce[0].y,0,0),this._boundsArray.emplaceBack(Ce[1].x,Ce[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Ce[3].x,Ce[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Ce[2].x,Ce[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var q=this.map.painter.context,te=q.gl;for(var ve in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(q,this.image,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this.tiles){var Ce=this.tiles[ve];"loaded"!==Ce.state&&(Ce.state="loaded",Ce.texture=this.texture)}}},Y.prototype.loadTile=function(q,te){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},te(null)):(q.state="errored",te(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),B=function(D){function Y(q,te,ve,Ce){D.call(this,q,te,ve,Ce),this.roundZoom=!0,this.type="video",this.options=te}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1;var te=this.options;this.urls=[];for(var ve=0,Ce=te.urls;ve<Ce.length;ve+=1)this.urls.push(this.map._requestManager.transformRequest(Ce[ve],l.ResourceType.Source).url);l.getVideo(this.urls,function(qe,et){q._loaded=!0,qe?q.fire(new l.ErrorEvent(qe)):et&&(q.video=et,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(q){if(this.video){var te=this.video.seekable;q<te.start(0)||q>te.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+te.start(0)+" and "+te.end(0)+"-second mark."))):this.video.currentTime=q}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var q=this.map.painter.context,te=q.gl;for(var ve in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE),te.texSubImage2D(te.TEXTURE_2D,0,0,0,te.RGBA,te.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(q,this.video,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this.tiles){var Ce=this.tiles[ve];"loaded"!==Ce.state&&(Ce.state="loaded",Ce.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(U),N=function(D){function Y(q,te,ve,Ce){D.call(this,q,te,ve,Ce),te.coordinates?Array.isArray(te.coordinates)&&4===te.coordinates.length&&!te.coordinates.some(function(Ne){return!Array.isArray(Ne)||2!==Ne.length||Ne.some(function(qe){return"number"!=typeof qe})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'missing required property "coordinates"'))),te.animate&&"boolean"!=typeof te.animate&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),te.canvas?"string"==typeof te.canvas||te.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=te,this.animate=void 0===te.animate||te.animate}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var te=this.map.painter.context,ve=te.gl;for(var Ce in this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(te,this.canvas,ve.RGBA,{premultiply:!0}),this.tiles){var Ne=this.tiles[Ce];"loaded"!==Ne.state&&(Ne.state="loaded",Ne.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var q=0,te=[this.canvas.width,this.canvas.height];q<te.length;q+=1){var ve=te[q];if(isNaN(ve)||ve<=0)return!0}return!1},Y}(U),J={vector:I,raster:j,"raster-dem":R,geojson:H,video:B,image:U,canvas:N};function Z(D,Y){var q=l.identity([]);return l.translate(q,q,[1,1,0]),l.scale(q,q,[.5*D.width,.5*D.height,1]),l.multiply(q,q,D.calculatePosMatrix(Y.toUnwrapped()))}function V(D,Y,q,te,ve,Ce){var Ne=function(Fe,Ue,We){if(Fe)for(var Je=0,it=Fe;Je<it.length;Je+=1){var ut=Ue[it[Je]];if(ut&&ut.source===We&&"fill-extrusion"===ut.type)return!0}else for(var St in Ue){var Dt=Ue[St];if(Dt.source===We&&"fill-extrusion"===Dt.type)return!0}return!1}(ve&&ve.layers,Y,D.id),qe=Ce.maxPitchScaleFactor(),et=D.tilesIn(te,qe,Ne);et.sort(W);for(var vt=[],yt=0,ee=et;yt<ee.length;yt+=1){var ue=ee[yt];vt.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(Y,q,D._state,ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,ve,Ce,qe,Z(D.transform,ue.tileID))})}var Ae=function(Fe){for(var Ue={},We={},Je=0,it=Fe;Je<it.length;Je+=1){var ut=it[Je],St=ut.queryResults,Dt=ut.wrappedTileID,Ft=We[Dt]=We[Dt]||{};for(var Wt in St)for(var cn=St[Wt],Yt=Ft[Wt]=Ft[Wt]||{},en=Ue[Wt]=Ue[Wt]||[],Xt=0,bn=cn;Xt<bn.length;Xt+=1){var gn=bn[Xt];Yt[gn.featureIndex]||(Yt[gn.featureIndex]=!0,en.push(gn))}}return Ue}(vt);for(var Oe in Ae)Ae[Oe].forEach(function(Fe){var Ue=Fe.feature,We=D.getFeatureState(Ue.layer["source-layer"],Ue.id);Ue.source=Ue.layer.source,Ue.layer["source-layer"]&&(Ue.sourceLayer=Ue.layer["source-layer"]),Ue.state=We});return Ae}function W(D,Y){var q=D.tileID,te=Y.tileID;return q.overscaledZ-te.overscaledZ||q.canonical.y-te.canonical.y||q.wrap-te.wrap||q.canonical.x-te.canonical.x}var X=function(D,Y){this.max=D,this.onRemove=Y,this.reset()};X.prototype.reset=function(){for(var D in this.data)for(var Y=0,q=this.data[D];Y<q.length;Y+=1){var te=q[Y];te.timeout&&clearTimeout(te.timeout),this.onRemove(te.value)}return this.data={},this.order=[],this},X.prototype.add=function(D,Y,q){var te=this,ve=D.wrapped().key;void 0===this.data[ve]&&(this.data[ve]=[]);var Ce={value:Y,timeout:void 0};if(void 0!==q&&(Ce.timeout=setTimeout(function(){te.remove(D,Ce)},q)),this.data[ve].push(Ce),this.order.push(ve),this.order.length>this.max){var Ne=this._getAndRemoveByKey(this.order[0]);Ne&&this.onRemove(Ne)}return this},X.prototype.has=function(D){return D.wrapped().key in this.data},X.prototype.getAndRemove=function(D){return this.has(D)?this._getAndRemoveByKey(D.wrapped().key):null},X.prototype._getAndRemoveByKey=function(D){var Y=this.data[D].shift();return Y.timeout&&clearTimeout(Y.timeout),0===this.data[D].length&&delete this.data[D],this.order.splice(this.order.indexOf(D),1),Y.value},X.prototype.getByKey=function(D){var Y=this.data[D];return Y?Y[0].value:null},X.prototype.get=function(D){return this.has(D)?this.data[D.wrapped().key][0].value:null},X.prototype.remove=function(D,Y){if(!this.has(D))return this;var q=D.wrapped().key,te=void 0===Y?0:this.data[q].indexOf(Y),ve=this.data[q][te];return this.data[q].splice(te,1),ve.timeout&&clearTimeout(ve.timeout),0===this.data[q].length&&delete this.data[q],this.onRemove(ve.value),this.order.splice(this.order.indexOf(q),1),this},X.prototype.setMaxSize=function(D){for(this.max=D;this.order.length>this.max;){var Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this},X.prototype.filter=function(D){var Y=[];for(var q in this.data)for(var te=0,ve=this.data[q];te<ve.length;te+=1){var Ce=ve[te];D(Ce.value)||Y.push(Ce)}for(var Ne=0,qe=Y;Ne<qe.length;Ne+=1){var et=qe[Ne];this.remove(et.value.tileID,et)}};var K=function(D,Y,q){this.context=D;var te=D.gl;this.buffer=te.createBuffer(),this.dynamicDraw=Boolean(q),this.context.unbindVAO(),D.bindElementBuffer.set(this.buffer),te.bufferData(te.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};K.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},K.prototype.updateData=function(D){var Y=this.context.gl;this.context.unbindVAO(),this.bind(),Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,0,D.arrayBuffer)},K.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(D,Y,q,te){this.length=Y.length,this.attributes=q,this.itemSize=Y.bytesPerElement,this.dynamicDraw=te,this.context=D;var ve=D.gl;this.buffer=ve.createBuffer(),D.bindVertexBuffer.set(this.buffer),ve.bufferData(ve.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?ve.DYNAMIC_DRAW:ve.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(D){var Y=this.context.gl;this.bind(),Y.bufferSubData(Y.ARRAY_BUFFER,0,D.arrayBuffer)},re.prototype.enableAttributes=function(D,Y){for(var q=0;q<this.attributes.length;q++){var ve=Y.attributes[this.attributes[q].name];void 0!==ve&&D.enableVertexAttribArray(ve)}},re.prototype.setVertexAttribPointers=function(D,Y,q){for(var te=0;te<this.attributes.length;te++){var ve=this.attributes[te],Ce=Y.attributes[ve.name];void 0!==Ce&&D.vertexAttribPointer(Ce,ve.components,D[ne[ve.type]],!1,this.itemSize,ve.offset+this.itemSize*(q||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(D){this.gl=D.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(D){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var le=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return l.Color.transparent},Y.prototype.set=function(q){var te=this.current;(q.r!==te.r||q.g!==te.g||q.b!==te.b||q.a!==te.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ae),pe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},Y}(ae),xe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},Y}(ae),ye=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(q){var te=this.current;(q[0]!==te[0]||q[1]!==te[1]||q[2]!==te[2]||q[3]!==te[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ae),se=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},Y}(ae),fe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},Y}(ae),Ee=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(q){var te=this.current;(q.func!==te.func||q.ref!==te.ref||q.mask!==te.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},Y}(ae),de=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},Y.prototype.set=function(q){var te=this.current;(q[0]!==te[0]||q[1]!==te[1]||q[2]!==te[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},Y}(ae),we=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;q?te.enable(te.STENCIL_TEST):te.disable(te.STENCIL_TEST),this.current=q,this.dirty=!1}},Y}(ae),ke=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(q){var te=this.current;(q[0]!==te[0]||q[1]!==te[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ae),Te=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;q?te.enable(te.DEPTH_TEST):te.disable(te.DEPTH_TEST),this.current=q,this.dirty=!1}},Y}(ae),$=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},Y}(ae),oe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;q?te.enable(te.BLEND):te.disable(te.BLEND),this.current=q,this.dirty=!1}},Y}(ae),he=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},Y.prototype.set=function(q){var te=this.current;(q[0]!==te[0]||q[1]!==te[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ae),me=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return l.Color.transparent},Y.prototype.set=function(q){var te=this.current;(q.r!==te.r||q.g!==te.g||q.b!==te.b||q.a!==te.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ae),Me=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},Y}(ae),Ie=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;q?te.enable(te.CULL_FACE):te.disable(te.CULL_FACE),this.current=q,this.dirty=!1}},Y}(ae),Pe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},Y}(ae),ze=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},Y}(ae),ce=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},Y}(ae),ge=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},Y}(ae),_e=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},Y.prototype.set=function(q){var te=this.current;(q[0]!==te[0]||q[1]!==te[1]||q[2]!==te[2]||q[3]!==te[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ae),De=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.bindFramebuffer(te.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},Y}(ae),He=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.bindRenderbuffer(te.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(ae),Ve=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.bindTexture(te.TEXTURE_2D,q),this.current=q,this.dirty=!1}},Y}(ae),nt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.bindBuffer(te.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},Y}(ae),tt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){var te=this.gl;te.bindBuffer(te.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},Y}(ae),at=function(D){function Y(q){D.call(this,q),this.vao=q.extVertexArrayObject}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},Y}(ae),dt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},Y}(ae),wt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ae),bt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ae),_t=function(D){function Y(q,te){D.call(this,q),this.context=q,this.parent=te}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y}(ae),Lt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var te=this.gl;te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},Y}(_t),Ct=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var te=this.gl;te.framebufferRenderbuffer(te.FRAMEBUFFER,te.DEPTH_ATTACHMENT,te.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(_t),Ot=function(D,Y,q,te){this.context=D,this.width=Y,this.height=q;var Ce=this.framebuffer=D.gl.createFramebuffer();this.colorAttachment=new Lt(D,Ce),te&&(this.depthAttachment=new Ct(D,Ce))};Ot.prototype.destroy=function(){var D=this.context.gl,Y=this.colorAttachment.get();if(Y&&D.deleteTexture(Y),this.depthAttachment){var q=this.depthAttachment.get();q&&D.deleteRenderbuffer(q)}D.deleteFramebuffer(this.framebuffer)};var Ht=function(D,Y,q){this.func=D,this.mask=Y,this.range=q};Ht.ReadOnly=!1,Ht.ReadWrite=!0,Ht.disabled=new Ht(519,Ht.ReadOnly,[0,1]);var Ge=function(D,Y,q,te,ve,Ce){this.test=D,this.ref=Y,this.mask=q,this.fail=te,this.depthFail=ve,this.pass=Ce};Ge.disabled=new Ge({func:519,mask:0},0,0,7680,7680,7680);var Ze=function(D,Y,q){this.blendFunction=D,this.blendColor=Y,this.mask=q};Ze.disabled=new Ze(Ze.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),Ze.unblended=new Ze(Ze.Replace,l.Color.transparent,[!0,!0,!0,!0]),Ze.alphaBlended=new Ze([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Be=function(D,Y,q){this.enable=D,this.mode=Y,this.frontFace=q};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var Ye=function(D){this.gl=D,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new le(this),this.clearDepth=new pe(this),this.clearStencil=new xe(this),this.colorMask=new ye(this),this.depthMask=new se(this),this.stencilMask=new fe(this),this.stencilFunc=new Ee(this),this.stencilOp=new de(this),this.stencilTest=new we(this),this.depthRange=new ke(this),this.depthTest=new Te(this),this.depthFunc=new $(this),this.blend=new oe(this),this.blendFunc=new he(this),this.blendColor=new me(this),this.blendEquation=new Me(this),this.cullFace=new Ie(this),this.cullFaceSide=new Pe(this),this.frontFace=new ze(this),this.program=new ce(this),this.activeTexture=new ge(this),this.viewport=new _e(this),this.bindFramebuffer=new De(this),this.bindRenderbuffer=new He(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new nt(this),this.bindElementBuffer=new tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new at(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new wt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=D.getExtension("EXT_texture_filter_anisotropic")||D.getExtension("MOZ_EXT_texture_filter_anisotropic")||D.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=D.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=D.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(D.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=D.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=D.getExtension("EXT_disjoint_timer_query")};Ye.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ye.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ye.prototype.createIndexBuffer=function(D,Y){return new K(this,D,Y)},Ye.prototype.createVertexBuffer=function(D,Y,q){return new re(this,D,Y,q)},Ye.prototype.createRenderbuffer=function(D,Y,q){var te=this.gl,ve=te.createRenderbuffer();return this.bindRenderbuffer.set(ve),te.renderbufferStorage(te.RENDERBUFFER,D,Y,q),this.bindRenderbuffer.set(null),ve},Ye.prototype.createFramebuffer=function(D,Y,q){return new Ot(this,D,Y,q)},Ye.prototype.clear=function(D){var Y=D.color,q=D.depth,te=this.gl,ve=0;Y&&(ve|=te.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0])),void 0!==q&&(ve|=te.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),te.clear(ve)},Ye.prototype.setCullFace=function(D){!1===D.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(D.mode),this.frontFace.set(D.frontFace))},Ye.prototype.setDepthMode=function(D){D.func!==this.gl.ALWAYS||D.mask?(this.depthTest.set(!0),this.depthFunc.set(D.func),this.depthMask.set(D.mask),this.depthRange.set(D.range)):this.depthTest.set(!1)},Ye.prototype.setStencilMode=function(D){D.test.func!==this.gl.ALWAYS||D.mask?(this.stencilTest.set(!0),this.stencilMask.set(D.mask),this.stencilOp.set([D.fail,D.depthFail,D.pass]),this.stencilFunc.set({func:D.test.func,ref:D.ref,mask:D.test.mask})):this.stencilTest.set(!1)},Ye.prototype.setColorMode=function(D){l.deepEqual(D.blendFunction,Ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(D.blendFunction),this.blendColor.set(D.blendColor)),this.colorMask.set(D.mask)},Ye.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var rt=function(D){function Y(q,te,ve){var Ce=this;D.call(this),this.id=q,this.dispatcher=ve,this.on("data",function(Ne){"source"===Ne.dataType&&"metadata"===Ne.sourceDataType&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&"source"===Ne.dataType&&"content"===Ne.sourceDataType&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=function(Ne,qe,et,vt){var yt=new J[qe.type](Ne,qe,et,vt);if(yt.id!==Ne)throw new Error("Expected Source id to be "+Ne+" instead of "+yt.id);return l.bindAll(["load","abort","unload","serialize","prepare"],yt),yt}(q,te,ve,this),this._tiles={},this._cache=new X(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},Y.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var te=this._tiles[q];if("loaded"!==te.state&&"errored"!==te.state)return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(q,te){return this._source.loadTile(q,te)},Y.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},Y.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(q){for(var te in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ve=this._tiles[te];ve.upload(q),ve.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return l.values(this._tiles).map(function(q){return q.tileID}).sort(Se).map(function(q){return q.key})},Y.prototype.getRenderableIds=function(q){var te=this,ve=[];for(var Ce in this._tiles)this._isIdRenderable(Ce,q)&&ve.push(this._tiles[Ce]);return q?ve.sort(function(Ne,qe){var et=Ne.tileID,vt=qe.tileID,yt=new l.Point(et.canonical.x,et.canonical.y)._rotate(te.transform.angle),ee=new l.Point(vt.canonical.x,vt.canonical.y)._rotate(te.transform.angle);return et.overscaledZ-vt.overscaledZ||ee.y-yt.y||ee.x-yt.x}).map(function(Ne){return Ne.tileID.key}):ve.map(function(Ne){return Ne.tileID}).sort(Se).map(function(Ne){return Ne.key})},Y.prototype.hasRenderableParent=function(q){var te=this.findLoadedParent(q,0);return!!te&&this._isIdRenderable(te.tileID.key)},Y.prototype._isIdRenderable=function(q,te){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(te||!this._tiles[q].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)"errored"!==this._tiles[q].state&&this._reloadTile(q,"reloading")},Y.prototype._reloadTile=function(q,te){var ve=this._tiles[q];ve&&("loading"!==ve.state&&(ve.state=te),this._loadTile(ve,this._tileLoaded.bind(this,ve,q,te)))},Y.prototype._tileLoaded=function(q,te,ve,Ce){if(Ce)return q.state="errored",void(404!==Ce.status?this._source.fire(new l.ErrorEvent(Ce,{tile:q})):this.update(this.transform));q.timeAdded=l.browser.now(),"expired"===ve&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(te,q),"raster-dem"===this.getSource().type&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},Y.prototype._backfillDEM=function(q){for(var te=this.getRenderableIds(),ve=0;ve<te.length;ve++){var Ce=te[ve];if(q.neighboringTiles&&q.neighboringTiles[Ce]){var Ne=this.getTileByID(Ce);qe(q,Ne),qe(Ne,q)}}function qe(et,vt){et.needsHillshadePrepare=!0;var yt=vt.tileID.canonical.x-et.tileID.canonical.x,ee=vt.tileID.canonical.y-et.tileID.canonical.y,ue=Math.pow(2,et.tileID.canonical.z),Ae=vt.tileID.key;0===yt&&0===ee||Math.abs(ee)>1||(Math.abs(yt)>1&&(1===Math.abs(yt+ue)?yt+=ue:1===Math.abs(yt-ue)&&(yt-=ue)),vt.dem&&et.dem&&(et.dem.backfillBorder(vt.dem,yt,ee),et.neighboringTiles&&et.neighboringTiles[Ae]&&(et.neighboringTiles[Ae].backfilled=!0)))}},Y.prototype.getTile=function(q){return this.getTileByID(q.key)},Y.prototype.getTileByID=function(q){return this._tiles[q]},Y.prototype._retainLoadedChildren=function(q,te,ve,Ce){for(var Ne in this._tiles){var qe=this._tiles[Ne];if(!(Ce[Ne]||!qe.hasData()||qe.tileID.overscaledZ<=te||qe.tileID.overscaledZ>ve)){for(var et=qe.tileID;qe&&qe.tileID.overscaledZ>te+1;){var vt=qe.tileID.scaledTo(qe.tileID.overscaledZ-1);(qe=this._tiles[vt.key])&&qe.hasData()&&(et=vt)}for(var yt=et;yt.overscaledZ>te;)if(q[(yt=yt.scaledTo(yt.overscaledZ-1)).key]){Ce[et.key]=et;break}}}},Y.prototype.findLoadedParent=function(q,te){if(q.key in this._loadedParentTiles){var ve=this._loadedParentTiles[q.key];return ve&&ve.tileID.overscaledZ>=te?ve:null}for(var Ce=q.overscaledZ-1;Ce>=te;Ce--){var Ne=q.scaledTo(Ce),qe=this._getLoadedTile(Ne);if(qe)return qe}},Y.prototype._getLoadedTile=function(q){var te=this._tiles[q.key];return te&&te.hasData()?te:this._cache.getByKey(q.wrapped().key)},Y.prototype.updateCacheSize=function(q){var te=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),ve=Math.floor(5*te),Ce="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ve):ve;this._cache.setMaxSize(Ce)},Y.prototype.handleWrapJump=function(q){var ve=Math.round((q-(void 0===this._prevLng?q:this._prevLng))/360);if(this._prevLng=q,ve){var Ce={};for(var Ne in this._tiles){var qe=this._tiles[Ne];qe.tileID=qe.tileID.unwrapTo(qe.tileID.wrap+ve),Ce[qe.tileID.key]=qe}for(var et in this._tiles=Ce,this._timers)clearTimeout(this._timers[et]),delete this._timers[et];for(var vt in this._tiles)this._setTileReloadTimer(vt,this._tiles[vt])}},Y.prototype.update=function(q){var te=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var ve;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ve=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new l.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(ve=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ve=ve.filter(function(Ft){return te._source.hasTile(Ft)}))):ve=[];var Ce=q.coveringZoomLevel(this._source),Ne=Math.max(Ce-Y.maxOverzooming,this._source.minzoom),qe=Math.max(Ce+Y.maxUnderzooming,this._source.minzoom),et=this._updateRetainedTiles(ve,Ce);if(Re(this._source.type)){for(var vt={},yt={},ee=0,ue=Object.keys(et);ee<ue.length;ee+=1){var Ae=ue[ee],Oe=et[Ae],Fe=this._tiles[Ae];if(Fe&&!(Fe.fadeEndTime&&Fe.fadeEndTime<=l.browser.now())){var Ue=this.findLoadedParent(Oe,Ne);Ue&&(this._addTile(Ue.tileID),vt[Ue.tileID.key]=Ue.tileID),yt[Ae]=Oe}}for(var We in this._retainLoadedChildren(yt,Ce,qe,et),vt)et[We]||(this._coveredTiles[We]=!0,et[We]=vt[We])}for(var Je in et)this._tiles[Je].clearFadeHold();for(var it=0,ut=l.keysDifference(this._tiles,et);it<ut.length;it+=1){var St=ut[it],Dt=this._tiles[St];Dt.hasSymbolBuckets&&!Dt.holdingForFade()?Dt.setHoldDuration(this.map._fadeDuration):Dt.hasSymbolBuckets&&!Dt.symbolFadeFinished()||this._removeTile(St)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},Y.prototype._updateRetainedTiles=function(q,te){for(var ve={},Ce={},Ne=Math.max(te-Y.maxOverzooming,this._source.minzoom),qe=Math.max(te+Y.maxUnderzooming,this._source.minzoom),et={},vt=0,yt=q;vt<yt.length;vt+=1){var ee=yt[vt],ue=this._addTile(ee);ve[ee.key]=ee,ue.hasData()||te<this._source.maxzoom&&(et[ee.key]=ee)}this._retainLoadedChildren(et,te,qe,ve);for(var Ae=0,Oe=q;Ae<Oe.length;Ae+=1){var Fe=Oe[Ae],Ue=this._tiles[Fe.key];if(!Ue.hasData()){if(te+1>this._source.maxzoom){var We=Fe.children(this._source.maxzoom)[0],Je=this.getTile(We);if(Je&&Je.hasData()){ve[We.key]=We;continue}}else{var it=Fe.children(this._source.maxzoom);if(ve[it[0].key]&&ve[it[1].key]&&ve[it[2].key]&&ve[it[3].key])continue}for(var ut=Ue.wasRequested(),St=Fe.overscaledZ-1;St>=Ne;--St){var Dt=Fe.scaledTo(St);if(Ce[Dt.key]||(Ce[Dt.key]=!0,!(Ue=this.getTile(Dt))&&ut&&(Ue=this._addTile(Dt)),Ue&&(ve[Dt.key]=Dt,ut=Ue.wasRequested(),Ue.hasData())))break}}}return ve},Y.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var te=[],ve=void 0,Ce=this._tiles[q].tileID;Ce.overscaledZ>0;){if(Ce.key in this._loadedParentTiles){ve=this._loadedParentTiles[Ce.key];break}te.push(Ce.key);var Ne=Ce.scaledTo(Ce.overscaledZ-1);if(ve=this._getLoadedTile(Ne))break;Ce=Ne}for(var qe=0,et=te;qe<et.length;qe+=1)this._loadedParentTiles[et[qe]]=ve}},Y.prototype._addTile=function(q){var te=this._tiles[q.key];if(te)return te;(te=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,te),te.tileID=q,this._state.initializeTileState(te,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,te)));var ve=Boolean(te);return ve||(te=new l.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(te,this._tileLoaded.bind(this,te,q.key,te.state))),te?(te.uses++,this._tiles[q.key]=te,ve||this._source.fire(new l.Event("dataloading",{tile:te,coord:te.tileID,dataType:"source"})),te):null},Y.prototype._setTileReloadTimer=function(q,te){var ve=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Ce=te.getExpiryTimeout();Ce&&(this._timers[q]=setTimeout(function(){ve._reloadTile(q,"expired"),delete ve._timers[q]},Ce))},Y.prototype._removeTile=function(q){var te=this._tiles[q];te&&(te.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),te.uses>0||(te.hasData()&&"reloading"!==te.state?this._cache.add(te.tileID,te,te.getExpiryTimeout()):(te.aborted=!0,this._abortTile(te),this._unloadTile(te))))},Y.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},Y.prototype.tilesIn=function(q,te,ve){var Ce=this,Ne=[],qe=this.transform;if(!qe)return Ne;for(var et=ve?qe.getCameraQueryGeometry(q):q,vt=q.map(function(St){return qe.pointCoordinate(St)}),yt=et.map(function(St){return qe.pointCoordinate(St)}),ee=this.getIds(),ue=1/0,Ae=1/0,Oe=-1/0,Fe=-1/0,Ue=0,We=yt;Ue<We.length;Ue+=1){var Je=We[Ue];ue=Math.min(ue,Je.x),Ae=Math.min(Ae,Je.y),Oe=Math.max(Oe,Je.x),Fe=Math.max(Fe,Je.y)}for(var it=function(St){var Dt=Ce._tiles[ee[St]];if(!Dt.holdingForFade()){var Ft=Dt.tileID,Wt=Math.pow(2,qe.zoom-Dt.tileID.overscaledZ),cn=te*Dt.queryPadding*l.EXTENT/Dt.tileSize/Wt,Yt=[Ft.getTilePoint(new l.MercatorCoordinate(ue,Ae)),Ft.getTilePoint(new l.MercatorCoordinate(Oe,Fe))];if(Yt[0].x-cn<l.EXTENT&&Yt[0].y-cn<l.EXTENT&&Yt[1].x+cn>=0&&Yt[1].y+cn>=0){var en=vt.map(function(bn){return Ft.getTilePoint(bn)}),Xt=yt.map(function(bn){return Ft.getTilePoint(bn)});Ne.push({tile:Dt,tileID:Ft,queryGeometry:en,cameraQueryGeometry:Xt,scale:Wt})}}},ut=0;ut<ee.length;ut++)it(ut);return Ne},Y.prototype.getVisibleCoordinates=function(q){for(var te=this,ve=this.getRenderableIds(q).map(function(et){return te._tiles[et].tileID}),Ce=0,Ne=ve;Ce<Ne.length;Ce+=1){var qe=Ne[Ce];qe.posMatrix=this.transform.calculatePosMatrix(qe.toUnwrapped())}return ve},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var q in this._tiles){var te=this._tiles[q];if(void 0!==te.fadeEndTime&&te.fadeEndTime>=l.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(q,te,ve){this._state.updateState(q=q||"_geojsonTileLayer",te,ve)},Y.prototype.removeFeatureState=function(q,te,ve){this._state.removeFeatureState(q=q||"_geojsonTileLayer",te,ve)},Y.prototype.getFeatureState=function(q,te){return this._state.getState(q=q||"_geojsonTileLayer",te)},Y.prototype.setDependencies=function(q,te,ve){var Ce=this._tiles[q];Ce&&Ce.setDependencies(te,ve)},Y.prototype.reloadTilesForDependencies=function(q,te){for(var ve in this._tiles)this._tiles[ve].hasDependency(q,te)&&this._reloadTile(ve,"reloading");this._cache.filter(function(Ce){return!Ce.hasDependency(q,te)})},Y}(l.Evented);function Se(D,Y){var q=Math.abs(2*D.wrap)-+(D.wrap<0),te=Math.abs(2*Y.wrap)-+(Y.wrap<0);return D.overscaledZ-Y.overscaledZ||te-q||Y.canonical.y-D.canonical.y||Y.canonical.x-D.canonical.x}function Re(D){return"raster"===D||"image"===D||"video"===D}function Ke(){return new l.window.Worker(mt.workerUrl)}rt.maxOverzooming=10,rt.maxUnderzooming=3;var st="mapboxgl_preloaded_worker_pool",ct=function(){this.active={}};ct.prototype.acquire=function(D){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new Ke);return this.active[D]=!0,this.workers.slice()},ct.prototype.release=function(D){delete this.active[D],0===this.numActive()&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)},ct.prototype.isPreloaded=function(){return!!this.active[st]},ct.prototype.numActive=function(){return Object.keys(this.active).length};var Tt,Et=Math.floor(l.browser.hardwareConcurrency/2);function At(){return Tt||(Tt=new ct),Tt}function ht(D,Y){var q={};for(var te in D)"ref"!==te&&(q[te]=D[te]);return l.refProperties.forEach(function(ve){ve in Y&&(q[ve]=Y[ve])}),q}function pt(D){D=D.slice();for(var Y=Object.create(null),q=0;q<D.length;q++)Y[D[q].id]=D[q];for(var te=0;te<D.length;te++)"ref"in D[te]&&(D[te]=ht(D[te],Y[D[te].ref]));return D}ct.workerCount=Math.max(Math.min(Et,6),1);var gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Pt(D,Y,q){q.push({command:gt.addSource,args:[D,Y[D]]})}function zt(D,Y,q){Y.push({command:gt.removeSource,args:[D]}),q[D]=!0}function Ut(D,Y,q,te){zt(D,q,te),Pt(D,Y,q)}function Nt(D,Y,q){var te;for(te in D[q])if(D[q].hasOwnProperty(te)&&"data"!==te&&!l.deepEqual(D[q][te],Y[q][te]))return!1;for(te in Y[q])if(Y[q].hasOwnProperty(te)&&"data"!==te&&!l.deepEqual(D[q][te],Y[q][te]))return!1;return!0}function jt(D,Y,q,te,ve,Ce){var Ne;for(Ne in Y=Y||{},D=D||{})D.hasOwnProperty(Ne)&&(l.deepEqual(D[Ne],Y[Ne])||q.push({command:Ce,args:[te,Ne,Y[Ne],ve]}));for(Ne in Y)Y.hasOwnProperty(Ne)&&!D.hasOwnProperty(Ne)&&(l.deepEqual(D[Ne],Y[Ne])||q.push({command:Ce,args:[te,Ne,Y[Ne],ve]}))}function Gt(D){return D.id}function un(D,Y){return D[Y.id]=Y,D}var Qt=function(D,Y){this.reset(D,Y)};Qt.prototype.reset=function(D,Y){this.points=D||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Qt.prototype.lerp=function(D){if(1===this.points.length)return this.points[0];D=l.clamp(D,0,1);for(var Y=1,q=this._distances[Y],te=D*this.paddedLength+this.padding;q<te&&Y<this._distances.length;)q=this._distances[++Y];var ve=Y-1,Ce=this._distances[ve],Ne=q-Ce,qe=Ne>0?(te-Ce)/Ne:0;return this.points[ve].mult(1-qe).add(this.points[Y].mult(qe))};var _n=function(D,Y,q){var te=this.boxCells=[],ve=this.circleCells=[];this.xCellCount=Math.ceil(D/q),this.yCellCount=Math.ceil(Y/q);for(var Ce=0;Ce<this.xCellCount*this.yCellCount;Ce++)te.push([]),ve.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=D,this.height=Y,this.xScale=this.xCellCount/D,this.yScale=this.yCellCount/Y,this.boxUid=0,this.circleUid=0};function Fn(D,Y,q,te,ve){var Ce=l.create();return Y?(l.scale(Ce,Ce,[1/ve,1/ve,1]),q||l.rotateZ(Ce,Ce,te.angle)):l.multiply(Ce,te.labelPlaneMatrix,D),Ce}function yn(D,Y,q,te,ve){if(Y){var Ce=l.clone(D);return l.scale(Ce,Ce,[ve,ve,1]),q||l.rotateZ(Ce,Ce,-te.angle),Ce}return te.glCoordMatrix}function on(D,Y){var q=[D.x,D.y,0,1];yr(q,q,Y);var te=q[3];return{point:new l.Point(q[0]/te,q[1]/te),signedDistanceFromCamera:te}}function pn(D,Y){return.5+D/Y*.5}function ln(D,Y){var q=D[0]/D[3],te=D[1]/D[3];return q>=-Y[0]&&q<=Y[0]&&te>=-Y[1]&&te<=Y[1]}function dn(D,Y,q,te,ve,Ce,Ne,qe){var et=te?D.textSizeData:D.iconSizeData,vt=l.evaluateSizeForZoom(et,q.transform.zoom),yt=[256/q.width*2+1,256/q.height*2+1],ee=te?D.text.dynamicLayoutVertexArray:D.icon.dynamicLayoutVertexArray;ee.clear();for(var ue=D.lineVertexArray,Ae=te?D.text.placedSymbolArray:D.icon.placedSymbolArray,Oe=q.transform.width/q.transform.height,Fe=!1,Ue=0;Ue<Ae.length;Ue++){var We=Ae.get(Ue);if(We.hidden||We.writingMode===l.WritingMode.vertical&&!Fe)Kn(We.numGlyphs,ee);else{Fe=!1;var Je=[We.anchorX,We.anchorY,0,1];if(l.transformMat4(Je,Je,Y),ln(Je,yt)){var ut=pn(q.transform.cameraToCenterDistance,Je[3]),St=l.evaluateSizeForFeature(et,vt,We),Dt=Ne?St/ut:St*ut,Ft=new l.Point(We.anchorX,We.anchorY),Wt=on(Ft,ve).point,cn={},Yt=Rn(We,Dt,!1,qe,Y,ve,Ce,D.glyphOffsetArray,ue,ee,Wt,Ft,cn,Oe);Fe=Yt.useVertical,(Yt.notEnoughRoom||Fe||Yt.needsFlipping&&Rn(We,Dt,!0,qe,Y,ve,Ce,D.glyphOffsetArray,ue,ee,Wt,Ft,cn,Oe).notEnoughRoom)&&Kn(We.numGlyphs,ee)}else Kn(We.numGlyphs,ee)}}te?D.text.dynamicLayoutVertexBuffer.updateData(ee):D.icon.dynamicLayoutVertexBuffer.updateData(ee)}function Cn(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt){var ee=qe.glyphStartIndex+qe.numGlyphs,ue=qe.lineStartIndex,Ae=qe.lineStartIndex+qe.lineLength,Oe=Y.getoffsetX(qe.glyphStartIndex),Fe=Y.getoffsetX(ee-1),Ue=jn(D*Oe,q,te,ve,Ce,Ne,qe.segment,ue,Ae,et,vt,yt);if(!Ue)return null;var We=jn(D*Fe,q,te,ve,Ce,Ne,qe.segment,ue,Ae,et,vt,yt);return We?{first:Ue,last:We}:null}function kn(D,Y,q,te){return D===l.WritingMode.horizontal&&Math.abs(q.y-Y.y)>Math.abs(q.x-Y.x)*te?{useVertical:!0}:(D===l.WritingMode.vertical?Y.y<q.y:Y.x>q.x)?{needsFlipping:!0}:null}function Rn(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt,ee,ue,Ae){var Oe,Fe=Y/24,Ue=D.lineOffsetX*Fe,We=D.lineOffsetY*Fe;if(D.numGlyphs>1){var Je=D.glyphStartIndex+D.numGlyphs,it=D.lineStartIndex,ut=D.lineStartIndex+D.lineLength,St=Cn(Fe,qe,Ue,We,q,yt,ee,D,et,Ce,ue);if(!St)return{notEnoughRoom:!0};var Dt=on(St.first.point,Ne).point,Ft=on(St.last.point,Ne).point;if(te&&!q){var Wt=kn(D.writingMode,Dt,Ft,Ae);if(Wt)return Wt}Oe=[St.first];for(var cn=D.glyphStartIndex+1;cn<Je-1;cn++)Oe.push(jn(Fe*qe.getoffsetX(cn),Ue,We,q,yt,ee,D.segment,it,ut,et,Ce,ue));Oe.push(St.last)}else{if(te&&!q){var Yt=on(ee,ve).point,en=D.lineStartIndex+D.segment+1,Xt=new l.Point(et.getx(en),et.gety(en)),bn=on(Xt,ve),gn=bn.signedDistanceFromCamera>0?bn.point:Nn(ee,Xt,Yt,1,ve),$t=kn(D.writingMode,Yt,gn,Ae);if($t)return $t}var On=jn(Fe*qe.getoffsetX(D.glyphStartIndex),Ue,We,q,yt,ee,D.segment,D.lineStartIndex,D.lineStartIndex+D.lineLength,et,Ce,ue);if(!On)return{notEnoughRoom:!0};Oe=[On]}for(var Dn=0,Yn=Oe;Dn<Yn.length;Dn+=1){var Xn=Yn[Dn];l.addDynamicAttributes(vt,Xn.point,Xn.angle)}return{}}function Nn(D,Y,q,te,ve){var Ce=on(D.add(D.sub(Y)._unit()),ve).point,Ne=q.sub(Ce);return q.add(Ne._mult(te/Ne.mag()))}function jn(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt,ee){var ue=te?D-Y:D+Y,Ae=ue>0?1:-1,Oe=0;te&&(Ae*=-1,Oe=Math.PI),Ae<0&&(Oe+=Math.PI);for(var Fe=Ae>0?qe+Ne:qe+Ne+1,Ue=ve,We=ve,Je=0,it=0,ut=Math.abs(ue),St=[];Je+it<=ut;){if((Fe+=Ae)<qe||Fe>=et)return null;if(We=Ue,St.push(Ue),void 0===(Ue=ee[Fe])){var Dt=new l.Point(vt.getx(Fe),vt.gety(Fe)),Ft=on(Dt,yt);if(Ft.signedDistanceFromCamera>0)Ue=ee[Fe]=Ft.point;else{var Wt=Fe-Ae;Ue=Nn(0===Je?Ce:new l.Point(vt.getx(Wt),vt.gety(Wt)),Dt,We,ut-Je+1,yt)}}Je+=it,it=We.dist(Ue)}var cn=(ut-Je)/it,Yt=Ue.sub(We),en=Yt.mult(cn)._add(We);en._add(Yt._unit()._perp()._mult(q*Ae));var Xt=Oe+Math.atan2(Ue.y-We.y,Ue.x-We.x);return St.push(en),{point:en,angle:Xt,path:St}}_n.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},_n.prototype.insert=function(D,Y,q,te,ve){this._forEachCell(Y,q,te,ve,this._insertBoxCell,this.boxUid++),this.boxKeys.push(D),this.bboxes.push(Y),this.bboxes.push(q),this.bboxes.push(te),this.bboxes.push(ve)},_n.prototype.insertCircle=function(D,Y,q,te){this._forEachCell(Y-te,q-te,Y+te,q+te,this._insertCircleCell,this.circleUid++),this.circleKeys.push(D),this.circles.push(Y),this.circles.push(q),this.circles.push(te)},_n.prototype._insertBoxCell=function(D,Y,q,te,ve,Ce){this.boxCells[ve].push(Ce)},_n.prototype._insertCircleCell=function(D,Y,q,te,ve,Ce){this.circleCells[ve].push(Ce)},_n.prototype._query=function(D,Y,q,te,ve,Ce){if(q<0||D>this.width||te<0||Y>this.height)return!ve&&[];var Ne=[];if(D<=0&&Y<=0&&this.width<=q&&this.height<=te){if(ve)return!0;for(var qe=0;qe<this.boxKeys.length;qe++)Ne.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(var et=0;et<this.circleKeys.length;et++){var vt=this.circles[3*et],yt=this.circles[3*et+1],ee=this.circles[3*et+2];Ne.push({key:this.circleKeys[et],x1:vt-ee,y1:yt-ee,x2:vt+ee,y2:yt+ee})}return Ce?Ne.filter(Ce):Ne}return this._forEachCell(D,Y,q,te,this._queryCell,Ne,{hitTest:ve,seenUids:{box:{},circle:{}}},Ce),ve?Ne.length>0:Ne},_n.prototype._queryCircle=function(D,Y,q,te,ve){var Ce=D-q,Ne=D+q,qe=Y-q,et=Y+q;if(Ne<0||Ce>this.width||et<0||qe>this.height)return!te&&[];var vt=[];return this._forEachCell(Ce,qe,Ne,et,this._queryCellCircle,vt,{hitTest:te,circle:{x:D,y:Y,radius:q},seenUids:{box:{},circle:{}}},ve),te?vt.length>0:vt},_n.prototype.query=function(D,Y,q,te,ve){return this._query(D,Y,q,te,!1,ve)},_n.prototype.hitTest=function(D,Y,q,te,ve){return this._query(D,Y,q,te,!0,ve)},_n.prototype.hitTestCircle=function(D,Y,q,te){return this._queryCircle(D,Y,q,!0,te)},_n.prototype._queryCell=function(D,Y,q,te,ve,Ce,Ne,qe){var et=Ne.seenUids,vt=this.boxCells[ve];if(null!==vt)for(var yt=this.bboxes,ee=0,ue=vt;ee<ue.length;ee+=1){var Ae=ue[ee];if(!et.box[Ae]){et.box[Ae]=!0;var Oe=4*Ae;if(D<=yt[Oe+2]&&Y<=yt[Oe+3]&&q>=yt[Oe+0]&&te>=yt[Oe+1]&&(!qe||qe(this.boxKeys[Ae]))){if(Ne.hitTest)return Ce.push(!0),!0;Ce.push({key:this.boxKeys[Ae],x1:yt[Oe],y1:yt[Oe+1],x2:yt[Oe+2],y2:yt[Oe+3]})}}}var Fe=this.circleCells[ve];if(null!==Fe)for(var Ue=this.circles,We=0,Je=Fe;We<Je.length;We+=1){var it=Je[We];if(!et.circle[it]){et.circle[it]=!0;var ut=3*it;if(this._circleAndRectCollide(Ue[ut],Ue[ut+1],Ue[ut+2],D,Y,q,te)&&(!qe||qe(this.circleKeys[it]))){if(Ne.hitTest)return Ce.push(!0),!0;var St=Ue[ut],Dt=Ue[ut+1],Ft=Ue[ut+2];Ce.push({key:this.circleKeys[it],x1:St-Ft,y1:Dt-Ft,x2:St+Ft,y2:Dt+Ft})}}}},_n.prototype._queryCellCircle=function(D,Y,q,te,ve,Ce,Ne,qe){var et=Ne.circle,vt=Ne.seenUids,yt=this.boxCells[ve];if(null!==yt)for(var ee=this.bboxes,ue=0,Ae=yt;ue<Ae.length;ue+=1){var Oe=Ae[ue];if(!vt.box[Oe]){vt.box[Oe]=!0;var Fe=4*Oe;if(this._circleAndRectCollide(et.x,et.y,et.radius,ee[Fe+0],ee[Fe+1],ee[Fe+2],ee[Fe+3])&&(!qe||qe(this.boxKeys[Oe])))return Ce.push(!0),!0}}var Ue=this.circleCells[ve];if(null!==Ue)for(var We=this.circles,Je=0,it=Ue;Je<it.length;Je+=1){var ut=it[Je];if(!vt.circle[ut]){vt.circle[ut]=!0;var St=3*ut;if(this._circlesCollide(We[St],We[St+1],We[St+2],et.x,et.y,et.radius)&&(!qe||qe(this.circleKeys[ut])))return Ce.push(!0),!0}}},_n.prototype._forEachCell=function(D,Y,q,te,ve,Ce,Ne,qe){for(var et=this._convertToXCellCoord(D),vt=this._convertToYCellCoord(Y),yt=this._convertToXCellCoord(q),ee=this._convertToYCellCoord(te),ue=et;ue<=yt;ue++)for(var Ae=vt;Ae<=ee;Ae++)if(ve.call(this,D,Y,q,te,this.xCellCount*Ae+ue,Ce,Ne,qe))return},_n.prototype._convertToXCellCoord=function(D){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(D*this.xScale)))},_n.prototype._convertToYCellCoord=function(D){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(D*this.yScale)))},_n.prototype._circlesCollide=function(D,Y,q,te,ve,Ce){var Ne=te-D,qe=ve-Y,et=q+Ce;return et*et>Ne*Ne+qe*qe},_n.prototype._circleAndRectCollide=function(D,Y,q,te,ve,Ce,Ne){var qe=(Ce-te)/2,et=Math.abs(D-(te+qe));if(et>qe+q)return!1;var vt=(Ne-ve)/2,yt=Math.abs(Y-(ve+vt));if(yt>vt+q)return!1;if(et<=qe||yt<=vt)return!0;var ee=et-qe,ue=yt-vt;return ee*ee+ue*ue<=q*q};var er=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Kn(D,Y){for(var q=0;q<D;q++){var te=Y.length;Y.resize(te+4),Y.float32.set(er,3*te)}}function yr(D,Y,q){var te=Y[0],ve=Y[1];return D[0]=q[0]*te+q[4]*ve+q[12],D[1]=q[1]*te+q[5]*ve+q[13],D[3]=q[3]*te+q[7]*ve+q[15],D}var lr=100,$n=function(D,Y,q){void 0===Y&&(Y=new _n(D.width+200,D.height+200,25)),void 0===q&&(q=new _n(D.width+200,D.height+200,25)),this.transform=D,this.grid=Y,this.ignoredGrid=q,this.pitchfactor=Math.cos(D._pitch)*D.cameraToCenterDistance,this.screenRightBoundary=D.width+lr,this.screenBottomBoundary=D.height+lr,this.gridRightBoundary=D.width+200,this.gridBottomBoundary=D.height+200};function Gn(D,Y,q){return Y*(l.EXTENT/(D.tileSize*Math.pow(2,q-D.tileID.overscaledZ)))}$n.prototype.placeCollisionBox=function(D,Y,q,te,ve){var Ce=this.projectAndGetPerspectiveRatio(te,D.anchorPointX,D.anchorPointY),Ne=q*Ce.perspectiveRatio,qe=D.x1*Ne+Ce.point.x,et=D.y1*Ne+Ce.point.y,vt=D.x2*Ne+Ce.point.x,yt=D.y2*Ne+Ce.point.y;return!this.isInsideGrid(qe,et,vt,yt)||!Y&&this.grid.hitTest(qe,et,vt,yt,ve)?{box:[],offscreen:!1}:{box:[qe,et,vt,yt],offscreen:this.isOffscreen(qe,et,vt,yt)}},$n.prototype.placeCollisionCircles=function(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt,ee,ue){var Ae=[],Oe=new l.Point(Y.anchorX,Y.anchorY),Fe=on(Oe,Ce),Ue=pn(this.transform.cameraToCenterDistance,Fe.signedDistanceFromCamera),We=(vt?ve/Ue:ve*Ue)/l.ONE_EM,Je=on(Oe,Ne).point,it=Cn(We,te,Y.lineOffsetX*We,Y.lineOffsetY*We,!1,Je,Oe,Y,q,Ne,{}),ut=!1,St=!1,Dt=!0;if(it){for(var Ft=.5*ee*Ue+ue,Wt=new l.Point(-100,-100),cn=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Yt=new Qt,en=it.first,Xt=it.last,bn=[],gn=en.path.length-1;gn>=1;gn--)bn.push(en.path[gn]);for(var $t=1;$t<Xt.path.length;$t++)bn.push(Xt.path[$t]);var On=2.5*Ft;if(qe){var Dn=bn.map(function(yi){return on(yi,qe)});bn=Dn.some(function(yi){return yi.signedDistanceFromCamera<=0})?[]:Dn.map(function(yi){return yi.point})}var Yn=[];if(bn.length>0){for(var Xn=bn[0].clone(),gr=bn[0].clone(),vr=1;vr<bn.length;vr++)Xn.x=Math.min(Xn.x,bn[vr].x),Xn.y=Math.min(Xn.y,bn[vr].y),gr.x=Math.max(gr.x,bn[vr].x),gr.y=Math.max(gr.y,bn[vr].y);Yn=Xn.x>=Wt.x&&gr.x<=cn.x&&Xn.y>=Wt.y&&gr.y<=cn.y?[bn]:gr.x<Wt.x||Xn.x>cn.x||gr.y<Wt.y||Xn.y>cn.y?[]:l.clipLine([bn],Wt.x,Wt.y,cn.x,cn.y)}for(var ur=0,dr=Yn;ur<dr.length;ur+=1){var Vr;Yt.reset(dr[ur],.25*Ft),Vr=Yt.length<=.5*Ft?1:Math.ceil(Yt.paddedLength/On)+1;for(var Hr=0;Hr<Vr;Hr++){var hr=Hr/Math.max(Vr-1,1),Ar=Yt.lerp(hr),Dr=Ar.x+lr,Rr=Ar.y+lr;Ae.push(Dr,Rr,Ft,0);var Wr=Dr-Ft,Zr=Rr-Ft,$r=Dr+Ft,ui=Rr+Ft;if(Dt=Dt&&this.isOffscreen(Wr,Zr,$r,ui),St=St||this.isInsideGrid(Wr,Zr,$r,ui),!D&&this.grid.hitTestCircle(Dr,Rr,Ft,yt)&&(ut=!0,!et))return{circles:[],offscreen:!1,collisionDetected:ut}}}}return{circles:!et&&ut||!St?[]:Ae,offscreen:Dt,collisionDetected:ut}},$n.prototype.queryRenderedSymbols=function(D){if(0===D.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var Y=[],q=1/0,te=1/0,ve=-1/0,Ce=-1/0,Ne=0,qe=D;Ne<qe.length;Ne+=1){var et=qe[Ne],vt=new l.Point(et.x+lr,et.y+lr);q=Math.min(q,vt.x),te=Math.min(te,vt.y),ve=Math.max(ve,vt.x),Ce=Math.max(Ce,vt.y),Y.push(vt)}for(var yt={},ee={},ue=0,Ae=this.grid.query(q,te,ve,Ce).concat(this.ignoredGrid.query(q,te,ve,Ce));ue<Ae.length;ue+=1){var Oe=Ae[ue],Fe=Oe.key;if(void 0===yt[Fe.bucketInstanceId]&&(yt[Fe.bucketInstanceId]={}),!yt[Fe.bucketInstanceId][Fe.featureIndex]){var Ue=[new l.Point(Oe.x1,Oe.y1),new l.Point(Oe.x2,Oe.y1),new l.Point(Oe.x2,Oe.y2),new l.Point(Oe.x1,Oe.y2)];l.polygonIntersectsPolygon(Y,Ue)&&(yt[Fe.bucketInstanceId][Fe.featureIndex]=!0,void 0===ee[Fe.bucketInstanceId]&&(ee[Fe.bucketInstanceId]=[]),ee[Fe.bucketInstanceId].push(Fe.featureIndex))}}return ee},$n.prototype.insertCollisionBox=function(D,Y,q,te,ve){(Y?this.ignoredGrid:this.grid).insert({bucketInstanceId:q,featureIndex:te,collisionGroupID:ve},D[0],D[1],D[2],D[3])},$n.prototype.insertCollisionCircles=function(D,Y,q,te,ve){for(var Ce=Y?this.ignoredGrid:this.grid,Ne={bucketInstanceId:q,featureIndex:te,collisionGroupID:ve},qe=0;qe<D.length;qe+=4)Ce.insertCircle(Ne,D[qe],D[qe+1],D[qe+2])},$n.prototype.projectAndGetPerspectiveRatio=function(D,Y,q){var te=[Y,q,0,1];return yr(te,te,D),{point:new l.Point((te[0]/te[3]+1)/2*this.transform.width+lr,(-te[1]/te[3]+1)/2*this.transform.height+lr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/te[3]*.5}},$n.prototype.isOffscreen=function(D,Y,q,te){return q<lr||D>=this.screenRightBoundary||te<lr||Y>this.screenBottomBoundary},$n.prototype.isInsideGrid=function(D,Y,q,te){return q>=0&&D<this.gridRightBoundary&&te>=0&&Y<this.gridBottomBoundary},$n.prototype.getViewportMatrix=function(){var D=l.identity([]);return l.translate(D,D,[-100,-100,0]),D};var ir=function(D,Y,q,te){this.opacity=D?Math.max(0,Math.min(1,D.opacity+(D.placed?Y:-Y))):te&&q?1:0,this.placed=q};ir.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Jt=function(D,Y,q,te,ve){this.text=new ir(D?D.text:null,Y,q,ve),this.icon=new ir(D?D.icon:null,Y,te,ve)};Jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var rn=function(D,Y,q){this.text=D,this.icon=Y,this.skipFade=q},Sn=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},Tn=function(D,Y,q,te,ve){this.bucketInstanceId=D,this.featureIndex=Y,this.sourceLayerIndex=q,this.bucketIndex=te,this.tileID=ve},Ln=function(D){this.crossSourceCollisions=D,this.maxGroupID=0,this.collisionGroups={}};function Bn(D,Y,q,te,ve){var Ce=l.getAnchorAlignment(D),Ne=-(Ce.horizontalAlign-.5)*Y,qe=-(Ce.verticalAlign-.5)*q,et=l.evaluateVariableOffset(D,te);return new l.Point(Ne+et[0]*ve,qe+et[1]*ve)}function Hn(D,Y,q,te,ve,Ce){var Ne=D.x1,qe=D.x2,et=D.y1,vt=D.y2,yt=D.anchorPointX,ee=D.anchorPointY,ue=new l.Point(Y,q);return te&&ue._rotate(ve?Ce:-Ce),{x1:Ne+ue.x,y1:et+ue.y,x2:qe+ue.x,y2:vt+ue.y,anchorPointX:yt,anchorPointY:ee}}Ln.prototype.get=function(D){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[D]){var Y=++this.maxGroupID;this.collisionGroups[D]={ID:Y,predicate:function(q){return q.collisionGroupID===Y}}}return this.collisionGroups[D]};var or=function(D,Y,q,te){this.transform=D.clone(),this.collisionIndex=new $n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=Y,this.retainedQueryData={},this.collisionGroups=new Ln(q),this.collisionCircleArrays={},this.prevPlacement=te,te&&(te.prevPlacement=void 0),this.placedOrientations={}};function mr(D,Y,q,te,ve){D.emplaceBack(Y?1:0,q?1:0,te||0,ve||0),D.emplaceBack(Y?1:0,q?1:0,te||0,ve||0),D.emplaceBack(Y?1:0,q?1:0,te||0,ve||0),D.emplaceBack(Y?1:0,q?1:0,te||0,ve||0)}or.prototype.getBucketParts=function(D,Y,q,te){var ve=q.getBucket(Y),Ce=q.latestFeatureIndex;if(ve&&Ce&&Y.id===ve.layerIds[0]){var Ne=q.collisionBoxArray,qe=ve.layers[0].layout,et=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),vt=q.tileSize/l.EXTENT,yt=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),ee="map"===qe.get("text-pitch-alignment"),ue="map"===qe.get("text-rotation-alignment"),Ae=Gn(q,1,this.transform.zoom),Oe=Fn(yt,ee,ue,this.transform,Ae),Fe=null;if(ee){var Ue=yn(yt,ee,ue,this.transform,Ae);Fe=l.multiply([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[ve.bucketInstanceId]=new Tn(ve.bucketInstanceId,Ce,ve.sourceLayerIndex,ve.index,q.tileID);var We={bucket:ve,layout:qe,posMatrix:yt,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Fe,scale:et,textPixelRatio:vt,holdingForFade:q.holdingForFade(),collisionBoxArray:Ne,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(ve.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ve.sourceID)};if(te)for(var Je=0,it=ve.sortKeyRanges;Je<it.length;Je+=1){var ut=it[Je];D.push({sortKey:ut.sortKey,symbolInstanceStart:ut.symbolInstanceStart,symbolInstanceEnd:ut.symbolInstanceEnd,parameters:We})}else D.push({symbolInstanceStart:0,symbolInstanceEnd:ve.symbolInstances.length,parameters:We})}},or.prototype.attemptAnchorPlacement=function(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt,ee,ue,Ae,Oe){var Fe,Ue=[ee.textOffset0,ee.textOffset1],We=Bn(D,q,te,Ue,ve),Je=this.collisionIndex.placeCollisionBox(Hn(Y,We.x,We.y,Ce,Ne,this.transform.angle),yt,qe,et,vt.predicate);if(!Oe||0!==this.collisionIndex.placeCollisionBox(Hn(Oe,We.x,We.y,Ce,Ne,this.transform.angle),yt,qe,et,vt.predicate).box.length)return Je.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),this.variableOffsets[ee.crossTileID]={textOffset:Ue,width:q,height:te,anchor:D,textBoxScale:ve,prevAnchor:Fe},this.markUsedJustification(ue,D,ee,Ae),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,Ae,ee),this.placedOrientations[ee.crossTileID]=Ae),{shift:We,placedGlyphBoxes:Je}):void 0},or.prototype.placeLayerBucketPart=function(D,Y,q){var te=this,ve=D.parameters,Ce=ve.bucket,Ne=ve.layout,qe=ve.posMatrix,et=ve.textLabelPlaneMatrix,vt=ve.labelToScreenMatrix,yt=ve.textPixelRatio,ee=ve.holdingForFade,ue=ve.collisionBoxArray,Ae=ve.partiallyEvaluatedTextSize,Oe=ve.collisionGroup,Fe=Ne.get("text-optional"),Ue=Ne.get("icon-optional"),We=Ne.get("text-allow-overlap"),Je=Ne.get("icon-allow-overlap"),it="map"===Ne.get("text-rotation-alignment"),ut="map"===Ne.get("text-pitch-alignment"),St="none"!==Ne.get("icon-text-fit"),Dt="viewport-y"===Ne.get("symbol-z-order"),Ft=We&&(Je||!Ce.hasIconData()||Ue),Wt=Je&&(We||!Ce.hasTextData()||Fe);!Ce.collisionArrays&&ue&&Ce.deserializeCollisionBoxes(ue);var cn=function($t,On){if(!Y[$t.crossTileID])if(ee)te.placements[$t.crossTileID]=new rn(!1,!1,!1);else{var Dn,Yn=!1,Xn=!1,gr=!0,vr=null,ur={box:null,offscreen:null},dr={box:null,offscreen:null},kr=null,Vr=null,Hr=0,hr=0,Ar=0;On.textFeatureIndex?Hr=On.textFeatureIndex:$t.useRuntimeCollisionCircles&&(Hr=$t.featureIndex),On.verticalTextFeatureIndex&&(hr=On.verticalTextFeatureIndex);var Dr=On.textBox;if(Dr){var Rr=function(Yr){var Bi=l.WritingMode.horizontal;if(Ce.allowVerticalPlacement&&!Yr&&te.prevPlacement){var ha=te.prevPlacement.placedOrientations[$t.crossTileID];ha&&(te.placedOrientations[$t.crossTileID]=ha,te.markUsedOrientation(Ce,Bi=ha,$t))}return Bi},Wr=function(Yr,Bi){if(Ce.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&On.verticalTextBox)for(var ha=0,Ds=Ce.writingModes;ha<Ds.length&&(Ds[ha]===l.WritingMode.vertical?(ur=Bi(),dr=ur):ur=Yr(),!(ur&&ur.box&&ur.box.length));ha+=1);else ur=Yr()};if(Ne.get("text-variable-anchor")){var Zr=Ne.get("text-variable-anchor");if(te.prevPlacement&&te.prevPlacement.variableOffsets[$t.crossTileID]){var $r=te.prevPlacement.variableOffsets[$t.crossTileID];Zr.indexOf($r.anchor)>0&&(Zr=Zr.filter(function(Yr){return Yr!==$r.anchor})).unshift($r.anchor)}var ui=function(Yr,Bi,ha){for(var Ds=Yr.x2-Yr.x1,sc=Yr.y2-Yr.y1,Jl=$t.textBoxScale,lc=St&&!Je?Bi:null,ul={box:[],offscreen:!1},_u=We?2*Zr.length:Zr.length,xl=0;xl<_u;++xl){var $s=te.attemptAnchorPlacement(Zr[xl%Zr.length],Yr,Ds,sc,Jl,it,ut,yt,qe,Oe,xl>=Zr.length,$t,Ce,ha,lc);if($s&&(ul=$s.placedGlyphBoxes)&&ul.box&&ul.box.length){Yn=!0,vr=$s.shift;break}}return ul};Wr(function(){return ui(Dr,On.iconBox,l.WritingMode.horizontal)},function(){var Yr=On.verticalTextBox;return Ce.allowVerticalPlacement&&!(ur&&ur.box&&ur.box.length)&&$t.numVerticalGlyphVertices>0&&Yr?ui(Yr,On.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),ur&&(Yn=ur.box,gr=ur.offscreen);var yi=Rr(ur&&ur.box);if(!Yn&&te.prevPlacement){var hi=te.prevPlacement.variableOffsets[$t.crossTileID];hi&&(te.variableOffsets[$t.crossTileID]=hi,te.markUsedJustification(Ce,hi.anchor,$t,yi))}}else{var si=function(Yr,Bi){var ha=te.collisionIndex.placeCollisionBox(Yr,We,yt,qe,Oe.predicate);return ha&&ha.box&&ha.box.length&&(te.markUsedOrientation(Ce,Bi,$t),te.placedOrientations[$t.crossTileID]=Bi),ha};Wr(function(){return si(Dr,l.WritingMode.horizontal)},function(){var Yr=On.verticalTextBox;return Ce.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&Yr?si(Yr,l.WritingMode.vertical):{box:null,offscreen:null}}),Rr(ur&&ur.box&&ur.box.length)}}if(Yn=(Dn=ur)&&Dn.box&&Dn.box.length>0,gr=Dn&&Dn.offscreen,$t.useRuntimeCollisionCircles){var ci=Ce.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex),pi=l.evaluateSizeForFeature(Ce.textSizeData,Ae,ci),Si=Ne.get("text-padding");kr=te.collisionIndex.placeCollisionCircles(We,ci,Ce.lineVertexArray,Ce.glyphOffsetArray,pi,qe,et,vt,q,ut,Oe.predicate,$t.collisionCircleDiameter,Si),Yn=We||kr.circles.length>0&&!kr.collisionDetected,gr=gr&&kr.offscreen}if(On.iconFeatureIndex&&(Ar=On.iconFeatureIndex),On.iconBox){var Fi=function(Yr){var Bi=St&&vr?Hn(Yr,vr.x,vr.y,it,ut,te.transform.angle):Yr;return te.collisionIndex.placeCollisionBox(Bi,Je,yt,qe,Oe.predicate)};Xn=dr&&dr.box&&dr.box.length&&On.verticalIconBox?(Vr=Fi(On.verticalIconBox)).box.length>0:(Vr=Fi(On.iconBox)).box.length>0,gr=gr&&Vr.offscreen}var Br=Fe||0===$t.numHorizontalGlyphVertices&&0===$t.numVerticalGlyphVertices,Gi=Ue||0===$t.numIconVertices;if(Br||Gi?Gi?Br||(Xn=Xn&&Yn):Yn=Xn&&Yn:Xn=Yn=Xn&&Yn,Yn&&Dn&&Dn.box&&te.collisionIndex.insertCollisionBox(Dn.box,Ne.get("text-ignore-placement"),Ce.bucketInstanceId,dr&&dr.box&&hr?hr:Hr,Oe.ID),Xn&&Vr&&te.collisionIndex.insertCollisionBox(Vr.box,Ne.get("icon-ignore-placement"),Ce.bucketInstanceId,Ar,Oe.ID),kr&&(Yn&&te.collisionIndex.insertCollisionCircles(kr.circles,Ne.get("text-ignore-placement"),Ce.bucketInstanceId,Hr,Oe.ID),q)){var Qi=Ce.bucketInstanceId,ki=te.collisionCircleArrays[Qi];void 0===ki&&(ki=te.collisionCircleArrays[Qi]=new Sn);for(var Ga=0;Ga<kr.circles.length;Ga+=4)ki.circles.push(kr.circles[Ga+0]),ki.circles.push(kr.circles[Ga+1]),ki.circles.push(kr.circles[Ga+2]),ki.circles.push(kr.collisionDetected?1:0)}te.placements[$t.crossTileID]=new rn(Yn||Ft,Xn||Wt,gr||Ce.justReloaded),Y[$t.crossTileID]=!0}};if(Dt)for(var Yt=Ce.getSortedSymbolIndexes(this.transform.angle),en=Yt.length-1;en>=0;--en){var Xt=Yt[en];cn(Ce.symbolInstances.get(Xt),Ce.collisionArrays[Xt])}else for(var bn=D.symbolInstanceStart;bn<D.symbolInstanceEnd;bn++)cn(Ce.symbolInstances.get(bn),Ce.collisionArrays[bn]);if(q&&Ce.bucketInstanceId in this.collisionCircleArrays){var gn=this.collisionCircleArrays[Ce.bucketInstanceId];l.invert(gn.invProjMatrix,qe),gn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ce.justReloaded=!1},or.prototype.markUsedJustification=function(D,Y,q,te){var ve;ve=te===l.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:{left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(Y)];for(var Ne=0,qe=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];Ne<qe.length;Ne+=1){var et=qe[Ne];et>=0&&(D.text.placedSymbolArray.get(et).crossTileID=ve>=0&&et!==ve?0:q.crossTileID)}},or.prototype.markUsedOrientation=function(D,Y,q){for(var te=Y===l.WritingMode.horizontal||Y===l.WritingMode.horizontalOnly?Y:0,ve=Y===l.WritingMode.vertical?Y:0,Ce=0,Ne=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];Ce<Ne.length;Ce+=1)D.text.placedSymbolArray.get(Ne[Ce]).placedOrientation=te;q.verticalPlacedTextSymbolIndex&&(D.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=ve)},or.prototype.commit=function(D){this.commitTime=D,this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,q=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var te=Y?Y.symbolFadeChange(D):1,ve=Y?Y.opacities:{},Ce=Y?Y.variableOffsets:{},Ne=Y?Y.placedOrientations:{};for(var qe in this.placements){var et=this.placements[qe],vt=ve[qe];vt?(this.opacities[qe]=new Jt(vt,te,et.text,et.icon),q=q||et.text!==vt.text.placed||et.icon!==vt.icon.placed):(this.opacities[qe]=new Jt(null,te,et.text,et.icon,et.skipFade),q=q||et.text||et.icon)}for(var yt in ve){var ee=ve[yt];if(!this.opacities[yt]){var ue=new Jt(ee,te,!1,!1);ue.isHidden()||(this.opacities[yt]=ue,q=q||ee.text.placed||ee.icon.placed)}}for(var Ae in Ce)this.variableOffsets[Ae]||!this.opacities[Ae]||this.opacities[Ae].isHidden()||(this.variableOffsets[Ae]=Ce[Ae]);for(var Oe in Ne)this.placedOrientations[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.placedOrientations[Oe]=Ne[Oe]);q?this.lastPlacementChangeTime=D:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:D)},or.prototype.updateLayerOpacities=function(D,Y){for(var q={},te=0,ve=Y;te<ve.length;te+=1){var Ce=ve[te],Ne=Ce.getBucket(D);Ne&&Ce.latestFeatureIndex&&D.id===Ne.layerIds[0]&&this.updateBucketOpacities(Ne,q,Ce.collisionBoxArray)}},or.prototype.updateBucketOpacities=function(D,Y,q){var te=this;D.hasTextData()&&D.text.opacityVertexArray.clear(),D.hasIconData()&&D.icon.opacityVertexArray.clear(),D.hasIconCollisionBoxData()&&D.iconCollisionBox.collisionVertexArray.clear(),D.hasTextCollisionBoxData()&&D.textCollisionBox.collisionVertexArray.clear();var ve=D.layers[0].layout,Ce=new Jt(null,0,!1,!1,!0),Ne=ve.get("text-allow-overlap"),qe=ve.get("icon-allow-overlap"),et=ve.get("text-variable-anchor"),vt="map"===ve.get("text-rotation-alignment"),yt="map"===ve.get("text-pitch-alignment"),ee="none"!==ve.get("icon-text-fit"),ue=new Jt(null,0,Ne&&(qe||!D.hasIconData()||ve.get("icon-optional")),qe&&(Ne||!D.hasTextData()||ve.get("text-optional")),!0);!D.collisionArrays&&q&&(D.hasIconCollisionBoxData()||D.hasTextCollisionBoxData())&&D.deserializeCollisionBoxes(q);for(var Ae=function(We,Je,it){for(var ut=0;ut<Je/4;ut++)We.opacityVertexArray.emplaceBack(it)},Oe=function(We){var Je=D.symbolInstances.get(We),it=Je.numHorizontalGlyphVertices,ut=Je.numVerticalGlyphVertices,St=Je.crossTileID,Ft=te.opacities[St];Y[St]?Ft=Ce:Ft||(te.opacities[St]=Ft=ue),Y[St]=!0;var cn=Je.numIconVertices>0,Yt=te.placedOrientations[Je.crossTileID],en=Yt===l.WritingMode.vertical,Xt=Yt===l.WritingMode.horizontal||Yt===l.WritingMode.horizontalOnly;if(it>0||ut>0){var bn=wn(Ft.text);Ae(D.text,it,en?an:bn),Ae(D.text,ut,Xt?an:bn);var On=Ft.text.isHidden();[Je.rightJustifiedTextSymbolIndex,Je.centerJustifiedTextSymbolIndex,Je.leftJustifiedTextSymbolIndex].forEach(function(Ar){Ar>=0&&(D.text.placedSymbolArray.get(Ar).hidden=On||en?1:0)}),Je.verticalPlacedTextSymbolIndex>=0&&(D.text.placedSymbolArray.get(Je.verticalPlacedTextSymbolIndex).hidden=On||Xt?1:0);var Dn=te.variableOffsets[Je.crossTileID];Dn&&te.markUsedJustification(D,Dn.anchor,Je,Yt);var Yn=te.placedOrientations[Je.crossTileID];Yn&&(te.markUsedJustification(D,"left",Je,Yn),te.markUsedOrientation(D,Yn,Je))}if(cn){var Xn=wn(Ft.icon),gr=!(ee&&Je.verticalPlacedIconSymbolIndex&&en);Je.placedIconSymbolIndex>=0&&(Ae(D.icon,Je.numIconVertices,gr?Xn:an),D.icon.placedSymbolArray.get(Je.placedIconSymbolIndex).hidden=Ft.icon.isHidden()),Je.verticalPlacedIconSymbolIndex>=0&&(Ae(D.icon,Je.numVerticalIconVertices,gr?an:Xn),D.icon.placedSymbolArray.get(Je.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden())}if(D.hasIconCollisionBoxData()||D.hasTextCollisionBoxData()){var dr=D.collisionArrays[We];if(dr){var kr=new l.Point(0,0);if(dr.textBox||dr.verticalTextBox){var Vr=!0;if(et){var Hr=te.variableOffsets[St];Hr?(kr=Bn(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textBoxScale),vt&&kr._rotate(yt?te.transform.angle:-te.transform.angle)):Vr=!1}dr.textBox&&mr(D.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||en,kr.x,kr.y),dr.verticalTextBox&&mr(D.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||Xt,kr.x,kr.y)}var hr=Boolean(!Xt&&dr.verticalIconBox);dr.iconBox&&mr(D.iconCollisionBox.collisionVertexArray,Ft.icon.placed,hr,ee?kr.x:0,ee?kr.y:0),dr.verticalIconBox&&mr(D.iconCollisionBox.collisionVertexArray,Ft.icon.placed,!hr,ee?kr.x:0,ee?kr.y:0)}}},Fe=0;Fe<D.symbolInstances.length;Fe++)Oe(Fe);if(D.sortFeatures(this.transform.angle),this.retainedQueryData[D.bucketInstanceId]&&(this.retainedQueryData[D.bucketInstanceId].featureSortOrder=D.featureSortOrder),D.hasTextData()&&D.text.opacityVertexBuffer&&D.text.opacityVertexBuffer.updateData(D.text.opacityVertexArray),D.hasIconData()&&D.icon.opacityVertexBuffer&&D.icon.opacityVertexBuffer.updateData(D.icon.opacityVertexArray),D.hasIconCollisionBoxData()&&D.iconCollisionBox.collisionVertexBuffer&&D.iconCollisionBox.collisionVertexBuffer.updateData(D.iconCollisionBox.collisionVertexArray),D.hasTextCollisionBoxData()&&D.textCollisionBox.collisionVertexBuffer&&D.textCollisionBox.collisionVertexBuffer.updateData(D.textCollisionBox.collisionVertexArray),D.bucketInstanceId in this.collisionCircleArrays){var Ue=this.collisionCircleArrays[D.bucketInstanceId];D.placementInvProjMatrix=Ue.invProjMatrix,D.placementViewportMatrix=Ue.viewportMatrix,D.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[D.bucketInstanceId]}},or.prototype.symbolFadeChange=function(D){return 0===this.fadeDuration?1:(D-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},or.prototype.zoomAdjustment=function(D){return Math.max(0,(this.transform.zoom-D)/1.5)},or.prototype.hasTransitions=function(D){return this.stale||D-this.lastPlacementChangeTime<this.fadeDuration},or.prototype.stillRecent=function(D,Y){var q=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*q>D},or.prototype.setStale=function(){this.stale=!0};var Kt=Math.pow(2,25),An=Math.pow(2,24),Rt=Math.pow(2,17),Zt=Math.pow(2,16),tn=Math.pow(2,9),En=Math.pow(2,8),Mn=Math.pow(2,1);function wn(D){if(0===D.opacity&&!D.placed)return 0;if(1===D.opacity&&D.placed)return 4294967295;var Y=D.placed?1:0,q=Math.floor(127*D.opacity);return q*Kt+Y*An+q*Rt+Y*Zt+q*tn+Y*En+q*Mn+Y}var an=0,vn=function(D){this._sortAcrossTiles="viewport-y"!==D.layout.get("symbol-z-order")&&void 0!==D.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};vn.prototype.continuePlacement=function(D,Y,q,te,ve){for(var Ce=this._bucketParts;this._currentTileIndex<D.length;)if(Y.getBucketParts(Ce,te,D[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ve())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ce.sort(function(et,vt){return et.sortKey-vt.sortKey}));this._currentPartIndex<Ce.length;)if(Y.placeLayerBucketPart(Ce[this._currentPartIndex],this._seenCrossTileIDs,q),this._currentPartIndex++,ve())return!0;return!1};var sn=function(D,Y,q,te,ve,Ce,Ne){this.placement=new or(D,ve,Ce,Ne),this._currentPlacementIndex=Y.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=te,this._done=!1};sn.prototype.isDone=function(){return this._done},sn.prototype.continuePlacement=function(D,Y,q){for(var te=this,ve=l.browser.now(),Ce=function(){var et=l.browser.now()-ve;return!te._forceFullPlacement&&et>2};this._currentPlacementIndex>=0;){var Ne=Y[D[this._currentPlacementIndex]],qe=this.placement.collisionIndex.transform.zoom;if("symbol"===Ne.type&&(!Ne.minzoom||Ne.minzoom<=qe)&&(!Ne.maxzoom||Ne.maxzoom>qe)){if(this._inProgressLayer||(this._inProgressLayer=new vn(Ne)),this._inProgressLayer.continuePlacement(q[Ne.source],this.placement,this._showCollisionBoxes,Ne,Ce))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},sn.prototype.commit=function(D){return this.placement.commit(D),this.placement};var fn=512/l.EXTENT/2,mn=function(D,Y,q){this.tileID=D,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var te=0;te<Y.length;te++){var ve=Y.get(te),Ce=ve.key;this.indexedSymbolInstances[Ce]||(this.indexedSymbolInstances[Ce]=[]),this.indexedSymbolInstances[Ce].push({crossTileID:ve.crossTileID,coord:this.getScaledCoordinates(ve,D)})}};mn.prototype.getScaledCoordinates=function(D,Y){var te=fn/Math.pow(2,Y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((Y.canonical.x*l.EXTENT+D.anchorX)*te),y:Math.floor((Y.canonical.y*l.EXTENT+D.anchorY)*te)}},mn.prototype.findMatches=function(D,Y,q){for(var te=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),ve=0;ve<D.length;ve++){var Ce=D.get(ve);if(!Ce.crossTileID){var Ne=this.indexedSymbolInstances[Ce.key];if(Ne)for(var qe=this.getScaledCoordinates(Ce,Y),et=0,vt=Ne;et<vt.length;et+=1){var yt=vt[et];if(Math.abs(yt.coord.x-qe.x)<=te&&Math.abs(yt.coord.y-qe.y)<=te&&!q[yt.crossTileID]){q[yt.crossTileID]=!0,Ce.crossTileID=yt.crossTileID;break}}}}};var Pn=function(){this.maxCrossTileID=0};Pn.prototype.generate=function(){return++this.maxCrossTileID};var qn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};qn.prototype.handleWrapJump=function(D){var Y=Math.round((D-this.lng)/360);if(0!==Y)for(var q in this.indexes){var te=this.indexes[q],ve={};for(var Ce in te){var Ne=te[Ce];Ne.tileID=Ne.tileID.unwrapTo(Ne.tileID.wrap+Y),ve[Ne.tileID.key]=Ne}this.indexes[q]=ve}this.lng=D},qn.prototype.addBucket=function(D,Y,q){if(this.indexes[D.overscaledZ]&&this.indexes[D.overscaledZ][D.key]){if(this.indexes[D.overscaledZ][D.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(D.overscaledZ,this.indexes[D.overscaledZ][D.key])}for(var te=0;te<Y.symbolInstances.length;te++)Y.symbolInstances.get(te).crossTileID=0;this.usedCrossTileIDs[D.overscaledZ]||(this.usedCrossTileIDs[D.overscaledZ]={});var ve=this.usedCrossTileIDs[D.overscaledZ];for(var Ce in this.indexes){var Ne=this.indexes[Ce];if(Number(Ce)>D.overscaledZ)for(var qe in Ne){var et=Ne[qe];et.tileID.isChildOf(D)&&et.findMatches(Y.symbolInstances,D,ve)}else{var vt=Ne[D.scaledTo(Number(Ce)).key];vt&&vt.findMatches(Y.symbolInstances,D,ve)}}for(var yt=0;yt<Y.symbolInstances.length;yt++){var ee=Y.symbolInstances.get(yt);ee.crossTileID||(ee.crossTileID=q.generate(),ve[ee.crossTileID]=!0)}return void 0===this.indexes[D.overscaledZ]&&(this.indexes[D.overscaledZ]={}),this.indexes[D.overscaledZ][D.key]=new mn(D,Y.symbolInstances,Y.bucketInstanceId),!0},qn.prototype.removeBucketCrossTileIDs=function(D,Y){for(var q in Y.indexedSymbolInstances)for(var te=0,ve=Y.indexedSymbolInstances[q];te<ve.length;te+=1)delete this.usedCrossTileIDs[D][ve[te].crossTileID]},qn.prototype.removeStaleBuckets=function(D){var Y=!1;for(var q in this.indexes){var te=this.indexes[q];for(var ve in te)D[te[ve].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,te[ve]),delete te[ve],Y=!0)}return Y};var Zn=function(){this.layerIndexes={},this.crossTileIDs=new Pn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Zn.prototype.addLayer=function(D,Y,q){var te=this.layerIndexes[D.id];void 0===te&&(te=this.layerIndexes[D.id]=new qn);var ve=!1,Ce={};te.handleWrapJump(q);for(var Ne=0,qe=Y;Ne<qe.length;Ne+=1){var et=qe[Ne],vt=et.getBucket(D);vt&&D.id===vt.layerIds[0]&&(vt.bucketInstanceId||(vt.bucketInstanceId=++this.maxBucketInstanceId),te.addBucket(et.tileID,vt,this.crossTileIDs)&&(ve=!0),Ce[vt.bucketInstanceId]=!0)}return te.removeStaleBuckets(Ce)&&(ve=!0),ve},Zn.prototype.pruneUnusedLayers=function(D){var Y={};for(var q in D.forEach(function(te){Y[te]=!0}),this.layerIndexes)Y[q]||delete this.layerIndexes[q]};var Jn=function(D,Y){return l.emitValidationErrors(D,Y&&Y.filter(function(q){return"source.canvas"!==q.identifier}))},rr=l.pick(gt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),tr=l.pick(gt,["setCenter","setZoom","setBearing","setPitch"]),sr=function(){var D={},Y=l.styleSpec.$version;for(var q in l.styleSpec.$root){var ve,te=l.styleSpec.$root[q];te.required&&null!=(ve="version"===q?Y:"array"===te.type?[]:{})&&(D[q]=ve)}return D}(),ar=function(D){function Y(q,te){var ve=this;void 0===te&&(te={}),D.call(this),this.map=q,this.dispatcher=new L(At(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(q._requestManager,te.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Zn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Ce=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Ne){Ce.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Ne.pluginStatus,pluginURL:Ne.pluginURL},function(et,vt){if(l.triggerPluginCompletionEvent(et),vt&&vt.every(function(ee){return ee}))for(var yt in Ce.sourceCaches)Ce.sourceCaches[yt].reload()})}),this.on("data",function(Ne){if("source"===Ne.dataType&&"metadata"===Ne.sourceDataType){var qe=ve.sourceCaches[Ne.sourceId];if(qe){var et=qe.getSource();if(et&&et.vectorLayerIds)for(var vt in ve._layers){var yt=ve._layers[vt];yt.source===et.id&&ve._validateLayer(yt)}}}})}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.loadURL=function(q,te){var ve=this;void 0===te&&(te={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Ce="boolean"==typeof te.validate?te.validate:!l.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,te.accessToken);var Ne=this.map._requestManager.transformRequest(q,l.ResourceType.Style);this._request=l.getJSON(Ne,function(qe,et){ve._request=null,qe?ve.fire(new l.ErrorEvent(qe)):et&&ve._load(et,Ce)})},Y.prototype.loadJSON=function(q,te){var ve=this;void 0===te&&(te={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){ve._request=null,ve._load(q,!1!==te.validate)})},Y.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(sr,!1)},Y.prototype._load=function(q,te){if(!te||!Jn(this,l.validateStyle(q))){for(var ve in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(ve,q.sources[ve],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Ce=pt(this.stylesheet.layers);this._order=Ce.map(function(vt){return vt.id}),this._layers={},this._serializedLayers={};for(var Ne=0,qe=Ce;Ne<qe.length;Ne+=1){var et=qe[Ne];(et=l.createStyleLayer(et)).setEventedParent(this,{layer:{id:et.id}}),this._layers[et.id]=et,this._serializedLayers[et.id]=et.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},Y.prototype._loadSprite=function(q){var te=this;this._spriteRequest=function(ve,Ce,Ne){var qe,et,vt,yt=l.browser.devicePixelRatio>1?"@2x":"",ee=l.getJSON(Ce.transformRequest(Ce.normalizeSpriteURL(ve,yt,".json"),l.ResourceType.SpriteJSON),function(Oe,Fe){ee=null,vt||(vt=Oe,qe=Fe,Ae())}),ue=l.getImage(Ce.transformRequest(Ce.normalizeSpriteURL(ve,yt,".png"),l.ResourceType.SpriteImage),function(Oe,Fe){ue=null,vt||(vt=Oe,et=Fe,Ae())});function Ae(){if(vt)Ne(vt);else if(qe&&et){var Oe=l.browser.getImageData(et),Fe={};for(var Ue in qe){var We=qe[Ue],Je=We.width,it=We.height,ut=We.x,St=We.y,Dt=We.sdf,Ft=We.pixelRatio,Wt=We.stretchX,cn=We.stretchY,Yt=We.content,en=new l.RGBAImage({width:Je,height:it});l.RGBAImage.copy(Oe,en,{x:ut,y:St},{x:0,y:0},{width:Je,height:it}),Fe[Ue]={data:en,pixelRatio:Ft,sdf:Dt,stretchX:Wt,stretchY:cn,content:Yt}}Ne(null,Fe)}}return{cancel:function(){ee&&(ee.cancel(),ee=null),ue&&(ue.cancel(),ue=null)}}}(q,this.map._requestManager,function(ve,Ce){if(te._spriteRequest=null,ve)te.fire(new l.ErrorEvent(ve));else if(Ce)for(var Ne in Ce)te.imageManager.addImage(Ne,Ce[Ne]);te.imageManager.setLoaded(!0),te._availableImages=te.imageManager.listImages(),te.dispatcher.broadcast("setImages",te._availableImages),te.fire(new l.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(q){var te=this.sourceCaches[q.source];if(te){var ve=q.sourceLayer;if(ve){var Ce=te.getSource();("geojson"===Ce.type||Ce.vectorLayerIds&&-1===Ce.vectorLayerIds.indexOf(ve))&&this.fire(new l.ErrorEvent(new Error('Source layer "'+ve+'" does not exist on source "'+Ce.id+'" as specified by style layer "'+q.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(q){for(var te=[],ve=0,Ce=q;ve<Ce.length;ve+=1){var qe=this._layers[Ce[ve]];"custom"!==qe.type&&te.push(qe.serialize())}return te},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var te in this._layers)if(this._layers[te].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(q){if(this._loaded){var te=this._changed;if(this._changed){var ve=Object.keys(this._updatedLayers),Ce=Object.keys(this._removedLayers);for(var Ne in(ve.length||Ce.length)&&this._updateWorkerLayers(ve,Ce),this._updatedSources){var qe=this._updatedSources[Ne];"reload"===qe?this._reloadSource(Ne):"clear"===qe&&this._clearSource(Ne)}for(var et in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[et].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var vt in this.sourceCaches)this.sourceCaches[vt].used=!1;for(var yt=0,ee=this._order;yt<ee.length;yt+=1){var Ae=this._layers[ee[yt]];Ae.recalculate(q,this._availableImages),!Ae.isHidden(q.zoom)&&Ae.source&&(this.sourceCaches[Ae.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,te&&this.fire(new l.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var te in this.sourceCaches)this.sourceCaches[te].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(q,te){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:te})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(q){var te=this;if(this._checkLoaded(),Jn(this,l.validateStyle(q)))return!1;(q=l.clone$1(q)).layers=pt(q.layers);var ve=function hn(D,Y){if(!D)return[{command:gt.setStyle,args:[Y]}];var q=[];try{if(!l.deepEqual(D.version,Y.version))return[{command:gt.setStyle,args:[Y]}];l.deepEqual(D.center,Y.center)||q.push({command:gt.setCenter,args:[Y.center]}),l.deepEqual(D.zoom,Y.zoom)||q.push({command:gt.setZoom,args:[Y.zoom]}),l.deepEqual(D.bearing,Y.bearing)||q.push({command:gt.setBearing,args:[Y.bearing]}),l.deepEqual(D.pitch,Y.pitch)||q.push({command:gt.setPitch,args:[Y.pitch]}),l.deepEqual(D.sprite,Y.sprite)||q.push({command:gt.setSprite,args:[Y.sprite]}),l.deepEqual(D.glyphs,Y.glyphs)||q.push({command:gt.setGlyphs,args:[Y.glyphs]}),l.deepEqual(D.transition,Y.transition)||q.push({command:gt.setTransition,args:[Y.transition]}),l.deepEqual(D.light,Y.light)||q.push({command:gt.setLight,args:[Y.light]});var te={},ve=[];!function(Ne,qe,et,vt){var yt;for(yt in qe=qe||{},Ne=Ne||{})Ne.hasOwnProperty(yt)&&(qe.hasOwnProperty(yt)||zt(yt,et,vt));for(yt in qe)qe.hasOwnProperty(yt)&&(Ne.hasOwnProperty(yt)?l.deepEqual(Ne[yt],qe[yt])||("geojson"===Ne[yt].type&&"geojson"===qe[yt].type&&Nt(Ne,qe,yt)?et.push({command:gt.setGeoJSONSourceData,args:[yt,qe[yt].data]}):Ut(yt,qe,et,vt)):Pt(yt,qe,et))}(D.sources,Y.sources,ve,te);var Ce=[];D.layers&&D.layers.forEach(function(Ne){te[Ne.source]?q.push({command:gt.removeLayer,args:[Ne.id]}):Ce.push(Ne)}),q=q.concat(ve),function(Ne,qe,et){qe=qe||[];var vt,yt,ee,ue,Ae,Oe,Fe,Ue=(Ne=Ne||[]).map(Gt),We=qe.map(Gt),Je=Ne.reduce(un,{}),it=qe.reduce(un,{}),ut=Ue.slice(),St=Object.create(null);for(vt=0,yt=0;vt<Ue.length;vt++)it.hasOwnProperty(ee=Ue[vt])?yt++:(et.push({command:gt.removeLayer,args:[ee]}),ut.splice(ut.indexOf(ee,yt),1));for(vt=0,yt=0;vt<We.length;vt++)ut[ut.length-1-vt]!==(ee=We[We.length-1-vt])&&(Je.hasOwnProperty(ee)?(et.push({command:gt.removeLayer,args:[ee]}),ut.splice(ut.lastIndexOf(ee,ut.length-yt),1)):yt++,et.push({command:gt.addLayer,args:[it[ee],Oe=ut[ut.length-vt]]}),ut.splice(ut.length-vt,0,ee),St[ee]=!0);for(vt=0;vt<We.length;vt++)if(ue=Je[ee=We[vt]],Ae=it[ee],!St[ee]&&!l.deepEqual(ue,Ae))if(l.deepEqual(ue.source,Ae.source)&&l.deepEqual(ue["source-layer"],Ae["source-layer"])&&l.deepEqual(ue.type,Ae.type)){for(Fe in jt(ue.layout,Ae.layout,et,ee,null,gt.setLayoutProperty),jt(ue.paint,Ae.paint,et,ee,null,gt.setPaintProperty),l.deepEqual(ue.filter,Ae.filter)||et.push({command:gt.setFilter,args:[ee,Ae.filter]}),l.deepEqual(ue.minzoom,Ae.minzoom)&&l.deepEqual(ue.maxzoom,Ae.maxzoom)||et.push({command:gt.setLayerZoomRange,args:[ee,Ae.minzoom,Ae.maxzoom]}),ue)ue.hasOwnProperty(Fe)&&"layout"!==Fe&&"paint"!==Fe&&"filter"!==Fe&&"metadata"!==Fe&&"minzoom"!==Fe&&"maxzoom"!==Fe&&(0===Fe.indexOf("paint.")?jt(ue[Fe],Ae[Fe],et,ee,Fe.slice(6),gt.setPaintProperty):l.deepEqual(ue[Fe],Ae[Fe])||et.push({command:gt.setLayerProperty,args:[ee,Fe,Ae[Fe]]}));for(Fe in Ae)Ae.hasOwnProperty(Fe)&&!ue.hasOwnProperty(Fe)&&"layout"!==Fe&&"paint"!==Fe&&"filter"!==Fe&&"metadata"!==Fe&&"minzoom"!==Fe&&"maxzoom"!==Fe&&(0===Fe.indexOf("paint.")?jt(ue[Fe],Ae[Fe],et,ee,Fe.slice(6),gt.setPaintProperty):l.deepEqual(ue[Fe],Ae[Fe])||et.push({command:gt.setLayerProperty,args:[ee,Fe,Ae[Fe]]}))}else et.push({command:gt.removeLayer,args:[ee]}),Oe=ut[ut.lastIndexOf(ee)+1],et.push({command:gt.addLayer,args:[Ae,Oe]})}(Ce,Y.layers,q)}catch(Ne){console.warn("Unable to compute style diff:",Ne),q=[{command:gt.setStyle,args:[Y]}]}return q}(this.serialize(),q).filter(function(Ne){return!(Ne.command in tr)});if(0===ve.length)return!1;var Ce=ve.filter(function(Ne){return!(Ne.command in rr)});if(Ce.length>0)throw new Error("Unimplemented: "+Ce.map(function(Ne){return Ne.command}).join(", ")+".");return ve.forEach(function(Ne){"setTransition"!==Ne.command&&te[Ne.command].apply(te,Ne.args)}),this.stylesheet=q,!0},Y.prototype.addImage=function(q,te){if(this.getImage(q))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,te),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(q,te){this.imageManager.updateImage(q,te)},Y.prototype.getImage=function(q){return this.imageManager.getImage(q)},Y.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(q,te,ve){var Ce=this;if(void 0===ve&&(ve={}),this._checkLoaded(),void 0!==this.sourceCaches[q])throw new Error("There is already a source with this ID");if(!te.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(te).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(te.type)>=0&&this._validate(l.validateStyle.source,"sources."+q,te,null,ve))){this.map&&this.map._collectResourceTiming&&(te.collectResourceTiming=!0);var Ne=this.sourceCaches[q]=new rt(q,te,this.dispatcher);Ne.style=this,Ne.setEventedParent(this,function(){return{isSourceLoaded:Ce.loaded(),source:Ne.serialize(),sourceId:q}}),Ne.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(q){if(this._checkLoaded(),void 0===this.sourceCaches[q])throw new Error("There is no source with this ID");for(var te in this._layers)if(this._layers[te].source===q)return this.fire(new l.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+te+'" is using it.')));var ve=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],ve.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),ve.setEventedParent(null),ve.clearTiles(),ve.onRemove&&ve.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(q,te){this._checkLoaded(),this.sourceCaches[q].getSource().setData(te),this._changed=!0},Y.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},Y.prototype.addLayer=function(q,te,ve){void 0===ve&&(ve={}),this._checkLoaded();var Ce=q.id;if(this.getLayer(Ce))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Ce+'" already exists on this map')));else{var Ne;if("custom"===q.type){if(Jn(this,l.validateCustomStyleLayer(q)))return;Ne=l.createStyleLayer(q)}else{if("object"==typeof q.source&&(this.addSource(Ce,q.source),q=l.clone$1(q),q=l.extend(q,{source:Ce})),this._validate(l.validateStyle.layer,"layers."+Ce,q,{arrayIndex:-1},ve))return;Ne=l.createStyleLayer(q),this._validateLayer(Ne),Ne.setEventedParent(this,{layer:{id:Ce}}),this._serializedLayers[Ne.id]=Ne.serialize()}var qe=te?this._order.indexOf(te):this._order.length;if(te&&-1===qe)this.fire(new l.ErrorEvent(new Error('Layer with id "'+te+'" does not exist on this map.')));else{if(this._order.splice(qe,0,Ce),this._layerOrderChanged=!0,this._layers[Ce]=Ne,this._removedLayers[Ce]&&Ne.source&&"custom"!==Ne.type){var et=this._removedLayers[Ce];delete this._removedLayers[Ce],et.type!==Ne.type?this._updatedSources[Ne.source]="clear":(this._updatedSources[Ne.source]="reload",this.sourceCaches[Ne.source].pause())}this._updateLayer(Ne),Ne.onAdd&&Ne.onAdd(this.map)}}},Y.prototype.moveLayer=function(q,te){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==te){var ve=this._order.indexOf(q);this._order.splice(ve,1);var Ce=te?this._order.indexOf(te):this._order.length;te&&-1===Ce?this.fire(new l.ErrorEvent(new Error('Layer with id "'+te+'" does not exist on this map.'))):(this._order.splice(Ce,0,q),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(q){this._checkLoaded();var te=this._layers[q];if(te){te.setEventedParent(null);var ve=this._order.indexOf(q);this._order.splice(ve,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=te,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],te.onRemove&&te.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(q){return this._layers[q]},Y.prototype.hasLayer=function(q){return q in this._layers},Y.prototype.setLayerZoomRange=function(q,te,ve){this._checkLoaded();var Ce=this.getLayer(q);Ce?Ce.minzoom===te&&Ce.maxzoom===ve||(null!=te&&(Ce.minzoom=te),null!=ve&&(Ce.maxzoom=ve),this._updateLayer(Ce)):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(q,te,ve){void 0===ve&&(ve={}),this._checkLoaded();var Ce=this.getLayer(q);if(Ce){if(!l.deepEqual(Ce.filter,te))return null==te?(Ce.filter=void 0,void this._updateLayer(Ce)):void(this._validate(l.validateStyle.filter,"layers."+Ce.id+".filter",te,null,ve)||(Ce.filter=l.clone$1(te),this._updateLayer(Ce)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(q){return l.clone$1(this.getLayer(q).filter)},Y.prototype.setLayoutProperty=function(q,te,ve,Ce){void 0===Ce&&(Ce={}),this._checkLoaded();var Ne=this.getLayer(q);Ne?l.deepEqual(Ne.getLayoutProperty(te),ve)||(Ne.setLayoutProperty(te,ve,Ce),this._updateLayer(Ne)):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(q,te){var ve=this.getLayer(q);if(ve)return ve.getLayoutProperty(te);this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(q,te,ve,Ce){void 0===Ce&&(Ce={}),this._checkLoaded();var Ne=this.getLayer(q);Ne?l.deepEqual(Ne.getPaintProperty(te),ve)||(Ne.setPaintProperty(te,ve,Ce)&&this._updateLayer(Ne),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(q,te){return this.getLayer(q).getPaintProperty(te)},Y.prototype.setFeatureState=function(q,te){this._checkLoaded();var ve=q.source,Ce=q.sourceLayer,Ne=this.sourceCaches[ve];if(void 0!==Ne){var qe=Ne.getSource().type;"geojson"===qe&&Ce?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==qe||Ce?(void 0===q.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Ne.setFeatureState(Ce,q.id,te)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(q,te){this._checkLoaded();var ve=q.source,Ce=this.sourceCaches[ve];if(void 0!==Ce){var Ne=Ce.getSource().type,qe="vector"===Ne?q.sourceLayer:void 0;"vector"!==Ne||qe?te&&"string"!=typeof q.id&&"number"!=typeof q.id?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Ce.removeFeatureState(qe,q.id,te):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(q){this._checkLoaded();var te=q.source,ve=q.sourceLayer,Ce=this.sourceCaches[te];if(void 0!==Ce){if("vector"!==Ce.getSource().type||ve)return void 0===q.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Ce.getFeatureState(ve,q.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return void 0!==q})},Y.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&"raster"!==this.sourceCaches[q.source].getSource().type&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(q){for(var te=this,ve=function(Yt){return"fill-extrusion"===te._layers[Yt].type},Ce={},Ne=[],qe=this._order.length-1;qe>=0;qe--){var et=this._order[qe];if(ve(et)){Ce[et]=qe;for(var vt=0,yt=q;vt<yt.length;vt+=1){var ee=yt[vt][et];if(ee)for(var ue=0,Ae=ee;ue<Ae.length;ue+=1)Ne.push(Ae[ue])}}}Ne.sort(function(Yt,en){return en.intersectionZ-Yt.intersectionZ});for(var Fe=[],Ue=this._order.length-1;Ue>=0;Ue--){var We=this._order[Ue];if(ve(We))for(var Je=Ne.length-1;Je>=0;Je--){var it=Ne[Je].feature;if(Ce[it.layer.id]<Ue)break;Fe.push(it),Ne.pop()}else for(var ut=0,St=q;ut<St.length;ut+=1){var Dt=St[ut][We];if(Dt)for(var Ft=0,Wt=Dt;Ft<Wt.length;Ft+=1)Fe.push(Wt[Ft].feature)}}return Fe},Y.prototype.queryRenderedFeatures=function(q,te,ve){te&&te.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",te.filter,null,te);var Ce={};if(te&&te.layers){if(!Array.isArray(te.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ne=0,qe=te.layers;Ne<qe.length;Ne+=1){var et=qe[Ne],vt=this._layers[et];if(!vt)return this.fire(new l.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be queried for features."))),[];Ce[vt.source]=!0}}var yt=[];for(var ee in te.availableImages=this._availableImages,this.sourceCaches)te.layers&&!Ce[ee]||yt.push(V(this.sourceCaches[ee],this._layers,this._serializedLayers,q,te,ve));return this.placement&&yt.push(function(ue,Ae,Oe,Fe,Ue,We,Je){for(var it={},ut=We.queryRenderedSymbols(Fe),St=[],Dt=0,Ft=Object.keys(ut).map(Number);Dt<Ft.length;Dt+=1)St.push(Je[Ft[Dt]]);St.sort(W);for(var cn=function(){var gn=en[Yt],$t=gn.featureIndex.lookupSymbolFeatures(ut[gn.bucketInstanceId],Ae,gn.bucketIndex,gn.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,ue);for(var On in $t){var Dn=it[On]=it[On]||[],Yn=$t[On];Yn.sort(function(ur,dr){var kr=gn.featureSortOrder;if(kr){var Vr=kr.indexOf(ur.featureIndex);return kr.indexOf(dr.featureIndex)-Vr}return dr.featureIndex-ur.featureIndex});for(var Xn=0,gr=Yn;Xn<gr.length;Xn+=1)Dn.push(gr[Xn])}},Yt=0,en=St;Yt<en.length;Yt+=1)cn();var Xt=function(gn){it[gn].forEach(function($t){var On=$t.feature,Yn=Oe[ue[gn].source].getFeatureState(On.layer["source-layer"],On.id);On.source=On.layer.source,On.layer["source-layer"]&&(On.sourceLayer=On.layer["source-layer"]),On.state=Yn})};for(var bn in it)Xt(bn);return it}(this._layers,this._serializedLayers,this.sourceCaches,q,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(yt)},Y.prototype.querySourceFeatures=function(q,te){te&&te.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",te.filter,null,te);var ve=this.sourceCaches[q];return ve?function(Ce,Ne){for(var qe=Ce.getRenderableIds().map(function(Ae){return Ce.getTileByID(Ae)}),et=[],vt={},yt=0;yt<qe.length;yt++){var ee=qe[yt],ue=ee.tileID.canonical.key;vt[ue]||(vt[ue]=!0,ee.querySourceFeatures(et,Ne))}return et}(ve,te):[]},Y.prototype.addSourceType=function(q,te,ve){return Y.getSourceType(q)?ve(new Error('A source type called "'+q+'" already exists.')):(Y.setSourceType(q,te),te.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:te.workerSourceURL},ve):ve(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(q,te){void 0===te&&(te={}),this._checkLoaded();var ve=this.light.getLight(),Ce=!1;for(var Ne in q)if(!l.deepEqual(q[Ne],ve[Ne])){Ce=!0;break}if(Ce){var qe={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,te),this.light.updateTransitions(qe)}},Y.prototype._validate=function(q,te,ve,Ce,Ne){return void 0===Ne&&(Ne={}),(!Ne||!1!==Ne.validate)&&Jn(this,q.call(l.validateStyle,l.extend({key:te,style:this.serialize(),value:ve,styleSpec:l.styleSpec},Ce)))},Y.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var te in this.sourceCaches)this.sourceCaches[te].clearTiles(),this.sourceCaches[te].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},Y.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},Y.prototype._updateSources=function(q){for(var te in this.sourceCaches)this.sourceCaches[te].update(q)},Y.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},Y.prototype._updatePlacement=function(q,te,ve,Ce,Ne){void 0===Ne&&(Ne=!1);for(var qe=!1,et=!1,vt={},yt=0,ee=this._order;yt<ee.length;yt+=1){var Ae=this._layers[ee[yt]];if("symbol"===Ae.type){if(!vt[Ae.source]){var Oe=this.sourceCaches[Ae.source];vt[Ae.source]=Oe.getRenderableIds(!0).map(function(ut){return Oe.getTileByID(ut)}).sort(function(ut,St){return St.tileID.overscaledZ-ut.tileID.overscaledZ||(ut.tileID.isLessThan(St.tileID)?-1:1)})}var Fe=this.crossTileSymbolIndex.addLayer(Ae,vt[Ae.source],q.center.lng);qe=qe||Fe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ne=Ne||this._layerOrderChanged||0===ve)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),q.zoom))&&(this.pauseablePlacement=new sn(q,this._order,Ne,te,ve,Ce,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,vt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),et=!0),qe&&this.pauseablePlacement.placement.setStale()),et||qe)for(var Ue=0,We=this._order;Ue<We.length;Ue+=1){var it=this._layers[We[Ue]];"symbol"===it.type&&this.placement.updateLayerOpacities(it,vt[it.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},Y.prototype.getImages=function(q,te,ve){this.imageManager.getImages(te.icons,ve),this._updateTilesForChangedImages();var Ce=this.sourceCaches[te.source];Ce&&Ce.setDependencies(te.tileID.key,te.type,te.icons)},Y.prototype.getGlyphs=function(q,te,ve){this.glyphManager.getGlyphs(te.stacks,ve)},Y.prototype.getResource=function(q,te,ve){return l.makeRequest(te,ve)},Y}(l.Evented);ar.getSourceType=function(D){return J[D]},ar.setSourceType=function(D,Y){J[D]=Y},ar.registerForPluginStateChange=l.registerForPluginStateChange;var cr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),br=Qr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ur=Qr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sr=Qr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),fr=Qr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Lr=Qr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),zr=Qr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),li=Qr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Mi=Qr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Pi=Qr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ea=Qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ui=Qr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),vi=Qr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),La=Qr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),to=Qr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),qo=Qr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Go=Qr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),il=Qr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Us=Qr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Zo=Qr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ta=Qr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Vs=Qr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ri=Qr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ss=Qr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ma=Qr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ka=Qr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),vo=Qr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Qr(D,Y){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,te={};return{fragmentSource:D=D.replace(q,function(ve,Ce,Ne,qe,et){return te[et]=!0,"define"===Ce?"\n#ifndef HAS_UNIFORM_u_"+et+"\nvarying "+Ne+" "+qe+" "+et+";\n#else\nuniform "+Ne+" "+qe+" u_"+et+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+et+"\n    "+Ne+" "+qe+" "+et+" = u_"+et+";\n#endif\n"}),vertexSource:Y=Y.replace(q,function(ve,Ce,Ne,qe,et){var vt="float"===qe?"vec2":"vec4",yt=et.match(/color/)?"color":vt;return te[et]?"define"===Ce?"\n#ifndef HAS_UNIFORM_u_"+et+"\nuniform lowp float u_"+et+"_t;\nattribute "+Ne+" "+vt+" a_"+et+";\nvarying "+Ne+" "+qe+" "+et+";\n#else\nuniform "+Ne+" "+qe+" u_"+et+";\n#endif\n":"vec4"===yt?"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+et+" = a_"+et+";\n#else\n    "+Ne+" "+qe+" "+et+" = u_"+et+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+et+" = unpack_mix_"+yt+"(a_"+et+", u_"+et+"_t);\n#else\n    "+Ne+" "+qe+" "+et+" = u_"+et+";\n#endif\n":"define"===Ce?"\n#ifndef HAS_UNIFORM_u_"+et+"\nuniform lowp float u_"+et+"_t;\nattribute "+Ne+" "+vt+" a_"+et+";\n#else\nuniform "+Ne+" "+qe+" u_"+et+";\n#endif\n":"vec4"===yt?"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+Ne+" "+qe+" "+et+" = a_"+et+";\n#else\n    "+Ne+" "+qe+" "+et+" = u_"+et+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+Ne+" "+qe+" "+et+" = unpack_mix_"+yt+"(a_"+et+", u_"+et+"_t);\n#else\n    "+Ne+" "+qe+" "+et+" = u_"+et+";\n#endif\n"})}}var mo=Object.freeze({__proto__:null,prelude:br,background:Ur,backgroundPattern:Sr,circle:fr,clippingMask:Lr,heatmap:zr,heatmapTexture:li,collisionBox:Mi,collisionCircle:Pi,debug:Ea,fill:Ui,fillOutline:vi,fillOutlinePattern:La,fillPattern:to,fillExtrusion:qo,fillExtrusionPattern:Go,hillshadePrepare:il,hillshade:Us,line:Zo,lineGradient:Ta,linePattern:Vs,lineSDF:Ri,raster:ss,symbolIcon:ma,symbolSDF:ka,symbolTextAndIcon:vo}),Ca=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ca.prototype.bind=function(D,Y,q,te,ve,Ce,Ne,qe){this.context=D;for(var et=this.boundPaintVertexBuffers.length!==te.length,vt=0;!et&&vt<te.length;vt++)this.boundPaintVertexBuffers[vt]!==te[vt]&&(et=!0);D.extVertexArrayObject&&this.vao&&this.boundProgram===Y&&this.boundLayoutVertexBuffer===q&&!et&&this.boundIndexBuffer===ve&&this.boundVertexOffset===Ce&&this.boundDynamicVertexBuffer===Ne&&this.boundDynamicVertexBuffer2===qe?(D.bindVertexArrayOES.set(this.vao),Ne&&Ne.bind(),ve&&ve.dynamicDraw&&ve.bind(),qe&&qe.bind()):this.freshBind(Y,q,te,ve,Ce,Ne,qe)},Ca.prototype.freshBind=function(D,Y,q,te,ve,Ce,Ne){var qe,et=D.numAttributes,vt=this.context,yt=vt.gl;if(vt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=vt.extVertexArrayObject.createVertexArrayOES(),vt.bindVertexArrayOES.set(this.vao),qe=0,this.boundProgram=D,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=te,this.boundVertexOffset=ve,this.boundDynamicVertexBuffer=Ce,this.boundDynamicVertexBuffer2=Ne;else{qe=vt.currentNumAttributes||0;for(var ee=et;ee<qe;ee++)yt.disableVertexAttribArray(ee)}Y.enableAttributes(yt,D);for(var ue=0,Ae=q;ue<Ae.length;ue+=1)Ae[ue].enableAttributes(yt,D);Ce&&Ce.enableAttributes(yt,D),Ne&&Ne.enableAttributes(yt,D),Y.bind(),Y.setVertexAttribPointers(yt,D,ve);for(var Oe=0,Fe=q;Oe<Fe.length;Oe+=1){var Ue=Fe[Oe];Ue.bind(),Ue.setVertexAttribPointers(yt,D,ve)}Ce&&(Ce.bind(),Ce.setVertexAttribPointers(yt,D,ve)),te&&te.bind(),Ne&&(Ne.bind(),Ne.setVertexAttribPointers(yt,D,ve)),vt.currentNumAttributes=et},Ca.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ua=function(D,Y,q,te,ve){var Ce=D.gl;this.program=Ce.createProgram();var Ne=q?q.defines():[];ve&&Ne.push("#define OVERDRAW_INSPECTOR;");var qe=Ne.concat(br.fragmentSource,Y.fragmentSource).join("\n"),et=Ne.concat(br.vertexSource,Y.vertexSource).join("\n"),vt=Ce.createShader(Ce.FRAGMENT_SHADER);if(Ce.isContextLost())this.failedToCreate=!0;else{Ce.shaderSource(vt,qe),Ce.compileShader(vt),Ce.attachShader(this.program,vt);var yt=Ce.createShader(Ce.VERTEX_SHADER);if(Ce.isContextLost())this.failedToCreate=!0;else{Ce.shaderSource(yt,et),Ce.compileShader(yt),Ce.attachShader(this.program,yt);for(var ee=q?q.layoutAttributes:[],ue=0;ue<ee.length;ue++)Ce.bindAttribLocation(this.program,ue,ee[ue].name);Ce.linkProgram(this.program),Ce.deleteShader(yt),Ce.deleteShader(vt),this.numAttributes=Ce.getProgramParameter(this.program,Ce.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ae={},Oe=0;Oe<this.numAttributes;Oe++){var Fe=Ce.getActiveAttrib(this.program,Oe);Fe&&(this.attributes[Fe.name]=Ce.getAttribLocation(this.program,Fe.name))}for(var Ue=Ce.getProgramParameter(this.program,Ce.ACTIVE_UNIFORMS),We=0;We<Ue;We++){var Je=Ce.getActiveUniform(this.program,We);Je&&(Ae[Je.name]=Ce.getUniformLocation(this.program,Je.name))}this.fixedUniforms=te(D,Ae),this.binderUniforms=q?q.getUniforms(D,Ae):[]}}};function Ya(D,Y,q){var te=1/Gn(q,1,Y.transform.tileZoom),ve=Math.pow(2,q.tileID.overscaledZ),Ce=q.tileSize*Math.pow(2,Y.transform.tileZoom)/ve,Ne=Ce*(q.tileID.canonical.x+q.tileID.wrap*ve),qe=Ce*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[te,D.fromScale,D.toScale],u_fade:D.t,u_pixel_coord_upper:[Ne>>16,qe>>16],u_pixel_coord_lower:[65535&Ne,65535&qe]}}Ua.prototype.draw=function(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt,ee,ue,Ae,Oe,Fe){var Ue,We=D.gl;if(!this.failedToCreate){for(var Je in D.program.set(this.program),D.setDepthMode(q),D.setStencilMode(te),D.setColorMode(ve),D.setCullFace(Ce),this.fixedUniforms)this.fixedUniforms[Je].set(Ne[Je]);Ae&&Ae.setUniforms(D,this.binderUniforms,ee,{zoom:ue});for(var it=(Ue={},Ue[We.LINES]=2,Ue[We.TRIANGLES]=3,Ue[We.LINE_STRIP]=1,Ue)[Y],ut=0,St=yt.get();ut<St.length;ut+=1){var Dt=St[ut],Ft=Dt.vaos||(Dt.vaos={});(Ft[qe]||(Ft[qe]=new Ca)).bind(D,this,et,Ae?Ae.getPaintVertexBuffers():[],vt,Dt.vertexOffset,Oe,Fe),We.drawElements(Y,Dt.primitiveLength*it,We.UNSIGNED_SHORT,Dt.primitiveOffset*it*2)}}};var ls=function(D,Y,q,te){var ve=Y.style.light,Ce=ve.properties.get("position"),Ne=[Ce.x,Ce.y,Ce.z],qe=l.create$1();"viewport"===ve.properties.get("anchor")&&l.fromRotation(qe,-Y.transform.angle),l.transformMat3(Ne,Ne,qe);var et=ve.properties.get("color");return{u_matrix:D,u_lightpos:Ne,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[et.r,et.g,et.b],u_vertical_gradient:+q,u_opacity:te}},al=function(D,Y,q,te,ve,Ce,Ne){return l.extend(ls(D,Y,q,te),Ya(Ce,Y,Ne),{u_height_factor:-Math.pow(2,ve.overscaledZ)/Ne.tileSize/8})},no=function(D){return{u_matrix:D}},ol=function(D,Y,q,te){return l.extend(no(D),Ya(q,Y,te))},sl=function(D,Y){return{u_matrix:D,u_world:Y}},ml=function(D,Y,q,te,ve){return l.extend(ol(D,Y,q,te),{u_world:ve})},Hs=function(D,Y,q,te){var ve,Ce,Ne=D.transform;if("map"===te.paint.get("circle-pitch-alignment")){var qe=Gn(q,1,Ne.zoom);ve=!0,Ce=[qe,qe]}else ve=!1,Ce=Ne.pixelsToGLUnits;return{u_camera_to_center_distance:Ne.cameraToCenterDistance,u_scale_with_map:+("map"===te.paint.get("circle-pitch-scale")),u_matrix:D.translatePosMatrix(Y.posMatrix,q,te.paint.get("circle-translate"),te.paint.get("circle-translate-anchor")),u_pitch_with_map:+ve,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Ce}},ll=function(D,Y,q){var te=Gn(q,1,Y.zoom),ve=Math.pow(2,Y.zoom-q.tileID.overscaledZ),Ce=q.tileID.overscaleFactor();return{u_matrix:D,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:te,u_extrude_scale:[Y.pixelsToGLUnits[0]/(te*ve),Y.pixelsToGLUnits[1]/(te*ve)],u_overscale_factor:Ce}},qs=function(D,Y,q){return{u_matrix:D,u_inv_matrix:Y,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},ro=function(D,Y,q){return void 0===q&&(q=1),{u_matrix:D,u_color:Y,u_overlay:0,u_overlay_scale:q}},io=function(D){return{u_matrix:D}},Wo=function(D,Y,q,te){return{u_matrix:D,u_extrude_scale:Gn(Y,1,q),u_intensity:te}},ao=function(D,Y,q){var te=D.transform;return{u_matrix:yo(D,Y,q),u_ratio:1/Gn(Y,1,te.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/te.pixelsToGLUnits[0],1/te.pixelsToGLUnits[1]]}},Gs=function(D,Y,q){return l.extend(ao(D,Y,q),{u_image:0})},Zs=function(D,Y,q,te){var ve=D.transform,Ce=Ms(Y,ve);return{u_matrix:yo(D,Y,q),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/Gn(Y,1,ve.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Ce,te.fromScale,te.toScale],u_fade:te.t,u_units_to_pixels:[1/ve.pixelsToGLUnits[0],1/ve.pixelsToGLUnits[1]]}},Co=function(D,Y,q,te,ve){var Ne=D.lineAtlas,qe=Ms(Y,D.transform),et="round"===q.layout.get("line-cap"),vt=Ne.getDash(te.from,et),yt=Ne.getDash(te.to,et),ee=vt.width*ve.fromScale,ue=yt.width*ve.toScale;return l.extend(ao(D,Y,q),{u_patternscale_a:[qe/ee,-vt.height/2],u_patternscale_b:[qe/ue,-yt.height/2],u_sdfgamma:Ne.width/(256*Math.min(ee,ue)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:vt.y,u_tex_y_b:yt.y,u_mix:ve.t})};function Ms(D,Y){return 1/Gn(D,1,Y.tileZoom)}function yo(D,Y,q){return D.translatePosMatrix(Y.tileID.posMatrix,Y,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var Yo=function(D,Y,q,te,ve){return{u_matrix:D,u_tl_parent:Y,u_scale_parent:q,u_buffer_scale:1,u_fade_t:te.mix,u_opacity:te.opacity*ve.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ve.paint.get("raster-brightness-min"),u_brightness_high:ve.paint.get("raster-brightness-max"),u_saturation_factor:(Ne=ve.paint.get("raster-saturation"),Ne>0?1-1/(1.001-Ne):-Ne),u_contrast_factor:(Ce=ve.paint.get("raster-contrast"),Ce>0?1/(1-Ce):1+Ce),u_spin_weights:Po(ve.paint.get("raster-hue-rotate"))};var Ce,Ne};function Po(D){D*=Math.PI/180;var Y=Math.sin(D),q=Math.cos(D);return[(2*q+1)/3,(-Math.sqrt(3)*Y-q+1)/3,(Math.sqrt(3)*Y-q+1)/3]}var oo,ei=function(D,Y,q,te,ve,Ce,Ne,qe,et,vt){var yt=ve.transform;return{u_is_size_zoom_constant:+("constant"===D||"source"===D),u_is_size_feature_constant:+("constant"===D||"camera"===D),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:yt.cameraToCenterDistance,u_pitch:yt.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:yt.width/yt.height,u_fade_change:ve.options.fadeDuration?ve.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:Ne,u_coord_matrix:qe,u_is_text:+et,u_pitch_with_map:+te,u_texsize:vt,u_texture:0}},xo=function(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt){var ee=ve.transform;return l.extend(ei(D,Y,q,te,ve,Ce,Ne,qe,et,vt),{u_gamma_scale:te?Math.cos(ee._pitch)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+yt})},yl=function(D,Y,q,te,ve,Ce,Ne,qe,et,vt){return l.extend(xo(D,Y,q,te,ve,Ce,Ne,qe,!0,et,!0),{u_texsize_icon:vt,u_texture_icon:1})},Ss=function(D,Y,q){return{u_matrix:D,u_opacity:Y,u_color:q}},us=function(D,Y,q,te,ve,Ce){return l.extend((qe=Ce,vt=ve,yt=(et=q).imageManager.getPattern((Ne=te).from.toString()),ee=et.imageManager.getPattern(Ne.to.toString()),Ae=(ue=et.imageManager.getPixelSize()).width,Oe=ue.height,Fe=Math.pow(2,vt.tileID.overscaledZ),We=(Ue=vt.tileSize*Math.pow(2,et.transform.tileZoom)/Fe)*(vt.tileID.canonical.x+vt.tileID.wrap*Fe),Je=Ue*vt.tileID.canonical.y,{u_image:0,u_pattern_tl_a:yt.tl,u_pattern_br_a:yt.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[Ae,Oe],u_mix:qe.t,u_pattern_size_a:yt.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:qe.fromScale,u_scale_b:qe.toScale,u_tile_units_to_pixels:1/Gn(vt,1,et.transform.tileZoom),u_pixel_coord_upper:[We>>16,Je>>16],u_pixel_coord_lower:[65535&We,65535&Je]}),{u_matrix:D,u_opacity:Y});var Ne,qe,et,vt,yt,ee,ue,Ae,Oe,Fe,Ue,We,Je},Oo={fillExtrusion:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_lightpos:new l.Uniform3f(D,Y.u_lightpos),u_lightintensity:new l.Uniform1f(D,Y.u_lightintensity),u_lightcolor:new l.Uniform3f(D,Y.u_lightcolor),u_vertical_gradient:new l.Uniform1f(D,Y.u_vertical_gradient),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},fillExtrusionPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_lightpos:new l.Uniform3f(D,Y.u_lightpos),u_lightintensity:new l.Uniform1f(D,Y.u_lightintensity),u_lightcolor:new l.Uniform3f(D,Y.u_lightcolor),u_vertical_gradient:new l.Uniform1f(D,Y.u_vertical_gradient),u_height_factor:new l.Uniform1f(D,Y.u_height_factor),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},fill:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},fillPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},fillOutline:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world)}},fillOutlinePattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},circle:function(D,Y){return{u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(D,Y.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(D,Y.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},collisionBox:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(D,Y.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(D,Y.u_extrude_scale),u_overscale_factor:new l.Uniform1f(D,Y.u_overscale_factor)}},collisionCircle:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_inv_matrix:new l.UniformMatrix4f(D,Y.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(D,Y.u_viewport_size)}},debug:function(D,Y){return{u_color:new l.UniformColor(D,Y.u_color),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_overlay:new l.Uniform1i(D,Y.u_overlay),u_overlay_scale:new l.Uniform1f(D,Y.u_overlay_scale)}},clippingMask:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},heatmap:function(D,Y){return{u_extrude_scale:new l.Uniform1f(D,Y.u_extrude_scale),u_intensity:new l.Uniform1f(D,Y.u_intensity),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},heatmapTexture:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world),u_image:new l.Uniform1i(D,Y.u_image),u_color_ramp:new l.Uniform1i(D,Y.u_color_ramp),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},hillshade:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_latrange:new l.Uniform2f(D,Y.u_latrange),u_light:new l.Uniform2f(D,Y.u_light),u_shadow:new l.UniformColor(D,Y.u_shadow),u_highlight:new l.UniformColor(D,Y.u_highlight),u_accent:new l.UniformColor(D,Y.u_accent)}},hillshadePrepare:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_dimension:new l.Uniform2f(D,Y.u_dimension),u_zoom:new l.Uniform1f(D,Y.u_zoom),u_maxzoom:new l.Uniform1f(D,Y.u_maxzoom),u_unpack:new l.Uniform4f(D,Y.u_unpack)}},line:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels)}},lineGradient:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_image:new l.Uniform1i(D,Y.u_image)}},linePattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_image:new l.Uniform1i(D,Y.u_image),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},lineSDF:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(D,Y.u_patternscale_a),u_patternscale_b:new l.Uniform2f(D,Y.u_patternscale_b),u_sdfgamma:new l.Uniform1f(D,Y.u_sdfgamma),u_image:new l.Uniform1i(D,Y.u_image),u_tex_y_a:new l.Uniform1f(D,Y.u_tex_y_a),u_tex_y_b:new l.Uniform1f(D,Y.u_tex_y_b),u_mix:new l.Uniform1f(D,Y.u_mix)}},raster:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_tl_parent:new l.Uniform2f(D,Y.u_tl_parent),u_scale_parent:new l.Uniform1f(D,Y.u_scale_parent),u_buffer_scale:new l.Uniform1f(D,Y.u_buffer_scale),u_fade_t:new l.Uniform1f(D,Y.u_fade_t),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_image0:new l.Uniform1i(D,Y.u_image0),u_image1:new l.Uniform1i(D,Y.u_image1),u_brightness_low:new l.Uniform1f(D,Y.u_brightness_low),u_brightness_high:new l.Uniform1f(D,Y.u_brightness_high),u_saturation_factor:new l.Uniform1f(D,Y.u_saturation_factor),u_contrast_factor:new l.Uniform1f(D,Y.u_contrast_factor),u_spin_weights:new l.Uniform3f(D,Y.u_spin_weights)}},symbolIcon:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texture:new l.Uniform1i(D,Y.u_texture)}},symbolSDF:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texture:new l.Uniform1i(D,Y.u_texture),u_gamma_scale:new l.Uniform1f(D,Y.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(D,Y.u_is_halo)}},symbolTextAndIcon:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texsize_icon:new l.Uniform2f(D,Y.u_texsize_icon),u_texture:new l.Uniform1i(D,Y.u_texture),u_texture_icon:new l.Uniform1i(D,Y.u_texture_icon),u_gamma_scale:new l.Uniform1f(D,Y.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(D,Y.u_is_halo)}},background:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_color:new l.UniformColor(D,Y.u_color)}},backgroundPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_image:new l.Uniform1i(D,Y.u_image),u_pattern_tl_a:new l.Uniform2f(D,Y.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(D,Y.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(D,Y.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(D,Y.u_pattern_br_b),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_mix:new l.Uniform1f(D,Y.u_mix),u_pattern_size_a:new l.Uniform2f(D,Y.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(D,Y.u_pattern_size_b),u_scale_a:new l.Uniform1f(D,Y.u_scale_a),u_scale_b:new l.Uniform1f(D,Y.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(D,Y.u_tile_units_to_pixels)}}};function Xo(D,Y,q,te,ve,Ce,Ne){for(var qe=D.context,et=qe.gl,vt=D.useProgram("collisionBox"),yt=[],ee=0,ue=0,Ae=0;Ae<te.length;Ae++){var Oe=te[Ae],Fe=Y.getTile(Oe),Ue=Fe.getBucket(q);if(Ue){var We=Oe.posMatrix;0===ve[0]&&0===ve[1]||(We=D.translatePosMatrix(Oe.posMatrix,Fe,ve,Ce));var Je=Ne?Ue.textCollisionBox:Ue.iconCollisionBox,it=Ue.collisionCircleArray;if(it.length>0){var ut=l.create(),St=We;l.mul(ut,Ue.placementInvProjMatrix,D.transform.glCoordMatrix),l.mul(ut,ut,Ue.placementViewportMatrix),yt.push({circleArray:it,circleOffset:ue,transform:St,invTransform:ut}),ue=ee+=it.length/4}Je&&vt.draw(qe,et.LINES,Ht.disabled,Ge.disabled,D.colorModeForRenderPass(),Be.disabled,ll(We,D.transform,Fe),q.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,D.transform.zoom,null,null,Je.collisionVertexBuffer)}}if(Ne&&yt.length){var Dt=D.useProgram("collisionCircle"),Ft=new l.StructArrayLayout2f1f2i16;Ft.resize(4*ee),Ft._trim();for(var Wt=0,cn=0,Yt=yt;cn<Yt.length;cn+=1)for(var en=Yt[cn],Xt=0;Xt<en.circleArray.length/4;Xt++){var bn=4*Xt,gn=en.circleArray[bn+0],$t=en.circleArray[bn+1],On=en.circleArray[bn+2],Dn=en.circleArray[bn+3];Ft.emplace(Wt++,gn,$t,On,Dn,0),Ft.emplace(Wt++,gn,$t,On,Dn,1),Ft.emplace(Wt++,gn,$t,On,Dn,2),Ft.emplace(Wt++,gn,$t,On,Dn,3)}(!oo||oo.length<2*ee)&&(oo=function(kr){var Vr=2*kr,Hr=new l.StructArrayLayout3ui6;Hr.resize(Vr),Hr._trim();for(var hr=0;hr<Vr;hr++){var Ar=6*hr;Hr.uint16[Ar+0]=4*hr+0,Hr.uint16[Ar+1]=4*hr+1,Hr.uint16[Ar+2]=4*hr+2,Hr.uint16[Ar+3]=4*hr+2,Hr.uint16[Ar+4]=4*hr+3,Hr.uint16[Ar+5]=4*hr+0}return Hr}(ee));for(var Yn=qe.createIndexBuffer(oo,!0),Xn=qe.createVertexBuffer(Ft,l.collisionCircleLayout.members,!0),gr=0,vr=yt;gr<vr.length;gr+=1){var ur=vr[gr],dr=qs(ur.transform,ur.invTransform,D.transform);Dt.draw(qe,et.TRIANGLES,Ht.disabled,Ge.disabled,D.colorModeForRenderPass(),Be.disabled,dr,q.id,Xn,Yn,l.SegmentVector.simpleSegment(0,2*ur.circleOffset,ur.circleArray.length,ur.circleArray.length/2),null,D.transform.zoom,null,null,null)}Xn.destroy(),Yn.destroy()}}var Pa=l.identity(new Float32Array(16));function Ws(D,Y,q,te,ve,Ce){var Ne=l.getAnchorAlignment(D),qe=-(Ne.horizontalAlign-.5)*Y,et=-(Ne.verticalAlign-.5)*q,vt=l.evaluateVariableOffset(D,te);return new l.Point((qe/ve+vt[0])*Ce,(et/ve+vt[1])*Ce)}function cs(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt){var ee=D.text.placedSymbolArray,ue=D.text.dynamicLayoutVertexArray,Ae=D.icon.dynamicLayoutVertexArray,Oe={};ue.clear();for(var Fe=0;Fe<ee.length;Fe++){var Ue=ee.get(Fe),Je=Ue.hidden||!Ue.crossTileID||D.allowVerticalPlacement&&!Ue.placedOrientation?null:te[Ue.crossTileID];if(Je){var it=new l.Point(Ue.anchorX,Ue.anchorY),ut=on(it,q?qe:Ne),St=pn(Ce.cameraToCenterDistance,ut.signedDistanceFromCamera),Dt=ve.evaluateSizeForFeature(D.textSizeData,vt,Ue)*St/l.ONE_EM;q&&(Dt*=D.tilePixelRatio/et);for(var cn=Ws(Je.anchor,Je.width,Je.height,Je.textOffset,Je.textBoxScale,Dt),Yt=q?on(it.add(cn),Ne).point:ut.point.add(Y?cn.rotate(-Ce.angle):cn),en=D.allowVerticalPlacement&&Ue.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,Xt=0;Xt<Ue.numGlyphs;Xt++)l.addDynamicAttributes(ue,Yt,en);yt&&Ue.associatedIconIndex>=0&&(Oe[Ue.associatedIconIndex]={shiftedAnchor:Yt,angle:en})}else Kn(Ue.numGlyphs,ue)}if(yt){Ae.clear();for(var bn=D.icon.placedSymbolArray,gn=0;gn<bn.length;gn++){var $t=bn.get(gn);if($t.hidden)Kn($t.numGlyphs,Ae);else{var On=Oe[gn];if(On)for(var Dn=0;Dn<$t.numGlyphs;Dn++)l.addDynamicAttributes(Ae,On.shiftedAnchor,On.angle);else Kn($t.numGlyphs,Ae)}}D.icon.dynamicLayoutVertexBuffer.updateData(Ae)}D.text.dynamicLayoutVertexBuffer.updateData(ue)}function Jo(D,Y,q){return q.iconsInText&&Y?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon"}function fs(D,Y,q,te,ve,Ce,Ne,qe,et,vt,yt,ee){for(var ue=D.context,Ae=ue.gl,Oe=D.transform,Fe="map"===qe,Ue="map"===et,We=Fe&&"point"!==q.layout.get("symbol-placement"),Je=Fe&&!Ue&&!We,it=void 0!==q.layout.get("symbol-sort-key").constantOr(1),ut=D.depthModeForSublayer(0,Ht.ReadOnly),St=q.layout.get("text-variable-anchor"),Dt=[],Ft=0,Wt=te;Ft<Wt.length;Ft+=1){var cn=Wt[Ft],Yt=Y.getTile(cn),en=Yt.getBucket(q);if(en){var Xt=ve?en.text:en.icon;if(Xt&&Xt.segments.get().length){var bn=Xt.programConfigurations.get(q.id),gn=ve||en.sdfIcons,$t=ve?en.textSizeData:en.iconSizeData,On=Ue||0!==Oe.pitch,Dn=D.useProgram(Jo(gn,ve,en),bn),Yn=l.evaluateSizeForZoom($t,Oe.zoom),Xn=void 0,gr=[0,0],vr=void 0,ur=void 0,dr=null,kr=void 0;if(ve)vr=Yt.glyphAtlasTexture,ur=Ae.LINEAR,Xn=Yt.glyphAtlasTexture.size,en.iconsInText&&(gr=Yt.imageAtlasTexture.size,dr=Yt.imageAtlasTexture,kr=On||D.options.rotating||D.options.zooming||"composite"===$t.kind||"camera"===$t.kind?Ae.LINEAR:Ae.NEAREST);else{var Hr=1!==q.layout.get("icon-size").constantOr(0)||en.iconsNeedLinear;vr=Yt.imageAtlasTexture,ur=gn||D.options.rotating||D.options.zooming||Hr||On?Ae.LINEAR:Ae.NEAREST,Xn=Yt.imageAtlasTexture.size}var hr=Gn(Yt,1,D.transform.zoom),Ar=Fn(cn.posMatrix,Ue,Fe,D.transform,hr),Dr=yn(cn.posMatrix,Ue,Fe,D.transform,hr),Rr=St&&en.hasTextData(),Wr="none"!==q.layout.get("icon-text-fit")&&Rr&&en.hasIconData();We&&dn(en,cn.posMatrix,D,ve,Ar,Dr,Ue,vt);var Zr=D.translatePosMatrix(cn.posMatrix,Yt,Ce,Ne),$r=We||ve&&St||Wr?Pa:Ar,ui=D.translatePosMatrix(Dr,Yt,Ce,Ne,!0),yi=gn&&0!==q.paint.get(ve?"text-halo-width":"icon-halo-width").constantOr(1),hi={program:Dn,buffers:Xt,uniformValues:gn?en.iconsInText?yl($t.kind,Yn,Je,Ue,D,Zr,$r,ui,Xn,gr):xo($t.kind,Yn,Je,Ue,D,Zr,$r,ui,ve,Xn,!0):ei($t.kind,Yn,Je,Ue,D,Zr,$r,ui,ve,Xn),atlasTexture:vr,atlasTextureIcon:dr,atlasInterpolation:ur,atlasInterpolationIcon:kr,isSDF:gn,hasHalo:yi};if(it)for(var si=0,ci=Xt.segments.get();si<ci.length;si+=1){var pi=ci[si];Dt.push({segments:new l.SegmentVector([pi]),sortKey:pi.sortKey,state:hi})}else Dt.push({segments:Xt.segments,sortKey:0,state:hi})}}}it&&Dt.sort(function(Qi,ki){return Qi.sortKey-ki.sortKey});for(var Si=0,Mo=Dt;Si<Mo.length;Si+=1){var Fi=Mo[Si],Br=Fi.state;if(ue.activeTexture.set(Ae.TEXTURE0),Br.atlasTexture.bind(Br.atlasInterpolation,Ae.CLAMP_TO_EDGE),Br.atlasTextureIcon&&(ue.activeTexture.set(Ae.TEXTURE1),Br.atlasTextureIcon&&Br.atlasTextureIcon.bind(Br.atlasInterpolationIcon,Ae.CLAMP_TO_EDGE)),Br.isSDF){var Gi=Br.uniformValues;Br.hasHalo&&(Gi.u_is_halo=1,Io(Br.buffers,Fi.segments,q,D,Br.program,ut,yt,ee,Gi)),Gi.u_is_halo=0}Io(Br.buffers,Fi.segments,q,D,Br.program,ut,yt,ee,Br.uniformValues)}}function Io(D,Y,q,te,ve,Ce,Ne,qe,et){var vt=te.context;ve.draw(vt,vt.gl.TRIANGLES,Ce,Ne,qe,Be.disabled,et,q.id,D.layoutVertexBuffer,D.indexBuffer,Y,q.paint,te.transform.zoom,D.programConfigurations.get(q.id),D.dynamicLayoutVertexBuffer,D.opacityVertexBuffer)}function zo(D,Y,q,te,ve,Ce,Ne){var qe,et,vt,yt,ee,ue=D.context.gl,Ae=q.paint.get("fill-pattern"),Oe=Ae&&Ae.constantOr(1),Fe=q.getCrossfadeParameters();Ne?(et=Oe&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=ue.LINES):(et=Oe?"fillPattern":"fill",qe=ue.TRIANGLES);for(var Ue=0,We=te;Ue<We.length;Ue+=1){var Je=We[Ue],it=Y.getTile(Je);if(!Oe||it.patternsLoaded()){var ut=it.getBucket(q);if(ut){var St=ut.programConfigurations.get(q.id),Dt=D.useProgram(et,St);Oe&&(D.context.activeTexture.set(ue.TEXTURE0),it.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),St.updatePaintBuffers(Fe));var Ft=Ae.constantOr(null);if(Ft&&it.imageAtlas){var Wt=it.imageAtlas,cn=Wt.patternPositions[Ft.to.toString()],Yt=Wt.patternPositions[Ft.from.toString()];cn&&Yt&&St.setConstantPatternPositions(cn,Yt)}var en=D.translatePosMatrix(Je.posMatrix,it,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(Ne){yt=ut.indexBuffer2,ee=ut.segments2;var Xt=[ue.drawingBufferWidth,ue.drawingBufferHeight];vt="fillOutlinePattern"===et&&Oe?ml(en,D,Fe,it,Xt):sl(en,Xt)}else yt=ut.indexBuffer,ee=ut.segments,vt=Oe?ol(en,D,Fe,it):no(en);Dt.draw(D.context,qe,ve,D.stencilModeForClipping(Je),Ce,Be.disabled,vt,q.id,ut.layoutVertexBuffer,yt,ee,q.paint,D.transform.zoom,St)}}}}function Ko(D,Y,q,te,ve,Ce,Ne){for(var qe=D.context,et=qe.gl,vt=q.paint.get("fill-extrusion-pattern"),yt=vt.constantOr(1),ee=q.getCrossfadeParameters(),ue=q.paint.get("fill-extrusion-opacity"),Ae=0,Oe=te;Ae<Oe.length;Ae+=1){var Fe=Oe[Ae],Ue=Y.getTile(Fe),We=Ue.getBucket(q);if(We){var Je=We.programConfigurations.get(q.id),it=D.useProgram(yt?"fillExtrusionPattern":"fillExtrusion",Je);yt&&(D.context.activeTexture.set(et.TEXTURE0),Ue.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Je.updatePaintBuffers(ee));var ut=vt.constantOr(null);if(ut&&Ue.imageAtlas){var St=Ue.imageAtlas,Dt=St.patternPositions[ut.to.toString()],Ft=St.patternPositions[ut.from.toString()];Dt&&Ft&&Je.setConstantPatternPositions(Dt,Ft)}var Wt=D.translatePosMatrix(Fe.posMatrix,Ue,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),cn=q.paint.get("fill-extrusion-vertical-gradient"),Yt=yt?al(Wt,D,cn,ue,Fe,ee,Ue):ls(Wt,D,cn,ue);it.draw(qe,qe.gl.TRIANGLES,ve,Ce,Ne,Be.backCCW,Yt,q.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,q.paint,D.transform.zoom,Je)}}}function hs(D,Y,q,te,ve,Ce){var Ne=D.context,qe=Ne.gl,et=Y.fbo;if(et){var vt=D.useProgram("hillshade");Ne.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,et.colorAttachment.get());var yt=function(ee,ue,Ae){var Oe=Ae.paint.get("hillshade-shadow-color"),Fe=Ae.paint.get("hillshade-highlight-color"),Ue=Ae.paint.get("hillshade-accent-color"),We=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ae.paint.get("hillshade-illumination-anchor")&&(We-=ee.transform.angle);var Je,it,ut,St=!ee.options.moving;return{u_matrix:ee.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),St),u_image:0,u_latrange:(Je=ue.tileID,it=Math.pow(2,Je.canonical.z),ut=Je.canonical.y,[new l.MercatorCoordinate(0,ut/it).toLngLat().lat,new l.MercatorCoordinate(0,(ut+1)/it).toLngLat().lat]),u_light:[Ae.paint.get("hillshade-exaggeration"),We],u_shadow:Oe,u_highlight:Fe,u_accent:Ue}}(D,Y,q);vt.draw(Ne,qe.TRIANGLES,te,ve,Ce,Be.disabled,yt,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}}function ps(D,Y,q,te,ve,Ce,Ne){var Ue,We,Je,it,ut,qe=D.context,et=qe.gl,vt=Y.dem;if(vt&&vt.data){var yt=vt.dim,ee=vt.stride,ue=vt.getPixels();if(qe.activeTexture.set(et.TEXTURE1),qe.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||D.getTileTexture(ee),Y.demTexture){var Ae=Y.demTexture;Ae.update(ue,{premultiply:!1}),Ae.bind(et.NEAREST,et.CLAMP_TO_EDGE)}else Y.demTexture=new l.Texture(qe,ue,et.RGBA,{premultiply:!1}),Y.demTexture.bind(et.NEAREST,et.CLAMP_TO_EDGE);qe.activeTexture.set(et.TEXTURE0);var Oe=Y.fbo;if(!Oe){var Fe=new l.Texture(qe,{width:yt,height:yt,data:null},et.RGBA);Fe.bind(et.LINEAR,et.CLAMP_TO_EDGE),(Oe=Y.fbo=qe.createFramebuffer(yt,yt,!0)).colorAttachment.set(Fe.texture)}qe.bindFramebuffer.set(Oe.framebuffer),qe.viewport.set([0,0,yt,yt]),D.useProgram("hillshadePrepare").draw(qe,et.TRIANGLES,ve,Ce,Ne,Be.disabled,(Ue=Y.tileID,Je=te,it=(We=vt).stride,ut=l.create(),l.ortho(ut,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ut,ut,[0,-l.EXTENT,0]),{u_matrix:ut,u_image:1,u_dimension:[it,it],u_zoom:Ue.overscaledZ,u_maxzoom:Je,u_unpack:We.getUnpackVector()}),q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Oa(D,Y,q,te,ve){var Ce=te.paint.get("raster-fade-duration");if(Ce>0){var Ne=l.browser.now(),qe=(Ne-D.timeAdded)/Ce,et=Y?(Ne-Y.timeAdded)/Ce:-1,vt=q.getSource(),yt=ve.coveringZoomLevel({tileSize:vt.tileSize,roundZoom:vt.roundZoom}),ee=!Y||Math.abs(Y.tileID.overscaledZ-yt)>Math.abs(D.tileID.overscaledZ-yt),ue=ee&&D.refreshedUponExpiration?1:l.clamp(ee?qe:1-et,0,1);return D.refreshedUponExpiration&&qe>=1&&(D.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}var ds=new l.Color(1,0,0,1),gs=new l.Color(0,1,0,1),Ys=new l.Color(0,0,1,1),bo=new l.Color(1,0,1,1),Es=new l.Color(0,1,1,1);function Xs(D,Y,q,te){$o(D,0,Y+q/2,D.transform.width,q,te)}function ms(D,Y,q,te){$o(D,Y-q/2,0,q,D.transform.height,te)}function $o(D,Y,q,te,ve,Ce){var Ne=D.context,qe=Ne.gl;qe.enable(qe.SCISSOR_TEST),qe.scissor(Y*l.browser.devicePixelRatio,q*l.browser.devicePixelRatio,te*l.browser.devicePixelRatio,ve*l.browser.devicePixelRatio),Ne.clear({color:Ce}),qe.disable(qe.SCISSOR_TEST)}function Ro(D,Y,q){var te=D.context,ve=te.gl,Ce=q.posMatrix,Ne=D.useProgram("debug"),qe=Ht.disabled,et=Ge.disabled,vt=D.colorModeForRenderPass();te.activeTexture.set(ve.TEXTURE0),D.emptyTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Ne.draw(te,ve.LINE_STRIP,qe,et,vt,Be.disabled,ro(Ce,l.Color.red),"$debug",D.debugBuffer,D.tileBorderIndexBuffer,D.debugSegments);var ee=Y.getTileByID(q.key).latestRawTileData,Ae=Math.floor((ee&&ee.byteLength||0)/1024),Oe=Y.getTile(q).tileSize,Fe=512/Math.min(Oe,512)*(q.overscaledZ/D.transform.zoom)*.5,Ue=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(Ue+=" => "+q.overscaledZ),function(We,Je){We.initDebugOverlayCanvas();var it=We.debugOverlayCanvas,ut=We.context.gl,St=We.debugOverlayCanvas.getContext("2d");St.clearRect(0,0,it.width,it.height),St.shadowColor="white",St.shadowBlur=2,St.lineWidth=1.5,St.strokeStyle="white",St.textBaseline="top",St.font="bold 36px Open Sans, sans-serif",St.fillText(Je,5,5),St.strokeText(Je,5,5),We.debugOverlayTexture.update(it),We.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(D,Ue+" "+Ae+"kb"),Ne.draw(te,ve.TRIANGLES,qe,et,Ze.alphaBlended,Be.disabled,ro(Ce,l.Color.transparent,Fe),"$debug",D.debugBuffer,D.quadTriangleIndexBuffer,D.debugSegments)}var Do={symbol:function(D,Y,q,te,ve){if("translucent"===D.renderPass){var Ce=Ge.disabled,Ne=D.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(qe,et,vt,yt,ee,ue,Ae){for(var Oe=et.transform,Fe="map"===ee,Ue="map"===ue,We=0,Je=qe;We<Je.length;We+=1){var it=Je[We],ut=yt.getTile(it),St=ut.getBucket(vt);if(St&&St.text&&St.text.segments.get().length){var Ft=l.evaluateSizeForZoom(St.textSizeData,Oe.zoom),Wt=Gn(ut,1,et.transform.zoom),cn=Fn(it.posMatrix,Ue,Fe,et.transform,Wt),Yt="none"!==vt.layout.get("icon-text-fit")&&St.hasIconData();if(Ft){var en=Math.pow(2,Oe.zoom-ut.tileID.overscaledZ);cs(St,Fe,Ue,Ae,l.symbolSize,Oe,cn,it.posMatrix,en,Ft,Yt)}}}}(te,D,q,Y,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),ve),0!==q.paint.get("icon-opacity").constantOr(1)&&fs(D,Y,q,te,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Ce,Ne),0!==q.paint.get("text-opacity").constantOr(1)&&fs(D,Y,q,te,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Ce,Ne),Y.map.showCollisionBoxes&&(Xo(D,Y,q,te,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Xo(D,Y,q,te,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(D,Y,q,te){if("translucent"===D.renderPass){var ve=q.paint.get("circle-opacity"),Ce=q.paint.get("circle-stroke-width"),Ne=q.paint.get("circle-stroke-opacity"),qe=void 0!==q.layout.get("circle-sort-key").constantOr(1);if(0!==ve.constantOr(1)||0!==Ce.constantOr(1)&&0!==Ne.constantOr(1)){for(var et=D.context,vt=et.gl,yt=D.depthModeForSublayer(0,Ht.ReadOnly),ee=Ge.disabled,ue=D.colorModeForRenderPass(),Ae=[],Oe=0;Oe<te.length;Oe++){var Fe=te[Oe],Ue=Y.getTile(Fe),We=Ue.getBucket(q);if(We){var Je=We.programConfigurations.get(q.id),it={programConfiguration:Je,program:D.useProgram("circle",Je),layoutVertexBuffer:We.layoutVertexBuffer,indexBuffer:We.indexBuffer,uniformValues:Hs(D,Fe,Ue,q)};if(qe)for(var ut=0,St=We.segments.get();ut<St.length;ut+=1){var Dt=St[ut];Ae.push({segments:new l.SegmentVector([Dt]),sortKey:Dt.sortKey,state:it})}else Ae.push({segments:We.segments,sortKey:0,state:it})}}qe&&Ae.sort(function(Dn,Yn){return Dn.sortKey-Yn.sortKey});for(var Ft=0,Wt=Ae;Ft<Wt.length;Ft+=1){var cn=Wt[Ft],Yt=cn.state;Yt.program.draw(et,vt.TRIANGLES,yt,ee,ue,Be.disabled,Yt.uniformValues,q.id,Yt.layoutVertexBuffer,Yt.indexBuffer,cn.segments,q.paint,D.transform.zoom,Yt.programConfiguration)}}}},heatmap:function(D,Y,q,te){if(0!==q.paint.get("heatmap-opacity"))if("offscreen"===D.renderPass){var ve=D.context,Ce=ve.gl,Ne=Ge.disabled,qe=new Ze([Ce.ONE,Ce.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Fe,Ue,We){var Je=Fe.gl;Fe.activeTexture.set(Je.TEXTURE1),Fe.viewport.set([0,0,Ue.width/4,Ue.height/4]);var St,Dt,Ft,Wt,cn,it=We.heatmapFbo;if(it)Je.bindTexture(Je.TEXTURE_2D,it.colorAttachment.get()),Fe.bindFramebuffer.set(it.framebuffer);else{var ut=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,ut),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),Ft=ut,Wt=it=We.heatmapFbo=Fe.createFramebuffer(Ue.width/4,Ue.height/4,!1),(cn=(St=Fe).gl).texImage2D(cn.TEXTURE_2D,0,cn.RGBA,(Dt=Ue).width/4,Dt.height/4,0,cn.RGBA,St.extRenderToTextureHalfFloat?St.extTextureHalfFloat.HALF_FLOAT_OES:cn.UNSIGNED_BYTE,null),Wt.colorAttachment.set(Ft)}})(ve,D,q),ve.clear({color:l.Color.transparent});for(var et=0;et<te.length;et++){var vt=te[et];if(!Y.hasRenderableParent(vt)){var yt=Y.getTile(vt),ee=yt.getBucket(q);if(ee){var ue=ee.programConfigurations.get(q.id);D.useProgram("heatmap",ue).draw(ve,Ce.TRIANGLES,Ht.disabled,Ne,qe,Be.disabled,Wo(vt.posMatrix,yt,D.transform.zoom,q.paint.get("heatmap-intensity")),q.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,q.paint,D.transform.zoom,ue)}}}ve.viewport.set([0,0,D.width,D.height])}else"translucent"===D.renderPass&&(D.context.setColorMode(D.colorModeForRenderPass()),function(Fe,Ue){var We=Fe.context,Je=We.gl,it=Ue.heatmapFbo;if(it){We.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_2D,it.colorAttachment.get()),We.activeTexture.set(Je.TEXTURE1);var ut=Ue.colorRampTexture;ut||(ut=Ue.colorRampTexture=new l.Texture(We,Ue.colorRamp,Je.RGBA)),ut.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Fe.useProgram("heatmapTexture").draw(We,Je.TRIANGLES,Ht.disabled,Ge.disabled,Fe.colorModeForRenderPass(),Be.disabled,function(St,Dt,Ft,Wt){var cn=l.create();l.ortho(cn,0,St.width,St.height,0,0,1);var Yt=St.context.gl;return{u_matrix:cn,u_world:[Yt.drawingBufferWidth,Yt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Dt.paint.get("heatmap-opacity")}}(Fe,Ue),Ue.id,Fe.viewportBuffer,Fe.quadTriangleIndexBuffer,Fe.viewportSegments,Ue.paint,Fe.transform.zoom)}}(D,q))},line:function(D,Y,q,te){if("translucent"===D.renderPass){var ve=q.paint.get("line-opacity"),Ce=q.paint.get("line-width");if(0!==ve.constantOr(1)&&0!==Ce.constantOr(1)){var Ne=D.depthModeForSublayer(0,Ht.ReadOnly),qe=D.colorModeForRenderPass(),et=q.paint.get("line-dasharray"),vt=q.paint.get("line-pattern"),yt=vt.constantOr(1),ee=q.paint.get("line-gradient"),ue=q.getCrossfadeParameters(),Ae=yt?"linePattern":et?"lineSDF":ee?"lineGradient":"line",Oe=D.context,Fe=Oe.gl,Ue=!0;if(ee){Oe.activeTexture.set(Fe.TEXTURE0);var We=q.gradientTexture;if(!q.gradient)return;We||(We=q.gradientTexture=new l.Texture(Oe,q.gradient,Fe.RGBA)),We.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}for(var Je=0,it=te;Je<it.length;Je+=1){var ut=it[Je],St=Y.getTile(ut);if(!yt||St.patternsLoaded()){var Dt=St.getBucket(q);if(Dt){var Ft=Dt.programConfigurations.get(q.id),Wt=D.context.program.get(),cn=D.useProgram(Ae,Ft),Yt=Ue||cn.program!==Wt,en=vt.constantOr(null);if(en&&St.imageAtlas){var Xt=St.imageAtlas,bn=Xt.patternPositions[en.to.toString()],gn=Xt.patternPositions[en.from.toString()];bn&&gn&&Ft.setConstantPatternPositions(bn,gn)}var $t=yt?Zs(D,St,q,ue):et?Co(D,St,q,et,ue):ee?Gs(D,St,q):ao(D,St,q);yt?(Oe.activeTexture.set(Fe.TEXTURE0),St.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ft.updatePaintBuffers(ue)):et&&(Yt||D.lineAtlas.dirty)&&(Oe.activeTexture.set(Fe.TEXTURE0),D.lineAtlas.bind(Oe)),cn.draw(Oe,Fe.TRIANGLES,Ne,D.stencilModeForClipping(ut),qe,Be.disabled,$t,q.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,q.paint,D.transform.zoom,Ft),Ue=!1}}}}}},fill:function(D,Y,q,te){var ve=q.paint.get("fill-color"),Ce=q.paint.get("fill-opacity");if(0!==Ce.constantOr(1)){var Ne=D.colorModeForRenderPass(),qe=q.paint.get("fill-pattern"),et=D.opaquePassEnabledForLayer()&&!qe.constantOr(1)&&1===ve.constantOr(l.Color.transparent).a&&1===Ce.constantOr(0)?"opaque":"translucent";if(D.renderPass===et){var vt=D.depthModeForSublayer(1,"opaque"===D.renderPass?Ht.ReadWrite:Ht.ReadOnly);zo(D,Y,q,te,vt,Ne,!1)}if("translucent"===D.renderPass&&q.paint.get("fill-antialias")){var yt=D.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ht.ReadOnly);zo(D,Y,q,te,yt,Ne,!0)}}},"fill-extrusion":function(D,Y,q,te){var ve=q.paint.get("fill-extrusion-opacity");if(0!==ve&&"translucent"===D.renderPass){var Ce=new Ht(D.context.gl.LEQUAL,Ht.ReadWrite,D.depthRangeFor3D);if(1!==ve||q.paint.get("fill-extrusion-pattern").constantOr(1))Ko(D,Y,q,te,Ce,Ge.disabled,Ze.disabled),Ko(D,Y,q,te,Ce,D.stencilModeFor3D(),D.colorModeForRenderPass());else{var Ne=D.colorModeForRenderPass();Ko(D,Y,q,te,Ce,Ge.disabled,Ne)}}},hillshade:function(D,Y,q,te){if("offscreen"===D.renderPass||"translucent"===D.renderPass){for(var ve=D.context,Ce=Y.getSource().maxzoom,Ne=D.depthModeForSublayer(0,Ht.ReadOnly),qe=D.colorModeForRenderPass(),et="translucent"===D.renderPass?D.stencilConfigForOverlap(te):[{},te],vt=et[0],yt=0,ee=et[1];yt<ee.length;yt+=1){var ue=ee[yt],Ae=Y.getTile(ue);Ae.needsHillshadePrepare&&"offscreen"===D.renderPass?ps(D,Ae,q,Ce,Ne,Ge.disabled,qe):"translucent"===D.renderPass&&hs(D,Ae,q,Ne,vt[ue.overscaledZ],qe)}ve.viewport.set([0,0,D.width,D.height])}},raster:function(D,Y,q,te){if("translucent"===D.renderPass&&0!==q.paint.get("raster-opacity")&&te.length)for(var ve=D.context,Ce=ve.gl,Ne=Y.getSource(),qe=D.useProgram("raster"),et=D.colorModeForRenderPass(),vt=Ne instanceof U?[{},te]:D.stencilConfigForOverlap(te),yt=vt[0],ee=vt[1],ue=ee[ee.length-1].overscaledZ,Ae=!D.options.moving,Oe=0,Fe=ee;Oe<Fe.length;Oe+=1){var Ue=Fe[Oe],We=D.depthModeForSublayer(Ue.overscaledZ-ue,1===q.paint.get("raster-opacity")?Ht.ReadWrite:Ht.ReadOnly,Ce.LESS),Je=Y.getTile(Ue),it=D.transform.calculatePosMatrix(Ue.toUnwrapped(),Ae);Je.registerFadeDuration(q.paint.get("raster-fade-duration"));var ut=Y.findLoadedParent(Ue,0),St=Oa(Je,ut,Y,q,D.transform),Dt=void 0,Ft=void 0,Wt="nearest"===q.paint.get("raster-resampling")?Ce.NEAREST:Ce.LINEAR;ve.activeTexture.set(Ce.TEXTURE0),Je.texture.bind(Wt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ce.TEXTURE1),ut?(ut.texture.bind(Wt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,ut.tileID.overscaledZ-Je.tileID.overscaledZ),Ft=[Je.tileID.canonical.x*Dt%1,Je.tileID.canonical.y*Dt%1]):Je.texture.bind(Wt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var cn=Yo(it,Ft||[0,0],Dt||1,St,q);Ne instanceof U?qe.draw(ve,Ce.TRIANGLES,We,Ge.disabled,et,Be.disabled,cn,q.id,Ne.boundsBuffer,D.quadTriangleIndexBuffer,Ne.boundsSegments):qe.draw(ve,Ce.TRIANGLES,We,yt[Ue.overscaledZ],et,Be.disabled,cn,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}},background:function(D,Y,q){var te=q.paint.get("background-color"),ve=q.paint.get("background-opacity");if(0!==ve){var Ce=D.context,Ne=Ce.gl,qe=D.transform,et=qe.tileSize,vt=q.paint.get("background-pattern");if(!D.isPatternMissing(vt)){var yt=!vt&&1===te.a&&1===ve&&D.opaquePassEnabledForLayer()?"opaque":"translucent";if(D.renderPass===yt){var ee=Ge.disabled,ue=D.depthModeForSublayer(0,"opaque"===yt?Ht.ReadWrite:Ht.ReadOnly),Ae=D.colorModeForRenderPass(),Oe=D.useProgram(vt?"backgroundPattern":"background"),Fe=qe.coveringTiles({tileSize:et});vt&&(Ce.activeTexture.set(Ne.TEXTURE0),D.imageManager.bind(D.context));for(var Ue=q.getCrossfadeParameters(),We=0,Je=Fe;We<Je.length;We+=1){var it=Je[We],ut=D.transform.calculatePosMatrix(it.toUnwrapped()),St=vt?us(ut,ve,D,vt,{tileID:it,tileSize:et},Ue):Ss(ut,ve,te);Oe.draw(Ce,Ne.TRIANGLES,ue,ee,Ae,Be.disabled,St,q.id,D.tileExtentBuffer,D.quadTriangleIndexBuffer,D.tileExtentSegments)}}}}},debug:function(D,Y,q){for(var te=0;te<q.length;te++)Ro(D,Y,q[te])},custom:function(D,Y,q){var te=D.context,ve=q.implementation;if("offscreen"===D.renderPass){var Ce=ve.prerender;Ce&&(D.setCustomLayerDefaults(),te.setColorMode(D.colorModeForRenderPass()),Ce.call(ve,te.gl,D.transform.customLayerMatrix()),te.setDirty(),D.setBaseState())}else if("translucent"===D.renderPass){D.setCustomLayerDefaults(),te.setColorMode(D.colorModeForRenderPass()),te.setStencilMode(Ge.disabled);var Ne="3d"===ve.renderingMode?new Ht(D.context.gl.LEQUAL,Ht.ReadWrite,D.depthRangeFor3D):D.depthModeForSublayer(0,Ht.ReadOnly);te.setDepthMode(Ne),ve.render(te.gl,D.transform.customLayerMatrix()),te.setDirty(),D.setBaseState(),te.bindFramebuffer.set(null)}}},ai=function(D,Y){this.context=new Ye(D),this.transform=Y,this._tileTextures={},this.setup(),this.numSublayers=rt.maxUnderzooming+rt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zn,this.gpuTimers={}};ai.prototype.resize=function(D,Y){if(this.width=D*l.browser.devicePixelRatio,this.height=Y*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,te=this.style._order;q<te.length;q+=1)this.style._layers[te[q]].resize()},ai.prototype.setup=function(){var D=this.context,Y=new l.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(l.EXTENT,0),Y.emplaceBack(0,l.EXTENT),Y.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=D.createVertexBuffer(Y,cr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var q=new l.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(l.EXTENT,0),q.emplaceBack(0,l.EXTENT),q.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=D.createVertexBuffer(q,cr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var te=new l.StructArrayLayout4i8;te.emplaceBack(0,0,0,0),te.emplaceBack(l.EXTENT,0,l.EXTENT,0),te.emplaceBack(0,l.EXTENT,0,l.EXTENT),te.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=D.createVertexBuffer(te,F.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var ve=new l.StructArrayLayout2i4;ve.emplaceBack(0,0),ve.emplaceBack(1,0),ve.emplaceBack(0,1),ve.emplaceBack(1,1),this.viewportBuffer=D.createVertexBuffer(ve,cr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Ce=new l.StructArrayLayout1ui2;Ce.emplaceBack(0),Ce.emplaceBack(1),Ce.emplaceBack(3),Ce.emplaceBack(2),Ce.emplaceBack(0),this.tileBorderIndexBuffer=D.createIndexBuffer(Ce);var Ne=new l.StructArrayLayout3ui6;Ne.emplaceBack(0,1,2),Ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=D.createIndexBuffer(Ne),this.emptyTexture=new l.Texture(D,{width:1,height:1,data:new Uint8Array([0,0,0,0])},D.gl.RGBA);var qe=this.context.gl;this.stencilClearMode=new Ge({func:qe.ALWAYS,mask:0},0,255,qe.ZERO,qe.ZERO,qe.ZERO)},ai.prototype.clearStencil=function(){var D=this.context,Y=D.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=l.create();l.ortho(q,0,this.width,this.height,0,0,1),l.scale(q,q,[Y.drawingBufferWidth,Y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(D,Y.TRIANGLES,Ht.disabled,this.stencilClearMode,Ze.disabled,Be.disabled,io(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ai.prototype._renderTileClippingMasks=function(D,Y){if(this.currentStencilSource!==D.source&&D.isTileClipped()&&Y&&Y.length){this.currentStencilSource=D.source;var q=this.context,te=q.gl;this.nextStencilID+Y.length>256&&this.clearStencil(),q.setColorMode(Ze.disabled),q.setDepthMode(Ht.disabled);var ve=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ce=0,Ne=Y;Ce<Ne.length;Ce+=1){var qe=Ne[Ce],et=this._tileClippingMaskIDs[qe.key]=this.nextStencilID++;ve.draw(q,te.TRIANGLES,Ht.disabled,new Ge({func:te.ALWAYS,mask:0},et,255,te.KEEP,te.KEEP,te.REPLACE),Ze.disabled,Be.disabled,io(qe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ai.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var D=this.nextStencilID++,Y=this.context.gl;return new Ge({func:Y.NOTEQUAL,mask:255},D,255,Y.KEEP,Y.KEEP,Y.REPLACE)},ai.prototype.stencilModeForClipping=function(D){var Y=this.context.gl;return new Ge({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[D.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)},ai.prototype.stencilConfigForOverlap=function(D){var Y,q=this.context.gl,te=D.sort(function(et,vt){return vt.overscaledZ-et.overscaledZ}),ve=te[te.length-1].overscaledZ,Ce=te[0].overscaledZ-ve+1;if(Ce>1){this.currentStencilSource=void 0,this.nextStencilID+Ce>256&&this.clearStencil();for(var Ne={},qe=0;qe<Ce;qe++)Ne[qe+ve]=new Ge({func:q.GEQUAL,mask:255},qe+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Ce,[Ne,te]}return[(Y={},Y[ve]=Ge.disabled,Y),te]},ai.prototype.colorModeForRenderPass=function(){var D=this.context.gl;if(this._showOverdrawInspector){var Y=.125;return new Ze([D.CONSTANT_COLOR,D.ONE],new l.Color(Y,Y,Y,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Ze.unblended:Ze.alphaBlended},ai.prototype.depthModeForSublayer=function(D,Y,q){if(!this.opaquePassEnabledForLayer())return Ht.disabled;var te=1-((1+this.currentLayer)*this.numSublayers+D)*this.depthEpsilon;return new Ht(q||this.context.gl.LEQUAL,Y,[te,te])},ai.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ai.prototype.render=function(D,Y){var q=this;this.style=D,this.options=Y,this.lineAtlas=D.lineAtlas,this.imageManager=D.imageManager,this.glyphManager=D.glyphManager,this.symbolFadeChange=D.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var te=this.style._order,ve=this.style.sourceCaches;for(var Ce in ve){var Ne=ve[Ce];Ne.used&&Ne.prepare(this.context)}var qe,et,vt={},yt={},ee={};for(var ue in ve){var Ae=ve[ue];vt[ue]=Ae.getVisibleCoordinates(),yt[ue]=vt[ue].slice().reverse(),ee[ue]=Ae.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<te.length;Oe++)if(this.style._layers[te[Oe]].is3D()){this.opaquePassCutoff=Oe;break}this.renderPass="offscreen";for(var Ue=0,We=te;Ue<We.length;Ue+=1){var it=this.style._layers[We[Ue]];if(it.hasOffscreenPass()&&!it.isHidden(this.transform.zoom)){var ut=yt[it.source];("custom"===it.type||ut.length)&&this.renderLayer(this,ve[it.source],it,ut)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:Y.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(D._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=te.length-1;this.currentLayer>=0;this.currentLayer--){var St=this.style._layers[te[this.currentLayer]],Dt=ve[St.source],Ft=vt[St.source];this._renderTileClippingMasks(St,Ft),this.renderLayer(this,Dt,St,Ft)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<te.length;this.currentLayer++){var Wt=this.style._layers[te[this.currentLayer]],cn=ve[Wt.source],Yt=("symbol"===Wt.type?ee:yt)[Wt.source];this._renderTileClippingMasks(Wt,vt[Wt.source]),this.renderLayer(this,cn,Wt,Yt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(en){en.source&&!en.isHidden(q.transform.zoom)&&(en.source!==(et&&et.id)&&(et=q.style.sourceCaches[en.source]),(!qe||qe.getSource().maxzoom<et.getSource().maxzoom)&&(qe=et))}),qe&&Do.debug(this,qe,qe.getVisibleCoordinates())),this.options.showPadding&&function vs(D){var Y=D.transform.padding;Xs(D,D.transform.height-(Y.top||0),3,ds),Xs(D,Y.bottom||0,3,gs),ms(D,Y.left||0,3,Ys),ms(D,D.transform.width-(Y.right||0),3,bo);var te,ve,Ce,Ne,q=D.transform.centerPoint;$o(te=D,(ve=q.x)-1,(Ce=D.transform.height-q.y)-10,2,20,Ne=Es),$o(te,ve-10,Ce-1,20,2,Ne)}(this),this.context.setDefault()},ai.prototype.renderLayer=function(D,Y,q,te){q.isHidden(this.transform.zoom)||("background"===q.type||"custom"===q.type||te.length)&&(this.id=q.id,this.gpuTimingStart(q),Do[q.type](D,Y,q,te,this.style.placement.variableOffsets),this.gpuTimingEnd())},ai.prototype.gpuTimingStart=function(D){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,q=this.gpuTimers[D.id];q||(q=this.gpuTimers[D.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()}),q.calls++,Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,q.query)}},ai.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var D=this.context.extTimerQuery;D.endQueryEXT(D.TIME_ELAPSED_EXT)}},ai.prototype.collectGpuTimers=function(){var D=this.gpuTimers;return this.gpuTimers={},D},ai.prototype.queryGpuTimers=function(D){var Y={};for(var q in D){var te=D[q],ve=this.context.extTimerQuery,Ce=ve.getQueryObjectEXT(te.query,ve.QUERY_RESULT_EXT)/1e6;ve.deleteQueryEXT(te.query),Y[q]=Ce}return Y},ai.prototype.translatePosMatrix=function(D,Y,q,te,ve){if(!q[0]&&!q[1])return D;var Ce=ve?"map"===te?this.transform.angle:0:"viewport"===te?-this.transform.angle:0;if(Ce){var Ne=Math.sin(Ce),qe=Math.cos(Ce);q=[q[0]*qe-q[1]*Ne,q[0]*Ne+q[1]*qe]}var et=[ve?q[0]:Gn(Y,q[0],this.transform.zoom),ve?q[1]:Gn(Y,q[1],this.transform.zoom),0],vt=new Float32Array(16);return l.translate(vt,D,et),vt},ai.prototype.saveTileTexture=function(D){var Y=this._tileTextures[D.size[0]];Y?Y.push(D):this._tileTextures[D.size[0]]=[D]},ai.prototype.getTileTexture=function(D){var Y=this._tileTextures[D];return Y&&Y.length>0?Y.pop():null},ai.prototype.isPatternMissing=function(D){if(!D)return!1;if(!D.from||!D.to)return!0;var Y=this.imageManager.getPattern(D.from.toString()),q=this.imageManager.getPattern(D.to.toString());return!Y||!q},ai.prototype.useProgram=function(D,Y){this.cache=this.cache||{};var q=""+D+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Ua(this.context,mo[D],Y,Oo[D],this._showOverdrawInspector)),this.cache[q]},ai.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ai.prototype.setBaseState=function(){var D=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(D.FUNC_ADD)},ai.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ai.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _o=function(D,Y){this.points=D,this.planes=Y};_o.fromInvProjectionMatrix=function(D,Y,q){var te=Math.pow(2,q),ve=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ne){return l.transformMat4([],Ne,D)}).map(function(Ne){return l.scale$1([],Ne,1/Ne[3]/Y*te)}),Ce=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ne){var qe=l.sub([],ve[Ne[0]],ve[Ne[1]]),et=l.sub([],ve[Ne[2]],ve[Ne[1]]),vt=l.normalize([],l.cross([],qe,et)),yt=-l.dot(vt,ve[Ne[1]]);return vt.concat(yt)});return new _o(ve,Ce)};var wo=function(D,Y){this.min=D,this.max=Y,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};wo.prototype.quadrant=function(D){for(var Y=[D%2==0,D<2],q=l.clone$2(this.min),te=l.clone$2(this.max),ve=0;ve<Y.length;ve++)q[ve]=Y[ve]?this.min[ve]:this.center[ve],te[ve]=Y[ve]?this.center[ve]:this.max[ve];return te[2]=this.max[2],new wo(q,te)},wo.prototype.distanceX=function(D){return Math.max(Math.min(this.max[0],D[0]),this.min[0])-D[0]},wo.prototype.distanceY=function(D){return Math.max(Math.min(this.max[1],D[1]),this.min[1])-D[1]},wo.prototype.intersects=function(D){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,te=0;te<D.planes.length;te++){for(var ve=D.planes[te],Ce=0,Ne=0;Ne<Y.length;Ne++)Ce+=l.dot$1(ve,Y[Ne])>=0;if(0===Ce)return 0;Ce!==Y.length&&(q=!1)}if(q)return 2;for(var qe=0;qe<3;qe++){for(var et=Number.MAX_VALUE,vt=-Number.MAX_VALUE,yt=0;yt<D.points.length;yt++){var ee=D.points[yt][qe]-this.min[qe];et=Math.min(et,ee),vt=Math.max(vt,ee)}if(vt<0||et>this.max[qe]-this.min[qe])return 0}return 1};var Zi=function(D,Y,q,te){if(void 0===D&&(D=0),void 0===Y&&(Y=0),void 0===q&&(q=0),void 0===te&&(te=0),isNaN(D)||D<0||isNaN(Y)||Y<0||isNaN(q)||q<0||isNaN(te)||te<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=D,this.bottom=Y,this.left=q,this.right=te};Zi.prototype.interpolate=function(D,Y,q){return null!=Y.top&&null!=D.top&&(this.top=l.number(D.top,Y.top,q)),null!=Y.bottom&&null!=D.bottom&&(this.bottom=l.number(D.bottom,Y.bottom,q)),null!=Y.left&&null!=D.left&&(this.left=l.number(D.left,Y.left,q)),null!=Y.right&&null!=D.right&&(this.right=l.number(D.right,Y.right,q)),this},Zi.prototype.getCenter=function(D,Y){var q=l.clamp((this.left+D-this.right)/2,0,D),te=l.clamp((this.top+Y-this.bottom)/2,0,Y);return new l.Point(q,te)},Zi.prototype.equals=function(D){return this.top===D.top&&this.bottom===D.bottom&&this.left===D.left&&this.right===D.right},Zi.prototype.clone=function(){return new Zi(this.top,this.bottom,this.left,this.right)},Zi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Xr=function(D,Y,q,te,ve){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ve||ve,this._minZoom=D||0,this._maxZoom=Y||22,this._minPitch=q??0,this._maxPitch=te??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Kr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Xr.prototype.clone=function(){var D=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return D.tileSize=this.tileSize,D.latRange=this.latRange,D.width=this.width,D.height=this.height,D._center=this._center,D.zoom=this.zoom,D.angle=this.angle,D._fov=this._fov,D._pitch=this._pitch,D._unmodified=this._unmodified,D._edgeInsets=this._edgeInsets.clone(),D._calcMatrices(),D},Kr.minZoom.get=function(){return this._minZoom},Kr.minZoom.set=function(D){this._minZoom!==D&&(this._minZoom=D,this.zoom=Math.max(this.zoom,D))},Kr.maxZoom.get=function(){return this._maxZoom},Kr.maxZoom.set=function(D){this._maxZoom!==D&&(this._maxZoom=D,this.zoom=Math.min(this.zoom,D))},Kr.minPitch.get=function(){return this._minPitch},Kr.minPitch.set=function(D){this._minPitch!==D&&(this._minPitch=D,this.pitch=Math.max(this.pitch,D))},Kr.maxPitch.get=function(){return this._maxPitch},Kr.maxPitch.set=function(D){this._maxPitch!==D&&(this._maxPitch=D,this.pitch=Math.min(this.pitch,D))},Kr.renderWorldCopies.get=function(){return this._renderWorldCopies},Kr.renderWorldCopies.set=function(D){void 0===D?D=!0:null===D&&(D=!1),this._renderWorldCopies=D},Kr.worldSize.get=function(){return this.tileSize*this.scale},Kr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Kr.size.get=function(){return new l.Point(this.width,this.height)},Kr.bearing.get=function(){return-this.angle/Math.PI*180},Kr.bearing.set=function(D){var Y=-l.wrap(D,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Kr.pitch.get=function(){return this._pitch/Math.PI*180},Kr.pitch.set=function(D){var Y=l.clamp(D,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Kr.fov.get=function(){return this._fov/Math.PI*180},Kr.fov.set=function(D){D=Math.max(.01,Math.min(60,D)),this._fov!==D&&(this._unmodified=!1,this._fov=D/180*Math.PI,this._calcMatrices())},Kr.zoom.get=function(){return this._zoom},Kr.zoom.set=function(D){var Y=Math.min(Math.max(D,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Kr.center.get=function(){return this._center},Kr.center.set=function(D){D.lat===this._center.lat&&D.lng===this._center.lng||(this._unmodified=!1,this._center=D,this._constrain(),this._calcMatrices())},Kr.padding.get=function(){return this._edgeInsets.toJSON()},Kr.padding.set=function(D){this._edgeInsets.equals(D)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,D,1),this._calcMatrices())},Kr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Xr.prototype.isPaddingEqual=function(D){return this._edgeInsets.equals(D)},Xr.prototype.interpolatePadding=function(D,Y,q){this._unmodified=!1,this._edgeInsets.interpolate(D,Y,q),this._constrain(),this._calcMatrices()},Xr.prototype.coveringZoomLevel=function(D){var Y=(D.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/D.tileSize));return Math.max(0,Y)},Xr.prototype.getVisibleUnwrappedCoordinates=function(D){var Y=[new l.UnwrappedTileID(0,D)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new l.Point(0,0)),te=this.pointCoordinate(new l.Point(this.width,0)),ve=this.pointCoordinate(new l.Point(this.width,this.height)),Ce=this.pointCoordinate(new l.Point(0,this.height)),Ne=Math.floor(Math.min(q.x,te.x,ve.x,Ce.x)),qe=Math.floor(Math.max(q.x,te.x,ve.x,Ce.x)),et=Ne-1;et<=qe+1;et++)0!==et&&Y.push(new l.UnwrappedTileID(et,D));return Y},Xr.prototype.coveringTiles=function(D){var Y=this.coveringZoomLevel(D),q=Y;if(void 0!==D.minzoom&&Y<D.minzoom)return[];void 0!==D.maxzoom&&Y>D.maxzoom&&(Y=D.maxzoom);var te=l.MercatorCoordinate.fromLngLat(this.center),ve=Math.pow(2,Y),Ce=[ve*te.x,ve*te.y,0],Ne=_o.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),qe=D.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(qe=Y);var et=function(Yt){return{aabb:new wo([Yt*ve,0,0],[(Yt+1)*ve,ve,0]),zoom:0,x:0,y:0,wrap:Yt,fullyVisible:!1}},vt=[],yt=[],ee=Y,ue=D.reparseOverscaled?q:Y;if(this._renderWorldCopies)for(var Ae=1;Ae<=3;Ae++)vt.push(et(-Ae)),vt.push(et(Ae));for(vt.push(et(0));vt.length>0;){var Oe=vt.pop(),Fe=Oe.x,Ue=Oe.y,We=Oe.fullyVisible;if(!We){var Je=Oe.aabb.intersects(Ne);if(0===Je)continue;We=2===Je}var it=Oe.aabb.distanceX(Ce),ut=Oe.aabb.distanceY(Ce),St=Math.max(Math.abs(it),Math.abs(ut));if(Oe.zoom===ee||St>3+(1<<ee-Oe.zoom)-2&&Oe.zoom>=qe)yt.push({tileID:new l.OverscaledTileID(Oe.zoom===ee?ue:Oe.zoom,Oe.wrap,Oe.zoom,Fe,Ue),distanceSq:l.sqrLen([Ce[0]-.5-Fe,Ce[1]-.5-Ue])});else for(var Ft=0;Ft<4;Ft++){var Wt=(Fe<<1)+Ft%2,cn=(Ue<<1)+(Ft>>1);vt.push({aabb:Oe.aabb.quadrant(Ft),zoom:Oe.zoom+1,x:Wt,y:cn,wrap:Oe.wrap,fullyVisible:We})}}return yt.sort(function(Yt,en){return Yt.distanceSq-en.distanceSq}).map(function(Yt){return Yt.tileID})},Xr.prototype.resize=function(D,Y){this.width=D,this.height=Y,this.pixelsToGLUnits=[2/D,-2/Y],this._constrain(),this._calcMatrices()},Kr.unmodified.get=function(){return this._unmodified},Xr.prototype.zoomScale=function(D){return Math.pow(2,D)},Xr.prototype.scaleZoom=function(D){return Math.log(D)/Math.LN2},Xr.prototype.project=function(D){var Y=l.clamp(D.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(D.lng)*this.worldSize,l.mercatorYfromLat(Y)*this.worldSize)},Xr.prototype.unproject=function(D){return new l.MercatorCoordinate(D.x/this.worldSize,D.y/this.worldSize).toLngLat()},Kr.point.get=function(){return this.project(this.center)},Xr.prototype.setLocationAtPoint=function(D,Y){var q=this.pointCoordinate(Y),te=this.pointCoordinate(this.centerPoint),ve=this.locationCoordinate(D),Ce=new l.MercatorCoordinate(ve.x-(q.x-te.x),ve.y-(q.y-te.y));this.center=this.coordinateLocation(Ce),this._renderWorldCopies&&(this.center=this.center.wrap())},Xr.prototype.locationPoint=function(D){return this.coordinatePoint(this.locationCoordinate(D))},Xr.prototype.pointLocation=function(D){return this.coordinateLocation(this.pointCoordinate(D))},Xr.prototype.locationCoordinate=function(D){return l.MercatorCoordinate.fromLngLat(D)},Xr.prototype.coordinateLocation=function(D){return D.toLngLat()},Xr.prototype.pointCoordinate=function(D){var Y=[D.x,D.y,0,1],q=[D.x,D.y,1,1];l.transformMat4(Y,Y,this.pixelMatrixInverse),l.transformMat4(q,q,this.pixelMatrixInverse);var te=Y[3],ve=q[3],qe=Y[1]/te,et=q[1]/ve,vt=Y[2]/te,yt=q[2]/ve,ee=vt===yt?0:(0-vt)/(yt-vt);return new l.MercatorCoordinate(l.number(Y[0]/te,q[0]/ve,ee)/this.worldSize,l.number(qe,et,ee)/this.worldSize)},Xr.prototype.coordinatePoint=function(D){var Y=[D.x*this.worldSize,D.y*this.worldSize,0,1];return l.transformMat4(Y,Y,this.pixelMatrix),new l.Point(Y[0]/Y[3],Y[1]/Y[3])},Xr.prototype.getBounds=function(){return(new l.LngLatBounds).extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Xr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Xr.prototype.setMaxBounds=function(D){D?(this.lngRange=[D.getWest(),D.getEast()],this.latRange=[D.getSouth(),D.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Xr.prototype.calculatePosMatrix=function(D,Y){void 0===Y&&(Y=!1);var q=D.key,te=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(te[q])return te[q];var ve=D.canonical,Ce=this.worldSize/this.zoomScale(ve.z),Ne=ve.x+Math.pow(2,ve.z)*D.wrap,qe=l.identity(new Float64Array(16));return l.translate(qe,qe,[Ne*Ce,ve.y*Ce,0]),l.scale(qe,qe,[Ce/l.EXTENT,Ce/l.EXTENT,1]),l.multiply(qe,Y?this.alignedProjMatrix:this.projMatrix,qe),te[q]=new Float32Array(qe),te[q]},Xr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Xr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var D,Y,q,te,ve=-90,Ce=90,Ne=-180,qe=180,et=this.size,vt=this._unmodified;if(this.latRange){var yt=this.latRange;ve=l.mercatorYfromLat(yt[1])*this.worldSize,D=(Ce=l.mercatorYfromLat(yt[0])*this.worldSize)-ve<et.y?et.y/(Ce-ve):0}if(this.lngRange){var ee=this.lngRange;Ne=l.mercatorXfromLng(ee[0])*this.worldSize,Y=(qe=l.mercatorXfromLng(ee[1])*this.worldSize)-Ne<et.x?et.x/(qe-Ne):0}var ue=this.point,Ae=Math.max(Y||0,D||0);if(Ae)return this.center=this.unproject(new l.Point(Y?(qe+Ne)/2:ue.x,D?(Ce+ve)/2:ue.y)),this.zoom+=this.scaleZoom(Ae),this._unmodified=vt,void(this._constraining=!1);if(this.latRange){var Oe=ue.y,Fe=et.y/2;Oe-Fe<ve&&(te=ve+Fe),Oe+Fe>Ce&&(te=Ce-Fe)}if(this.lngRange){var Ue=ue.x,We=et.x/2;Ue-We<Ne&&(q=Ne+We),Ue+We>qe&&(q=qe-We)}void 0===q&&void 0===te||(this.center=this.unproject(new l.Point(void 0!==q?q:ue.x,void 0!==te?te:ue.y))),this._unmodified=vt,this._constraining=!1}},Xr.prototype._calcMatrices=function(){if(this.height){var Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var q=Math.PI/2+this._pitch,te=this._fov*(.5+Y.y/this.height),ve=Math.sin(te)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-q-te,.01,Math.PI-.01)),Ce=this.point,Ne=Ce.x,qe=Ce.y,et=1.01*(Math.cos(Math.PI/2-this._pitch)*ve+this.cameraToCenterDistance),vt=this.height/50,yt=new Float64Array(16);l.perspective(yt,this._fov,this.width/this.height,vt,et),yt[8]=2*-Y.x/this.width,yt[9]=2*Y.y/this.height,l.scale(yt,yt,[1,-1,1]),l.translate(yt,yt,[0,0,-this.cameraToCenterDistance]),l.rotateX(yt,yt,this._pitch),l.rotateZ(yt,yt,this.angle),l.translate(yt,yt,[-Ne,-qe,0]),this.mercatorMatrix=l.scale([],yt,[this.worldSize,this.worldSize,this.worldSize]),l.scale(yt,yt,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=yt,this.invProjMatrix=l.invert([],this.projMatrix);var ee=this.width%2/2,ue=this.height%2/2,Ae=Math.cos(this.angle),Oe=Math.sin(this.angle),Fe=Ne-Math.round(Ne)+Ae*ee+Oe*ue,Ue=qe-Math.round(qe)+Ae*ue+Oe*ee,We=new Float64Array(yt);if(l.translate(We,We,[Fe>.5?Fe-1:Fe,Ue>.5?Ue-1:Ue,0]),this.alignedProjMatrix=We,yt=l.create(),l.scale(yt,yt,[this.width/2,-this.height/2,1]),l.translate(yt,yt,[1,-1,0]),this.labelPlaneMatrix=yt,yt=l.create(),l.scale(yt,yt,[1,-1,1]),l.translate(yt,yt,[-1,-1,0]),l.scale(yt,yt,[2/this.width,2/this.height,1]),this.glCoordMatrix=yt,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(yt=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=yt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Xr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var D=this.pointCoordinate(new l.Point(0,0)),Y=[D.x*this.worldSize,D.y*this.worldSize,0,1];return l.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Xr.prototype.getCameraPoint=function(){var Y=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,Y))},Xr.prototype.getCameraQueryGeometry=function(D){var Y=this.getCameraPoint();if(1===D.length)return[D[0],Y];for(var q=Y.x,te=Y.y,ve=Y.x,Ce=Y.y,Ne=0,qe=D;Ne<qe.length;Ne+=1){var et=qe[Ne];q=Math.min(q,et.x),te=Math.min(te,et.y),ve=Math.max(ve,et.x),Ce=Math.max(Ce,et.y)}return[new l.Point(q,te),new l.Point(ve,te),new l.Point(ve,Ce),new l.Point(q,Ce),new l.Point(q,te)]},Object.defineProperties(Xr.prototype,Kr);var so=function(D){var Y,te,ve,Ce;this._hashName=D&&encodeURIComponent(D),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(Y=this._updateHashUnthrottled.bind(this),te=!1,ve=null,Ce=function(){ve=null,te&&(Y(),ve=setTimeout(Ce,300),te=!1)},function(){return te=!0,ve||Ce(),ve})};so.prototype.addTo=function(D){return this._map=D,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},so.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},so.prototype.getHashString=function(D){var Y=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,te=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),ve=Math.pow(10,te),Ce=Math.round(Y.lng*ve)/ve,Ne=Math.round(Y.lat*ve)/ve,qe=this._map.getBearing(),et=this._map.getPitch(),vt="";if(vt+=D?"/"+Ce+"/"+Ne+"/"+q:q+"/"+Ne+"/"+Ce,(qe||et)&&(vt+="/"+Math.round(10*qe)/10),et&&(vt+="/"+Math.round(et)),this._hashName){var yt=this._hashName,ee=!1,ue=l.window.location.hash.slice(1).split("&").map(function(Ae){var Oe=Ae.split("=")[0];return Oe===yt?(ee=!0,Oe+"="+vt):Ae}).filter(function(Ae){return Ae});return ee||ue.push(yt+"="+vt),"#"+ue.join("&")}return"#"+vt},so.prototype._getCurrentHash=function(){var D,Y=this,q=l.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(te){return te.split("=")}).forEach(function(te){te[0]===Y._hashName&&(D=te)}),(D&&D[1]||"").split("/")):q.split("/")},so.prototype._onHashChange=function(){var D=this._getCurrentHash();if(D.length>=3&&!D.some(function(q){return isNaN(q)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(D[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+D[2],+D[1]],zoom:+D[0],bearing:Y,pitch:+(D[4]||0)}),!0}return!1},so.prototype._updateHashUnthrottled=function(){var D=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",D)}catch{}};var Xa={linearity:.3,easing:l.bezier(0,0,.3,1)},Ls=l.extend({deceleration:2500,maxSpeed:1400},Xa),Js=l.extend({deceleration:20,maxSpeed:1400},Xa),Fo=l.extend({deceleration:1e3,maxSpeed:360},Xa),Ks=l.extend({deceleration:1e3,maxSpeed:90},Xa),Bo=function(D){this._map=D,this.clear()};function lo(D,Y){(!D.duration||D.duration<Y.duration)&&(D.duration=Y.duration,D.easing=Y.easing)}function No(D,Y,q){var te=q.maxSpeed,ve=q.linearity,Ce=q.deceleration,Ne=l.clamp(D*ve/(Y/1e3),-te,te),qe=Math.abs(Ne)/(Ce*ve);return{easing:q.easing,duration:1e3*qe,amount:Ne*(qe/2)}}Bo.prototype.clear=function(){this._inertiaBuffer=[]},Bo.prototype.record=function(D){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:D})},Bo.prototype._drainInertiaBuffer=function(){for(var D=this._inertiaBuffer,Y=l.browser.now();D.length>0&&Y-D[0].time>160;)D.shift()},Bo.prototype._onMoveEnd=function(D){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var Y={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},q=0,te=this._inertiaBuffer;q<te.length;q+=1){var ve=te[q].settings;Y.zoom+=ve.zoomDelta||0,Y.bearing+=ve.bearingDelta||0,Y.pitch+=ve.pitchDelta||0,ve.panDelta&&Y.pan._add(ve.panDelta),ve.around&&(Y.around=ve.around),ve.pinchAround&&(Y.pinchAround=ve.pinchAround)}var Ce=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ne={};if(Y.pan.mag()){var qe=No(Y.pan.mag(),Ce,l.extend({},Ls,D||{}));Ne.offset=Y.pan.mult(qe.amount/Y.pan.mag()),Ne.center=this._map.transform.center,lo(Ne,qe)}if(Y.zoom){var et=No(Y.zoom,Ce,Js);Ne.zoom=this._map.transform.zoom+et.amount,lo(Ne,et)}if(Y.bearing){var vt=No(Y.bearing,Ce,Fo);Ne.bearing=this._map.transform.bearing+l.clamp(vt.amount,-179,179),lo(Ne,vt)}if(Y.pitch){var yt=No(Y.pitch,Ce,Ks);Ne.pitch=this._map.transform.pitch+yt.amount,lo(Ne,yt)}if(Ne.zoom||Ne.bearing){var ee=void 0===Y.pinchAround?Y.around:Y.pinchAround;Ne.around=ee?this._map.unproject(ee):this._map.getCenter()}return this.clear(),l.extend(Ne,{noMoveStart:!0})}};var mi=function(D){function Y(te,ve,Ce,Ne){void 0===Ne&&(Ne={});var qe=b.mousePos(ve.getCanvasContainer(),Ce),et=ve.unproject(qe);D.call(this,te,l.extend({point:qe,lngLat:et,originalEvent:Ce},Ne)),this._defaultPrevented=!1,this.target=ve}D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),Ja=function(D){function Y(te,ve,Ce){var Ne="touchend"===te?Ce.changedTouches:Ce.touches,qe=b.touchPos(ve.getCanvasContainer(),Ne),et=qe.map(function(ee){return ve.unproject(ee)}),vt=qe.reduce(function(ee,ue,Ae,Oe){return ee.add(ue.div(Oe.length))},new l.Point(0,0)),yt=ve.unproject(vt);D.call(this,te,{points:qe,point:vt,lngLats:et,lngLat:yt,originalEvent:Ce}),this._defaultPrevented=!1}D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),jo=function(D){function Y(te,ve,Ce){D.call(this,te,{originalEvent:Ce}),this._defaultPrevented=!1}D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),Ii=function(D,Y){this._map=D,this._clickTolerance=Y.clickTolerance};Ii.prototype.reset=function(){delete this._mousedownPos},Ii.prototype.wheel=function(D){return this._firePreventable(new jo(D.type,this._map,D))},Ii.prototype.mousedown=function(D,Y){return this._mousedownPos=Y,this._firePreventable(new mi(D.type,this._map,D))},Ii.prototype.mouseup=function(D){this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.click=function(D,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.dblclick=function(D){return this._firePreventable(new mi(D.type,this._map,D))},Ii.prototype.mouseover=function(D){this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.mouseout=function(D){this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.touchstart=function(D){return this._firePreventable(new Ja(D.type,this._map,D))},Ii.prototype.touchmove=function(D){this._map.fire(new Ja(D.type,this._map,D))},Ii.prototype.touchend=function(D){this._map.fire(new Ja(D.type,this._map,D))},Ii.prototype.touchcancel=function(D){this._map.fire(new Ja(D.type,this._map,D))},Ii.prototype._firePreventable=function(D){if(this._map.fire(D),D.defaultPrevented)return{}},Ii.prototype.isEnabled=function(){return!0},Ii.prototype.isActive=function(){return!1},Ii.prototype.enable=function(){},Ii.prototype.disable=function(){};var Wi=function(D){this._map=D};Wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wi.prototype.mousemove=function(D){this._map.fire(new mi(D.type,this._map,D))},Wi.prototype.mousedown=function(){this._delayContextMenu=!0},Wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wi.prototype.contextmenu=function(D){this._delayContextMenu?this._contextMenuEvent=D:this._map.fire(new mi(D.type,this._map,D)),this._map.listens("contextmenu")&&D.preventDefault()},Wi.prototype.isEnabled=function(){return!0},Wi.prototype.isActive=function(){return!1},Wi.prototype.enable=function(){},Wi.prototype.disable=function(){};var Yi=function(D,Y){this._map=D,this._el=D.getCanvasContainer(),this._container=D.getContainer(),this._clickTolerance=Y.clickTolerance||1};function qi(D,Y){for(var q={},te=0;te<D.length;te++)q[D[te].identifier]=Y[te];return q}Yi.prototype.isEnabled=function(){return!!this._enabled},Yi.prototype.isActive=function(){return!!this._active},Yi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yi.prototype.mousedown=function(D,Y){this.isEnabled()&&D.shiftKey&&0===D.button&&(b.disableDrag(),this._startPos=this._lastPos=Y,this._active=!0)},Yi.prototype.mousemoveWindow=function(D,Y){if(this._active){var q=Y;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var te=this._startPos;this._lastPos=q,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",D));var ve=Math.min(te.x,q.x),Ce=Math.max(te.x,q.x),Ne=Math.min(te.y,q.y),qe=Math.max(te.y,q.y);b.setTransform(this._box,"translate("+ve+"px,"+Ne+"px)"),this._box.style.width=Ce-ve+"px",this._box.style.height=qe-Ne+"px"}}},Yi.prototype.mouseupWindow=function(D,Y){var q=this;if(this._active&&0===D.button){var te=this._startPos,ve=Y;if(this.reset(),b.suppressClick(),te.x!==ve.x||te.y!==ve.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:D})),{cameraAnimation:function(Ce){return Ce.fitScreenCoordinates(te,ve,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",D)}},Yi.prototype.keydown=function(D){this._active&&27===D.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",D))},Yi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},Yi.prototype._fireEvent=function(D,Y){return this._map.fire(new l.Event(D,{originalEvent:Y}))};var sa=function(D){this.reset(),this.numTouches=D.numTouches};sa.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},sa.prototype.touchstart=function(D,Y,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=D.timeStamp),q.length===this.numTouches&&(this.centroid=function(te){for(var ve=new l.Point(0,0),Ce=0,Ne=te;Ce<Ne.length;Ce+=1)ve._add(Ne[Ce]);return ve.div(te.length)}(Y),this.touches=qi(q,Y)))},sa.prototype.touchmove=function(D,Y,q){if(!this.aborted&&this.centroid){var te=qi(q,Y);for(var ve in this.touches){var Ne=te[ve];(!Ne||Ne.dist(this.touches[ve])>30)&&(this.aborted=!0)}}},sa.prototype.touchend=function(D,Y,q){if((!this.centroid||D.timeStamp-this.startTime>500)&&(this.aborted=!0),0===q.length){var te=!this.aborted&&this.centroid;if(this.reset(),te)return te}};var To=function(D){this.singleTap=new sa(D),this.numTaps=D.numTaps,this.reset()};To.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},To.prototype.touchstart=function(D,Y,q){this.singleTap.touchstart(D,Y,q)},To.prototype.touchmove=function(D,Y,q){this.singleTap.touchmove(D,Y,q)},To.prototype.touchend=function(D,Y,q){var te=this.singleTap.touchend(D,Y,q);if(te){var ve=D.timeStamp-this.lastTime<500,Ce=!this.lastTap||this.lastTap.dist(te)<30;if(ve&&Ce||this.reset(),this.count++,this.lastTime=D.timeStamp,this.lastTap=te,this.count===this.numTaps)return this.reset(),te}};var Ia=function(){this._zoomIn=new To({numTouches:1,numTaps:2}),this._zoomOut=new To({numTouches:2,numTaps:1}),this.reset()};Ia.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ia.prototype.touchstart=function(D,Y,q){this._zoomIn.touchstart(D,Y,q),this._zoomOut.touchstart(D,Y,q)},Ia.prototype.touchmove=function(D,Y,q){this._zoomIn.touchmove(D,Y,q),this._zoomOut.touchmove(D,Y,q)},Ia.prototype.touchend=function(D,Y,q){var te=this,ve=this._zoomIn.touchend(D,Y,q),Ce=this._zoomOut.touchend(D,Y,q);return ve?(this._active=!0,D.preventDefault(),setTimeout(function(){return te.reset()},0),{cameraAnimation:function(Ne){return Ne.easeTo({duration:300,zoom:Ne.getZoom()+1,around:Ne.unproject(ve)},{originalEvent:D})}}):Ce?(this._active=!0,D.preventDefault(),setTimeout(function(){return te.reset()},0),{cameraAnimation:function(Ne){return Ne.easeTo({duration:300,zoom:Ne.getZoom()-1,around:Ne.unproject(Ce)},{originalEvent:D})}}):void 0},Ia.prototype.touchcancel=function(){this.reset()},Ia.prototype.enable=function(){this._enabled=!0},Ia.prototype.disable=function(){this._enabled=!1,this.reset()},Ia.prototype.isEnabled=function(){return this._enabled},Ia.prototype.isActive=function(){return this._active};var Di=function(D){this.reset(),this._clickTolerance=D.clickTolerance||1};Di.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Di.prototype._correctButton=function(D,Y){return!1},Di.prototype._move=function(D,Y){return{}},Di.prototype.mousedown=function(D,Y){if(!this._lastPoint){var q=b.mouseButton(D);this._correctButton(D,q)&&(this._lastPoint=Y,this._eventButton=q)}},Di.prototype.mousemoveWindow=function(D,Y){var q=this._lastPoint;if(q&&(D.preventDefault(),this._moved||!(Y.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=Y,this._move(q,Y)},Di.prototype.mouseupWindow=function(D){b.mouseButton(D)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},Di.prototype.enable=function(){this._enabled=!0},Di.prototype.disable=function(){this._enabled=!1,this.reset()},Di.prototype.isEnabled=function(){return this._enabled},Di.prototype.isActive=function(){return this._active};var ya=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.mousedown=function(q,te){D.prototype.mousedown.call(this,q,te),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(q,te){return 0===te&&!q.ctrlKey},Y.prototype._move=function(q,te){return{around:te,panDelta:te.sub(q)}},Y}(Di),Cs=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype._correctButton=function(q,te){return 0===te&&q.ctrlKey||2===te},Y.prototype._move=function(q,te){var ve=.8*(te.x-q.x);if(ve)return this._active=!0,{bearingDelta:ve}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Di),Ps=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype._correctButton=function(q,te){return 0===te&&q.ctrlKey||2===te},Y.prototype._move=function(q,te){var ve=-.5*(te.y-q.y);if(ve)return this._active=!0,{pitchDelta:ve}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Di),ia=function(D){this._minTouches=1,this._clickTolerance=D.clickTolerance||1,this.reset()};ia.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},ia.prototype.touchstart=function(D,Y,q){return this._calculateTransform(D,Y,q)},ia.prototype.touchmove=function(D,Y,q){if(this._active)return D.preventDefault(),this._calculateTransform(D,Y,q)},ia.prototype.touchend=function(D,Y,q){this._calculateTransform(D,Y,q),this._active&&q.length<this._minTouches&&this.reset()},ia.prototype.touchcancel=function(){this.reset()},ia.prototype._calculateTransform=function(D,Y,q){q.length>0&&(this._active=!0);var te=qi(q,Y),ve=new l.Point(0,0),Ce=new l.Point(0,0),Ne=0;for(var qe in te){var et=te[qe],vt=this._touches[qe];vt&&(ve._add(et),Ce._add(et.sub(vt)),Ne++,te[qe]=et)}if(this._touches=te,!(Ne<this._minTouches)&&Ce.mag()){var yt=Ce.div(Ne);if(this._sum._add(yt),!(this._sum.mag()<this._clickTolerance))return{around:ve.div(Ne),panDelta:yt}}},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var _r=function(){this.reset()};function Uo(D,Y,q){for(var te=0;te<D.length;te++)if(D[te].identifier===q)return Y[te]}function la(D,Y){return Math.log(D/Y)/Math.LN2}_r.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},_r.prototype._start=function(D){},_r.prototype._move=function(D,Y,q){return{}},_r.prototype.touchstart=function(D,Y,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([Y[0],Y[1]]))},_r.prototype.touchmove=function(D,Y,q){if(this._firstTwoTouches){D.preventDefault();var te=this._firstTwoTouches,Ce=te[1],Ne=Uo(q,Y,te[0]),qe=Uo(q,Y,Ce);if(Ne&&qe){var et=this._aroundCenter?null:Ne.add(qe).div(2);return this._move([Ne,qe],et,D)}}},_r.prototype.touchend=function(D,Y,q){if(this._firstTwoTouches){var te=this._firstTwoTouches,Ce=te[1],Ne=Uo(q,Y,te[0]),qe=Uo(q,Y,Ce);Ne&&qe||(this._active&&b.suppressClick(),this.reset())}},_r.prototype.touchcancel=function(){this.reset()},_r.prototype.enable=function(D){this._enabled=!0,this._aroundCenter=!!D&&"center"===D.around},_r.prototype.disable=function(){this._enabled=!1,this.reset()},_r.prototype.isEnabled=function(){return this._enabled},_r.prototype.isActive=function(){return this._active};var Os=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},Y.prototype._move=function(q,te){var ve=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(la(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:la(this._distance,ve),pinchAround:te}},Y}(_r);function Qo(D,Y){return 180*D.angleWith(Y)/Math.PI}var es=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},Y.prototype._move=function(q,te){var ve=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qo(this._vector,ve),pinchAround:te}},Y.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var te=25/(Math.PI*this._minDiameter)*360,ve=Qo(q,this._startVector);return Math.abs(ve)<te},Y}(_r);function ts(D){return Math.abs(D.y)>Math.abs(D.x)}var wr=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(q){this._lastPoints=q,ts(q[0].sub(q[1]))&&(this._valid=!1)},Y.prototype._move=function(q,te,ve){var Ce=q[0].sub(this._lastPoints[0]),Ne=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ce,Ne,ve.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(Ce.y+Ne.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(q,te,ve){if(void 0!==this._valid)return this._valid;var Ce=q.mag()>=2,Ne=te.mag()>=2;if(Ce||Ne){if(!Ce||!Ne)return void 0===this._firstMove&&(this._firstMove=ve),ve-this._firstMove<100&&void 0;var qe=q.y>0==te.y>0;return ts(q)&&ts(te)&&qe}},Y}(_r),ns={panStep:100,bearingStep:15,pitchStep:10},za=function(){var D=ns;this._panStep=D.panStep,this._bearingStep=D.bearingStep,this._pitchStep=D.pitchStep};function Is(D){return D*(2-D)}za.prototype.reset=function(){this._active=!1},za.prototype.keydown=function(D){var Y=this;if(!(D.altKey||D.ctrlKey||D.metaKey)){var q=0,te=0,ve=0,Ce=0,Ne=0;switch(D.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:D.shiftKey?te=-1:(D.preventDefault(),Ce=-1);break;case 39:D.shiftKey?te=1:(D.preventDefault(),Ce=1);break;case 38:D.shiftKey?ve=1:(D.preventDefault(),Ne=-1);break;case 40:D.shiftKey?ve=-1:(D.preventDefault(),Ne=1);break;default:return}return{cameraAnimation:function(qe){var et=qe.getZoom();qe.easeTo({duration:300,easeId:"keyboardHandler",easing:Is,zoom:q?Math.round(et)+q*(D.shiftKey?2:1):et,bearing:qe.getBearing()+te*Y._bearingStep,pitch:qe.getPitch()+ve*Y._pitchStep,offset:[-Ce*Y._panStep,-Ne*Y._panStep],center:qe.getCenter()},{originalEvent:D})}}}},za.prototype.enable=function(){this._enabled=!0},za.prototype.disable=function(){this._enabled=!1,this.reset()},za.prototype.isEnabled=function(){return this._enabled},za.prototype.isActive=function(){return this._active};var ys=4.000244140625,Xi=function(D,Y){this._map=D,this._el=D.getCanvasContainer(),this._handler=Y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Xi.prototype.setZoomRate=function(D){this._defaultZoomRate=D},Xi.prototype.setWheelZoomRate=function(D){this._wheelZoomRate=D},Xi.prototype.isEnabled=function(){return!!this._enabled},Xi.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Xi.prototype.isZooming=function(){return!!this._zooming},Xi.prototype.enable=function(D){this.isEnabled()||(this._enabled=!0,this._aroundCenter=D&&"center"===D.around)},Xi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Xi.prototype.wheel=function(D){if(this.isEnabled()){var Y=D.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*D.deltaY:D.deltaY,q=l.browser.now(),te=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,0!==Y&&Y%ys==0?this._type="wheel":0!==Y&&Math.abs(Y)<4?this._type="trackpad":te>400?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,D)):this._type||(this._type=Math.abs(te*Y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue)),D.shiftKey&&Y&&(Y/=4),this._type&&(this._lastWheelEvent=D,this._delta-=Y,this._active||this._start(D)),D.preventDefault()}},Xi.prototype._onTimeout=function(D){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(D)},Xi.prototype._start=function(D){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var Y=b.mousePos(this._el,D);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Xi.prototype.renderFrame=function(){return this._onScrollFrame()},Xi.prototype._onScrollFrame=function(){var D=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(0!==this._delta){var q="wheel"===this._type&&Math.abs(this._delta)>ys?this._wheelZoomRate:this._defaultZoomRate,te=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&0!==te&&(te=1/te);var ve="number"==typeof this._targetZoom?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(ve*te))),"wheel"===this._type&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ce,Ne="number"==typeof this._targetZoom?this._targetZoom:Y.zoom,qe=this._startZoom,et=this._easing,vt=!1;if("wheel"===this._type&&qe&&et){var yt=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),ee=et(yt);Ce=l.number(qe,Ne,ee),yt<1?this._frameId||(this._frameId=!0):vt=!0}else Ce=Ne,vt=!0;return this._active=!0,vt&&(this._active=!1,this._finishTimeout=setTimeout(function(){D._zooming=!1,D._handler._triggerRenderFrame(),delete D._targetZoom,delete D._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!vt,zoomDelta:Ce-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Xi.prototype._smoothOutEasing=function(D){var Y=l.ease;if(this._prevEase){var q=this._prevEase,te=(l.browser.now()-q.start)/q.duration,ve=q.easing(te+.01)-q.easing(te),Ce=.27/Math.sqrt(ve*ve+1e-4)*.01,Ne=Math.sqrt(.0729-Ce*Ce);Y=l.bezier(Ce,Ne,.25,1)}return this._prevEase={start:l.browser.now(),duration:D,easing:Y},Y},Xi.prototype.reset=function(){this._active=!1};var Vo=function(D,Y){this._clickZoom=D,this._tapZoom=Y};Vo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Vo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Vo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Vo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var uo=function(){this.reset()};uo.prototype.reset=function(){this._active=!1},uo.prototype.dblclick=function(D,Y){return D.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(D.shiftKey?-1:1),around:q.unproject(Y)},{originalEvent:D})}}},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active};var xa=function(){this._tap=new To({numTouches:1,numTaps:1}),this.reset()};xa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},xa.prototype.touchstart=function(D,Y,q){this._swipePoint||(this._tapTime&&D.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=Y[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(D,Y,q))},xa.prototype.touchmove=function(D,Y,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var te=Y[0],ve=te.y-this._swipePoint.y;return this._swipePoint=te,D.preventDefault(),this._active=!0,{zoomDelta:ve/128}}}else this._tap.touchmove(D,Y,q)},xa.prototype.touchend=function(D,Y,q){this._tapTime?this._swipePoint&&0===q.length&&this.reset():this._tap.touchend(D,Y,q)&&(this._tapTime=D.timeStamp)},xa.prototype.touchcancel=function(){this.reset()},xa.prototype.enable=function(){this._enabled=!0},xa.prototype.disable=function(){this._enabled=!1,this.reset()},xa.prototype.isEnabled=function(){return this._enabled},xa.prototype.isActive=function(){return this._active};var ko=function(D,Y,q){this._el=D,this._mousePan=Y,this._touchPan=q};ko.prototype.enable=function(D){this._inertiaOptions=D||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ko.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ko.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ko.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Va=function(D,Y,q){this._pitchWithRotate=D.pitchWithRotate,this._mouseRotate=Y,this._mousePitch=q};Va.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Va.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Va.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Va.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ra=function(D,Y,q,te){this._el=D,this._touchZoom=Y,this._touchRotate=q,this._tapDragZoom=te,this._rotationDisabled=!1,this._enabled=!0};Ra.prototype.enable=function(D){this._touchZoom.enable(D),this._rotationDisabled||this._touchRotate.enable(D),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ra.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ra.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ra.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ra.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ra.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ho=function(D){return D.zoom||D.drag||D.pitch||D.rotate},Ji=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y}(l.Event);function Da(D){return D.panDelta&&D.panDelta.mag()||D.zoomDelta||D.bearingDelta||D.pitchDelta}var ri=function(D,Y){this._map=D,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Bo(D),this._bearingSnap=Y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Y),l.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[l.window,"blur",void 0]];for(var te=0,ve=this._listeners;te<ve.length;te+=1){var Ce=ve[te],Ne=Ce[0];b.addEventListener(Ne,Ce[1],Ne===l.window.document?this.handleWindowEvent:this.handleEvent,Ce[2])}};ri.prototype.destroy=function(){for(var D=0,Y=this._listeners;D<Y.length;D+=1){var q=Y[D],te=q[0];b.removeEventListener(te,q[1],te===l.window.document?this.handleWindowEvent:this.handleEvent,q[2])}},ri.prototype._addDefaultHandlers=function(D){var Y=this._map,q=Y.getCanvasContainer();this._add("mapEvent",new Ii(Y,D));var te=Y.boxZoom=new Yi(Y,D);this._add("boxZoom",te);var ve=new Ia,Ce=new uo;Y.doubleClickZoom=new Vo(Ce,ve),this._add("tapZoom",ve),this._add("clickZoom",Ce);var Ne=new xa;this._add("tapDragZoom",Ne);var qe=Y.touchPitch=new wr;this._add("touchPitch",qe);var et=new Cs(D),vt=new Ps(D);Y.dragRotate=new Va(D,et,vt),this._add("mouseRotate",et,["mousePitch"]),this._add("mousePitch",vt,["mouseRotate"]);var yt=new ya(D),ee=new ia(D);Y.dragPan=new ko(q,yt,ee),this._add("mousePan",yt),this._add("touchPan",ee,["touchZoom","touchRotate"]);var ue=new es,Ae=new Os;Y.touchZoomRotate=new Ra(q,Ae,ue,Ne),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]);var Oe=Y.scrollZoom=new Xi(Y,this);this._add("scrollZoom",Oe,["mousePan"]);var Fe=Y.keyboard=new za;this._add("keyboard",Fe),this._add("blockableMapEvent",new Wi(Y));for(var Ue=0,We=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ue<We.length;Ue+=1){var Je=We[Ue];D.interactive&&D[Je]&&Y[Je].enable(D[Je])}},ri.prototype._add=function(D,Y,q){this._handlers.push({handlerName:D,handler:Y,allowed:q}),this._handlersById[D]=Y},ri.prototype.stop=function(){if(!this._updatingCamera){for(var D=0,Y=this._handlers;D<Y.length;D+=1)Y[D].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ri.prototype.isActive=function(){for(var D=0,Y=this._handlers;D<Y.length;D+=1)if(Y[D].handler.isActive())return!0;return!1},ri.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ri.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ri.prototype.isMoving=function(){return Boolean(Ho(this._eventsInProgress))||this.isZooming()},ri.prototype._blockedByActive=function(D,Y,q){for(var te in D)if(te!==q&&(!Y||Y.indexOf(te)<0))return!0;return!1},ri.prototype.handleWindowEvent=function(D){this.handleEvent(D,D.type+"Window")},ri.prototype._getMapTouches=function(D){for(var Y=[],q=0,te=D;q<te.length;q+=1){var ve=te[q];this._el.contains(ve.target)&&Y.push(ve)}return Y},ri.prototype.handleEvent=function(D,Y){if("blur"!==D.type){this._updatingCamera=!0;for(var q="renderFrame"===D.type?void 0:D,te={needsRenderFrame:!1},ve={},Ce={},Ne=D.touches?this._getMapTouches(D.touches):void 0,qe=Ne?b.touchPos(this._el,Ne):b.mousePos(this._el,D),et=0,vt=this._handlers;et<vt.length;et+=1){var yt=vt[et],ee=yt.handlerName,ue=yt.handler,Ae=yt.allowed;if(ue.isEnabled()){var Oe=void 0;this._blockedByActive(Ce,Ae,ee)?ue.reset():ue[Y||D.type]&&(Oe=ue[Y||D.type](D,qe,Ne),this.mergeHandlerResult(te,ve,Oe,ee,q),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||ue.isActive())&&(Ce[ee]=ue)}}var Fe={};for(var Ue in this._previousActiveHandlers)Ce[Ue]||(Fe[Ue]=q);this._previousActiveHandlers=Ce,(Object.keys(Fe).length||Da(te))&&(this._changes.push([te,ve,Fe]),this._triggerRenderFrame()),(Object.keys(Ce).length||Da(te))&&this._map._stop(!0),this._updatingCamera=!1;var We=te.cameraAnimation;We&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],We(this._map))}else this.stop()},ri.prototype.mergeHandlerResult=function(D,Y,q,te,ve){if(q){l.extend(D,q);var Ce={handlerName:te,originalEvent:q.originalEvent||ve};void 0!==q.zoomDelta&&(Y.zoom=Ce),void 0!==q.panDelta&&(Y.drag=Ce),void 0!==q.pitchDelta&&(Y.pitch=Ce),void 0!==q.bearingDelta&&(Y.rotate=Ce)}},ri.prototype._applyChanges=function(){for(var D={},Y={},q={},te=0,ve=this._changes;te<ve.length;te+=1){var Ce=ve[te],Ne=Ce[0],qe=Ce[1],et=Ce[2];Ne.panDelta&&(D.panDelta=(D.panDelta||new l.Point(0,0))._add(Ne.panDelta)),Ne.zoomDelta&&(D.zoomDelta=(D.zoomDelta||0)+Ne.zoomDelta),Ne.bearingDelta&&(D.bearingDelta=(D.bearingDelta||0)+Ne.bearingDelta),Ne.pitchDelta&&(D.pitchDelta=(D.pitchDelta||0)+Ne.pitchDelta),void 0!==Ne.around&&(D.around=Ne.around),void 0!==Ne.pinchAround&&(D.pinchAround=Ne.pinchAround),Ne.noInertia&&(D.noInertia=Ne.noInertia),l.extend(Y,qe),l.extend(q,et)}this._updateMapTransform(D,Y,q),this._changes=[]},ri.prototype._updateMapTransform=function(D,Y,q){var te=this._map,ve=te.transform;if(!Da(D))return this._fireEvents(Y,q);var Ce=D.panDelta,Ne=D.zoomDelta,qe=D.bearingDelta,et=D.pitchDelta,vt=D.around,yt=D.pinchAround;void 0!==yt&&(vt=yt),te._stop(!0),vt=vt||te.transform.centerPoint;var ee=ve.pointLocation(Ce?vt.sub(Ce):vt);qe&&(ve.bearing+=qe),et&&(ve.pitch+=et),Ne&&(ve.zoom+=Ne),ve.setLocationAtPoint(ee,vt),this._map._update(),D.noInertia||this._inertia.record(D),this._fireEvents(Y,q)},ri.prototype._fireEvents=function(D,Y){var q=this,te=Ho(this._eventsInProgress),ve=Ho(D),Ce={};for(var Ne in D)this._eventsInProgress[Ne]||(Ce[Ne+"start"]=D[Ne].originalEvent),this._eventsInProgress[Ne]=D[Ne];for(var et in!te&&ve&&this._fireEvent("movestart",ve.originalEvent),Ce)this._fireEvent(et,Ce[et]);for(var vt in D.rotate&&(this._bearingChanged=!0),ve&&this._fireEvent("move",ve.originalEvent),D)this._fireEvent(vt,D[vt].originalEvent);var ee,ue={};for(var Ae in this._eventsInProgress){var Oe=this._eventsInProgress[Ae],Fe=Oe.handlerName,Ue=Oe.originalEvent;this._handlersById[Fe].isActive()||(delete this._eventsInProgress[Ae],ue[Ae+"end"]=ee=Y[Fe]||Ue)}for(var We in ue)this._fireEvent(We,ue[We]);var Je=Ho(this._eventsInProgress);if((te||ve)&&!Je){this._updatingCamera=!0;var it=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ut=function(St){return 0!==St&&-q._bearingSnap<St&&St<q._bearingSnap};it?(ut(it.bearing||this._map.getBearing())&&(it.bearing=0),this._map.easeTo(it,{originalEvent:ee})):(this._map.fire(new l.Event("moveend",{originalEvent:ee})),ut(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ri.prototype._fireEvent=function(D,Y){this._map.fire(new l.Event(D,Y?{originalEvent:Y}:{}))},ri.prototype._triggerRenderFrame=function(){var D=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(Y){delete D._frameId,D.handleEvent(new Ji("renderFrame",{timeStamp:Y})),D._applyChanges()}))};var xs=function(D){function Y(q,te){D.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=te.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(q,te){return this.jumpTo({center:q},te)},Y.prototype.panBy=function(q,te,ve){return q=l.Point.convert(q).mult(-1),this.panTo(this.transform.center,l.extend({offset:q},te),ve)},Y.prototype.panTo=function(q,te,ve){return this.easeTo(l.extend({center:q},te),ve)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(q,te){return this.jumpTo({zoom:q},te),this},Y.prototype.zoomTo=function(q,te,ve){return this.easeTo(l.extend({zoom:q},te),ve)},Y.prototype.zoomIn=function(q,te){return this.zoomTo(this.getZoom()+1,q,te),this},Y.prototype.zoomOut=function(q,te){return this.zoomTo(this.getZoom()-1,q,te),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(q,te){return this.jumpTo({bearing:q},te),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(q,te){return this.jumpTo({padding:q},te),this},Y.prototype.rotateTo=function(q,te,ve){return this.easeTo(l.extend({bearing:q},te),ve)},Y.prototype.resetNorth=function(q,te){return this.rotateTo(0,l.extend({duration:1e3},q),te),this},Y.prototype.resetNorthPitch=function(q,te){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},q),te),this},Y.prototype.snapToNorth=function(q,te){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,te):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(q,te){return this.jumpTo({pitch:q},te),this},Y.prototype.cameraForBounds=function(q,te){return q=l.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,te)},Y.prototype._cameraForBoxAndBearing=function(q,te,ve,Ce){var Ne={top:0,bottom:0,right:0,left:0};if("number"==typeof(Ce=l.extend({padding:Ne,offset:[0,0],maxZoom:this.transform.maxZoom},Ce)).padding){var qe=Ce.padding;Ce.padding={top:qe,bottom:qe,right:qe,left:qe}}Ce.padding=l.extend(Ne,Ce.padding);var et=this.transform,vt=et.padding,yt=et.project(l.LngLat.convert(q)),ee=et.project(l.LngLat.convert(te)),ue=yt.rotate(-ve*Math.PI/180),Ae=ee.rotate(-ve*Math.PI/180),Oe=new l.Point(Math.max(ue.x,Ae.x),Math.max(ue.y,Ae.y)),Fe=new l.Point(Math.min(ue.x,Ae.x),Math.min(ue.y,Ae.y)),Ue=Oe.sub(Fe),We=(et.width-(vt.left+vt.right+Ce.padding.left+Ce.padding.right))/Ue.x,Je=(et.height-(vt.top+vt.bottom+Ce.padding.top+Ce.padding.bottom))/Ue.y;if(!(Je<0||We<0)){var it=Math.min(et.scaleZoom(et.scale*Math.min(We,Je)),Ce.maxZoom),ut=l.Point.convert(Ce.offset),Ft=new l.Point(ut.x+(Ce.padding.left-Ce.padding.right)/2,ut.y+(Ce.padding.top-Ce.padding.bottom)/2).mult(et.scale/et.zoomScale(it));return{center:et.unproject(yt.add(ee).div(2).sub(Ft)),zoom:it,bearing:ve}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(q,te,ve){return this._fitInternal(this.cameraForBounds(q,te),te,ve)},Y.prototype.fitScreenCoordinates=function(q,te,ve,Ce,Ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(q)),this.transform.pointLocation(l.Point.convert(te)),ve,Ce),Ce,Ne)},Y.prototype._fitInternal=function(q,te,ve){return q?(delete(te=l.extend(q,te)).padding,te.linear?this.easeTo(te,ve):this.flyTo(te,ve)):this},Y.prototype.jumpTo=function(q,te){this.stop();var ve=this.transform,Ce=!1,Ne=!1,qe=!1;return"zoom"in q&&ve.zoom!==+q.zoom&&(Ce=!0,ve.zoom=+q.zoom),void 0!==q.center&&(ve.center=l.LngLat.convert(q.center)),"bearing"in q&&ve.bearing!==+q.bearing&&(Ne=!0,ve.bearing=+q.bearing),"pitch"in q&&ve.pitch!==+q.pitch&&(qe=!0,ve.pitch=+q.pitch),null==q.padding||ve.isPaddingEqual(q.padding)||(ve.padding=q.padding),this.fire(new l.Event("movestart",te)).fire(new l.Event("move",te)),Ce&&this.fire(new l.Event("zoomstart",te)).fire(new l.Event("zoom",te)).fire(new l.Event("zoomend",te)),Ne&&this.fire(new l.Event("rotatestart",te)).fire(new l.Event("rotate",te)).fire(new l.Event("rotateend",te)),qe&&this.fire(new l.Event("pitchstart",te)).fire(new l.Event("pitch",te)).fire(new l.Event("pitchend",te)),this.fire(new l.Event("moveend",te))},Y.prototype.easeTo=function(q,te){var ve=this;this._stop(!1,q.easeId),(!1===(q=l.extend({offset:[0,0],duration:500,easing:l.ease},q)).animate||!q.essential&&l.browser.prefersReducedMotion)&&(q.duration=0);var Ce=this.transform,Ne=this.getZoom(),qe=this.getBearing(),et=this.getPitch(),vt=this.getPadding(),yt="zoom"in q?+q.zoom:Ne,ee="bearing"in q?this._normalizeBearing(q.bearing,qe):qe,ue="pitch"in q?+q.pitch:et,Ae="padding"in q?q.padding:Ce.padding,Oe=l.Point.convert(q.offset),Fe=Ce.centerPoint.add(Oe),Ue=Ce.pointLocation(Fe),We=l.LngLat.convert(q.center||Ue);this._normalizeCenter(We);var Je,it,ut=Ce.project(Ue),St=Ce.project(We).sub(ut),Dt=Ce.zoomScale(yt-Ne);q.around&&(Je=l.LngLat.convert(q.around),it=Ce.locationPoint(Je));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||yt!==Ne,this._rotating=this._rotating||qe!==ee,this._pitching=this._pitching||ue!==et,this._padding=!Ce.isPaddingEqual(Ae),this._easeId=q.easeId,this._prepareEase(te,q.noMoveStart,Ft),clearTimeout(this._easeEndTimeoutID),this._ease(function(Wt){if(ve._zooming&&(Ce.zoom=l.number(Ne,yt,Wt)),ve._rotating&&(Ce.bearing=l.number(qe,ee,Wt)),ve._pitching&&(Ce.pitch=l.number(et,ue,Wt)),ve._padding&&(Ce.interpolatePadding(vt,Ae,Wt),Fe=Ce.centerPoint.add(Oe)),Je)Ce.setLocationAtPoint(Je,it);else{var cn=Ce.zoomScale(Ce.zoom-Ne),Yt=yt>Ne?Math.min(2,Dt):Math.max(.5,Dt),en=Math.pow(Yt,1-Wt),Xt=Ce.unproject(ut.add(St.mult(Wt*en)).mult(cn));Ce.setLocationAtPoint(Ce.renderWorldCopies?Xt.wrap():Xt,Fe)}ve._fireMoveEvents(te)},function(Wt){ve._afterEase(te,Wt)},q),this},Y.prototype._prepareEase=function(q,te,ve){void 0===ve&&(ve={}),this._moving=!0,te||ve.moving||this.fire(new l.Event("movestart",q)),this._zooming&&!ve.zooming&&this.fire(new l.Event("zoomstart",q)),this._rotating&&!ve.rotating&&this.fire(new l.Event("rotatestart",q)),this._pitching&&!ve.pitching&&this.fire(new l.Event("pitchstart",q))},Y.prototype._fireMoveEvents=function(q){this.fire(new l.Event("move",q)),this._zooming&&this.fire(new l.Event("zoom",q)),this._rotating&&this.fire(new l.Event("rotate",q)),this._pitching&&this.fire(new l.Event("pitch",q))},Y.prototype._afterEase=function(q,te){if(!this._easeId||!te||this._easeId!==te){delete this._easeId;var ve=this._zooming,Ce=this._rotating,Ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ve&&this.fire(new l.Event("zoomend",q)),Ce&&this.fire(new l.Event("rotateend",q)),Ne&&this.fire(new l.Event("pitchend",q)),this.fire(new l.Event("moveend",q))}},Y.prototype.flyTo=function(q,te){var ve=this;if(!q.essential&&l.browser.prefersReducedMotion){var Ce=l.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ce,te)}this.stop(),q=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},q);var Ne=this.transform,qe=this.getZoom(),et=this.getBearing(),vt=this.getPitch(),yt=this.getPadding(),ee="zoom"in q?l.clamp(+q.zoom,Ne.minZoom,Ne.maxZoom):qe,ue="bearing"in q?this._normalizeBearing(q.bearing,et):et,Ae="pitch"in q?+q.pitch:vt,Oe="padding"in q?q.padding:Ne.padding,Fe=Ne.zoomScale(ee-qe),Ue=l.Point.convert(q.offset),We=Ne.centerPoint.add(Ue),Je=Ne.pointLocation(We),it=l.LngLat.convert(q.center||Je);this._normalizeCenter(it);var ut=Ne.project(Je),St=Ne.project(it).sub(ut),Dt=q.curve,Ft=Math.max(Ne.width,Ne.height),Wt=Ft/Fe,cn=St.mag();if("minZoom"in q){var Yt=l.clamp(Math.min(q.minZoom,qe,ee),Ne.minZoom,Ne.maxZoom),en=Ft/Ne.zoomScale(Yt-qe);Dt=Math.sqrt(en/cn*2)}var Xt=Dt*Dt;function bn(ur){var dr=(Wt*Wt-Ft*Ft+(ur?-1:1)*Xt*Xt*cn*cn)/(2*(ur?Wt:Ft)*Xt*cn);return Math.log(Math.sqrt(dr*dr+1)-dr)}function gn(ur){return(Math.exp(ur)-Math.exp(-ur))/2}function $t(ur){return(Math.exp(ur)+Math.exp(-ur))/2}var On=bn(0),Dn=function(ur){return $t(On)/$t(On+Dt*ur)},Yn=function(ur){return Ft*(($t(On)*(gn(dr=On+Dt*ur)/$t(dr))-gn(On))/Xt)/cn;var dr},Xn=(bn(1)-On)/Dt;if(Math.abs(cn)<1e-6||!isFinite(Xn)){if(Math.abs(Ft-Wt)<1e-6)return this.easeTo(q,te);var gr=Wt<Ft?-1:1;Xn=Math.abs(Math.log(Wt/Ft))/Dt,Yn=function(){return 0},Dn=function(ur){return Math.exp(gr*Dt*ur)}}return q.duration="duration"in q?+q.duration:1e3*Xn/("screenSpeed"in q?+q.screenSpeed/Dt:+q.speed),q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=et!==ue,this._pitching=Ae!==vt,this._padding=!Ne.isPaddingEqual(Oe),this._prepareEase(te,!1),this._ease(function(ur){var dr=ur*Xn,kr=1/Dn(dr);Ne.zoom=1===ur?ee:qe+Ne.scaleZoom(kr),ve._rotating&&(Ne.bearing=l.number(et,ue,ur)),ve._pitching&&(Ne.pitch=l.number(vt,Ae,ur)),ve._padding&&(Ne.interpolatePadding(yt,Oe,ur),We=Ne.centerPoint.add(Ue));var Vr=1===ur?it:Ne.unproject(ut.add(St.mult(Yn(dr))).mult(kr));Ne.setLocationAtPoint(Ne.renderWorldCopies?Vr.wrap():Vr,We),ve._fireMoveEvents(te)},function(){return ve._afterEase(te)},q),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(q,te){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ve=this._onEaseEnd;delete this._onEaseEnd,ve.call(this,te)}if(!q){var Ce=this.handlers;Ce&&Ce.stop()}return this},Y.prototype._ease=function(q,te,ve){!1===ve.animate||0===ve.duration?(q(1),te()):(this._easeStart=l.browser.now(),this._easeOptions=ve,this._onEaseFrame=q,this._onEaseEnd=te,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var q=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(q,te){q=l.wrap(q,-180,180);var ve=Math.abs(q-te);return Math.abs(q-360-te)<ve&&(q-=360),Math.abs(q+360-te)<ve&&(q+=360),q},Y.prototype._normalizeCenter=function(q){var te=this.transform;if(te.renderWorldCopies&&!te.lngRange){var ve=q.lng-te.center.lng;q.lng+=ve>180?-360:ve<-180?360:0}},Y}(l.Evented),Aa=function(D){void 0===D&&(D={}),this.options=D,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Aa.prototype.getDefaultPosition=function(){return"bottom-right"},Aa.prototype.onAdd=function(D){var Y=this.options&&this.options.compact;return this._map=D,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===Y&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Aa.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Aa.prototype._updateEditLink=function(){var D=this._editLink;D||(D=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(D){var q=Y.reduce(function(te,ve,Ce){return ve.value&&(te+=ve.key+"="+ve.value+(Ce<Y.length-1?"&":"")),te},"?");D.href=l.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),D.rel="noopener nofollow"}},Aa.prototype._updateData=function(D){!D||"metadata"!==D.sourceDataType&&"style"!==D.dataType||(this._updateAttributions(),this._updateEditLink())},Aa.prototype._updateAttributions=function(){if(this._map.style){var D=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?D=D.concat(this.options.customAttribution.map(function(qe){return"string"!=typeof qe?"":qe})):"string"==typeof this.options.customAttribution&&D.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}var q=this._map.style.sourceCaches;for(var te in q){var ve=q[te];if(ve.used){var Ce=ve.getSource();Ce.attribution&&D.indexOf(Ce.attribution)<0&&D.push(Ce.attribution)}}D.sort(function(qe,et){return qe.length-et.length});var Ne=(D=D.filter(function(qe,et){for(var vt=et+1;vt<D.length;vt++)if(D[vt].indexOf(qe)>=0)return!1;return!0})).join(" | ");Ne!==this._attribHTML&&(this._attribHTML=Ne,D.length?(this._innerContainer.innerHTML=Ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Aa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Fa=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Fa.prototype.onAdd=function(D){this._map=D,this._container=b.create("div","mapboxgl-ctrl");var Y=b.create("a","mapboxgl-ctrl-logo");return Y.target="_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Fa.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Fa.prototype.getDefaultPosition=function(){return"bottom-left"},Fa.prototype._updateLogo=function(D){D&&"metadata"!==D.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Fa.prototype._logoRequired=function(){if(this._map.style){var D=this._map.style.sourceCaches;for(var Y in D)if(D[Y].getSource().mapbox_logo)return!0;return!1}},Fa.prototype._updateCompact=function(){var D=this._container.children;if(D.length){var Y=D[0];this._map.getCanvasContainer().offsetWidth<250?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact")}};var Ka=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ka.prototype.add=function(D){var Y=++this._id;return this._queue.push({callback:D,id:Y,cancelled:!1}),Y},Ka.prototype.remove=function(D){for(var Y=this._currentlyRunning,q=0,te=Y?this._queue.concat(Y):this._queue;q<te.length;q+=1){var ve=te[q];if(ve.id===D)return void(ve.cancelled=!0)}},Ka.prototype.run=function(D){void 0===D&&(D=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,te=Y;q<te.length;q+=1){var ve=te[q];if(!ve.cancelled&&(ve.callback(D),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ka.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ua={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ni=l.window.HTMLImageElement,Vi=l.window.HTMLElement,Ha=l.window.ImageBitmap,ca=60,$a={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ca,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ao=function(D){function Y(te){var ve=this;if(null!=(te=l.extend({},$a,te)).minZoom&&null!=te.maxZoom&&te.minZoom>te.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=te.minPitch&&null!=te.maxPitch&&te.minPitch>te.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=te.minPitch&&te.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=te.maxPitch&&te.maxPitch>ca)throw new Error("maxPitch must be less than or equal to 60");var Ce=new Xr(te.minZoom,te.maxZoom,te.minPitch,te.maxPitch,te.renderWorldCopies);if(D.call(this,Ce,te),this._interactive=te.interactive,this._maxTileCacheSize=te.maxTileCacheSize,this._failIfMajorPerformanceCaveat=te.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=te.preserveDrawingBuffer,this._antialias=te.antialias,this._trackResize=te.trackResize,this._bearingSnap=te.bearingSnap,this._refreshExpiredTiles=te.refreshExpiredTiles,this._fadeDuration=te.fadeDuration,this._crossSourceCollisions=te.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=te.collectResourceTiming,this._renderTaskQueue=new Ka,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ua,te.locale),this._requestManager=new l.RequestManager(te.transformRequest,te.accessToken),"string"==typeof te.container){if(this._container=l.window.document.getElementById(te.container),!this._container)throw new Error("Container '"+te.container+"' not found.")}else{if(!(te.container instanceof Vi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=te.container}if(te.maxBounds&&this.setMaxBounds(te.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ve._update(!1)}),this.on("moveend",function(){return ve._update(!1)}),this.on("zoom",function(){return ve._update(!0)}),void 0!==l.window&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ri(this,te),this._hash=te.hash&&new so("string"==typeof te.hash&&te.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:te.center,zoom:te.zoom,bearing:te.bearing,pitch:te.pitch}),te.bounds&&(this.resize(),this.fitBounds(te.bounds,l.extend({},te.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=te.localIdeographFontFamily,te.style&&this.setStyle(te.style,{localIdeographFontFamily:te.localIdeographFontFamily}),te.attributionControl&&this.addControl(new Aa({customAttribution:te.customAttribution})),this.addControl(new Fa,te.logoPosition),this.on("style.load",function(){ve.transform.unmodified&&ve.jumpTo(ve.style.stylesheet)}),this.on("data",function(qe){ve._update("style"===qe.dataType),ve.fire(new l.Event(qe.dataType+"data",qe))}),this.on("dataloading",function(qe){ve.fire(new l.Event(qe.dataType+"dataloading",qe))})}D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(te,ve){if(void 0===ve&&te.getDefaultPosition&&(ve=te.getDefaultPosition()),void 0===ve&&(ve="top-right"),!te||!te.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=te.onAdd(this);this._controls.push(te);var Ne=this._controlPositions[ve];return-1!==ve.indexOf("bottom")?Ne.insertBefore(Ce,Ne.firstChild):Ne.appendChild(Ce),this},Y.prototype.removeControl=function(te){if(!te||!te.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ve=this._controls.indexOf(te);return ve>-1&&this._controls.splice(ve,1),te.onRemove(this),this},Y.prototype.resize=function(te){var ve=this._containerDimensions(),Ce=ve[0],Ne=ve[1];this._resizeCanvas(Ce,Ne),this.transform.resize(Ce,Ne),this.painter.resize(Ce,Ne);var qe=!this._moving;return qe&&(this.stop(),this.fire(new l.Event("movestart",te)).fire(new l.Event("move",te))),this.fire(new l.Event("resize",te)),qe&&this.fire(new l.Event("moveend",te)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(te){return this.transform.setMaxBounds(l.LngLatBounds.convert(te)),this._update()},Y.prototype.setMinZoom=function(te){if((te=te??-2)>=-2&&te<=this.transform.maxZoom)return this.transform.minZoom=te,this._update(),this.getZoom()<te&&this.setZoom(te),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(te){if((te=te??22)>=this.transform.minZoom)return this.transform.maxZoom=te,this._update(),this.getZoom()>te&&this.setZoom(te),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(te){if((te=te??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(te>=0&&te<=this.transform.maxPitch)return this.transform.minPitch=te,this._update(),this.getPitch()<te&&this.setPitch(te),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(te){if((te=te??ca)>ca)throw new Error("maxPitch must be less than or equal to 60");if(te>=this.transform.minPitch)return this.transform.maxPitch=te,this._update(),this.getPitch()>te&&this.setPitch(te),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(te){return this.transform.renderWorldCopies=te,this._update()},Y.prototype.project=function(te){return this.transform.locationPoint(l.LngLat.convert(te))},Y.prototype.unproject=function(te){return this.transform.pointLocation(l.Point.convert(te))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(te,ve,Ce){var Ne,qe=this;if("mouseenter"===te||"mouseover"===te){var et=!1;return{layer:ve,listener:Ce,delegates:{mousemove:function(yt){var ee=qe.getLayer(ve)?qe.queryRenderedFeatures(yt.point,{layers:[ve]}):[];ee.length?et||(et=!0,Ce.call(qe,new mi(te,qe,yt.originalEvent,{features:ee}))):et=!1},mouseout:function(){et=!1}}}}if("mouseleave"===te||"mouseout"===te){var vt=!1;return{layer:ve,listener:Ce,delegates:{mousemove:function(yt){(qe.getLayer(ve)?qe.queryRenderedFeatures(yt.point,{layers:[ve]}):[]).length?vt=!0:vt&&(vt=!1,Ce.call(qe,new mi(te,qe,yt.originalEvent)))},mouseout:function(yt){vt&&(vt=!1,Ce.call(qe,new mi(te,qe,yt.originalEvent)))}}}}return{layer:ve,listener:Ce,delegates:(Ne={},Ne[te]=function(yt){var ee=qe.getLayer(ve)?qe.queryRenderedFeatures(yt.point,{layers:[ve]}):[];ee.length&&(yt.features=ee,Ce.call(qe,yt),delete yt.features)},Ne)}},Y.prototype.on=function(te,ve,Ce){if(void 0===Ce)return D.prototype.on.call(this,te,ve);var Ne=this._createDelegatedListener(te,ve,Ce);for(var qe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[te]=this._delegatedListeners[te]||[],this._delegatedListeners[te].push(Ne),Ne.delegates)this.on(qe,Ne.delegates[qe]);return this},Y.prototype.once=function(te,ve,Ce){if(void 0===Ce)return D.prototype.once.call(this,te,ve);var Ne=this._createDelegatedListener(te,ve,Ce);for(var qe in Ne.delegates)this.once(qe,Ne.delegates[qe]);return this},Y.prototype.off=function(te,ve,Ce){var Ne=this;return void 0===Ce?D.prototype.off.call(this,te,ve):(this._delegatedListeners&&this._delegatedListeners[te]&&function(qe){for(var et=qe[te],vt=0;vt<et.length;vt++){var yt=et[vt];if(yt.layer===ve&&yt.listener===Ce){for(var ee in yt.delegates)Ne.off(ee,yt.delegates[ee]);return et.splice(vt,1),Ne}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(te,ve){if(!this.style)return[];var Ce;if(void 0!==ve||void 0===te||te instanceof l.Point||Array.isArray(te)||(ve=te,te=void 0),ve=ve||{},(te=te||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||"number"==typeof te[0])Ce=[l.Point.convert(te)];else{var Ne=l.Point.convert(te[0]),qe=l.Point.convert(te[1]);Ce=[Ne,new l.Point(qe.x,Ne.y),qe,new l.Point(Ne.x,qe.y),Ne]}return this.style.queryRenderedFeatures(Ce,ve,this.transform)},Y.prototype.querySourceFeatures=function(te,ve){return this.style.querySourceFeatures(te,ve)},Y.prototype.setStyle=function(te,ve){return!1!==(ve=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ve)).diff&&ve.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&te?(this._diffStyle(te,ve),this):(this._localIdeographFontFamily=ve.localIdeographFontFamily,this._updateStyle(te,ve))},Y.prototype._getUIString=function(te){var ve=this._locale[te];if(null==ve)throw new Error("Missing UI string '"+te+"'");return ve},Y.prototype._updateStyle=function(te,ve){return this.style&&(this.style.setEventedParent(null),this.style._remove()),te?(this.style=new ar(this,ve||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof te?this.style.loadURL(te):this.style.loadJSON(te),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ar(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(te,ve){var Ce=this;if("string"==typeof te){var Ne=this._requestManager.normalizeStyleURL(te),qe=this._requestManager.transformRequest(Ne,l.ResourceType.Style);l.getJSON(qe,function(et,vt){et?Ce.fire(new l.ErrorEvent(et)):vt&&Ce._updateDiff(vt,ve)})}else"object"==typeof te&&this._updateDiff(te,ve)},Y.prototype._updateDiff=function(te,ve){try{this.style.setState(te)&&this._update(!0)}catch(Ce){l.warnOnce("Unable to perform style diff: "+(Ce.message||Ce.error||Ce)+".  Rebuilding the style from scratch."),this._updateStyle(te,ve)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(te,ve){return this._lazyInitEmptyStyle(),this.style.addSource(te,ve),this._update(!0)},Y.prototype.isSourceLoaded=function(te){var ve=this.style&&this.style.sourceCaches[te];if(void 0!==ve)return ve.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+te+"'")))},Y.prototype.areTilesLoaded=function(){var te=this.style&&this.style.sourceCaches;for(var ve in te){var Ce=te[ve]._tiles;for(var Ne in Ce){var qe=Ce[Ne];if("loaded"!==qe.state&&"errored"!==qe.state)return!1}}return!0},Y.prototype.addSourceType=function(te,ve,Ce){return this._lazyInitEmptyStyle(),this.style.addSourceType(te,ve,Ce)},Y.prototype.removeSource=function(te){return this.style.removeSource(te),this._update(!0)},Y.prototype.getSource=function(te){return this.style.getSource(te)},Y.prototype.addImage=function(te,ve,Ce){void 0===Ce&&(Ce={});var Ne=Ce.pixelRatio;void 0===Ne&&(Ne=1);var qe=Ce.sdf;void 0===qe&&(qe=!1);var et=Ce.stretchX,vt=Ce.stretchY,yt=Ce.content;if(this._lazyInitEmptyStyle(),ve instanceof ni||Ha&&ve instanceof Ha){var ee=l.browser.getImageData(ve);this.style.addImage(te,{data:new l.RGBAImage({width:ee.width,height:ee.height},ee.data),pixelRatio:Ne,stretchX:et,stretchY:vt,content:yt,sdf:qe,version:0})}else{if(void 0===ve.width||void 0===ve.height)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Je=ve;this.style.addImage(te,{data:new l.RGBAImage({width:ve.width,height:ve.height},new Uint8Array(ve.data)),pixelRatio:Ne,stretchX:et,stretchY:vt,content:yt,sdf:qe,version:0,userImage:Je}),Je.onAdd&&Je.onAdd(this,te)}},Y.prototype.updateImage=function(te,ve){var Ce=this.style.getImage(te);if(!Ce)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ne=ve instanceof ni||Ha&&ve instanceof Ha?l.browser.getImageData(ve):ve,qe=Ne.width,et=Ne.height,vt=Ne.data;return void 0===qe||void 0===et?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):qe!==Ce.data.width||et!==Ce.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Ce.data.replace(vt,!(ve instanceof ni||Ha&&ve instanceof Ha)),void this.style.updateImage(te,Ce))},Y.prototype.hasImage=function(te){return te?!!this.style.getImage(te):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(te){this.style.removeImage(te)},Y.prototype.loadImage=function(te,ve){l.getImage(this._requestManager.transformRequest(te,l.ResourceType.Image),ve)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(te,ve){return this._lazyInitEmptyStyle(),this.style.addLayer(te,ve),this._update(!0)},Y.prototype.moveLayer=function(te,ve){return this.style.moveLayer(te,ve),this._update(!0)},Y.prototype.removeLayer=function(te){return this.style.removeLayer(te),this._update(!0)},Y.prototype.getLayer=function(te){return this.style.getLayer(te)},Y.prototype.setLayerZoomRange=function(te,ve,Ce){return this.style.setLayerZoomRange(te,ve,Ce),this._update(!0)},Y.prototype.setFilter=function(te,ve,Ce){return void 0===Ce&&(Ce={}),this.style.setFilter(te,ve,Ce),this._update(!0)},Y.prototype.getFilter=function(te){return this.style.getFilter(te)},Y.prototype.setPaintProperty=function(te,ve,Ce,Ne){return void 0===Ne&&(Ne={}),this.style.setPaintProperty(te,ve,Ce,Ne),this._update(!0)},Y.prototype.getPaintProperty=function(te,ve){return this.style.getPaintProperty(te,ve)},Y.prototype.setLayoutProperty=function(te,ve,Ce,Ne){return void 0===Ne&&(Ne={}),this.style.setLayoutProperty(te,ve,Ce,Ne),this._update(!0)},Y.prototype.getLayoutProperty=function(te,ve){return this.style.getLayoutProperty(te,ve)},Y.prototype.setLight=function(te,ve){return void 0===ve&&(ve={}),this._lazyInitEmptyStyle(),this.style.setLight(te,ve),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(te,ve){return this.style.setFeatureState(te,ve),this._update()},Y.prototype.removeFeatureState=function(te,ve){return this.style.removeFeatureState(te,ve),this._update()},Y.prototype.getFeatureState=function(te){return this.style.getFeatureState(te)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var te=0,ve=0;return this._container&&(te=this._container.clientWidth||400,ve=this._container.clientHeight||300),[te,ve]},Y.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var te=this._container;te.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",te)).style.visibility="hidden",this._detectMissingCSS();var ve=this._canvasContainer=b.create("div","mapboxgl-canvas-container",te);this._interactive&&ve.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",ve),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ce=this._containerDimensions();this._resizeCanvas(Ce[0],Ce[1]);var Ne=this._controlContainer=b.create("div","mapboxgl-control-container",te),qe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(et){qe[et]=b.create("div","mapboxgl-ctrl-"+et,Ne)})},Y.prototype._resizeCanvas=function(te,ve){var Ce=l.browser.devicePixelRatio||1;this._canvas.width=Ce*te,this._canvas.height=Ce*ve,this._canvas.style.width=te+"px",this._canvas.style.height=ve+"px"},Y.prototype._setupPainter=function(){var te=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ve=this._canvas.getContext("webgl",te)||this._canvas.getContext("experimental-webgl",te);ve?(this.painter=new ai(ve,this.transform),l.webpSupported.testSupport(ve)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(te){te.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:te}))},Y.prototype._contextRestored=function(te){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:te}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(te){return this.style?(this._styleDirty=this._styleDirty||te,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(te){return this._update(),this._renderTaskQueue.add(te)},Y.prototype._cancelRenderFrame=function(te){this._renderTaskQueue.remove(te)},Y.prototype._render=function(te){var ve,Ce=this,Ne=0,qe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ve=qe.createQueryEXT(),qe.beginQueryEXT(qe.TIME_ELAPSED_EXT,ve),Ne=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(te),!this._removed){var et=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var vt=this.transform.zoom,yt=l.browser.now();this.style.zoomHistory.update(vt,yt);var ee=new l.EvaluationParameters(vt,{now:yt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ue=ee.crossFadingFactor();1===ue&&ue===this._crossFadingFactor||(et=!0,this._crossFadingFactor=ue),this.style.update(ee)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||et)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ae=l.browser.now()-Ne;qe.endQueryEXT(qe.TIME_ELAPSED_EXT,ve),setTimeout(function(){var Fe=qe.getQueryObjectEXT(ve,qe.QUERY_RESULT_EXT)/1e6;qe.deleteQueryEXT(ve),Ce.fire(new l.Event("gpu-timing-frame",{cpuTime:Ae,gpuTime:Fe}))},50)}if(this.listens("gpu-timing-layer")){var Oe=this.painter.collectGpuTimers();setTimeout(function(){var Fe=Ce.painter.queryGpuTimers(Oe);Ce.fire(new l.Event("gpu-timing-layer",{layerTimes:Fe}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var te=0,ve=this._controls;te<ve.length;te+=1)ve[te].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==l.window&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Ce=this.painter.context.gl.getExtension("WEBGL_lose_context");Ce&&Ce.loseContext(),co(this._canvasContainer),co(this._controlContainer),co(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},Y.prototype.triggerRepaint=function(){var te=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(ve){te._frame=null,te._render(ve)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(te){this._trackResize&&this.resize({originalEvent:te})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(te){this._showTileBoundaries!==te&&(this._showTileBoundaries=te,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(te){this._showPadding!==te&&(this._showPadding=te,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(te){this._showCollisionBoxes!==te&&(this._showCollisionBoxes=te,te?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(te){this._showOverdrawInspector!==te&&(this._showOverdrawInspector=te,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(te){this._repaint!==te&&(this._repaint=te,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(te){this._vertices=te,this._update()},Y.prototype._setCacheLimits=function(te,ve){l.setCacheLimits(te,ve)},q.version.get=function(){return l.version},Object.defineProperties(Y.prototype,q),Y}(xs);function co(D){D.parentNode&&D.parentNode.removeChild(D)}var Ki={showCompass:!0,showZoom:!0,visualizePitch:!1},Ba=function(D){var Y=this;this.options=l.extend({},Ki,D),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return Y._map.zoomIn({},{originalEvent:q})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return Y._map.zoomOut({},{originalEvent:q})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){Y.options.visualizePitch?Y._map.resetNorthPitch({},{originalEvent:q}):Y._map.resetNorth({},{originalEvent:q})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ba.prototype._updateZoomButtons=function(){var D=this._map.getZoom();this._zoomInButton.disabled=D===this._map.getMaxZoom(),this._zoomOutButton.disabled=D===this._map.getMinZoom()},Ba.prototype._rotateCompassArrow=function(){var D=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=D},Ba.prototype.onAdd=function(D){return this._map=D,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mr(this._map,this._compass,this.options.visualizePitch)),this._container},Ba.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ba.prototype._createButton=function(D,Y){var q=b.create("button",D,this._container);return q.type="button",q.addEventListener("click",Y),q},Ba.prototype._setButtonTitle=function(D,Y){var q=this._map._getUIString("NavigationControl."+Y);D.title=q,D.setAttribute("aria-label",q)};var Mr=function(D,Y,q){void 0===q&&(q=!1),this._clickTolerance=10,this.element=Y,this.mouseRotate=new Cs({clickTolerance:D.dragRotate._mouseRotate._clickTolerance}),this.map=D,q&&(this.mousePitch=new Ps({clickTolerance:D.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(Y,"mousedown",this.mousedown),b.addEventListener(Y,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(Y,"touchmove",this.touchmove),b.addEventListener(Y,"touchend",this.touchend),b.addEventListener(Y,"touchcancel",this.reset)};function Or(D,Y,q){if(D=new l.LngLat(D.lng,D.lat),Y){var te=new l.LngLat(D.lng-360,D.lat),ve=new l.LngLat(D.lng+360,D.lat),Ce=q.locationPoint(D).distSqr(Y);q.locationPoint(te).distSqr(Y)<Ce?D=te:q.locationPoint(ve).distSqr(Y)<Ce&&(D=ve)}for(;Math.abs(D.lng-q.center.lng)>180;){var Ne=q.locationPoint(D);if(Ne.x>=0&&Ne.y>=0&&Ne.x<=q.width&&Ne.y<=q.height)break;D.lng>q.center.lng?D.lng-=360:D.lng+=360}return D}Mr.prototype.down=function(D,Y){this.mouseRotate.mousedown(D,Y),this.mousePitch&&this.mousePitch.mousedown(D,Y),b.disableDrag()},Mr.prototype.move=function(D,Y){var q=this.map,te=this.mouseRotate.mousemoveWindow(D,Y);if(te&&te.bearingDelta&&q.setBearing(q.getBearing()+te.bearingDelta),this.mousePitch){var ve=this.mousePitch.mousemoveWindow(D,Y);ve&&ve.pitchDelta&&q.setPitch(q.getPitch()+ve.pitchDelta)}},Mr.prototype.off=function(){var D=this.element;b.removeEventListener(D,"mousedown",this.mousedown),b.removeEventListener(D,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(D,"touchmove",this.touchmove),b.removeEventListener(D,"touchend",this.touchend),b.removeEventListener(D,"touchcancel",this.reset),this.offTemp()},Mr.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(l.window,"mousemove",this.mousemove),b.removeEventListener(l.window,"mouseup",this.mouseup)},Mr.prototype.mousedown=function(D){this.down(l.extend({},D,{ctrlKey:!0,preventDefault:function(){return D.preventDefault()}}),b.mousePos(this.element,D)),b.addEventListener(l.window,"mousemove",this.mousemove),b.addEventListener(l.window,"mouseup",this.mouseup)},Mr.prototype.mousemove=function(D){this.move(D,b.mousePos(this.element,D))},Mr.prototype.mouseup=function(D){this.mouseRotate.mouseupWindow(D),this.mousePitch&&this.mousePitch.mouseupWindow(D),this.offTemp()},Mr.prototype.touchstart=function(D){1!==D.targetTouches.length?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,D.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return D.preventDefault()}},this._startPos))},Mr.prototype.touchmove=function(D){1!==D.targetTouches.length?this.reset():(this._lastPos=b.touchPos(this.element,D.targetTouches)[0],this.move({preventDefault:function(){return D.preventDefault()}},this._lastPos))},Mr.prototype.touchend=function(D){0===D.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var rs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fo(D,Y,q){var te=D.classList;for(var ve in rs)te.remove("mapboxgl-"+q+"-anchor-"+ve);te.add("mapboxgl-"+q+"-anchor-"+Y)}var qa,$i=function(D){function Y(q,te){var ve=this;if(D.call(this),(q instanceof l.window.HTMLElement||te)&&(q=l.extend({element:q},te)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._draggable=q&&q.draggable||!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&"auto"!==q.pitchAlignment?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=l.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var Ce=b.createNS("http://www.w3.org/2000/svg","svg");Ce.setAttributeNS(null,"display","block"),Ce.setAttributeNS(null,"height","41px"),Ce.setAttributeNS(null,"width","27px"),Ce.setAttributeNS(null,"viewBox","0 0 27 41");var Ne=b.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"stroke","none"),Ne.setAttributeNS(null,"stroke-width","1"),Ne.setAttributeNS(null,"fill","none"),Ne.setAttributeNS(null,"fill-rule","evenodd");var qe=b.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill-rule","nonzero");var et=b.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(3.0, 29.0)"),et.setAttributeNS(null,"fill","#000000");for(var vt=0,yt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];vt<yt.length;vt+=1){var ee=yt[vt],ue=b.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",ee.rx),ue.setAttributeNS(null,"ry",ee.ry),et.appendChild(ue)}var Ae=b.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill",this._color);var Oe=b.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ae.appendChild(Oe);var Fe=b.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"opacity","0.25"),Fe.setAttributeNS(null,"fill","#000000");var Ue=b.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Fe.appendChild(Ue);var We=b.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"transform","translate(6.0, 7.0)"),We.setAttributeNS(null,"fill","#FFFFFF");var Je=b.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(8.0, 8.0)");var it=b.createNS("http://www.w3.org/2000/svg","circle");it.setAttributeNS(null,"fill","#000000"),it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"cx","5.5"),it.setAttributeNS(null,"cy","5.5"),it.setAttributeNS(null,"r","5.4999962");var ut=b.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Je.appendChild(it),Je.appendChild(ut),qe.appendChild(et),qe.appendChild(Ae),qe.appendChild(Fe),qe.appendChild(We),qe.appendChild(Je),Ce.appendChild(qe),this._element.appendChild(Ce),this._offset=l.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(St){St.preventDefault()}),this._element.addEventListener("mousedown",function(St){St.preventDefault()}),this._element.addEventListener("focus",function(){var St=ve._map.getContainer();St.scrollTop=0,St.scrollLeft=0}),fo(this._element,this._anchor,"marker"),this._popup=null}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=l.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var ve=Math.sqrt(Math.pow(13.5,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ve,-1*(24.6+ve)],"bottom-right":[-ve,-1*(24.6+ve)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(q){var te=q.code,ve=q.charCode||q.keyCode;"Space"!==te&&"Enter"!==te&&32!==ve&&13!==ve||this.togglePopup()},Y.prototype._onMapClick=function(q){var te=q.originalEvent.target,ve=this._element;this._popup&&(te===ve||ve.contains(te))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},Y.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Or(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var te="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?te="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(te="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ve="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ve="rotateX(0deg)":"map"===this._pitchAlignment&&(ve="rotateX("+this._map.getPitch()+"deg)"),q&&"moveend"!==q.type||(this._pos=this._pos.round()),b.setTransform(this._element,rs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ve+" "+te)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(q){return this._offset=l.Point.convert(q),this._update(),this},Y.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new l.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&"auto"!==q?q:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(l.Evented),zs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},fa=0,is=!1,ho=function(D){function Y(q){D.call(this),this.options=l.extend({},zs,q),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.onAdd=function(q){return this._map=q,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),te=this._setupUI,void 0!==qa?te(qa):void 0!==l.window.navigator.permissions?l.window.navigator.permissions.query({name:"geolocation"}).then(function(ve){te(qa="denied"!==ve.state)}):te(qa=!!l.window.navigator.geolocation),this._container;var te},Y.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fa=0,is=!1},Y.prototype._isOutOfMapMaxBounds=function(q){var te=this._map.getMaxBounds(),ve=q.coords;return te&&(ve.longitude<te.getWest()||ve.longitude>te.getEast()||ve.latitude<te.getSouth()||ve.latitude>te.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(q),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",q)),this._finish()}},Y.prototype._updateCamera=function(q){var te=new l.LngLat(q.coords.longitude,q.coords.latitude),ve=q.coords.accuracy,Ce=this._map.getBearing(),Ne=l.extend({bearing:Ce},this.options.fitBoundsOptions);this._map.fitBounds(te.toBounds(ve),Ne,{geolocateSource:!0})},Y.prototype._updateMarker=function(q){if(q){var te=new l.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(te).addTo(this._map),this._userLocationDotMarker.setLngLat(te).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,te=this._map.unproject([0,q]),ve=this._map.unproject([1,q]),Ce=te.distanceTo(ve),Ne=Math.ceil(2*this._accuracy/Ce);this._circleElement.style.width=Ne+"px",this._circleElement.style.height=Ne+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(1===q.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var te=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===q.code&&is)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",q)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(q){var te=this;if(this._container.addEventListener("contextmenu",function(Ne){return Ne.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===q){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ve=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve)}else{var Ce=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new $i(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $i({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ne){Ne.geolocateSource||"ACTIVE_LOCK"!==te._watchState||Ne.originalEvent&&"resize"===Ne.originalEvent.type||(te._watchState="BACKGROUND",te._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),te._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),te.fire(new l.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fa--,is=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++fa>1?(q={maximumAge:6e5,timeout:0},is=!0):(q=this.options.positionOptions,is=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(l.Evented),oi={maxWidth:100,unit:"metric"},fi=function(D){this.options=l.extend({},oi,D),l.bindAll(["_onMove","setUnit"],this)};function Rs(D,Y,q){var te=q&&q.maxWidth||100,ve=D._container.clientHeight/2,Ce=D.unproject([0,ve]),Ne=D.unproject([te,ve]),qe=Ce.distanceTo(Ne);if(q&&"imperial"===q.unit){var et=3.2808*qe;et>5280?Xe(Y,te,et/5280,D._getUIString("ScaleControl.Miles")):Xe(Y,te,et,D._getUIString("ScaleControl.Feet"))}else q&&"nautical"===q.unit?Xe(Y,te,qe/1852,D._getUIString("ScaleControl.NauticalMiles")):qe>=1e3?Xe(Y,te,qe/1e3,D._getUIString("ScaleControl.Kilometers")):Xe(Y,te,qe,D._getUIString("ScaleControl.Meters"))}function Xe(D,Y,q,te){var ve,Ce,Ne,vt,yt,qe=(ve=q,(Ce=Math.pow(10,(""+Math.floor(ve)).length-1))*((Ne=ve/Ce)>=10?10:Ne>=5?5:Ne>=3?3:Ne>=2?2:Ne>=1?1:(vt=Ne,yt=Math.pow(10,Math.ceil(-Math.log(vt)/Math.LN10)),Math.round(vt*yt)/yt)));D.style.width=Y*(qe/q)+"px",D.innerHTML=qe+"&nbsp;"+te}fi.prototype.getDefaultPosition=function(){return"bottom-left"},fi.prototype._onMove=function(){Rs(this._map,this._container,this.options)},fi.prototype.onAdd=function(D){return this._map=D,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",D.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},fi.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},fi.prototype.setUnit=function(D){this.options.unit=D,Rs(this._map,this._container,this.options)};var $e=function(D){this._fullscreen=!1,D&&D.container&&(D.container instanceof l.window.HTMLElement?this._container=D.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};$e.prototype.onAdd=function(D){return this._map=D,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$e.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},$e.prototype._setupUI=function(){var D=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",D).setAttribute("aria-hidden",!0),D.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._updateTitle=function(){var D=this._getTitle();this._fullscreenButton.setAttribute("aria-label",D),this._fullscreenButton.title=D},$e.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$e.prototype._isFullscreen=function(){return this._fullscreen},$e.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$e.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ot={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ft=function(D){function Y(q){D.call(this),this.options=l.extend(Object.create(ot),q),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return D&&(Y.__proto__=D),(Y.prototype=Object.create(D&&D.prototype)).constructor=Y,Y.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=l.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(q){return this.setDOMContent(l.window.document.createTextNode(q))},Y.prototype.setHTML=function(q){var te,ve=l.window.document.createDocumentFragment(),Ce=l.window.document.createElement("body");for(Ce.innerHTML=q;te=Ce.firstChild;)ve.appendChild(te);return this.setDOMContent(ve)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},Y.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},Y.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},Y.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},Y.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},Y.prototype._createContent=function(){this._content&&b.remove(this._content),this._content=b.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(q){this._update(q.point)},Y.prototype._onMouseMove=function(q){this._update(q.point)},Y.prototype._onDrag=function(q){this._update(q.point)},Y.prototype._update=function(q){var te=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ue){return te._container.classList.add(ue)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Or(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var Ce=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Ne=this.options.anchor,qe=xt(this.options.offset);if(!Ne){var et,vt=this._container.offsetWidth,yt=this._container.offsetHeight;et=Ce.y+qe.bottom.y<yt?["top"]:Ce.y>this._map.transform.height-yt?["bottom"]:[],Ce.x<vt/2?et.push("left"):Ce.x>this._map.transform.width-vt/2&&et.push("right"),Ne=0===et.length?"bottom":et.join("-")}var ee=Ce.add(qe[Ne]).round();b.setTransform(this._container,rs[Ne]+" translate("+ee.x+"px,"+ee.y+"px)"),fo(this._container,Ne,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(l.Evented);function xt(D){if(D){if("number"==typeof D){var Y=Math.round(Math.sqrt(.5*Math.pow(D,2)));return{center:new l.Point(0,0),top:new l.Point(0,D),"top-left":new l.Point(Y,Y),"top-right":new l.Point(-Y,Y),bottom:new l.Point(0,-D),"bottom-left":new l.Point(Y,-Y),"bottom-right":new l.Point(-Y,-Y),left:new l.Point(D,0),right:new l.Point(-D,0)}}if(D instanceof l.Point||Array.isArray(D)){var q=l.Point.convert(D);return{center:q,top:q,"top-left":q,"top-right":q,bottom:q,"bottom-left":q,"bottom-right":q,left:q,right:q}}return{center:l.Point.convert(D.center||[0,0]),top:l.Point.convert(D.top||[0,0]),"top-left":l.Point.convert(D["top-left"]||[0,0]),"top-right":l.Point.convert(D["top-right"]||[0,0]),bottom:l.Point.convert(D.bottom||[0,0]),"bottom-left":l.Point.convert(D["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(D["bottom-right"]||[0,0]),left:l.Point.convert(D.left||[0,0]),right:l.Point.convert(D.right||[0,0])}}return xt(new l.Point(0,0))}var mt={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Ao,NavigationControl:Ba,GeolocateControl:ho,AttributionControl:Aa,ScaleControl:fi,FullscreenControl:$e,Popup:ft,Marker:$i,Style:ar,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){At().acquire(st)},clearPrewarmedResources:function(){var D=Tt;D&&(D.isPreloaded()&&1===D.numActive()?(D.release(st),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(D){l.config.ACCESS_TOKEN=D},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(D){l.config.API_URL=D},get workerCount(){return ct.workerCount},set workerCount(D){ct.workerCount=D},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(D){l.config.MAX_PARALLEL_IMAGE_REQUESTS=D},clearStorage:function(D){l.clearTileCache(D)},workerUrl:""};return mt}),k}()},27084:function(Q){"use strict";Q.exports=Math.log2||function(z){return Math.log(z)*Math.LOG2E}},16825:function(Q,z,e){"use strict";Q.exports=function(A,l){l||(l=A,A=window);var T=0,b=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function o(g){var y=!1;return"altKey"in g&&(y=y||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(y=y||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(y=y||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(y=y||g.metaKey!==s.meta,s.meta=!!g.metaKey),y}function r(g,y){var p=k.x(y),m=k.y(y);"buttons"in y&&(g=0|y.buttons),(g!==T||p!==b||m!==d||o(y))&&(T=0|g,b=p||0,d=m||0,l&&l(T,b,d,s))}function n(g){r(0,g)}function a(){(T||b||d||s.shift||s.alt||s.meta||s.control)&&(b=d=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function i(g){o(g)&&l&&l(T,b,d,s)}function c(g){0===k.buttons(g)?r(0,g):r(T,g)}function h(g){r(T|k.buttons(g),g)}function f(g){r(T&~k.buttons(g),g)}function x(){t||(t=!0,A.addEventListener("mousemove",c),A.addEventListener("mousedown",h),A.addEventListener("mouseup",f),A.addEventListener("mouseleave",n),A.addEventListener("mouseenter",n),A.addEventListener("mouseout",n),A.addEventListener("mouseover",n),A.addEventListener("blur",a),A.addEventListener("keyup",i),A.addEventListener("keydown",i),A.addEventListener("keypress",i),A!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)))}x();var v={element:A};return Object.defineProperties(v,{enabled:{get:function(){return t},set:function(g){g?x():t&&(t=!1,A.removeEventListener("mousemove",c),A.removeEventListener("mousedown",h),A.removeEventListener("mouseup",f),A.removeEventListener("mouseleave",n),A.removeEventListener("mouseenter",n),A.removeEventListener("mouseout",n),A.removeEventListener("mouseover",n),A.removeEventListener("blur",a),A.removeEventListener("keyup",i),A.removeEventListener("keydown",i),A.removeEventListener("keypress",i),A!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var k=e(74311)},48956:function(Q){var z={left:0,top:0};Q.exports=function(e,k,A){k=k||e.currentTarget||e.srcElement,Array.isArray(A)||(A=[0,0]);var l,T=e.clientX||0,b=e.clientY||0,d=(l=k)===window||l===document||l===document.body?z:l.getBoundingClientRect();return A[0]=T-d.left,A[1]=b-d.top,A}},74311:function(Q,z){"use strict";function e(k){return k.target||k.srcElement||window}z.buttons=function(k){if("object"==typeof k){if("buttons"in k)return k.buttons;if("which"in k){if(2===(A=k.which))return 4;if(3===A)return 2;if(A>0)return 1<<A-1}else if("button"in k){var A;if(1===(A=k.button))return 4;if(2===A)return 2;if(A>=0)return 1<<A}}return 0},z.element=e,z.x=function(k){if("object"==typeof k){if("offsetX"in k)return k.offsetX;var A=e(k).getBoundingClientRect();return k.clientX-A.left}return 0},z.y=function(k){if("object"==typeof k){if("offsetY"in k)return k.offsetY;var A=e(k).getBoundingClientRect();return k.clientY-A.top}return 0}},1195:function(Q,z,e){"use strict";var k=e(75686);Q.exports=function(A,l,T){"function"==typeof A&&(T=!!l,l=A,A=window);var b=k("ex",A),d=function(s){T&&s.preventDefault();var t=s.deltaX||0,o=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=b;break;case 2:n=window.innerHeight}if(o*=n,r*=n,(t*=n)||o||r)return l(t,o,r,s)};return A.addEventListener("wheel",d),d}},7417:function(Q,z,e){var k,A,l;(l=void 0!==e.g?e.g:this)[A="Promise"]=l[A]||function(){"use strict";var b,d,s,t=Object.prototype.toString,o=typeof setImmediate<"u"?function(p){return setImmediate(p)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(p,m,w,u){return Object.defineProperty(p,m,{value:w,writable:!0,configurable:!1!==u})}}catch{b=function(m,w,u){return m[w]=u,m}}function r(p,m){s.add(p,m),d||(d=o(s.drain))}function n(p){var m,w=typeof p;return null==p||"object"!=w&&"function"!=w||(m=p.then),"function"==typeof m&&m}function a(){for(var p=0;p<this.chain.length;p++)i(this,1===this.state?this.chain[p].success:this.chain[p].failure,this.chain[p]);this.chain.length=0}function i(p,m,w){var u,S;try{!1===m?w.reject(p.msg):(u=!0===m?p.msg:m.call(void 0,p.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(S=n(u))?S.call(u,w.resolve,w.reject):w.resolve(u)}catch(_){w.reject(_)}}function c(p){var m,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(m=n(p))?r(function(){var u=new x(w);try{m.call(p,function(){c.apply(u,arguments)},function(){h.apply(u,arguments)})}catch(S){h.call(u,S)}}):(w.msg=p,w.state=1,w.chain.length>0&&r(a,w))}catch(u){h.call(new x(w),u)}}}function h(p){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=p,m.state=2,m.chain.length>0&&r(a,m))}function f(p,m,w,u){for(var S=0;S<m.length;S++)!function(_){p.resolve(m[_]).then(function(E){w(_,E)},u)}(S)}function x(p){this.def=p,this.triggered=!1}function v(p){this.promise=p,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(p){if("function"!=typeof p)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var m=new v(this);this.then=function(w,u){var S={success:"function"!=typeof w||w,failure:"function"==typeof u&&u};return S.promise=new this.constructor(function(_,E){if("function"!=typeof _||"function"!=typeof E)throw TypeError("Not a function");S.resolve=_,S.reject=E}),m.chain.push(S),0!==m.state&&r(a,m),S.promise},this.catch=function(w){return this.then(void 0,w)};try{p.call(void 0,function(w){c.call(m,w)},function(w){h.call(m,w)})}catch(w){h.call(m,w)}}s=function(){var p,m,w;function u(S,_){this.fn=S,this.self=_,this.next=void 0}return{add:function(S,_){w=new u(S,_),m?m.next=w:p=w,m=w,w=void 0},drain:function(){var S=p;for(p=m=d=void 0;S;)S.fn.call(S.self),S=S.next}}}();var y=b({},"constructor",g,!1);return g.prototype=y,b(y,"__NPO__",0,!1),b(g,"resolve",function(p){return p&&"object"==typeof p&&1===p.__NPO__?p:new this(function(m,w){if("function"!=typeof m||"function"!=typeof w)throw TypeError("Not a function");m(p)})}),b(g,"reject",function(p){return new this(function(m,w){if("function"!=typeof m||"function"!=typeof w)throw TypeError("Not a function");w(p)})}),b(g,"all",function(p){var m=this;return"[object Array]"!=t.call(p)?m.reject(TypeError("Not an array")):0===p.length?m.resolve([]):new m(function(w,u){if("function"!=typeof w||"function"!=typeof u)throw TypeError("Not a function");var S=p.length,_=Array(S),E=0;f(m,p,function(L,C){_[L]=C,++E===S&&w(_)},u)})}),b(g,"race",function(p){var m=this;return"[object Array]"!=t.call(p)?m.reject(TypeError("Not an array")):new m(function(w,u){if("function"!=typeof w||"function"!=typeof u)throw TypeError("Not a function");f(m,p,function(S,_){w(_)},u)})}),g}(),Q.exports?Q.exports=l[A]:void 0===(k=function(){return l[A]}.call(z,e,z,Q))||(Q.exports=k)},18625:function(Q){var z=Math.PI,e=b(120);function k(d,s,t,o){return["C",d,s,t,o,t,o]}function A(d,s,t,o,r,n){return["C",d/3+.6666666666666666*t,s/3+.6666666666666666*o,r/3+.6666666666666666*t,n/3+.6666666666666666*o,r,n]}function l(d,s,t,o,r,n,a,i,c,h){if(h)S=h[0],_=h[1],w=h[2],u=h[3];else{var f=T(d,s,-r);s=f.y;var x=((d=f.x)-(i=(f=T(i,c,-r)).x))/2,v=(s-(c=f.y))/2,g=x*x/(t*t)+v*v/(o*o);g>1&&(t*=g=Math.sqrt(g),o*=g);var y=t*t,p=o*o,m=(n==a?-1:1)*Math.sqrt(Math.abs((y*p-y*v*v-p*x*x)/(y*v*v+p*x*x)));m==1/0&&(m=1);var w=m*t*v/o+(d+i)/2,u=m*-o*x/t+(s+c)/2,S=Math.asin(((s-u)/o).toFixed(9)),_=Math.asin(((c-u)/o).toFixed(9));(S=d<w?z-S:S)<0&&(S=2*z+S),(_=i<w?z-_:_)<0&&(_=2*z+_),a&&S>_&&(S-=2*z),!a&&_>S&&(_-=2*z)}if(Math.abs(_-S)>e){var E=_,L=i,C=c;_=S+e*(a&&_>S?1:-1);var P=l(i=w+t*Math.cos(_),c=u+o*Math.sin(_),t,o,r,0,a,L,C,[_,E,w,u])}var I=Math.tan((_-S)/4),j=4/3*t*I,R=4/3*o*I,H=[2*d-(d+j*Math.sin(S)),2*s-(s-R*Math.cos(S)),i+j*Math.sin(_),c-R*Math.cos(_),i,c];if(h)return H;P&&(H=H.concat(P));for(var F=0;F<H.length;){var U=T(H[F],H[F+1],r);H[F++]=U.x,H[F++]=U.y}return H}function T(d,s,t){return{x:d*Math.cos(t)-s*Math.sin(t),y:d*Math.sin(t)+s*Math.cos(t)}}function b(d){return d*(z/180)}Q.exports=function(d){for(var s,t=[],o=0,r=0,n=0,a=0,i=null,c=null,h=0,f=0,x=0,v=d.length;x<v;x++){var g=d[x],y=g[0];switch(y){case"M":n=g[1],a=g[2];break;case"A":(g=l(h,f,g[1],g[2],b(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var p=h,m=f;"C"!=s&&"S"!=s||(p+=p-o,m+=m-r),g=["C",p,m,g[1],g[2],g[3],g[4]];break;case"T":"Q"==s||"T"==s?(i=2*h-i,c=2*f-c):(i=h,c=f),g=A(h,f,i,c,g[1],g[2]);break;case"Q":i=g[1],c=g[2],g=A(h,f,g[1],g[2],g[3],g[4]);break;case"L":g=k(h,f,g[1],g[2]);break;case"H":g=k(h,f,g[1],f);break;case"V":g=k(h,f,h,g[1]);break;case"Z":g=k(h,f,n,a)}s=y,h=g[g.length-2],f=g[g.length-1],g.length>4?(o=g[g.length-4],r=g[g.length-3]):(o=h,r=f),t.push(g)}return t}},56131:function(Q){"use strict";var z=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;Q.exports=function(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de","5"===Object.getOwnPropertyNames(l)[0])return!1;for(var T={},b=0;b<10;b++)T["_"+String.fromCharCode(b)]=b;if("0123456789"!==Object.getOwnPropertyNames(T).map(function(s){return T[s]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(s){d[s]=s}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch{return!1}}()?Object.assign:function(l,T){for(var b,d,s=function A(l){if(null==l)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}(l),t=1;t<arguments.length;t++){for(var o in b=Object(arguments[t]))e.call(b,o)&&(s[o]=b[o]);if(z){d=z(b);for(var r=0;r<d.length;r++)k.call(b,d[r])&&(s[d[r]]=b[d[r]])}}return s}},65848:function(Q){"use strict";var z=function(e){return e!=e};Q.exports=function(e,k){return 0===e&&0===k?1/e==1/k:e===k||!(!z(e)||!z(k))}},64003:function(Q,z,e){"use strict";var k=e(17045),A=e(68222),l=e(65848),T=e(27015),b=e(55572),d=A(T(),Object);k(d,{getPolyfill:T,implementation:l,shim:b}),Q.exports=d},27015:function(Q,z,e){"use strict";var k=e(65848);Q.exports=function(){return"function"==typeof Object.is?Object.is:k}},55572:function(Q,z,e){"use strict";var k=e(27015),A=e(17045);Q.exports=function(){var l=k();return A(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function(Q,z,e){"use strict";var k;if(!Object.keys){var A=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=e(64178),b=Object.prototype.propertyIsEnumerable,d=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(a){var i=a.constructor;return i&&i.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&A.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{o(window[a])}catch{return!0}}catch{return!0}return!1}();k=function(a){var i=null!==a&&"object"==typeof a,c="[object Function]"===l.call(a),h=T(a),f=i&&"[object String]"===l.call(a),x=[];if(!i&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var v=s&&c;if(f&&a.length>0&&!A.call(a,0))for(var g=0;g<a.length;++g)x.push(String(g));if(h&&a.length>0)for(var y=0;y<a.length;++y)x.push(String(y));else for(var p in a)v&&"prototype"===p||!A.call(a,p)||x.push(String(p));if(d)for(var m=function(u){if(typeof window>"u"||!n)return o(u);try{return o(u)}catch{return!1}}(a),w=0;w<t.length;++w)m&&"constructor"===t[w]||!A.call(a,t[w])||x.push(t[w]);return x}}Q.exports=k},8709:function(Q,z,e){"use strict";var k=Array.prototype.slice,A=e(64178),l=Object.keys,T=l?function(d){return l(d)}:e(99019),b=Object.keys;T.shim=function(){if(Object.keys){var d=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);d||(Object.keys=function(s){return A(s)?b(k.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},Q.exports=T},64178:function(Q){"use strict";var z=Object.prototype.toString;Q.exports=function(e){var k=z.call(e),A="[object Arguments]"===k;return A||(A="[object Array]"!==k&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===z.call(e.callee)),A}},88641:function(Q){"use strict";function z(A,l){if("string"!=typeof A)return[A];var T=[A];"string"==typeof l||Array.isArray(l)?l={brackets:l}:l||(l={});var b=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],d=l.escape||"___",s=!!l.flat;b.forEach(function(o){var r=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),n=[];function a(i,c,h){var f=T.push(i.slice(o[0].length,-o[1].length))-1;return n.push(f),d+f+d}T.forEach(function(i,c){for(var h,f=0;i!=h;)if(h=i,i=i.replace(r,a),f++>1e4)throw Error("References have circular dependency. Please, check them.");T[c]=i}),n=n.reverse(),T=T.map(function(i){return n.forEach(function(c){i=i.replace(new RegExp("(\\"+d+c+"\\"+d+")","g"),o[0]+"$1"+o[1])}),i})});var t=new RegExp("\\"+d+"([0-9]+)\\"+d);return s?T:function o(r,n,a){for(var i,c=[],h=0;i=t.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,i.index)),c.push(o(n[i[1]],n)),r=r.slice(i.index+i[0].length)}return c.push(r),c}(T[0],T)}function e(A,l){if(l&&l.flat){var T,b=l&&l.escape||"___",d=A[0];if(!d)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;d!=T;){if(t++>1e4)throw Error("Circular references in "+A);T=d,d=d.replace(s,o)}return d}return A.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function o(r,n){if(null==A[n])throw Error("Reference "+n+"is undefined");return A[n]}}function k(A,l){return Array.isArray(A)?e(A,l):z(A,l)}k.parse=z,k.stringify=e,Q.exports=k},18863:function(Q,z,e){"use strict";var k=e(71299);Q.exports=function(A){var l;return arguments.length>1&&(A=arguments),"string"==typeof A?A=A.split(/\s/).map(parseFloat):"number"==typeof A&&(A=[A]),A.length&&"number"==typeof A[0]?l=1===A.length?{width:A[0],height:A[0],x:0,y:0}:2===A.length?{width:A[0],height:A[1],x:0,y:0}:{x:A[0],y:A[1],width:A[2]-A[0]||0,height:A[3]-A[1]||0}:A&&((l={x:(A=k(A,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:A.top||0}).width=null==A.width?A.right?A.right-l.x:0:A.width,l.height=null==A.height?A.bottom?A.bottom-l.y:0:A.height),l}},95616:function(Q){Q.exports=function(A){var l=[];return A.replace(e,function(T,b,d){var o,s=b.toLowerCase();for(o=void 0,d=(o=d.match(k))?o.map(Number):[],"m"==s&&d.length>2&&(l.push([b].concat(d.splice(0,2))),s="l",b="m"==b?"l":"L");;){if(d.length==z[s])return d.unshift(b),l.push(d);if(d.length<z[s])throw new Error("malformed path data");l.push([b].concat(d.splice(0,z[s])))}}),l};var z={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,k=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(Q){Q.exports=function(z,e){e||(e=[0,""]),z=String(z);var k=parseFloat(z,10);return e[0]=k,e[1]=z.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function(Q,z,e){var k=e(90386);(function(){var A,l,T,b,d,s;typeof performance<"u"&&null!==performance&&performance.now?Q.exports=function(){return performance.now()}:null!=k&&k.hrtime?(Q.exports=function(){return(A()-d)/1e6},l=k.hrtime,b=(A=function(){var t;return 1e9*(t=l())[0]+t[1]})(),s=1e9*k.uptime(),d=b-s):Date.now?(Q.exports=function(){return Date.now()-T},T=Date.now()):(Q.exports=function(){return(new Date).getTime()-T},T=(new Date).getTime())}).call(this)},71299:function(Q){"use strict";Q.exports=function(k,A,l){var T,b,d={};if("string"==typeof A&&(A=e(A)),Array.isArray(A)){var s={};for(b=0;b<A.length;b++)s[A[b]]=!0;A=s}for(T in A)A[T]=e(A[T]);var t={};for(T in A){var o=A[T];if(Array.isArray(o))for(b=0;b<o.length;b++){var r=o[b];if(l&&(t[r]=!0),r in k){if(d[T]=k[r],l)for(var n=b;n<o.length;n++)t[o[n]]=!0;break}}else T in k&&(A[T]&&(d[T]=k[T]),l&&(t[T]=!0))}if(l)for(T in k)t[T]||(d[T]=k[T]);return d};var z={};function e(k){return z[k]?z[k]:("string"==typeof k&&(k=z[k]=k.split(/\s*,\s*|\s+/)),k)}},38258:function(Q){Q.exports=function(z,e,k,A){var l=z[0],T=z[1],b=!1;void 0===k&&(k=0),void 0===A&&(A=e.length);for(var d=A-k,s=0,t=d-1;s<d;t=s++){var o=e[s+k][0],r=e[s+k][1],a=e[t+k][1];r>T!=a>T&&l<(e[t+k][0]-o)*(T-r)/(a-r)+o&&(b=!b)}return b}},52142:function(Q,z,e){var k,A=e(69444),l=e(29023),T=e(87263),b=e(11328),d=e(55968),s=e(10670),t=!1,o=l();function r(n,a,i){var c=k.segments(n),h=k.segments(a),f=i(k.combine(c,h));return k.polygon(f)}k={buildLog:function(n){return!0===n?t=A():!1===n&&(t=!1),!1!==t&&t.list},epsilon:function(n){return o.epsilon(n)},segments:function(n){var a=T(!0,o,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,o,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:d.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:d.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:d.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:d.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:d.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:b(n.segments,o,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(k,n)},polygonToGeoJSON:function(n){return s.fromPolygon(k,o,n)},union:function(n,a){return r(n,a,k.selectUnion)},intersect:function(n,a){return r(n,a,k.selectIntersect)},difference:function(n,a){return r(n,a,k.selectDifference)},differenceRev:function(n,a){return r(n,a,k.selectDifferenceRev)},xor:function(n,a){return r(n,a,k.selectXor)}},"object"==typeof window&&(window.PolyBool=k),Q.exports=k},69444:function(Q){Q.exports=function(){var z,e=0,k=!1;function A(l,T){return z.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),z}return z={list:[],segmentId:function(){return e++},checkIntersection:function(l,T){return A("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return A("div_seg",{seg:l,pt:T}),A("chop",{seg:l,pt:T})},statusRemove:function(l){return A("pop_seg",{seg:l})},segmentUpdate:function(l){return A("seg_update",{seg:l})},segmentNew:function(l,T){return A("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return A("rem_seg",{seg:l})},tempStatus:function(l,T,b){return A("temp_status",{seg:l,above:T,below:b})},rewind:function(l){return A("rewind",{seg:l})},status:function(l,T,b){return A("status",{seg:l,above:T,below:b})},vert:function(l){return l===k?z:(k=l,A("vert",{x:l}))},log:function(l){return"string"!=typeof l&&(l=JSON.stringify(l,!1,"  ")),A("log",{txt:l})},reset:function(){return A("reset")},selected:function(l){return A("selected",{segs:l})},chainStart:function(l){return A("chain_start",{seg:l})},chainRemoveHead:function(l,T){return A("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return A("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return A("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return A("chain_match",{index:l})},chainClose:function(l){return A("chain_close",{index:l})},chainAddHead:function(l,T){return A("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return A("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return A("chain_con",{index1:l,index2:T})},chainReverse:function(l){return A("chain_rev",{index:l})},chainJoin:function(l,T){return A("chain_join",{index1:l,index2:T})},done:function(){return A("done")}}}},29023:function(Q){Q.exports=function(z){"number"!=typeof z&&(z=1e-10);var e={epsilon:function(k){return"number"==typeof k&&(z=k),z},pointAboveOrOnLine:function(k,A,l){var T=A[0],b=A[1];return(l[0]-T)*(k[1]-b)-(l[1]-b)*(k[0]-T)>=-z},pointBetween:function(k,A,l){var b=l[0]-A[0],s=l[1]-A[1],t=(k[0]-A[0])*b+(k[1]-A[1])*s;return!(t<z||t-(b*b+s*s)>-z)},pointsSameX:function(k,A){return Math.abs(k[0]-A[0])<z},pointsSameY:function(k,A){return Math.abs(k[1]-A[1])<z},pointsSame:function(k,A){return e.pointsSameX(k,A)&&e.pointsSameY(k,A)},pointsCompare:function(k,A){return e.pointsSameX(k,A)?e.pointsSameY(k,A)?0:k[1]<A[1]?-1:1:k[0]<A[0]?-1:1},pointsCollinear:function(k,A,l){return Math.abs((k[0]-A[0])*(A[1]-l[1])-(A[0]-l[0])*(k[1]-A[1]))<z},linesIntersect:function(k,A,l,T){var b=A[0]-k[0],d=A[1]-k[1],s=T[0]-l[0],t=T[1]-l[1],o=b*t-d*s;if(Math.abs(o)<z)return!1;var r=k[0]-l[0],n=k[1]-l[1],a=(s*n-t*r)/o,i=(b*n-d*r)/o,c={alongA:0,alongB:0,pt:[k[0]+a*b,k[1]+a*d]};return c.alongA=a<=-z?-2:a<z?-1:a-1<=-z?0:a-1<z?1:2,c.alongB=i<=-z?-2:i<z?-1:i-1<=-z?0:i-1<z?1:2,c},pointInsideRegion:function(k,A){for(var l=k[0],T=k[1],b=A[A.length-1][0],d=A[A.length-1][1],s=!1,t=0;t<A.length;t++){var o=A[t][0],r=A[t][1];r-T>z!=d-T>z&&(b-o)*(T-r)/(d-r)+o-l>z&&(s=!s),b=o,d=r}return s}};return e}},10670:function(Q){Q.exports={toPolygon:function(e,k){function A(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function d(o){var r=o.slice(0,o.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=d(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,d(b[t])));return s}if("Polygon"===k.type)return e.polygon(A(k.coordinates));if("MultiPolygon"===k.type){for(var l=e.segments({inverted:!1,regions:[]}),T=0;T<k.coordinates.length;T++)l=e.selectUnion(e.combine(l,A(k.coordinates[T])));return e.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,k,A){function l(i,c){return k.pointInsideRegion([.5*(i[0][0]+i[1][0]),.5*(i[0][1]+i[1][1])],c)}function T(i){return{region:i,children:[]}}A=e.polygon(e.segments(A));var b=T(null);function d(i,c){for(var h=0;h<i.children.length;h++)if(l(c,(x=i.children[h]).region))return void d(x,c);var f=T(c);for(h=0;h<i.children.length;h++){var x;l((x=i.children[h]).region,c)&&(f.children.push(x),i.children.splice(h,1),h--)}i.children.push(f)}for(var s=0;s<A.regions.length;s++){var t=A.regions[s];t.length<3||d(b,t)}function o(i,c){for(var h=0,f=i[i.length-1][0],x=i[i.length-1][1],v=[],g=0;g<i.length;g++){var y=i[g][0],p=i[g][1];v.push([y,p]),h+=p*f-y*x,f=y,x=p}return h<0!==c&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var r=[];function n(i){var c=[o(i.region,!1)];r.push(c);for(var h=0;h<i.children.length;h++)c.push(a(i.children[h]))}function a(i){for(var c=0;c<i.children.length;c++)n(i.children[c]);return o(i.region,!0)}for(s=0;s<b.children.length;s++)n(b.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:1==r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}}},87263:function(Q,z,e){var k=e(26859);Q.exports=function(A,l,T){function b(n,a,i){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var d=k.create();function s(n,a){d.insertBefore(n,function(i){return c=n.isStart,f=a,x=i.isStart,g=i.other.pt,(0!==(y=l.pointsCompare(n.pt,v=i.pt))?y:l.pointsSame(f,g)?0:c!==x?c?1:-1:l.pointAboveOrOnLine(f,x?v:g,x?g:v)?1:-1)<0;var c,f,x,v,g,y})}function t(n,a){var c,f,i=(s(f=k.node({isStart:!0,pt:(c=n).start,seg:c,primary:a,other:null,status:null}),c.end),f);return function(c,h,f){var x=k.node({isStart:!1,pt:h.end,seg:h,primary:f,other:c,status:null});c.other=x,s(x,c.pt)}(i,n,a),i}function o(n,a){var c,h,i=b(a,n.seg.end,n.seg);return c=n,h=a,T&&T.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,s(c.other,c.pt),t(i,n.primary)}function r(n,a){var i=k.create();function c(E){return i.findTransition(function(L){var C,P,I,j,R,H;return j=(C=E).seg.end,(l.pointsCollinear(I=C.seg.start,R=(P=L.ev).seg.start,H=P.seg.end)?l.pointsCollinear(j,R,H)||l.pointAboveOrOnLine(j,R,H)?1:-1:l.pointAboveOrOnLine(I,R,H)?1:-1)>0})}function h(E,L){var C=E.seg,P=L.seg,I=C.start,j=C.end,R=P.start,H=P.end;T&&T.checkIntersection(C,P);var F=l.linesIntersect(I,j,R,H);if(!1===F){if(!l.pointsCollinear(I,j,R)||l.pointsSame(I,H)||l.pointsSame(j,R))return!1;var U=l.pointsSame(I,R),B=l.pointsSame(j,H);if(U&&B)return L;var N=!U&&l.pointBetween(I,R,H),J=!B&&l.pointBetween(j,R,H);if(U)return J?o(L,j):o(E,H),L;N&&(B||(J?o(L,j):o(E,H)),o(L,I))}else 0===F.alongA&&(-1===F.alongB?o(E,R):0===F.alongB?o(E,F.pt):1===F.alongB&&o(E,H)),0===F.alongB&&(-1===F.alongA?o(L,I):0===F.alongA?o(L,F.pt):1===F.alongA&&o(L,j));return!1}for(var f=[];!d.isEmpty();){var x=d.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let E=function(){if(g){var L=h(x,g);if(L)return L}return!!y&&h(x,y)};T&&T.segmentNew(x.seg,x.primary);var v=c(x),g=v.before?v.before.ev:null,y=v.after?v.after.ev:null;T&&T.tempStatus(x.seg,!!g&&g.seg,!!y&&y.seg);var p,m,w=E();if(w&&(A?(m=null===x.seg.myFill.below||x.seg.myFill.above!==x.seg.myFill.below)&&(w.seg.myFill.above=!w.seg.myFill.above):w.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(w.seg),x.other.remove(),x.remove()),d.getHead()!==x){T&&T.rewind(x.seg);continue}A?(m=null===x.seg.myFill.below||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=y?y.seg.myFill.above:n,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):null===x.seg.otherFill&&(x.seg.otherFill={above:p=y?x.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:x.primary?a:n,below:p}),T&&T.status(x.seg,!!g&&g.seg,!!y&&y.seg),x.other.status=v.insert(k.node({ev:x}))}else{var u=x.status;if(null===u)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(u.prev)&&i.exists(u.next)&&h(u.prev.ev,u.next.ev),T&&T.statusRemove(u.ev.seg),u.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}f.push(x.seg)}d.getHead().remove()}return T&&T.done(),f}return A?{addRegion:function(n){for(var a,i,c,h=n[n.length-1],f=0;f<n.length;f++){var x=l.pointsCompare(a=h,h=n[f]);0!==x&&t((i=x<0?a:h,c=x<0?h:a,{id:T?T.segmentId():-1,start:i,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,i,c){return n.forEach(function(h){t(b(h.start,h.end,h),!0)}),i.forEach(function(h){t(b(h.start,h.end,h),!1)}),r(a,c)}}}},26859:function(Q){Q.exports={create:function(){var z={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==z.root},isEmpty:function(){return null===z.root.next},getHead:function(){return z.root.next},insertBefore:function(e,k){for(var A=z.root,l=z.root.next;null!==l;){if(k(l))return e.prev=l.prev,e.next=l,l.prev.next=e,void(l.prev=e);A=l,l=l.next}A.next=e,e.prev=A,e.next=null},findTransition:function(e){for(var k=z.root,A=z.root.next;null!==A&&!e(A);)k=A,A=A.next;return{before:k===z.root?null:k,after:A,insert:function(l){return l.prev=k,l.next=A,k.next=l,null!==A&&(A.prev=l),l}}}};return z},node:function(z){return z.prev=null,z.next=null,z.remove=function(){z.prev.next=z.next,z.next&&(z.next.prev=z.prev),z.prev=null,z.next=null},z}}},11328:function(Q){Q.exports=function(z,e,k){var A=[],l=[];return z.forEach(function(T){var b=T.start,d=T.end;if(e.pointsSame(b,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{k&&k.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},o=s,r=0;r<A.length;r++){var n=(f=A[r])[0],a=f[f.length-1];if(e.pointsSame(n,b)){if(u(r,!0,!0))break}else if(e.pointsSame(n,d)){if(u(r,!0,!1))break}else if(e.pointsSame(a,b)){if(u(r,!1,!0))break}else if(e.pointsSame(a,d)&&u(r,!1,!1))break}if(o===s)return A.push([b,d]),void(k&&k.chainNew(b,d));if(o===t){k&&k.chainMatch(s.index);var i=s.index,c=s.matches_pt1?d:b,h=s.matches_head,f=A[i],x=h?f[0]:f[f.length-1],v=h?f[1]:f[f.length-2],g=h?f[f.length-1]:f[0],y=h?f[f.length-2]:f[1];return e.pointsCollinear(v,x,c)&&(h?(k&&k.chainRemoveHead(s.index,c),f.shift()):(k&&k.chainRemoveTail(s.index,c),f.pop()),x=v),e.pointsSame(g,c)?(A.splice(i,1),e.pointsCollinear(y,g,x)&&(h?(k&&k.chainRemoveTail(s.index,x),f.pop()):(k&&k.chainRemoveHead(s.index,x),f.shift())),k&&k.chainClose(s.index),void l.push(f)):void(h?(k&&k.chainAddHead(s.index,c),f.unshift(c)):(k&&k.chainAddTail(s.index,c),f.push(c)))}var p=s.index,m=t.index;k&&k.chainConnect(p,m);var w=A[p].length<A[m].length;s.matches_head?t.matches_head?w?(S(p),_(p,m)):(S(m),_(m,p)):_(m,p):t.matches_head?_(p,m):w?(S(p),_(m,p)):(S(m),_(p,m))}function u(E,L,C){return o.index=E,o.matches_head=L,o.matches_pt1=C,o===s?(o=t,!1):(o=null,!0)}function S(E){k&&k.chainReverse(E),A[E].reverse()}function _(E,L){var C=A[E],P=A[L],I=C[C.length-1],j=C[C.length-2],R=P[0],H=P[1];e.pointsCollinear(j,I,R)&&(k&&k.chainRemoveTail(E,I),C.pop(),I=j),e.pointsCollinear(I,R,H)&&(k&&k.chainRemoveHead(L,R),P.shift()),k&&k.chainJoin(E,L),A[E]=C.concat(P),A.splice(L,1)}}),l}},55968:function(Q){function z(k,A,l){var T=[];return k.forEach(function(b){var d=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);0!==A[d]&&T.push({id:l?l.segmentId():-1,start:b.start,end:b.end,myFill:{above:1===A[d],below:2===A[d]},otherFill:null})}),l&&l.selected(T),T}Q.exports={union:function(k,A){return z(k,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],A)},intersect:function(k,A){return z(k,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],A)},difference:function(k,A){return z(k,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],A)},differenceRev:function(k,A){return z(k,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],A)},xor:function(k,A){return z(k,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],A)}}},14847:function(Q,z,e){"use strict";var k=e(21630).Transform,A=e(90715);function l(){k.call(this,{readableObjectMode:!0})}function T(b,d,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=b,d&&(this.code=d),s&&(this.statusCode=s)}(l.prototype=Object.create(k.prototype)).constructor=l,A(l.prototype),z.OF=function(b,d,s){for(var t=d,o=0;o<s.length;)if(b[t++]!==s[o++])return!1;return!0},z.eG=function(b,d){var s=[],t=0;if(d&&"hex"===d)for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},z.mP=function(b,d){return b[d]|b[d+1]<<8},z.n8=function(b,d){return b[d+1]|b[d]<<8},z.nm=function(b,d){return b[d]|b[d+1]<<8|b[d+2]<<16|16777216*b[d+3]},z.Ag=function(b,d){return b[d+3]|b[d+2]<<8|b[d+1]<<16|16777216*b[d]},(T.prototype=Object.create(Error.prototype)).constructor=T},71371:function(Q){"use strict";function z(A,l){var T=new Error(A);return T.code=l,T}function e(A){try{return decodeURIComponent(escape(A))}catch{return A}}function k(A,l,T){this.input=A.subarray(l,T),this.start=l;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==b&&"MM\0*"!==b)throw z("invalid TIFF signature","EBADDATA");this.big_endian="M"===b[0]}k.prototype.each=function(A){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,A)}},k.prototype.read_uint16=function(A){var l=this.input;if(A+2>l.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?256*l[A]+l[A+1]:l[A]+256*l[A+1]},k.prototype.read_uint32=function(A){var l=this.input;if(A+4>l.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[A]+65536*l[A+1]+256*l[A+2]+l[A+3]:l[A]+256*l[A+1]+65536*l[A+2]+16777216*l[A+3]},k.prototype.is_subifd_link=function(A,l){return 0===A&&34665===l||0===A&&34853===l||34665===A&&40965===l},k.prototype.exif_format_length=function(A){switch(A){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},k.prototype.exif_format_read=function(A,l){var T;switch(A){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},k.prototype.scan_ifd=function(A,l,T){var b=this.read_uint16(l);l+=2;for(var d=0;d<b;d++){var s=this.read_uint16(l),t=this.read_uint16(l+2),o=this.read_uint32(l+4),r=this.exif_format_length(t),n=o*r,a=n<=4?l+8:this.read_uint32(l+8),i=!1;if(a+n>this.input.length)throw z("unexpected EOF","EBADDATA");for(var c=[],h=a,f=0;f<o;f++,h+=r){var x=this.exif_format_read(t,h);if(null===x){c=null;break}c.push(x)}if(Array.isArray(c)&&2===t&&(c=e(String.fromCharCode.apply(null,c)))&&"\0"===c[c.length-1]&&(c=c.slice(0,-1)),this.is_subifd_link(A,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),i=!0),!1===T({is_big_endian:this.big_endian,ifd:A,tag:s,format:t,count:o,entry_offset:l+this.start,data_length:n,data_offset:a+this.start,value:c,is_subifd_link:i}))return void(this.aborted=!0);l+=12}0===A&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},Q.exports.ExifParser=k,Q.exports.get_orientation=function(A){var l=0;try{return new k(A,0,A.length).each(function(T){if(0===T.ifd&&274===T.tag&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function(Q,z,e){"use strict";var k=e(14847).n8,A=e(14847).Ag;function l(o,r){if(o.length<4+r)return null;var n=A(o,r);return o.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(r+4,r+8)),data:o.slice(r+8,r+n),end:r+n}}function T(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:A(a.data,4),height:A(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function b(o,r,n){for(var a=0,i=0;i<n;i++)a=256*a+(o[r+i]||0);return a}function d(o,r){for(var n=o[4]>>4&15,a=15&o[4],i=o[5]>>4&15,c=k(o,6),h=8,f=0;f<c;f++){var x=k(o,h),v=k(o,h+=2),g=b(o,h+=2,i),y=k(o,h+=i);if(h+=2,0===v&&1===y){var p=b(o,h,n),m=b(o,h+n,a);r.item_loc[x]={length:m,offset:p+g}}h+=y*(n+a)}}function s(o,r){for(var n=k(o,4),a=6,i=0;i<n;i++){var c=l(o,a);if(!c)break;if("infe"===c.boxtype){for(var h=k(c.data,4),f="",x=8;x<c.data.length&&c.data[x];x++)f+=String.fromCharCode(c.data[x]);r.item_inf[f]=h}a=c.end}}function t(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;"ipco"===a.boxtype&&T(a.data,r),n=a.end}}Q.exports.unbox=l,Q.exports.readSizeFromMeta=function(o){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,v){for(var g=4;;){var y=l(x,g);if(!y)break;"iprp"===y.boxtype&&t(y.data,v),"iloc"===y.boxtype&&d(y.data,v),"iinf"===y.boxtype&&s(y.data,v),g=y.end}}(o,r),r.sizes.length){var n,a,i,c=(a=(n=r.sizes).reduce(function(x,v){return x.width>v.width||x.width===v.width&&x.height>v.height?x:v}),i=n.reduce(function(x,v){return x.height>v.height||x.height===v.height&&x.width>v.width?x:v}),a.width>i.height||a.width===i.height&&a.height>i.width?a:i),h=1;r.transforms.forEach(function(x){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===x.type&&(h=0===x.value?g[h]:v[h=v[h=g[h]]]),"irot"===x.type)for(var y=0;y<x.value;y++)h=v[h]});var f=null;return r.item_inf.Exif&&(f=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:f}}},Q.exports.getMimeType=function(o){var r=String.fromCharCode.apply(null,o.slice(0,4)),n={};n[r]=!0;for(var a=8;a<o.length;a+=4)n[String.fromCharCode.apply(null,o.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).Ag,T=e(76767),b=e(71371),d=k("ftyp");Q.exports=function(s){if(A(s,4,d)){var t=T.unbox(s,0);if(t){var o=T.getMimeType(t.data);if(o){for(var r,n=t.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,"mdat"===a.boxtype)return;if("meta"===a.boxtype){r=a.data;break}}if(r){var i=T.readSizeFromMeta(r);if(i){var c={width:i.width,height:i.height,type:o.type,mime:o.mime,wUnits:"px",hUnits:"px"};if(i.variants.length>1&&(c.variants=i.variants),i.orientation&&(c.orientation=i.orientation),i.exif_location&&i.exif_location.offset+i.exif_location.length<=s.length){var h=l(s,i.exif_location.offset),f=s.slice(i.exif_location.offset+h+4,i.exif_location.offset+i.exif_location.length),x=b.get_orientation(f);x>0&&(c.orientation=x)}return c}}}}}}},2504:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=k("BM");Q.exports=function(b){if(!(b.length<26)&&A(b,0,T))return{width:l(b,18),height:l(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=k("GIF87a"),b=k("GIF89a");Q.exports=function(d){if(!(d.length<10)&&(A(d,0,T)||A(d,0,b)))return{width:l(d,6),height:l(d,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(Q,z,e){"use strict";var k=e(14847).mP;Q.exports=function(A){var l=k(A,0),T=k(A,2),b=k(A,4);if(0===l&&1===T&&b){for(var d=[],s={width:0,height:0},t=0;t<b;t++){var o=A[6+16*t]||256,r=A[6+16*t+1]||256,n={width:o,height:r};d.push(n),(o>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:d,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(Q,z,e){"use strict";var k=e(14847).n8,A=e(14847).eG,l=e(14847).OF,T=e(71371),b=A("Exif\0\0");Q.exports=function(d){if(!(d.length<2)&&255===d[0]&&216===d[1]&&255===d[2])for(var s=2;;){for(;;){if(d.length-s<2)return;if(255===d[s++])break}for(var t,o,r=d[s++];255===r;)r=d[s++];if(208<=r&&r<=217||1===r)t=0;else{if(!(192<=r&&r<=254)||d.length-s<2)return;t=k(d,s)-2,s+=2}if(217===r||218===r)return;if(225===r&&t>=10&&l(d,s,b)&&(o=T.get_orientation(d.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&196!==r&&200!==r&&204!==r){if(d.length-s<t)return;var n={width:k(d,s+3),height:k(d,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(n.orientation=o),n}s+=t}}},6303:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).Ag,T=k("\x89PNG\r\n\x1a\n"),b=k("IHDR");Q.exports=function(d){if(!(d.length<24)&&A(d,0,T)&&A(d,12,b))return{width:l(d,16),height:l(d,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).Ag,T=k("8BPS\0\x01");Q.exports=function(b){if(!(b.length<22)&&A(b,0,T))return{width:l(b,18),height:l(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(Q){"use strict";function z(s){return"number"==typeof s&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,k=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,A=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(s){return b.test(s)?s.match(b)[0]:"px"}Q.exports=function(s){if(function(g){var y,p=0,m=g.length;for(239===g[0]&&187===g[1]&&191===g[2]&&(p=3);p<m&&(32===(y=g[p])||9===y||13===y||10===y);)p++;return p!==m&&60===g[p]}(s)){for(var t="",o=0;o<s.length;o++)t+=String.fromCharCode(s[o]);var r=(t.match(e)||[""])[0];if(k.test(r)){var n=(y=(g=r).match(A),p=g.match(l),m=g.match(T),{width:y&&(y[1]||y[2]),height:p&&(p[1]||p[2]),viewbox:m&&(m[1]||m[2])}),a=parseFloat(n.width),i=parseFloat(n.height);if(n.width&&n.height)return z(a)&&z(i)?{width:a,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.height)}:void 0;var c=(n.viewbox||"").split(" "),h={width:c[2],height:c[3]},f=parseFloat(h.width),x=parseFloat(h.height);if(z(f)&&z(x)&&d(h.width)===d(h.height)){var v=f/x;return n.width?z(a)?{width:a,height:a/v,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.width)}:void 0:n.height?z(i)?{width:i*v,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.height),hUnits:d(n.height)}:void 0:{width:f,height:x,type:"svg",mime:"image/svg+xml",wUnits:d(h.width),hUnits:d(h.height)}}}}var g,y,p,m}},66278:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=e(14847).n8,b=e(14847).nm,d=e(14847).Ag,s=k("II*\0"),t=k("MM\0*");function o(a,i,c){return c?T(a,i):l(a,i)}function r(a,i,c){return c?d(a,i):b(a,i)}function n(a,i,c){var h=o(a,i+2,c);return 1!==r(a,i+4,c)||3!==h&&4!==h?null:3===h?o(a,i+8,c):r(a,i+8,c)}Q.exports=function(a){if(!(a.length<8)&&(A(a,0,s)||A(a,0,t))){var i=77===a[0],c=r(a,4,i)-8;if(!(c<0)){var h=c+8;if(!(a.length-h<2)){var f=12*o(a,h+0,i);if(!(f<=0||(h+=2,a.length-h<f))){var x,v,g,y;for(x=0;x<f;x+=12)256===(y=o(a,h+x,i))?v=n(a,h+x,i):257===y&&(g=n(a,h+x,i));return v&&g?{width:v,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(Q,z,e){"use strict";var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=e(14847).nm,b=e(71371),d=k("RIFF"),s=k("WEBP");function t(n,a){if(157===n[a+3]&&1===n[a+4]&&42===n[a+5])return{width:16383&l(n,a+6),height:16383&l(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function o(n,a){if(47===n[a]){var i=T(n,a+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Q.exports=function(n){if(!(n.length<16)&&(A(n,0,d)||A(n,8,s))){var a=12,i=null,c=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(0!==n[a]){var f=String.fromCharCode.apply(null,n.slice(a,a+4)),x=T(n,a+4);"VP8 "===f&&x>=10?i=i||t(n,a+8):"VP8L"===f&&x>=9?i=i||o(n,a+8):"VP8X"===f&&x>=10?i=i||r(n,a+8):"EXIF"===f&&(c=b.get_orientation(n.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(i)return c>0&&(i.orientation=c),i}}}},91497:function(Q,z,e){"use strict";Q.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function(Q,z,e){"use strict";var k=e(91497);Q.exports=function(A){return function(l){for(var T=Object.keys(k),b=0;b<T.length;b++){var d=k[T[b]](l);if(d)return d}return null}(A)},Q.exports.parsers=k},90386:function(Q){var z,e,k=Q.exports={};function A(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(i){if(z===setTimeout)return setTimeout(i,0);if((z===A||!z)&&setTimeout)return z=setTimeout,setTimeout(i,0);try{return z(i,0)}catch{try{return z.call(null,i,0)}catch{return z.call(this,i,0)}}}!function(){try{z="function"==typeof setTimeout?setTimeout:A}catch{z=A}try{e="function"==typeof clearTimeout?clearTimeout:l}catch{e=l}}();var b,d=[],s=!1,t=-1;function o(){s&&b&&(s=!1,b.length?d=b.concat(d):t=-1,d.length&&r())}function r(){if(!s){var i=T(o);s=!0;for(var c=d.length;c;){for(b=d,d=[];++t<c;)b&&b[t].run();t=-1,c=d.length}b=null,s=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===l||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(i)}}function n(i,c){this.fun=i,this.array=c}function a(){}k.nextTick=function(i){var c=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)c[h-1]=arguments[h];d.push(new n(i,c)),1!==d.length||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=a,k.addListener=a,k.once=a,k.off=a,k.removeListener=a,k.removeAllListeners=a,k.emit=a,k.prependListener=a,k.prependOnceListener=a,k.listeners=function(i){return[]},k.binding=function(i){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(i){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}},5877:function(Q,z,e){for(var k=e(9748),A=typeof window>"u"?e.g:window,l=["moz","webkit"],T="AnimationFrame",b=A["request"+T],d=A["cancel"+T]||A["cancelRequest"+T],s=0;!b&&s<l.length;s++)b=A[l[s]+"Request"+T],d=A[l[s]+"Cancel"+T]||A[l[s]+"CancelRequest"+T];if(!b||!d){var t=0,o=0,r=[];b=function(n){if(0===r.length){var a=k(),i=Math.max(0,16.666666666666668-(a-t));t=i+a,setTimeout(function(){var c=r.slice(0);r.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(t)}catch(f){setTimeout(function(){throw f},0)}},Math.round(i))}return r.push({handle:++o,callback:n,cancelled:!1}),o},d=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}Q.exports=function(n){return b.call(A,n)},Q.exports.cancel=function(){d.apply(A,arguments)},Q.exports.polyfill=function(n){n||(n=A),n.requestAnimationFrame=b,n.cancelAnimationFrame=d}},3593:function(Q,z,e){"use strict";var k=e(21527),A=e(25075),l=e(93447),T=e(71299),b=e(56131),d=e(30120),s=e(57060),t=s.float32,o=s.fract32;Q.exports=function(n,a){if("function"==typeof n?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,c,h,f,x,v,g=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},p=[];return f=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=n.buffer({usage:"static",type:"float",data:r}),S(a),i=n({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:f,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:c,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:h,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:x,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),b(m,{update:S,draw:w,destroy:_,regl:n,gl:g,canvas:g.canvas,groups:p}),m;function m(E){E?S(E):null===E&&_(),w()}function w(E){if("number"==typeof E)return u(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),p.forEach(function(L,C){L&&(E&&(L.draw=!!E[C]),L.draw?u(C):L.draw=!0)})}function u(E){"number"==typeof E&&(E=p[E]),null!=E&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],i(E),E.after&&E.after(E))}function S(E){if(E){null!=E.length?"number"==typeof E[0]&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=p=E.map(function(U,B){var N=p[B];return U&&("function"==typeof U?U={after:U}:"number"==typeof U[0]&&(U={positions:U}),U=T(U,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),N||(p[B]=N={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},U=b({},y,U)),l(N,U,[{lineWidth:function(J){return.5*+J},capSize:function(J){return.5*+J},opacity:parseFloat,errors:function(J){return J=d(J),C+=J.length,J},positions:function(J,Z){return J=d(J,"float64"),Z.count=Math.floor(J.length/2),Z.bounds=k(J,2),Z.offset=L,L+=Z.count,J}},{color:function(J,Z){var V=Z.count;if(J||(J="transparent"),!Array.isArray(J)||"number"==typeof J[0]){var W=J;J=Array(V);for(var X=0;X<V;X++)J[X]=W}if(J.length<V)throw Error("Not enough colors");for(var K=new Uint8Array(4*V),ne=0;ne<V;ne++){var re=A(J[ne],"uint8");K.set(re,4*ne)}return K},range:function(J,Z,V){return J||(J=Z.bounds),Z.scale=[1/(J[2]-J[0]),1/(J[3]-J[1])],Z.translate=[-J[0],-J[1]],Z.scaleFract=o(Z.scale),Z.translateFract=o(Z.translate),J},viewport:function(J){var Z;return Array.isArray(J)?Z={x:J[0],y:J[1],width:J[2]-J[0],height:J[3]-J[1]}:J?((Z={x:J.x||J.left||0,y:J.y||J.top||0}).width=J.right?J.right-Z.x:J.w||J.width||0,Z.height=J.bottom?J.bottom-Z.y:J.h||J.height||0):Z={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},Z}}])),N}),L||C){var P=p.reduce(function(U,B,N){return U+(B?B.count:0)},0),I=new Float64Array(2*P),j=new Uint8Array(4*P),R=new Float32Array(4*P);p.forEach(function(U,B){if(U){var N=U.positions,Z=U.offset,W=U.errors;U.count&&(j.set(U.color,4*Z),R.set(W,4*Z),I.set(N,2*Z))}});var H=t(I);c(H);var F=o(I,H);h(F),f(j),x(R)}}}function _(){c.destroy(),h.destroy(),f.destroy(),x.destroy(),v.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(Q,z,e){"use strict";var k=e(25075),A=e(21527),l=e(56131),T=e(56068),b=e(71299),d=e(30120),s=e(11474),t=e(54),o=e(57060),r=o.float32,n=o.fract32,a=e(83522),i=e(18863),c=e(6851);function h(f,x){if(!(this instanceof h))return new h(f,x);if("function"==typeof f?(x||(x={}),x.regl=f):x=f,x.length&&(x.positions=x),!(f=x.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=h.shaders.has(f)?h.shaders.get(f):h.shaders.set(f,h.createShaders(f)).get(f),this.update(x)}Q.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new a,h.createShaders=function(f){var x,v=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(p,m){return"round"===m.join?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(p,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},y=f(l({vert:T(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:T(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g));try{x=f(l({cull:{enable:!0,face:"back"},vert:T(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:T(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{x=y}return{fill:f({primitive:"triangle",elements:function(p,m){return m.triangles},offset:0,vert:T(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:T(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport}),rect:y,miter:x}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var f,x=[],v=arguments.length;v--;)x[v]=arguments[v];x.length&&(f=this).update.apply(f,x),this.draw()},h.prototype.draw=function(){for(var f=this,x=[],v=arguments.length;v--;)x[v]=arguments[v];return(x.length?x:this.passes).forEach(function(g,y){var p;if(g&&Array.isArray(g))return(p=f).draw.apply(p,g);"number"==typeof g&&(g=f.passes[g]),g&&g.count>1&&g.opacity&&(f.regl._refresh(),g.fill&&g.triangles&&g.triangles.length>2&&f.shaders.fill(g),g.thickness&&(g.scale[0]*g.viewport.width>h.precisionThreshold||g.scale[1]*g.viewport.height>h.precisionThreshold||"rect"===g.join||!g.join&&(g.thickness<=2||g.count>=h.maxPoints)?f.shaders.rect(g):f.shaders.miter(g)))}),this},h.prototype.update=function(f){var x=this;if(f){null!=f.length?"number"==typeof f[0]&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var v=this.regl,g=this.gl;if(f.forEach(function(u,S){var _=x.passes[S];if(void 0!==u)if(null!==u){if("number"==typeof u[0]&&(u={positions:u}),u=b(u,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),_||(x.passes[S]=_={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},u=l({},h.defaults,u)),null!=u.thickness&&(_.thickness=parseFloat(u.thickness)),null!=u.opacity&&(_.opacity=parseFloat(u.opacity)),null!=u.miterLimit&&(_.miterLimit=parseFloat(u.miterLimit)),null!=u.overlay&&(_.overlay=!!u.overlay,S<h.maxLines&&(_.depth=2*(h.maxLines-1-S%h.maxLines)/h.maxLines-1)),null!=u.join&&(_.join=u.join),null!=u.hole&&(_.hole=u.hole),null!=u.fill&&(_.fill=u.fill?k(u.fill,"uint8"):null),null!=u.viewport&&(_.viewport=i(u.viewport)),_.viewport||(_.viewport=i([g.drawingBufferWidth,g.drawingBufferHeight])),null!=u.close&&(_.close=u.close),null===u.positions&&(u.positions=[]),u.positions){var E,L;if(u.positions.x&&u.positions.y){var C=u.positions.x,P=u.positions.y;L=_.count=Math.max(C.length,P.length),E=new Float64Array(2*L);for(var I=0;I<L;I++)E[2*I]=C[I],E[2*I+1]=P[I]}else E=d(u.positions,"float64"),L=_.count=Math.floor(E.length/2);var j=_.bounds=A(E,2);if(_.fill){for(var R=[],H={},F=0,U=0,B=0,N=_.count;U<N;U++){var J=E[2*U],Z=E[2*U+1];isNaN(J)||isNaN(Z)||null==J||null==Z?(J=E[2*F],Z=E[2*F+1],H[U]=F):F=U,R[B++]=J,R[B++]=Z}if(u.splitNull){_.count-1 in H||(H[_.count]=_.count-1);var V=Object.keys(H).map(Number).sort(function(bt,_t){return bt-_t}),W=[],X=0,K=null!=_.hole?_.hole[0]:null;if(null!=K){var ne=c(V,function(bt){return bt>=K});(V=V.slice(0,ne)).push(K)}for(var re=function(bt){var _t=R.slice(2*X,2*V[bt]).concat(K?R.slice(2*K):[]),Lt=(_.hole||[]).map(function(Ot){return Ot-K+(V[bt]-X)}),Ct=s(_t,Lt);Ct=Ct.map(function(Ot){return Ot+X+(Ot+X<V[bt]?0:K-V[bt])}),W.push.apply(W,Ct),X=V[bt]+1},ae=0;ae<V.length;ae++)re(ae);for(var le=0,pe=W.length;le<pe;le++)null!=H[W[le]]&&(W[le]=H[W[le]]);_.triangles=W}else{for(var xe=s(R,_.hole||[]),ye=0,se=xe.length;ye<se;ye++)null!=H[xe[ye]]&&(xe[ye]=H[xe[ye]]);_.triangles=xe}}var fe=new Float64Array(E);t(fe,2,j);var Ee=new Float64Array(2*L+6);_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ee[0]=fe[2*L-4],Ee[1]=fe[2*L-3]):(Ee[0]=fe[2*L-2],Ee[1]=fe[2*L-1]):(Ee[0]=fe[0],Ee[1]=fe[1]),Ee.set(fe,2),_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ee[2*L+2]=fe[2],Ee[2*L+3]=fe[3],_.count-=1):(Ee[2*L+2]=fe[0],Ee[2*L+3]=fe[1],Ee[2*L+4]=fe[2],Ee[2*L+5]=fe[3]):(Ee[2*L+2]=fe[2*L-2],Ee[2*L+3]=fe[2*L-1],Ee[2*L+4]=fe[2*L-2],Ee[2*L+5]=fe[2*L-1]);var de=r(Ee);_.positionBuffer(de);var we=n(Ee,de);_.positionFractBuffer(we)}if(u.range?_.range=u.range:_.range||(_.range=_.bounds),(u.range||u.positions)&&_.count){var ke=_.bounds,oe=_.range[2]-_.range[0],he=_.range[3]-_.range[1];_.scale=[(ke[2]-ke[0])/oe,(ke[3]-ke[1])/he],_.translate=[-_.range[0]/oe+ke[0]/oe||0,-_.range[1]/he+ke[1]/he||0],_.scaleFract=n(_.scale),_.translateFract=n(_.translate)}if(u.dashes){var me,Me=0;if(!u.dashes||u.dashes.length<2)Me=1,me=new Uint8Array([255,255,255,255,255,255,255,255]);else{Me=0;for(var Ie=0;Ie<u.dashes.length;++Ie)Me+=u.dashes[Ie];me=new Uint8Array(Me*h.dashMult);for(var Pe=0,ze=255,ce=0;ce<2;ce++)for(var ge=0;ge<u.dashes.length;++ge){for(var _e=0,De=u.dashes[ge]*h.dashMult*.5;_e<De;++_e)me[Pe++]=ze;ze^=255}}_.dashLength=Me,_.dashTexture({channels:1,data:me,width:me.length,height:1,mag:"linear",min:"linear"},0,0)}if(u.color){var He=_.count,Ve=u.color;Ve||(Ve="transparent");var nt=new Uint8Array(4*He+4);if(Array.isArray(Ve)&&"number"!=typeof Ve[0]){for(var tt=0;tt<He;tt++){var at=k(Ve[tt],"uint8");nt.set(at,4*tt)}nt.set(k(Ve[0],"uint8"),4*He)}else for(var dt=k(Ve,"uint8"),wt=0;wt<He+1;wt++)nt.set(dt,4*wt);_.colorBuffer({usage:"dynamic",type:"uint8",data:nt})}}else x.passes[S]=null}),f.length<this.passes.length){for(var y=f.length;y<this.passes.length;y++){var p=this.passes[y];p&&(p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy())}this.passes.length=f.length}for(var m=[],w=0;w<this.passes.length;w++)null!==this.passes[w]&&m.push(this.passes[w]);return this.passes=m,this}},h.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(Q,z,e){"use strict";function k(g,y){return function(p){if(Array.isArray(p))return p}(g)||function(p,m){var w=null==p?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(null!=w){var u,S,_=[],E=!0,L=!1;try{for(w=w.call(p);!(E=(u=w.next()).done)&&(_.push(u.value),!m||_.length!==m);E=!0);}catch(C){L=!0,S=C}finally{try{E||null==w.return||w.return()}finally{if(L)throw S}}return _}}(g,y)||A(g,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(g,y){if(g){if("string"==typeof g)return l(g,y);var p=Object.prototype.toString.call(g).slice(8,-1);return"Object"===p&&g.constructor&&(p=g.constructor.name),"Map"===p||"Set"===p?Array.from(g):"Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?l(g,y):void 0}}function l(g,y){(null==y||y>g.length)&&(y=g.length);for(var p=0,m=new Array(y);p<y;p++)m[p]=g[p];return m}var T=e(25075),b=e(21527),d=e(6475),s=e(88294),t=e(56131),o=e(56068),r=e(71299),n=e(93447),a=e(30120),i=e(62683),c=e(57060),h=e(18863),f=x;function x(g,y){var p=this;if(!(this instanceof x))return new x(g,y);"function"==typeof g?(y||(y={}),y.regl=g):(y=g,g=null),y&&y.length&&(y.positions=y);var m,w=(g=y.regl)._gl,u=[];this.tooManyColors=i,m=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:u,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(y);var S={uniforms:{constPointSize:!!y.constPointSize,opacity:g.prop("opacity"),paletteSize:function(L,C){return[p.tooManyColors?0:255,m.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/p.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/p.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:0}:{constant:p.tooManyColors?u.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:p.tooManyColors?4:2}:{constant:p.tooManyColors?u.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return!0===C.activation?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},_=t({},S);_.frag=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),_.vert=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=g(_);var E=t({},S);E.frag=o(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),E.vert=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),i&&(E.frag=E.frag.replace("smoothstep","smoothStep"),_.frag=_.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];var w=this.groups;if(1===p.length&&Array.isArray(p[0])&&(null===p[0][0]||Array.isArray(p[0][0]))&&(p=p[0]),this.regl._refresh(),p.length)for(var u=0;u<p.length;u++)this.drawItem(u,p[u]);else w.forEach(function(S,_){g.drawItem(_)});return this},x.prototype.drawItem=function(g,y){var p,m=this.groups,w=m[g];if("number"==typeof y&&(g=y,w=m[y],y=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,y));for(var u=[],S=1;S<w.activation.length;S++)w.activation[S]&&(!0===w.activation[S]||w.activation[S].data.length)&&u.push.apply(u,function(_){if(Array.isArray(_))return l(_)}(p=this.getMarkerDrawOptions(S,w,y))||function(_){if(typeof Symbol<"u"&&null!=_[Symbol.iterator]||null!=_["@@iterator"])return Array.from(_)}(p)||A(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());u.length&&this.drawMarker(u)}},x.prototype.getMarkerDrawOptions=function(g,y,p){var m=y.range,w=y.tree,u=y.viewport,S=y.activation,_=y.selectionBuffer,E=y.count;if(!w)return p?[t({},y,{markerTexture:this.markerTextures[g],activation:S[g],count:p.length,elements:p,offset:0})]:[t({},y,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var L=[],C=w.range(m,{lod:!0,px:[(m[2]-m[0])/u.width,(m[3]-m[1])/u.height]});if(p){for(var P=S[g].data,I=new Uint8Array(E),j=0;j<p.length;j++){var R=p[j];I[R]=P?P[R]:1}_.subdata(I)}for(var H=C.length;H--;){var F=k(C[H],2),U=F[0];L.push(t({},y,{markerTexture:this.markerTextures[g],activation:p?_:S[g],offset:U,count:F[1]-U}))}return L},x.prototype.update=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];if(p.length){1===p.length&&Array.isArray(p[0])&&(p=p[0]);var w=this.groups,u=this.gl,S=this.regl,_=this.maxSize,E=this.maxColors,L=this.palette;this.groups=w=p.map(function(C,P){var I=w[P];if(void 0===C)return I;null===C?C={positions:null}:"function"==typeof C?C={ondraw:C}:"number"==typeof C[0]&&(C={positions:C}),null===(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(C.positions=[]),null!=C.tooManyColors&&(g.tooManyColors=C.tooManyColors),I||(w[P]=I={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=I.marker,delete I.marker),C.marker&&!("positions"in C)&&(C.positions=I.positions,delete I.positions);var j=0,R=0;if(n(I,C,[{snap:!0,size:function(ye,se){return null==ye&&(ye=x.defaults.size),j+=ye&&ye.length?1:0,ye},borderSize:function(ye,se){return null==ye&&(ye=x.defaults.borderSize),j+=ye&&ye.length?1:0,ye},opacity:parseFloat,color:function(ye,se){return null==ye&&(ye=x.defaults.color),ye=g.updateColor(ye),R++,ye},borderColor:function(ye,se){return null==ye&&(ye=x.defaults.borderColor),ye=g.updateColor(ye),R++,ye},bounds:function(ye,se,fe){return"range"in fe||(fe.range=null),ye},positions:function(ye,se,fe){var Ee=se.snap,de=se.positionBuffer,we=se.positionFractBuffer,ke=se.selectionBuffer;if(ye.x||ye.y)return se.xAttr=ye.x.length?{buffer:S.buffer(ye.x),offset:0,stride:4,count:ye.x.length}:{buffer:ye.x.buffer,offset:4*ye.x.offset||0,stride:4*(ye.x.stride||1),count:ye.x.count},se.yAttr=ye.y.length?{buffer:S.buffer(ye.y),offset:0,stride:4,count:ye.y.length}:{buffer:ye.y.buffer,offset:4*ye.y.offset||0,stride:4*(ye.y.stride||1),count:ye.y.count},se.count=Math.max(se.xAttr.count,se.yAttr.count),ye;ye=a(ye,"float64");var Te=se.count=Math.floor(ye.length/2),$=se.bounds=Te?b(ye,2):null;if(fe.range||se.range||(delete se.range,fe.range=$),fe.marker||se.marker||(delete se.marker,fe.marker=null),Ee&&(!0===Ee||Te>Ee)?se.tree=s(ye,{bounds:$}):Ee&&Ee.length&&(se.tree=Ee),se.tree){var oe={primitive:"points",usage:"static",data:se.tree,type:"uint32"};se.elements?se.elements(oe):se.elements=S.elements(oe)}var he=c.float32(ye);return de({data:he,usage:"dynamic"}),we({data:c.fract32(ye,he),usage:"dynamic"}),ke({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),ye}},{marker:function(ye,se,fe){var Ee=se.activation;if(Ee.forEach(function(he){return he&&he.destroy&&he.destroy()}),Ee.length=0,ye&&"number"!=typeof ye[0]){for(var de=[],we=0,ke=Math.min(ye.length,se.count);we<ke;we++){var Te=g.addMarker(ye[we]);de[Te]||(de[Te]=new Uint8Array(se.count)),de[Te][we]=1}for(var $=0;$<de.length;$++)if(de[$]){var oe={data:de[$],type:"uint8",usage:"static"};Ee[$]?Ee[$](oe):Ee[$]=S.buffer(oe),Ee[$].data=de[$]}}else Ee[g.addMarker(ye)]=!0;return ye},range:function(ye,se,fe){var Ee=se.bounds;if(Ee)return ye||(ye=Ee),se.scale=[1/(ye[2]-ye[0]),1/(ye[3]-ye[1])],se.translate=[-ye[0],-ye[1]],se.scaleFract=c.fract(se.scale),se.translateFract=c.fract(se.translate),ye},viewport:function(ye){return h(ye||[u.drawingBufferWidth,u.drawingBufferHeight])}}]),j){var F=I.count,U=I.size,B=I.borderSize,N=I.sizeBuffer,J=new Uint8Array(2*F);if(U.length||B.length)for(var Z=0;Z<F;Z++)J[2*Z]=Math.round(255*(null==U[Z]?U:U[Z])/_),J[2*Z+1]=Math.round(255*(null==B[Z]?B:B[Z])/_);N({data:J,usage:"dynamic"})}if(R){var V,X=I.count,K=I.color,ne=I.borderColor,re=I.colorBuffer;if(g.tooManyColors){if(K.length||ne.length){V=new Uint8Array(8*X);for(var ae=0;ae<X;ae++){var le=K[ae];V[8*ae]=L[4*le],V[8*ae+1]=L[4*le+1],V[8*ae+2]=L[4*le+2],V[8*ae+3]=L[4*le+3];var pe=ne[ae];V[8*ae+4]=L[4*pe],V[8*ae+5]=L[4*pe+1],V[8*ae+6]=L[4*pe+2],V[8*ae+7]=L[4*pe+3]}}}else if(K.length||ne.length){V=new Uint8Array(4*X+2);for(var xe=0;xe<X;xe++)null!=K[xe]&&(V[4*xe]=K[xe]%E,V[4*xe+1]=Math.floor(K[xe]/E)),null!=ne[xe]&&(V[4*xe+2]=ne[xe]%E,V[4*xe+3]=Math.floor(ne[xe]/E))}re({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return I})}},x.prototype.addMarker=function(g){var y,p=this.markerTextures,m=this.regl,w=this.markerCache,u=null==g?0:w.indexOf(g);if(u>=0)return u;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)y=g;else{y=new Uint8Array(g.length);for(var S=0,_=g.length;S<_;S++)y[S]=255*g[S]}var E=Math.floor(Math.sqrt(y.length));return u=p.length,w.push(g),p.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),u},x.prototype.updateColor=function(g){var y=this.paletteIds,p=this.palette,m=this.maxColors;Array.isArray(g)||(g=[g]);var w=[];if("number"==typeof g[0]){var u=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)u.push(g.slice(S,S+4));else for(var _=0;_<g.length;_+=4)u.push(g.subarray(_,_+4));g=u}for(var E=0;E<g.length;E++){var L=g[E];L=T(L,"uint8");var C=d(L,!1);if(null==y[C]){var P=p.length;y[C]=Math.floor(P/4),p[P]=L[0],p[P+1]=L[1],p[P+2]=L[2],p[P+3]=L[3]}w[E]=y[C]}return!this.tooManyColors&&p.length>4*m&&(this.tooManyColors=!0),this.updatePalette(p),1===w.length?w[0]:w},x.prototype.updatePalette=function(g){if(!this.tooManyColors){var y=this.maxColors,p=this.paletteTexture,m=Math.ceil(.25*g.length/y);if(m>1)for(var w=.25*(g=g.slice()).length%y;w<m*y;w++)g.push(0,0,0,0);p.height<m&&p.resize(y,m),p.subimage({width:Math.min(.25*g.length,y),height:m,data:g},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var v=e(56131);Q.exports=function(g,y){var p=new f(g,y),m=p.render.bind(p);return v(m,{render:m,update:p.update.bind(p),draw:p.draw.bind(p),destroy:p.destroy.bind(p),regl:p.regl,gl:p.gl,canvas:p.gl.canvas,groups:p.groups,markers:p.markerCache,palette:p.palette}),m}},60487:function(Q,z,e){"use strict";var k=e(11870),A=e(71299),l=e(21527),T=e(5877),b=e(57471),d=e(18863),s=e(30120);function t(a,i){if(!(this instanceof t))return new t(a,i);this.traces=[],this.passes={},this.regl=a,this.scatter=k(a),this.canvas=this.scatter.canvas}function o(a,i,c){return(null!=a.id?a.id:a)<<16|(255&i)<<8|255&c}function r(a,i,c){var h,f,x,v,g=a[i],y=a[c];return g.length>2?(h=g[1],f=g[3]):g.length?(h=g[0],f=g[1]):(h=g.y,f=g.y+g.height),y.length>2?(x=y[0],v=y[2]):y.length?(x=y[0],v=y[1]):(x=y.x,v=y.x+y.width),[x,h,v,f]}function n(a){if("number"==typeof a)return[a,a,a,a];if(2===a.length)return[a[0],a[1],a[0],a[1]];var i=d(a);return[i.x,i.y,i.x+i.width,i.y+i.height]}Q.exports=t,t.prototype.render=function(){for(var a,i=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(a=this).update.apply(a,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=T(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,T(function(){i.dirty=!1})),this)},t.prototype.update=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=0;h<i.length;h++)this.updateItem(h,i[h]);this.traces=this.traces.filter(Boolean);for(var f=[],x=0,v=0;v<this.traces.length;v++){for(var g=this.traces[v],y=this.traces[v].passes,p=0;p<y.length;p++)f.push(this.passes[y[p]]);g.passOffset=x,x+=g.passes.length}return(a=this.scatter).update.apply(a,f),this}},t.prototype.updateItem=function(a,i){var c=this.regl;if(null===i)return this.traces[a]=null,this;if(!i)return this;var h,f=A(i,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:d([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=f.color&&(x.color=f.color),null!=f.size&&(x.size=f.size),null!=f.marker&&(x.marker=f.marker),null!=f.borderColor&&(x.borderColor=f.borderColor),null!=f.borderSize&&(x.borderSize=f.borderSize),null!=f.opacity&&(x.opacity=f.opacity),f.viewport&&(x.viewport=d(f.viewport)),null!=f.diagonal&&(x.diagonal=f.diagonal),null!=f.upper&&(x.upper=f.upper),null!=f.lower&&(x.lower=f.lower),f.data){x.buffer(s(f.data)),x.columns=f.data.length,x.count=f.data[0].length,x.bounds=[];for(var v=0;v<x.columns;v++)x.bounds[v]=l(f.data[v],1)}f.range&&(x.range=f.range,h=x.range&&"number"!=typeof x.range[0]),f.domain&&(x.domain=f.domain);var g=!1;null!=f.padding&&(Array.isArray(f.padding)&&f.padding.length===x.columns&&"number"==typeof f.padding[f.padding.length-1]?(x.padding=f.padding.map(n),g=!0):x.padding=n(f.padding));var y=x.columns,p=x.count,m=x.viewport.width,w=x.viewport.height,u=x.viewport.x,S=x.viewport.y,_=m/y,E=w/y;x.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((x.diagonal||C!==L)&&(x.upper||!(L>C))&&(x.lower||!(L<C))){var P=o(x.id,L,C),I=this.passes[P]||(this.passes[P]={});if(f.data&&(I.positions=f.transpose?{x:{buffer:x.buffer,offset:C,count:p,stride:y},y:{buffer:x.buffer,offset:L,count:p,stride:y}}:{x:{buffer:x.buffer,offset:C*p,count:p},y:{buffer:x.buffer,offset:L*p,count:p}},I.bounds=r(x.bounds,L,C)),f.domain||f.viewport||f.data){var j=g?r(x.padding,L,C):x.padding;if(x.domain){var R=r(x.domain,L,C);I.viewport=[u+R[0]*m+j[0],S+R[1]*w+j[1],u+R[2]*m-j[2],S+R[3]*w-j[3]]}else I.viewport=[u+C*_+_*j[0],S+L*E+E*j[1],u+(C+1)*_-_*j[2],S+(L+1)*E-E*j[3]]}f.color&&(I.color=x.color),f.size&&(I.size=x.size),f.marker&&(I.marker=x.marker),f.borderSize&&(I.borderSize=x.borderSize),f.borderColor&&(I.borderColor=x.borderColor),f.opacity&&(I.opacity=x.opacity),f.range&&(I.range=h?r(x.range,L,C):x.range||I.bounds),x.passes.push(P)}return this},t.prototype.draw=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=[],f=0;f<i.length;f++)if("number"==typeof i[f]){var x=this.traces[i[f]],g=x.passOffset;h.push.apply(h,b(g,g+x.passes.length))}else if(i[f].length){var y=i[f],p=this.traces[f],m=p.passes,w=p.passOffset;m=m.map(function(u,S){h[w+S]=y})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(Q){Q.exports=function(){function z(Be,Ye){this.id=ne++,this.type=Be,this.data=Ye}function e(Be){if(0===Be.length)return[];var Ye=Be.charAt(0),rt=Be.charAt(Be.length-1);if(1<Be.length&&Ye===rt&&('"'===Ye||"'"===Ye))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ye=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return e(Be.substr(0,Ye.index)).concat(e(Ye[1])).concat(e(Be.substr(Ye.index+Ye[0].length)));if(1===(Ye=Be.split(".")).length)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],rt=0;rt<Ye.length;++rt)Be=Be.concat(e(Ye[rt]));return Be}function k(Be){return"["+e(Be).join("][")+"]"}function A(Be){return"string"==typeof Be?Be.split():Be}function l(Be){return"string"==typeof Be?document.querySelector(Be):Be}function b(Be,Ye){for(var rt=Array(Be),Se=0;Se<Be;++Se)rt[Se]=Ye(Se);return rt}function d(Be){var Ye,rt;return Ye=(65535<Be)<<4,Ye|=rt=(255<(Be>>>=Ye))<<3,(Ye|=rt=(15<(Be>>>=rt))<<2)|(rt=(3<(Be>>>=rt))<<1)|Be>>>rt>>1}function s(){function Be(Se){e:{for(var Re=16;268435456>=Re;Re*=16)if(Se<=Re){Se=Re;break e}Se=0}return 0<(Re=rt[d(Se)>>2]).length?Re.pop():new ArrayBuffer(Se)}function Ye(Se){rt[d(Se.byteLength)>>2].push(Se)}var rt=b(8,function(){return[]});return{alloc:Be,free:Ye,allocType:function(Se,Re){var Ke=null;switch(Se){case 5120:Ke=new Int8Array(Be(Re),0,Re);break;case 5121:Ke=new Uint8Array(Be(Re),0,Re);break;case 5122:Ke=new Int16Array(Be(2*Re),0,Re);break;case 5123:Ke=new Uint16Array(Be(2*Re),0,Re);break;case 5124:Ke=new Int32Array(Be(4*Re),0,Re);break;case 5125:Ke=new Uint32Array(Be(4*Re),0,Re);break;case 5126:Ke=new Float32Array(Be(4*Re),0,Re);break;default:return null}return Ke.length!==Re?Ke.subarray(0,Re):Ke},freeType:function(Se){Ye(Se.buffer)}}}function t(Be){return!!Be&&"object"==typeof Be&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&"number"==typeof Be.offset&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ye(Be.data))}function o(Be,Ye,rt,Se,Re,Ke){for(var st=0;st<Ye;++st)for(var ct=Be[st],Tt=0;Tt<rt;++Tt)for(var Et=ct[Tt],At=0;At<Se;++At)Re[Ke++]=Et[At]}function r(Be,Ye,rt,Se,Re){for(var Ke=1,st=rt+1;st<Ye.length;++st)Ke*=Ye[st];var ct=Ye[rt];if(Ye.length-rt==4){var Tt=Ye[rt+1],Et=Ye[rt+2];for(Ye=Ye[rt+3],st=0;st<ct;++st)o(Be[st],Tt,Et,Ye,Se,Re),Re+=Ke}else for(st=0;st<ct;++st)r(Be[st],Ye,rt+1,Se,Re),Re+=Ke}function n(Be){return 0|Ee[Object.prototype.toString.call(Be)]}function a(Be,Ye){for(var rt=0;rt<Ye.length;++rt)Be[rt]=Ye[rt]}function i(Be,Ye,rt,Se,Re,Ke,st){for(var ct=0,Tt=0;Tt<rt;++Tt)for(var Et=0;Et<Se;++Et)Be[ct++]=Ye[Re*Tt+Ke*Et+st]}function f(Be){for(var Ye=pe.allocType(5123,Be.length),rt=0;rt<Be.length;++rt)if(isNaN(Be[rt]))Ye[rt]=65535;else if(Be[rt]===1/0)Ye[rt]=31744;else if(Be[rt]===-1/0)Ye[rt]=64512;else{he[0]=Be[rt];var Se=(Ke=me[0])>>>31<<15,Re=(Ke<<1>>>24)-127,Ke=Ke>>13&1023;Ye[rt]=-24>Re?Se:-14>Re?Se+(Ke+1024>>-14-Re):15<Re?Se+31744:Se+(Re+15<<10)+Ke}return Ye}function x(Be){return Array.isArray(Be)||ye(Be)}function v(Be){return"[object "+Be+"]"}function g(Be){return Array.isArray(Be)&&(0===Be.length||"number"==typeof Be[0])}function y(Be){return!(!Array.isArray(Be)||0===Be.length||!x(Be[0]))}function p(Be){return Object.prototype.toString.call(Be)}function m(Be){if(!Be)return!1;var Ye=p(Be);return 0<=Ve.indexOf(Ye)||g(Be)||y(Be)||t(Be)}function w(Be,Ye){36193===Be.type?(Be.data=f(Ye),pe.freeType(Ye)):Be.data=Ye}function u(Be,Ye,rt,Se,Re,Ke){if(Be=void 0!==tt[Be]?tt[Be]:Pe[Be]*nt[Ye],Ke&&(Be*=6),Re){for(Se=0;1<=rt;)Se+=Be*rt*rt,rt/=2;return Se}return Be*rt*Se}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function I(Be,Ye){return Be>>>Ye|Be<<32-Ye}function j(Be,Ye){var rt=(65535&Be)+(65535&Ye);return(Be>>16)+(Ye>>16)+(rt>>16)<<16|65535&rt}function R(Be){return Array.prototype.slice.call(Be)}function H(Be){return R(Be).join("")}function U(Be){return Array.isArray(Be)||ye(Be)||t(Be)}function B(Be){return Be.sort(function(Ye,rt){return"viewport"===Ye?-1:"viewport"===rt?1:Ye<rt?-1:1})}function N(Be,Ye,rt,Se){this.thisDep=Be,this.contextDep=Ye,this.propDep=rt,this.append=Se}function J(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function Z(Be){return new N(!1,!1,!1,Be)}function V(Be,Ye){var rt=Be.type;if(0===rt)return new N(!0,1<=(rt=Be.data.length),2<=rt,Ye);if(4===rt)return new N((rt=Be.data).thisDep,rt.contextDep,rt.propDep,Ye);if(5===rt)return new N(!1,!1,!1,Ye);if(6===rt){for(var Se=rt=!1,Re=!1,Ke=0;Ke<Be.data.length;++Ke){var st=Be.data[Ke];1===st.type?Re=!0:2===st.type?Se=!0:3===st.type?rt=!0:0===st.type?(rt=!0,1<=(st=st.data)&&(Se=!0),2<=st&&(Re=!0)):4===st.type&&(rt=rt||st.data.thisDep,Se=Se||st.data.contextDep,Re=Re||st.data.propDep)}return new N(rt,Se,Re,Ye)}return new N(3===rt,2===rt,1===rt,Ye)}function W(Be,Ye,rt,Se,Re,Ke,st,ct,Tt,Et,At,ht,pt,gt,Pt,zt){function Ut(Rt){return Rt.replace(".","_")}function Nt(Rt,Zt,tn){var En=Ut(Rt);Bn.push(Rt),Ln[En]=Tn[En]=!!tn,Hn[En]=Zt}function jt(Rt,Zt,tn){var En=Ut(Rt);Bn.push(Rt),Array.isArray(tn)?(Tn[En]=tn.slice(),Ln[En]=tn.slice()):Tn[En]=Ln[En]=tn,or[En]=Zt}function Gt(){var Rt=function F(Be){function Ye(){var At=[],ht=[];return K(function(){At.push.apply(At,R(arguments))},{def:function(){var pt="v"+Re++;return ht.push(pt),0<arguments.length&&(At.push(pt,"="),At.push.apply(At,R(arguments)),At.push(";")),pt},toString:function(){return H([0<ht.length?"var "+ht.join(",")+";":"",H(At)])}})}function rt(){function At(zt,Ut){pt(zt,Ut,"=",ht.def(zt,Ut),";")}var ht=Ye(),pt=Ye(),gt=ht.toString,Pt=pt.toString;return K(function(){ht.apply(ht,R(arguments))},{def:ht.def,entry:ht,exit:pt,save:At,set:function(zt,Ut,Nt){At(zt,Ut),ht(zt,Ut,"=",Nt,";")},toString:function(){return gt()+Pt()}})}var Se=Be&&Be.cache,Re=0,Ke=[],st=[],ct=[],Tt=Ye(),Et={};return{global:Tt,link:function(At,ht){var pt=ht&&ht.stable;if(!pt)for(var gt=0;gt<st.length;++gt)if(st[gt]===At&&!ct[gt])return Ke[gt];return gt="g"+Re++,Ke.push(gt),st.push(At),ct.push(pt),gt},block:Ye,proc:function(At,ht){function pt(){var Ut="a"+gt.length;return gt.push(Ut),Ut}var gt=[];ht=ht||0;for(var Pt=0;Pt<ht;++Pt)pt();var zt=(Pt=rt()).toString;return Et[At]=K(Pt,{arg:pt,toString:function(){return H(["function(",gt.join(),"){",zt(),"}"])}})},scope:rt,cond:function(){var At=H(arguments),ht=rt(),pt=rt(),gt=ht.toString,Pt=pt.toString;return K(ht,{then:function(){return ht.apply(ht,R(arguments)),this},else:function(){return pt.apply(pt,R(arguments)),this},toString:function(){var zt=Pt();return zt&&(zt="else{"+zt+"}"),H(["if(",At,"){",gt(),"}",zt])}})},compile:function(){var At=['"use strict";',Tt,"return {"];Object.keys(Et).forEach(function(gt){At.push('"',gt,'":',Et[gt].toString(),",")}),At.push("}");var ht,pt=H(At).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Se&&(ht=function(gt){for(var Pt,zt="",Ut=0;Ut<gt.length;Ut++)Pt=gt.charCodeAt(Ut),zt+="0123456789abcdef".charAt(Pt>>>4&15)+"0123456789abcdef".charAt(15&Pt);return zt}(function(gt){for(var Pt=Array(gt.length>>2),zt=0;zt<Pt.length;zt++)Pt[zt]=0;for(zt=0;zt<8*gt.length;zt+=8)Pt[zt>>5]|=(255&gt.charCodeAt(zt/8))<<24-zt%32;var Ut,Nt,jt,Gt,un,hn,Qt,_n,Fn,yn,on,pn=8*gt.length;for(gt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],zt=Array(64),Pt[pn>>5]|=128<<24-pn%32,Pt[15+(pn+64>>9<<4)]=pn,_n=0;_n<Pt.length;_n+=16){for(pn=gt[0],Ut=gt[1],Nt=gt[2],jt=gt[3],Gt=gt[4],un=gt[5],hn=gt[6],Qt=gt[7],Fn=0;64>Fn;Fn++){var ln;16>Fn?zt[Fn]=Pt[Fn+_n]:(yn=Fn,on=j(on=I(on=zt[Fn-2],17)^I(on,19)^on>>>10,zt[Fn-7]),ln=I(ln=zt[Fn-15],7)^I(ln,18)^ln>>>3,zt[yn]=j(j(on,ln),zt[Fn-16])),yn=j(j(j(j(Qt,yn=I(yn=Gt,6)^I(yn,11)^I(yn,25)),Gt&un^~Gt&hn),_t[Fn]),zt[Fn]),on=j(Qt=I(Qt=pn,2)^I(Qt,13)^I(Qt,22),pn&Ut^pn&Nt^Ut&Nt),Qt=hn,hn=un,un=Gt,Gt=j(jt,yn),jt=Nt,Nt=Ut,Ut=pn,pn=j(yn,on)}gt[0]=j(pn,gt[0]),gt[1]=j(Ut,gt[1]),gt[2]=j(Nt,gt[2]),gt[3]=j(jt,gt[3]),gt[4]=j(Gt,gt[4]),gt[5]=j(un,gt[5]),gt[6]=j(hn,gt[6]),gt[7]=j(Qt,gt[7])}for(Pt="",zt=0;zt<32*gt.length;zt+=8)Pt+=String.fromCharCode(gt[zt>>5]>>>24-zt%32&255);return Pt}(function(gt){for(var Pt,zt,Ut="",Nt=-1;++Nt<gt.length;)Pt=gt.charCodeAt(Nt),zt=Nt+1<gt.length?gt.charCodeAt(Nt+1):0,55296<=Pt&&56319>=Pt&&56320<=zt&&57343>=zt&&(Pt=65536+((1023&Pt)<<10)+(1023&zt),Nt++),127>=Pt?Ut+=String.fromCharCode(Pt):2047>=Pt?Ut+=String.fromCharCode(192|Pt>>>6&31,128|63&Pt):65535>=Pt?Ut+=String.fromCharCode(224|Pt>>>12&15,128|Pt>>>6&63,128|63&Pt):2097151>=Pt&&(Ut+=String.fromCharCode(240|Pt>>>18&7,128|Pt>>>12&63,128|Pt>>>6&63,128|63&Pt));return Ut}(pt))),Se[ht])?Se[ht].apply(null,st):(pt=Function.apply(null,Ke.concat(pt)),Se&&(Se[ht]=pt),pt.apply(null,st))}}}({cache:Pt}),Zt=Rt.link,tn=Rt.global;Rt.id=An++,Rt.batchId="0";var En=Zt(mr),Mn=Rt.shared={props:"a0"};Object.keys(mr).forEach(function(fn){Mn[fn]=tn.def(En,".",fn)});var wn=Rt.next={},an=Rt.current={};Object.keys(or).forEach(function(fn){Array.isArray(Tn[fn])&&(wn[fn]=tn.def(Mn.next,".",fn),an[fn]=tn.def(Mn.current,".",fn))});var vn=Rt.constants={};Object.keys(Kt).forEach(function(fn){vn[fn]=tn.def(JSON.stringify(Kt[fn]))}),Rt.invoke=function(fn,mn){switch(mn.type){case 0:var Pn=["this",Mn.context,Mn.props,Rt.batchId];return fn.def(Zt(mn.data),".call(",Pn.slice(0,Math.max(mn.data.length+1,4)),")");case 1:return fn.def(Mn.props,mn.data);case 2:return fn.def(Mn.context,mn.data);case 3:return fn.def("this",mn.data);case 4:return mn.data.append(Rt,fn),mn.data.ref;case 5:return mn.data.toString();case 6:return mn.data.map(function(qn){return Rt.invoke(fn,qn)})}},Rt.attribCache={};var sn={};return Rt.scopeAttrib=function(fn){if((fn=Ye.id(fn))in sn)return sn[fn];var mn=Et.scope[fn];return mn||(mn=Et.scope[fn]=new Gn),sn[fn]=Zt(mn)},Rt}function yn(Rt,Zt,tn){var En=Rt.shared.context,Mn=Rt.scope();Object.keys(tn).forEach(function(wn){Zt.save(En,"."+wn);var an=tn[wn].append(Rt,Zt);Array.isArray(an)?Mn(En,".",wn,"=[",an.join(),"];"):Mn(En,".",wn,"=",an,";")}),Zt(Mn)}function on(Rt,Zt,tn,En){var Mn,wn=(vn=Rt.shared).gl,an=vn.framebuffer;rn&&(Mn=Zt.def(vn.extensions,".webgl_draw_buffers"));var vn=(sn=Rt.constants).drawBuffer,sn=sn.backBuffer;Rt=tn?tn.append(Rt,Zt):Zt.def(an,".next"),En||Zt("if(",Rt,"!==",an,".cur){"),Zt("if(",Rt,"){",wn,".bindFramebuffer(",36160,",",Rt,".framebuffer);"),rn&&Zt(Mn,".drawBuffersWEBGL(",vn,"[",Rt,".colorAttachments.length]);"),Zt("}else{",wn,".bindFramebuffer(",36160,",null);"),rn&&Zt(Mn,".drawBuffersWEBGL(",sn,");"),Zt("}",an,".cur=",Rt,";"),En||Zt("}")}function pn(Rt,Zt,tn){var En=Rt.shared,Mn=En.gl,wn=Rt.current,an=Rt.next,vn=En.current,sn=En.next,fn=Rt.cond(vn,".dirty");Bn.forEach(function(mn){var Pn,qn;if(!((mn=Ut(mn))in tn.state))if(mn in an){Pn=an[mn],qn=wn[mn];var Zn=b(Tn[mn].length,function(Jn){return fn.def(Pn,"[",Jn,"]")});fn(Rt.cond(Zn.map(function(Jn,rr){return Jn+"!=="+qn+"["+rr+"]"}).join("||")).then(Mn,".",or[mn],"(",Zn,");",Zn.map(function(Jn,rr){return qn+"["+rr+"]="+Jn}).join(";"),";"))}else Pn=fn.def(sn,".",mn),Zn=Rt.cond(Pn,"!==",vn,".",mn),fn(Zn),mn in Hn?Zn(Rt.cond(Pn).then(Mn,".enable(",Hn[mn],");").else(Mn,".disable(",Hn[mn],");"),vn,".",mn,"=",Pn,";"):Zn(Mn,".",or[mn],"(",Pn,");",vn,".",mn,"=",Pn,";")}),0===Object.keys(tn.state).length&&fn(vn,".dirty=false;"),Zt(fn)}function ln(Rt,Zt,tn,En){var Mn,wn=Rt.shared,an=Rt.current,vn=wn.current,sn=wn.gl;B(Object.keys(tn)).forEach(function(fn){var mn=tn[fn];if(!En||En(mn)){var Pn=mn.append(Rt,Zt);if(Hn[fn]){var qn=Hn[fn];J(mn)?(Mn=Rt.link(Pn,{stable:!0}),Zt(Rt.cond(Mn).then(sn,".enable(",qn,");").else(sn,".disable(",qn,");")),Zt(vn,".",fn,"=",Mn,";")):(Zt(Rt.cond(Pn).then(sn,".enable(",qn,");").else(sn,".disable(",qn,");")),Zt(vn,".",fn,"=",Pn,";"))}else if(x(Pn)){var Zn=an[fn];Zt(sn,".",or[fn],"(",Pn,");",Pn.map(function(Jn,rr){return Zn+"["+rr+"]="+Jn}).join(";"),";")}else J(mn)?(Mn=Rt.link(Pn,{stable:!0}),Zt(sn,".",or[fn],"(",Mn,");",vn,".",fn,"=",Mn,";")):Zt(sn,".",or[fn],"(",Pn,");",vn,".",fn,"=",Pn,";")}})}function dn(Rt,Zt){Jt&&(Rt.instancing=Zt.def(Rt.shared.extensions,".angle_instanced_arrays"))}function Cn(Rt,Zt,tn,En,Mn){function wn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function an(rr){rr(fn=Zt.def(),"=",wn(),";"),"string"==typeof Mn?rr(qn,".count+=",Mn,";"):rr(qn,".count++;"),gt&&(En?rr(mn=Zt.def(),"=",Jn,".getNumPendingQueries();"):rr(Jn,".beginQuery(",qn,");"))}function vn(rr){rr(qn,".cpuTime+=",wn(),"-",fn,";"),gt&&(En?rr(Jn,".pushScopeStats(",mn,",",Jn,".getNumPendingQueries(),",qn,");"):rr(Jn,".endQuery();"))}function sn(rr){var tr=Zt.def(Zn,".profile");Zt(Zn,".profile=",rr,";"),Zt.exit(Zn,".profile=",tr,";")}var fn,mn,Pn=Rt.shared,qn=Rt.stats,Zn=Pn.current,Jn=Pn.timer;if(tn=tn.profile){if(J(tn))return void(tn.enable?(an(Zt),vn(Zt.exit),sn("true")):sn("false"));sn(tn=tn.append(Rt,Zt))}else tn=Zt.def(Zn,".profile");an(Pn=Rt.block()),Zt("if(",tn,"){",Pn,"}"),vn(Rt=Rt.block()),Zt.exit("if(",tn,"){",Rt,"}")}function kn(Rt,Zt,tn,En,Mn){var an=Rt.shared;En.forEach(function(vn){var sn,fn=vn.name,mn=tn.attributes[fn];if(mn){if(!Mn(mn))return;sn=mn.append(Rt,Zt)}else{if(!Mn(Ze))return;var Pn=Rt.scopeAttrib(fn);sn={},Object.keys(new Gn).forEach(function(qn){sn[qn]=Zt.def(Pn,".",qn)})}!function wn(vn,sn,fn){function mn(){Zt("if(!",Jn,".buffer){",qn,".enableVertexAttribArray(",Zn,");}");var ar,cr=fn.type;ar=fn.size?Zt.def(fn.size,"||",sn):sn,Zt("if(",Jn,".type!==",cr,"||",Jn,".size!==",ar,"||",sr.map(function(br){return Jn+"."+br+"!=="+fn[br]}).join("||"),"){",qn,".bindBuffer(",34962,",",rr,".buffer);",qn,".vertexAttribPointer(",[Zn,ar,cr,fn.normalized,fn.stride,fn.offset],");",Jn,".type=",cr,";",Jn,".size=",ar,";",sr.map(function(br){return Jn+"."+br+"="+fn[br]+";"}).join(""),"}"),Jt&&Zt("if(",Jn,".divisor!==",cr=fn.divisor,"){",Rt.instancing,".vertexAttribDivisorANGLE(",[Zn,cr],");",Jn,".divisor=",cr,";}")}function Pn(){Zt("if(",Jn,".buffer){",qn,".disableVertexAttribArray(",Zn,");",Jn,".buffer=null;","}if(",Lt.map(function(ar,cr){return Jn+"."+ar+"!=="+tr[cr]}).join("||"),"){",qn,".vertexAttrib4f(",Zn,",",tr,");",Lt.map(function(ar,cr){return Jn+"."+ar+"="+tr[cr]+";"}).join(""),"}")}var qn=an.gl,Zn=Zt.def(vn,".location"),Jn=Zt.def(an.attributes,"[",Zn,"]"),rr=fn.buffer,tr=[fn.x,fn.y,fn.z,fn.w],sr=["buffer","normalized","offset","stride"];1===(vn=fn.state)?mn():2===vn?Pn():(Zt("if(",vn,"===",1,"){"),mn(),Zt("}else{"),Pn(),Zt("}"))}(Rt.link(vn),function(qn){switch(qn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(vn.info.type),sn)})}function Rn(Rt,Zt,tn,En,Mn,wn){for(var an,vn=Rt.shared,sn=vn.gl,fn=0;fn<En.length;++fn){var mn,Pn=(Jn=En[fn]).name,qn=Jn.info.type,Zn=tn.uniforms[Pn],Jn=Rt.link(Jn)+".location";if(Zn){if(!Mn(Zn))continue;if(J(Zn)){if(Pn=Zn.value,35678===qn||35680===qn)Zt(sn,".uniform1i(",Jn,",",(qn=Rt.link(Pn._texture||Pn.color[0]._texture))+".bind());"),Zt.exit(qn,".unbind();");else if(35674===qn||35675===qn||35676===qn)Zn=2,35675===qn?Zn=3:35676===qn&&(Zn=4),Zt(sn,".uniformMatrix",Zn,"fv(",Jn,",false,",Pn=Rt.global.def("new Float32Array(["+Array.prototype.slice.call(Pn)+"])"),");");else{switch(qn){case 5126:an="1f";break;case 35664:an="2f";break;case 35665:an="3f";break;case 35666:an="4f";break;case 35670:case 5124:an="1i";break;case 35671:case 35667:an="2i";break;case 35672:case 35668:an="3i";break;case 35673:case 35669:an="4i"}Zt(sn,".uniform",an,"(",Jn,",",x(Pn)?Array.prototype.slice.call(Pn):Pn,");")}continue}mn=Zn.append(Rt,Zt)}else{if(!Mn(Ze))continue;mn=Zt.def(vn.uniforms,"[",Ye.id(Pn),"]")}switch(35678===qn?Zt("if(",mn,"&&",mn,'._reglType==="framebuffer"){',mn,"=",mn,".color[0];","}"):35680===qn&&Zt("if(",mn,"&&",mn,'._reglType==="framebufferCube"){',mn,"=",mn,".color[0];","}"),Pn=1,qn){case 35678:case 35680:qn=Zt.def(mn,"._texture"),Zt(sn,".uniform1i(",Jn,",",qn,".bind());"),Zt.exit(qn,".unbind();");continue;case 5124:case 35670:an="1i";break;case 35667:case 35671:an="2i",Pn=2;break;case 35668:case 35672:an="3i",Pn=3;break;case 35669:case 35673:an="4i",Pn=4;break;case 5126:an="1f";break;case 35664:an="2f",Pn=2;break;case 35665:an="3f",Pn=3;break;case 35666:an="4f",Pn=4;break;case 35674:an="Matrix2fv";break;case 35675:an="Matrix3fv";break;case 35676:an="Matrix4fv"}if("M"===an.charAt(0)){Zt(sn,".uniform",an,"(",Jn,","),Jn=Math.pow(qn-35674+2,2);var rr=Rt.global.def("new Float32Array(",Jn,")");Array.isArray(mn)?Zt("false,(",b(Jn,function(sr){return rr+"["+sr+"]="+mn[sr]}),",",rr,")"):Zt("false,(Array.isArray(",mn,")||",mn," instanceof Float32Array)?",mn,":(",b(Jn,function(sr){return rr+"["+sr+"]="+mn+"["+sr+"]"}),",",rr,")"),Zt(");")}else{if(1<Pn){qn=[];var tr=[];for(Zn=0;Zn<Pn;++Zn)Array.isArray(mn)?tr.push(mn[Zn]):tr.push(Zt.def(mn+"["+Zn+"]")),wn&&qn.push(Zt.def());wn&&Zt("if(!",Rt.batchId,"||",qn.map(function(sr,ar){return sr+"!=="+tr[ar]}).join("||"),"){",qn.map(function(sr,ar){return sr+"="+tr[ar]+";"}).join("")),Zt(sn,".uniform",an,"(",Jn,",",tr.join(","),");")}else wn&&(qn=Zt.def(),Zt("if(!",Rt.batchId,"||",qn,"!==",mn,"){",qn,"=",mn,";")),Zt(sn,".uniform",an,"(",Jn,",",mn,");");wn&&Zt("}")}}}function Nn(Rt,Zt,tn,En){function Mn(cr){var br=qn[cr];return br?br.append(Rt,br.contextDep&&En.contextDynamic||br.propDep?tn:Zt):Zt.def(Pn,".",cr)}function wn(){function cr(){tn(sn,".drawElementsInstancedANGLE(",[Jn,tr,sr,rr+"<<(("+sr+"-5121)>>1)",vn],");")}function br(){tn(sn,".drawArraysInstancedANGLE(",[Jn,rr,tr,vn],");")}Zn&&"null"!==Zn?ar?cr():(tn("if(",Zn,"){"),cr(),tn("}else{"),br(),tn("}")):br()}function an(){function cr(){tn(mn+".drawElements("+[Jn,tr,sr,rr+"<<(("+sr+"-5121)>>1)"]+");")}function br(){tn(mn+".drawArrays("+[Jn,rr,tr]+");")}Zn&&"null"!==Zn?ar?cr():(tn("if(",Zn,"){"),cr(),tn("}else{"),br(),tn("}")):br()}var vn,sn,cr,br,fn=Rt.shared,mn=fn.gl,Pn=fn.draw,qn=En.draw,Zn=(br=Zt,(cr=qn.elements)?((cr.contextDep&&En.contextDynamic||cr.propDep)&&(br=tn),cr=cr.append(Rt,br),qn.elementsActive&&br("if("+cr+")"+mn+".bindBuffer(34963,"+cr+".buffer.buffer);")):(cr=br.def(),br(cr,"=",Pn,".","elements",";","if(",cr,"){",mn,".bindBuffer(",34963,",",cr,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",cr,"=",Rt.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",Sn?"":"if("+cr+")"+mn+".bindBuffer(34963,"+cr+".buffer.buffer);","}")),cr),Jn=Mn("primitive"),rr=Mn("offset"),tr=function(){var cr=qn.count,br=Zt;return cr?((cr.contextDep&&En.contextDynamic||cr.propDep)&&(br=tn),cr=cr.append(Rt,br)):cr=br.def(Pn,".","count"),cr}();if("number"==typeof tr){if(0===tr)return}else tn("if(",tr,"){"),tn.exit("}");Jt&&(vn=Mn("instances"),sn=Rt.instancing);var sr=Zn+".type",ar=qn.elements&&J(qn.elements)&&!qn.vaoActive;Jt&&("number"!=typeof vn||0<=vn)?"string"==typeof vn?(tn("if(",vn,">0){"),wn(),tn("}else if(",vn,"<0){"),an(),tn("}")):wn():an()}function jn(Rt,Zt,tn,En,Mn){return Mn=(Zt=Gt()).proc("body",Mn),Jt&&(Zt.instancing=Mn.def(Zt.shared.extensions,".angle_instanced_arrays")),Rt(Zt,Mn,tn,En),Zt.compile().body}function er(Rt,Zt,tn,En){dn(Rt,Zt),tn.useVAO?tn.drawVAO?Zt(Rt.shared.vao,".setVAO(",tn.drawVAO.append(Rt,Zt),");"):Zt(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(Zt(Rt.shared.vao,".setVAO(null);"),kn(Rt,Zt,tn,En.attributes,function(){return!0})),Rn(Rt,Zt,tn,En.uniforms,function(){return!0},!1),Nn(Rt,Zt,Zt,tn)}function Kn(Rt,Zt,tn,En){function Mn(){return!0}Rt.batchId="a1",dn(Rt,Zt),kn(Rt,Zt,tn,En.attributes,Mn),Rn(Rt,Zt,tn,En.uniforms,Mn,!1),Nn(Rt,Zt,Zt,tn)}function yr(Rt,Zt,tn,En){function Mn(Pn){return Pn.contextDep&&an||Pn.propDep}function wn(Pn){return!Mn(Pn)}dn(Rt,Zt);var an=tn.contextDep,vn=Zt.def(),sn=Zt.def();Rt.shared.props=sn,Rt.batchId=vn;var fn=Rt.scope(),mn=Rt.scope();Zt(fn.entry,"for(",vn,"=0;",vn,"<","a1",";++",vn,"){",sn,"=","a0","[",vn,"];",mn,"}",fn.exit),tn.needsContext&&yn(Rt,mn,tn.context),tn.needsFramebuffer&&on(Rt,mn,tn.framebuffer),ln(Rt,mn,tn.state,Mn),tn.profile&&Mn(tn.profile)&&Cn(Rt,mn,tn,!1,!0),En?(tn.useVAO?tn.drawVAO?Mn(tn.drawVAO)?mn(Rt.shared.vao,".setVAO(",tn.drawVAO.append(Rt,mn),");"):fn(Rt.shared.vao,".setVAO(",tn.drawVAO.append(Rt,fn),");"):fn(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(fn(Rt.shared.vao,".setVAO(null);"),kn(Rt,fn,tn,En.attributes,wn),kn(Rt,mn,tn,En.attributes,Mn)),Rn(Rt,fn,tn,En.uniforms,wn,!1),Rn(Rt,mn,tn,En.uniforms,Mn,!0),Nn(Rt,fn,mn,tn)):(Zt=Rt.global.def("{}"),En=tn.shader.progVar.append(Rt,mn),sn=mn.def(En,".id"),fn=mn.def(Zt,"[",sn,"]"),mn(Rt.shared.gl,".useProgram(",En,".program);","if(!",fn,"){",fn,"=",Zt,"[",sn,"]=",Rt.link(function(Pn){return jn(Kn,Rt,tn,Pn,2)}),"(",En,");}",fn,".call(this,a0[",vn,"],",vn,");"))}function $n(Rt,Zt,tn){var En=Zt.static[tn];if(En&&function(mn){if("object"==typeof mn&&!x(mn)){for(var Pn=Object.keys(mn),qn=0;qn<Pn.length;++qn)if(re.isDynamic(mn[Pn[qn]]))return!0;return!1}}(En)){var Mn=Rt.global,wn=Object.keys(En),an=!1,vn=!1,sn=!1,fn=Rt.global.def("{}");wn.forEach(function(mn){var Pn=En[mn];if(re.isDynamic(Pn))"function"==typeof Pn&&(Pn=En[mn]=re.unbox(Pn)),mn=V(Pn,null),an=an||mn.thisDep,sn=sn||mn.propDep,vn=vn||mn.contextDep;else{switch(Mn(fn,".",mn,"="),typeof Pn){case"number":Mn(Pn);break;case"string":Mn('"',Pn,'"');break;case"object":Array.isArray(Pn)&&Mn("[",Pn.join(),"]");break;default:Mn(Rt.link(Pn))}Mn(";")}}),Zt.dynamic[tn]=new re.DynamicVariable(4,{thisDep:an,contextDep:vn,propDep:sn,ref:fn,append:function(mn,Pn){wn.forEach(function(qn){var Zn=En[qn];re.isDynamic(Zn)&&(Zn=mn.invoke(Pn,Zn),Pn(fn,".",qn,"=",Zn,";"))})}}),delete Zt.static[tn]}}var Gn=Et.Record,ir={add:32774,subtract:32778,"reverse subtract":32779};rt.ext_blend_minmax&&(ir.min=32775,ir.max=32776);var Jt=rt.angle_instanced_arrays,rn=rt.webgl_draw_buffers,Sn=rt.oes_vertex_array_object,Tn={dirty:!0,profile:zt.profile},Ln={},Bn=[],Hn={},or={};Nt("dither",3024),Nt("blend.enable",3042),jt("blend.color","blendColor",[0,0,0,0]),jt("blend.equation","blendEquationSeparate",[32774,32774]),jt("blend.func","blendFuncSeparate",[1,0,1,0]),Nt("depth.enable",2929,!0),jt("depth.func","depthFunc",513),jt("depth.range","depthRange",[0,1]),jt("depth.mask","depthMask",!0),jt("colorMask","colorMask",[!0,!0,!0,!0]),Nt("cull.enable",2884),jt("cull.face","cullFace",1029),jt("frontFace","frontFace",2305),jt("lineWidth","lineWidth",1),Nt("polygonOffset.enable",32823),jt("polygonOffset.offset","polygonOffset",[0,0]),Nt("sample.alpha",32926),Nt("sample.enable",32928),jt("sample.coverage","sampleCoverage",[1,!1]),Nt("stencil.enable",2960),jt("stencil.mask","stencilMask",-1),jt("stencil.func","stencilFunc",[519,0,-1]),jt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),jt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Nt("scissor.enable",3089),jt("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),jt("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var mr={gl:Be,context:pt,strings:Ye,next:Ln,current:Tn,draw:ht,elements:Ke,buffer:Re,shader:At,attributes:Et.state,vao:Et,uniforms:Tt,framebuffer:ct,extensions:rt,timer:gt,isBufferArgs:U},Kt={primTypes:oe,compareFuncs:Ht,blendFuncs:Ot,blendEquations:ir,stencilOps:It,glTypes:de,orientationType:Ge};rn&&(Kt.backBuffer=[1029],Kt.drawBuffer=b(Se.maxDrawbuffers,function(Rt){return 0===Rt?[0]:b(Rt,function(Zt){return 36064+Zt})}));var An=0;return{next:Ln,current:Tn,procs:function(){var Rt=Gt(),Zt=Rt.proc("poll"),tn=Rt.proc("refresh"),En=Rt.block();Zt(En),tn(En);var Mn,wn=(sn=Rt.shared).gl,an=sn.next,vn=sn.current;En(vn,".dirty=false;"),on(Rt,Zt),on(Rt,tn,null,!0),Jt&&(Mn=Rt.link(Jt)),rt.oes_vertex_array_object&&tn(Rt.link(rt.oes_vertex_array_object),".bindVertexArrayOES(null);");var sn=tn.def(sn.attributes),fn=tn.def(0),mn=Rt.cond(fn,".buffer");mn.then(wn,".enableVertexAttribArray(i);",wn,".bindBuffer(",34962,",",fn,".buffer.buffer);",wn,".vertexAttribPointer(i,",fn,".size,",fn,".type,",fn,".normalized,",fn,".stride,",fn,".offset);").else(wn,".disableVertexAttribArray(i);",wn,".vertexAttrib4f(i,",fn,".x,",fn,".y,",fn,".z,",fn,".w);",fn,".buffer=null;");var Pn=Rt.link(Se.maxAttributes,{stable:!0});return tn("for(var i=0;i<",Pn,";++i){",fn,"=",sn,"[i];",mn,"}"),Jt&&tn("for(var i=0;i<",Pn,";++i){",Mn,".vertexAttribDivisorANGLE(i,",sn,"[i].divisor);","}"),tn(Rt.shared.vao,".currentVAO=null;",Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"),Object.keys(Hn).forEach(function(qn){var Zn=Hn[qn],Jn=En.def(an,".",qn),rr=Rt.block();rr("if(",Jn,"){",wn,".enable(",Zn,")}else{",wn,".disable(",Zn,")}",vn,".",qn,"=",Jn,";"),tn(rr),Zt("if(",Jn,"!==",vn,".",qn,"){",rr,"}")}),Object.keys(or).forEach(function(qn){var Zn,Jn,rr=or[qn],tr=Tn[qn],sr=Rt.block();sr(wn,".",rr,"("),x(tr)?(rr=tr.length,Zn=Rt.global.def(an,".",qn),Jn=Rt.global.def(vn,".",qn),sr(b(rr,function(ar){return Zn+"["+ar+"]"}),");",b(rr,function(ar){return Jn+"["+ar+"]="+Zn+"["+ar+"];"}).join("")),Zt("if(",b(rr,function(ar){return Zn+"["+ar+"]!=="+Jn+"["+ar+"]"}).join("||"),"){",sr,"}")):(Zn=En.def(an,".",qn),Jn=En.def(vn,".",qn),sr(Zn,");",vn,".",qn,"=",Zn,";"),Zt("if(",Zn,"!==",Jn,"){",sr,"}")),tn(sr)}),Rt.compile()}(),compile:function(Rt,Zt,tn,En,Mn){var wn=Gt();wn.stats=wn.link(Mn),Object.keys(Zt.static).forEach(function(vn){$n(wn,Zt,vn)}),Ct.forEach(function(vn){$n(wn,Rt,vn)});var an=function Fn(Rt,Zt,tn,En,Mn){function wn(rr){var tr=vn[rr];tr&&(fn[rr]=tr)}var rr,sr,ar,cr,an=function(rr,tr){if("string"==typeof(sr=rr.static).frag&&"string"==typeof sr.vert){if(0<Object.keys(tr.dynamic).length)return null;var sr=tr.static,ar=Object.keys(sr);if(0<ar.length&&"number"==typeof sr[ar[0]]){for(var cr=[],br=0;br<ar.length;++br)cr.push([0|sr[ar[br]],ar[br]]);return cr}}return null}(Rt,Zt),vn=function(rr,tr,sr){function ar(Sr){if(Sr in cr){var fr=cr[Sr];Sr=!0;var Lr,zr,li=0|fr.x,Mi=0|fr.y;return"width"in fr?Lr=0|fr.width:Sr=!1,"height"in fr?zr=0|fr.height:Sr=!1,new N(!Sr&&tr&&tr.thisDep,!Sr&&tr&&tr.contextDep,!Sr&&tr&&tr.propDep,function(Ea,Ui){var vi=Ea.shared.context,La=Lr;"width"in fr||(La=Ui.def(vi,".","framebufferWidth","-",li));var to=zr;return"height"in fr||(to=Ui.def(vi,".","framebufferHeight","-",Mi)),[li,Mi,La,to]})}if(Sr in br){var Pi=br[Sr];return Sr=V(Pi,function(Ea,Ui){var vi=Ea.invoke(Ui,Pi),La=Ea.shared.context,to=Ui.def(vi,".x|0"),qo=Ui.def(vi,".y|0");return[to,qo,Ui.def('"width" in ',vi,"?",vi,".width|0:","(",La,".","framebufferWidth","-",to,")"),vi=Ui.def('"height" in ',vi,"?",vi,".height|0:","(",La,".","framebufferHeight","-",qo,")")]}),tr&&(Sr.thisDep=Sr.thisDep||tr.thisDep,Sr.contextDep=Sr.contextDep||tr.contextDep,Sr.propDep=Sr.propDep||tr.propDep),Sr}return tr?new N(tr.thisDep,tr.contextDep,tr.propDep,function(Ea,Ui){var vi=Ea.shared.context;return[0,0,Ui.def(vi,".","framebufferWidth"),Ui.def(vi,".","framebufferHeight")]}):null}var cr=rr.static,br=rr.dynamic;if(rr=ar("viewport")){var Ur=rr;rr=new N(rr.thisDep,rr.contextDep,rr.propDep,function(Sr,fr){var Lr=Ur.append(Sr,fr),zr=Sr.shared.context;return fr.set(zr,".viewportWidth",Lr[2]),fr.set(zr,".viewportHeight",Lr[3]),Lr})}return{viewport:rr,scissor_box:ar("scissor.box")}}(Rt,Pn=function un(Rt,Zt){var tn=Rt.static,En=Rt.dynamic;if("framebuffer"in tn){var Mn=tn.framebuffer;return Mn?(Mn=ct.getFramebuffer(Mn),Z(function(an,vn){var sn=an.link(Mn),fn=an.shared;return vn.set(fn.framebuffer,".next",sn),vn.set(fn=fn.context,".framebufferWidth",sn+".width"),vn.set(fn,".framebufferHeight",sn+".height"),sn})):Z(function(an,vn){var sn=an.shared;return vn.set(sn.framebuffer,".next","null"),vn.set(sn=sn.context,".framebufferWidth",sn+".drawingBufferWidth"),vn.set(sn,".framebufferHeight",sn+".drawingBufferHeight"),"null"})}if("framebuffer"in En){var wn=En.framebuffer;return V(wn,function(an,vn){var sn=an.invoke(vn,wn),fn=an.shared,mn=fn.framebuffer;return sn=vn.def(mn,".getFramebuffer(",sn,")"),vn.set(mn,".next",sn),vn.set(fn=fn.context,".framebufferWidth",sn+"?"+sn+".width:"+fn+".drawingBufferWidth"),vn.set(fn,".framebufferHeight",sn+"?"+sn+".height:"+fn+".drawingBufferHeight"),sn})}return null}(Rt)),sn=function Qt(Rt,Zt){function tn(Jn,rr){if(Jn in En){var tr=0|En[Jn];return rr?wn.offset=tr:wn.instances=tr,Z(function(ar,cr){return rr&&(ar.OFFSET=tr),tr})}if(Jn in Mn){var sr=Mn[Jn];return V(sr,function(ar,cr){var br=ar.invoke(cr,sr);return rr&&(ar.OFFSET=br),br})}if(rr){if(sn)return Z(function(ar,cr){return ar.OFFSET=0});if(an)return new N(vn.thisDep,vn.contextDep,vn.propDep,function(ar,cr){return cr.def(ar.shared.vao+".currentVAO?"+ar.shared.vao+".currentVAO.offset:0")})}else if(an)return new N(vn.thisDep,vn.contextDep,vn.propDep,function(ar,cr){return cr.def(ar.shared.vao+".currentVAO?"+ar.shared.vao+".currentVAO.instances:-1")});return null}var En=Rt.static,Mn=Rt.dynamic,wn={},an=!1,vn=function(){if("vao"in En){var Jn=En.vao;return null!==Jn&&null===Et.getVAO(Jn)&&(Jn=Et.createVAO(Jn)),an=!0,wn.vao=Jn,Z(function(tr){var sr=Et.getVAO(Jn);return sr?tr.link(sr):"null"})}if("vao"in Mn){an=!0;var rr=Mn.vao;return V(rr,function(tr,sr){var ar=tr.invoke(sr,rr);return sr.def(tr.shared.vao+".getVAO("+ar+")")})}return null}(),sn=!1,fn=function(){if("elements"in En){var Jn=En.elements;if(wn.elements=Jn,U(Jn)){var rr=wn.elements=Ke.create(Jn,!0);Jn=Ke.getElements(rr),sn=!0}else Jn&&(Jn=Ke.getElements(Jn),sn=!0);return(rr=Z(function(sr,ar){if(Jn){var cr=sr.link(Jn);return sr.ELEMENTS=cr}return sr.ELEMENTS=null})).value=Jn,rr}if("elements"in Mn){sn=!0;var tr=Mn.elements;return V(tr,function(sr,ar){var cr=(br=sr.shared).isBufferArgs,br=br.elements,Ur=sr.invoke(ar,tr),Sr=ar.def("null");return cr=ar.def(cr,"(",Ur,")"),Ur=sr.cond(cr).then(Sr,"=",br,".createStream(",Ur,");").else(Sr,"=",br,".getElements(",Ur,");"),ar.entry(Ur),ar.exit(sr.cond(cr).then(br,".destroyStream(",Sr,");")),sr.ELEMENTS=Sr})}return an?new N(vn.thisDep,vn.contextDep,vn.propDep,function(sr,ar){return ar.def(sr.shared.vao+".currentVAO?"+sr.shared.elements+".getElements("+sr.shared.vao+".currentVAO.elements):null")}):null}(),mn=tn("offset",!0),Pn=function(){if("primitive"in En){var Jn=En.primitive;return wn.primitive=Jn,Z(function(tr,sr){return oe[Jn]})}if("primitive"in Mn){var rr=Mn.primitive;return V(rr,function(tr,sr){var ar=tr.constants.primTypes,cr=tr.invoke(sr,rr);return sr.def(ar,"[",cr,"]")})}return sn?J(fn)?Z(fn.value?function(tr,sr){return sr.def(tr.ELEMENTS,".primType")}:function(){return 4}):new N(fn.thisDep,fn.contextDep,fn.propDep,function(tr,sr){var ar=tr.ELEMENTS;return sr.def(ar,"?",ar,".primType:",4)}):an?new N(vn.thisDep,vn.contextDep,vn.propDep,function(tr,sr){return sr.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.primitive:4")}):null}(),qn=function(){if("count"in En){var Jn=0|En.count;return wn.count=Jn,Z(function(){return Jn})}if("count"in Mn){var rr=Mn.count;return V(rr,function(tr,sr){return tr.invoke(sr,rr)})}return sn?J(fn)?fn?mn?new N(mn.thisDep,mn.contextDep,mn.propDep,function(tr,sr){return sr.def(tr.ELEMENTS,".vertCount-",tr.OFFSET)}):Z(function(tr,sr){return sr.def(tr.ELEMENTS,".vertCount")}):Z(function(){return-1}):new N(fn.thisDep||mn.thisDep,fn.contextDep||mn.contextDep,fn.propDep||mn.propDep,function(tr,sr){var ar=tr.ELEMENTS;return tr.OFFSET?sr.def(ar,"?",ar,".vertCount-",tr.OFFSET,":-1"):sr.def(ar,"?",ar,".vertCount:-1")}):an?new N(vn.thisDep,vn.contextDep,vn.propDep,function(tr,sr){return sr.def(tr.shared.vao,".currentVAO?",tr.shared.vao,".currentVAO.count:-1")}):null}(),Zn=tn("instances",!1);return{elements:fn,primitive:Pn,count:qn,instances:Zn,offset:mn,vao:vn,vaoActive:an,elementsActive:sn,static:wn}}(Rt),fn=(sr=(rr=Rt).static,ar=rr.dynamic,cr={},Bn.forEach(function(br){function Ur(fr,Lr){if(br in sr){var zr=fr(sr[br]);cr[Sr]=Z(function(){return zr})}else if(br in ar){var li=ar[br];cr[Sr]=V(li,function(Mi,Pi){return Lr(Mi,Pi,Mi.invoke(Pi,li))})}}var Sr=Ut(br);switch(br){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ur(function(fr){return fr},function(fr,Lr,zr){return zr});case"depth.func":return Ur(function(fr){return Ht[fr]},function(fr,Lr,zr){return Lr.def(fr.constants.compareFuncs,"[",zr,"]")});case"depth.range":return Ur(function(fr){return fr},function(fr,Lr,zr){return[Lr.def("+",zr,"[0]"),Lr=Lr.def("+",zr,"[1]")]});case"blend.func":return Ur(function(fr){return[Ot["srcRGB"in fr?fr.srcRGB:fr.src],Ot["dstRGB"in fr?fr.dstRGB:fr.dst],Ot["srcAlpha"in fr?fr.srcAlpha:fr.src],Ot["dstAlpha"in fr?fr.dstAlpha:fr.dst]]},function(fr,Lr,zr){function li(Ui,vi){return Lr.def('"',Ui,vi,'" in ',zr,"?",zr,".",Ui,vi,":",zr,".",Ui)}fr=fr.constants.blendFuncs;var Mi=li("src","RGB"),Pi=li("dst","RGB"),Ea=(Mi=Lr.def(fr,"[",Mi,"]"),Lr.def(fr,"[",li("src","Alpha"),"]"));return[Mi,Pi=Lr.def(fr,"[",Pi,"]"),Ea,fr=Lr.def(fr,"[",li("dst","Alpha"),"]")]});case"blend.equation":return Ur(function(fr){return"string"==typeof fr?[ir[fr],ir[fr]]:"object"==typeof fr?[ir[fr.rgb],ir[fr.alpha]]:void 0},function(fr,Lr,zr){var li=fr.constants.blendEquations,Mi=Lr.def(),Pi=Lr.def();return(fr=fr.cond("typeof ",zr,'==="string"')).then(Mi,"=",Pi,"=",li,"[",zr,"];"),fr.else(Mi,"=",li,"[",zr,".rgb];",Pi,"=",li,"[",zr,".alpha];"),Lr(fr),[Mi,Pi]});case"blend.color":return Ur(function(fr){return b(4,function(Lr){return+fr[Lr]})},function(fr,Lr,zr){return b(4,function(li){return Lr.def("+",zr,"[",li,"]")})});case"stencil.mask":return Ur(function(fr){return 0|fr},function(fr,Lr,zr){return Lr.def(zr,"|0")});case"stencil.func":return Ur(function(fr){return[Ht[fr.cmp||"keep"],fr.ref||0,"mask"in fr?fr.mask:-1]},function(fr,Lr,zr){return[fr=Lr.def('"cmp" in ',zr,"?",fr.constants.compareFuncs,"[",zr,".cmp]",":",7680),Lr.def(zr,".ref|0"),Lr=Lr.def('"mask" in ',zr,"?",zr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ur(function(fr){return["stencil.opBack"===br?1029:1028,It[fr.fail||"keep"],It[fr.zfail||"keep"],It[fr.zpass||"keep"]]},function(fr,Lr,zr){function li(Pi){return Lr.def('"',Pi,'" in ',zr,"?",Mi,"[",zr,".",Pi,"]:",7680)}var Mi=fr.constants.stencilOps;return["stencil.opBack"===br?1029:1028,li("fail"),li("zfail"),li("zpass")]});case"polygonOffset.offset":return Ur(function(fr){return[0|fr.factor,0|fr.units]},function(fr,Lr,zr){return[Lr.def(zr,".factor|0"),Lr=Lr.def(zr,".units|0")]});case"cull.face":return Ur(function(fr){var Lr=0;return"front"===fr?Lr=1028:"back"===fr&&(Lr=1029),Lr},function(fr,Lr,zr){return Lr.def(zr,'==="front"?',1028,":",1029)});case"frontFace":return Ur(function(fr){return Ge[fr]},function(fr,Lr,zr){return Lr.def(zr+'==="cw"?2304:2305')});case"colorMask":return Ur(function(fr){return fr.map(function(Lr){return!!Lr})},function(fr,Lr,zr){return b(4,function(li){return"!!"+zr+"["+li+"]"})});case"sample.coverage":return Ur(function(fr){return["value"in fr?fr.value:1,!!fr.invert]},function(fr,Lr,zr){return[Lr.def('"value" in ',zr,"?+",zr,".value:1"),Lr=Lr.def("!!",zr,".invert")]})}}),cr),mn=function hn(Rt,Zt,tn){function En(fn){if(fn in Mn){var mn=Ye.id(Mn[fn]);return(fn=Z(function(){return mn})).id=mn,fn}if(fn in wn){var Pn=wn[fn];return V(Pn,function(qn,Zn){var Jn=qn.invoke(Zn,Pn);return Zn.def(qn.shared.strings,".id(",Jn,")")})}return null}var Mn=Rt.static,wn=Rt.dynamic,an=En("frag"),vn=En("vert"),sn=null;return J(an)&&J(vn)?(sn=At.program(vn.id,an.id,null,tn),Rt=Z(function(fn,mn){return fn.link(sn)})):Rt=new N(an&&an.thisDep||vn&&vn.thisDep,an&&an.contextDep||vn&&vn.contextDep,an&&an.propDep||vn&&vn.propDep,function(fn,mn){var Pn,qn,Zn=fn.shared.shader;return Pn=an?an.append(fn,mn):mn.def(Zn,".","frag"),qn=vn?vn.append(fn,mn):mn.def(Zn,".","vert"),mn.def(Zn+".program("+qn+","+Pn+")")}),{frag:an,vert:vn,progVar:Rt,program:sn}}(Rt,0,an);wn("viewport"),wn(Ut("scissor.box"));var Pn,qn=0<Object.keys(fn).length;if((Pn={framebuffer:Pn,draw:sn,shader:mn,state:fn,dirty:qn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(rr){var tr,sr=rr.static;if(rr=rr.dynamic,"profile"in sr){var ar=!!sr.profile;(tr=Z(function(br,Ur){return ar})).enable=ar}else if("profile"in rr){var cr=rr.profile;tr=V(cr,function(br,Ur){return br.invoke(Ur,cr)})}return tr}(Rt),Pn.uniforms=function(rr,tr){var sr=rr.static,ar=rr.dynamic,cr={};return Object.keys(sr).forEach(function(br){var Ur,Sr=sr[br];if("number"==typeof Sr||"boolean"==typeof Sr)Ur=Z(function(){return Sr});else if("function"==typeof Sr){var fr=Sr._reglType;"texture2d"===fr||"textureCube"===fr?Ur=Z(function(Lr){return Lr.link(Sr)}):"framebuffer"!==fr&&"framebufferCube"!==fr||(Ur=Z(function(Lr){return Lr.link(Sr.color[0])}))}else x(Sr)&&(Ur=Z(function(Lr){return Lr.global.def("[",b(Sr.length,function(zr){return Sr[zr]}),"]")}));Ur.value=Sr,cr[br]=Ur}),Object.keys(ar).forEach(function(br){var Ur=ar[br];cr[br]=V(Ur,function(Sr,fr){return Sr.invoke(fr,Ur)})}),cr}(tn),Pn.drawVAO=Pn.scopeVAO=sn.vao,!Pn.drawVAO&&mn.program&&!an&&rt.angle_instanced_arrays&&sn.static.elements){var Zn=!0;if(Rt=mn.program.attributes.map(function(rr){return rr=Zt.static[rr],Zn=Zn&&!!rr,rr}),Zn&&0<Rt.length){var Jn=Et.getVAO(Et.createVAO({attributes:Rt,elements:sn.static.elements}));Pn.drawVAO=new N(null,null,null,function(rr,tr){return rr.link(Jn)}),Pn.useVAO=!0}}return an?Pn.useVAO=!0:Pn.attributes=function _n(Rt,Zt){var tn=Rt.static,En=Rt.dynamic,Mn={};return Object.keys(tn).forEach(function(wn){var an=tn[wn],vn=Ye.id(wn),sn=new Gn;if(U(an))sn.state=1,sn.buffer=Re.getBuffer(Re.create(an,34962,!1,!0)),sn.type=0;else if(mn=Re.getBuffer(an))sn.state=1,sn.buffer=mn,sn.type=0;else if("constant"in an){var fn=an.constant;sn.buffer="null",sn.state=2,"number"==typeof fn?sn.x=fn:Lt.forEach(function(tr,sr){sr<fn.length&&(sn[tr]=fn[sr])})}else{var mn=U(an.buffer)?Re.getBuffer(Re.create(an.buffer,34962,!1,!0)):Re.getBuffer(an.buffer),Pn=0|an.offset,qn=0|an.stride,Zn=0|an.size,Jn=!!an.normalized,rr=0;"type"in an&&(rr=de[an.type]),an=0|an.divisor,sn.buffer=mn,sn.state=1,sn.size=Zn,sn.normalized=Jn,sn.type=rr||mn.dtype,sn.offset=Pn,sn.stride=qn,sn.divisor=an}Mn[wn]=Z(function(tr,sr){var ar=tr.attribCache;if(vn in ar)return ar[vn];var cr={isStream:!1};return Object.keys(sn).forEach(function(br){cr[br]=sn[br]}),sn.buffer&&(cr.buffer=tr.link(sn.buffer),cr.type=cr.type||cr.buffer+".dtype"),ar[vn]=cr})}),Object.keys(En).forEach(function(wn){var an=En[wn];Mn[wn]=V(an,function(vn,sn){function fn(ar){sn(Jn[ar],"=",mn,".",ar,"|0;")}var mn=vn.invoke(sn,an),Pn=vn.shared,qn=vn.constants,Zn=Pn.isBufferArgs,Jn=(Pn=Pn.buffer,{isStream:sn.def(!1)}),rr=new Gn;rr.state=1,Object.keys(rr).forEach(function(ar){Jn[ar]=sn.def(""+rr[ar])});var tr=Jn.buffer,sr=Jn.type;return sn("if(",Zn,"(",mn,")){",Jn.isStream,"=true;",tr,"=",Pn,".createStream(",34962,",",mn,");",sr,"=",tr,".dtype;","}else{",tr,"=",Pn,".getBuffer(",mn,");","if(",tr,"){",sr,"=",tr,".dtype;",'}else if("constant" in ',mn,"){",Jn.state,"=",2,";","if(typeof "+mn+'.constant === "number"){',Jn[Lt[0]],"=",mn,".constant;",Lt.slice(1).map(function(ar){return Jn[ar]}).join("="),"=0;","}else{",Lt.map(function(ar,cr){return Jn[ar]+"="+mn+".constant.length>"+cr+"?"+mn+".constant["+cr+"]:0;"}).join(""),"}}else{","if(",Zn,"(",mn,".buffer)){",tr,"=",Pn,".createStream(",34962,",",mn,".buffer);","}else{",tr,"=",Pn,".getBuffer(",mn,".buffer);","}",sr,'="type" in ',mn,"?",qn.glTypes,"[",mn,".type]:",tr,".dtype;",Jn.normalized,"=!!",mn,".normalized;"),fn("size"),fn("offset"),fn("stride"),fn("divisor"),sn("}}"),sn.exit("if(",Jn.isStream,"){",Pn,".destroyStream(",tr,");","}"),Jn})}),Mn}(Zt),Pn.context=function(rr){var tr=rr.static,sr=rr.dynamic,ar={};return Object.keys(tr).forEach(function(cr){var br=tr[cr];ar[cr]=Z(function(Ur,Sr){return"number"==typeof br||"boolean"==typeof br?""+br:Ur.link(br)})}),Object.keys(sr).forEach(function(cr){var br=sr[cr];ar[cr]=V(br,function(Ur,Sr){return Ur.invoke(Sr,br)})}),ar}(En),Pn}(Rt,Zt,tn,En);return an.shader.program&&(an.shader.program.attributes.sort(function(vn,sn){return vn.name<sn.name?-1:1}),an.shader.program.uniforms.sort(function(vn,sn){return vn.name<sn.name?-1:1})),function(vn,sn){var fn=vn.proc("draw",1);dn(vn,fn),yn(vn,fn,sn.context),on(vn,fn,sn.framebuffer),pn(vn,fn,sn),ln(vn,fn,sn.state),Cn(vn,fn,sn,!1,!0);var mn=sn.shader.progVar.append(vn,fn);if(fn(vn.shared.gl,".useProgram(",mn,".program);"),sn.shader.program)er(vn,fn,sn,sn.shader.program);else{fn(vn.shared.vao,".setVAO(null);");var Pn=vn.global.def("{}"),qn=fn.def(mn,".id"),Zn=fn.def(Pn,"[",qn,"]");fn(vn.cond(Zn).then(Zn,".call(this,a0);").else(Zn,"=",Pn,"[",qn,"]=",vn.link(function(Jn){return jn(er,vn,sn,Jn,1)}),"(",mn,");",Zn,".call(this,a0);"))}0<Object.keys(sn.state).length&&fn(vn.shared.current,".dirty=true;"),vn.shared.vao&&fn(vn.shared.vao,".setVAO(null);")}(wn,an),function lr(Rt,Zt){function tn(vn){var sn=Zt.shader[vn];sn&&(sn=sn.append(Rt,En),isNaN(sn)?En.set(Mn.shader,"."+vn,sn):En.set(Mn.shader,"."+vn,Rt.link(sn,{stable:!0})))}var En=Rt.proc("scope",3);Rt.batchId="a2";var Mn=Rt.shared,wn=Mn.current;if(yn(Rt,En,Zt.context),Zt.framebuffer&&Zt.framebuffer.append(Rt,En),B(Object.keys(Zt.state)).forEach(function(vn){var sn=Zt.state[vn],fn=sn.append(Rt,En);x(fn)?fn.forEach(function(mn,Pn){isNaN(mn)?En.set(Rt.next[vn],"["+Pn+"]",mn):En.set(Rt.next[vn],"["+Pn+"]",Rt.link(mn,{stable:!0}))}):J(sn)?En.set(Mn.next,"."+vn,Rt.link(fn,{stable:!0})):En.set(Mn.next,"."+vn,fn)}),Cn(Rt,En,Zt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(vn){var sn=Zt.draw[vn];sn&&(sn=sn.append(Rt,En),isNaN(sn)?En.set(Mn.draw,"."+vn,sn):En.set(Mn.draw,"."+vn,Rt.link(sn),{stable:!0}))}),Object.keys(Zt.uniforms).forEach(function(vn){var sn=Zt.uniforms[vn].append(Rt,En);Array.isArray(sn)&&(sn="["+sn.map(function(fn){return isNaN(fn)?fn:Rt.link(fn,{stable:!0})})+"]"),En.set(Mn.uniforms,"["+Rt.link(Ye.id(vn),{stable:!0})+"]",sn)}),Object.keys(Zt.attributes).forEach(function(vn){var sn=Zt.attributes[vn].append(Rt,En),fn=Rt.scopeAttrib(vn);Object.keys(new Gn).forEach(function(mn){En.set(fn,"."+mn,sn[mn])})}),Zt.scopeVAO){var an=Zt.scopeVAO.append(Rt,En);isNaN(an)?En.set(Mn.vao,".targetVAO",an):En.set(Mn.vao,".targetVAO",Rt.link(an,{stable:!0}))}tn("vert"),tn("frag"),0<Object.keys(Zt.state).length&&(En(wn,".dirty=true;"),En.exit(wn,".dirty=true;")),En("a1(",Rt.shared.context,",a0,",Rt.batchId,");")}(wn,an),function(vn,sn){function fn(tr){return tr.contextDep&&Pn||tr.propDep}var mn=vn.proc("batch",2);vn.batchId="0",dn(vn,mn);var Pn=!1,qn=!0;Object.keys(sn.context).forEach(function(tr){Pn=Pn||sn.context[tr].propDep}),Pn||(yn(vn,mn,sn.context),qn=!1);var Zn=!1;if((Jn=sn.framebuffer)?(Jn.propDep?Pn=Zn=!0:Jn.contextDep&&Pn&&(Zn=!0),Zn||on(vn,mn,Jn)):on(vn,mn,null),sn.state.viewport&&sn.state.viewport.propDep&&(Pn=!0),pn(vn,mn,sn),ln(vn,mn,sn.state,function(tr){return!fn(tr)}),sn.profile&&fn(sn.profile)||Cn(vn,mn,sn,!1,"a1"),sn.contextDep=Pn,sn.needsContext=qn,sn.needsFramebuffer=Zn,(qn=sn.shader.progVar).contextDep&&Pn||qn.propDep)yr(vn,mn,sn,null);else if(qn=qn.append(vn,mn),mn(vn.shared.gl,".useProgram(",qn,".program);"),sn.shader.program)yr(vn,mn,sn,sn.shader.program);else{mn(vn.shared.vao,".setVAO(null);");var Jn=vn.global.def("{}"),rr=(Zn=mn.def(qn,".id"),mn.def(Jn,"[",Zn,"]"));mn(vn.cond(rr).then(rr,".call(this,a0,a1);").else(rr,"=",Jn,"[",Zn,"]=",vn.link(function(tr){return jn(yr,vn,sn,tr,2)}),"(",qn,");",rr,".call(this,a0,a1);"))}0<Object.keys(sn.state).length&&mn(vn.shared.current,".dirty=true;"),vn.shared.vao&&mn(vn.shared.vao,".setVAO(null);")}(wn,an),K(wn.compile(),{destroy:function(){an.shader.program.destroy()}})}}}function X(Be,Ye){for(var rt=0;rt<Be.length;++rt)if(Be[rt]===Ye)return rt;return-1}var K=function(Be,Ye){for(var rt=Object.keys(Ye),Se=0;Se<rt.length;++Se)Be[rt[Se]]=Ye[rt[Se]];return Be},ne=0,re={DynamicVariable:z,define:function(Be,Ye){return new z(Be,k(Ye+""))},isDynamic:function(Be){return"function"==typeof Be&&!Be._reglType||Be instanceof z},unbox:function Be(Ye,rt){return"function"==typeof Ye?new z(0,Ye):"number"==typeof Ye||"boolean"==typeof Ye?new z(5,Ye):Array.isArray(Ye)?new z(6,Ye.map(function(Se,Re){return Be(Se,rt+"["+Re+"]")})):Ye instanceof z?Ye:void 0},accessor:k},ae={next:"function"==typeof requestAnimationFrame?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:"function"==typeof cancelAnimationFrame?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},le=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},pe=s();pe.zero=s();var ye=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},se=function(Be){return Object.keys(Be).map(function(Ye){return Be[Ye]})},fe={shape:function(Be){for(var Ye=[];Be.length;Be=Be[0])Ye.push(Be.length);return Ye},flatten:function(Be,Ye,rt,Se){var Re=1;if(Ye.length)for(var Ke=0;Ke<Ye.length;++Ke)Re*=Ye[Ke];else Re=0;switch(rt=Se||pe.allocType(rt,Re),Ye.length){case 0:break;case 1:for(Se=Ye[0],Ye=0;Ye<Se;++Ye)rt[Ye]=Be[Ye];break;case 2:for(Se=Ye[0],Ye=Ye[1],Ke=Re=0;Ke<Se;++Ke)for(var st=Be[Ke],ct=0;ct<Ye;++ct)rt[Re++]=st[ct];break;case 3:o(Be,Ye[0],Ye[1],Ye[2],rt,0);break;default:r(Be,Ye,0,rt,0)}return rt}},Ee={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},de={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},we={dynamic:35048,stream:35040,static:35044},ke=fe.flatten,Te=fe.shape,$=[];$[5120]=1,$[5122]=2,$[5124]=4,$[5121]=1,$[5123]=2,$[5125]=4,$[5126]=4;var oe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},he=new Float32Array(1),me=new Uint32Array(he.buffer),Me=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Pe={};Pe[6409]=Pe[6406]=Pe[6402]=1,Pe[34041]=Pe[6410]=2,Pe[6407]=Pe[35904]=3,Pe[6408]=Pe[35906]=4;var ze=v("HTMLCanvasElement"),ce=v("OffscreenCanvas"),ge=v("CanvasRenderingContext2D"),_e=v("ImageBitmap"),De=v("HTMLImageElement"),He=v("HTMLVideoElement"),Ve=Object.keys(Ee).concat([ze,ce,ge,_e,De,He]),nt=[];nt[5121]=1,nt[5126]=4,nt[36193]=2,nt[5123]=2,nt[5125]=4;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var at=[];at[32854]=2,at[32855]=2,at[36194]=2,at[33189]=2,at[36168]=1,at[34041]=4,at[35907]=4,at[34836]=16,at[34842]=8,at[34843]=6;var wt=[];wt[6408]=4,wt[6407]=3;var bt=[];bt[5121]=1,bt[5126]=4,bt[36193]=2;var _t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Lt=["x","y","z","w"],Ct="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ht={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},It={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ge={cw:2304,ccw:2305},Ze=new N(!1,!1,!1,function(){});return function(Be){function Ye(){if(0===Kn.length)un&&un.update(),Gn=null;else{Gn=ae.next(Ye),At();for(var Jt=Kn.length-1;0<=Jt;--Jt){var rn=Kn[Jt];rn&&rn(Fn,null,0)}gt.flush(),un&&un.update()}}function rt(){!Gn&&0<Kn.length&&(Gn=ae.next(Ye))}function Se(){Gn&&(ae.cancel(Ye),Gn=null)}function Re(Jt){Jt.preventDefault(),Se(),yr.forEach(function(rn){rn()})}function Ke(Jt){gt.getError(),zt.restore(),dn.restore(),on.restore(),Cn.restore(),kn.restore(),Rn.restore(),ln.restore(),un&&un.restore(),Nn.procs.refresh(),rt(),lr.forEach(function(rn){rn()})}function st(Jt){function rn(Rt,Zt){var tn={},En={};return Object.keys(Rt).forEach(function(Mn){var wn=Rt[Mn];if(re.isDynamic(wn))En[Mn]=re.unbox(wn,Mn);else{if(Zt&&Array.isArray(wn))for(var an=0;an<wn.length;++an)if(re.isDynamic(wn[an]))return void(En[Mn]=re.unbox(wn,Mn));tn[Mn]=wn}}),{dynamic:En,static:tn}}var Sn=rn(Jt.context||{},!0),Tn=rn(Jt.uniforms||{},!0),Ln=rn(Jt.attributes||{},!1);Jt=rn(function(Rt){function Zt(En){if(En in tn){var Mn=tn[En];delete tn[En],Object.keys(Mn).forEach(function(wn){tn[En+"."+wn]=Mn[wn]})}}var tn=K({},Rt);return delete tn.uniforms,delete tn.attributes,delete tn.context,delete tn.vao,"stencil"in tn&&tn.stencil.op&&(tn.stencil.opBack=tn.stencil.opFront=tn.stencil.op,delete tn.stencil.op),Zt("blend"),Zt("depth"),Zt("cull"),Zt("stencil"),Zt("polygonOffset"),Zt("scissor"),Zt("sample"),"vao"in Rt&&(tn.vao=Rt.vao),tn}(Jt),!1);var Bn={gpuTime:0,cpuTime:0,count:0},Hn=Nn.compile(Jt,Ln,Tn,Sn,Bn),or=Hn.draw,mr=Hn.batch,Kt=Hn.scope,An=[];return K(function(Rt,Zt){var tn;if("function"==typeof Rt)return Kt.call(this,null,Rt,0);if("function"==typeof Zt)if("number"==typeof Rt)for(tn=0;tn<Rt;++tn)Kt.call(this,null,Zt,tn);else{if(!Array.isArray(Rt))return Kt.call(this,Rt,Zt,0);for(tn=0;tn<Rt.length;++tn)Kt.call(this,Rt[tn],Zt,tn)}else if("number"==typeof Rt){if(0<Rt)return mr.call(this,function(En){for(;An.length<En;)An.push(null);return An}(0|Rt),0|Rt)}else{if(!Array.isArray(Rt))return or.call(this,Rt);if(Rt.length)return mr.call(this,Rt,Rt.length)}},{stats:Bn,destroy:function(){Hn.destroy()}})}function ct(Jt,rn){var Sn=0;Nn.procs.poll();var Tn=rn.color;Tn&&(gt.clearColor(+Tn[0]||0,+Tn[1]||0,+Tn[2]||0,+Tn[3]||0),Sn|=16384),"depth"in rn&&(gt.clearDepth(+rn.depth),Sn|=256),"stencil"in rn&&(gt.clearStencil(0|rn.stencil),Sn|=1024),gt.clear(Sn)}function Tt(Jt){return Kn.push(Jt),rt(),{cancel:function(){var rn=X(Kn,Jt);Kn[rn]=function Sn(){var Tn=X(Kn,Sn);Kn[Tn]=Kn[Kn.length-1],--Kn.length,0>=Kn.length&&Se()}}}}function Et(){var Jt=jn.viewport,rn=jn.scissor_box;Jt[0]=Jt[1]=rn[0]=rn[1]=0,Fn.viewportWidth=Fn.framebufferWidth=Fn.drawingBufferWidth=Jt[2]=rn[2]=gt.drawingBufferWidth,Fn.viewportHeight=Fn.framebufferHeight=Fn.drawingBufferHeight=Jt[3]=rn[3]=gt.drawingBufferHeight}function At(){Fn.tick+=1,Fn.time=pt(),Et(),Nn.procs.poll()}function ht(){Cn.refresh(),Et(),Nn.procs.refresh(),un&&un.update()}function pt(){return(le()-hn)/1e3}if(!(Be=function T(Be){var Ye,rt,Se,Re,Ke=Be||{};Be={};var st=[],ct=[],Tt=typeof window>"u"?1:window.devicePixelRatio,Et=!1,At={},ht=function(gt){},pt=function(){};if("string"==typeof Ke?Ye=document.querySelector(Ke):"object"==typeof Ke&&("string"==typeof Ke.nodeName&&"function"==typeof Ke.appendChild&&"function"==typeof Ke.getBoundingClientRect?Ye=Ke:"function"==typeof Ke.drawArrays||"function"==typeof Ke.drawElements?Se=(Re=Ke).canvas:("gl"in Ke?Re=Ke.gl:"canvas"in Ke?Se=l(Ke.canvas):"container"in Ke&&(rt=l(Ke.container)),"attributes"in Ke&&(Be=Ke.attributes),"extensions"in Ke&&(st=A(Ke.extensions)),"optionalExtensions"in Ke&&(ct=A(Ke.optionalExtensions)),"onDone"in Ke&&(ht=Ke.onDone),"profile"in Ke&&(Et=!!Ke.profile),"pixelRatio"in Ke&&(Tt=+Ke.pixelRatio),"cachedCode"in Ke&&(At=Ke.cachedCode))),Ye&&("canvas"===Ye.nodeName.toLowerCase()?Se=Ye:rt=Ye),!Re){if(!Se){if(!(Ye=function(gt,Pt,zt){function Ut(){var Gt=window.innerWidth,un=window.innerHeight;gt!==document.body&&(Gt=(un=jt.getBoundingClientRect()).right-un.left,un=un.bottom-un.top),jt.width=zt*Gt,jt.height=zt*un}var Nt,jt=document.createElement("canvas");return K(jt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),gt.appendChild(jt),gt===document.body&&(jt.style.position="absolute",K(gt.style,{margin:0,padding:0})),gt!==document.body&&"function"==typeof ResizeObserver?(Nt=new ResizeObserver(function(){setTimeout(Ut)})).observe(gt):window.addEventListener("resize",Ut,!1),Ut(),{canvas:jt,onDestroy:function(){Nt?Nt.disconnect():window.removeEventListener("resize",Ut),gt.removeChild(jt)}}}(rt||document.body,0,Tt)))return null;Se=Ye.canvas,pt=Ye.onDestroy}void 0===Be.premultipliedAlpha&&(Be.premultipliedAlpha=!0),Re=function(gt,Pt){function zt(Ut){try{return gt.getContext(Ut,Pt)}catch{return null}}return zt("webgl")||zt("experimental-webgl")||zt("webgl-experimental")}(Se,Be)}return Re?{gl:Re,canvas:Se,container:rt,extensions:st,optionalExtensions:ct,pixelRatio:Tt,profile:Et,cachedCode:At,onDone:ht,onDestroy:pt}:(pt(),ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Be)))return null;var gt=Be.gl,Pt=gt.getContextAttributes();gt.isContextLost();var zt=function(Jt,rn){function Sn(Hn){var or;Hn=Hn.toLowerCase();try{or=Tn[Hn]=Jt.getExtension(Hn)}catch{}return!!or}for(var Tn={},Ln=0;Ln<rn.extensions.length;++Ln){var Bn=rn.extensions[Ln];if(!Sn(Bn))return rn.onDestroy(),rn.onDone('"'+Bn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rn.optionalExtensions.forEach(Sn),{extensions:Tn,restore:function(){Object.keys(Tn).forEach(function(Hn){if(Tn[Hn]&&!Sn(Hn))throw Error("(regl): error restoring extension "+Hn)})}}}(gt,Be);if(!zt)return null;var Jt,rn,Ut=(Jt={"":0},rn=[""],{id:function(Sn){var Tn=Jt[Sn];return Tn||(Tn=Jt[Sn]=rn.length,rn.push(Sn),Tn)},str:function(Sn){return rn[Sn]}}),Nt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},jt=Be.cachedCode||{},Gt=zt.extensions,un=function(Jt,rn){function Sn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Tn(An,Rt,Zt){var tn=Hn.pop()||new Sn;tn.startQueryIndex=An,tn.endQueryIndex=Rt,tn.sum=0,tn.stats=Zt,or.push(tn)}if(!rn.ext_disjoint_timer_query)return null;var Ln=[],Bn=[],Hn=[],or=[],mr=[],Kt=[];return{beginQuery:function(An){var Rt=Ln.pop()||rn.ext_disjoint_timer_query.createQueryEXT();rn.ext_disjoint_timer_query.beginQueryEXT(35007,Rt),Bn.push(Rt),Tn(Bn.length-1,Bn.length,An)},endQuery:function(){rn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Tn,update:function(){var An,Rt;if(0!==(An=Bn.length)){Kt.length=Math.max(Kt.length,An+1),mr.length=Math.max(mr.length,An+1),mr[0]=0;var Zt=Kt[0]=0;for(Rt=An=0;Rt<Bn.length;++Rt){var tn=Bn[Rt];rn.ext_disjoint_timer_query.getQueryObjectEXT(tn,34919)?(Zt+=rn.ext_disjoint_timer_query.getQueryObjectEXT(tn,34918),Ln.push(tn)):Bn[An++]=tn,mr[Rt+1]=Zt,Kt[Rt+1]=An}for(Bn.length=An,Rt=An=0;Rt<or.length;++Rt){var En=(Zt=or[Rt]).startQueryIndex;Zt.sum+=mr[tn=Zt.endQueryIndex]-mr[En],(tn=Kt[tn])===(En=Kt[En])?(Zt.stats.gpuTime+=Zt.sum/1e6,Hn.push(Zt)):(Zt.startQueryIndex=En,Zt.endQueryIndex=tn,or[An++]=Zt)}or.length=An}},getNumPendingQueries:function(){return Bn.length},clear:function(){Ln.push.apply(Ln,Bn);for(var An=0;An<Ln.length;An++)rn.ext_disjoint_timer_query.deleteQueryEXT(Ln[An]);Bn.length=0,Ln.length=0},restore:function(){Bn.length=0,Ln.length=0}}}(0,Gt),hn=le(),Qt=gt.drawingBufferWidth,_n=gt.drawingBufferHeight,Fn={tick:0,time:0,viewportWidth:Qt,viewportHeight:_n,framebufferWidth:Qt,framebufferHeight:_n,drawingBufferWidth:Qt,drawingBufferHeight:_n,pixelRatio:Be.pixelRatio},yn=(Qt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Be,Ye){var rt=1;Ye.ext_texture_filter_anisotropic&&(rt=Be.getParameter(34047));var Se=1,Re=1;Ye.webgl_draw_buffers&&(Se=Be.getParameter(34852),Re=Be.getParameter(36063));var Ke=!!Ye.oes_texture_float;if(Ke){Ke=Be.createTexture(),Be.bindTexture(3553,Ke),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var st=Be.createFramebuffer();if(Be.bindFramebuffer(36160,st),Be.framebufferTexture2D(36160,36064,3553,Ke,0),Be.bindTexture(3553,null),36053!==Be.checkFramebufferStatus(36160))Ke=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var ct=pe.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,ct),Be.getError()?Ke=!1:(Be.deleteFramebuffer(st),Be.deleteTexture(Ke),Ke=1===ct[0]),pe.freeType(ct)}}return ct=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=Be.createTexture(),st=pe.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,ct),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,st),pe.freeType(st),Be.bindTexture(34067,null),Be.deleteTexture(ct),ct=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Ye).filter(function(Tt){return!!Ye[Tt]}),maxAnisotropic:rt,maxDrawbuffers:Se,maxColorAttachments:Re,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:Ke,npotTextureCube:ct}}(gt,Gt)),on=function c(Be,Ye,rt,Se){function Re(ht){this.id=Tt++,this.buffer=Be.createBuffer(),this.type=ht,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,rt.profile&&(this.stats={size:0})}function Ke(ht,pt,gt){ht.byteLength=pt.byteLength,Be.bufferData(ht.type,pt,gt)}function st(ht,pt,gt,Pt,zt,Ut){if(ht.usage=gt,Array.isArray(pt)){if(ht.dtype=Pt||5126,0<pt.length)if(Array.isArray(pt[0])){zt=Te(pt);for(var Nt=Pt=1;Nt<zt.length;++Nt)Pt*=zt[Nt];ht.dimension=Pt,Ke(ht,pt=ke(pt,zt,ht.dtype),gt),Ut?ht.persistentData=pt:pe.freeType(pt)}else"number"==typeof pt[0]?(ht.dimension=zt,a(zt=pe.allocType(ht.dtype,pt.length),pt),Ke(ht,zt,gt),Ut?ht.persistentData=zt:pe.freeType(zt)):ye(pt[0])&&(ht.dimension=pt[0].length,ht.dtype=Pt||n(pt[0])||5126,Ke(ht,pt=ke(pt,[pt.length,pt[0].length],ht.dtype),gt),Ut?ht.persistentData=pt:pe.freeType(pt))}else if(ye(pt))ht.dtype=Pt||n(pt),ht.dimension=zt,Ke(ht,pt,gt),Ut&&(ht.persistentData=new Uint8Array(new Uint8Array(pt.buffer)));else if(t(pt)){var jt=pt.stride,Gt=(Nt=pt.offset,0),un=0,hn=0,Qt=0;1===(zt=pt.shape).length?(Gt=zt[0],un=1,hn=jt[0],Qt=0):2===zt.length&&(Gt=zt[0],un=zt[1],hn=jt[0],Qt=jt[1]),ht.dtype=Pt||n(pt.data)||5126,ht.dimension=un,i(zt=pe.allocType(ht.dtype,Gt*un),pt.data,Gt,un,hn,Qt,Nt),Ke(ht,zt,gt),Ut?ht.persistentData=zt:pe.freeType(zt)}else pt instanceof ArrayBuffer&&(ht.dtype=5121,ht.dimension=zt,Ke(ht,pt,gt),Ut&&(ht.persistentData=new Uint8Array(new Uint8Array(pt))))}function ct(ht){Ye.bufferCount--,Se(ht),Be.deleteBuffer(ht.buffer),ht.buffer=null,delete Et[ht.id]}var Tt=0,Et={};Re.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},Re.prototype.destroy=function(){ct(this)};var At=[];return rt.profile&&(Ye.getTotalBufferSize=function(){var ht=0;return Object.keys(Et).forEach(function(pt){ht+=Et[pt].stats.size}),ht}),{create:function(ht,pt,gt,Pt){function zt(Nt){var jt=35044,Gt=null,un=0,hn=0,Qt=1;return Array.isArray(Nt)||ye(Nt)||t(Nt)||Nt instanceof ArrayBuffer?Gt=Nt:"number"==typeof Nt?un=0|Nt:Nt&&("data"in Nt&&(Gt=Nt.data),"usage"in Nt&&(jt=we[Nt.usage]),"type"in Nt&&(hn=de[Nt.type]),"dimension"in Nt&&(Qt=0|Nt.dimension),"length"in Nt&&(un=0|Nt.length)),Ut.bind(),Gt?st(Ut,Gt,jt,hn,Qt,Pt):(un&&Be.bufferData(Ut.type,un,jt),Ut.dtype=hn||5121,Ut.usage=jt,Ut.dimension=Qt,Ut.byteLength=un),rt.profile&&(Ut.stats.size=Ut.byteLength*$[Ut.dtype]),zt}Ye.bufferCount++;var Ut=new Re(pt);return Et[Ut.id]=Ut,gt||zt(ht),zt._reglType="buffer",zt._buffer=Ut,zt.subdata=function(Nt,jt){var Gt,un=0|(jt||0);if(Ut.bind(),ye(Nt)||Nt instanceof ArrayBuffer)Be.bufferSubData(Ut.type,un,Nt);else if(Array.isArray(Nt)){if(0<Nt.length)if("number"==typeof Nt[0]){var hn=pe.allocType(Ut.dtype,Nt.length);a(hn,Nt),Be.bufferSubData(Ut.type,un,hn),pe.freeType(hn)}else(Array.isArray(Nt[0])||ye(Nt[0]))&&(Gt=Te(Nt),hn=ke(Nt,Gt,Ut.dtype),Be.bufferSubData(Ut.type,un,hn),pe.freeType(hn))}else if(t(Nt)){var Qt=Nt.stride,_n=hn=0,Fn=0,yn=0;1===(Gt=Nt.shape).length?(hn=Gt[0],_n=1,Fn=Qt[0],yn=0):2===Gt.length&&(hn=Gt[0],_n=Gt[1],Fn=Qt[0],yn=Qt[1]),Gt=Array.isArray(Nt.data)?Ut.dtype:n(Nt.data),i(Gt=pe.allocType(Gt,hn*_n),Nt.data,hn,_n,Fn,yn,Nt.offset),Be.bufferSubData(Ut.type,un,Gt),pe.freeType(Gt)}return zt},rt.profile&&(zt.stats=Ut.stats),zt.destroy=function(){ct(Ut)},zt},createStream:function(ht,pt){var gt=At.pop();return gt||(gt=new Re(ht)),gt.bind(),st(gt,pt,35040,0,1,!1),gt},destroyStream:function(ht){At.push(ht)},clear:function(){se(Et).forEach(ct),At.forEach(ct)},getBuffer:function(ht){return ht&&ht._buffer instanceof Re?ht._buffer:null},restore:function(){se(Et).forEach(function(ht){ht.buffer=Be.createBuffer(),Be.bindBuffer(ht.type,ht.buffer),Be.bufferData(ht.type,ht.persistentData||ht.byteLength,ht.usage)})},_initBuffer:st}}(gt,Nt,Be,function(Jt){return ln.destroyBuffer(Jt)}),pn=function h(Be,Ye,rt,Se){function Re(ht){this.id=Tt++,ct[this.id]=this,this.buffer=ht,this.primType=4,this.type=this.vertCount=0}function Ke(ht,pt,gt,Pt,zt,Ut,Nt){var jt;if(ht.buffer.bind(),pt?((jt=Nt)||ye(pt)&&(!t(pt)||ye(pt.data))||(jt=Ye.oes_element_index_uint?5125:5123),rt._initBuffer(ht.buffer,pt,gt,jt,3)):(Be.bufferData(34963,Ut,gt),ht.buffer.dtype=jt||5121,ht.buffer.usage=gt,ht.buffer.dimension=3,ht.buffer.byteLength=Ut),jt=Nt,!Nt){switch(ht.buffer.dtype){case 5121:case 5120:jt=5121;break;case 5123:case 5122:jt=5123;break;case 5125:case 5124:jt=5125}ht.buffer.dtype=jt}ht.type=jt,0>(pt=zt)&&(pt=ht.buffer.byteLength,5123===jt?pt>>=1:5125===jt&&(pt>>=2)),ht.vertCount=pt,pt=Pt,0>Pt&&(pt=4,1===(Pt=ht.buffer.dimension)&&(pt=0),2===Pt&&(pt=1),3===Pt&&(pt=4)),ht.primType=pt}function st(ht){Se.elementsCount--,delete ct[ht.id],ht.buffer.destroy(),ht.buffer=null}var ct={},Tt=0,Et={uint8:5121,uint16:5123};Ye.oes_element_index_uint&&(Et.uint32=5125),Re.prototype.bind=function(){this.buffer.bind()};var At=[];return{create:function(ht,pt){function gt(Ut){if(Ut)if("number"==typeof Ut)Pt(Ut),zt.primType=4,zt.vertCount=0|Ut,zt.type=5121;else{var Nt=null,jt=35044,Gt=-1,un=-1,hn=0,Qt=0;Array.isArray(Ut)||ye(Ut)||t(Ut)?Nt=Ut:("data"in Ut&&(Nt=Ut.data),"usage"in Ut&&(jt=we[Ut.usage]),"primitive"in Ut&&(Gt=oe[Ut.primitive]),"count"in Ut&&(un=0|Ut.count),"type"in Ut&&(Qt=Et[Ut.type]),"length"in Ut?hn=0|Ut.length:(hn=un,5123===Qt||5122===Qt?hn*=2:5125!==Qt&&5124!==Qt||(hn*=4))),Ke(zt,Nt,jt,Gt,un,hn,Qt)}else Pt(),zt.primType=4,zt.vertCount=0,zt.type=5121;return gt}var Pt=rt.create(null,34963,!0),zt=new Re(Pt._buffer);return Se.elementsCount++,gt(ht),gt._reglType="elements",gt._elements=zt,gt.subdata=function(Ut,Nt){return Pt.subdata(Ut,Nt),gt},gt.destroy=function(){st(zt)},gt},createStream:function(ht){var pt=At.pop();return pt||(pt=new Re(rt.create(null,34963,!0,!1)._buffer)),Ke(pt,ht,35040,-1,-1,0,0),pt},destroyStream:function(ht){At.push(ht)},getElements:function(ht){return"function"==typeof ht&&ht._elements instanceof Re?ht._elements:null},clear:function(){se(ct).forEach(st)}}}(gt,Gt,on,Nt),ln=function L(Be,Ye,rt,Se,Re,Ke,st){function ct(){this.id=++At,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var gt=Ye.oes_vertex_array_object;this.vao=gt?gt.createVertexArrayOES():null,ht[this.id]=this,this.buffers=[]}var Tt=rt.maxAttributes,Et=Array(Tt);for(rt=0;rt<Tt;++rt)Et[rt]=new E;var At=0,ht={},pt={Record:E,scope:{},state:Et,currentVAO:null,targetVAO:null,restore:Ye.oes_vertex_array_object?function(){Ye.oes_vertex_array_object&&se(ht).forEach(function(gt){gt.refresh()})}:function(){},createVAO:function(gt){function Pt(Ut){var Nt;Array.isArray(Ut)?(Nt=Ut,zt.elements&&zt.ownsElements&&zt.elements.destroy(),zt.elements=null,zt.ownsElements=!1,zt.offset=0,zt.count=0,zt.instances=-1,zt.primitive=4):(Ut.elements?(Nt=Ut.elements,zt.ownsElements?("function"==typeof Nt&&"elements"===Nt._reglType?zt.elements.destroy():zt.elements(Nt),zt.ownsElements=!1):Ke.getElements(Ut.elements)?(zt.elements=Ut.elements,zt.ownsElements=!1):(zt.elements=Ke.create(Ut.elements),zt.ownsElements=!0)):(zt.elements=null,zt.ownsElements=!1),Nt=Ut.attributes,zt.offset=0,zt.count=-1,zt.instances=-1,zt.primitive=4,zt.elements&&(zt.count=zt.elements._elements.vertCount,zt.primitive=zt.elements._elements.primType),"offset"in Ut&&(zt.offset=0|Ut.offset),"count"in Ut&&(zt.count=0|Ut.count),"instances"in Ut&&(zt.instances=0|Ut.instances),"primitive"in Ut&&(zt.primitive=oe[Ut.primitive])),Ut={};var jt=zt.attributes;jt.length=Nt.length;for(var Gt=0;Gt<Nt.length;++Gt){var un,hn=Nt[Gt],Qt=jt[Gt]=new E,_n=hn.data||hn;Array.isArray(_n)||ye(_n)||t(_n)?(zt.buffers[Gt]&&(un=zt.buffers[Gt],ye(_n)&&un._buffer.byteLength>=_n.byteLength?un.subdata(_n):(un.destroy(),zt.buffers[Gt]=null)),zt.buffers[Gt]||(un=zt.buffers[Gt]=Re.create(hn,34962,!1,!0)),Qt.buffer=Re.getBuffer(un),Qt.size=0|Qt.buffer.dimension,Qt.normalized=!1,Qt.type=Qt.buffer.dtype,Qt.offset=0,Qt.stride=0,Qt.divisor=0,Qt.state=1,Ut[Gt]=1):Re.getBuffer(hn)?(Qt.buffer=Re.getBuffer(hn),Qt.size=0|Qt.buffer.dimension,Qt.normalized=!1,Qt.type=Qt.buffer.dtype,Qt.offset=0,Qt.stride=0,Qt.divisor=0,Qt.state=1):Re.getBuffer(hn.buffer)?(Qt.buffer=Re.getBuffer(hn.buffer),Qt.size=0|(+hn.size||Qt.buffer.dimension),Qt.normalized=!!hn.normalized||!1,Qt.type="type"in hn?de[hn.type]:Qt.buffer.dtype,Qt.offset=0|(hn.offset||0),Qt.stride=0|(hn.stride||0),Qt.divisor=0|(hn.divisor||0),Qt.state=1):"x"in hn&&(Qt.x=+hn.x||0,Qt.y=+hn.y||0,Qt.z=+hn.z||0,Qt.w=+hn.w||0,Qt.state=2)}for(un=0;un<zt.buffers.length;++un)!Ut[un]&&zt.buffers[un]&&(zt.buffers[un].destroy(),zt.buffers[un]=null);return zt.refresh(),Pt}var zt=new ct;return Se.vaoCount+=1,Pt.destroy=function(){for(var Ut=0;Ut<zt.buffers.length;++Ut)zt.buffers[Ut]&&zt.buffers[Ut].destroy();zt.buffers.length=0,zt.ownsElements&&(zt.elements.destroy(),zt.elements=null,zt.ownsElements=!1),zt.destroy()},Pt._vao=zt,Pt._reglType="vao",Pt(gt)},getVAO:function(gt){return"function"==typeof gt&&gt._vao?gt._vao:null},destroyBuffer:function(gt){for(var Pt=0;Pt<Et.length;++Pt){var zt=Et[Pt];zt.buffer===gt&&(Be.disableVertexAttribArray(Pt),zt.buffer=null)}},setVAO:Ye.oes_vertex_array_object?function(gt){gt!==pt.currentVAO&&(Ye.oes_vertex_array_object.bindVertexArrayOES(gt?gt.vao:null),pt.currentVAO=gt)}:function(gt){if(gt!==pt.currentVAO){if(gt)gt.bindAttrs();else{for(var Pt=Ye.angle_instanced_arrays,zt=0;zt<Et.length;++zt){var Ut=Et[zt];Ut.buffer?(Be.enableVertexAttribArray(zt),Ut.buffer.bind(),Be.vertexAttribPointer(zt,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offfset),Pt&&Ut.divisor&&Pt.vertexAttribDivisorANGLE(zt,Ut.divisor)):(Be.disableVertexAttribArray(zt),Be.vertexAttrib4f(zt,Ut.x,Ut.y,Ut.z,Ut.w))}Be.bindBuffer(34963,st.elements?st.elements.buffer.buffer:null)}pt.currentVAO=gt}},clear:Ye.oes_vertex_array_object?function(){se(ht).forEach(function(gt){gt.destroy()})}:function(){}};return ct.prototype.bindAttrs=function(){for(var gt=Ye.angle_instanced_arrays,Pt=this.attributes,zt=0;zt<Pt.length;++zt){var Ut=Pt[zt];Ut.buffer?(Be.enableVertexAttribArray(zt),Be.bindBuffer(34962,Ut.buffer.buffer),Be.vertexAttribPointer(zt,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offset),gt&&Ut.divisor&&gt.vertexAttribDivisorANGLE(zt,Ut.divisor)):(Be.disableVertexAttribArray(zt),Be.vertexAttrib4f(zt,Ut.x,Ut.y,Ut.z,Ut.w))}for(gt=Pt.length;gt<Tt;++gt)Be.disableVertexAttribArray(gt);(gt=Ke.getElements(this.elements))?Be.bindBuffer(34963,gt.buffer.buffer):Be.bindBuffer(34963,null)},ct.prototype.refresh=function(){var gt=Ye.oes_vertex_array_object;gt&&(gt.bindVertexArrayOES(this.vao),this.bindAttrs(),pt.currentVAO=null,gt.bindVertexArrayOES(null))},ct.prototype.destroy=function(){if(this.vao){var gt=Ye.oes_vertex_array_object;this===pt.currentVAO&&(pt.currentVAO=null,gt.bindVertexArrayOES(null)),gt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ht[this.id]&&(delete ht[this.id],--Se.vaoCount)},pt}(gt,Gt,yn,Nt,on,pn,Qt),dn=function C(Be,Ye,rt,Se){function Re(Pt,zt,Ut,Nt){this.name=Pt,this.id=zt,this.location=Ut,this.info=Nt}function Ke(Pt,zt){for(var Ut=0;Ut<Pt.length;++Ut)if(Pt[Ut].id===zt.id)return void(Pt[Ut].location=zt.location);Pt.push(zt)}function st(Pt,zt,Ut){if(!(jt=(Ut=35632===Pt?Et:At)[zt])){var Nt=Ye.str(zt),jt=Be.createShader(Pt);Be.shaderSource(jt,Nt),Be.compileShader(jt),Ut[zt]=jt}return jt}function ct(Pt,zt){this.id=gt++,this.fragId=Pt,this.vertId=zt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Se.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Tt(Pt,zt,Ut){var Nt;Nt=st(35632,Pt.fragId);var jt=st(35633,Pt.vertId);if(zt=Pt.program=Be.createProgram(),Be.attachShader(zt,Nt),Be.attachShader(zt,jt),Ut)for(Nt=0;Nt<Ut.length;++Nt)Be.bindAttribLocation(zt,(jt=Ut[Nt])[0],jt[1]);Be.linkProgram(zt),jt=Be.getProgramParameter(zt,35718),Se.profile&&(Pt.stats.uniformsCount=jt);var Gt=Pt.uniforms;for(Nt=0;Nt<jt;++Nt)if(Ut=Be.getActiveUniform(zt,Nt))if(1<Ut.size)for(var un=0;un<Ut.size;++un){var hn=Ut.name.replace("[0]","["+un+"]");Ke(Gt,new Re(hn,Ye.id(hn),Be.getUniformLocation(zt,hn),Ut))}else Ke(Gt,new Re(Ut.name,Ye.id(Ut.name),Be.getUniformLocation(zt,Ut.name),Ut));for(jt=Be.getProgramParameter(zt,35721),Se.profile&&(Pt.stats.attributesCount=jt),Pt=Pt.attributes,Nt=0;Nt<jt;++Nt)(Ut=Be.getActiveAttrib(zt,Nt))&&Ke(Pt,new Re(Ut.name,Ye.id(Ut.name),Be.getAttribLocation(zt,Ut.name),Ut))}var Et={},At={},ht={},pt=[],gt=0;return Se.profile&&(rt.getMaxUniformsCount=function(){var Pt=0;return pt.forEach(function(zt){zt.stats.uniformsCount>Pt&&(Pt=zt.stats.uniformsCount)}),Pt},rt.getMaxAttributesCount=function(){var Pt=0;return pt.forEach(function(zt){zt.stats.attributesCount>Pt&&(Pt=zt.stats.attributesCount)}),Pt}),{clear:function(){var Pt=Be.deleteShader.bind(Be);se(Et).forEach(Pt),Et={},se(At).forEach(Pt),At={},pt.forEach(function(zt){Be.deleteProgram(zt.program)}),pt.length=0,ht={},rt.shaderCount=0},program:function(Pt,zt,Ut,Nt){var jt=ht[zt];jt||(jt=ht[zt]={});var Gt=jt[Pt];if(Gt&&(Gt.refCount++,!Nt))return Gt;var un=new ct(zt,Pt);return rt.shaderCount++,Tt(un,Ut,Nt),Gt||(jt[Pt]=un),pt.push(un),K(un,{destroy:function(){if(un.refCount--,0>=un.refCount){Be.deleteProgram(un.program);var hn=pt.indexOf(un);pt.splice(hn,1),rt.shaderCount--}0>=jt[un.vertId].refCount&&(Be.deleteShader(At[un.vertId]),delete At[un.vertId],delete ht[un.fragId][un.vertId]),Object.keys(ht[un.fragId]).length||(Be.deleteShader(Et[un.fragId]),delete Et[un.fragId],delete ht[un.fragId])}})},restore:function(){Et={},At={};for(var Pt=0;Pt<pt.length;++Pt)Tt(pt[Pt],null,pt[Pt].attributes.map(function(zt){return[zt.location,zt.name]}))},shader:st,frag:-1,vert:-1}}(gt,Ut,Nt,Be),Cn=function S(Be,Ye,rt,Se,Re,Ke,st){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Tt(Kt,An){Kt.internalformat=An.internalformat,Kt.format=An.format,Kt.type=An.type,Kt.compressed=An.compressed,Kt.premultiplyAlpha=An.premultiplyAlpha,Kt.flipY=An.flipY,Kt.unpackAlignment=An.unpackAlignment,Kt.colorSpace=An.colorSpace,Kt.width=An.width,Kt.height=An.height,Kt.channels=An.channels}function Et(Kt,An){if("object"==typeof An&&An){"premultiplyAlpha"in An&&(Kt.premultiplyAlpha=An.premultiplyAlpha),"flipY"in An&&(Kt.flipY=An.flipY),"alignment"in An&&(Kt.unpackAlignment=An.alignment),"colorSpace"in An&&(Kt.colorSpace=Nn[An.colorSpace]),"type"in An&&(Kt.type=jn[An.type]);var Rt=Kt.width,Zt=Kt.height,tn=Kt.channels,En=!1;"shape"in An?(Rt=An.shape[0],Zt=An.shape[1],3===An.shape.length&&(tn=An.shape[2],En=!0)):("radius"in An&&(Rt=Zt=An.radius),"width"in An&&(Rt=An.width),"height"in An&&(Zt=An.height),"channels"in An&&(tn=An.channels,En=!0)),Kt.width=0|Rt,Kt.height=0|Zt,Kt.channels=0|tn,Rt=!1,"format"in An&&(Zt=Kt.internalformat=er[Rt=An.format],Kt.format=Sn[Zt],Rt in jn&&!("type"in An)&&(Kt.type=jn[Rt]),Rt in Kn&&(Kt.compressed=!0),Rt=!0),!En&&Rt?Kt.channels=Pe[Kt.format]:En&&!Rt&&Kt.channels!==Ie[Kt.format]&&(Kt.format=Kt.internalformat=Ie[Kt.channels])}}function At(Kt){Be.pixelStorei(37440,Kt.flipY),Be.pixelStorei(37441,Kt.premultiplyAlpha),Be.pixelStorei(37443,Kt.colorSpace),Be.pixelStorei(3317,Kt.unpackAlignment)}function ht(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function pt(Kt,An){var Rt=null;if(m(An)?Rt=An:An&&(Et(Kt,An),"x"in An&&(Kt.xOffset=0|An.x),"y"in An&&(Kt.yOffset=0|An.y),m(An.data)&&(Rt=An.data)),An.copy){var Zt=Re.viewportWidth,tn=Re.viewportHeight;Kt.width=Kt.width||Zt-Kt.xOffset,Kt.height=Kt.height||tn-Kt.yOffset,Kt.needsCopy=!0}else if(Rt){if(ye(Rt))Kt.channels=Kt.channels||4,Kt.data=Rt,"type"in An||5121!==Kt.type||(Kt.type=0|Ee[Object.prototype.toString.call(Rt)]);else if(g(Rt)){switch(Kt.channels=Kt.channels||4,tn=(Zt=Rt).length,Kt.type){case 5121:case 5123:case 5125:case 5126:(tn=pe.allocType(Kt.type,tn)).set(Zt),Kt.data=tn;break;case 36193:Kt.data=f(Zt)}Kt.alignment=1,Kt.needsFree=!0}else if(t(Rt)){Zt=Rt.data,Array.isArray(Zt)||5121!==Kt.type||(Kt.type=0|Ee[Object.prototype.toString.call(Zt)]);var En,Mn,wn,an,vn=Rt.stride;3===(tn=Rt.shape).length?(wn=tn[2],an=vn[2]):an=wn=1,En=tn[0],Mn=tn[1],tn=vn[0],vn=vn[1],Kt.alignment=1,Kt.width=En,Kt.height=Mn,Kt.channels=wn,Kt.format=Kt.internalformat=Ie[wn],Kt.needsFree=!0,En=an,Rt=Rt.offset;for(var sn=pe.allocType(36193===Kt.type?5126:Kt.type,(wn=Kt.width)*(an=Kt.height)*(Mn=Kt.channels)),fn=0,mn=0;mn<an;++mn)for(var Pn=0;Pn<wn;++Pn)for(var qn=0;qn<Mn;++qn)sn[fn++]=Zt[tn*Pn+vn*mn+En*qn+Rt];w(Kt,sn)}else if(p(Rt)===ze||p(Rt)===ce||p(Rt)===ge)Kt.element=p(Rt)===ze||p(Rt)===ce?Rt:Rt.canvas,Kt.width=Kt.element.width,Kt.height=Kt.element.height,Kt.channels=4;else if(p(Rt)===_e)Kt.element=Rt,Kt.width=Rt.width,Kt.height=Rt.height,Kt.channels=4;else if(p(Rt)===De)Kt.element=Rt,Kt.width=Rt.naturalWidth,Kt.height=Rt.naturalHeight,Kt.channels=4;else if(p(Rt)===He)Kt.element=Rt,Kt.width=Rt.videoWidth,Kt.height=Rt.videoHeight,Kt.channels=4;else if(y(Rt)){for(Zt=Kt.width||Rt[0].length,tn=Kt.height||Rt.length,vn=Kt.channels,vn=x(Rt[0][0])?vn||Rt[0][0].length:vn||1,En=fe.shape(Rt),wn=1,an=0;an<En.length;++an)wn*=En[an];wn=pe.allocType(36193===Kt.type?5126:Kt.type,wn),fe.flatten(Rt,En,"",wn),w(Kt,wn),Kt.alignment=1,Kt.width=Zt,Kt.height=tn,Kt.channels=vn,Kt.format=Kt.internalformat=Ie[vn],Kt.needsFree=!0}}else Kt.width=Kt.width||1,Kt.height=Kt.height||1,Kt.channels=Kt.channels||4}function gt(Kt,An,Rt,Zt,tn){var En=Kt.element,Mn=Kt.data,wn=Kt.internalformat,an=Kt.format,vn=Kt.type,sn=Kt.width,fn=Kt.height;At(Kt),En?Be.texSubImage2D(An,tn,Rt,Zt,an,vn,En):Kt.compressed?Be.compressedTexSubImage2D(An,tn,Rt,Zt,wn,sn,fn,Mn):Kt.needsCopy?(Se(),Be.copyTexSubImage2D(An,tn,Rt,Zt,Kt.xOffset,Kt.yOffset,sn,fn)):Be.texSubImage2D(An,tn,Rt,Zt,sn,fn,an,vn,Mn)}function Pt(){return Tn.pop()||new ht}function zt(Kt){Kt.needsFree&&pe.freeType(Kt.data),ht.call(Kt),Tn.push(Kt)}function Ut(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Nt(Kt,An,Rt){var Zt=Kt.images[0]=Pt();Kt.mipmask=1,Zt.width=Kt.width=An,Zt.height=Kt.height=Rt,Zt.channels=Kt.channels=4}function jt(Kt,An){var Rt=null;if(m(An))Tt(Rt=Kt.images[0]=Pt(),Kt),pt(Rt,An),Kt.mipmask=1;else if(Et(Kt,An),Array.isArray(An.mipmap))for(var Zt=An.mipmap,tn=0;tn<Zt.length;++tn)Tt(Rt=Kt.images[tn]=Pt(),Kt),Rt.width>>=tn,Rt.height>>=tn,pt(Rt,Zt[tn]),Kt.mipmask|=1<<tn;else Tt(Rt=Kt.images[0]=Pt(),Kt),pt(Rt,An),Kt.mipmask=1;Tt(Kt,Kt.images[0])}function Gt(Kt,An){for(var Rt=Kt.images,Zt=0;Zt<Rt.length&&Rt[Zt];++Zt){var tn=Rt[Zt],En=An,Mn=Zt,wn=tn.element,an=tn.data,vn=tn.internalformat,sn=tn.format,fn=tn.type,mn=tn.width,Pn=tn.height;At(tn),wn?Be.texImage2D(En,Mn,sn,sn,fn,wn):tn.compressed?Be.compressedTexImage2D(En,Mn,vn,mn,Pn,0,an):tn.needsCopy?(Se(),Be.copyTexImage2D(En,Mn,sn,tn.xOffset,tn.yOffset,mn,Pn,0)):Be.texImage2D(En,Mn,sn,mn,Pn,0,sn,fn,an||null)}}function un(){var Kt=Ln.pop()||new Ut;ct.call(Kt);for(var An=Kt.mipmask=0;16>An;++An)Kt.images[An]=null;return Kt}function hn(Kt){for(var An=Kt.images,Rt=0;Rt<An.length;++Rt)An[Rt]&&zt(An[Rt]),An[Rt]=null;Ln.push(Kt)}function Qt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function _n(Kt,An){"min"in An&&(Kt.minFilter=Rn[An.min],0<=Me.indexOf(Kt.minFilter)&&!("faces"in An)&&(Kt.genMipmaps=!0)),"mag"in An&&(Kt.magFilter=kn[An.mag]);var Rt=Kt.wrapS,Zt=Kt.wrapT;if("wrap"in An){var tn=An.wrap;"string"==typeof tn?Rt=Zt=Cn[tn]:Array.isArray(tn)&&(Rt=Cn[tn[0]],Zt=Cn[tn[1]])}else"wrapS"in An&&(Rt=Cn[An.wrapS]),"wrapT"in An&&(Zt=Cn[An.wrapT]);if(Kt.wrapS=Rt,Kt.wrapT=Zt,"anisotropic"in An&&(Kt.anisotropic=An.anisotropic),"mipmap"in An){switch(Rt=!1,typeof An.mipmap){case"string":Kt.mipmapHint=dn[An.mipmap],Rt=Kt.genMipmaps=!0;break;case"boolean":Rt=Kt.genMipmaps=An.mipmap;break;case"object":Kt.genMipmaps=!1,Rt=!0}!Rt||"min"in An||(Kt.minFilter=9984)}}function Fn(Kt,An){Be.texParameteri(An,10241,Kt.minFilter),Be.texParameteri(An,10240,Kt.magFilter),Be.texParameteri(An,10242,Kt.wrapS),Be.texParameteri(An,10243,Kt.wrapT),Ye.ext_texture_filter_anisotropic&&Be.texParameteri(An,34046,Kt.anisotropic),Kt.genMipmaps&&(Be.hint(33170,Kt.mipmapHint),Be.generateMipmap(An))}function yn(Kt){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=Bn++,this.refCount=1,this.target=Kt,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qt,st.profile&&(this.stats={size:0})}function on(Kt){Be.activeTexture(33984),Be.bindTexture(Kt.target,Kt.texture)}function pn(){var Kt=mr[0];Kt?Be.bindTexture(Kt.target,Kt.texture):Be.bindTexture(3553,null)}function ln(Kt){var An=Kt.texture,Rt=Kt.unit,Zt=Kt.target;0<=Rt&&(Be.activeTexture(33984+Rt),Be.bindTexture(Zt,null),mr[Rt]=null),Be.deleteTexture(An),Kt.texture=null,Kt.params=null,Kt.pixels=null,Kt.refCount=0,delete Hn[Kt.id],Ke.textureCount--}var dn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Cn={repeat:10497,clamp:33071,mirror:33648},kn={nearest:9728,linear:9729},Rn=K({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},kn),Nn={none:0,browser:37444},jn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},er={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Kn={};Ye.ext_srgb&&(er.srgb=35904,er.srgba=35906),Ye.oes_texture_float&&(jn.float32=jn.float=5126),Ye.oes_texture_half_float&&(jn.float16=jn["half float"]=36193),Ye.webgl_depth_texture&&(K(er,{depth:6402,"depth stencil":34041}),K(jn,{uint16:5123,uint32:5125,"depth stencil":34042})),Ye.webgl_compressed_texture_s3tc&&K(Kn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ye.webgl_compressed_texture_atc&&K(Kn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ye.webgl_compressed_texture_pvrtc&&K(Kn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ye.webgl_compressed_texture_etc1&&(Kn["rgb etc1"]=36196);var yr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(Kn).forEach(function(Kt){var An=Kn[Kt];0<=yr.indexOf(An)&&(er[Kt]=An)});var lr=Object.keys(er);rt.textureFormats=lr;var $n=[];Object.keys(er).forEach(function(Kt){$n[er[Kt]]=Kt});var Gn=[];Object.keys(jn).forEach(function(Kt){Gn[jn[Kt]]=Kt});var ir=[];Object.keys(kn).forEach(function(Kt){ir[kn[Kt]]=Kt});var Jt=[];Object.keys(Rn).forEach(function(Kt){Jt[Rn[Kt]]=Kt});var rn=[];Object.keys(Cn).forEach(function(Kt){rn[Cn[Kt]]=Kt});var Sn=lr.reduce(function(Kt,An){var Rt=er[An];return Kt[Rt]=6409===Rt||6406===Rt||6409===Rt||6410===Rt||6402===Rt||34041===Rt||Ye.ext_srgb&&(35904===Rt||35906===Rt)?Rt:32855===Rt||0<=An.indexOf("rgba")?6408:6407,Kt},{}),Tn=[],Ln=[],Bn=0,Hn={},or=rt.maxTextureUnits,mr=Array(or).map(function(){return null});return K(yn.prototype,{bind:function(){this.bindCount+=1;var Kt=this.unit;if(0>Kt){for(var An=0;An<or;++An){var Rt=mr[An];if(Rt){if(0<Rt.bindCount)continue;Rt.unit=-1}mr[An]=this,Kt=An;break}st.profile&&Ke.maxTextureUnits<Kt+1&&(Ke.maxTextureUnits=Kt+1),this.unit=Kt,Be.activeTexture(33984+Kt),Be.bindTexture(this.target,this.texture)}return Kt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ln(this)}}),st.profile&&(Ke.getTotalTextureSize=function(){var Kt=0;return Object.keys(Hn).forEach(function(An){Kt+=Hn[An].stats.size}),Kt}),{create2D:function(Kt,An){function Rt(tn,En){var Mn=Zt.texInfo;Qt.call(Mn);var wn=un();return"number"==typeof tn?Nt(wn,0|tn,"number"==typeof En?0|En:0|tn):tn?(_n(Mn,tn),jt(wn,tn)):Nt(wn,1,1),Mn.genMipmaps&&(wn.mipmask=(wn.width<<1)-1),Zt.mipmask=wn.mipmask,Tt(Zt,wn),Zt.internalformat=wn.internalformat,Rt.width=wn.width,Rt.height=wn.height,on(Zt),Gt(wn,3553),Fn(Mn,3553),pn(),hn(wn),st.profile&&(Zt.stats.size=u(Zt.internalformat,Zt.type,wn.width,wn.height,Mn.genMipmaps,!1)),Rt.format=$n[Zt.internalformat],Rt.type=Gn[Zt.type],Rt.mag=ir[Mn.magFilter],Rt.min=Jt[Mn.minFilter],Rt.wrapS=rn[Mn.wrapS],Rt.wrapT=rn[Mn.wrapT],Rt}var Zt=new yn(3553);return Hn[Zt.id]=Zt,Ke.textureCount++,Rt(Kt,An),Rt.subimage=function(tn,En,Mn,wn){En|=0,Mn|=0,wn|=0;var an=Pt();return Tt(an,Zt),an.width=0,an.height=0,pt(an,tn),an.width=an.width||(Zt.width>>wn)-En,an.height=an.height||(Zt.height>>wn)-Mn,on(Zt),gt(an,3553,En,Mn,wn),pn(),zt(an),Rt},Rt.resize=function(tn,En){var Mn=0|tn,wn=0|En||Mn;if(Mn===Zt.width&&wn===Zt.height)return Rt;Rt.width=Zt.width=Mn,Rt.height=Zt.height=wn,on(Zt);for(var an=0;Zt.mipmask>>an;++an){var vn=Mn>>an,sn=wn>>an;if(!vn||!sn)break;Be.texImage2D(3553,an,Zt.format,vn,sn,0,Zt.format,Zt.type,null)}return pn(),st.profile&&(Zt.stats.size=u(Zt.internalformat,Zt.type,Mn,wn,!1,!1)),Rt},Rt._reglType="texture2d",Rt._texture=Zt,st.profile&&(Rt.stats=Zt.stats),Rt.destroy=function(){Zt.decRef()},Rt},createCube:function(Kt,An,Rt,Zt,tn,En){function Mn(vn,sn,fn,mn,Pn,qn){var Zn,Jn=wn.texInfo;for(Qt.call(Jn),Zn=0;6>Zn;++Zn)an[Zn]=un();if("number"!=typeof vn&&vn){if("object"==typeof vn)if(sn)jt(an[0],vn),jt(an[1],sn),jt(an[2],fn),jt(an[3],mn),jt(an[4],Pn),jt(an[5],qn);else if(_n(Jn,vn),Et(wn,vn),"faces"in vn)for(vn=vn.faces,Zn=0;6>Zn;++Zn)Tt(an[Zn],wn),jt(an[Zn],vn[Zn]);else for(Zn=0;6>Zn;++Zn)jt(an[Zn],vn)}else for(vn=0|vn||1,Zn=0;6>Zn;++Zn)Nt(an[Zn],vn,vn);for(Tt(wn,an[0]),wn.mipmask=Jn.genMipmaps?(an[0].width<<1)-1:an[0].mipmask,wn.internalformat=an[0].internalformat,Mn.width=an[0].width,Mn.height=an[0].height,on(wn),Zn=0;6>Zn;++Zn)Gt(an[Zn],34069+Zn);for(Fn(Jn,34067),pn(),st.profile&&(wn.stats.size=u(wn.internalformat,wn.type,Mn.width,Mn.height,Jn.genMipmaps,!0)),Mn.format=$n[wn.internalformat],Mn.type=Gn[wn.type],Mn.mag=ir[Jn.magFilter],Mn.min=Jt[Jn.minFilter],Mn.wrapS=rn[Jn.wrapS],Mn.wrapT=rn[Jn.wrapT],Zn=0;6>Zn;++Zn)hn(an[Zn]);return Mn}var wn=new yn(34067);Hn[wn.id]=wn,Ke.cubeCount++;var an=Array(6);return Mn(Kt,An,Rt,Zt,tn,En),Mn.subimage=function(vn,sn,fn,mn,Pn){fn|=0,mn|=0,Pn|=0;var qn=Pt();return Tt(qn,wn),qn.width=0,qn.height=0,pt(qn,sn),qn.width=qn.width||(wn.width>>Pn)-fn,qn.height=qn.height||(wn.height>>Pn)-mn,on(wn),gt(qn,34069+vn,fn,mn,Pn),pn(),zt(qn),Mn},Mn.resize=function(vn){if((vn|=0)!==wn.width){Mn.width=wn.width=vn,Mn.height=wn.height=vn,on(wn);for(var sn=0;6>sn;++sn)for(var fn=0;wn.mipmask>>fn;++fn)Be.texImage2D(34069+sn,fn,wn.format,vn>>fn,vn>>fn,0,wn.format,wn.type,null);return pn(),st.profile&&(wn.stats.size=u(wn.internalformat,wn.type,Mn.width,Mn.height,!1,!0)),Mn}},Mn._reglType="textureCube",Mn._texture=wn,st.profile&&(Mn.stats=wn.stats),Mn.destroy=function(){wn.decRef()},Mn},clear:function(){for(var Kt=0;Kt<or;++Kt)Be.activeTexture(33984+Kt),Be.bindTexture(3553,null),mr[Kt]=null;se(Hn).forEach(ln),Ke.cubeCount=0,Ke.textureCount=0},getTexture:function(Kt){return null},restore:function(){for(var Kt=0;Kt<or;++Kt){var An=mr[Kt];An&&(An.bindCount=0,An.unit=-1,mr[Kt]=null)}se(Hn).forEach(function(Rt){Rt.texture=Be.createTexture(),Be.bindTexture(Rt.target,Rt.texture);for(var Zt=0;32>Zt;++Zt)if(Rt.mipmask&1<<Zt)if(3553===Rt.target)Be.texImage2D(3553,Zt,Rt.internalformat,Rt.width>>Zt,Rt.height>>Zt,0,Rt.internalformat,Rt.type,null);else for(var tn=0;6>tn;++tn)Be.texImage2D(34069+tn,Zt,Rt.internalformat,Rt.width>>Zt,Rt.height>>Zt,0,Rt.internalformat,Rt.type,null);Fn(Rt.texInfo,Rt.target)})},refresh:function(){for(var Kt=0;Kt<or;++Kt){var An=mr[Kt];An&&(An.bindCount=0,An.unit=-1,mr[Kt]=null),Be.activeTexture(33984+Kt),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}(gt,Gt,yn,function(){Nn.procs.poll()},Fn,Nt,Be),kn=function(Be,Ye,rt,Se,Re){function Ke(ht){this.id=Et++,this.refCount=1,this.renderbuffer=ht,this.format=32854,this.height=this.width=0,Re.profile&&(this.stats={size:0})}function st(ht){var pt=ht.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(pt),ht.renderbuffer=null,ht.refCount=0,delete At[ht.id],Se.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ye.ext_srgb&&(ct.srgba=35907),Ye.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),Ye.webgl_color_buffer_float&&(ct.rgba32f=34836);var Tt=[];Object.keys(ct).forEach(function(ht){Tt[ct[ht]]=ht});var Et=0,At={};return Ke.prototype.decRef=function(){0>=--this.refCount&&st(this)},Re.profile&&(Se.getTotalRenderbufferSize=function(){var ht=0;return Object.keys(At).forEach(function(pt){ht+=At[pt].stats.size}),ht}),{create:function(ht,pt){function gt(zt,Ut){var Nt=0,jt=0,Gt=32854;if("object"==typeof zt&&zt?("shape"in zt?(Nt=0|(jt=zt.shape)[0],jt=0|jt[1]):("radius"in zt&&(Nt=jt=0|zt.radius),"width"in zt&&(Nt=0|zt.width),"height"in zt&&(jt=0|zt.height)),"format"in zt&&(Gt=ct[zt.format])):"number"==typeof zt?(Nt=0|zt,jt="number"==typeof Ut?0|Ut:Nt):zt||(Nt=jt=1),Nt!==Pt.width||jt!==Pt.height||Gt!==Pt.format)return gt.width=Pt.width=Nt,gt.height=Pt.height=jt,Pt.format=Gt,Be.bindRenderbuffer(36161,Pt.renderbuffer),Be.renderbufferStorage(36161,Gt,Nt,jt),Re.profile&&(Pt.stats.size=at[Pt.format]*Pt.width*Pt.height),gt.format=Tt[Pt.format],gt}var Pt=new Ke(Be.createRenderbuffer());return At[Pt.id]=Pt,Se.renderbufferCount++,gt(ht,pt),gt.resize=function(zt,Ut){var Nt=0|zt,jt=0|Ut||Nt;return Nt===Pt.width&&jt===Pt.height||(gt.width=Pt.width=Nt,gt.height=Pt.height=jt,Be.bindRenderbuffer(36161,Pt.renderbuffer),Be.renderbufferStorage(36161,Pt.format,Nt,jt),Re.profile&&(Pt.stats.size=at[Pt.format]*Pt.width*Pt.height)),gt},gt._reglType="renderbuffer",gt._renderbuffer=Pt,Re.profile&&(gt.stats=Pt.stats),gt.destroy=function(){Pt.decRef()},gt},clear:function(){se(At).forEach(st)},restore:function(){se(At).forEach(function(ht){ht.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,ht.renderbuffer),Be.renderbufferStorage(36161,ht.format,ht.width,ht.height)}),Be.bindRenderbuffer(36161,null)}}}(gt,Gt,0,Nt,Be),Rn=function _(Be,Ye,rt,Se,Re,Ke){function st(yn,on,pn){this.target=yn,this.texture=on,this.renderbuffer=pn;var ln=yn=0;on?(yn=on.width,ln=on.height):pn&&(yn=pn.width,ln=pn.height),this.width=yn,this.height=ln}function ct(yn){yn&&(yn.texture&&yn.texture._texture.decRef(),yn.renderbuffer&&yn.renderbuffer._renderbuffer.decRef())}function Tt(yn,on,pn){yn&&(yn.texture?yn.texture._texture.refCount+=1:yn.renderbuffer._renderbuffer.refCount+=1)}function Et(yn,on){on&&(on.texture?Be.framebufferTexture2D(36160,yn,on.target,on.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,yn,36161,on.renderbuffer._renderbuffer.renderbuffer))}function At(yn){var on=3553,pn=null,ln=null,dn=yn;return"object"==typeof yn&&(dn=yn.data,"target"in yn&&(on=0|yn.target)),"texture2d"===(yn=dn._reglType)||"textureCube"===yn?pn=dn:"renderbuffer"===yn&&(ln=dn,on=36161),new st(on,pn,ln)}function ht(yn,on,pn,ln,dn){return pn?((yn=Se.create2D({width:yn,height:on,format:ln,type:dn}))._texture.refCount=0,new st(3553,yn,null)):((yn=Re.create({width:yn,height:on,format:ln}))._renderbuffer.refCount=0,new st(36161,null,yn))}function pt(yn){return yn&&(yn.texture||yn.renderbuffer)}function gt(yn,on,pn){yn&&(yn.texture?yn.texture.resize(on,pn):yn.renderbuffer&&yn.renderbuffer.resize(on,pn),yn.width=on,yn.height=pn)}function Pt(){this.id=_n++,Fn[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function zt(yn){yn.colorAttachments.forEach(ct),ct(yn.depthAttachment),ct(yn.stencilAttachment),ct(yn.depthStencilAttachment)}function Ut(yn){Be.deleteFramebuffer(yn.framebuffer),yn.framebuffer=null,Ke.framebufferCount--,delete Fn[yn.id]}function Nt(yn){var on;Be.bindFramebuffer(36160,yn.framebuffer);var pn=yn.colorAttachments;for(on=0;on<pn.length;++on)Et(36064+on,pn[on]);for(on=pn.length;on<rt.maxColorAttachments;++on)Be.framebufferTexture2D(36160,36064+on,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),Et(36096,yn.depthAttachment),Et(36128,yn.stencilAttachment),Et(33306,yn.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,Gt.next?Gt.next.framebuffer:null),Gt.cur=Gt.next,Be.getError()}function jt(yn,on){function pn(dn,Cn){var kn,Rn=0,Nn=0,jn=!0,er=!0;kn=null;var Kn=!0,yr="rgba",lr="uint8",$n=1,Gn=null,ir=null,Jt=null,rn=!1;"number"==typeof dn?(Rn=0|dn,Nn=0|Cn||Rn):dn?("shape"in dn?(Rn=(Nn=dn.shape)[0],Nn=Nn[1]):("radius"in dn&&(Rn=Nn=dn.radius),"width"in dn&&(Rn=dn.width),"height"in dn&&(Nn=dn.height)),("color"in dn||"colors"in dn)&&(kn=dn.color||dn.colors,Array.isArray(kn)),kn||("colorCount"in dn&&($n=0|dn.colorCount),"colorTexture"in dn&&(Kn=!!dn.colorTexture,yr="rgba4"),"colorType"in dn&&(lr=dn.colorType,!Kn)&&("half float"===lr||"float16"===lr?yr="rgba16f":"float"!==lr&&"float32"!==lr||(yr="rgba32f")),"colorFormat"in dn&&(0<=un.indexOf(yr=dn.colorFormat)?Kn=!0:0<=hn.indexOf(yr)&&(Kn=!1))),("depthTexture"in dn||"depthStencilTexture"in dn)&&(rn=!(!dn.depthTexture&&!dn.depthStencilTexture)),"depth"in dn&&("boolean"==typeof dn.depth?jn=dn.depth:(Gn=dn.depth,er=!1)),"stencil"in dn&&("boolean"==typeof dn.stencil?er=dn.stencil:(ir=dn.stencil,jn=!1)),"depthStencil"in dn&&("boolean"==typeof dn.depthStencil?jn=er=dn.depthStencil:(Jt=dn.depthStencil,er=jn=!1))):Rn=Nn=1;var Sn=null,Tn=null,Ln=null,Bn=null;if(Array.isArray(kn))Sn=kn.map(At);else if(kn)Sn=[At(kn)];else for(Sn=Array($n),kn=0;kn<$n;++kn)Sn[kn]=ht(Rn,Nn,Kn,yr,lr);for(Rn=Rn||Sn[0].width,Nn=Nn||Sn[0].height,Gn?Tn=At(Gn):jn&&!er&&(Tn=ht(Rn,Nn,rn,"depth","uint32")),ir?Ln=At(ir):er&&!jn&&(Ln=ht(Rn,Nn,!1,"stencil","uint8")),Jt?Bn=At(Jt):!Gn&&!ir&&er&&jn&&(Bn=ht(Rn,Nn,rn,"depth stencil","depth stencil")),jn=null,kn=0;kn<Sn.length;++kn)Tt(Sn[kn]),Sn[kn]&&Sn[kn].texture&&(er=wt[Sn[kn].texture._texture.format]*bt[Sn[kn].texture._texture.type],null===jn&&(jn=er));return Tt(Tn),Tt(Ln),Tt(Bn),zt(ln),ln.width=Rn,ln.height=Nn,ln.colorAttachments=Sn,ln.depthAttachment=Tn,ln.stencilAttachment=Ln,ln.depthStencilAttachment=Bn,pn.color=Sn.map(pt),pn.depth=pt(Tn),pn.stencil=pt(Ln),pn.depthStencil=pt(Bn),pn.width=ln.width,pn.height=ln.height,Nt(ln),pn}var ln=new Pt;return Ke.framebufferCount++,pn(yn,on),K(pn,{resize:function(dn,Cn){var kn=Math.max(0|dn,1),Rn=Math.max(0|Cn||kn,1);if(kn===ln.width&&Rn===ln.height)return pn;for(var Nn=ln.colorAttachments,jn=0;jn<Nn.length;++jn)gt(Nn[jn],kn,Rn);return gt(ln.depthAttachment,kn,Rn),gt(ln.stencilAttachment,kn,Rn),gt(ln.depthStencilAttachment,kn,Rn),ln.width=pn.width=kn,ln.height=pn.height=Rn,Nt(ln),pn},_reglType:"framebuffer",_framebuffer:ln,destroy:function(){Ut(ln),zt(ln)},use:function(dn){Gt.setFBO({framebuffer:pn},dn)}})}var Gt={cur:null,next:null,dirty:!1,setFBO:null},un=["rgba"],hn=["rgba4","rgb565","rgb5 a1"];Ye.ext_srgb&&hn.push("srgba"),Ye.ext_color_buffer_half_float&&hn.push("rgba16f","rgb16f"),Ye.webgl_color_buffer_float&&hn.push("rgba32f");var Qt=["uint8"];Ye.oes_texture_half_float&&Qt.push("half float","float16"),Ye.oes_texture_float&&Qt.push("float","float32");var _n=0,Fn={};return K(Gt,{getFramebuffer:function(yn){return"function"==typeof yn&&"framebuffer"===yn._reglType&&(yn=yn._framebuffer)instanceof Pt?yn:null},create:jt,createCube:function(yn){function on(ln){var dn,Cn={color:null},kn=0,Rn=null;dn="rgba";var Nn="uint8",jn=1;if("number"==typeof ln?kn=0|ln:ln?("shape"in ln?kn=ln.shape[0]:("radius"in ln&&(kn=0|ln.radius),"width"in ln?kn=0|ln.width:"height"in ln&&(kn=0|ln.height)),("color"in ln||"colors"in ln)&&(Rn=ln.color||ln.colors,Array.isArray(Rn)),Rn||("colorCount"in ln&&(jn=0|ln.colorCount),"colorType"in ln&&(Nn=ln.colorType),"colorFormat"in ln&&(dn=ln.colorFormat)),"depth"in ln&&(Cn.depth=ln.depth),"stencil"in ln&&(Cn.stencil=ln.stencil),"depthStencil"in ln&&(Cn.depthStencil=ln.depthStencil)):kn=1,Rn)if(Array.isArray(Rn))for(ln=[],dn=0;dn<Rn.length;++dn)ln[dn]=Rn[dn];else ln=[Rn];else for(ln=Array(jn),Rn={radius:kn,format:dn,type:Nn},dn=0;dn<jn;++dn)ln[dn]=Se.createCube(Rn);for(Cn.color=Array(ln.length),dn=0;dn<ln.length;++dn)jn=ln[dn],kn=kn||jn.width,Cn.color[dn]={target:34069,data:ln[dn]};for(dn=0;6>dn;++dn){for(jn=0;jn<ln.length;++jn)Cn.color[jn].target=34069+dn;0<dn&&(Cn.depth=pn[0].depth,Cn.stencil=pn[0].stencil,Cn.depthStencil=pn[0].depthStencil),pn[dn]?pn[dn](Cn):pn[dn]=jt(Cn)}return K(on,{width:kn,height:kn,color:ln})}var pn=Array(6);return on(yn),K(on,{faces:pn,resize:function(ln){var dn=0|ln;if(dn===on.width)return on;var Cn=on.color;for(ln=0;ln<Cn.length;++ln)Cn[ln].resize(dn);for(ln=0;6>ln;++ln)pn[ln].resize(dn);return on.width=on.height=dn,on},_reglType:"framebufferCube",destroy:function(){pn.forEach(function(ln){ln.destroy()})}})},clear:function(){se(Fn).forEach(Ut)},restore:function(){Gt.cur=null,Gt.next=null,Gt.dirty=!0,se(Fn).forEach(function(yn){yn.framebuffer=Be.createFramebuffer(),Nt(yn)})}})}(gt,Gt,yn,Cn,kn,Nt),Nn=W(gt,Ut,Gt,yn,on,pn,0,Rn,{},ln,dn,Qt,Fn,un,jt,Be),jn=(Ut=function P(Be,Ye,rt,Se,Re,Ke,st){function ct(Tt){var Et;Et=null===Ye.next?5121:Ye.next.colorAttachments[0].texture._texture.type;var At=0,ht=0,pt=Se.framebufferWidth,gt=Se.framebufferHeight,Pt=null;return ye(Tt)?Pt=Tt:Tt&&(At=0|Tt.x,ht=0|Tt.y,pt=0|(Tt.width||Se.framebufferWidth-At),gt=0|(Tt.height||Se.framebufferHeight-ht),Pt=Tt.data||null),rt(),Tt=pt*gt*4,Pt||(5121===Et?Pt=new Uint8Array(Tt):5126===Et&&(Pt=Pt||new Float32Array(Tt))),Be.pixelStorei(3333,4),Be.readPixels(At,ht,pt,gt,6408,Et,Pt),Pt}return function(Tt){return Tt&&"framebuffer"in Tt?(Ye.setFBO({framebuffer:(Et=Tt).framebuffer},function(){At=ct(Et)}),At):ct(Tt);var Et,At}}(gt,Rn,Nn.procs.poll,Fn),Nn.next),er=gt.canvas,Kn=[],yr=[],lr=[],$n=[Be.onDestroy],Gn=null;er&&(er.addEventListener("webglcontextlost",Re,!1),er.addEventListener("webglcontextrestored",Ke,!1));var ir=Rn.setFBO=st({framebuffer:re.define.call(null,1,"framebuffer")});return ht(),Pt=K(st,{clear:function(Jt){if("framebuffer"in Jt)if(Jt.framebuffer&&"framebufferCube"===Jt.framebuffer_reglType)for(var rn=0;6>rn;++rn)ir(K({framebuffer:Jt.framebuffer.faces[rn]},Jt),ct);else ir(Jt,ct);else ct(0,Jt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:st({}),buffer:function(Jt){return on.create(Jt,34962,!1,!1)},elements:function(Jt){return pn.create(Jt,!1)},texture:Cn.create2D,cube:Cn.createCube,renderbuffer:kn.create,framebuffer:Rn.create,framebufferCube:Rn.createCube,vao:ln.createVAO,attributes:Pt,frame:Tt,on:function(Jt,rn){var Sn;switch(Jt){case"frame":return Tt(rn);case"lost":Sn=yr;break;case"restore":Sn=lr;break;case"destroy":Sn=$n}return Sn.push(rn),{cancel:function(){for(var Tn=0;Tn<Sn.length;++Tn)if(Sn[Tn]===rn){Sn[Tn]=Sn[Sn.length-1],Sn.pop();break}}}},limits:yn,hasExtension:function(Jt){return 0<=yn.extensions.indexOf(Jt.toLowerCase())},read:Ut,destroy:function(){Kn.length=0,Se(),er&&(er.removeEventListener("webglcontextlost",Re),er.removeEventListener("webglcontextrestored",Ke)),dn.clear(),Rn.clear(),kn.clear(),ln.clear(),Cn.clear(),pn.clear(),on.clear(),un&&un.clear(),$n.forEach(function(Jt){Jt()})},_gl:gt,_refresh:ht,poll:function(){At(),un&&un.update()},now:pt,stats:Nt,getCachedCode:function(){return jt},preloadCachedCode:function(Jt){Object.entries(Jt).forEach(function(rn){jt[rn[0]]=rn[1]})}}),Be.onDone(null,Pt),Pt}}()},71665:function(Q,z,e){var k=e(12856),A=k.Buffer;function l(b,d){for(var s in b)d[s]=b[s]}function T(b,d,s){return A(b,d,s)}A.from&&A.alloc&&A.allocUnsafe&&A.allocUnsafeSlow?Q.exports=k:(l(k,z),z.Buffer=T),T.prototype=Object.create(A.prototype),l(A,T),T.from=function(b,d,s){if("number"==typeof b)throw new TypeError("Argument must not be a number");return A(b,d,s)},T.alloc=function(b,d,s){if("number"!=typeof b)throw new TypeError("Argument must be a number");var t=A(b);return void 0!==d?"string"==typeof s?t.fill(d,s):t.fill(d):t.fill(0),t},T.allocUnsafe=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return A(b)},T.allocUnsafeSlow=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return k.SlowBuffer(b)}},21630:function(Q,z,e){Q.exports=A;var k=e(15398).EventEmitter;function A(){k.call(this)}e(42018)(A,k),A.Readable=e(40410),A.Writable=e(37493),A.Duplex=e(37865),A.Transform=e(74308),A.PassThrough=e(66897),A.finished=e(12726),A.pipeline=e(10168),A.Stream=A,A.prototype.pipe=function(l,T){var b=this;function d(i){l.writable&&!1===l.write(i)&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",d),l.on("drain",s),l._isStdio||T&&!1===T.end||(b.on("end",o),b.on("close",r));var t=!1;function o(){t||(t=!0,l.end())}function r(){t||(t=!0,"function"==typeof l.destroy&&l.destroy())}function n(i){if(a(),0===k.listenerCount(this,"error"))throw i}function a(){b.removeListener("data",d),l.removeListener("drain",s),b.removeListener("end",o),b.removeListener("close",r),b.removeListener("error",n),l.removeListener("error",n),b.removeListener("end",a),b.removeListener("close",a),l.removeListener("close",a)}return b.on("error",n),l.on("error",n),b.on("end",a),b.on("close",a),l.on("close",a),l.emit("pipe",b),l}},74322:function(Q){"use strict";var z={};function e(A,l,T){T||(T=Error);var b=function(d){var s,t;function o(r,n,a){return d.call(this,"string"==typeof l?l:l(r,n,a))||this}return t=d,(s=o).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,o}(T);b.prototype.name=T.name,b.prototype.code=A,z[A]=b}function k(A,l){if(Array.isArray(A)){var T=A.length;return A=A.map(function(b){return String(b)}),T>2?"one of ".concat(l," ").concat(A.slice(0,T-1).join(", "),", or ")+A[T-1]:2===T?"one of ".concat(l," ").concat(A[0]," or ").concat(A[1]):"of ".concat(l," ").concat(A[0])}return"of ".concat(l," ").concat(String(A))}e("ERR_INVALID_OPT_VALUE",function(A,l){return'The value "'+l+'" is invalid for option "'+A+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(A,l,T){var b,s,t,o,n,i;if("string"==typeof l&&"not "===l.substr(0,"not ".length)?(b="must not be",l=l.replace(/^not /,"")):b="must be",n=A,(void 0===i||i>n.length)&&(i=n.length)," argument"===n.substring(i-" argument".length,i))s="The ".concat(A," ").concat(b," ").concat(k(l,"type"));else{var r=("number"!=typeof o&&(o=0),o+1>(t=A).length||-1===t.indexOf(".",o)?"argument":"property");s='The "'.concat(A,'" ').concat(r," ").concat(b," ").concat(k(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(A){return"The "+A+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(A){return"Cannot call "+A+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(A){return"Unknown encoding: "+A},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Q.exports.q=z},37865:function(Q,z,e){"use strict";var k=e(90386),A=Object.keys||function(n){var a=[];for(var i in n)a.push(i);return a};Q.exports=t;var l=e(40410),T=e(37493);e(42018)(t,l);for(var b=A(T.prototype),d=0;d<b.length;d++){var s=b[d];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(!1===n.readable&&(this.readable=!1),!1===n.writable&&(this.writable=!1),!1===n.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||k.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function(Q,z,e){"use strict";Q.exports=A;var k=e(74308);function A(l){if(!(this instanceof A))return new A(l);k.call(this,l)}e(42018)(A,k),A.prototype._transform=function(l,T,b){b(null,l)}},40410:function(Q,z,e){"use strict";var k,A=e(90386);Q.exports=w,w.ReadableState=m,e(15398);var l,T=function(Z,V){return Z.listeners(V).length},b=e(71405),d=e(12856).Buffer,s=e.g.Uint8Array||function(){},t=e(40964);l=t&&t.debuglog?t.debuglog("stream"):function(){};var o,r,n,a=e(31125),i=e(65756),c=e(56306).getHighWaterMark,h=e(74322).q,f=h.ERR_INVALID_ARG_TYPE,x=h.ERR_STREAM_PUSH_AFTER_EOF,v=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(w,b);var y=i.errorOrDestroy,p=["error","close","destroy","pause","resume"];function m(Z,V,W){k=k||e(37865),"boolean"!=typeof W&&(W=V instanceof k),this.objectMode=!!(Z=Z||{}).objectMode,W&&(this.objectMode=this.objectMode||!!Z.readableObjectMode),this.highWaterMark=c(this,Z,"readableHighWaterMark",W),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Z.emitClose,this.autoDestroy=!!Z.autoDestroy,this.destroyed=!1,this.defaultEncoding=Z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Z.encoding&&(o||(o=e(68019).s),this.decoder=new o(Z.encoding),this.encoding=Z.encoding)}function w(Z){if(k=k||e(37865),!(this instanceof w))return new w(Z);this._readableState=new m(Z,this,this instanceof k),this.readable=!0,Z&&("function"==typeof Z.read&&(this._read=Z.read),"function"==typeof Z.destroy&&(this._destroy=Z.destroy)),b.call(this)}function u(Z,V,W,X,K){l("readableAddChunk",V);var ne,ae,le,pe,xe,re=Z._readableState;if(null===V)re.reading=!1,function(ae,le){if(l("onEofChunk"),!le.ended){if(le.decoder){var pe=le.decoder.end();pe&&pe.length&&(le.buffer.push(pe),le.length+=le.objectMode?1:pe.length)}le.ended=!0,le.sync?L(ae):(le.needReadable=!1,le.emittedReadable||(le.emittedReadable=!0,C(ae)))}}(Z,re);else if(K||(ae=re,d.isBuffer(xe=le=V)||xe instanceof s||"string"==typeof le||void 0===le||ae.objectMode||(pe=new f("chunk",["string","Buffer","Uint8Array"],le)),ne=pe),ne)y(Z,ne);else if(re.objectMode||V&&V.length>0)if("string"==typeof V||re.objectMode||Object.getPrototypeOf(V)===d.prototype||(V=function(ae){return d.from(ae)}(V)),X)re.endEmitted?y(Z,new g):S(Z,re,V,!0);else if(re.ended)y(Z,new x);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!W?(V=re.decoder.write(V),re.objectMode||0!==V.length?S(Z,re,V,!1):P(Z,re)):S(Z,re,V,!1)}else X||(re.reading=!1,P(Z,re));return!re.ended&&(re.length<re.highWaterMark||0===re.length)}function S(Z,V,W,X){V.flowing&&0===V.length&&!V.sync?(V.awaitDrain=0,Z.emit("data",W)):(V.length+=V.objectMode?1:W.length,X?V.buffer.unshift(W):V.buffer.push(W),V.needReadable&&L(Z)),P(Z,V)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Z){this._readableState&&(this._readableState.destroyed=Z)}}),w.prototype.destroy=i.destroy,w.prototype._undestroy=i.undestroy,w.prototype._destroy=function(Z,V){V(Z)},w.prototype.push=function(Z,V){var W,X=this._readableState;return X.objectMode?W=!0:"string"==typeof Z&&((V=V||X.defaultEncoding)!==X.encoding&&(Z=d.from(Z,V),V=""),W=!0),u(this,Z,V,!1,W)},w.prototype.unshift=function(Z){return u(this,Z,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(Z){o||(o=e(68019).s);var V=new o(Z);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,X="";null!==W;)X+=V.write(W.data),W=W.next;return this._readableState.buffer.clear(),""!==X&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var _=1073741824;function E(Z,V){return Z<=0||0===V.length&&V.ended?0:V.objectMode?1:Z!=Z?V.flowing&&V.length?V.buffer.head.data.length:V.length:(Z>V.highWaterMark&&(V.highWaterMark=((W=Z)>=_?W=_:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W)),Z<=V.length?Z:V.ended?V.length:(V.needReadable=!0,0));var W}function L(Z){var V=Z._readableState;l("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(l("emitReadable",V.flowing),V.emittedReadable=!0,A.nextTick(C,Z))}function C(Z){var V=Z._readableState;l("emitReadable_",V.destroyed,V.length,V.ended),V.destroyed||!V.length&&!V.ended||(Z.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,F(Z)}function P(Z,V){V.readingMore||(V.readingMore=!0,A.nextTick(I,Z,V))}function I(Z,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&0===V.length);){var W=V.length;if(l("maybeReadMore read 0"),Z.read(0),W===V.length)break}V.readingMore=!1}function j(Z){var V=Z._readableState;V.readableListening=Z.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:Z.listenerCount("data")>0&&Z.resume()}function R(Z){l("readable nexttick read 0"),Z.read(0)}function H(Z,V){l("resume",V.reading),V.reading||Z.read(0),V.resumeScheduled=!1,Z.emit("resume"),F(Z),V.flowing&&!V.reading&&Z.read(0)}function F(Z){var V=Z._readableState;for(l("flow",V.flowing);V.flowing&&null!==Z.read(););}function U(Z,V){return 0===V.length?null:(V.objectMode?W=V.buffer.shift():!Z||Z>=V.length?(W=V.decoder?V.buffer.join(""):1===V.buffer.length?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):W=V.buffer.consume(Z,V.decoder),W);var W}function B(Z){var V=Z._readableState;l("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,A.nextTick(N,V,Z))}function N(Z,V){if(l("endReadableNT",Z.endEmitted,Z.length),!Z.endEmitted&&0===Z.length&&(Z.endEmitted=!0,V.readable=!1,V.emit("end"),Z.autoDestroy)){var W=V._writableState;(!W||W.autoDestroy&&W.finished)&&V.destroy()}}function J(Z,V){for(var W=0,X=Z.length;W<X;W++)if(Z[W]===V)return W;return-1}w.prototype.read=function(Z){l("read",Z),Z=parseInt(Z,10);var V=this._readableState,W=Z;if(0!==Z&&(V.emittedReadable=!1),0===Z&&V.needReadable&&((0!==V.highWaterMark?V.length>=V.highWaterMark:V.length>0)||V.ended))return l("read: emitReadable",V.length,V.ended),0===V.length&&V.ended?B(this):L(this),null;if(0===(Z=E(Z,V))&&V.ended)return 0===V.length&&B(this),null;var X,K=V.needReadable;return l("need readable",K),(0===V.length||V.length-Z<V.highWaterMark)&&l("length less than watermark",K=!0),V.ended||V.reading?l("reading or ended",K=!1):K&&(l("do read"),V.reading=!0,V.sync=!0,0===V.length&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(Z=E(W,V))),null===(X=Z>0?U(Z,V):null)?(V.needReadable=V.length<=V.highWaterMark,Z=0):(V.length-=Z,V.awaitDrain=0),0===V.length&&(V.ended||(V.needReadable=!0),W!==Z&&V.ended&&B(this)),null!==X&&this.emit("data",X),X},w.prototype._read=function(Z){y(this,new v("_read()"))},w.prototype.pipe=function(Z,V){var W=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=Z;break;case 1:X.pipes=[X.pipes,Z];break;default:X.pipes.push(Z)}X.pipesCount+=1,l("pipe count=%d opts=%j",X.pipesCount,V);var K=V&&!1===V.end||Z===A.stdout||Z===A.stderr?se:ne;function ne(){l("onend"),Z.end()}X.endEmitted?A.nextTick(K):W.once("end",K),Z.on("unpipe",function fe(Ee,de){l("onunpipe"),Ee===W&&de&&!1===de.hasUnpiped&&(de.hasUnpiped=!0,l("cleanup"),Z.removeListener("close",xe),Z.removeListener("finish",ye),Z.removeListener("drain",re),Z.removeListener("error",pe),Z.removeListener("unpipe",fe),W.removeListener("end",ne),W.removeListener("end",se),W.removeListener("data",le),ae=!0,!X.awaitDrain||Z._writableState&&!Z._writableState.needDrain||re())});var fe,re=(fe=W,function(){var Ee=fe._readableState;l("pipeOnDrain",Ee.awaitDrain),Ee.awaitDrain&&Ee.awaitDrain--,0===Ee.awaitDrain&&T(fe,"data")&&(Ee.flowing=!0,F(fe))});Z.on("drain",re);var ae=!1;function le(fe){l("ondata");var Ee=Z.write(fe);l("dest.write",Ee),!1===Ee&&((1===X.pipesCount&&X.pipes===Z||X.pipesCount>1&&-1!==J(X.pipes,Z))&&!ae&&(l("false write response, pause",X.awaitDrain),X.awaitDrain++),W.pause())}function pe(fe){l("onerror",fe),se(),Z.removeListener("error",pe),0===T(Z,"error")&&y(Z,fe)}function xe(){Z.removeListener("finish",ye),se()}function ye(){l("onfinish"),Z.removeListener("close",xe),se()}function se(){l("unpipe"),W.unpipe(Z)}return W.on("data",le),function(fe,Ee,de){if("function"==typeof fe.prependListener)return fe.prependListener("error",de);fe._events&&fe._events.error?Array.isArray(fe._events.error)?fe._events.error.unshift(de):fe._events.error=[de,fe._events.error]:fe.on("error",de)}(Z,0,pe),Z.once("close",xe),Z.once("finish",ye),Z.emit("pipe",W),X.flowing||(l("pipe resume"),W.resume()),Z},w.prototype.unpipe=function(Z){var V=this._readableState,W={hasUnpiped:!1};if(0===V.pipesCount)return this;if(1===V.pipesCount)return Z&&Z!==V.pipes||(Z||(Z=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,Z&&Z.emit("unpipe",this,W)),this;if(!Z){var X=V.pipes,K=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var ne=0;ne<K;ne++)X[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var re=J(V.pipes,Z);return-1===re||(V.pipes.splice(re,1),V.pipesCount-=1,1===V.pipesCount&&(V.pipes=V.pipes[0]),Z.emit("unpipe",this,W)),this},w.prototype.addListener=w.prototype.on=function(Z,V){var W=b.prototype.on.call(this,Z,V),X=this._readableState;return"data"===Z?(X.readableListening=this.listenerCount("readable")>0,!1!==X.flowing&&this.resume()):"readable"===Z&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,l("on readable",X.length,X.reading),X.length?L(this):X.reading||A.nextTick(R,this))),W},w.prototype.removeListener=function(Z,V){var W=b.prototype.removeListener.call(this,Z,V);return"readable"===Z&&A.nextTick(j,this),W},w.prototype.removeAllListeners=function(Z){var V=b.prototype.removeAllListeners.apply(this,arguments);return"readable"!==Z&&void 0!==Z||A.nextTick(j,this),V},w.prototype.resume=function(){var W,Z=this._readableState;return Z.flowing||(l("resume"),Z.flowing=!Z.readableListening,this,(W=Z).resumeScheduled||(W.resumeScheduled=!0,A.nextTick(H,this,W))),Z.paused=!1,this},w.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(Z){var V=this,W=this._readableState,X=!1;for(var K in Z.on("end",function(){if(l("wrapped end"),W.decoder&&!W.ended){var re=W.decoder.end();re&&re.length&&V.push(re)}V.push(null)}),Z.on("data",function(re){l("wrapped data"),W.decoder&&(re=W.decoder.write(re)),W.objectMode&&null==re||(W.objectMode||re&&re.length)&&(V.push(re)||(X=!0,Z.pause()))}),Z)void 0===this[K]&&"function"==typeof Z[K]&&(this[K]=function(re){return function(){return Z[re].apply(Z,arguments)}}(K));for(var ne=0;ne<p.length;ne++)Z.on(p[ne],this.emit.bind(this,p[ne]));return this._read=function(re){l("wrapped _read",re),X&&(X=!1,Z.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===r&&(r=e(68221)),r(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Z){this._readableState&&(this._readableState.flowing=Z)}}),w._fromList=U,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(Z,V){return void 0===n&&(n=e(31748)),n(w,Z,V)})},74308:function(Q,z,e){"use strict";Q.exports=t;var k=e(74322).q,A=k.ERR_METHOD_NOT_IMPLEMENTED,l=k.ERR_MULTIPLE_CALLBACK,T=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=k.ERR_TRANSFORM_WITH_LENGTH_0,d=e(37865);function s(n,a){var i=this._transformState;i.transforming=!1;var c=i.writecb;if(null===c)return this.emit("error",new l);i.writechunk=null,i.writecb=null,null!=a&&this.push(a),c(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);d.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&("function"==typeof n.transform&&(this._transform=n.transform),"function"==typeof n.flush&&(this._flush=n.flush)),this.on("prefinish",o)}function o(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush(function(a,i){r(n,a,i)})}function r(n,a,i){if(a)return n.emit("error",a);if(null!=i&&n.push(i),n._writableState.length)throw new b;if(n._transformState.transforming)throw new T;return n.push(null)}e(42018)(t,d),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,i){i(new A("_transform()"))},t.prototype._write=function(n,a,i){var c=this._transformState;if(c.writecb=i,c.writechunk=n,c.writeencoding=a,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){d.prototype._destroy.call(this,n,function(i){a(i)})}},37493:function(Q,z,e){"use strict";var k,A=e(90386);function l(P){var I=this;this.next=null,this.entry=null,this.finish=function(){!function(j,R,H){var F=j.entry;for(j.entry=null;F;){var U=F.callback;R.pendingcb--,U(void 0),F=F.next}R.corkedRequestsFree.next=j}(I,P)}}Q.exports=w,w.WritableState=m;var T,b={deprecate:e(20588)},d=e(71405),s=e(12856).Buffer,t=e.g.Uint8Array||function(){},o=e(65756),r=e(56306).getHighWaterMark,n=e(74322).q,a=n.ERR_INVALID_ARG_TYPE,i=n.ERR_METHOD_NOT_IMPLEMENTED,c=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,f=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,v=n.ERR_STREAM_WRITE_AFTER_END,g=n.ERR_UNKNOWN_ENCODING,y=o.errorOrDestroy;function p(){}function m(P,I,j){k=k||e(37865),"boolean"!=typeof j&&(j=I instanceof k),this.objectMode=!!(P=P||{}).objectMode,j&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===P.decodeStrings),this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){!function(F,U){var V,B=F._writableState,N=B.sync,J=B.writecb;if("function"!=typeof J)throw new c;if((V=B).writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0,U)!function(V,W,X,K,ne){--W.pendingcb,X?(A.nextTick(ne,K),A.nextTick(C,V,W),V._writableState.errorEmitted=!0,y(V,K)):(ne(K),V._writableState.errorEmitted=!0,y(V,K),C(V,W))}(F,B,N,U,J);else{var Z=E(B)||F.destroyed;Z||B.corked||B.bufferProcessing||!B.bufferedRequest||_(F,B),N?A.nextTick(S,F,B,Z,J):S(F,B,Z,J)}}(I,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==P.emitClose,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function w(P){var I=this instanceof(k=k||e(37865));if(!I&&!T.call(w,this))return new w(P);this._writableState=new m(P,this,I),this.writable=!0,P&&("function"==typeof P.write&&(this._write=P.write),"function"==typeof P.writev&&(this._writev=P.writev),"function"==typeof P.destroy&&(this._destroy=P.destroy),"function"==typeof P.final&&(this._final=P.final)),d.call(this)}function u(P,I,j,R,H,F,U){I.writelen=R,I.writecb=U,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new f("write")):j?P._writev(H,I.onwrite):P._write(H,F,I.onwrite),I.sync=!1}function S(P,I,j,R){var H,F;j||(H=P,0===(F=I).length&&F.needDrain&&(F.needDrain=!1,H.emit("drain"))),I.pendingcb--,R(),C(P,I)}function _(P,I){I.bufferProcessing=!0;var j=I.bufferedRequest;if(P._writev&&j&&j.next){var H=new Array(I.bufferedRequestCount),F=I.corkedRequestsFree;F.entry=j;for(var U=0,B=!0;j;)H[U]=j,j.isBuf||(B=!1),j=j.next,U+=1;H.allBuffers=B,u(P,I,!0,I.length,H,"",F.finish),I.pendingcb++,I.lastBufferedRequest=null,F.next?(I.corkedRequestsFree=F.next,F.next=null):I.corkedRequestsFree=new l(I),I.bufferedRequestCount=0}else{for(;j;){var N=j.chunk;if(u(P,I,!1,I.objectMode?1:N.length,N,j.encoding,j.callback),j=j.next,I.bufferedRequestCount--,I.writing)break}null===j&&(I.lastBufferedRequest=null)}I.bufferedRequest=j,I.bufferProcessing=!1}function E(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function L(P,I){P._final(function(j){I.pendingcb--,j&&y(P,j),I.prefinished=!0,P.emit("prefinish"),C(P,I)})}function C(P,I){var H,F,j=E(I);if(j&&(H=P,(F=I).prefinished||F.finalCalled||("function"!=typeof H._final||F.destroyed?(F.prefinished=!0,H.emit("prefinish")):(F.pendingcb++,F.finalCalled=!0,A.nextTick(L,H,F))),0===I.pendingcb&&(I.finished=!0,P.emit("finish"),I.autoDestroy))){var R=P._readableState;(!R||R.autoDestroy&&R.endEmitted)&&P.destroy()}return j}e(42018)(w,d),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,I=[];P;)I.push(P),P=P.next;return I},function(){try{Object.defineProperty(m.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===w&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},w.prototype.pipe=function(){y(this,new h)},w.prototype.write=function(P,I,j){var R,B,N,J,H=this._writableState,F=!1,U=!H.objectMode&&(s.isBuffer(R=P)||R instanceof t);return U&&!s.isBuffer(P)&&(P=s.from(P)),"function"==typeof I&&(j=I,I=null),U?I="buffer":I||(I=H.defaultEncoding),"function"!=typeof j&&(j=p),H.ending?(B=this,N=j,J=new v,y(B,J),A.nextTick(N,J)):(U||function(B,N,J,Z){var V;return null===J?V=new x:"string"==typeof J||N.objectMode||(V=new a("chunk",["string","Buffer"],J)),!V||(y(B,V),A.nextTick(Z,V),!1)}(this,H,P,j))&&(H.pendingcb++,F=function(B,N,J,Z,V,W){if(!J){var X=(le=Z,(ae=N).objectMode||!1===ae.decodeStrings||"string"!=typeof le||(le=s.from(le,V)),le);Z!==X&&(J=!0,V="buffer",Z=X)}var ae,le,K=N.objectMode?1:Z.length;N.length+=K;var ne=N.length<N.highWaterMark;if(ne||(N.needDrain=!0),N.writing||N.corked){var re=N.lastBufferedRequest;N.lastBufferedRequest={chunk:Z,encoding:V,isBuf:J,callback:W,next:null},re?re.next=N.lastBufferedRequest:N.bufferedRequest=N.lastBufferedRequest,N.bufferedRequestCount+=1}else u(B,N,!1,K,Z,V,W);return ne}(this,H,U,P,I,j)),F},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||_(this,P))},w.prototype.setDefaultEncoding=function(P){if("string"==typeof P&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new g(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(P,I,j){j(new i("_write()"))},w.prototype._writev=null,w.prototype.end=function(P,I,j){var H,F,U,R=this._writableState;return"function"==typeof P?(j=P,P=null,I=null):"function"==typeof I&&(j=I,I=null),null!=P&&this.write(P,I),R.corked&&(R.corked=1,this.uncork()),R.ending||(H=this,U=j,(F=R).ending=!0,C(H,F),U&&(F.finished?A.nextTick(U):H.once("finish",U)),F.ended=!0,H.writable=!1),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),w.prototype.destroy=o.destroy,w.prototype._undestroy=o.undestroy,w.prototype._destroy=function(P,I){I(P)}},68221:function(Q,z,e){"use strict";var k,A=e(90386);function l(x,v,g){return v in x?Object.defineProperty(x,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[v]=g,x}var T=e(12726),b=Symbol("lastResolve"),d=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),o=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(x,v){return{value:x,done:v}}function i(x){var v=x[b];if(null!==v){var g=x[n].read();null!==g&&(x[o]=null,x[b]=null,x[d]=null,v(a(g,!1)))}}function c(x){A.nextTick(i,x)}var h=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((l(k={get stream(){return this[n]},next:function(){var x=this,v=this[s];if(null!==v)return Promise.reject(v);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,w){A.nextTick(function(){x[s]?w(x[s]):m(a(void 0,!0))})});var g,m,w,y=this[o];if(y)g=new Promise((m=y,w=this,function(u,S){m.then(function(){w[t]?u(a(void 0,!0)):w[r](u,S)},S)}));else{var p=this[n].read();if(null!==p)return Promise.resolve(a(p,!1));g=new Promise(this[r])}return this[o]=g,g}},Symbol.asyncIterator,function(){return this}),l(k,"return",function(){var x=this;return new Promise(function(v,g){x[n].destroy(null,function(y){y?g(y):v(a(void 0,!0))})})}),k),h);Q.exports=function(x){var v,g=Object.create(f,(l(v={},n,{value:x,writable:!0}),l(v,b,{value:null,writable:!0}),l(v,d,{value:null,writable:!0}),l(v,s,{value:null,writable:!0}),l(v,t,{value:x._readableState.endEmitted,writable:!0}),l(v,r,{value:function(y,p){var m=g[n].read();m?(g[o]=null,g[b]=null,g[d]=null,y(a(m,!1))):(g[b]=y,g[d]=p)},writable:!0}),v));return g[o]=null,T(x,function(y){if(y&&"ERR_STREAM_PREMATURE_CLOSE"!==y.code){var p=g[d];return null!==p&&(g[o]=null,g[b]=null,g[d]=null,p(y)),void(g[s]=y)}var m=g[b];null!==m&&(g[o]=null,g[b]=null,g[d]=null,m(a(void 0,!0))),g[t]=!0}),x.on("readable",c.bind(null,g)),g}},31125:function(Q,z,e){"use strict";function k(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),o.push.apply(o,r)}return o}function A(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}var T=e(12856).Buffer,b=e(69862).inspect,d=b&&b.custom||"inspect";Q.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var o;return o=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(0===this.length)return T.alloc(0);for(var c=T.allocUnsafe(r>>>0),h=this.head,f=0;h;)T.prototype.copy.call(h.data,c,f),f+=h.data.length,h=h.next;return c}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,i=n.data;for(r-=i.length;n=n.next;){var c=n.data,h=r>c.length?c.length:r;if(i+=h===c.length?c:c.slice(0,r),0==(r-=h)){h===c.length?(++a,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=c.slice(h));break}++a}return this.length-=a,i}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,i=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var c=a.data,h=r>c.length?c.length:r;if(c.copy(n,n.length-r,0,h),0==(r-=h)){h===c.length?(++i,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=c.slice(h));break}++i}return this.length-=i,n}},{key:d,value:function(r,n){return b(this,function(a){for(var i=1;i<arguments.length;i++){var c=null!=arguments[i]?arguments[i]:{};i%2?k(Object(c),!0).forEach(function(h){A(a,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):k(Object(c)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(c,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],o&&function l(s,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}(s.prototype,o),s}()},65756:function(Q,z,e){"use strict";var k=e(90386);function A(b,d){T(b,d),l(b)}function l(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,d){b.emit("error",d)}Q.exports={destroy:function(b,d){var s=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(d?d(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,k.nextTick(T,this,b)):k.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(r){!d&&r?s._writableState?s._writableState.errorEmitted?k.nextTick(l,s):(s._writableState.errorEmitted=!0,k.nextTick(A,s,r)):k.nextTick(A,s,r):d?(k.nextTick(l,s),d(r)):k.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,d){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(d):b.emit("error",d)}}},12726:function(Q,z,e){"use strict";var k=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function A(){}Q.exports=function l(T,b,d){if("function"==typeof b)return l(T,null,b);var x,v;b||(b={}),x=d||A,v=!1,d=function(){if(!v){v=!0;for(var g=arguments.length,y=new Array(g),p=0;p<g;p++)y[p]=arguments[p];x.apply(this,y)}};var s=b.readable||!1!==b.readable&&T.readable,t=b.writable||!1!==b.writable&&T.writable,o=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,s||d.call(T)},a=T._readableState&&T._readableState.endEmitted,i=function(){s=!1,a=!0,t||d.call(T)},c=function(x){d.call(T,x)},h=function(){var x;return s&&!a?(T._readableState&&T._readableState.ended||(x=new k),d.call(T,x)):t&&!r?(T._writableState&&T._writableState.ended||(x=new k),d.call(T,x)):void 0},f=function(){T.req.on("finish",n)};return function(x){return x.setHeader&&"function"==typeof x.abort}(T)?(T.on("complete",n),T.on("abort",h),T.req?f():T.on("request",f)):t&&!T._writableState&&(T.on("end",o),T.on("close",o)),T.on("end",i),T.on("finish",n),!1!==b.error&&T.on("error",c),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",f),T.req&&T.req.removeListener("finish",n),T.removeListener("end",o),T.removeListener("close",o),T.removeListener("finish",n),T.removeListener("end",i),T.removeListener("error",c),T.removeListener("close",h)}}},31748:function(Q){Q.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(Q,z,e){"use strict";var k,A=e(74322).q,l=A.ERR_MISSING_ARGS,T=A.ERR_STREAM_DESTROYED;function b(r){if(r)throw r}function s(r){r()}function t(r,n){return r.pipe(n)}Q.exports=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i,c=function o(r){return r.length?"function"!=typeof r[r.length-1]?b:r.pop():b}(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new l("streams");var h=n.map(function(f,x){var v=x<n.length-1;return function d(r,n,a,i){var f,x;f=i,x=!1,i=function(){x||(x=!0,f.apply(void 0,arguments))};var c=!1;r.on("close",function(){c=!0}),void 0===k&&(k=e(12726)),k(r,{readable:n,writable:a},function(f){if(f)return i(f);c=!0,i()});var h=!1;return function(f){if(!c&&!h)return h=!0,function(x){return x.setHeader&&"function"==typeof x.abort}(r)?r.abort():"function"==typeof r.destroy?r.destroy():void i(f||new T("pipe"))}}(f,v,x>0,function(g){i||(i=g),g&&h.forEach(s),v||(h.forEach(s),c(i))})});return n.reduce(t)}},56306:function(Q,z,e){"use strict";var k=e(74322).q.ERR_INVALID_OPT_VALUE;Q.exports={getHighWaterMark:function(A,l,T,b){var s,d=null!=(s=l).highWaterMark?s.highWaterMark:b?s[T]:null;if(null!=d){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new k(b?T:"highWaterMark",d);return Math.floor(d)}return A.objectMode?16:16384}}},71405:function(Q,z,e){Q.exports=e(15398).EventEmitter},68019:function(Q,z,e){"use strict";var k=e(71665).Buffer,A=k.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(a){var i;switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var x;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(x)return;f=(""+f).toLowerCase(),x=!0}}(c);if("string"!=typeof h&&(k.isEncoding===A||!A(c)))throw new Error("Unknown encoding: "+c);return h||c}(a),this.encoding){case"utf16le":this.text=d,this.end=s,i=4;break;case"utf8":this.fillLast=b,i=4;break;case"base64":this.text=t,this.end=o,i=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=k.allocUnsafe(i)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var i=this.lastTotal-this.lastNeed,c=function(h,f,x){if(128!=(192&f[0]))return h.lastNeed=0,"\ufffd";if(h.lastNeed>1&&f.length>1){if(128!=(192&f[1]))return h.lastNeed=1,"\ufffd";if(h.lastNeed>2&&f.length>2&&128!=(192&f[2]))return h.lastNeed=2,"\ufffd"}}(this,a);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,i,0,a.length),void(this.lastNeed-=a.length))}function d(a,i){if((a.length-i)%2==0){var c=a.toString("utf16le",i);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",i,a.length-1)}function s(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):i}function t(a,i){var c=(a.length-i)%3;return 0===c?a.toString("base64",i):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",i,a.length-c))}function o(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("base64",0,3-this.lastNeed):i}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}z.s=l,l.prototype.write=function(a){if(0===a.length)return"";var i,c;if(this.lastNeed){if(void 0===(i=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?i?i+this.text(a,c):this.text(a,c):i||""},l.prototype.end=function(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+"\ufffd":i},l.prototype.text=function(a,i){var c=function(f,x,v){var g=x.length-1;if(g<v)return 0;var y=T(x[g]);return y>=0?(y>0&&(f.lastNeed=y-1),y):--g<v||-2===y?0:(y=T(x[g]))>=0?(y>0&&(f.lastNeed=y-2),y):--g<v||-2===y?0:(y=T(x[g]))>=0?(y>0&&(2===y?y=0:f.lastNeed=y-3),y):0}(this,a,i);if(!this.lastNeed)return a.toString("utf8",i);this.lastTotal=c;var h=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",i,h)},l.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},90715:function(Q,z,e){var k=e(32791),A=e(41633)("stream-parser");function l(a){A("initializing parser stream"),a._parserBytesLeft=0,a._parserBuffers=[],a._parserBuffered=0,a._parserState=-1,a._parserCallback=null,"function"==typeof a.push&&(a._parserOutput=a.push.bind(a)),a._parserInit=!0}function T(a,i){k(!this._parserCallback,'there is already a "callback" set!'),k(isFinite(a)&&a>0,'can only buffer a finite number of bytes > 0, got "'+a+'"'),this._parserInit||l(this),A("buffering %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=0}function b(a,i){k(!this._parserCallback,'there is already a "callback" set!'),k(a>0,'can only skip > 0 bytes, got "'+a+'"'),this._parserInit||l(this),A("skipping %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=1}function d(a,i){k(!this._parserCallback,'There is already a "callback" set!'),k(a>0,'can only pass through > 0 bytes, got "'+a+'"'),this._parserInit||l(this),A("passing through %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=2}function s(a,i,c){this._parserInit||l(this),A("write(%o bytes)",a.length),"function"==typeof i&&(c=i),r(this,a,null,c)}function t(a,i,c){this._parserInit||l(this),A("transform(%o bytes)",a.length),"function"!=typeof i&&(i=this._parserOutput),r(this,a,i,c)}function o(a,i,c,h){if(a._parserBytesLeft-=i.length,A("%o bytes left for stream piece",a._parserBytesLeft),0===a._parserState?(a._parserBuffers.push(i),a._parserBuffered+=i.length):2===a._parserState&&c(i),0!==a._parserBytesLeft)return h;var f=a._parserCallback;if(f&&0===a._parserState&&a._parserBuffers.length>1&&(i=Buffer.concat(a._parserBuffers,a._parserBuffered)),0!==a._parserState&&(i=null),a._parserCallback=null,a._parserBuffered=0,a._parserState=-1,a._parserBuffers.splice(0),f){var x=[];i&&x.push(i),c&&x.push(c);var v=f.length>x.length;v&&x.push(n(h));var g=f.apply(a,x);if(!v||h===g)return h}}Q.exports=function(a){var i=a&&"function"==typeof a._transform;if(!(i||a&&"function"==typeof a._write))throw new Error("must pass a Writable or Transform stream in");A("extending Parser into stream"),a._bytes=T,a._skipBytes=b,i&&(a._passthrough=d),i?a._transform=t:a._write=s};var r=n(function a(i,c,h,f){return i._parserBytesLeft<=0?f(new Error("got data but not currently parsing anything")):c.length<=i._parserBytesLeft?function(){return o(i,c,h,f)}:function(){var x=c.slice(0,i._parserBytesLeft);return o(i,x,h,function(v){return v?f(v):c.length>x.length?function(){return a(i,c.slice(x.length),h,f)}:void 0})}});function n(a){return function(){for(var i=a.apply(this,arguments);"function"==typeof i;)i=i();return i}}},41633:function(Q,z,e){var k=e(90386);function A(){var l;try{l=z.storage.debug}catch{}return!l&&void 0!==k&&"env"in k&&(l=k.env.DEBUG),l}(z=Q.exports=e(74469)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},z.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+z.humanize(this.diff),T){var b="color: "+this.color;l.splice(1,0,b,"color: inherit");var d=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(d++,"%c"===t&&(s=d))}),l.splice(s,0,b)}},z.save=function(l){try{null==l?z.storage.removeItem("debug"):z.storage.debug=l}catch{}},z.load=A,z.useColors=function(){return!(typeof window>"u"||!window.process||"renderer"!==window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},z.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),z.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],z.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},z.enable(A())},74469:function(Q,z,e){var k;function A(l){function T(){if(T.enabled){var b=T,d=+new Date;b.diff=d-(k||d),b.prev=k,b.curr=d,k=d;for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];t[0]=z.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(a,i){if("%%"===a)return a;r++;var c=z.formatters[i];return"function"==typeof c&&(a=c.call(b,t[r]),t.splice(r,1),r--),a}),z.formatArgs.call(b,t),(T.log||z.log||console.log.bind(console)).apply(b,t)}}return T.namespace=l,T.enabled=z.enabled(l),T.useColors=z.useColors(),T.color=function(b){var d,s=0;for(d in b)s=(s<<5)-s+b.charCodeAt(d),s|=0;return z.colors[Math.abs(s)%z.colors.length]}(l),"function"==typeof z.init&&z.init(T),T}(z=Q.exports=A.debug=A.default=A).coerce=function(l){return l instanceof Error?l.stack||l.message:l},z.disable=function(){z.enable("")},z.enable=function(l){z.save(l),z.names=[],z.skips=[];for(var T=("string"==typeof l?l:"").split(/[\s,]+/),b=T.length,d=0;d<b;d++)T[d]&&("-"===(l=T[d].replace(/\*/g,".*?"))[0]?z.skips.push(new RegExp("^"+l.substr(1)+"$")):z.names.push(new RegExp("^"+l+"$")))},z.enabled=function(l){var T,b;for(T=0,b=z.skips.length;T<b;T++)if(z.skips[T].test(l))return!1;for(T=0,b=z.names.length;T<b;T++)if(z.names[T].test(l))return!0;return!1},z.humanize=e(11375),z.names=[],z.skips=[],z.formatters={}},11375:function(Q){var z=1e3,e=60*z,k=60*e,A=24*k;function l(T,b,d){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+d:Math.ceil(T/b)+" "+d+"s"}Q.exports=function(T,b){b=b||{};var d,t,s=typeof T;if("string"===s&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(o){var r=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*A;case"hours":case"hour":case"hrs":case"hr":case"h":return r*k;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if("number"===s&&!1===isNaN(T))return b.long?l(d=T,A,"day")||l(d,k,"hour")||l(d,e,"minute")||l(d,z,"second")||d+" ms":(t=T)>=A?Math.round(t/A)+"d":t>=k?Math.round(t/k)+"h":t>=e?Math.round(t/e)+"m":t>=z?Math.round(t/z)+"s":t+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function(Q,z,e){"use strict";var k=e(88641);Q.exports=function(A,l,T){if(null==A)throw Error("First argument should be a string");if(null==l)throw Error("Separator should be a string or a RegExp");T?("string"==typeof T||Array.isArray(T))&&(T={ignore:T}):T={},null==T.escape&&(T.escape=!0),null==T.ignore?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof T.ignore&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return 1===n.length&&(n+=n),n}));var b=k.parse(A,{flat:!0,brackets:T.ignore}),d=b[0].split(l);if(T.escape){for(var s=[],t=0;t<d.length;t++){var o=d[t];"\\"===o[o.length-1]&&"\\"!==o[o.length-2]?(s.push(o+l+d[t+1]),t++):s.push(o)}d=s}for(t=0;t<d.length;t++)b[0]=d[t],d[t]=k.stringify(b,{flat:!0});return d}},68664:function(Q){"use strict";Q.exports=function(z){for(var e=z.length,k=new Array(e),A=new Array(e),l=new Array(e),T=new Array(e),b=new Array(e),d=new Array(e),s=0;s<e;++s)k[s]=-1,A[s]=0,l[s]=!1,T[s]=0,b[s]=-1,d[s]=[];var t,o=0,r=[],n=[];function a(h){var f=[h],x=[h];for(k[h]=A[h]=o,l[h]=!0,o+=1;x.length>0;){var v=z[h=x[x.length-1]];if(T[h]<v.length){for(var g=T[h];g<v.length;++g){var y=v[g];if(k[y]<0){k[y]=A[y]=o,l[y]=!0,o+=1,f.push(y),x.push(y);break}l[y]&&(A[h]=0|Math.min(A[h],A[y])),b[y]>=0&&d[h].push(b[y])}T[h]=g}else{if(A[h]===k[h]){var p=[],m=[],w=0;for(g=f.length-1;g>=0;--g){var u=f[g];if(l[u]=!1,p.push(u),m.push(d[u]),w+=d[u].length,b[u]=r.length,u===h){f.length=g;break}}r.push(p);var S=new Array(w);for(g=0;g<m.length;g++)for(var _=0;_<m[g].length;_++)S[--w]=m[g][_];n.push(S)}x.pop()}}}for(s=0;s<e;++s)k[s]<0&&a(s);for(s=0;s<n.length;s++){var i=n[s];if(0!==i.length){i.sort(function(h,f){return h-f}),t=[i[0]];for(var c=1;c<i.length;c++)i[c]!==i[c-1]&&t.push(i[c]);n[s]=t}}return{components:r,adjacencyList:n}}},7095:function(Q,z,e){"use strict";e.r(z);var k=2*Math.PI,A=function(b,d,s,t,o,r,n){var a=b.x,i=b.y;return{x:t*(a*=d)-o*(i*=s)+r,y:o*a+t*i+n}},l=function(b,d){var s=1.5707963267948966===d?.551915024494:-1.5707963267948966===d?-.551915024494:1.3333333333333333*Math.tan(d/4),t=Math.cos(b),o=Math.sin(b),r=Math.cos(b+d),n=Math.sin(b+d);return[{x:t-o*s,y:o+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(b,d,s,t){var o=b*s+d*t;return o>1&&(o=1),o<-1&&(o=-1),(b*t-d*s<0?-1:1)*Math.acos(o)};z.default=function(b){var d=b.px,s=b.py,t=b.cx,o=b.cy,r=b.rx,n=b.ry,a=b.xAxisRotation,i=void 0===a?0:a,c=b.largeArcFlag,h=void 0===c?0:c,f=b.sweepFlag,x=void 0===f?0:f,v=[];if(0===r||0===n)return[];var g=Math.sin(i*k/360),y=Math.cos(i*k/360),p=y*(d-t)/2+g*(s-o)/2,m=-g*(d-t)/2+y*(s-o)/2;if(0===p&&0===m)return[];r=Math.abs(r),n=Math.abs(n);var w=Math.pow(p,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);w>1&&(r*=Math.sqrt(w),n*=Math.sqrt(w));var S=function(R,H){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(F,U){var B=[],N=!0,J=!1,Z=void 0;try{for(var V,W=F[Symbol.iterator]();!(N=(V=W.next()).done)&&(B.push(V.value),4!==B.length);N=!0);}catch(X){J=!0,Z=X}finally{try{!N&&W.return&&W.return()}finally{if(J)throw Z}}return B}(R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(R,H,F,U,B,N,J,Z,V,W,X,K){var ne=Math.pow(B,2),re=Math.pow(N,2),ae=Math.pow(X,2),le=Math.pow(K,2),pe=ne*re-ne*le-re*ae;pe<0&&(pe=0),pe/=ne*le+re*ae;var xe=(pe=Math.sqrt(pe)*(J===Z?-1:1))*B/N*K,ye=pe*-N/B*X,se=W*xe-V*ye+(R+F)/2,fe=V*xe+W*ye+(H+U)/2,Ee=(X-xe)/B,de=(K-ye)/N,we=(-X-xe)/B,ke=(-K-ye)/N,Te=T(1,0,Ee,de),$=T(Ee,de,we,ke);return 0===Z&&$>0&&($-=k),1===Z&&$<0&&($+=k),[se,fe,Te,$]}(d,s,t,o,r,n,h,x,g,y,p,m)),_=S[0],E=S[1],L=S[2],C=S[3],P=Math.abs(C)/(k/4);Math.abs(1-P)<1e-7&&(P=1);var I=Math.max(Math.ceil(P),1);C/=I;for(var j=0;j<I;j++)v.push(l(L,C)),L+=C;return v.map(function(R){var H=A(R[0],r,n,y,g,_,E),F=H.x,U=H.y,B=A(R[1],r,n,y,g,_,E),N=B.x,J=B.y,Z=A(R[2],r,n,y,g,_,E);return{x1:F,y1:U,x2:N,y2:J,x:Z.x,y:Z.y}})}},1750:function(Q,z,e){"use strict";var k=e(95616),A=e(65185),l=e(29988),T=e(89546),b=e(32791);Q.exports=function(d){if(Array.isArray(d)&&1===d.length&&"string"==typeof d[0]&&(d=d[0]),"string"==typeof d&&(b(T(d),"String is not an SVG path."),d=k(d)),b(Array.isArray(d),"Argument should be a string or an array of path segments."),d=A(d),!(d=l(d)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,o=d.length;t<o;t++)for(var r=d[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function(Q,z,e){"use strict";Q.exports=function(T){for(var b,d=[],s=0,t=0,o=0,r=0,n=null,a=null,i=0,c=0,h=0,f=T.length;h<f;h++){var x=T[h],v=x[0];switch(v){case"M":o=x[1],r=x[2];break;case"A":var g=k({px:i,py:c,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!g.length)continue;for(var y,p=0;p<g.length;p++)x=["C",(y=g[p]).x1,y.y1,y.x2,y.y2,y.x,y.y],p<g.length-1&&d.push(x);break;case"S":var m=i,w=c;"C"!=b&&"S"!=b||(m+=m-s,w+=w-t),x=["C",m,w,x[1],x[2],x[3],x[4]];break;case"T":"Q"==b||"T"==b?(n=2*i-n,a=2*c-a):(n=i,a=c),x=l(i,c,n,a,x[1],x[2]);break;case"Q":n=x[1],a=x[2],x=l(i,c,x[1],x[2],x[3],x[4]);break;case"L":x=A(i,c,x[1],x[2]);break;case"H":x=A(i,c,x[1],c);break;case"V":x=A(i,c,i,x[1]);break;case"Z":x=A(i,c,o,r)}b=v,i=x[x.length-2],c=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=i,t=c),d.push(x)}return d};var k=e(7095);function A(T,b,d,s){return["C",T,b,d,s,d,s]}function l(T,b,d,s,t,o){return["C",T/3+.6666666666666666*d,b/3+.6666666666666666*s,t/3+.6666666666666666*d,o/3+.6666666666666666*s,t,o]}},82019:function(Q,z,e){"use strict";var k,A=e(1750),l=e(95616),T=e(31457),b=e(89546),d=e(44781),s=document.createElement("canvas"),t=s.getContext("2d");Q.exports=function(o,r){if(!b(o))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var i=Math.min(n,a),c=r.stroke||0,h=r.viewbox||r.viewBox||A(o),f=[n/(h[2]-h[0]),a/(h[3]-h[1])],x=Math.min(f[0]||0,f[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",c&&("number"!=typeof c&&(c=1),t.strokeStyle=c>0?"white":"black",t.lineWidth=Math.abs(c)),t.translate(.5*n,.5*a),t.scale(x,x),function(){if(null!=k)return k;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return k=!1;var p=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(p);var m=y.getImageData(0,0,1,1);return k=m&&m.data&&255===m.data[3]}()){var v=new Path2D(o);t.fill(v),c&&t.stroke(v)}else{var g=l(o);T(t,g),t.fill(),c&&t.stroke()}return t.setTransform(1,0,0,1,0,0),d(t,{cutoff:null!=r.cutoff?r.cutoff:.5,radius:null!=r.radius?r.radius:.5*i})}},84267:function(Q,z,e){var k;!function(A){var l=/^\s+/,T=/\s+$/,b=0,d=A.round,s=A.min,t=A.max,o=A.random;function r(X,K){if(K=K||{},(X=X||"")instanceof r)return X;if(!(this instanceof r))return new r(X,K);var re,le,pe,xe,ye,se,fe,Ee,de,we,ne=(xe={r:0,g:0,b:0},ye=1,se=null,fe=null,Ee=null,de=!1,we=!1,"string"==typeof(re=X)&&(re=function(ke){ke=ke.replace(l,"").replace(T,"").toLowerCase();var Te,$=!1;if(L[ke])ke=L[ke],$=!0;else if("transparent"==ke)return{r:0,g:0,b:0,a:0,format:"name"};return(Te=V.rgb.exec(ke))?{r:Te[1],g:Te[2],b:Te[3]}:(Te=V.rgba.exec(ke))?{r:Te[1],g:Te[2],b:Te[3],a:Te[4]}:(Te=V.hsl.exec(ke))?{h:Te[1],s:Te[2],l:Te[3]}:(Te=V.hsla.exec(ke))?{h:Te[1],s:Te[2],l:Te[3],a:Te[4]}:(Te=V.hsv.exec(ke))?{h:Te[1],s:Te[2],v:Te[3]}:(Te=V.hsva.exec(ke))?{h:Te[1],s:Te[2],v:Te[3],a:Te[4]}:(Te=V.hex8.exec(ke))?{r:R(Te[1]),g:R(Te[2]),b:R(Te[3]),a:B(Te[4]),format:$?"name":"hex8"}:(Te=V.hex6.exec(ke))?{r:R(Te[1]),g:R(Te[2]),b:R(Te[3]),format:$?"name":"hex"}:(Te=V.hex4.exec(ke))?{r:R(Te[1]+""+Te[1]),g:R(Te[2]+""+Te[2]),b:R(Te[3]+""+Te[3]),a:B(Te[4]+""+Te[4]),format:$?"name":"hex8"}:!!(Te=V.hex3.exec(ke))&&{r:R(Te[1]+""+Te[1]),g:R(Te[2]+""+Te[2]),b:R(Te[3]+""+Te[3]),format:$?"name":"hex"}}(re)),"object"==typeof re&&(W(re.r)&&W(re.g)&&W(re.b)?(le=re.g,pe=re.b,xe={r:255*I(re.r,255),g:255*I(le,255),b:255*I(pe,255)},de=!0,we="%"===String(re.r).substr(-1)?"prgb":"rgb"):W(re.h)&&W(re.s)&&W(re.v)?(se=F(re.s),fe=F(re.v),xe=function(ke,Te,$){ke=6*I(ke,360),Te=I(Te,100),$=I($,100);var oe=A.floor(ke),he=ke-oe,me=$*(1-Te),Me=$*(1-he*Te),Ie=$*(1-(1-he)*Te),Pe=oe%6;return{r:255*[$,Me,me,me,Ie,$][Pe],g:255*[Ie,$,$,Me,me,me][Pe],b:255*[me,me,Ie,$,$,Me][Pe]}}(re.h,se,fe),de=!0,we="hsv"):W(re.h)&&W(re.s)&&W(re.l)&&(se=F(re.s),Ee=F(re.l),xe=function(ke,Te,$){var oe,he,me;function Me(ze,ce,ge){return ge<0&&(ge+=1),ge>1&&(ge-=1),ge<1/6?ze+6*(ce-ze)*ge:ge<.5?ce:ge<2/3?ze+(ce-ze)*(2/3-ge)*6:ze}if(ke=I(ke,360),Te=I(Te,100),$=I($,100),0===Te)oe=he=me=$;else{var Ie=$<.5?$*(1+Te):$+Te-$*Te,Pe=2*$-Ie;oe=Me(Pe,Ie,ke+1/3),he=Me(Pe,Ie,ke),me=Me(Pe,Ie,ke-1/3)}return{r:255*oe,g:255*he,b:255*me}}(re.h,se,Ee),de=!0,we="hsl"),re.hasOwnProperty("a")&&(ye=re.a)),ye=P(ye),{ok:de,format:re.format||we,r:s(255,t(xe.r,0)),g:s(255,t(xe.g,0)),b:s(255,t(xe.b,0)),a:ye});this._originalInput=X,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=d(100*this._a)/100,this._format=K.format||ne.format,this._gradientType=K.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=ne.ok,this._tc_id=b++}function n(X,K,ne){X=I(X,255),K=I(K,255),ne=I(ne,255);var re,ae,le=t(X,K,ne),pe=s(X,K,ne),xe=(le+pe)/2;if(le==pe)re=ae=0;else{var ye=le-pe;switch(ae=xe>.5?ye/(2-le-pe):ye/(le+pe),le){case X:re=(K-ne)/ye+(K<ne?6:0);break;case K:re=(ne-X)/ye+2;break;case ne:re=(X-K)/ye+4}re/=6}return{h:re,s:ae,l:xe}}function a(X,K,ne){X=I(X,255),K=I(K,255),ne=I(ne,255);var re,ae,le=t(X,K,ne),pe=s(X,K,ne),xe=le,ye=le-pe;if(ae=0===le?0:ye/le,le==pe)re=0;else{switch(le){case X:re=(K-ne)/ye+(K<ne?6:0);break;case K:re=(ne-X)/ye+2;break;case ne:re=(X-K)/ye+4}re/=6}return{h:re,s:ae,v:xe}}function i(X,K,ne,re){var ae=[H(d(X).toString(16)),H(d(K).toString(16)),H(d(ne).toString(16))];return re&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function c(X,K,ne,re){return[H(U(re)),H(d(X).toString(16)),H(d(K).toString(16)),H(d(ne).toString(16))].join("")}function h(X,K){K=0===K?0:K||10;var ne=r(X).toHsl();return ne.s-=K/100,ne.s=j(ne.s),r(ne)}function f(X,K){K=0===K?0:K||10;var ne=r(X).toHsl();return ne.s+=K/100,ne.s=j(ne.s),r(ne)}function x(X){return r(X).desaturate(100)}function v(X,K){K=0===K?0:K||10;var ne=r(X).toHsl();return ne.l+=K/100,ne.l=j(ne.l),r(ne)}function g(X,K){K=0===K?0:K||10;var ne=r(X).toRgb();return ne.r=t(0,s(255,ne.r-d(-K/100*255))),ne.g=t(0,s(255,ne.g-d(-K/100*255))),ne.b=t(0,s(255,ne.b-d(-K/100*255))),r(ne)}function y(X,K){K=0===K?0:K||10;var ne=r(X).toHsl();return ne.l-=K/100,ne.l=j(ne.l),r(ne)}function p(X,K){var ne=r(X).toHsl(),re=(ne.h+K)%360;return ne.h=re<0?360+re:re,r(ne)}function m(X){var K=r(X).toHsl();return K.h=(K.h+180)%360,r(K)}function w(X){var K=r(X).toHsl(),ne=K.h;return[r(X),r({h:(ne+120)%360,s:K.s,l:K.l}),r({h:(ne+240)%360,s:K.s,l:K.l})]}function u(X){var K=r(X).toHsl(),ne=K.h;return[r(X),r({h:(ne+90)%360,s:K.s,l:K.l}),r({h:(ne+180)%360,s:K.s,l:K.l}),r({h:(ne+270)%360,s:K.s,l:K.l})]}function S(X){var K=r(X).toHsl(),ne=K.h;return[r(X),r({h:(ne+72)%360,s:K.s,l:K.l}),r({h:(ne+216)%360,s:K.s,l:K.l})]}function _(X,K,ne){K=K||6,ne=ne||30;var re=r(X).toHsl(),ae=360/ne,le=[r(X)];for(re.h=(re.h-(ae*K>>1)+720)%360;--K;)re.h=(re.h+ae)%360,le.push(r(re));return le}function E(X,K){K=K||6;for(var ne=r(X).toHsv(),re=ne.h,ae=ne.s,le=ne.v,pe=[],xe=1/K;K--;)pe.push(r({h:re,s:ae,v:le})),le=(le+xe)%1;return pe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(299*X.r+587*X.g+114*X.b)/1e3},getLuminance:function(){var X,K,ne,re=this.toRgb();return K=re.g/255,ne=re.b/255,.2126*((X=re.r/255)<=.03928?X/12.92:A.pow((X+.055)/1.055,2.4))+.7152*(K<=.03928?K/12.92:A.pow((K+.055)/1.055,2.4))+.0722*(ne<=.03928?ne/12.92:A.pow((ne+.055)/1.055,2.4))},setAlpha:function(X){return this._a=P(X),this._roundA=d(100*this._a)/100,this},toHsv:function(){var X=a(this._r,this._g,this._b);return{h:360*X.h,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=a(this._r,this._g,this._b),K=d(360*X.h),ne=d(100*X.s),re=d(100*X.v);return 1==this._a?"hsv("+K+", "+ne+"%, "+re+"%)":"hsva("+K+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var X=n(this._r,this._g,this._b);return{h:360*X.h,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=n(this._r,this._g,this._b),K=d(360*X.h),ne=d(100*X.s),re=d(100*X.l);return 1==this._a?"hsl("+K+", "+ne+"%, "+re+"%)":"hsla("+K+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHex:function(X){return i(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+this.toHex(X)},toHex8:function(X){return ne=this._g,re=this._b,ae=this._a,le=X,pe=[H(d(this._r).toString(16)),H(d(ne).toString(16)),H(d(re).toString(16)),H(U(ae))],le&&pe[0].charAt(0)==pe[0].charAt(1)&&pe[1].charAt(0)==pe[1].charAt(1)&&pe[2].charAt(0)==pe[2].charAt(1)&&pe[3].charAt(0)==pe[3].charAt(1)?pe[0].charAt(0)+pe[1].charAt(0)+pe[2].charAt(0)+pe[3].charAt(0):pe.join("");var ne,re,ae,le,pe},toHex8String:function(X){return"#"+this.toHex8(X)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*I(this._r,255))+"%",g:d(100*I(this._g,255))+"%",b:d(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%)":"rgba("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(X){var K="#"+c(this._r,this._g,this._b,this._a),ne=K,re=this._gradientType?"GradientType = 1, ":"";if(X){var ae=r(X);ne="#"+c(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+K+",endColorstr="+ne+")"},toString:function(X){var K=!!X;X=X||this._format;var ne=!1;return K||!(this._a<1&&this._a>=0)||"hex"!==X&&"hex6"!==X&&"hex3"!==X&&"hex4"!==X&&"hex8"!==X&&"name"!==X?("rgb"===X&&(ne=this.toRgbString()),"prgb"===X&&(ne=this.toPercentageRgbString()),"hex"!==X&&"hex6"!==X||(ne=this.toHexString()),"hex3"===X&&(ne=this.toHexString(!0)),"hex4"===X&&(ne=this.toHex8String(!0)),"hex8"===X&&(ne=this.toHex8String()),"name"===X&&(ne=this.toName()),"hsl"===X&&(ne=this.toHslString()),"hsv"===X&&(ne=this.toHsvString()),ne||this.toHexString()):"name"===X&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(X,K){var ne=X.apply(null,[this].concat([].slice.call(K)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(X,K){return X.apply(null,[this].concat([].slice.call(K)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}},r.fromRatio=function(X,K){if("object"==typeof X){var ne={};for(var re in X)X.hasOwnProperty(re)&&(ne[re]="a"===re?X[re]:F(X[re]));X=ne}return r(X,K)},r.equals=function(X,K){return!(!X||!K)&&r(X).toRgbString()==r(K).toRgbString()},r.random=function(){return r.fromRatio({r:o(),g:o(),b:o()})},r.mix=function(X,K,ne){ne=0===ne?0:ne||50;var re=r(X).toRgb(),ae=r(K).toRgb(),le=ne/100;return r({r:(ae.r-re.r)*le+re.r,g:(ae.g-re.g)*le+re.g,b:(ae.b-re.b)*le+re.b,a:(ae.a-re.a)*le+re.a})},r.readability=function(X,K){var ne=r(X),re=r(K);return(A.max(ne.getLuminance(),re.getLuminance())+.05)/(A.min(ne.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(X,K,ne){var re,ae,le,pe,xe,ye=r.readability(X,K);switch(ae=!1,(le=ne,"AA"!==(pe=((le=le||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==pe&&(pe="AA"),"small"!==(xe=(le.size||"small").toLowerCase())&&"large"!==xe&&(xe="small"),re={level:pe,size:xe}).level+re.size){case"AAsmall":case"AAAlarge":ae=ye>=4.5;break;case"AAlarge":ae=ye>=3;break;case"AAAsmall":ae=ye>=7}return ae},r.mostReadable=function(X,K,ne){var re,ae,le,pe,xe=null,ye=0;ae=(ne=ne||{}).includeFallbackColors,le=ne.level,pe=ne.size;for(var se=0;se<K.length;se++)(re=r.readability(X,K[se]))>ye&&(ye=re,xe=r(K[se]));return r.isReadable(X,xe,{level:le,size:pe})||!ae?xe:(ne.includeFallbackColors=!1,r.mostReadable(X,["#fff","#000"],ne))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(X){var K={};for(var ne in X)X.hasOwnProperty(ne)&&(K[X[ne]]=ne);return K}(L);function P(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function I(X,K){var re;"string"==typeof(re=X)&&-1!=re.indexOf(".")&&1===parseFloat(re)&&(X="100%");var ne=function(re){return"string"==typeof re&&-1!=re.indexOf("%")}(X);return X=s(K,t(0,parseFloat(X))),ne&&(X=parseInt(X*K,10)/100),A.abs(X-K)<1e-6?1:X%K/parseFloat(K)}function j(X){return s(1,t(0,X))}function R(X){return parseInt(X,16)}function H(X){return 1==X.length?"0"+X:""+X}function F(X){return X<=1&&(X=100*X+"%"),X}function U(X){return A.round(255*parseFloat(X)).toString(16)}function B(X){return R(X)/255}var N,J,Z,V=(J="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",Z="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+Z),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+Z),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+Z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(X){return!!V.CSS_UNIT.exec(X)}Q.exports?Q.exports=r:void 0===(k=function(){return r}.call(z,e,z,Q))||(Q.exports=k)}(Math)},57060:function(Q){"use strict";Q.exports=e,Q.exports.float32=Q.exports.float=e,Q.exports.fract32=Q.exports.fract=function(k,A){if(k.length){if(k instanceof Float32Array)return new Float32Array(k.length);A instanceof Float32Array||(A=e(k));for(var l=0,T=A.length;l<T;l++)A[l]=k[l]-A[l];return A}return e(k-e(k))};var z=new Float32Array(1);function e(k){return k.length?k instanceof Float32Array?k:new Float32Array(k):(z[0]=k,z[0])}},75686:function(Q,z,e){"use strict";var k=e(25677);function A(T,b){var d=k(getComputedStyle(T).getPropertyValue(b));return d[0]*l(d[1],T)}function l(T,b){switch(b=b||document.body,T=(T||"px").trim().toLowerCase(),b!==window&&b!==document||(b=document.body),T){case"%":return b.clientHeight/100;case"ch":case"ex":return function(d,s){var t=document.createElement("div");t.style["font-size"]="128"+d,s.appendChild(t);var o=A(t,"font-size")/128;return s.removeChild(t),o}(T,b);case"em":return A(b,"font-size");case"rem":return A(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}Q.exports=l},96892:function(Q,z,e){"use strict";function k(T){return T}function A(T,b){return"string"==typeof b&&(b=T.objects[b]),"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(d){return l(T,d)})}:l(T,b)}function l(T,b){var d=b.id,s=b.bbox,t=null==b.properties?{}:b.properties,o=function(r,n){var a=function(g){if(null==g)return k;var y,p,m=g.scale[0],w=g.scale[1],u=g.translate[0],S=g.translate[1];return function(_,E){E||(y=p=0);var L=2,C=_.length,P=new Array(C);for(P[0]=(y+=_[0])*m+u,P[1]=(p+=_[1])*w+S;L<C;)P[L]=_[L],++L;return P}}(r.transform),i=r.arcs;function c(g,y){y.length&&y.pop();for(var p=i[g<0?~g:g],m=0,w=p.length;m<w;++m)y.push(a(p[m],m));g<0&&function(u,S){for(var _,E=u.length,L=E-S;L<--E;)_=u[L],u[L++]=u[E],u[E]=_}(y,w)}function h(g){return a(g)}function f(g){for(var y=[],p=0,m=g.length;p<m;++p)c(g[p],y);return y.length<2&&y.push(y[0]),y}function x(g){for(var y=f(g);y.length<4;)y.push(y[0]);return y}function v(g){return g.map(x)}return function g(y){var p,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(g)};case"Point":p=h(y.coordinates);break;case"MultiPoint":p=y.coordinates.map(h);break;case"LineString":p=f(y.arcs);break;case"MultiLineString":p=y.arcs.map(f);break;case"Polygon":p=v(y.arcs);break;case"MultiPolygon":p=y.arcs.map(v);break;default:return null}return{type:m,coordinates:p}}(n)}(T,b);return null==d&&null==s?{type:"Feature",properties:t,geometry:o}:null==s?{type:"Feature",id:d,properties:t,geometry:o}:{type:"Feature",id:d,bbox:s,properties:t,geometry:o}}e.d(z,{zL:function(){return A}})},73116:function(Q,z,e){"use strict";var k=e(24511);Q.exports=function(A){if("function"!=typeof A||!hasOwnProperty.call(A,"length"))return!1;try{if("number"!=typeof A.length||"function"!=typeof A.call||"function"!=typeof A.apply)return!1}catch{return!1}return!k(A)}},69190:function(Q,z,e){"use strict";var k=e(24582),A=e(47403),l=e(9234),T=e(6048),b=function(d,s){return d.replace("%v",T(s))};Q.exports=function(d,s,t){if(!A(t))throw new TypeError(b(s,d));if(!k(d)){if("default"in t)return t.default;if(t.isOptional)return null}var o=l(t.errorMessage);throw k(o)||(o=s),new TypeError(b(o,d))}},18497:function(Q){"use strict";Q.exports=function(z){try{return z.toString()}catch{try{return String(z)}catch{return null}}}},6048:function(Q,z,e){"use strict";var k=e(18497),A=/[\n\r\u2028\u2029]/g;Q.exports=function(l){var T=k(l);return null===T?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(A,function(b){switch(b){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(Q,z,e){"use strict";var k=e(24582),A={object:!0,function:!0,undefined:!0};Q.exports=function(l){return!!k(l)&&hasOwnProperty.call(A,typeof l)}},82527:function(Q,z,e){"use strict";var k=e(69190),A=e(84985);Q.exports=function(l){return A(l)?l:k(l,"%v is not a plain function",arguments[1])}},84985:function(Q,z,e){"use strict";var k=e(73116),A=/^\s*class[\s{/}]/,l=Function.prototype.toString;Q.exports=function(T){return!!k(T)&&!A.test(l.call(T))}},24511:function(Q,z,e){"use strict";var k=e(47403);Q.exports=function(A){if(!k(A))return!1;try{return!!A.constructor&&A.constructor.prototype===A}catch{return!1}}},9234:function(Q,z,e){"use strict";var k=e(24582),A=e(47403),l=Object.prototype.toString;Q.exports=function(T){if(!k(T))return null;if(A(T)){var b=T.toString;if("function"!=typeof b||b===l)return null}try{return""+T}catch{return null}}},10424:function(Q,z,e){"use strict";var k=e(69190),A=e(24582);Q.exports=function(l){return A(l)?l:k(l,"Cannot use %v",arguments[1])}},24582:function(Q){"use strict";Q.exports=function(z){return null!=z}},58404:function(Q,z,e){"use strict";var k=e(13547),A=e(12129),l=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=A([32,0])),s.BIGUINT64||(s.BIGUINT64=A([32,0])),s.BIGINT64||(s.BIGINT64=A([32,0])),s.BUFFER||(s.BUFFER=A([32,0]));var t=s.DATA,o=s.BUFFER;function r(S){if(S){var E=k.log2(S.length||S.byteLength);t[E].push(S)}}function n(S){S=k.nextPow2(S);var _=k.log2(S),E=t[_];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(n(S),0,S)}function i(S){return new Uint16Array(n(2*S),0,S)}function c(S){return new Uint32Array(n(4*S),0,S)}function h(S){return new Int8Array(n(S),0,S)}function f(S){return new Int16Array(n(2*S),0,S)}function x(S){return new Int32Array(n(4*S),0,S)}function v(S){return new Float32Array(n(4*S),0,S)}function g(S){return new Float64Array(n(8*S),0,S)}function y(S){return T?new Uint8ClampedArray(n(S),0,S):a(S)}function p(S){return b?new BigUint64Array(n(8*S),0,S):null}function m(S){return d?new BigInt64Array(n(8*S),0,S):null}function w(S){return new DataView(n(S),0,S)}function u(S){S=k.nextPow2(S);var _=k.log2(S),E=o[_];return E.length>0?E.pop():new l(S)}z.free=function(S){if(l.isBuffer(S))o[k.log2(S.length)].push(S);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(S)&&(S=S.buffer),!S)return;var E=0|k.log2(S.length||S.byteLength);t[E].push(S)}},z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=function(S){r(S.buffer)},z.freeArrayBuffer=r,z.freeBuffer=function(S){o[k.log2(S.length)].push(S)},z.malloc=function(S,_){if(void 0===_||"arraybuffer"===_)return n(S);switch(_){case"uint8":return a(S);case"uint16":return i(S);case"uint32":return c(S);case"int8":return h(S);case"int16":return f(S);case"int32":return x(S);case"float":case"float32":return v(S);case"double":case"float64":return g(S);case"uint8_clamped":return y(S);case"bigint64":return m(S);case"biguint64":return p(S);case"buffer":return u(S);case"data":case"dataview":return w(S);default:return null}return null},z.mallocArrayBuffer=n,z.mallocUint8=a,z.mallocUint16=i,z.mallocUint32=c,z.mallocInt8=h,z.mallocInt16=f,z.mallocInt32=x,z.mallocFloat32=z.mallocFloat=v,z.mallocFloat64=z.mallocDouble=g,z.mallocUint8Clamped=y,z.mallocBigUint64=p,z.mallocBigInt64=m,z.mallocDataView=w,z.mallocBuffer=u,z.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,o[S].length=0}},90448:function(Q){var z=/[\'\"]/;Q.exports=function(e){return e?(z.test(e.charAt(0))&&(e=e.substr(1)),z.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function(Q){"use strict";Q.exports=function(z,e,k){Array.isArray(k)||(k=[].slice.call(arguments,2));for(var A=0,l=k.length;A<l;A++){var T=k[A];for(var b in T)if((void 0===e[b]||Array.isArray(e[b])||z[b]!==e[b])&&b in e){var d;if(!0===T[b])d=e[b];else if(!1===T[b]||"function"==typeof T[b]&&void 0===(d=T[b](e[b],z,e)))continue;z[b]=d}}return z}},20588:function(Q,z,e){function k(A){try{if(!e.g.localStorage)return!1}catch{return!1}var l=e.g.localStorage[A];return null!=l&&"true"===String(l).toLowerCase()}Q.exports=function(A,l){if(k("noDeprecation"))return A;var T=!1;return function(){if(!T){if(k("throwDeprecation"))throw new Error(l);k("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return A.apply(this,arguments)}}},45920:function(Q){Q.exports=function(z){return z&&"object"==typeof z&&"function"==typeof z.copy&&"function"==typeof z.fill&&"function"==typeof z.readUInt8}},4936:function(Q,z,e){"use strict";var k=e(47216),A=e(65481),l=e(21099),T=e(9187);function b(I){return I.call.bind(I)}var d=typeof BigInt<"u",s=typeof Symbol<"u",t=b(Object.prototype.toString),o=b(Number.prototype.valueOf),r=b(String.prototype.valueOf),n=b(Boolean.prototype.valueOf);if(d)var a=b(BigInt.prototype.valueOf);if(s)var i=b(Symbol.prototype.valueOf);function c(I,j){if("object"!=typeof I)return!1;try{return j(I),!0}catch{return!1}}function h(I){return"[object Map]"===t(I)}function f(I){return"[object Set]"===t(I)}function x(I){return"[object WeakMap]"===t(I)}function v(I){return"[object WeakSet]"===t(I)}function g(I){return"[object ArrayBuffer]"===t(I)}function y(I){return typeof ArrayBuffer<"u"&&(g.working?g(I):I instanceof ArrayBuffer)}function p(I){return"[object DataView]"===t(I)}function m(I){return typeof DataView<"u"&&(p.working?p(I):I instanceof DataView)}z.isArgumentsObject=k,z.isGeneratorFunction=A,z.isTypedArray=T,z.isPromise=function(I){return typeof Promise<"u"&&I instanceof Promise||null!==I&&"object"==typeof I&&"function"==typeof I.then&&"function"==typeof I.catch},z.isArrayBufferView=function(I){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(I):T(I)||m(I)},z.isUint8Array=function(I){return"Uint8Array"===l(I)},z.isUint8ClampedArray=function(I){return"Uint8ClampedArray"===l(I)},z.isUint16Array=function(I){return"Uint16Array"===l(I)},z.isUint32Array=function(I){return"Uint32Array"===l(I)},z.isInt8Array=function(I){return"Int8Array"===l(I)},z.isInt16Array=function(I){return"Int16Array"===l(I)},z.isInt32Array=function(I){return"Int32Array"===l(I)},z.isFloat32Array=function(I){return"Float32Array"===l(I)},z.isFloat64Array=function(I){return"Float64Array"===l(I)},z.isBigInt64Array=function(I){return"BigInt64Array"===l(I)},z.isBigUint64Array=function(I){return"BigUint64Array"===l(I)},h.working=typeof Map<"u"&&h(new Map),z.isMap=function(I){return typeof Map<"u"&&(h.working?h(I):I instanceof Map)},f.working=typeof Set<"u"&&f(new Set),z.isSet=function(I){return typeof Set<"u"&&(f.working?f(I):I instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),z.isWeakMap=function(I){return typeof WeakMap<"u"&&(x.working?x(I):I instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),z.isWeakSet=function(I){return v(I)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),z.isArrayBuffer=y,p.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&p(new DataView(new ArrayBuffer(1),0,1)),z.isDataView=m;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function u(I){return"[object SharedArrayBuffer]"===t(I)}function S(I){return void 0!==w&&(void 0===u.working&&(u.working=u(new w)),u.working?u(I):I instanceof w)}function _(I){return c(I,o)}function E(I){return c(I,r)}function L(I){return c(I,n)}function C(I){return d&&c(I,a)}function P(I){return s&&c(I,i)}z.isSharedArrayBuffer=S,z.isAsyncFunction=function(I){return"[object AsyncFunction]"===t(I)},z.isMapIterator=function(I){return"[object Map Iterator]"===t(I)},z.isSetIterator=function(I){return"[object Set Iterator]"===t(I)},z.isGeneratorObject=function(I){return"[object Generator]"===t(I)},z.isWebAssemblyCompiledModule=function(I){return"[object WebAssembly.Module]"===t(I)},z.isNumberObject=_,z.isStringObject=E,z.isBooleanObject=L,z.isBigIntObject=C,z.isSymbolObject=P,z.isBoxedPrimitive=function(I){return _(I)||E(I)||L(I)||C(I)||P(I)},z.isAnyArrayBuffer=function(I){return typeof Uint8Array<"u"&&(y(I)||S(I))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(I){Object.defineProperty(z,I,{enumerable:!1,value:function(){throw new Error(I+" is not supported in userland")}})})},43827:function(Q,z,e){var k=e(90386),A=Object.getOwnPropertyDescriptors||function(I){for(var j=Object.keys(I),R={},H=0;H<j.length;H++)R[j[H]]=Object.getOwnPropertyDescriptor(I,j[H]);return R},l=/%[sdj%]/g;z.format=function(I){if(!x(I)){for(var j=[],R=0;R<arguments.length;R++)j.push(s(arguments[R]));return j.join(" ")}R=1;for(var H=arguments,F=H.length,U=String(I).replace(l,function(N){if("%%"===N)return"%";if(R>=F)return N;switch(N){case"%s":return String(H[R++]);case"%d":return Number(H[R++]);case"%j":try{return JSON.stringify(H[R++])}catch{return"[Circular]"}default:return N}}),B=H[R];R<F;B=H[++R])h(B)||!y(B)?U+=" "+B:U+=" "+s(B);return U},z.deprecate=function(I,j){if(void 0!==k&&!0===k.noDeprecation)return I;if(void 0===k)return function(){return z.deprecate(I,j).apply(this,arguments)};var R=!1;return function(){if(!R){if(k.throwDeprecation)throw new Error(j);k.traceDeprecation?console.trace(j):console.error(j),R=!0}return I.apply(this,arguments)}};var T={},b=/^$/;if(k.env.NODE_DEBUG){var d=k.env.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+d+"$","i")}function s(I,j){var R={seen:[],stylize:o};return arguments.length>=3&&(R.depth=arguments[2]),arguments.length>=4&&(R.colors=arguments[3]),c(j)?R.showHidden=j:j&&z._extend(R,j),v(R.showHidden)&&(R.showHidden=!1),v(R.depth)&&(R.depth=2),v(R.colors)&&(R.colors=!1),v(R.customInspect)&&(R.customInspect=!0),R.colors&&(R.stylize=t),r(R,I,R.depth)}function t(I,j){var R=s.styles[j];return R?"\x1b["+s.colors[R][0]+"m"+I+"\x1b["+s.colors[R][1]+"m":I}function o(I,j){return I}function r(I,j,R){if(I.customInspect&&j&&w(j.inspect)&&j.inspect!==z.inspect&&(!j.constructor||j.constructor.prototype!==j)){var H=j.inspect(R,I);return x(H)||(H=r(I,H,R)),H}var F=function(X,K){if(v(K))return X.stylize("undefined","undefined");if(x(K)){var ne="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(ne,"string")}return f(K)?X.stylize(""+K,"number"):c(K)?X.stylize(""+K,"boolean"):h(K)?X.stylize("null","null"):void 0}(I,j);if(F)return F;var K,U=Object.keys(j),B=(K={},U.forEach(function(ne,re){K[ne]=!0}),K);if(I.showHidden&&(U=Object.getOwnPropertyNames(j)),m(j)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return n(j);if(0===U.length){if(w(j))return I.stylize("[Function"+(j.name?": "+j.name:"")+"]","special");if(g(j))return I.stylize(RegExp.prototype.toString.call(j),"regexp");if(p(j))return I.stylize(Date.prototype.toString.call(j),"date");if(m(j))return n(j)}var J,Z="",V=!1,W=["{","}"];return i(j)&&(V=!0,W=["[","]"]),w(j)&&(Z=" [Function"+(j.name?": "+j.name:"")+"]"),g(j)&&(Z=" "+RegExp.prototype.toString.call(j)),p(j)&&(Z=" "+Date.prototype.toUTCString.call(j)),m(j)&&(Z=" "+n(j)),0!==U.length||V&&0!=j.length?R<0?g(j)?I.stylize(RegExp.prototype.toString.call(j),"regexp"):I.stylize("[Object]","special"):(I.seen.push(j),J=V?function(X,K,ne,re,ae){for(var le=[],pe=0,xe=K.length;pe<xe;++pe)L(K,String(pe))?le.push(a(X,K,ne,re,String(pe),!0)):le.push("");return ae.forEach(function(ye){ye.match(/^\d+$/)||le.push(a(X,K,ne,re,ye,!0))}),le}(I,j,R,B,U):U.map(function(X){return a(I,j,R,B,X,V)}),I.seen.pop(),function(X,K,ne){return X.reduce(function(re,ae){return ae.indexOf("\n"),re+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ne[0]+(""===K?"":K+"\n ")+" "+X.join(",\n  ")+" "+ne[1]:ne[0]+K+" "+X.join(", ")+" "+ne[1]}(J,Z,W)):W[0]+Z+W[1]}function n(I){return"["+Error.prototype.toString.call(I)+"]"}function a(I,j,R,H,F,U){var B,N,J;if((J=Object.getOwnPropertyDescriptor(j,F)||{value:j[F]}).get?N=I.stylize(J.set?"[Getter/Setter]":"[Getter]","special"):J.set&&(N=I.stylize("[Setter]","special")),L(H,F)||(B="["+F+"]"),N||(I.seen.indexOf(J.value)<0?(N=h(R)?r(I,J.value,null):r(I,J.value,R-1)).indexOf("\n")>-1&&(N=U?N.split("\n").map(function(Z){return"  "+Z}).join("\n").slice(2):"\n"+N.split("\n").map(function(Z){return"   "+Z}).join("\n")):N=I.stylize("[Circular]","special")),v(B)){if(U&&F.match(/^\d+$/))return N;(B=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=I.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=I.stylize(B,"string"))}return B+": "+N}function i(I){return Array.isArray(I)}function c(I){return"boolean"==typeof I}function h(I){return null===I}function f(I){return"number"==typeof I}function x(I){return"string"==typeof I}function v(I){return void 0===I}function g(I){return y(I)&&"[object RegExp]"===u(I)}function y(I){return"object"==typeof I&&null!==I}function p(I){return y(I)&&"[object Date]"===u(I)}function m(I){return y(I)&&("[object Error]"===u(I)||I instanceof Error)}function w(I){return"function"==typeof I}function u(I){return Object.prototype.toString.call(I)}function S(I){return I<10?"0"+I.toString(10):I.toString(10)}z.debuglog=function(I){if(I=I.toUpperCase(),!T[I])if(b.test(I)){var j=k.pid;T[I]=function(){var R=z.format.apply(z,arguments);console.error("%s %d: %s",I,j,R)}}else T[I]=function(){};return T[I]},z.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},z.types=e(4936),z.isArray=i,z.isBoolean=c,z.isNull=h,z.isNullOrUndefined=function(I){return null==I},z.isNumber=f,z.isString=x,z.isSymbol=function(I){return"symbol"==typeof I},z.isUndefined=v,z.isRegExp=g,z.types.isRegExp=g,z.isObject=y,z.isDate=p,z.types.isDate=p,z.isError=m,z.types.isNativeError=m,z.isFunction=w,z.isPrimitive=function(I){return null===I||"boolean"==typeof I||"number"==typeof I||"string"==typeof I||"symbol"==typeof I||void 0===I},z.isBuffer=e(45920);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(I,j){return Object.prototype.hasOwnProperty.call(I,j)}z.log=function(){console.log("%s - %s",function E(){var I=new Date,j=[S(I.getHours()),S(I.getMinutes()),S(I.getSeconds())].join(":");return[I.getDate(),_[I.getMonth()],j].join(" ")}(),z.format.apply(z,arguments))},z.inherits=e(42018),z._extend=function(I,j){if(!j||!y(j))return I;for(var R=Object.keys(j),H=R.length;H--;)I[R[H]]=j[R[H]];return I};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(I,j){if(!I){var R=new Error("Promise was rejected with a falsy value");R.reason=I,I=R}return j(I)}z.promisify=function(I){if("function"!=typeof I)throw new TypeError('The "original" argument must be of type Function');if(C&&I[C]){var j;if("function"!=typeof(j=I[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(j,C,{value:j,enumerable:!1,writable:!1,configurable:!0}),j}function j(){for(var R,H,F=new Promise(function(N,J){R=N,H=J}),U=[],B=0;B<arguments.length;B++)U.push(arguments[B]);U.push(function(N,J){N?H(N):R(J)});try{I.apply(this,U)}catch(N){H(N)}return F}return Object.setPrototypeOf(j,Object.getPrototypeOf(I)),C&&Object.defineProperty(j,C,{value:j,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(j,A(I))},z.promisify.custom=C,z.callbackify=function(I){if("function"!=typeof I)throw new TypeError('The "original" argument must be of type Function');function j(){for(var R=[],H=0;H<arguments.length;H++)R.push(arguments[H]);var F=R.pop();if("function"!=typeof F)throw new TypeError("The last argument must be of type Function");var U=this,B=function(){return F.apply(U,arguments)};I.apply(this,R).then(function(N){k.nextTick(B.bind(null,null,N))},function(N){k.nextTick(P.bind(null,N,B))})}return Object.setPrototypeOf(j,Object.getPrototypeOf(I)),Object.defineProperties(j,A(I)),j}},40372:function(Q,z,e){var k=e(86249);Q.exports=function(A){return k("webgl",A)}},21099:function(Q,z,e){"use strict";var k=e(86165),A=e(72077),l=e(92978),T=l("Object.prototype.toString"),b=e(57877)()&&"symbol"==typeof Symbol.toStringTag,d=A(),s=l("String.prototype.slice"),t={},o=e(67295),r=Object.getPrototypeOf;b&&o&&r&&k(d,function(a){if("function"==typeof e.g[a]){var i=new e.g[a];if(!(Symbol.toStringTag in i))throw new EvalError("this engine has support for Symbol.toStringTag, but "+a+" does not have the property! Please report this.");var c=r(i),h=o(c,Symbol.toStringTag);if(!h){var f=r(c);h=o(f,Symbol.toStringTag)}t[a]=h.get}});var n=e(9187);Q.exports=function(a){return!!n(a)&&(b?(i=a,c=!1,k(t,function(h,f){if(!c)try{var x=h.call(i);x===f&&(c=x)}catch{}}),c):s(T(a),8,-1));var i,c}},3961:function(Q,z,e){var k=e(63489),A=e(56131),l=k.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}A(T.prototype=new k.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if("string"==typeof n){var i=n.match(d);return i?i[0]:""}var c=this._validateYear(n),h=n.month(),f=""+this.toChineseMonth(c,h);return a&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(c,h)&&(f+="i"),f},monthNames:function(n){if("string"==typeof n){var a=n.match(s);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h="\u95f0"+h),h},monthNamesShort:function(n){if("string"==typeof n){var a=n.match(t);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h="\u95f0"+h),h},parseMonth:function(n,a){n=this._validateYear(n);var i,c=parseInt(a);if(isNaN(c))"\u95f0"===a[0]&&(i=!0,a=a.substring(1)),"\u6708"===a[a.length-1]&&(a=a.substring(0,a.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(a);else{var h=a[a.length-1];i="i"===h||"I"===h}return this.toMonthIndex(n,c,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),"number"!=typeof n||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,i){var c=this.intercalaryMonth(n);if(i&&a!==c||a<1||a>12)throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!i&&a<=c?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);if(a<0||a>(i?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?a<i?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),o[n-o[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);return!!i&&i===a},leapYear:function(n){return 0!==this.intercalaryMonth(n)},weekOfYear:function(n,a,i){var c,h=this._validateYear(n,k.local.invalidyear),f=r[h-r[0]];(c=l.newDate(f>>9&4095,f>>5&15,31&f)).add(4-(c.dayOfWeek()||7),"d");var y=this.toJD(n,a,i)-c.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var i=o[n-o[0]];if(a>(i>>13?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-a?30:29},weekDay:function(n,a,i){return(this.dayOfWeek(n,a,i)||7)<6},toJD:function(n,a,i){var c=this._validate(n,f,i,k.local.invalidDate);n=this._validateYear(c.year()),a=c.month(),i=c.day();var h=this.isIntercalaryMonth(n,a),f=this.toChineseMonth(n,a),x=function(v,g,y,p,m){var w,u,S;if("object"==typeof v)u=v,w=g||{};else{var _;if(!("number"==typeof v&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof g&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof p?(_=!1,w=p):(_=!!p,w={}),u={year:v,month:g,day:y,isIntercalary:_}}S=u.day-1;var E,L=o[u.year-o[0]],C=L>>13;E=C&&(u.month>C||u.isIntercalary)?u.month:u.month-1;for(var P=0;P<E;P++)S+=L&1<<12-P?30:29;var I=r[u.year-r[0]],j=new Date(I>>9&4095,(I>>5&15)-1,(31&I)+S);return w.year=j.getFullYear(),w.month=1+j.getMonth(),w.day=j.getDate(),w}(n,f,i,h);return l.toJD(x.year,x.month,x.day)},fromJD:function(n){var a=l.fromJD(n),i=function(h,f,x,v){var g,y;if("object"==typeof h)g=h,y=f||{};else{if(!("number"==typeof h&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof f&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof x&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");g={year:h,month:f,day:x},y={}}var p=r[g.year-r[0]];y.year=(g.year<<9|g.month<<5|g.day)>=p?g.year:g.year-1,p=r[y.year-r[0]];var w,u=new Date(p>>9&4095,(p>>5&15)-1,31&p),S=new Date(g.year,g.month-1,g.day);w=Math.round((S-u)/864e5);var _,E=o[y.year-o[0]];for(_=0;_<13;_++){var L=E&1<<12-_?30:29;if(w<L)break;w-=L}var C=E>>13;return!C||_<C?(y.isIntercalary=!1,y.month=1+_):_===C?(y.isIntercalary=!0,y.month=_):(y.isIntercalary=!1,y.month=_),y.day=1+w,y}(a.year(),a.month(),a.day()),c=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,c,i.day)},fromString:function(n){var a=n.match(b),i=this._validateYear(+a[1]),f=this.toMonthIndex(i,+a[2],!!a[3]);return this.newDate(i,f,+a[4])},add:function(n,a,i){var c=n.year(),h=n.month(),f=this.isIntercalaryMonth(c,h),x=this.toChineseMonth(c,h),v=Object.getPrototypeOf(T.prototype).add.call(this,n,a,i);if("y"===i){var g=v.year(),y=v.month(),p=this.isIntercalaryMonth(g,x),m=this.toMonthIndex(g,x,!(!f||!p));m!==y&&v.month(m)}return v}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,s=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;k.calendars.chinese=T;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(Q,z,e){var k=e(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(13===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,k.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1;return this.newDate(d,s,b-30*(s-1)+1)}}),k.calendars.coptic=l},86825:function(Q,z,e){var k=e(63489);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,k.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,k.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,k.local.invalidYear),400},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,d,s){return(this._validate(b,d,s,k.local.invalidDate).day()+1)%8},weekDay:function(b,d,s){var t=this.dayOfWeek(b,d,s);return t>=2&&t<=6},extraInfo:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);return b=t.year()+(t.year()<0?1:0),d=t.month(),(s=t.day())+(d>1?16:0)+(d>2?32*(d-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var d=Math.floor(b/400)+1;b-=400*(d-1),b+=b>15?16:0;var s=Math.floor(b/32)+1;return this.newDate(d<=0?d-1:d,s,b-32*(s-1)+1)}});var T={20:"Fruitbat",21:"Anchovy"};k.calendars.discworld=l},37715:function(Q,z,e){var k=e(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(13===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,k.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1;return this.newDate(d,s,b-30*(s-1)+1)}}),k.calendars.ethiopian=l},99384:function(Q,z,e){var k=e(63489);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}e(56131)(l.prototype=new k.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return this._leapYear(d.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,k.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear).year(),this.toJD(-1===b?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,d){return b.year&&(d=b.month(),b=b.year()),this._validate(b,d,this.minDay,k.local.invalidMonth),12===d&&this.leapYear(b)||8===d&&5===T(this.daysInYear(b),10)?30:9===d&&3===T(this.daysInYear(b),10)?29:this.daysPerMonth[d-1]},weekDay:function(b,d,s){return 6!==this.dayOfWeek(b,d,s)},extraInfo:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);b=t.year(),d=t.month(),s=t.day();var o=b<=0?b+1:b,r=this.jdEpoch+this._delay1(o)+this._delay2(o)+s+1;if(d<7){for(var n=7;n<=this.monthsInYear(b);n++)r+=this.daysInMonth(b,n);for(n=1;n<d;n++)r+=this.daysInMonth(b,n)}else for(n=7;n<d;n++)r+=this.daysInMonth(b,n);return r},_delay1:function(b){var d=Math.floor((235*b-234)/19),t=29*d+Math.floor((12084+13753*d)/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var d=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-d==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var d=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(-1===d?1:d+1,7,1);)d++;for(var s=b<this.toJD(d,1,1)?7:1;b>this.toJD(d,s,this.daysInMonth(d,s));)s++;var t=b-this.toJD(d,s,1)+1;return this.newDate(d,s,t)}}),k.calendars.hebrew=l},43805:function(Q,z,e){var k=e(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,k.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(12===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return 5!==this.dayOfWeek(T,b,d)},toJD:function(T,b,d){var s=this._validate(T,b,d,k.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(d=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var d=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,d,1)+1;return this.newDate(b,d,s)}}),k.calendars.islamic=l},88874:function(Q,z,e){var k=e(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,k.local.invalidDate);return T=s.year(),b=s.month(),d=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+d-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,d=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*d),t=Math.floor((b-s)/30.6001),o=t-Math.floor(t<14?1:13),r=d-Math.floor(o>2?4716:4715),n=b-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,o,n)}}),k.calendars.julian=l},83290:function(Q,z,e){var k=e(63489);function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function T(d,s){return d-s*Math.floor(d/s)}function b(d,s){return T(d-1,s)+1}e(56131)(l.prototype=new k.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear),!1},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,k.local.invalidYear).year();var s=Math.floor(d/400);return d%=400,d+=d<0?400:0,s+"."+Math.floor(d/20)+"."+d%20},forYear:function(d){if((d=d.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<d.length;t++){var o=parseInt(d[t],10);if(Math.abs(o)>19||t>0&&o<0)throw"Invalid Mayan year";s=20*s+o}return s},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear),18},weekOfYear:function(d,s,t){return this._validate(d,s,t,k.local.invalidDate),0},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear),360},daysInMonth:function(d,s){return this._validate(d,s,this.minDay,k.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(d,s,t){return this._validate(d,s,t,k.local.invalidDate).day()},weekDay:function(d,s,t){return this._validate(d,s,t,k.local.invalidDate),!0},extraInfo:function(d,s,t){var o=this._validate(d,s,t,k.local.invalidDate).toJD(),r=this._toHaab(o),n=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(d){var s=T(8+(d-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(d){return[b(20+(d-=this.jdEpoch),20),b(d+4,13)]},toJD:function(d,s,t){var o=this._validate(d,s,t,k.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(d){d=Math.floor(d)+.5-this.jdEpoch;var s=Math.floor(d/360);d%=360,d+=d<0?360:0;var t=Math.floor(d/20);return this.newDate(s,t,d%20)}}),k.calendars.mayan=l},29108:function(Q,z,e){var k=e(63489),A=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar;var T=k.instance("gregorian");A(l.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return T.leapYear(d.year()+(d.year()<1?1:0)+1469)},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidMonth);(b=t.year())<0&&b++;for(var o=t.day(),r=1;r<t.month();r++)o+=this.daysPerMonth[r-1];return o+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var d=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(d+1,1,1);)d++;for(var s=b-Math.floor(this.toJD(d,1,1)+.5)+1,t=1;s>this.daysInMonth(d,t);)s-=this.daysInMonth(d,t),t++;return this.newDate(d,t,s)}}),k.calendars.nanakshahi=l},55422:function(Q,z,e){var k=e(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[T])return this.daysPerYear;for(var b=0,d=this.minMonth;d<=12;d++)b+=this.NEPALI_CALENDAR_DATA[T][d];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,k.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[T]?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,d){return 6!==this.dayOfWeek(T,b,d)},toJD:function(T,b,d){var s=this._validate(T,b,d,k.local.invalidDate);T=s.year(),b=s.month(),d=s.day();var t=k.instance(),o=0,r=b,n=T;this._createMissingCalendarData(T);var a=T-(r>9||9===r&&d>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(9!==b&&(o=d,r--);9!==r;)r<=0&&(r=12,n--),o+=this.NEPALI_CALENDAR_DATA[n][r],r--;return 9===b?(o+=d-this.NEPALI_CALENDAR_DATA[n][0])<0&&(o+=t.daysInYear(a)):o+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(o,"d").toJD()},fromJD:function(T){var b=k.instance().fromJD(T),d=b.year(),s=b.dayOfYear(),t=d+56;this._createMissingCalendarData(t);for(var o=9,n=this.NEPALI_CALENDAR_DATA[t][o]-this.NEPALI_CALENDAR_DATA[t][0]+1;s>n;)++o>12&&(o=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][o];return this.newDate(t,o,this.NEPALI_CALENDAR_DATA[t][o]-(n-s))},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var d=T-1;d<T+2;d++)void 0===this.NEPALI_CALENDAR_DATA[d]&&(this.NEPALI_CALENDAR_DATA[d]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),k.calendars.nepali=l},94320:function(Q,z,e){var k=e(63489);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}e(56131)(l.prototype=new k.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return 682*((d.year()-(d.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return 5!==this.dayOfWeek(b,d,s)},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);b=t.year(),d=t.month(),s=t.day();var o=b-(b>=0?474:473),r=474+T(o,2820);return s+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(b){var d=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(d/1029983),t=T(d,1029983),o=2820;if(1029982!==t){var r=Math.floor(t/366),n=T(t,366);o=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=o+2820*s+474,i=b-this.toJD(a=a<=0?a-1:a,1,1)+1,c=i<=186?Math.ceil(i/31):Math.ceil((i-6)/30),h=b-this.toJD(a,c,1)+1;return this.newDate(a,c,h)}}),k.calendars.persian=l,k.calendars.jalali=l},31320:function(Q,z,e){var k=e(63489),A=e(56131),l=k.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}A(T.prototype=new k.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var t=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return b=this._t2gYear(t.year()),l.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);return b=this._t2gYear(t.year()),l.toJD(b,t.month(),t.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),k.calendars.taiwan=T},51367:function(Q,z,e){var k=e(63489),A=e(56131),l=k.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}A(T.prototype=new k.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var t=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return b=this._t2gYear(t.year()),l.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate);return b=this._t2gYear(t.year()),l.toJD(b,t.month(),t.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),k.calendars.thai=T},21457:function(Q,z,e){var k=e(63489);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}e(56131)(l.prototype=new k.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,k.local.invalidYear);return 355===this.daysInYear(d.year())},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var d=0,s=1;s<=12;s++)d+=this.daysInMonth(b,s);return d},daysInMonth:function(b,d){for(var s=this._validate(b,d,this.minDay,k.local.invalidMonth).toJD()-24e5+.5,t=0,o=0;o<T.length;o++){if(T[o]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(b,d,s){return 5!==this.dayOfWeek(b,d,s)},toJD:function(b,d,s){var t=this._validate(b,d,s,k.local.invalidDate),o=12*(t.year()-1)+t.month()-15292;return t.day()+T[o-1]-1+24e5-.5},fromJD:function(b){for(var d=b-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>d);t++)s++;var o=s+15292,r=Math.floor((o-1)/12);return this.newDate(r+1,o-12*r,d-T[s-1]+1)},isValid:function(b,d,s){var t=k.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=null!=b.year?b.year:b)>=1276&&b<=1500),t},_validate:function(b,d,s,t){var o=k.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw t.replace(/\{0\}/,this.local.name);return o}}),k.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(Q,z,e){var k=e(56131);function A(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(t,o,r,n){if(this._calendar=t,this._year=o,this._month=r,this._day=n,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,o){return"000000".substring(0,o-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function d(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}k(A.prototype,{instance:function(t,o){t=(t||"gregorian").toLowerCase();var r=this._localCals[t+"-"+(o=o||"")];if(!r&&this.calendars[t]&&(r=new this.calendars[t](o),this._localCals[t+"-"+o]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,o,r,n,a){return(n=(null!=t&&t.year?t.calendar():"string"==typeof n?this.instance(n,a):n)||this.instance()).newDate(t,o,r)},substituteDigits:function(t){return function(o){return(o+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,o){return function(r){for(var n="",a=0;r>0;){var i=r%10;n=(0===i?"":t[i]+o[a])+n,a++,r=Math.floor(r/10)}return 0===n.indexOf(t[1]+o[1])&&(n=n.substr(1)),n||t[0]}}}),k(l.prototype,{newDate:function(t,o,r){return this._calendar.newDate(t??this,o,r)},year:function(t){return 0===arguments.length?this._year:this.set(t,"y")},month:function(t){return 0===arguments.length?this._month:this.set(t,"m")},day:function(t){return 0===arguments.length?this._day:this.set(t,"d")},date:function(t,o,r){if(!this._calendar.isValid(t,o,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=o,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,o){return this._calendar.add(this,t,o)},set:function(t,o){return this._calendar.set(this,t,o)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var o=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return 0===o?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),k(b.prototype,{_validateLevel:0,newDate:function(t,o,r){return null==t?this.today():(t.year&&(this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),o=t.month(),t=t.year()),new l(this,t,o,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+T(Math.abs(o.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,o){var r=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,o,r){return this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,o,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,o,r),o,r)},_add:function(t,o,r){if(this._validateLevel++,"d"===r||"w"===r){var n=t.toJD()+o*("w"===r?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var i=t.year()+("y"===r?o:0),c=t.monthOfYear()+("m"===r?o:0);a=t.day(),"y"===r?(t.month()!==this.fromMonthOfYear(i,c)&&(c=this.newDate(i,t.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(i)),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c)))):"m"===r&&(function(f){for(;c<f.minMonth;)i--,c+=f.monthsInYear(i);for(var x=f.monthsInYear(i);c>x-1+f.minMonth;)i++,c-=x,x=f.monthsInYear(i)}(this),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c))));var h=[i,this.fromMonthOfYear(i,c),a];return this._validateLevel--,h}catch(f){throw this._validateLevel--,f}},_correctAdd:function(t,o,r,n){if(!(this.hasYearZero||"y"!==n&&"m"!==n||0!==o[0]&&t.year()>0==o[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];o=this._add(t,r*a[0]+(r<0?-1:1)*a[1],a[2])}return t.date(o[0],o[1],o[2])},set:function(t,o,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n="y"===r?o:t.year(),a="m"===r?o:t.month(),i="d"===r?o:t.day();return"y"!==r&&"m"!==r||(i=Math.min(i,this.daysInMonth(n,a))),t.date(n,a,i)},isValid:function(t,o,r){this._validateLevel++;var n=this.hasYearZero||0!==t;if(n){var a=this.newDate(t,o,this.minDay);n=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,o,r,n){if(t.year){if(0===this._validateLevel&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(t,o,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,o,r);return this._validateLevel--,a}catch(i){throw this._validateLevel--,i}}}),k(d.prototype=new b,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=o.year()+(o.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,o,r){var n=this.newDate(t,o,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(t,o,r){return(this.dayOfWeek(t,o,r)||7)<6},toJD:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),o=n.month(),r=n.day(),t<0&&t++,o<3&&(o+=12,t--);var a=Math.floor(t/100),i=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(o+1))+r+i-1524.5},fromJD:function(t){var o=Math.floor(t+.5),r=Math.floor((o-1867216.25)/36524.25),n=1524+(r=o+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*a),c=Math.floor((n-i)/30.6001),h=n-i-Math.floor(30.6001*c),f=c-(c>13.5?13:1),x=a-(f>2.5?4716:4715);return x<=0&&x--,this.newDate(x,f,h)},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=Q.exports=new A;s.cdate=l,s.baseCalendar=b,s.calendars.gregorian=d},94338:function(Q,z,e){var k=e(56131),A=e(63489);k(A.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),A.local=A.regionalOptions[""],k(A.cdate.prototype,{formatDate:function(l,T){return"string"!=typeof l&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),k(A.baseCalendar.prototype,{UNIX_EPOCH:A.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:A.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,b){if("string"!=typeof l&&(b=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw A.local.invalidFormat||A.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var d,s,t,o=(b=b||{}).dayNamesShort||this.local.dayNamesShort,r=b.dayNames||this.local.dayNames,n=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,i=b.monthNames||this.local.monthNames,c=function(u,S){for(var _=1;w+_<l.length&&l.charAt(w+_)===u;)_++;return w+=_-1,Math.floor(_/(S||1))>1},h=function(u,S,_,E){var L=""+S;if(c(u,E))for(;L.length<_;)L="0"+L;return L},f=this,v=function(u,S){return S?"function"==typeof i?i.call(f,u):i[u.month()-f.minMonth]:"function"==typeof a?a.call(f,u):a[u.month()-f.minMonth]},g=this.local.digits,y=function(u){return b.localNumbers&&g?g(u):u},p="",m=!1,w=0;w<l.length;w++)if(m)"'"!==l.charAt(w)||c("'")?p+=l.charAt(w):m=!1;else switch(l.charAt(w)){case"d":p+=y(h("d",T.day(),2));break;case"D":p+=(d=T.dayOfWeek(),s=o,t=r,c("D")?t[d]:s[d]);break;case"o":p+=h("o",T.dayOfYear(),3);break;case"w":p+=h("w",T.weekOfYear(),2);break;case"m":p+=(u=T,"function"==typeof n?n.call(f,u,c("m")):y(h("m",u.month(),2)));break;case"M":p+=v(T,c("M"));break;case"y":p+=c("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":c("Y",2),p+=T.formatYear();break;case"J":p+=T.toJD();break;case"@":p+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":p+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?p+="'":m=!0;break;default:p+=l.charAt(w)}var u;return p},parseDate:function(l,T,b){if(null==T)throw A.local.invalidArguments||A.regionalOptions[""].invalidArguments;if(""===(T="object"==typeof T?T.toString():T+""))return null;l=l||this.local.dateFormat;var d=(b=b||{}).shortYearCutoff||this.shortYearCutoff;d="string"!=typeof d?d:this.today().year()%100+parseInt(d,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,o=b.parseMonth||this.local.parseMonth,r=b.monthNumbers||this.local.monthNumbers,n=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,i=-1,c=-1,h=-1,f=-1,x=-1,v=!1,g=!1,y=function(I,j){for(var R=1;L+R<l.length&&l.charAt(L+R)===I;)R++;return L+=R-1,Math.floor(R/(j||1))>1},p=function(I,j){var R=y(I,j),H=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+H+"}"),U=T.substring(E).match(F);if(!U)throw(A.local.missingNumberAt||A.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=U[0].length,parseInt(U[0],10)},m=this,w=function(){if("function"==typeof r){y("m");var I=r.call(m,T.substring(E));return E+=I.length,I}return p("m")},u=function(I,j,R,H){for(var F=y(I,H)?R:j,U=0;U<F.length;U++)if(T.substr(E,F[U].length).toLowerCase()===F[U].toLowerCase())return E+=F[U].length,U+m.minMonth;throw(A.local.unknownNameAt||A.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if("function"==typeof a){var I=y("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=I.length,I}return u("M",n,a)},_=function(){if(T.charAt(E)!==l.charAt(L))throw(A.local.unexpectedLiteralAt||A.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(g)"'"!==l.charAt(L)||y("'")?_():g=!1;else switch(l.charAt(L)){case"d":f=p("d");break;case"D":u("D",s,t);break;case"o":x=p("o");break;case"w":p("w");break;case"m":h=w();break;case"M":h=S();break;case"y":var C=L;v=!y("y",2),L=C,c=p("y",2);break;case"Y":c=p("Y",2);break;case"J":i=p("J")+.5,"."===T.charAt(E)&&(E++,p("J"));break;case"@":i=p("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":i=p("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?_():g=!0;break;default:_()}if(E<T.length)throw A.local.unexpectedText||A.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&v&&(c+=-1===d?1900:this.today().year()-this.today().year()%100-(c<=d?0:100)),"string"==typeof h&&(h=o.call(this,c,h)),x>-1){f=x;for(var P=this.daysInMonth(c,h=1);f>P;P=this.daysInMonth(c,h))h++,f-=P}return i>-1?this.fromJD(i):this.newDate(c,h,f)},determineDate:function(l,T,b,d,s){b&&"object"!=typeof b&&(s=d,d=b,b=null),"string"!=typeof d&&(s=d,d="");var t=this;return T=T?T.newDate():null,null==l?T:"string"==typeof l?function(o){try{return t.parseDate(d,o,s)}catch{}for(var r=((o=o.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(o);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(o);return r}(l):"number"==typeof l?isNaN(l)||l===1/0||l===-1/0?T:t.today().add(l,"d"):t.newDate(l)}})},69862:function(){},40964:function(){},72077:function(Q,z,e){"use strict";var k=e(24696);Q.exports=function(){return k(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(A){return"function"==typeof e.g[A]})}},81684:function(Q,z,e){"use strict";function k(se,fe,Ee){se.prototype=fe.prototype=Ee,Ee.constructor=se}function A(se,fe){var Ee=Object.create(se.prototype);for(var de in fe)Ee[de]=fe[de];return Ee}function l(){}e.d(z,{sX:function(){return ye},k4:function(){return X}});var T=.7,b=1/T,d="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(d,",").concat(d,",").concat(d,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(d,",").concat(d,",").concat(d,",").concat(s,"\\)$")),i=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),h=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function g(se){var fe,Ee;return se=(se+"").trim().toLowerCase(),(fe=o.exec(se))?(Ee=fe[1].length,fe=parseInt(fe[1],16),6===Ee?y(fe):3===Ee?new u(fe>>8&15|fe>>4&240,fe>>4&15|240&fe,(15&fe)<<4|15&fe,1):8===Ee?p(fe>>24&255,fe>>16&255,fe>>8&255,(255&fe)/255):4===Ee?p(fe>>12&15|fe>>8&240,fe>>8&15|fe>>4&240,fe>>4&15|240&fe,((15&fe)<<4|15&fe)/255):null):(fe=r.exec(se))?new u(fe[1],fe[2],fe[3],1):(fe=n.exec(se))?new u(255*fe[1]/100,255*fe[2]/100,255*fe[3]/100,1):(fe=a.exec(se))?p(fe[1],fe[2],fe[3],fe[4]):(fe=i.exec(se))?p(255*fe[1]/100,255*fe[2]/100,255*fe[3]/100,fe[4]):(fe=c.exec(se))?P(fe[1],fe[2]/100,fe[3]/100,1):(fe=h.exec(se))?P(fe[1],fe[2]/100,fe[3]/100,fe[4]):f.hasOwnProperty(se)?y(f[se]):"transparent"===se?new u(NaN,NaN,NaN,0):null}function y(se){return new u(se>>16&255,se>>8&255,255&se,1)}function p(se,fe,Ee,de){return de<=0&&(se=fe=Ee=NaN),new u(se,fe,Ee,de)}function w(se,fe,Ee,de){return 1===arguments.length?function m(se){return se instanceof l||(se=g(se)),se?new u((se=se.rgb()).r,se.g,se.b,se.opacity):new u}(se):new u(se,fe,Ee,de??1)}function u(se,fe,Ee,de){this.r=+se,this.g=+fe,this.b=+Ee,this.opacity=+de}function S(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function _(){var se=E(this.opacity);return"".concat(1===se?"rgb(":"rgba(").concat(L(this.r),", ").concat(L(this.g),", ").concat(L(this.b)).concat(1===se?")":", ".concat(se,")"))}function E(se){return isNaN(se)?1:Math.max(0,Math.min(1,se))}function L(se){return Math.max(0,Math.min(255,Math.round(se)||0))}function C(se){return((se=L(se))<16?"0":"")+se.toString(16)}function P(se,fe,Ee,de){return de<=0?se=fe=Ee=NaN:Ee<=0||Ee>=1?se=fe=NaN:fe<=0&&(se=NaN),new j(se,fe,Ee,de)}function I(se){if(se instanceof j)return new j(se.h,se.s,se.l,se.opacity);if(se instanceof l||(se=g(se)),!se)return new j;if(se instanceof j)return se;var fe=(se=se.rgb()).r/255,Ee=se.g/255,de=se.b/255,we=Math.min(fe,Ee,de),ke=Math.max(fe,Ee,de),Te=NaN,$=ke-we,oe=(ke+we)/2;return $?(Te=fe===ke?(Ee-de)/$+6*(Ee<de):Ee===ke?(de-fe)/$+2:(fe-Ee)/$+4,$/=oe<.5?ke+we:2-ke-we,Te*=60):$=oe>0&&oe<1?0:Te,new j(Te,$,oe,se.opacity)}function j(se,fe,Ee,de){this.h=+se,this.s=+fe,this.l=+Ee,this.opacity=+de}function R(se){return(se=(se||0)%360)<0?se+360:se}function H(se){return Math.max(0,Math.min(1,se||0))}function F(se,fe,Ee){return 255*(se<60?fe+(Ee-fe)*se/60:se<180?Ee:se<240?fe+(Ee-fe)*(240-se)/60:fe)}function U(se,fe,Ee,de,we){var ke=se*se,Te=ke*se;return((1-3*se+3*ke-Te)*fe+(4-6*ke+3*Te)*Ee+(1+3*se+3*ke-3*Te)*de+Te*we)/6}k(l,g,{copy:function(se){return Object.assign(new this.constructor,this,se)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return I(this).formatHsl()},formatRgb:v,toString:v}),k(u,w,A(l,{brighter:function(se){return se=null==se?b:Math.pow(b,se),new u(this.r*se,this.g*se,this.b*se,this.opacity)},darker:function(se){return se=null==se?T:Math.pow(T,se),new u(this.r*se,this.g*se,this.b*se,this.opacity)},rgb:function(){return this},clamp:function(){return new u(L(this.r),L(this.g),L(this.b),E(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:_,toString:_})),k(j,function(se,fe,Ee,de){return 1===arguments.length?I(se):new j(se,fe,Ee,de??1)},A(l,{brighter:function(se){return se=null==se?b:Math.pow(b,se),new j(this.h,this.s,this.l*se,this.opacity)},darker:function(se){return se=null==se?T:Math.pow(T,se),new j(this.h,this.s,this.l*se,this.opacity)},rgb:function(){var se=this.h%360+360*(this.h<0),fe=isNaN(se)||isNaN(this.s)?0:this.s,Ee=this.l,de=Ee+(Ee<.5?Ee:1-Ee)*fe,we=2*Ee-de;return new u(F(se>=240?se-240:se+120,we,de),F(se,we,de),F(se<120?se+240:se-120,we,de),this.opacity)},clamp:function(){return new j(R(this.h),H(this.s),H(this.l),E(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var se=E(this.opacity);return"".concat(1===se?"hsl(":"hsla(").concat(R(this.h),", ").concat(100*H(this.s),"%, ").concat(100*H(this.l),"%").concat(1===se?")":", ".concat(se,")"))}}));var B=function(se){return function(){return se}};function N(se,fe){var de,we,Ee=fe-se;return Ee?(de=se,we=Ee,function(ke){return de+ke*we}):B(isNaN(se)?fe:se)}var J=function se(fe){var we,Ee=1==(we=+(we=fe))?N:function(ke,Te){return Te-ke?($=ke,oe=Te,he=we,$=Math.pow($,he),oe=Math.pow(oe,he)-$,he=1/he,function(me){return Math.pow($+me*oe,he)}):B(isNaN(ke)?Te:ke);var $,oe,he};function de(we,ke){var Te=Ee((we=w(we)).r,(ke=w(ke)).r),$=Ee(we.g,ke.g),oe=Ee(we.b,ke.b),he=N(we.opacity,ke.opacity);return function(me){return we.r=Te(me),we.g=$(me),we.b=oe(me),we.opacity=he(me),we+""}}return de.gamma=se,de}(1);function Z(se){return function(fe){var Ee,de,we=fe.length,ke=new Array(we),Te=new Array(we),$=new Array(we);for(Ee=0;Ee<we;++Ee)de=w(fe[Ee]),ke[Ee]=de.r||0,Te[Ee]=de.g||0,$[Ee]=de.b||0;return ke=se(ke),Te=se(Te),$=se($),de.opacity=1,function(oe){return de.r=ke(oe),de.g=Te(oe),de.b=$(oe),de+""}}}function V(se,fe){var Ee,de=fe?fe.length:0,we=se?Math.min(de,se.length):0,ke=new Array(we),Te=new Array(de);for(Ee=0;Ee<we;++Ee)ke[Ee]=ye(se[Ee],fe[Ee]);for(;Ee<de;++Ee)Te[Ee]=fe[Ee];return function($){for(Ee=0;Ee<we;++Ee)Te[Ee]=ke[Ee]($);return Te}}function W(se,fe){var Ee=new Date;return se=+se,fe=+fe,function(de){return Ee.setTime(se*(1-de)+fe*de),Ee}}function X(se,fe){return se=+se,fe=+fe,function(Ee){return se*(1-Ee)+fe*Ee}}function K(se){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(se)}function ne(se,fe){var Ee,de={},we={};for(Ee in null!==se&&"object"===K(se)||(se={}),null!==fe&&"object"===K(fe)||(fe={}),fe)Ee in se?de[Ee]=ye(se[Ee],fe[Ee]):we[Ee]=fe[Ee];return function(ke){for(Ee in de)we[Ee]=de[Ee](ke);return we}}Z(function(se){var fe=se.length-1;return function(Ee){var de=Ee<=0?Ee=0:Ee>=1?(Ee=1,fe-1):Math.floor(Ee*fe),we=se[de],ke=se[de+1];return U((Ee-de/fe)*fe,de>0?se[de-1]:2*we-ke,we,ke,de<fe-1?se[de+2]:2*ke-we)}}),Z(function(se){var fe=se.length;return function(Ee){var de=Math.floor(((Ee%=1)<0?++Ee:Ee)*fe);return U((Ee-de/fe)*fe,se[(de+fe-1)%fe],se[de%fe],se[(de+1)%fe],se[(de+2)%fe])}});var re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ae=new RegExp(re.source,"g");function le(se,fe){var Ee,de,we,he,ke=re.lastIndex=ae.lastIndex=0,Te=-1,$=[],oe=[];for(se+="",fe+="";(Ee=re.exec(se))&&(de=ae.exec(fe));)(we=de.index)>ke&&(we=fe.slice(ke,we),$[Te]?$[Te]+=we:$[++Te]=we),(Ee=Ee[0])===(de=de[0])?$[Te]?$[Te]+=de:$[++Te]=de:($[++Te]=null,oe.push({i:Te,x:X(Ee,de)})),ke=ae.lastIndex;return ke<fe.length&&(we=fe.slice(ke),$[Te]?$[Te]+=we:$[++Te]=we),$.length<2?oe[0]?(he=oe[0].x,function(me){return he(me)+""}):function(he){return function(){return he}}(fe):(fe=oe.length,function(he){for(var me,Me=0;Me<fe;++Me)$[(me=oe[Me]).i]=me.x(he);return $.join("")})}function pe(se,fe){fe||(fe=[]);var Ee,de=se?Math.min(fe.length,se.length):0,we=fe.slice();return function(ke){for(Ee=0;Ee<de;++Ee)we[Ee]=se[Ee]*(1-ke)+fe[Ee]*ke;return we}}function xe(se){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(se)}function ye(se,fe){var Ee,de,we=xe(fe);return null==fe||"boolean"===we?B(fe):("number"===we?X:"string"===we?(Ee=g(fe))?(fe=Ee,J):le:fe instanceof g?J:fe instanceof Date?W:(de=fe,!ArrayBuffer.isView(de)||de instanceof DataView?Array.isArray(fe)?V:"function"!=typeof fe.valueOf&&"function"!=typeof fe.toString||isNaN(fe)?ne:X:pe))(se,fe)}},40402:function(Q){"use strict";Q.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(Q){"use strict";Q.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(Q){"use strict";Q.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(Q){"use strict";Q.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(Q){"use strict";Q.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(Q){"use strict";Q.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},vl={};function As(Q){var z=vl[Q];if(void 0!==z)return z.exports;var e=vl[Q]={exports:{}};return oc[Q].call(e.exports,e,e.exports,As),e.exports}return As.n=function(Q){var z=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return As.d(z,{a:z}),z},As.d=function(Q,z){for(var e in z)As.o(z,e)&&!As.o(Q,e)&&Object.defineProperty(Q,e,{enumerable:!0,get:z[e]})},As.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),As.o=function(Q,z){return Object.prototype.hasOwnProperty.call(Q,z)},As.r=function(Q){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},As(27909)}()});